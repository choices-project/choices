ddl
"CREATE TABLE analytics_contributions (
    age_bucket TEXT,
    consent_granted BOOLEAN DEFAULT false,
    participation_time interval,
    vote_choice INTEGER,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    poll_id UUID,
    user_id UUID,
    region_bucket TEXT,
    education_bucket TEXT,
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE analytics_demographics (
    poll_id TEXT NOT NULL,
    demographic_key USER-DEFINED NOT NULL,
    demographic_value TEXT NOT NULL,
    vote_count INTEGER DEFAULT 0,
    created_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP,
    id UUID NOT NULL DEFAULT uuid_generate_v4()
);"
"CREATE TABLE analytics_events (
    id UUID NOT NULL DEFAULT uuid_generate_v4(),
    event_type USER-DEFINED NOT NULL,
    poll_id TEXT,
    user_id UUID,
    metadata JSONB,
    created_at TIMESTAMPTZ DEFAULT CURRENT_TIMESTAMP
);"
"CREATE TABLE audit_logs (
    ip_address inet,
    old_values JSONB,
    record_id UUID,
    table_name TEXT,
    action TEXT NOT NULL,
    user_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    new_values JSONB,
    created_at TIMESTAMPTZ DEFAULT now(),
    user_agent TEXT
);"
"CREATE TABLE bias_detection_logs (
    media_poll_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    created_at TIMESTAMPTZ DEFAULT now(),
    metadata JSONB DEFAULT '{}'::jsonb,
    recommendations JSONB DEFAULT '[]'::jsonb,
    impact_score NUMERIC(3,2) DEFAULT 0,
    evidence JSONB DEFAULT '[]'::jsonb,
    description TEXT NOT NULL,
    severity TEXT DEFAULT 'low'::text,
    detection_type TEXT NOT NULL
);"
"CREATE TABLE biometric_auth_logs (
    device_info JSONB,
    location_info JSONB,
    risk_score NUMERIC(3,2) DEFAULT 0.0,
    created_at TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    user_id UUID,
    credential_id TEXT,
    authentication_result BOOLEAN NOT NULL,
    failure_reason TEXT,
    ip_address inet,
    user_agent TEXT
);"
"CREATE TABLE biometric_trust_scores (
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    behavior_score NUMERIC(3,2) DEFAULT 0.0,
    device_consistency_score NUMERIC(3,2) DEFAULT 0.0,
    base_score NUMERIC(3,2) DEFAULT 0.0,
    user_id UUID,
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    last_calculated_at TIMESTAMPTZ DEFAULT now(),
    overall_score NUMERIC(3,2) DEFAULT 0.0,
    location_score NUMERIC(3,2) DEFAULT 0.0
);"
"CREATE TABLE breaking_news (
    source_reliability NUMERIC(3,2) DEFAULT 0.9,
    source_url TEXT,
    category ARRAY DEFAULT '{}'::text[],
    summary TEXT NOT NULL,
    full_story TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    metadata JSONB DEFAULT '{}'::jsonb,
    entities JSONB DEFAULT '{}'::jsonb,
    sentiment TEXT DEFAULT 'neutral'::text,
    urgency TEXT DEFAULT 'medium'::text,
    source_name TEXT NOT NULL,
    headline TEXT NOT NULL
);"
"CREATE TABLE campaign_finance (
    quality_score NUMERIC(3,2) DEFAULT 0.0,
    cycle INTEGER NOT NULL,
    total_receipts NUMERIC(15,2) DEFAULT 0.0,
    total_disbursements NUMERIC(15,2) DEFAULT 0.0,
    cash_on_hand NUMERIC(15,2) DEFAULT 0.0,
    debt NUMERIC(15,2) DEFAULT 0.0,
    individual_contributions NUMERIC(15,2) DEFAULT 0.0,
    pac_contributions NUMERIC(15,2) DEFAULT 0.0,
    party_contributions NUMERIC(15,2) DEFAULT 0.0,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    committee_name TEXT,
    license_key TEXT,
    provenance JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ DEFAULT now(),
    data_sources ARRAY NOT NULL,
    corporate_donor_percentage NUMERIC(5,2) DEFAULT 0.0,
    top_donor_percentage NUMERIC(5,2) DEFAULT 0.0,
    independence_score NUMERIC(3,2) DEFAULT 0.0,
    self_financing NUMERIC(15,2) DEFAULT 0.0,
    candidate_id UUID,
    committee_id TEXT
);"
"CREATE TABLE candidate_jurisdictions (
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    source TEXT NOT NULL,
    candidate_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    effective_to date,
    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    effective_from date,
    role TEXT NOT NULL,
    ocd_division_id TEXT NOT NULL
);"
"CREATE TABLE candidates (
    website TEXT,
    license_key TEXT,
    provenance JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ DEFAULT now(),
    quality_score NUMERIC(3,2) DEFAULT 0.0,
    data_sources ARRAY NOT NULL,
    verification_date TIMESTAMPTZ,
    verification_method TEXT,
    verified BOOLEAN DEFAULT false,
    jurisdiction_ids ARRAY,
    ocd_division_id TEXT,
    social_media JSONB DEFAULT '{}'::jsonb,
    photo_url TEXT,
    phone TEXT,
    email TEXT,
    level TEXT NOT NULL,
    district TEXT,
    state TEXT NOT NULL,
    chamber TEXT,
    office TEXT NOT NULL,
    party TEXT,
    last_name TEXT,
    first_name TEXT,
    name TEXT NOT NULL,
    canonical_id TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE civic_jurisdictions (
    parent_ocd_id TEXT,
    jurisdiction_type TEXT,
    level TEXT NOT NULL,
    name TEXT NOT NULL,
    ocd_division_id TEXT NOT NULL,
    state_code TEXT,
    country_code TEXT DEFAULT 'US'::text,
    county_name TEXT,
    city_name TEXT,
    geo_scope TEXT,
    centroid_lat NUMERIC(9,6),
    centroid_lon NUMERIC(9,6),
    bounding_box JSONB,
    population INTEGER,
    source TEXT NOT NULL DEFAULT 'import'::text,
    last_refreshed TIMESTAMPTZ NOT NULL DEFAULT now(),
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb
);"
"CREATE TABLE civics_addresses (
    lng DOUBLE PRECISION,
    pepper_version SMALLINT NOT NULL DEFAULT 1,
    expires_at TIMESTAMPTZ NOT NULL DEFAULT (now() + '01:00:00'::interval),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    address_hash TEXT NOT NULL,
    normalized_address TEXT NOT NULL,
    state TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    district TEXT,
    sources ARRAY DEFAULT ARRAY['google-civic'::text],
    reps JSONB,
    lat DOUBLE PRECISION
);"
"CREATE TABLE civics_campaign_finance (
    district TEXT,
    office TEXT NOT NULL,
    candidate_name TEXT NOT NULL,
    candidate_id TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    raw_data JSONB,
    cycle INTEGER NOT NULL,
    party TEXT,
    state TEXT
);"
"CREATE TABLE civics_contact_info (
    preferred_contact_method TEXT DEFAULT 'email'::text,
    response_time_expectation TEXT DEFAULT 'within_week'::text,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    representative_id UUID NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    last_verified TIMESTAMPTZ,
    data_quality_score INTEGER DEFAULT 0,
    official_email TEXT,
    official_phone TEXT,
    official_fax TEXT,
    official_website TEXT,
    office_addresses JSONB DEFAULT '[]'::jsonb
);"
"CREATE TABLE civics_divisions (
    chamber TEXT NOT NULL,
    ocd_division_id TEXT NOT NULL,
    last_updated TIMESTAMPTZ DEFAULT now(),
    name TEXT,
    district_number INTEGER,
    state TEXT,
    level TEXT NOT NULL
);"
"CREATE TABLE civics_expected_counts (
    count_date date NOT NULL DEFAULT CURRENT_DATE,
    drift_percentage NUMERIC(5,2),
    is_within_threshold BOOLEAN,
    created_at TIMESTAMPTZ DEFAULT now(),
    id INTEGER NOT NULL DEFAULT nextval('civics_expected_counts_id_seq'::regclass),
    level TEXT NOT NULL,
    jurisdiction TEXT NOT NULL,
    expected_count INTEGER NOT NULL,
    actual_count INTEGER
);"
"CREATE TABLE civics_fec_minimal (
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    id INTEGER NOT NULL DEFAULT nextval('civics_fec_minimal_id_seq'::regclass),
    person_id UUID,
    fec_candidate_id TEXT NOT NULL,
    election_cycle INTEGER NOT NULL,
    total_receipts NUMERIC(15,2) DEFAULT 0,
    cash_on_hand NUMERIC(15,2) DEFAULT 0,
    data_source TEXT DEFAULT 'fec_api'::text
);"
"CREATE TABLE civics_person_xref (
    propublica_id TEXT,
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ DEFAULT now(),
    person_id UUID NOT NULL DEFAULT gen_random_uuid(),
    bioguide TEXT,
    govtrack_id INTEGER,
    openstates_id TEXT,
    fec_candidate_id TEXT
);"
"CREATE TABLE civics_policy_positions (
    representative_id UUID NOT NULL,
    source_url TEXT,
    source TEXT,
    confidence_score NUMERIC(5,2) DEFAULT 0.00,
    position TEXT NOT NULL,
    issue TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ
);"
"CREATE TABLE civics_quality_thresholds (
    max_freshness_days INTEGER DEFAULT 7,
    min_quality_score INTEGER DEFAULT 85,
    created_at TIMESTAMPTZ DEFAULT now(),
    level TEXT NOT NULL,
    alert_threshold_percentage NUMERIC(5,2) DEFAULT 2.0,
    id INTEGER NOT NULL DEFAULT nextval('civics_quality_thresholds_id_seq'::regclass)
);"
"CREATE TABLE civics_representatives (
    valid_to TIMESTAMPTZ DEFAULT 'infinity'::timestamp with time zone,
    ocd_division_id TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    name TEXT NOT NULL,
    party TEXT,
    office TEXT NOT NULL,
    level TEXT,
    contact JSONB,
    raw_payload JSONB NOT NULL,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    person_id UUID,
    source TEXT,
    external_id TEXT,
    data_origin TEXT DEFAULT 'api'::text,
    valid_from TIMESTAMPTZ DEFAULT now(),
    district TEXT,
    jurisdiction TEXT
);"
"CREATE TABLE civics_social_engagement (
    engagement_rate NUMERIC(5,2) DEFAULT 0.00,
    followers_count INTEGER DEFAULT 0,
    handle TEXT NOT NULL,
    platform TEXT NOT NULL,
    representative_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ
);"
"CREATE TABLE civics_source_precedence (
    is_active BOOLEAN DEFAULT true,
    source TEXT NOT NULL,
    precedence_order INTEGER NOT NULL,
    level TEXT NOT NULL
);"
"CREATE TABLE civics_votes (
    created_at TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    representative_id UUID,
    bill_id TEXT NOT NULL,
    bill_title TEXT,
    vote_position TEXT NOT NULL,
    vote_date date NOT NULL,
    chamber TEXT NOT NULL,
    session TEXT,
    raw_data JSONB
);"
"CREATE TABLE civics_votes_minimal (
    id INTEGER NOT NULL DEFAULT nextval('civics_votes_minimal_id_seq'::regclass),
    chamber TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    person_id UUID,
    vote_id TEXT NOT NULL,
    bill_title TEXT,
    vote_date date NOT NULL,
    vote_position TEXT NOT NULL,
    party_position TEXT,
    last_updated TIMESTAMPTZ DEFAULT now(),
    data_source TEXT DEFAULT 'govtrack_api'::text
);"
"CREATE TABLE civics_voting_behavior (
    analysis_period TEXT NOT NULL,
    representative_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    bipartisanship_score NUMERIC(5,2) DEFAULT 0.00,
    party_loyalty_score NUMERIC(5,2) DEFAULT 0.00,
    attendance_rate NUMERIC(5,2) DEFAULT 0.00,
    missed_votes INTEGER DEFAULT 0,
    bipartisan_votes INTEGER DEFAULT 0,
    party_line_votes INTEGER DEFAULT 0,
    total_votes INTEGER DEFAULT 0
);"
"CREATE TABLE contributions (
    license_key TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    candidate_id UUID,
    committee_id TEXT,
    contributor_name_hash TEXT,
    contributor_city TEXT,
    contributor_state TEXT,
    contributor_zip5 TEXT,
    contributor_employer TEXT,
    contributor_occupation TEXT,
    amount NUMERIC(15,2) NOT NULL,
    contribution_date date NOT NULL,
    contribution_type TEXT,
    sector TEXT,
    industry TEXT,
    quality_score NUMERIC(3,2) DEFAULT 0.0,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    retention_until date,
    data_sources ARRAY NOT NULL,
    provenance JSONB DEFAULT '{}'::jsonb
);"
"CREATE TABLE data_checksums (
    calculated_at TIMESTAMPTZ NOT NULL,
    data_snapshot JSONB,
    checksum_value TEXT NOT NULL,
    checksum_type TEXT NOT NULL,
    record_id UUID NOT NULL,
    table_name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE data_licenses (
    attribution_text TEXT NOT NULL,
    display_requirements TEXT,
    cache_ttl_seconds INTEGER,
    source_name TEXT NOT NULL,
    license_key TEXT NOT NULL,
    usage_restrictions JSONB,
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE data_lineage (
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    success BOOLEAN DEFAULT false,
    error_message TEXT,
    retry_count INTEGER DEFAULT 0,
    created_at TIMESTAMPTZ DEFAULT now(),
    target_table TEXT NOT NULL,
    source_record_id UUID NOT NULL,
    target_data_hash TEXT,
    source_data_hash TEXT,
    transformation_params JSONB,
    transformation_version TEXT NOT NULL,
    transformation_type TEXT NOT NULL,
    target_record_id UUID NOT NULL,
    processing_duration_ms INTEGER,
    processing_completed_at TIMESTAMPTZ,
    processing_started_at TIMESTAMPTZ NOT NULL,
    source_table TEXT NOT NULL
);"
"CREATE TABLE data_quality_audit (
    completeness_score NUMERIC(3,2) DEFAULT 0.0,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    table_name TEXT NOT NULL,
    record_id UUID NOT NULL,
    accuracy_score NUMERIC(3,2) DEFAULT 0.0,
    consistency_score NUMERIC(3,2) DEFAULT 0.0,
    timeliness_score NUMERIC(3,2) DEFAULT 0.0,
    overall_score NUMERIC(3,2) DEFAULT 0.0,
    primary_source TEXT,
    secondary_sources ARRAY,
    conflict_resolution TEXT,
    last_validation TIMESTAMPTZ DEFAULT now(),
    validation_method TEXT,
    issues_found ARRAY,
    resolved_issues ARRAY,
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE data_quality_checks (
    severity TEXT,
    error_message TEXT,
    check_version TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    check_executed_at TIMESTAMPTZ NOT NULL,
    suggested_fix TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    check_name TEXT NOT NULL,
    check_type TEXT NOT NULL,
    table_name TEXT NOT NULL,
    record_id UUID,
    check_params JSONB,
    expected_result TEXT,
    actual_result TEXT,
    passed BOOLEAN NOT NULL
);"
"CREATE TABLE data_sources (
    reliability NUMERIC(3,2) DEFAULT 0.9,
    api_key TEXT,
    api_endpoint TEXT,
    type TEXT NOT NULL,
    name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    success_rate NUMERIC(5,2) DEFAULT 100.0,
    error_count INTEGER DEFAULT 0,
    last_updated TIMESTAMPTZ DEFAULT now(),
    is_active BOOLEAN DEFAULT true,
    rate_limit INTEGER DEFAULT 1000
);"
"CREATE TABLE data_transformations (
    created_at TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    transformation_name TEXT NOT NULL,
    transformation_version TEXT NOT NULL,
    source_system TEXT NOT NULL,
    target_system TEXT NOT NULL,
    transformation_sql TEXT,
    transformation_params JSONB,
    input_records_count INTEGER,
    output_records_count INTEGER,
    error_records_count INTEGER,
    processing_started_at TIMESTAMPTZ NOT NULL,
    processing_completed_at TIMESTAMPTZ,
    processing_duration_ms INTEGER,
    success BOOLEAN DEFAULT false,
    error_message TEXT,
    retry_count INTEGER DEFAULT 0
);"
"CREATE TABLE dbt_freshness_sla (
    last_success TIMESTAMPTZ,
    last_check TIMESTAMPTZ,
    enabled BOOLEAN DEFAULT true,
    warning_threshold_hours INTEGER,
    max_age_hours INTEGER NOT NULL,
    table_name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    consecutive_failures INTEGER DEFAULT 0,
    last_failure TIMESTAMPTZ
);"
"CREATE TABLE dbt_test_config (
    severity TEXT DEFAULT 'error'::text,
    test_config JSONB DEFAULT '{}'::jsonb,
    column_name TEXT,
    table_name TEXT NOT NULL,
    test_type TEXT NOT NULL,
    test_name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    enabled BOOLEAN DEFAULT true
);"
"CREATE TABLE dbt_test_execution_log (
    executed_at TIMESTAMPTZ DEFAULT now(),
    execution_time_ms INTEGER,
    message TEXT,
    status TEXT NOT NULL,
    test_name TEXT NOT NULL,
    execution_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE dbt_test_results (
    created_at TIMESTAMPTZ DEFAULT now(),
    executed_at TIMESTAMPTZ DEFAULT now(),
    execution_time_ms INTEGER,
    rows_affected BIGINT,
    message TEXT,
    status TEXT NOT NULL,
    test_config JSONB DEFAULT '{}'::jsonb,
    column_name TEXT,
    table_name TEXT NOT NULL,
    test_type TEXT NOT NULL,
    test_name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE elections (
    jurisdiction_ids ARRAY,
    status TEXT DEFAULT 'upcoming'::text,
    results_available BOOLEAN DEFAULT false,
    data_sources ARRAY NOT NULL,
    quality_score NUMERIC(3,2) DEFAULT 0.0,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    provenance JSONB DEFAULT '{}'::jsonb,
    license_key TEXT,
    ocd_division_id TEXT,
    early_voting_end date,
    early_voting_start date,
    registration_deadline date,
    election_date date NOT NULL,
    district TEXT,
    state TEXT NOT NULL,
    level TEXT NOT NULL,
    type TEXT NOT NULL,
    name TEXT NOT NULL,
    canonical_id TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE error_logs (
    user_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    created_at TIMESTAMPTZ DEFAULT now(),
    severity TEXT NOT NULL,
    context JSONB DEFAULT '{}'::jsonb,
    stack_trace TEXT,
    error_message TEXT NOT NULL,
    error_type TEXT NOT NULL
);"
"CREATE TABLE fact_check_sources (
    name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    api_endpoint TEXT,
    fact_check_rating TEXT DEFAULT 'unknown'::text,
    bias TEXT,
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    metadata JSONB DEFAULT '{}'::jsonb,
    is_active BOOLEAN DEFAULT true,
    api_key TEXT,
    reliability NUMERIC(3,2) DEFAULT 0.5,
    url TEXT
);"
"CREATE TABLE fec_candidate_committee (
    committee_designation TEXT,
    committee_type TEXT,
    committee_name TEXT,
    cycle INTEGER NOT NULL,
    designation TEXT,
    fec_committee_id TEXT NOT NULL,
    fec_candidate_id TEXT NOT NULL,
    candidate_name TEXT,
    candidate_office TEXT,
    candidate_state TEXT,
    candidate_district TEXT,
    candidate_party TEXT,
    candidate_status TEXT,
    candidate_incumbent_challenge_status TEXT,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    committee_organization_type TEXT
);"
"CREATE TABLE fec_candidates (
    debt NUMERIC(15,2) DEFAULT 0.0,
    state TEXT,
    party TEXT,
    office TEXT,
    name TEXT NOT NULL,
    candidate_id TEXT NOT NULL,
    incumbent_challenge_status TEXT,
    candidate_status TEXT,
    candidate_inactive TEXT,
    election_years ARRAY,
    election_districts ARRAY,
    first_file_date date,
    last_file_date date,
    last_f2_date date,
    active_through INTEGER,
    principal_committees ARRAY,
    authorized_committees ARRAY,
    total_receipts NUMERIC(15,2) DEFAULT 0.0,
    total_disbursements NUMERIC(15,2) DEFAULT 0.0,
    cash_on_hand NUMERIC(15,2) DEFAULT 0.0,
    district TEXT,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    data_source TEXT DEFAULT 'fec'::text,
    is_efiling BOOLEAN DEFAULT false,
    is_processed BOOLEAN DEFAULT true,
    provenance JSONB DEFAULT '{}'::jsonb
);"
"CREATE TABLE fec_committees (
    provenance JSONB DEFAULT '{}'::jsonb,
    custodian_name TEXT,
    treasurer_zip TEXT,
    treasurer_state TEXT,
    treasurer_city TEXT,
    treasurer_name TEXT,
    committee_district TEXT,
    committee_state TEXT,
    committee_party TEXT,
    committee_organization_type TEXT,
    committee_designation TEXT,
    committee_type TEXT,
    committee_name TEXT NOT NULL,
    committee_id TEXT NOT NULL,
    is_processed BOOLEAN DEFAULT true,
    is_efiling BOOLEAN DEFAULT false,
    data_source TEXT DEFAULT 'fec'::text,
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ DEFAULT now(),
    debt NUMERIC(15,2) DEFAULT 0.0,
    cash_on_hand NUMERIC(15,2) DEFAULT 0.0,
    total_disbursements NUMERIC(15,2) DEFAULT 0.0,
    total_receipts NUMERIC(15,2) DEFAULT 0.0,
    cycles ARRAY,
    filing_frequency_full TEXT,
    filing_frequency TEXT,
    custodian_city TEXT,
    custodian_state TEXT,
    custodian_zip TEXT,
    street_1 TEXT,
    street_2 TEXT,
    city TEXT,
    party_full TEXT,
    committee_type_full TEXT,
    designation_full TEXT,
    designation TEXT,
    organization_type_full TEXT,
    organization_type TEXT,
    last_f1_date date,
    last_file_date date,
    first_file_date date,
    candidate_incumbent_challenge_status TEXT,
    candidate_status TEXT,
    state TEXT,
    zip TEXT,
    candidate_id TEXT,
    candidate_name TEXT,
    candidate_office TEXT,
    candidate_state TEXT,
    candidate_district TEXT,
    candidate_party TEXT
);"
"CREATE TABLE fec_contributions (
    contributor_organization_type TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    committee_id TEXT NOT NULL,
    candidate_id TEXT,
    contributor_name TEXT,
    contributor_name_normalized TEXT,
    contributor_city TEXT,
    contributor_state TEXT,
    contributor_zip TEXT,
    contributor_employer TEXT,
    contributor_occupation TEXT,
    contributor_organization_name TEXT,
    contributor_committee_id TEXT,
    contributor_committee_name TEXT,
    contributor_committee_type TEXT,
    contributor_committee_designation TEXT,
    contributor_committee_organization_type TEXT,
    contributor_committee_party TEXT,
    contributor_committee_state TEXT,
    contributor_committee_district TEXT,
    amount NUMERIC(15,2) NOT NULL,
    contribution_date date NOT NULL,
    contribution_type TEXT,
    contribution_type_desc TEXT,
    memo_code TEXT,
    memo_text TEXT,
    receipt_type TEXT,
    receipt_type_desc TEXT,
    receipt_type_full TEXT,
    line_number TEXT,
    transaction_id TEXT,
    file_number TEXT,
    report_type TEXT,
    report_type_full TEXT,
    report_year INTEGER,
    two_year_transaction_period INTEGER NOT NULL,
    cycle INTEGER NOT NULL,
    sub_id TEXT,
    link_id TEXT,
    image_number TEXT,
    file_number_raw TEXT,
    is_individual BOOLEAN,
    is_corporate BOOLEAN,
    is_pac BOOLEAN,
    is_party BOOLEAN,
    is_self_financing BOOLEAN,
    sector TEXT,
    industry TEXT,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    data_source TEXT DEFAULT 'fec'::text,
    is_efiling BOOLEAN DEFAULT false,
    is_processed BOOLEAN DEFAULT true,
    provenance JSONB DEFAULT '{}'::jsonb
);"
"CREATE TABLE fec_cycles (
    data_available BOOLEAN DEFAULT false,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    is_completed BOOLEAN DEFAULT false,
    is_upcoming BOOLEAN DEFAULT false,
    is_current BOOLEAN DEFAULT false,
    election_date date NOT NULL,
    end_date date NOT NULL,
    start_date date NOT NULL,
    cycle_name TEXT NOT NULL,
    cycle INTEGER NOT NULL
);"
"CREATE TABLE fec_disbursements (
    report_type TEXT,
    file_number TEXT,
    transaction_id TEXT,
    receipt_type TEXT,
    receipt_type_desc TEXT,
    receipt_type_full TEXT,
    line_number TEXT,
    category TEXT,
    purpose_desc TEXT,
    purpose TEXT,
    file_number_raw TEXT,
    image_number TEXT,
    link_id TEXT,
    sub_id TEXT,
    cycle INTEGER NOT NULL,
    two_year_transaction_period INTEGER NOT NULL,
    report_year INTEGER,
    report_type_full TEXT,
    provenance JSONB DEFAULT '{}'::jsonb,
    is_processed BOOLEAN DEFAULT true,
    is_efiling BOOLEAN DEFAULT false,
    data_source TEXT DEFAULT 'fec'::text,
    created_at TIMESTAMPTZ DEFAULT now(),
    last_updated TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    committee_id TEXT NOT NULL,
    candidate_id TEXT,
    recipient_name TEXT,
    recipient_name_normalized TEXT,
    recipient_city TEXT,
    recipient_state TEXT,
    recipient_zip TEXT,
    recipient_employer TEXT,
    recipient_occupation TEXT,
    recipient_organization_name TEXT,
    recipient_organization_type TEXT,
    recipient_committee_id TEXT,
    recipient_committee_name TEXT,
    recipient_committee_type TEXT,
    recipient_committee_designation TEXT,
    recipient_committee_organization_type TEXT,
    recipient_committee_party TEXT,
    recipient_committee_state TEXT,
    recipient_committee_district TEXT,
    amount NUMERIC(15,2) NOT NULL,
    disbursement_date date NOT NULL,
    disbursement_type TEXT,
    disbursement_type_desc TEXT,
    memo_code TEXT,
    memo_text TEXT,
    category_desc TEXT
);"
"CREATE TABLE fec_independent_expenditures (
    candidate_status TEXT,
    expenditure_type TEXT,
    expenditure_date date NOT NULL,
    amount NUMERIC(15,2) NOT NULL,
    candidate_district TEXT,
    spender_committee_district TEXT,
    spender_committee_state TEXT,
    spender_committee_party TEXT,
    spender_committee_organization_type TEXT,
    category_desc TEXT,
    support_oppose_indicator TEXT,
    support_oppose_indicator_desc TEXT,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    data_source TEXT DEFAULT 'fec'::text,
    is_efiling BOOLEAN DEFAULT false,
    is_processed BOOLEAN DEFAULT true,
    provenance JSONB DEFAULT '{}'::jsonb,
    spender_committee_designation TEXT,
    candidate_id TEXT,
    candidate_state TEXT,
    candidate_office TEXT,
    spender_committee_type TEXT,
    candidate_name TEXT,
    committee_id TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    spender_zip TEXT,
    spender_state TEXT,
    spender_city TEXT,
    spender_name TEXT,
    candidate_incumbent_challenge_status TEXT,
    candidate_party TEXT,
    expenditure_type_desc TEXT,
    memo_code TEXT,
    memo_text TEXT,
    receipt_type TEXT,
    receipt_type_desc TEXT,
    receipt_type_full TEXT,
    line_number TEXT,
    transaction_id TEXT,
    file_number TEXT,
    report_type TEXT,
    report_type_full TEXT,
    report_year INTEGER,
    two_year_transaction_period INTEGER NOT NULL,
    cycle INTEGER NOT NULL,
    sub_id TEXT,
    link_id TEXT,
    image_number TEXT,
    file_number_raw TEXT,
    purpose TEXT,
    purpose_desc TEXT,
    category TEXT,
    spender_committee_name TEXT,
    spender_committee_id TEXT,
    spender_organization_type TEXT,
    spender_organization_name TEXT,
    spender_occupation TEXT,
    spender_employer TEXT
);"
"CREATE TABLE fec_ingest_cursors (
    source TEXT NOT NULL,
    cycle INTEGER NOT NULL,
    cursor_type TEXT NOT NULL,
    cursor_value TEXT NOT NULL,
    last_updated TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE feedback (
    sentiment TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    user_id UUID,
    poll_id UUID,
    topic_id UUID,
    type TEXT NOT NULL,
    rating INTEGER,
    description TEXT,
    metadata JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ DEFAULT now(),
    ai_analysis JSONB DEFAULT '{}'::jsonb,
    user_journey JSONB DEFAULT '{}'::jsonb,
    screenshot TEXT,
    status TEXT DEFAULT 'open'::text,
    priority TEXT DEFAULT 'medium'::text,
    tags ARRAY DEFAULT '{}'::text[],
    updated_at TIMESTAMPTZ DEFAULT now(),
    title TEXT
);"
"CREATE TABLE generated_polls (
    options JSONB NOT NULL,
    description TEXT,
    title TEXT NOT NULL,
    topic_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    generation_metadata JSONB DEFAULT '{}'::jsonb,
    quality_metrics JSONB DEFAULT '{}'::jsonb,
    topic_analysis JSONB DEFAULT '{}'::jsonb,
    approved_at TIMESTAMPTZ,
    approved_by UUID,
    status TEXT DEFAULT 'draft'::text,
    quality_score NUMERIC(3,2) DEFAULT 0.0,
    tags ARRAY DEFAULT '{}'::text[],
    category TEXT,
    voting_method TEXT NOT NULL
);"
"CREATE TABLE id_crosswalk (
    attrs JSONB DEFAULT '{}'::jsonb,
    updated_at TIMESTAMPTZ DEFAULT now(),
    entity_uuid UUID NOT NULL DEFAULT gen_random_uuid(),
    entity_type TEXT NOT NULL,
    canonical_id TEXT NOT NULL,
    source TEXT NOT NULL,
    source_id TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE idempotency_keys (
    result_data JSONB,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    key TEXT NOT NULL,
    expires_at TIMESTAMPTZ NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE independence_score_methodology (
    version TEXT NOT NULL,
    experimental BOOLEAN DEFAULT true,
    data_sources ARRAY NOT NULL,
    methodology_url TEXT,
    created_at TIMESTAMPTZ DEFAULT now(),
    confidence_interval NUMERIC(3,2),
    formula TEXT NOT NULL
);"
"CREATE TABLE ingest_cursors (
    updated_at TIMESTAMPTZ DEFAULT now(),
    source TEXT NOT NULL,
    cursor JSONB NOT NULL
);"
"CREATE TABLE jurisdiction_aliases (
    normalized_value TEXT,
    alias_value TEXT NOT NULL,
    alias_type TEXT NOT NULL,
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    last_refreshed TIMESTAMPTZ NOT NULL DEFAULT now(),
    source TEXT NOT NULL DEFAULT 'import'::text,
    confidence NUMERIC(4,3) DEFAULT 1.000,
    ocd_division_id TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE jurisdiction_geometries (
    geometry JSONB NOT NULL,
    ocd_division_id TEXT NOT NULL,
    geometry_format TEXT NOT NULL DEFAULT 'geojson'::text,
    simplified_geometry JSONB,
    source TEXT NOT NULL,
    last_refreshed TIMESTAMPTZ NOT NULL DEFAULT now(),
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb
);"
"CREATE TABLE jurisdiction_tiles (
    source TEXT NOT NULL DEFAULT 'generated'::text,
    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    ocd_division_id TEXT NOT NULL,
    h3_index TEXT NOT NULL,
    resolution SMALLINT NOT NULL
);"
"CREATE TABLE latlon_to_ocd (
    confidence NUMERIC(3,2) DEFAULT 0.0,
    ocd_division_id TEXT NOT NULL,
    lon NUMERIC(11,8) NOT NULL,
    lat NUMERIC(10,8) NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE location_consent_audit (
    user_id UUID NOT NULL,
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    reason TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    actor TEXT NOT NULL DEFAULT 'user'::text,
    scope TEXT NOT NULL,
    action TEXT NOT NULL,
    resolution_id UUID
);"
"CREATE TABLE media_polls (
    options JSONB NOT NULL DEFAULT '[]'::jsonb,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    headline TEXT NOT NULL,
    question TEXT NOT NULL,
    source_id UUID,
    source_data JSONB NOT NULL,
    methodology JSONB NOT NULL,
    results JSONB NOT NULL,
    bias_analysis JSONB DEFAULT '{}'::jsonb,
    bias_indicators JSONB DEFAULT '[]'::jsonb,
    fact_check JSONB DEFAULT '{}'::jsonb,
    propaganda_techniques JSONB DEFAULT '[]'::jsonb,
    manipulation_score NUMERIC(3,2) DEFAULT 0,
    overall_bias_score NUMERIC(3,2) DEFAULT 0,
    url TEXT,
    published_at TIMESTAMPTZ,
    metadata JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE media_sources (
    fact_check_rating TEXT DEFAULT 'unknown'::text,
    propaganda_indicators JSONB DEFAULT '[]'::jsonb,
    metadata JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    source_id TEXT NOT NULL,
    name TEXT NOT NULL,
    network TEXT NOT NULL,
    bias TEXT DEFAULT 'unknown'::text,
    reliability NUMERIC(3,2) DEFAULT 0.5,
    ownership TEXT,
    funding JSONB DEFAULT '[]'::jsonb,
    political_affiliations JSONB DEFAULT '[]'::jsonb,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE migration_log (
    status TEXT NOT NULL,
    details TEXT,
    execution_time_ms INTEGER,
    error_message TEXT,
    applied_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    migration_name TEXT NOT NULL,
    id INTEGER NOT NULL DEFAULT nextval('migration_log_id_seq'::regclass)
);"
"CREATE TABLE news_fetch_logs (
    error_message TEXT,
    processing_time_ms INTEGER,
    metadata JSONB DEFAULT '{}'::jsonb,
    articles_found INTEGER DEFAULT 0,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    source_id UUID,
    fetch_type TEXT NOT NULL,
    status TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    articles_processed INTEGER DEFAULT 0
);"
"CREATE TABLE news_sources (
    type TEXT DEFAULT 'mainstream'::text,
    api_endpoint TEXT,
    api_key TEXT,
    rate_limit INTEGER DEFAULT 1000,
    is_active BOOLEAN DEFAULT true,
    last_updated TIMESTAMPTZ DEFAULT now(),
    error_count INTEGER DEFAULT 0,
    success_rate NUMERIC(5,2) DEFAULT 100.0,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    bias TEXT DEFAULT 'unknown'::text,
    reliability NUMERIC(3,2) DEFAULT 0.9,
    domain TEXT NOT NULL,
    name TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE poll_contexts (
    created_at TIMESTAMPTZ DEFAULT now(),
    status TEXT DEFAULT 'draft'::text,
    time_to_live INTEGER DEFAULT 24,
    stakeholders JSONB DEFAULT '{}'::jsonb,
    why_important TEXT NOT NULL,
    context TEXT NOT NULL,
    question TEXT NOT NULL,
    story_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    estimated_controversy NUMERIC(3,2) DEFAULT 0.5,
    voting_method TEXT NOT NULL,
    options JSONB NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE poll_generation_logs (
    processing_time_ms INTEGER,
    error_message TEXT,
    metadata JSONB DEFAULT '{}'::jsonb,
    poll_id UUID,
    created_at TIMESTAMPTZ DEFAULT now(),
    status TEXT NOT NULL,
    generation_step TEXT NOT NULL,
    topic_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE polls (
    options JSONB NOT NULL,
    settings JSONB DEFAULT '{}'::jsonb,
    is_mock BOOLEAN DEFAULT false,
    end_time TIMESTAMPTZ,
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    sponsors ARRAY DEFAULT '{}'::text[],
    participation INTEGER DEFAULT 0,
    total_votes INTEGER DEFAULT 0,
    status TEXT DEFAULT 'active'::text,
    created_by UUID NOT NULL,
    tags ARRAY DEFAULT '{}'::text[],
    category TEXT DEFAULT 'general'::text,
    privacy_level TEXT NOT NULL DEFAULT 'public'::text,
    voting_method TEXT NOT NULL,
    description TEXT,
    title TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE privacy_logs (
    user_id_hash TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    metadata JSONB DEFAULT '{}'::jsonb,
    action TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE private_user_data (
    user_id UUID,
    last_encrypted_at TIMESTAMPTZ DEFAULT now(),
    encryption_key_hash TEXT,
    encrypted_analytics_data BYTEA,
    encrypted_behavioral_data BYTEA,
    encrypted_personal_info BYTEA,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE quality_metrics (
    updated_at TIMESTAMPTZ DEFAULT now(),
    controversy_score NUMERIC(3,2) DEFAULT 0.0,
    relevance_score NUMERIC(3,2) DEFAULT 0.0,
    completeness_score NUMERIC(3,2) DEFAULT 0.0,
    clarity_score NUMERIC(3,2) DEFAULT 0.0,
    bias_score NUMERIC(3,2) DEFAULT 0.0,
    poll_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    created_at TIMESTAMPTZ DEFAULT now(),
    assessment_metadata JSONB DEFAULT '{}'::jsonb,
    overall_score NUMERIC(3,2) DEFAULT 0.0
);"
"CREATE TABLE rate_limits (
    updated_at TIMESTAMPTZ DEFAULT now(),
    endpoint TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    ip_address inet NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    window_start TIMESTAMPTZ DEFAULT now(),
    request_count INTEGER DEFAULT 1
);"
"CREATE TABLE redistricting_history (
    effective_date date NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    change_description TEXT,
    change_type TEXT,
    census_cycle_to INTEGER NOT NULL,
    census_cycle_from INTEGER NOT NULL,
    new_district TEXT,
    old_district TEXT,
    district_type TEXT NOT NULL,
    state TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE security_audit_log (
    table_name TEXT NOT NULL,
    operation TEXT NOT NULL,
    user_id UUID,
    ip_address inet,
    user_agent TEXT,
    details JSONB,
    created_at TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE site_messages (
    title TEXT NOT NULL,
    message TEXT NOT NULL,
    type TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT now(),
    expires_at TIMESTAMPTZ,
    is_active BOOLEAN NOT NULL DEFAULT true,
    updated_at TIMESTAMPTZ DEFAULT now(),
    priority TEXT NOT NULL DEFAULT 'medium'::text,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE state_districts (
    valid_from date NOT NULL,
    is_current BOOLEAN,
    valid_to date,
    created_at TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    state TEXT NOT NULL,
    district_type TEXT NOT NULL,
    district_number TEXT,
    ocd_division_id TEXT NOT NULL,
    census_cycle INTEGER NOT NULL,
    congress_number INTEGER
);"
"CREATE TABLE system_configuration (
    created_at TIMESTAMPTZ DEFAULT now(),
    description TEXT,
    value JSONB NOT NULL,
    key TEXT NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    updated_at TIMESTAMPTZ DEFAULT now(),
    is_active BOOLEAN DEFAULT true
);"
"CREATE TABLE trending_topics (
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    description TEXT,
    title TEXT NOT NULL,
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    last_processed_at TIMESTAMPTZ,
    analysis_data JSONB DEFAULT '{}'::jsonb,
    processing_status TEXT DEFAULT 'pending'::text,
    metadata JSONB DEFAULT '{}'::jsonb,
    entities JSONB DEFAULT '{}'::jsonb,
    sentiment_score NUMERIC(3,2) DEFAULT 0.0,
    momentum NUMERIC(5,2) DEFAULT 0.0,
    velocity NUMERIC(5,2) DEFAULT 0.0,
    trending_score NUMERIC(5,2) DEFAULT 0.0,
    category ARRAY DEFAULT '{}'::text[],
    source_type TEXT NOT NULL,
    source_name TEXT NOT NULL,
    source_url TEXT
);"
"CREATE TABLE user_consent (
    purpose TEXT NOT NULL,
    consent_version INTEGER DEFAULT 1,
    granted_at TIMESTAMPTZ DEFAULT now(),
    granted BOOLEAN NOT NULL,
    revoked_at TIMESTAMPTZ,
    consent_type TEXT NOT NULL,
    user_id UUID,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    data_types ARRAY NOT NULL DEFAULT '{}'::text[]
);"
"CREATE TABLE user_location_resolutions (
    lat_q11 NUMERIC(9,6),
    resolved_ocd_id TEXT,
    address_hash TEXT,
    user_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    captured_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    metadata JSONB NOT NULL DEFAULT '{}'::jsonb,
    revoked_at TIMESTAMPTZ,
    expires_at TIMESTAMPTZ,
    coarse_hash TEXT,
    consent_scope TEXT DEFAULT 'demographics'::text,
    consent_version INTEGER NOT NULL DEFAULT 1,
    source TEXT NOT NULL,
    geo_precision TEXT NOT NULL,
    accuracy_m INTEGER,
    lon_q11 NUMERIC(9,6)
);"
"CREATE TABLE user_profiles (
    geo_coarse_hash TEXT,
    geo_lat NUMERIC(9,6),
    is_admin BOOLEAN DEFAULT false,
    updated_at TIMESTAMPTZ DEFAULT now(),
    geo_trust_gate TEXT DEFAULT 'all'::text,
    geo_lon NUMERIC(9,6),
    geo_consent_version INTEGER,
    geo_source TEXT,
    geo_updated_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT now(),
    is_active BOOLEAN DEFAULT true,
    bio TEXT,
    avatar_url TEXT,
    trust_tier TEXT NOT NULL DEFAULT 'T0'::text,
    email TEXT NOT NULL,
    username TEXT NOT NULL,
    user_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    geo_precision TEXT
);"
"CREATE TABLE user_profiles_encrypted (
    encrypted_preferences BYTEA,
    encrypted_contact_info BYTEA,
    updated_at TIMESTAMPTZ DEFAULT now(),
    created_at TIMESTAMPTZ DEFAULT now(),
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    public_bio TEXT,
    username TEXT,
    user_id UUID,
    encryption_version INTEGER DEFAULT 1,
    key_derivation_salt BYTEA,
    key_hash TEXT,
    encrypted_demographics BYTEA
);"
"CREATE TABLE votes (
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    poll_id UUID NOT NULL,
    user_id UUID NOT NULL,
    choice INTEGER NOT NULL,
    voting_method TEXT NOT NULL,
    vote_data JSONB DEFAULT '{}'::jsonb,
    verification_token TEXT,
    is_verified BOOLEAN DEFAULT false,
    created_at TIMESTAMPTZ DEFAULT now(),
    updated_at TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE voting_records (
    quality_score NUMERIC(3,2) DEFAULT 0.0,
    created_at TIMESTAMPTZ DEFAULT now(),
    provenance JSONB DEFAULT '{}'::jsonb,
    license_key TEXT,
    data_sources ARRAY NOT NULL,
    bill_subject TEXT,
    vote TEXT NOT NULL,
    vote_description TEXT,
    vote_date date NOT NULL,
    chamber TEXT,
    bill_type TEXT,
    bill_number TEXT,
    congress_number INTEGER,
    vote_question TEXT,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    candidate_id UUID,
    bill_id TEXT,
    bill_title TEXT,
    last_updated TIMESTAMPTZ DEFAULT now()
);"
"CREATE TABLE webauthn_challenges (
    used_at TIMESTAMPTZ,
    origin TEXT,
    created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
    expires_at TIMESTAMPTZ NOT NULL,
    challenge BYTEA NOT NULL,
    kind TEXT NOT NULL,
    rp_id TEXT NOT NULL,
    user_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid()
);"
"CREATE TABLE webauthn_credentials (
    last_used_at TIMESTAMPTZ,
    aaguid UUID,
    transports ARRAY DEFAULT '{}'::text[],
    counter BIGINT NOT NULL DEFAULT 0,
    cose_alg SMALLINT,
    public_key BYTEA NOT NULL,
    credential_id BYTEA NOT NULL,
    rp_id TEXT NOT NULL,
    user_id UUID NOT NULL,
    id UUID NOT NULL DEFAULT gen_random_uuid(),
    device_info JSONB,
    device_label TEXT,
    backup_eligible BOOLEAN,
    backed_up BOOLEAN,
    created_at TIMESTAMPTZ NOT NULL DEFAULT now()
);"
"CREATE TABLE zip_to_ocd (
    created_at TIMESTAMPTZ DEFAULT now(),
    confidence NUMERIC(3,2) DEFAULT 0.0,
    ocd_division_id TEXT NOT NULL,
    zip5 TEXT NOT NULL
);"