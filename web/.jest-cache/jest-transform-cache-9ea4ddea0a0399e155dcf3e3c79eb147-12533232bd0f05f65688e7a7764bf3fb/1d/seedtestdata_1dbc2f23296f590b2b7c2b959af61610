c4ba329c13fe5801d935358fe8573cc7
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get TEST_POLLS () {
        return TEST_POLLS;
    },
    get cleanupTestData () {
        return cleanupTestData;
    },
    get getDatabaseStats () {
        return getDatabaseStats;
    },
    get seedTestPolls () {
        return seedTestPolls;
    },
    get seedTestVotes () {
        return seedTestVotes;
    }
});
const _supabasejs = require("@supabase/supabase-js");
/**
 * Test Data Seeding Utility
 * 
 * Populates the database with realistic test data for integration testing
 * 
 * Created: January 27, 2025
 * Status: ‚úÖ PRODUCTION READY
 */ function getSupabaseClient() {
    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
    // Use same approach as civics pipeline
    const supabaseKey = process.env.SUPABASE_SECRET_KEY;
    if (!supabaseUrl || !supabaseKey) {
        throw new Error('Supabase credentials not found. Please check your environment variables.');
    }
    console.log('Using Supabase key type:', supabaseKey.startsWith('sb_secret_') ? 'SERVICE_ROLE' : 'ANON');
    console.log('Using same approach as civics pipeline');
    return (0, _supabasejs.createClient)(supabaseUrl, supabaseKey);
}
// REST API helper function
async function restApiRequest(endpoint, method = 'GET', body) {
    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
    const supabaseKey = process.env.SUPABASE_SECRET_KEY;
    if (!supabaseUrl || !supabaseKey) {
        throw new Error('Supabase credentials not found. Please check your environment variables.');
    }
    const url = `${supabaseUrl}/rest/v1/${endpoint}`;
    const headers = {
        'apikey': supabaseKey,
        'Authorization': `Bearer ${supabaseKey}`,
        'Content-Type': 'application/json'
    };
    const options = {
        method,
        headers
    };
    if (body && method !== 'GET') {
        options.body = JSON.stringify(body);
    }
    const response = await fetch(url, options);
    const data = await response.json();
    return {
        data,
        status: response.status,
        response
    };
}
const TEST_POLLS = [
    {
        title: "What's your favorite programming language?",
        description: "Help us understand the community's preferences for programming languages in 2025.",
        options: [
            "JavaScript/TypeScript",
            "Python",
            "Rust",
            "Go",
            "Java",
            "C++"
        ],
        voting_method: "single_choice",
        status: "active",
        created_by: "00000000-0000-0000-0000-000000000001",
        end_date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
        settings: {
            allow_anonymous: true,
            show_results_before_close: true,
            allow_multiple_votes: false
        },
        hashtags: [
            "programming",
            "technology",
            "development"
        ],
        poll_settings: {
            voting_method: "single_choice",
            result_display: "percentage"
        },
        privacy_level: "public",
        category: "technology",
        tags: [
            "programming",
            "development"
        ],
        primary_hashtag: "programming",
        total_votes: 0,
        participation_rate: 0
    },
    {
        title: "Which features should we prioritize for the next release?",
        description: "Vote for multiple features you'd like to see in the upcoming release.",
        options: [
            "Dark mode theme",
            "Mobile app improvements",
            "Real-time notifications",
            "Advanced analytics",
            "API rate limiting",
            "User dashboard redesign"
        ],
        voting_method: "multiple_choice",
        status: "active",
        created_by: "00000000-0000-0000-0000-000000000001",
        end_date: new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString(),
        settings: {
            allow_anonymous: false,
            show_results_before_close: false,
            allow_multiple_votes: true,
            max_selections: 3
        },
        hashtags: [
            "features",
            "roadmap",
            "product"
        ],
        poll_settings: {
            voting_method: "multiple_choice",
            result_display: "count"
        },
        privacy_level: "public",
        category: "product",
        tags: [
            "features",
            "roadmap"
        ],
        primary_hashtag: "features",
        total_votes: 0,
        participation_rate: 0
    },
    {
        title: "Rank your preferred meeting times",
        description: "Help us schedule the best time for our weekly team meetings.",
        options: [
            "Monday 9:00 AM",
            "Tuesday 2:00 PM",
            "Wednesday 10:00 AM",
            "Thursday 3:00 PM",
            "Friday 11:00 AM"
        ],
        voting_method: "ranked_choice",
        status: "active",
        created_by: "00000000-0000-0000-0000-000000000001",
        end_date: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),
        settings: {
            allow_anonymous: true,
            show_results_before_close: true,
            allow_multiple_votes: false
        },
        hashtags: [
            "scheduling",
            "meetings",
            "team"
        ],
        poll_settings: {
            voting_method: "ranked_choice",
            result_display: "ranked"
        },
        privacy_level: "public",
        is_public: true,
        allow_anonymous: true,
        max_votes_per_user: 1,
        category: "scheduling",
        tags: [
            "meetings",
            "team"
        ],
        primary_hashtag: "scheduling",
        total_votes: 0,
        participation_rate: 0
    },
    {
        title: "Which projects should receive funding?",
        description: "Approve or disapprove each project for the next funding cycle.",
        options: [
            "Community Garden Initiative",
            "Local Food Bank Support",
            "Youth Sports Program",
            "Senior Center Renovation",
            "Environmental Cleanup Project"
        ],
        voting_method: "approval_voting",
        status: "active",
        created_by: "00000000-0000-0000-0000-000000000001",
        end_date: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),
        settings: {
            allow_anonymous: false,
            show_results_before_close: true,
            allow_multiple_votes: true
        },
        hashtags: [
            "funding",
            "community",
            "civic"
        ],
        poll_settings: {
            voting_method: "approval_voting",
            result_display: "approval_percentage"
        },
        privacy_level: "public",
        is_public: true,
        allow_anonymous: false,
        max_votes_per_user: 5,
        category: "civic",
        tags: [
            "funding",
            "community"
        ],
        primary_hashtag: "funding",
        total_votes: 0,
        participation_rate: 0
    },
    {
        title: "Draft: What should we name our new product?",
        description: "This is a draft poll that hasn't been published yet.",
        options: [
            "Choices Pro",
            "CivicHub",
            "DemocracyNow",
            "VoteRight",
            "CommunityVoice"
        ],
        voting_method: "single_choice",
        status: "draft",
        created_by: "00000000-0000-0000-0000-000000000001",
        settings: {
            allow_anonymous: true,
            show_results_before_close: false,
            allow_multiple_votes: false
        },
        hashtags: [
            "naming",
            "product",
            "draft"
        ],
        poll_settings: {
            voting_method: "single_choice",
            result_display: "percentage"
        },
        privacy_level: "private",
        is_public: false,
        allow_anonymous: true,
        max_votes_per_user: 1,
        category: "product",
        tags: [
            "naming",
            "draft"
        ],
        primary_hashtag: "naming",
        total_votes: 0,
        participation_rate: 0
    },
    {
        title: "Closed: Best coffee shop in town",
        description: "This poll has already closed and shows final results.",
        options: [
            "Starbucks",
            "Local Brew",
            "Dunkin'",
            "Peet's Coffee",
            "Independent Cafe"
        ],
        voting_method: "single_choice",
        status: "closed",
        created_by: "00000000-0000-0000-0000-000000000001",
        end_date: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
        settings: {
            allow_anonymous: true,
            show_results_before_close: true,
            allow_multiple_votes: false
        },
        hashtags: [
            "coffee",
            "local",
            "business"
        ],
        poll_settings: {
            voting_method: "single_choice",
            result_display: "percentage"
        },
        privacy_level: "public",
        is_public: true,
        allow_anonymous: true,
        max_votes_per_user: 1,
        category: "local",
        tags: [
            "coffee",
            "business"
        ],
        primary_hashtag: "coffee",
        total_votes: 0,
        participation_rate: 0
    }
];
async function seedTestPolls() {
    console.log('üå± Seeding test polls data...');
    try {
        const supabase = getSupabaseClient();
        // First, let's check if polls table exists and get its structure
        const { data: tableInfo, error: tableError } = await supabase.from('information_schema.tables').select('table_name').eq('table_schema', 'public').eq('table_name', 'polls');
        if (tableError) {
            console.log('‚ùå Error checking polls table:', tableError);
            throw tableError;
        }
        if (!tableInfo || tableInfo.length === 0) {
            console.log('‚ùå Polls table does not exist in the database');
            throw new Error('Polls table does not exist');
        }
        console.log('‚úÖ Polls table exists, proceeding with seeding...');
        // Clear existing test data
        const { error: deleteError } = await supabase.from('polls').delete().like('title', '%test%');
        if (deleteError) {
            console.log('‚ö†Ô∏è Warning: Could not clear existing test data:', deleteError);
        } else {
            console.log('üßπ Cleared existing test data');
        }
        // Insert test polls one by one to avoid batch insert issues
        const pollIds = [];
        for (const poll of TEST_POLLS){
            console.log(`üîÑ Attempting to insert poll: "${poll.title}"`);
            console.log('Poll data:', JSON.stringify(poll, null, 2));
            const { data: insertedPoll, error: insertError } = await supabase.from('polls').insert(poll).select('id, title').single();
            console.log('Insert result:', {
                insertedPoll,
                insertError
            });
            if (insertError) {
                console.log(`‚ùå Error inserting poll "${poll.title}":`, insertError);
                console.log('Error details:', {
                    message: insertError.message,
                    details: insertError.details,
                    hint: insertError.hint,
                    code: insertError.code
                });
                continue;
            }
            if (insertedPoll && insertedPoll.id) {
                pollIds.push(insertedPoll.id);
                console.log(`‚úÖ Inserted poll: ${insertedPoll.title} (ID: ${insertedPoll.id})`);
            } else {
                console.log(`‚ö†Ô∏è No data returned for poll: ${poll.title}`);
            }
        }
        console.log(`‚úÖ Successfully seeded ${pollIds.length} test polls`);
        console.log('üìä Seeded poll IDs:', pollIds);
        return pollIds;
    } catch (error) {
        console.log('‚ùå Error seeding test polls:', error);
        throw error;
    }
}
async function seedTestVotes(pollIds) {
    console.log('üó≥Ô∏è Seeding test votes...');
    try {
        const supabase = getSupabaseClient();
        const testVotes = [];
        // Create realistic vote data for each poll
        for (const pollId of pollIds){
            const poll = TEST_POLLS.find((p)=>pollIds.includes(pollId));
            if (!poll) continue;
            // Generate 10-50 votes per poll with realistic distribution
            const voteCount = Math.floor(Math.random() * 40) + 10;
            for(let i = 0; i < voteCount; i++){
                const vote = {
                    poll_id: pollId,
                    user_id: `test-voter-${i + 1}`,
                    choice: Math.floor(Math.random() * poll.options.length),
                    created_at: new Date(Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000).toISOString(),
                    ip_address: `192.168.1.${Math.floor(Math.random() * 255)}`,
                    user_agent: 'Mozilla/5.0 (Test Browser)'
                };
                testVotes.push(vote);
            }
        }
        // Insert votes in batches
        const batchSize = 50;
        for(let i = 0; i < testVotes.length; i += batchSize){
            const batch = testVotes.slice(i, i + batchSize);
            const { error: voteError } = await supabase.from('votes').insert(batch);
            if (voteError) {
                console.log('‚ö†Ô∏è Warning: Could not insert some votes:', voteError);
            }
        }
        console.log(`‚úÖ Successfully seeded ${testVotes.length} test votes`);
    } catch (error) {
        console.log('‚ùå Error seeding test votes:', error);
        throw error;
    }
}
async function cleanupTestData() {
    console.log('üßπ Cleaning up test data...');
    try {
        const supabase = getSupabaseClient();
        // Delete test votes
        const { error: votesError } = await supabase.from('votes').delete().like('user_id', 'test-voter-%');
        if (votesError) {
            console.log('‚ö†Ô∏è Warning: Could not clean up test votes:', votesError);
        }
        // Delete test polls
        const { error: pollsError } = await supabase.from('polls').delete().like('title', '%test%').or('title.like.%draft%').or('title.like.%closed%');
        if (pollsError) {
            console.log('‚ö†Ô∏è Warning: Could not clean up test polls:', pollsError);
        }
        console.log('‚úÖ Test data cleanup completed');
    } catch (error) {
        console.log('‚ùå Error cleaning up test data:', error);
        throw error;
    }
}
async function getDatabaseStats() {
    try {
        const supabase = getSupabaseClient();
        const { data: pollsData, error: pollsError } = await supabase.from('polls').select('id, status');
        const { data: votesData, error: votesError } = await supabase.from('votes').select('id');
        if (pollsError || votesError) {
            throw new Error(`Database query errors: ${pollsError?.message || votesError?.message}`);
        }
        // Handle different response formats
        const polls = Array.isArray(pollsData) ? pollsData : pollsData ? [
            pollsData
        ] : [];
        const votes = Array.isArray(votesData) ? votesData : votesData ? [
            votesData
        ] : [];
        const activePolls = polls.filter((p)=>p.status === 'active').length;
        const closedPolls = polls.filter((p)=>p.status === 'closed').length;
        return {
            pollsCount: polls.length,
            votesCount: votes.length,
            activePolls,
            closedPolls
        };
    } catch (error) {
        console.log('‚ùå Error getting database stats:', error);
        throw error;
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L2hlbHBlcnMvc2VlZC10ZXN0LWRhdGEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLyoqXG4gKiBUZXN0IERhdGEgU2VlZGluZyBVdGlsaXR5XG4gKiBcbiAqIFBvcHVsYXRlcyB0aGUgZGF0YWJhc2Ugd2l0aCByZWFsaXN0aWMgdGVzdCBkYXRhIGZvciBpbnRlZ3JhdGlvbiB0ZXN0aW5nXG4gKiBcbiAqIENyZWF0ZWQ6IEphbnVhcnkgMjcsIDIwMjVcbiAqIFN0YXR1czog4pyFIFBST0RVQ1RJT04gUkVBRFlcbiAqL1xuXG5mdW5jdGlvbiBnZXRTdXBhYmFzZUNsaWVudCgpIHtcbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIC8vIFVzZSBzYW1lIGFwcHJvYWNoIGFzIGNpdmljcyBwaXBlbGluZVxuICBjb25zdCBzdXBhYmFzZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFQ1JFVF9LRVk7XG4gIFxuICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgY3JlZGVudGlhbHMgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKCdVc2luZyBTdXBhYmFzZSBrZXkgdHlwZTonLCBzdXBhYmFzZUtleS5zdGFydHNXaXRoKCdzYl9zZWNyZXRfJykgPyAnU0VSVklDRV9ST0xFJyA6ICdBTk9OJyk7XG4gIGNvbnNvbGUubG9nKCdVc2luZyBzYW1lIGFwcHJvYWNoIGFzIGNpdmljcyBwaXBlbGluZScpO1xuICBcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpO1xufVxuXG4vLyBSRVNUIEFQSSBoZWxwZXIgZnVuY3Rpb25cbmFzeW5jIGZ1bmN0aW9uIHJlc3RBcGlSZXF1ZXN0KGVuZHBvaW50OiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nID0gJ0dFVCcsIGJvZHk/OiBhbnkpIHtcbiAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw7XG4gIGNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VDUkVUX0tFWTtcbiAgXG4gIGlmICghc3VwYWJhc2VVcmwgfHwgIXN1cGFiYXNlS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTdXBhYmFzZSBjcmVkZW50aWFscyBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcbiAgfVxuICBcbiAgY29uc3QgdXJsID0gYCR7c3VwYWJhc2VVcmx9L3Jlc3QvdjEvJHtlbmRwb2ludH1gO1xuICBjb25zdCBoZWFkZXJzID0ge1xuICAgICdhcGlrZXknOiBzdXBhYmFzZUtleSxcbiAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzdXBhYmFzZUtleX1gLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfTtcbiAgXG4gIGNvbnN0IG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xuICAgIG1ldGhvZCxcbiAgICBoZWFkZXJzXG4gIH07XG4gIFxuICBpZiAoYm9keSAmJiBtZXRob2QgIT09ICdHRVQnKSB7XG4gICAgb3B0aW9ucy5ib2R5ID0gSlNPTi5zdHJpbmdpZnkoYm9keSk7XG4gIH1cbiAgXG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCBvcHRpb25zKTtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgXG4gIHJldHVybiB7IGRhdGEsIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZSB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RQb2xsIHtcbiAgaWQ/OiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIG9wdGlvbnM6IHN0cmluZ1tdO1xuICB2b3RpbmdfbWV0aG9kOiAnc2luZ2xlX2Nob2ljZScgfCAnbXVsdGlwbGVfY2hvaWNlJyB8ICdyYW5rZWRfY2hvaWNlJyB8ICdhcHByb3ZhbF92b3RpbmcnO1xuICBzdGF0dXM6ICdkcmFmdCcgfCAnYWN0aXZlJyB8ICdjbG9zZWQnO1xuICBjcmVhdGVkX2J5OiBzdHJpbmc7IC8vIFVVSUQgcmVmZXJlbmNlIHRvIGF1dGgudXNlcnNcbiAgZW5kX2RhdGU/OiBzdHJpbmc7XG4gIHNldHRpbmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBoYXNodGFnczogc3RyaW5nW107XG4gIHBvbGxfc2V0dGluZ3M6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHByaXZhY3lfbGV2ZWw6IHN0cmluZzsgLy8gVGhpcyBpcyB0aGUga2V5IGZpZWxkIGZvciBSTFMhXG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xuICB0YWdzPzogc3RyaW5nW107XG4gIHByaW1hcnlfaGFzaHRhZz86IHN0cmluZztcbiAgdG90YWxfdm90ZXM/OiBudW1iZXI7XG4gIHBhcnRpY2lwYXRpb25fcmF0ZT86IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IFRFU1RfUE9MTFM6IFRlc3RQb2xsW10gPSBbXG4gIHtcbiAgICB0aXRsZTogXCJXaGF0J3MgeW91ciBmYXZvcml0ZSBwcm9ncmFtbWluZyBsYW5ndWFnZT9cIixcbiAgICBkZXNjcmlwdGlvbjogXCJIZWxwIHVzIHVuZGVyc3RhbmQgdGhlIGNvbW11bml0eSdzIHByZWZlcmVuY2VzIGZvciBwcm9ncmFtbWluZyBsYW5ndWFnZXMgaW4gMjAyNS5cIixcbiAgICBvcHRpb25zOiBbXCJKYXZhU2NyaXB0L1R5cGVTY3JpcHRcIiwgXCJQeXRob25cIiwgXCJSdXN0XCIsIFwiR29cIiwgXCJKYXZhXCIsIFwiQysrXCJdLFxuICAgIHZvdGluZ19tZXRob2Q6IFwic2luZ2xlX2Nob2ljZVwiLFxuICAgIHN0YXR1czogXCJhY3RpdmVcIixcbiAgICBjcmVhdGVkX2J5OiBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMVwiLCAvLyBVVUlEIGZvciB0ZXN0IHVzZXJcbiAgICBlbmRfZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLCAvLyA3IGRheXMgZnJvbSBub3dcbiAgICBzZXR0aW5nczoge1xuICAgICAgYWxsb3dfYW5vbnltb3VzOiB0cnVlLFxuICAgICAgc2hvd19yZXN1bHRzX2JlZm9yZV9jbG9zZTogdHJ1ZSxcbiAgICAgIGFsbG93X211bHRpcGxlX3ZvdGVzOiBmYWxzZVxuICAgIH0sXG4gICAgaGFzaHRhZ3M6IFtcInByb2dyYW1taW5nXCIsIFwidGVjaG5vbG9neVwiLCBcImRldmVsb3BtZW50XCJdLFxuICAgIHBvbGxfc2V0dGluZ3M6IHtcbiAgICAgIHZvdGluZ19tZXRob2Q6IFwic2luZ2xlX2Nob2ljZVwiLFxuICAgICAgcmVzdWx0X2Rpc3BsYXk6IFwicGVyY2VudGFnZVwiXG4gICAgfSxcbiAgICBwcml2YWN5X2xldmVsOiBcInB1YmxpY1wiLCAvLyBUaGlzIGlzIHRoZSBrZXkgZmllbGQgZm9yIFJMUyFcbiAgICBjYXRlZ29yeTogXCJ0ZWNobm9sb2d5XCIsXG4gICAgdGFnczogW1wicHJvZ3JhbW1pbmdcIiwgXCJkZXZlbG9wbWVudFwiXSxcbiAgICBwcmltYXJ5X2hhc2h0YWc6IFwicHJvZ3JhbW1pbmdcIixcbiAgICB0b3RhbF92b3RlczogMCxcbiAgICBwYXJ0aWNpcGF0aW9uX3JhdGU6IDBcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIldoaWNoIGZlYXR1cmVzIHNob3VsZCB3ZSBwcmlvcml0aXplIGZvciB0aGUgbmV4dCByZWxlYXNlP1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlZvdGUgZm9yIG11bHRpcGxlIGZlYXR1cmVzIHlvdSdkIGxpa2UgdG8gc2VlIGluIHRoZSB1cGNvbWluZyByZWxlYXNlLlwiLFxuICAgIG9wdGlvbnM6IFtcbiAgICAgIFwiRGFyayBtb2RlIHRoZW1lXCIsXG4gICAgICBcIk1vYmlsZSBhcHAgaW1wcm92ZW1lbnRzXCIsIFxuICAgICAgXCJSZWFsLXRpbWUgbm90aWZpY2F0aW9uc1wiLFxuICAgICAgXCJBZHZhbmNlZCBhbmFseXRpY3NcIixcbiAgICAgIFwiQVBJIHJhdGUgbGltaXRpbmdcIixcbiAgICAgIFwiVXNlciBkYXNoYm9hcmQgcmVkZXNpZ25cIlxuICAgIF0sXG4gICAgdm90aW5nX21ldGhvZDogXCJtdWx0aXBsZV9jaG9pY2VcIixcbiAgICBzdGF0dXM6IFwiYWN0aXZlXCIsXG4gICAgY3JlYXRlZF9ieTogXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDFcIixcbiAgICBlbmRfZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDE0ICogMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gMTQgZGF5cyBmcm9tIG5vd1xuICAgIHNldHRpbmdzOiB7XG4gICAgICBhbGxvd19hbm9ueW1vdXM6IGZhbHNlLFxuICAgICAgc2hvd19yZXN1bHRzX2JlZm9yZV9jbG9zZTogZmFsc2UsXG4gICAgICBhbGxvd19tdWx0aXBsZV92b3RlczogdHJ1ZSxcbiAgICAgIG1heF9zZWxlY3Rpb25zOiAzXG4gICAgfSxcbiAgICBoYXNodGFnczogW1wiZmVhdHVyZXNcIiwgXCJyb2FkbWFwXCIsIFwicHJvZHVjdFwiXSxcbiAgICBwb2xsX3NldHRpbmdzOiB7XG4gICAgICB2b3RpbmdfbWV0aG9kOiBcIm11bHRpcGxlX2Nob2ljZVwiLFxuICAgICAgcmVzdWx0X2Rpc3BsYXk6IFwiY291bnRcIlxuICAgIH0sXG4gICAgcHJpdmFjeV9sZXZlbDogXCJwdWJsaWNcIixcbiAgICBjYXRlZ29yeTogXCJwcm9kdWN0XCIsXG4gICAgdGFnczogW1wiZmVhdHVyZXNcIiwgXCJyb2FkbWFwXCJdLFxuICAgIHByaW1hcnlfaGFzaHRhZzogXCJmZWF0dXJlc1wiLFxuICAgIHRvdGFsX3ZvdGVzOiAwLFxuICAgIHBhcnRpY2lwYXRpb25fcmF0ZTogMFxuICB9LFxuICB7XG4gICAgdGl0bGU6IFwiUmFuayB5b3VyIHByZWZlcnJlZCBtZWV0aW5nIHRpbWVzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiSGVscCB1cyBzY2hlZHVsZSB0aGUgYmVzdCB0aW1lIGZvciBvdXIgd2Vla2x5IHRlYW0gbWVldGluZ3MuXCIsXG4gICAgb3B0aW9uczogW1xuICAgICAgXCJNb25kYXkgOTowMCBBTVwiLFxuICAgICAgXCJUdWVzZGF5IDI6MDAgUE1cIiwgXG4gICAgICBcIldlZG5lc2RheSAxMDowMCBBTVwiLFxuICAgICAgXCJUaHVyc2RheSAzOjAwIFBNXCIsXG4gICAgICBcIkZyaWRheSAxMTowMCBBTVwiXG4gICAgXSxcbiAgICB2b3RpbmdfbWV0aG9kOiBcInJhbmtlZF9jaG9pY2VcIixcbiAgICBzdGF0dXM6IFwiYWN0aXZlXCIsXG4gICAgY3JlYXRlZF9ieTogXCIwMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDFcIixcbiAgICBlbmRfZGF0ZTogbmV3IERhdGUoRGF0ZS5ub3coKSArIDMgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLCAvLyAzIGRheXMgZnJvbSBub3dcbiAgICBzZXR0aW5nczoge1xuICAgICAgYWxsb3dfYW5vbnltb3VzOiB0cnVlLFxuICAgICAgc2hvd19yZXN1bHRzX2JlZm9yZV9jbG9zZTogdHJ1ZSxcbiAgICAgIGFsbG93X211bHRpcGxlX3ZvdGVzOiBmYWxzZVxuICAgIH0sXG4gICAgaGFzaHRhZ3M6IFtcInNjaGVkdWxpbmdcIiwgXCJtZWV0aW5nc1wiLCBcInRlYW1cIl0sXG4gICAgcG9sbF9zZXR0aW5nczoge1xuICAgICAgdm90aW5nX21ldGhvZDogXCJyYW5rZWRfY2hvaWNlXCIsXG4gICAgICByZXN1bHRfZGlzcGxheTogXCJyYW5rZWRcIlxuICAgIH0sXG4gICAgcHJpdmFjeV9sZXZlbDogXCJwdWJsaWNcIixcbiAgICBpc19wdWJsaWM6IHRydWUsXG4gICAgYWxsb3dfYW5vbnltb3VzOiB0cnVlLFxuICAgIG1heF92b3Rlc19wZXJfdXNlcjogMSxcbiAgICBjYXRlZ29yeTogXCJzY2hlZHVsaW5nXCIsXG4gICAgdGFnczogW1wibWVldGluZ3NcIiwgXCJ0ZWFtXCJdLFxuICAgIHByaW1hcnlfaGFzaHRhZzogXCJzY2hlZHVsaW5nXCIsXG4gICAgdG90YWxfdm90ZXM6IDAsXG4gICAgcGFydGljaXBhdGlvbl9yYXRlOiAwXG4gIH0sXG4gIHtcbiAgICB0aXRsZTogXCJXaGljaCBwcm9qZWN0cyBzaG91bGQgcmVjZWl2ZSBmdW5kaW5nP1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkFwcHJvdmUgb3IgZGlzYXBwcm92ZSBlYWNoIHByb2plY3QgZm9yIHRoZSBuZXh0IGZ1bmRpbmcgY3ljbGUuXCIsXG4gICAgb3B0aW9uczogW1xuICAgICAgXCJDb21tdW5pdHkgR2FyZGVuIEluaXRpYXRpdmVcIixcbiAgICAgIFwiTG9jYWwgRm9vZCBCYW5rIFN1cHBvcnRcIixcbiAgICAgIFwiWW91dGggU3BvcnRzIFByb2dyYW1cIixcbiAgICAgIFwiU2VuaW9yIENlbnRlciBSZW5vdmF0aW9uXCIsXG4gICAgICBcIkVudmlyb25tZW50YWwgQ2xlYW51cCBQcm9qZWN0XCJcbiAgICBdLFxuICAgIHZvdGluZ19tZXRob2Q6IFwiYXBwcm92YWxfdm90aW5nXCIsXG4gICAgc3RhdHVzOiBcImFjdGl2ZVwiLFxuICAgIGNyZWF0ZWRfYnk6IFwiMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAxXCIsXG4gICAgZW5kX2RhdGU6IG5ldyBEYXRlKERhdGUubm93KCkgKyAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksIC8vIDMwIGRheXMgZnJvbSBub3dcbiAgICBzZXR0aW5nczoge1xuICAgICAgYWxsb3dfYW5vbnltb3VzOiBmYWxzZSxcbiAgICAgIHNob3dfcmVzdWx0c19iZWZvcmVfY2xvc2U6IHRydWUsXG4gICAgICBhbGxvd19tdWx0aXBsZV92b3RlczogdHJ1ZVxuICAgIH0sXG4gICAgaGFzaHRhZ3M6IFtcImZ1bmRpbmdcIiwgXCJjb21tdW5pdHlcIiwgXCJjaXZpY1wiXSxcbiAgICBwb2xsX3NldHRpbmdzOiB7XG4gICAgICB2b3RpbmdfbWV0aG9kOiBcImFwcHJvdmFsX3ZvdGluZ1wiLFxuICAgICAgcmVzdWx0X2Rpc3BsYXk6IFwiYXBwcm92YWxfcGVyY2VudGFnZVwiXG4gICAgfSxcbiAgICBwcml2YWN5X2xldmVsOiBcInB1YmxpY1wiLFxuICAgIGlzX3B1YmxpYzogdHJ1ZSxcbiAgICBhbGxvd19hbm9ueW1vdXM6IGZhbHNlLFxuICAgIG1heF92b3Rlc19wZXJfdXNlcjogNSxcbiAgICBjYXRlZ29yeTogXCJjaXZpY1wiLFxuICAgIHRhZ3M6IFtcImZ1bmRpbmdcIiwgXCJjb21tdW5pdHlcIl0sXG4gICAgcHJpbWFyeV9oYXNodGFnOiBcImZ1bmRpbmdcIixcbiAgICB0b3RhbF92b3RlczogMCxcbiAgICBwYXJ0aWNpcGF0aW9uX3JhdGU6IDBcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkRyYWZ0OiBXaGF0IHNob3VsZCB3ZSBuYW1lIG91ciBuZXcgcHJvZHVjdD9cIixcbiAgICBkZXNjcmlwdGlvbjogXCJUaGlzIGlzIGEgZHJhZnQgcG9sbCB0aGF0IGhhc24ndCBiZWVuIHB1Ymxpc2hlZCB5ZXQuXCIsXG4gICAgb3B0aW9uczogW1wiQ2hvaWNlcyBQcm9cIiwgXCJDaXZpY0h1YlwiLCBcIkRlbW9jcmFjeU5vd1wiLCBcIlZvdGVSaWdodFwiLCBcIkNvbW11bml0eVZvaWNlXCJdLFxuICAgIHZvdGluZ19tZXRob2Q6IFwic2luZ2xlX2Nob2ljZVwiLFxuICAgIHN0YXR1czogXCJkcmFmdFwiLFxuICAgIGNyZWF0ZWRfYnk6IFwiMDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAxXCIsXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIGFsbG93X2Fub255bW91czogdHJ1ZSxcbiAgICAgIHNob3dfcmVzdWx0c19iZWZvcmVfY2xvc2U6IGZhbHNlLFxuICAgICAgYWxsb3dfbXVsdGlwbGVfdm90ZXM6IGZhbHNlXG4gICAgfSxcbiAgICBoYXNodGFnczogW1wibmFtaW5nXCIsIFwicHJvZHVjdFwiLCBcImRyYWZ0XCJdLFxuICAgIHBvbGxfc2V0dGluZ3M6IHtcbiAgICAgIHZvdGluZ19tZXRob2Q6IFwic2luZ2xlX2Nob2ljZVwiLFxuICAgICAgcmVzdWx0X2Rpc3BsYXk6IFwicGVyY2VudGFnZVwiXG4gICAgfSxcbiAgICBwcml2YWN5X2xldmVsOiBcInByaXZhdGVcIixcbiAgICBpc19wdWJsaWM6IGZhbHNlLFxuICAgIGFsbG93X2Fub255bW91czogdHJ1ZSxcbiAgICBtYXhfdm90ZXNfcGVyX3VzZXI6IDEsXG4gICAgY2F0ZWdvcnk6IFwicHJvZHVjdFwiLFxuICAgIHRhZ3M6IFtcIm5hbWluZ1wiLCBcImRyYWZ0XCJdLFxuICAgIHByaW1hcnlfaGFzaHRhZzogXCJuYW1pbmdcIixcbiAgICB0b3RhbF92b3RlczogMCxcbiAgICBwYXJ0aWNpcGF0aW9uX3JhdGU6IDBcbiAgfSxcbiAge1xuICAgIHRpdGxlOiBcIkNsb3NlZDogQmVzdCBjb2ZmZWUgc2hvcCBpbiB0b3duXCIsXG4gICAgZGVzY3JpcHRpb246IFwiVGhpcyBwb2xsIGhhcyBhbHJlYWR5IGNsb3NlZCBhbmQgc2hvd3MgZmluYWwgcmVzdWx0cy5cIixcbiAgICBvcHRpb25zOiBbXCJTdGFyYnVja3NcIiwgXCJMb2NhbCBCcmV3XCIsIFwiRHVua2luJ1wiLCBcIlBlZXQncyBDb2ZmZWVcIiwgXCJJbmRlcGVuZGVudCBDYWZlXCJdLFxuICAgIHZvdGluZ19tZXRob2Q6IFwic2luZ2xlX2Nob2ljZVwiLFxuICAgIHN0YXR1czogXCJjbG9zZWRcIixcbiAgICBjcmVhdGVkX2J5OiBcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMVwiLFxuICAgIGVuZF9kYXRlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSwgLy8gMSBkYXkgYWdvXG4gICAgc2V0dGluZ3M6IHtcbiAgICAgIGFsbG93X2Fub255bW91czogdHJ1ZSxcbiAgICAgIHNob3dfcmVzdWx0c19iZWZvcmVfY2xvc2U6IHRydWUsXG4gICAgICBhbGxvd19tdWx0aXBsZV92b3RlczogZmFsc2VcbiAgICB9LFxuICAgIGhhc2h0YWdzOiBbXCJjb2ZmZWVcIiwgXCJsb2NhbFwiLCBcImJ1c2luZXNzXCJdLFxuICAgIHBvbGxfc2V0dGluZ3M6IHtcbiAgICAgIHZvdGluZ19tZXRob2Q6IFwic2luZ2xlX2Nob2ljZVwiLFxuICAgICAgcmVzdWx0X2Rpc3BsYXk6IFwicGVyY2VudGFnZVwiXG4gICAgfSxcbiAgICBwcml2YWN5X2xldmVsOiBcInB1YmxpY1wiLFxuICAgIGlzX3B1YmxpYzogdHJ1ZSxcbiAgICBhbGxvd19hbm9ueW1vdXM6IHRydWUsXG4gICAgbWF4X3ZvdGVzX3Blcl91c2VyOiAxLFxuICAgIGNhdGVnb3J5OiBcImxvY2FsXCIsXG4gICAgdGFnczogW1wiY29mZmVlXCIsIFwiYnVzaW5lc3NcIl0sXG4gICAgcHJpbWFyeV9oYXNodGFnOiBcImNvZmZlZVwiLFxuICAgIHRvdGFsX3ZvdGVzOiAwLFxuICAgIHBhcnRpY2lwYXRpb25fcmF0ZTogMFxuICB9XG5dO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VlZFRlc3RQb2xscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnNvbGUubG9nKCfwn4yxIFNlZWRpbmcgdGVzdCBwb2xscyBkYXRhLi4uJyk7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcbiAgICBcbiAgICAvLyBGaXJzdCwgbGV0J3MgY2hlY2sgaWYgcG9sbHMgdGFibGUgZXhpc3RzIGFuZCBnZXQgaXRzIHN0cnVjdHVyZVxuICAgIGNvbnN0IHsgZGF0YTogdGFibGVJbmZvLCBlcnJvcjogdGFibGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzJylcbiAgICAgIC5zZWxlY3QoJ3RhYmxlX25hbWUnKVxuICAgICAgLmVxKCd0YWJsZV9zY2hlbWEnLCAncHVibGljJylcbiAgICAgIC5lcSgndGFibGVfbmFtZScsICdwb2xscycpO1xuXG4gICAgaWYgKHRhYmxlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgRXJyb3IgY2hlY2tpbmcgcG9sbHMgdGFibGU6JywgdGFibGVFcnJvcik7XG4gICAgICB0aHJvdyB0YWJsZUVycm9yO1xuICAgIH1cblxuICAgIGlmICghdGFibGVJbmZvIHx8IHRhYmxlSW5mby5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKCfinYwgUG9sbHMgdGFibGUgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGRhdGFiYXNlJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BvbGxzIHRhYmxlIGRvZXMgbm90IGV4aXN0Jyk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ+KchSBQb2xscyB0YWJsZSBleGlzdHMsIHByb2NlZWRpbmcgd2l0aCBzZWVkaW5nLi4uJyk7XG5cbiAgICAvLyBDbGVhciBleGlzdGluZyB0ZXN0IGRhdGFcbiAgICBjb25zdCB7IGVycm9yOiBkZWxldGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5saWtlKCd0aXRsZScsICcldGVzdCUnKTtcblxuICAgIGlmIChkZWxldGVFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBXYXJuaW5nOiBDb3VsZCBub3QgY2xlYXIgZXhpc3RpbmcgdGVzdCBkYXRhOicsIGRlbGV0ZUVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ/Cfp7kgQ2xlYXJlZCBleGlzdGluZyB0ZXN0IGRhdGEnKTtcbiAgICB9XG5cbiAgICAvLyBJbnNlcnQgdGVzdCBwb2xscyBvbmUgYnkgb25lIHRvIGF2b2lkIGJhdGNoIGluc2VydCBpc3N1ZXNcbiAgICBjb25zdCBwb2xsSWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGZvciAoY29uc3QgcG9sbCBvZiBURVNUX1BPTExTKSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+UhCBBdHRlbXB0aW5nIHRvIGluc2VydCBwb2xsOiBcIiR7cG9sbC50aXRsZX1cImApO1xuICAgICAgY29uc29sZS5sb2coJ1BvbGwgZGF0YTonLCBKU09OLnN0cmluZ2lmeShwb2xsLCBudWxsLCAyKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YTogaW5zZXJ0ZWRQb2xsLCBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAgIC5pbnNlcnQocG9sbClcbiAgICAgICAgLnNlbGVjdCgnaWQsIHRpdGxlJylcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBjb25zb2xlLmxvZygnSW5zZXJ0IHJlc3VsdDonLCB7IGluc2VydGVkUG9sbCwgaW5zZXJ0RXJyb3IgfSk7XG5cbiAgICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhg4p2MIEVycm9yIGluc2VydGluZyBwb2xsIFwiJHtwb2xsLnRpdGxlfVwiOmAsIGluc2VydEVycm9yKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHM6Jywge1xuICAgICAgICAgIG1lc3NhZ2U6IGluc2VydEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgZGV0YWlsczogaW5zZXJ0RXJyb3IuZGV0YWlscyxcbiAgICAgICAgICBoaW50OiBpbnNlcnRFcnJvci5oaW50LFxuICAgICAgICAgIGNvZGU6IGluc2VydEVycm9yLmNvZGVcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIENvbnRpbnVlIHdpdGggb3RoZXIgcG9sbHMgaW5zdGVhZCBvZiBmYWlsaW5nIGNvbXBsZXRlbHlcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnNlcnRlZFBvbGwgJiYgaW5zZXJ0ZWRQb2xsLmlkKSB7XG4gICAgICAgIHBvbGxJZHMucHVzaChpbnNlcnRlZFBvbGwuaWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhg4pyFIEluc2VydGVkIHBvbGw6ICR7aW5zZXJ0ZWRQb2xsLnRpdGxlfSAoSUQ6ICR7aW5zZXJ0ZWRQb2xsLmlkfSlgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8gTm8gZGF0YSByZXR1cm5lZCBmb3IgcG9sbDogJHtwb2xsLnRpdGxlfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg4pyFIFN1Y2Nlc3NmdWxseSBzZWVkZWQgJHtwb2xsSWRzLmxlbmd0aH0gdGVzdCBwb2xsc2ApO1xuICAgIGNvbnNvbGUubG9nKCfwn5OKIFNlZWRlZCBwb2xsIElEczonLCBwb2xsSWRzKTtcblxuICAgIHJldHVybiBwb2xsSWRzO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBFcnJvciBzZWVkaW5nIHRlc3QgcG9sbHM6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWVkVGVzdFZvdGVzKHBvbGxJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnNvbGUubG9nKCfwn5ez77iPIFNlZWRpbmcgdGVzdCB2b3Rlcy4uLicpO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG4gICAgY29uc3QgdGVzdFZvdGVzID0gW107XG4gICAgXG4gICAgLy8gQ3JlYXRlIHJlYWxpc3RpYyB2b3RlIGRhdGEgZm9yIGVhY2ggcG9sbFxuICAgIGZvciAoY29uc3QgcG9sbElkIG9mIHBvbGxJZHMpIHtcbiAgICAgIGNvbnN0IHBvbGwgPSBURVNUX1BPTExTLmZpbmQocCA9PiBwb2xsSWRzLmluY2x1ZGVzKHBvbGxJZCkpO1xuICAgICAgaWYgKCFwb2xsKSBjb250aW51ZTtcblxuICAgICAgLy8gR2VuZXJhdGUgMTAtNTAgdm90ZXMgcGVyIHBvbGwgd2l0aCByZWFsaXN0aWMgZGlzdHJpYnV0aW9uXG4gICAgICBjb25zdCB2b3RlQ291bnQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0MCkgKyAxMDtcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2b3RlQ291bnQ7IGkrKykge1xuICAgICAgICBjb25zdCB2b3RlID0ge1xuICAgICAgICAgIHBvbGxfaWQ6IHBvbGxJZCxcbiAgICAgICAgICB1c2VyX2lkOiBgdGVzdC12b3Rlci0ke2kgKyAxfWAsXG4gICAgICAgICAgY2hvaWNlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb2xsLm9wdGlvbnMubGVuZ3RoKSxcbiAgICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gTWF0aC5yYW5kb20oKSAqIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLCAvLyBSYW5kb20gdGltZSBpbiBsYXN0IDcgZGF5c1xuICAgICAgICAgIGlwX2FkZHJlc3M6IGAxOTIuMTY4LjEuJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTUpfWAsXG4gICAgICAgICAgdXNlcl9hZ2VudDogJ01vemlsbGEvNS4wIChUZXN0IEJyb3dzZXIpJ1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGVzdFZvdGVzLnB1c2godm90ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5zZXJ0IHZvdGVzIGluIGJhdGNoZXNcbiAgICBjb25zdCBiYXRjaFNpemUgPSA1MDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlc3RWb3Rlcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBjb25zdCBiYXRjaCA9IHRlc3RWb3Rlcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKTtcbiAgICAgIGNvbnN0IHsgZXJyb3I6IHZvdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3ZvdGVzJylcbiAgICAgICAgLmluc2VydChiYXRjaCk7XG5cbiAgICAgIGlmICh2b3RlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBXYXJuaW5nOiBDb3VsZCBub3QgaW5zZXJ0IHNvbWUgdm90ZXM6Jywgdm90ZUVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhg4pyFIFN1Y2Nlc3NmdWxseSBzZWVkZWQgJHt0ZXN0Vm90ZXMubGVuZ3RofSB0ZXN0IHZvdGVzYCk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygn4p2MIEVycm9yIHNlZWRpbmcgdGVzdCB2b3RlczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBUZXN0RGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc29sZS5sb2coJ/Cfp7kgQ2xlYW5pbmcgdXAgdGVzdCBkYXRhLi4uJyk7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKTtcbiAgICAvLyBEZWxldGUgdGVzdCB2b3Rlc1xuICAgIGNvbnN0IHsgZXJyb3I6IHZvdGVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndm90ZXMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAubGlrZSgndXNlcl9pZCcsICd0ZXN0LXZvdGVyLSUnKTtcblxuICAgIGlmICh2b3Rlc0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIFdhcm5pbmc6IENvdWxkIG5vdCBjbGVhbiB1cCB0ZXN0IHZvdGVzOicsIHZvdGVzRXJyb3IpO1xuICAgIH1cblxuICAgIC8vIERlbGV0ZSB0ZXN0IHBvbGxzXG4gICAgY29uc3QgeyBlcnJvcjogcG9sbHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5saWtlKCd0aXRsZScsICcldGVzdCUnKVxuICAgICAgLm9yKCd0aXRsZS5saWtlLiVkcmFmdCUnKVxuICAgICAgLm9yKCd0aXRsZS5saWtlLiVjbG9zZWQlJyk7XG5cbiAgICBpZiAocG9sbHNFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBXYXJuaW5nOiBDb3VsZCBub3QgY2xlYW4gdXAgdGVzdCBwb2xsczonLCBwb2xsc0Vycm9yKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygn4pyFIFRlc3QgZGF0YSBjbGVhbnVwIGNvbXBsZXRlZCcpO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coJ+KdjCBFcnJvciBjbGVhbmluZyB1cCB0ZXN0IGRhdGE6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREYXRhYmFzZVN0YXRzKCk6IFByb21pc2U8e1xuICBwb2xsc0NvdW50OiBudW1iZXI7XG4gIHZvdGVzQ291bnQ6IG51bWJlcjtcbiAgYWN0aXZlUG9sbHM6IG51bWJlcjtcbiAgY2xvc2VkUG9sbHM6IG51bWJlcjtcbn0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlQ2xpZW50KCk7XG4gICAgY29uc3QgeyBkYXRhOiBwb2xsc0RhdGEsIGVycm9yOiBwb2xsc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3BvbGxzJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBzdGF0dXMnKTtcblxuICAgIGNvbnN0IHsgZGF0YTogdm90ZXNEYXRhLCBlcnJvcjogdm90ZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd2b3RlcycpXG4gICAgICAuc2VsZWN0KCdpZCcpO1xuXG4gICAgaWYgKHBvbGxzRXJyb3IgfHwgdm90ZXNFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEYXRhYmFzZSBxdWVyeSBlcnJvcnM6ICR7cG9sbHNFcnJvcj8ubWVzc2FnZSB8fCB2b3Rlc0Vycm9yPy5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgcmVzcG9uc2UgZm9ybWF0c1xuICAgIGNvbnN0IHBvbGxzID0gQXJyYXkuaXNBcnJheShwb2xsc0RhdGEpID8gcG9sbHNEYXRhIDogKHBvbGxzRGF0YSA/IFtwb2xsc0RhdGFdIDogW10pO1xuICAgIGNvbnN0IHZvdGVzID0gQXJyYXkuaXNBcnJheSh2b3Rlc0RhdGEpID8gdm90ZXNEYXRhIDogKHZvdGVzRGF0YSA/IFt2b3Rlc0RhdGFdIDogW10pO1xuICAgIFxuICAgIGNvbnN0IGFjdGl2ZVBvbGxzID0gcG9sbHMuZmlsdGVyKHAgPT4gcC5zdGF0dXMgPT09ICdhY3RpdmUnKS5sZW5ndGg7XG4gICAgY29uc3QgY2xvc2VkUG9sbHMgPSBwb2xscy5maWx0ZXIocCA9PiBwLnN0YXR1cyA9PT0gJ2Nsb3NlZCcpLmxlbmd0aDtcblxuICAgIHJldHVybiB7XG4gICAgICBwb2xsc0NvdW50OiBwb2xscy5sZW5ndGgsXG4gICAgICB2b3Rlc0NvdW50OiB2b3Rlcy5sZW5ndGgsXG4gICAgICBhY3RpdmVQb2xscyxcbiAgICAgIGNsb3NlZFBvbGxzXG4gICAgfTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCfinYwgRXJyb3IgZ2V0dGluZyBkYXRhYmFzZSBzdGF0czonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJURVNUX1BPTExTIiwiY2xlYW51cFRlc3REYXRhIiwiZ2V0RGF0YWJhc2VTdGF0cyIsInNlZWRUZXN0UG9sbHMiLCJzZWVkVGVzdFZvdGVzIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIlNVUEFCQVNFX1NFQ1JFVF9LRVkiLCJFcnJvciIsImNvbnNvbGUiLCJsb2ciLCJzdGFydHNXaXRoIiwiY3JlYXRlQ2xpZW50IiwicmVzdEFwaVJlcXVlc3QiLCJlbmRwb2ludCIsIm1ldGhvZCIsImJvZHkiLCJ1cmwiLCJoZWFkZXJzIiwib3B0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJzdGF0dXMiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidm90aW5nX21ldGhvZCIsImNyZWF0ZWRfYnkiLCJlbmRfZGF0ZSIsIkRhdGUiLCJub3ciLCJ0b0lTT1N0cmluZyIsInNldHRpbmdzIiwiYWxsb3dfYW5vbnltb3VzIiwic2hvd19yZXN1bHRzX2JlZm9yZV9jbG9zZSIsImFsbG93X211bHRpcGxlX3ZvdGVzIiwiaGFzaHRhZ3MiLCJwb2xsX3NldHRpbmdzIiwicmVzdWx0X2Rpc3BsYXkiLCJwcml2YWN5X2xldmVsIiwiY2F0ZWdvcnkiLCJ0YWdzIiwicHJpbWFyeV9oYXNodGFnIiwidG90YWxfdm90ZXMiLCJwYXJ0aWNpcGF0aW9uX3JhdGUiLCJtYXhfc2VsZWN0aW9ucyIsImlzX3B1YmxpYyIsIm1heF92b3Rlc19wZXJfdXNlciIsInN1cGFiYXNlIiwidGFibGVJbmZvIiwiZXJyb3IiLCJ0YWJsZUVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwibGVuZ3RoIiwiZGVsZXRlRXJyb3IiLCJkZWxldGUiLCJsaWtlIiwicG9sbElkcyIsInBvbGwiLCJpbnNlcnRlZFBvbGwiLCJpbnNlcnRFcnJvciIsImluc2VydCIsInNpbmdsZSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwiaGludCIsImNvZGUiLCJpZCIsInB1c2giLCJ0ZXN0Vm90ZXMiLCJwb2xsSWQiLCJmaW5kIiwicCIsImluY2x1ZGVzIiwidm90ZUNvdW50IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaSIsInZvdGUiLCJwb2xsX2lkIiwidXNlcl9pZCIsImNob2ljZSIsImNyZWF0ZWRfYXQiLCJpcF9hZGRyZXNzIiwidXNlcl9hZ2VudCIsImJhdGNoU2l6ZSIsImJhdGNoIiwic2xpY2UiLCJ2b3RlRXJyb3IiLCJ2b3Rlc0Vycm9yIiwicG9sbHNFcnJvciIsIm9yIiwicG9sbHNEYXRhIiwidm90ZXNEYXRhIiwicG9sbHMiLCJBcnJheSIsImlzQXJyYXkiLCJ2b3RlcyIsImFjdGl2ZVBvbGxzIiwiZmlsdGVyIiwiY2xvc2VkUG9sbHMiLCJwb2xsc0NvdW50Iiwidm90ZXNDb3VudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7UUE2RWFBO2VBQUFBOztRQTZUU0M7ZUFBQUE7O1FBbUNBQztlQUFBQTs7UUF4S0FDO2VBQUFBOztRQW1GQUM7ZUFBQUE7Ozs0QkF4Vk87QUFFN0I7Ozs7Ozs7Q0FPQyxHQUVELFNBQVNDO0lBQ1AsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyx3QkFBd0I7SUFDeEQsdUNBQXVDO0lBQ3ZDLE1BQU1DLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csbUJBQW1CO0lBRW5ELElBQUksQ0FBQ0wsZUFBZSxDQUFDSSxhQUFhO1FBQ2hDLE1BQU0sSUFBSUUsTUFBTTtJQUNsQjtJQUVBQyxRQUFRQyxHQUFHLENBQUMsNEJBQTRCSixZQUFZSyxVQUFVLENBQUMsZ0JBQWdCLGlCQUFpQjtJQUNoR0YsUUFBUUMsR0FBRyxDQUFDO0lBRVosT0FBT0UsSUFBQUEsd0JBQVksRUFBQ1YsYUFBYUk7QUFDbkM7QUFFQSwyQkFBMkI7QUFDM0IsZUFBZU8sZUFBZUMsUUFBZ0IsRUFBRUMsU0FBaUIsS0FBSyxFQUFFQyxJQUFVO0lBQ2hGLE1BQU1kLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0Msd0JBQXdCO0lBQ3hELE1B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