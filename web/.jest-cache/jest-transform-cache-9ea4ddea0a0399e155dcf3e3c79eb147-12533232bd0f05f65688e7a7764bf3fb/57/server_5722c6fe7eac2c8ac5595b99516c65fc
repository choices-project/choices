94e293d059f5c9fef7fbfac76b5773af
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get createServerAdminClient () {
        return createServerAdminClient;
    },
    get createServerSupabaseClient () {
        return createServerSupabaseClient;
    },
    get getServerUser () {
        return getServerUser;
    },
    get getServerUserProfile () {
        return getServerUserProfile;
    },
    get getServerUserWithProfile () {
        return getServerUserWithProfile;
    },
    get getSupabaseAdminClient () {
        return getSupabaseAdminClient;
    },
    get getSupabaseServerClient () {
        return getSupabaseServerClient;
    },
    get isServerAdmin () {
        return isServerAdmin;
    },
    get requireServerAdmin () {
        return requireServerAdmin;
    },
    get requireServerAuth () {
        return requireServerAuth;
    }
});
require("server-only");
const _headers = require("next/headers");
const _ssr = require("@supabase/ssr");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Environment validation
const validateEnvironment = ()=>{
    const requiredVars = {
        NEXT_PUBLIC_SUPABASE_URL: process.env['NEXT_PUBLIC_SUPABASE_URL'],
        NEXT_PUBLIC_SUPABASE_ANON_KEY: process.env['NEXT_PUBLIC_SUPABASE_ANON_KEY'],
        SUPABASE_SECRET_KEY: process.env['SUPABASE_SECRET_KEY']
    };
    const missing = Object.entries(requiredVars).filter(([_, value])=>!value).map(([key])=>key);
    if (missing.length > 0) {
        throw new Error(`Missing required environment variables: ${missing.join(', ')}`);
    }
    return requiredVars;
};
// Initialize environment variables
const env = validateEnvironment();
async function getSupabaseServerClient() {
    const cookieStore = await (0, _headers.cookies)();
    return (0, _ssr.createServerClient)(env.NEXT_PUBLIC_SUPABASE_URL, env.NEXT_PUBLIC_SUPABASE_ANON_KEY, {
        cookies: {
            get (name) {
                return cookieStore.get(name)?.value;
            },
            set (name, value, options) {
                try {
                    cookieStore.set({
                        name,
                        value,
                        ...options
                    });
                } catch (error) {
                // The `cookies().set()` method can only be called in a Server Component or Route Handler
                // That are making a `request`
                // console.warn('Could not set cookie from server component:', error);
                }
            },
            remove (name, options) {
                try {
                    cookieStore.set({
                        name,
                        value: '',
                        ...options
                    });
                } catch (error) {
                // The `cookies().set()` method can only be called in a Server Component or Route Handler
                // That are making a `request`
                // console.warn('Could not remove cookie from server component:', error);
                }
            }
        }
    });
}
async function getSupabaseAdminClient() {
    const { createClient } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("@supabase/supabase-js")));
    return createClient(env.NEXT_PUBLIC_SUPABASE_URL, env.SUPABASE_SECRET_KEY, {
        auth: {
            autoRefreshToken: false,
            persistSession: false
        }
    });
}
async function getServerUser() {
    const supabase = await getSupabaseServerClient();
    try {
        const { data: { user }, error } = await supabase.auth.getUser();
        if (error) {
            // Log error for debugging but don't expose to client
            if (process.env.NODE_ENV === 'development') {
                console.error('Error getting user:', error);
            }
            return null;
        }
        return user;
    } catch (error) {
        // Log error for debugging but don't expose to client
        if (process.env.NODE_ENV === 'development') {
            console.error('Error in getServerUser:', error);
        }
        return null;
    }
}
async function getServerUserProfile() {
    const user = await getServerUser();
    if (!user) {
        return null;
    }
    const supabase = await getSupabaseServerClient();
    try {
        const { data: profile, error } = await supabase.from('user_profiles').select('*').eq('user_id', user.id).single();
        if (error) {
            // Log error for debugging but don't expose to client
            if (process.env.NODE_ENV === 'development') {
                console.error('Error getting user profile:', error);
            }
            return null;
        }
        return profile;
    } catch (error) {
        // Log error for debugging but don't expose to client
        if (process.env.NODE_ENV === 'development') {
            console.error('Error in getServerUserProfile:', error);
        }
        return null;
    }
}
async function isServerAdmin() {
    const profile = await getServerUserProfile();
    return profile ? profile.is_admin === true : false;
}
async function requireServerAdmin() {
    const isAdmin = await isServerAdmin();
    if (!isAdmin) {
        throw new Error('Admin access required');
    }
    return true;
}
async function requireServerAuth() {
    const user = await getServerUser();
    if (!user) {
        throw new Error('Authentication required');
    }
    return user;
}
async function getServerUserWithProfile() {
    const user = await getServerUser();
    if (!user) {
        return null;
    }
    const profile = await getServerUserProfile();
    return {
        user,
        profile
    };
}
async function createServerSupabaseClient() {
    return await getSupabaseServerClient();
}
async function createServerAdminClient() {
    return await getSupabaseAdminClient();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi91dGlscy9zdXBhYmFzZS9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICdzZXJ2ZXItb25seSc7ICAgICAgICAgICAgICAgICAgLy8gYnVpbGQtdGltZSBndWFyZFxuaW1wb3J0IHR5cGUgeyBTdXBhYmFzZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXG5pbXBvcnQgdHlwZSB7IERhdGFiYXNlIH0gZnJvbSAnLi4vLi4vdHlwZXMvZGF0YWJhc2UnXG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQsIHR5cGUgQ29va2llT3B0aW9ucyB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXG5cbi8vIFJlLWV4cG9ydCB0aGUgRGF0YWJhc2UgdHlwZSBmb3IgdXNlIGluIG90aGVyIG1vZHVsZXNcbmV4cG9ydCB0eXBlIHsgRGF0YWJhc2UgfVxuXG4vLyBFbnZpcm9ubWVudCB2YWxpZGF0aW9uXG5jb25zdCB2YWxpZGF0ZUVudmlyb25tZW50ID0gKCkgPT4ge1xuICBjb25zdCByZXF1aXJlZFZhcnMgPSB7XG4gICAgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMOiBwcm9jZXNzLmVudlsnTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJ10sXG4gICAgTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk6IHByb2Nlc3MuZW52WydORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSddLFxuICAgIFNVUEFCQVNFX1NFQ1JFVF9LRVk6IHByb2Nlc3MuZW52WydTVVBBQkFTRV9TRUNSRVRfS0VZJ11cbiAgfVxuXG4gIGNvbnN0IG1pc3NpbmcgPSBPYmplY3QuZW50cmllcyhyZXF1aXJlZFZhcnMpXG4gICAgLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gIXZhbHVlKVxuICAgIC5tYXAoKFtrZXldKSA9PiBrZXkpXG5cbiAgaWYgKG1pc3NpbmcubGVuZ3RoID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXM6ICR7bWlzc2luZy5qb2luKCcsICcpfWApXG4gIH1cblxuICByZXR1cm4gcmVxdWlyZWRWYXJzXG59XG5cbi8vIEluaXRpYWxpemUgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gIGNvbnN0IGVudiA9IHZhbGlkYXRlRW52aXJvbm1lbnQoKVxuICBcbi8vIENyZWF0ZSBTdXBhYmFzZSBzZXJ2ZXIgY2xpZW50XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKSB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICBcbiAgcmV0dXJuIGNyZWF0ZVNlcnZlckNsaWVudDxEYXRhYmFzZT4oXG4gICAgZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZISxcbiAgICB7XG4gICAgICBjb29raWVzOiB7XG4gICAgICAgIGdldChuYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb29raWVTdG9yZS5zZXQoeyBuYW1lLCB2YWx1ZSwgLi4ub3B0aW9ucyB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gVGhlIGBjb29raWVzKCkuc2V0KClgIG1ldGhvZCBjYW4gb25seSBiZSBjYWxsZWQgaW4gYSBTZXJ2ZXIgQ29tcG9uZW50IG9yIFJvdXRlIEhhbmRsZXJcbiAgICAgICAgICAgIC8vIFRoYXQgYXJlIG1ha2luZyBhIGByZXF1ZXN0YFxuICAgICAgICAgICAgLy8gY29uc29sZS53YXJuKCdDb3VsZCBub3Qgc2V0IGNvb2tpZSBmcm9tIHNlcnZlciBjb21wb25lbnQ6JywgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlKG5hbWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb29raWVTdG9yZS5zZXQoeyBuYW1lLCB2YWx1ZTogJycsIC4uLm9wdGlvbnMgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFRoZSBgY29va2llcygpLnNldCgpYCBtZXRob2QgY2FuIG9ubHkgYmUgY2FsbGVkIGluIGEgU2VydmVyIENvbXBvbmVudCBvciBSb3V0ZSBIYW5kbGVyXG4gICAgICAgICAgICAvLyBUaGF0IGFyZSBtYWtpbmcgYSBgcmVxdWVzdGBcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybignQ291bGQgbm90IHJlbW92ZSBjb29raWUgZnJvbSBzZXJ2ZXIgY29tcG9uZW50OicsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn1cblxuLy8gQ3JlYXRlIFN1cGFiYXNlIGFkbWluIGNsaWVudCAoZm9yIHNlcnZlci1zaWRlIG9wZXJhdGlvbnMgcmVxdWlyaW5nIGVsZXZhdGVkIHByaXZpbGVnZXMpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3VwYWJhc2VBZG1pbkNsaWVudCgpOiBQcm9taXNlPFN1cGFiYXNlQ2xpZW50PERhdGFiYXNlPj4ge1xuICBjb25zdCB7IGNyZWF0ZUNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnKTtcbiAgXG4gIHJldHVybiBjcmVhdGVDbGllbnQoXG4gICAgZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgZW52LlNVUEFCQVNFX1NFQ1JFVF9LRVkhLFxuICAgIHtcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyIGZyb20gc2VydmVyLXNpZGUgY29udGV4dFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclVzZXIoKSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiB7IHVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpO1xuICAgIFxuICAgIGlmIChlcnJvcikge1xuICAgICAgLy8gTG9nIGVycm9yIGZvciBkZWJ1Z2dpbmcgYnV0IGRvbid0IGV4cG9zZSB0byBjbGllbnRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIExvZyBlcnJvciBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBleHBvc2UgdG8gY2xpZW50XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRTZXJ2ZXJVc2VyOicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyIHByb2ZpbGUgZnJvbSBzZXJ2ZXItc2lkZSBjb250ZXh0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyVXNlclByb2ZpbGUoKTogUHJvbWlzZTxEYXRhYmFzZVsncHVibGljJ11bJ1RhYmxlcyddWyd1c2VyX3Byb2ZpbGVzJ11bJ1JvdyddIHwgbnVsbD4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0U2VydmVyVXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCd1c2VyX2lkJywgdXNlci5pZCBhcyBhbnkpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAvLyBMb2cgZXJyb3IgZm9yIGRlYnVnZ2luZyBidXQgZG9uJ3QgZXhwb3NlIHRvIGNsaWVudFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgdXNlciBwcm9maWxlOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcHJvZmlsZSBhcyBEYXRhYmFzZVsncHVibGljJ11bJ1RhYmxlcyddWyd1c2VyX3Byb2ZpbGVzJ11bJ1JvdyddO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIExvZyBlcnJvciBmb3IgZGVidWdnaW5nIGJ1dCBkb24ndCBleHBvc2UgdG8gY2xpZW50XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZXRTZXJ2ZXJVc2VyUHJvZmlsZTonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiB1c2VyIGlzIGFkbWluXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNTZXJ2ZXJBZG1pbigpIHtcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGdldFNlcnZlclVzZXJQcm9maWxlKCk7XG4gIHJldHVybiBwcm9maWxlID8gcHJvZmlsZS5pc19hZG1pbiA9PT0gdHJ1ZSA6IGZhbHNlO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gcmVxdWlyZSBhZG1pbiBhY2Nlc3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1aXJlU2VydmVyQWRtaW4oKSB7XG4gIGNvbnN0IGlzQWRtaW4gPSBhd2FpdCBpc1NlcnZlckFkbWluKCk7XG4gIFxuICBpZiAoIWlzQWRtaW4pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FkbWluIGFjY2VzcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHJlcXVpcmUgdXNlciBhdXRoZW50aWNhdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVpcmVTZXJ2ZXJBdXRoKCkge1xuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0U2VydmVyVXNlcigpO1xuICBcbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpO1xuICB9XG4gIFxuICByZXR1cm4gdXNlcjtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyIHdpdGggcHJvZmlsZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlcnZlclVzZXJXaXRoUHJvZmlsZSgpIHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldFNlcnZlclVzZXIoKTtcbiAgXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIFxuICBjb25zdCBwcm9maWxlID0gYXdhaXQgZ2V0U2VydmVyVXNlclByb2ZpbGUoKTtcbiAgXG4gIHJldHVybiB7XG4gICAgdXNlcixcbiAgICBwcm9maWxlXG4gIH07XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYSBuZXcgU3VwYWJhc2UgY2xpZW50IGZvciBzcGVjaWZpYyBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2VydmVyU3VwYWJhc2VDbGllbnQoKTogUHJvbWlzZTxTdXBhYmFzZUNsaWVudDxEYXRhYmFzZT4+IHtcbiAgcmV0dXJuIGF3YWl0IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KCk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjcmVhdGUgYW4gYWRtaW4gY2xpZW50IGZvciBzcGVjaWZpYyBvcGVyYXRpb25zXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2VydmVyQWRtaW5DbGllbnQoKTogUHJvbWlzZTxTdXBhYmFzZUNsaWVudDxEYXRhYmFzZT4+IHtcbiAgcmV0dXJuIGF3YWl0IGdldFN1cGFiYXNlQWRtaW5DbGllbnQoKTtcbn1cblxuLy8gRXhwb3J0IHR5cGVzIGZvciB1c2UgaW4gb3RoZXIgbW9kdWxlc1xuZXhwb3J0IHR5cGUgU2VydmVyVXNlciA9IEF3YWl0ZWQ8UmV0dXJuVHlwZTx0eXBlb2YgZ2V0U2VydmVyVXNlcj4+O1xuZXhwb3J0IHR5cGUgU2VydmVyVXNlclByb2ZpbGUgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGdldFNlcnZlclVzZXJQcm9maWxlPj47XG5leHBvcnQgdHlwZSBTZXJ2ZXJVc2VyV2l0aFByb2ZpbGUgPSBBd2FpdGVkPFJldHVyblR5cGU8dHlwZW9mIGdldFNlcnZlclVzZXJXaXRoUHJvZmlsZT4+OyJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJBZG1pbkNsaWVudCIsImNyZWF0ZVNlcnZlclN1cGFiYXNlQ2xpZW50IiwiZ2V0U2VydmVyVXNlciIsImdldFNlcnZlclVzZXJQcm9maWxlIiwiZ2V0U2VydmVyVXNlcldpdGhQcm9maWxlIiwiZ2V0U3VwYWJhc2VBZG1pbkNsaWVudCIsImdldFN1cGFiYXNlU2VydmVyQ2xpZW50IiwiaXNTZXJ2ZXJBZG1pbiIsInJlcXVpcmVTZXJ2ZXJBZG1pbiIsInJlcXVpcmVTZXJ2ZXJBdXRoIiwidmFsaWRhdGVFbnZpcm9ubWVudCIsInJlcXVpcmVkVmFycyIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIlNVUEFCQVNFX1NFQ1JFVF9LRVkiLCJtaXNzaW5nIiwiT2JqZWN0IiwiZW50cmllcyIsImZpbHRlciIsIl8iLCJ2YWx1ZSIsIm1hcCIsImtleSIsImxlbmd0aCIsIkVycm9yIiwiam9pbiIsImNvb2tpZVN0b3JlIiwiY29va2llcyIsImNyZWF0ZVNlcnZlckNsaWVudCIsImdldCIsIm5hbWUiLCJzZXQiLCJvcHRpb25zIiwiZXJyb3IiLCJyZW1vdmUiLCJjcmVhdGVDbGllbnQiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwic3VwYWJhc2UiLCJkYXRhIiwidXNlciIsImdldFVzZXIiLCJOT0RFX0VOViIsImNvbnNvbGUiLCJwcm9maWxlIiwiZnJvbSIsInNlbGVjdCIsImVxIiwiaWQiLCJzaW5nbGUiLCJpc19hZG1pbiIsImlzQWRtaW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O1FBZ01zQkE7ZUFBQUE7O1FBTEFDO2VBQUFBOztRQXhHQUM7ZUFBQUE7O1FBeUJBQztlQUFBQTs7UUErREFDO2VBQUFBOztRQXhHQUM7ZUFBQUE7O1FBbkNBQztlQUFBQTs7UUErR0FDO2VBQUFBOztRQU1BQztlQUFBQTs7UUFXQUM7ZUFBQUE7OztRQWhLZjt5QkFFaUI7cUJBRStCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFLdkQseUJBQXlCO0FBQ3pC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