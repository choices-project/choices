9b3043a02c3b73b9daefd38dcaa66ea2
/**
 * Enhanced Social Feed Component
 * 
 * Instagram-like social feed with advanced features
 * Features:
 * - Smooth infinite scroll
 * - Pull-to-refresh
 * - Touch gesture support
 * - Real-time updates
 * - Personalization algorithms
 * - Enhanced engagement metrics
 * - Performance optimizations
 * - Accessibility compliance
 */ "use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return EnhancedSocialFeed;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _outline = require("@heroicons/react/24/outline");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _stores = require("../../../lib/stores");
const _FeedItem = /*#__PURE__*/ _interop_require_default(require("./FeedItem"));
const _InfiniteScroll = /*#__PURE__*/ _interop_require_default(require("./InfiniteScroll"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
function EnhancedSocialFeed({ userId, preferences: _preferences, onLike, onShare, onBookmark, onComment, onViewDetails, className = "", enablePersonalization = true, enableRealTimeUpdates = true, enableAnalytics = false, enableHaptics = true, showTrending = true }) {
    const feeds = (0, _stores.useFeeds)();
    const { loadFeeds, likeFeed, bookmarkFeed, refreshFeeds } = (0, _stores.useFeedsActions)();
    const isLoading = (0, _stores.useFeedsLoading)();
    // Use store state instead of local state
    const feedItems = feeds;
    const [page, setPage] = (0, _react.useState)(1);
    const [hasMore, setHasMore] = (0, _react.useState)(true);
    const [personalizationScore, setPersonalizationScore] = (0, _react.useState)(0);
    const [lastUpdate, setLastUpdate] = (0, _react.useState)(new Date());
    const wsRef = (0, _react.useRef)(null);
    const refreshIntervalRef = (0, _react.useRef)(null);
    // Load feed items with personalization
    const loadFeedItems = (0, _react.useCallback)(async (pageNum, isRefresh = false)=>{
        if (isLoading) return;
        try {
            // Update page state
            setPage(pageNum);
            // Use FeedsStore to load feeds
            if (isRefresh) {
                await refreshFeeds();
            } else {
                await loadFeeds("all");
            }
            setHasMore(feeds.length === 20);
            setPersonalizationScore(0); // This would come from the store
            setLastUpdate(new Date());
        } catch (error) {
            // Error handling - could be logged to monitoring service
            console.error("Error loading feed:", error);
        }
    }, [
        isLoading,
        loadFeeds,
        refreshFeeds,
        feeds.length
    ]);
    // Load initial feed
    (0, _react.useEffect)(()=>{
        void loadFeedItems(1, true);
    }, [
        loadFeedItems
    ]);
    // Set up real-time updates
    (0, _react.useEffect)(()=>{
        if (enableRealTimeUpdates && userId) {
            // WebSocket connection for real-time updates
            const ws = new WebSocket(`wss://your-websocket-endpoint/feed/${userId}`);
            wsRef.current = ws;
            ws.onmessage = (event)=>{
                const data = JSON.parse(event.data);
                if (data.label === "new_item") {
                    // Use store action to add new feed item
                    // This would need to be implemented in the store
                    logger.info("New item received:", data.item);
                } else if (data.label === "engagement_update") {
                    // Use store action to update engagement
                    // This would need to be implemented in the store
                    logger.info("Engagement update received:", data);
                }
            };
            // Fallback polling for updates
            refreshIntervalRef.current = setInterval(()=>{
                void loadFeedItems(1, true);
            }, 30000); // Refresh every 30 seconds
            return ()=>{
                ws.close();
                if (refreshIntervalRef.current) {
                    clearInterval(refreshIntervalRef.current);
                }
            };
        }
    }, [
        enableRealTimeUpdates,
        userId,
        loadFeedItems
    ]);
    // Analytics tracking
    const trackEvent = (0, _react.useCallback)((event, data)=>{
        if (enableAnalytics) {
            logger.info("Analytics:", event, data);
            // Implement analytics tracking for social media interactions
            try {
                // Track social media click event
                if (typeof window !== "undefined" && window.gtag) {
                    window.gtag("event", "social_media_click", {
                        event_category: "civics",
                        event_label: data?.platform || "unknown",
                        value: 1
                    });
                }
                // Track in local analytics if available
                if (typeof window !== "undefined" && window.analytics) {
                    window.analytics.track("Social Media Clicked", {
                        platform: data?.platform || "unknown",
                        handle: data?.handle || "unknown",
                        url: data?.url || "unknown",
                        representative: data?.representative || "unknown"
                    });
                }
            } catch (error) {
                console.warn("Analytics tracking failed:", error);
            }
        }
    }, [
        enableAnalytics
    ]);
    // Handle engagement actions
    const handleLike = (0, _react.useCallback)((itemId)=>{
        // Use FeedsStore to like feed
        likeFeed(itemId);
        onLike?.(itemId);
        trackEvent("feed_item_liked", {
            itemId
        });
    }, [
        likeFeed,
        onLike,
        trackEvent
    ]);
    const handleBookmark = (0, _react.useCallback)((itemId)=>{
        // Use FeedsStore to bookmark feed
        bookmarkFeed(itemId);
        onBookmark?.(itemId);
        trackEvent("feed_item_bookmarked", {
            itemId
        });
    }, [
        bookmarkFeed,
        onBookmark,
        trackEvent
    ]);
    const handleShare = (0, _react.useCallback)((itemId)=>{
        onShare?.(itemId);
        trackEvent("feed_item_shared", {
            itemId
        });
        // Native sharing if available
        if (navigator.share) {
            const item = feedItems.find((item)=>item.id === itemId);
            if (item) {
                navigator.share({
                    title: item.title,
                    text: item.summary || "",
                    url: item.source.url || window.location.href
                });
            }
        }
    }, [
        feedItems,
        onShare,
        trackEvent
    ]);
    const handleComment = (0, _react.useCallback)((itemId)=>{
        onComment?.(itemId);
        trackEvent("feed_item_commented", {
            itemId
        });
    }, [
        onComment,
        trackEvent
    ]);
    const handleViewDetails = (0, _react.useCallback)((itemId)=>{
        onViewDetails?.(itemId);
    }, [
        onViewDetails
    ]);
    // Handle refresh
    const handleRefresh = (0, _react.useCallback)(async ()=>{
        await loadFeedItems(1, true);
    }, [
        loadFeedItems
    ]);
    // Handle load more
    const handleLoadMore = (0, _react.useCallback)(async ()=>{
        await loadFeedItems(page + 1, false);
    }, [
        loadFeedItems,
        page
    ]);
    // Format last update time
    const formatLastUpdate = (date)=>{
        const now = new Date();
        const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));
        if (diffInMinutes < 1) return "Just now";
        if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
        if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;
        return date.toLocaleDateString();
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `h-full ${className}`,
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "bg-white border-b border-gray-200 p-4",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-between",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                    className: "text-lg font-semibold text-gray-900",
                                    children: "Civic Feed"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    className: "text-sm text-gray-500",
                                    children: enablePersonalization && personalizationScore > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "flex items-center space-x-1",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.SparklesIcon, {
                                                className: "w-4 h-4 text-blue-500"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                children: [
                                                    "Personalized for you (",
                                                    personalizationScore,
                                                    "% match)"
                                                ]
                                            })
                                        ]
                                    })
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center space-x-4 text-sm text-gray-500",
                            children: [
                                enableRealTimeUpdates && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center space-x-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "w-2 h-2 bg-green-500 rounded-full animate-pulse"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            children: "Live"
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center space-x-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.ClockIcon, {
                                            className: "w-4 h-4"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                            children: [
                                                "Updated ",
                                                formatLastUpdate(lastUpdate)
                                            ]
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                })
            }),
            isLoading && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "bg-blue-50 border-b border-blue-200 p-3",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-center space-x-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "text-sm text-blue-600",
                            children: "Refreshing feed..."
                        })
                    ]
                })
            }),
            showTrending && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200 p-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "w-2 h-2 bg-red-500 rounded-full animate-pulse"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-sm font-medium text-gray-700",
                                children: "Trending Now"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "mt-2 text-sm text-gray-600",
                        children: "Climate Action • Voting Rights • Infrastructure"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_InfiniteScroll.default, {
                onLoadMore: handleLoadMore,
                hasMore: hasMore,
                isLoading: isLoading,
                onRefresh: handleRefresh,
                enableScrollToTop: true,
                enablePullToRefresh: true,
                className: "h-full",
                loadingComponent: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-center py-8",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "ml-3 text-gray-500",
                            children: "Loading more..."
                        })
                    ]
                }),
                endComponent: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "text-center py-8 text-gray-500",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            children: "You've reached the end of the feed"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-sm mt-1",
                            children: "Check back later for more updates"
                        })
                    ]
                }),
                children: feedItems.map((item)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_FeedItem.default, {
                        item: item,
                        onLike: handleLike,
                        onShare: handleShare,
                        onBookmark: handleBookmark,
                        onComment: handleComment,
                        onViewDetails: handleViewDetails,
                        isLiked: item.userInteraction.liked,
                        isBookmarked: item.userInteraction.bookmarked,
                        showEngagement: true,
                        enableHaptics: enableHaptics
                    }, item.id))
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9mZWVkcy9jb21wb25lbnRzL0VuaGFuY2VkU29jaWFsRmVlZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmhhbmNlZCBTb2NpYWwgRmVlZCBDb21wb25lbnRcbiAqIFxuICogSW5zdGFncmFtLWxpa2Ugc29jaWFsIGZlZWQgd2l0aCBhZHZhbmNlZCBmZWF0dXJlc1xuICogRmVhdHVyZXM6XG4gKiAtIFNtb290aCBpbmZpbml0ZSBzY3JvbGxcbiAqIC0gUHVsbC10by1yZWZyZXNoXG4gKiAtIFRvdWNoIGdlc3R1cmUgc3VwcG9ydFxuICogLSBSZWFsLXRpbWUgdXBkYXRlc1xuICogLSBQZXJzb25hbGl6YXRpb24gYWxnb3JpdGhtc1xuICogLSBFbmhhbmNlZCBlbmdhZ2VtZW50IG1ldHJpY3NcbiAqIC0gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uc1xuICogLSBBY2Nlc3NpYmlsaXR5IGNvbXBsaWFuY2VcbiAqL1xuXG4ndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7XG4gIFNwYXJrbGVzSWNvbixcbiAgQ2xvY2tJY29uXG59IGZyb20gJ0BoZXJvaWNvbnMvcmVhY3QvMjQvb3V0bGluZSc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHR5cGUgeyBVc2VyUHJlZmVyZW5jZXMgfSBmcm9tICdAL2ZlYXR1cmVzL2ZlZWRzL3R5cGVzJztcbmltcG9ydCB7IFxuICB1c2VGZWVkcywgXG4gIHVzZUZlZWRzQWN0aW9ucywgXG4gIHVzZUZlZWRzTG9hZGluZ1xufSBmcm9tICdAL2xpYi9zdG9yZXMnO1xuXG5pbXBvcnQgRmVlZEl0ZW0gZnJvbSAnLi9GZWVkSXRlbSc7XG5pbXBvcnQgSW5maW5pdGVTY3JvbGwgZnJvbSAnLi9JbmZpbml0ZVNjcm9sbCc7XG5cblxuaW50ZXJmYWNlIEVuaGFuY2VkU29jaWFsRmVlZFByb3BzIHtcbiAgdXNlcklkPzogc3RyaW5nO1xuICBwcmVmZXJlbmNlcz86IFVzZXJQcmVmZXJlbmNlcztcbiAgb25MaWtlPzogKGl0ZW1JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvblNoYXJlPzogKGl0ZW1JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvbkJvb2ttYXJrPzogKGl0ZW1JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvbkNvbW1lbnQ/OiAoaXRlbUlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uVmlld0RldGFpbHM/OiAoaXRlbUlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgZW5hYmxlUGVyc29uYWxpemF0aW9uPzogYm9vbGVhbjtcbiAgZW5hYmxlUmVhbFRpbWVVcGRhdGVzPzogYm9vbGVhbjtcbiAgZW5hYmxlQW5hbHl0aWNzPzogYm9vbGVhbjtcbiAgZW5hYmxlSGFwdGljcz86IGJvb2xlYW47XG4gIHNob3dUcmVuZGluZz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVuaGFuY2VkU29jaWFsRmVlZCh7XG4gIHVzZXJJZCxcbiAgcHJlZmVyZW5jZXM6IF9wcmVmZXJlbmNlcyxcbiAgb25MaWtlLFxuICBvblNoYXJlLFxuICBvbkJvb2ttYXJrLFxuICBvbkNvbW1lbnQsXG4gIG9uVmlld0RldGFpbHMsXG4gIGNsYXNzTmFtZSA9ICcnLFxuICBlbmFibGVQZXJzb25hbGl6YXRpb24gPSB0cnVlLFxuICBlbmFibGVSZWFsVGltZVVwZGF0ZXMgPSB0cnVlLFxuICBlbmFibGVBbmFseXRpY3MgPSBmYWxzZSxcbiAgZW5hYmxlSGFwdGljcyA9IHRydWUsXG4gIHNob3dUcmVuZGluZyA9IHRydWVcbn06IEVuaGFuY2VkU29jaWFsRmVlZFByb3BzKSB7XG4gIGNvbnN0IGZlZWRzID0gdXNlRmVlZHMoKTtcbiAgY29uc3QgeyBsb2FkRmVlZHMsIGxpa2VGZWVkLCBib29rbWFya0ZlZWQsIHJlZnJlc2hGZWVkcyB9ID0gdXNlRmVlZHNBY3Rpb25zKCk7XG4gIGNvbnN0IGlzTG9hZGluZyA9IHVzZUZlZWRzTG9hZGluZygpO1xuICBcbiAgLy8gVXNlIHN0b3JlIHN0YXRlIGluc3RlYWQgb2YgbG9jYWwgc3RhdGVcbiAgY29uc3QgZmVlZEl0ZW1zID0gZmVlZHM7XG4gIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlKDEpO1xuICBjb25zdCBbaGFzTW9yZSwgc2V0SGFzTW9yZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3BlcnNvbmFsaXphdGlvblNjb3JlLCBzZXRQZXJzb25hbGl6YXRpb25TY29yZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2xhc3RVcGRhdGUsIHNldExhc3RVcGRhdGVdID0gdXNlU3RhdGU8RGF0ZT4obmV3IERhdGUoKSk7XG4gIFxuICBjb25zdCB3c1JlZiA9IHVzZVJlZjxXZWJTb2NrZXQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgcmVmcmVzaEludGVydmFsUmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gTG9hZCBmZWVkIGl0ZW1zIHdpdGggcGVyc29uYWxpemF0aW9uXG4gIGNvbnN0IGxvYWRGZWVkSXRlbXMgPSB1c2VDYWxsYmFjayhhc3luYyAocGFnZU51bTogbnVtYmVyLCBpc1JlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgIGlmIChpc0xvYWRpbmcpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICAvLyBVcGRhdGUgcGFnZSBzdGF0ZVxuICAgICAgc2V0UGFnZShwYWdlTnVtKTtcbiAgICAgIFxuICAgICAgLy8gVXNlIEZlZWRzU3RvcmUgdG8gbG9hZCBmZWVkc1xuICAgICAgaWYgKGlzUmVmcmVzaCkge1xuICAgICAgICBhd2FpdCByZWZyZXNoRmVlZHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGxvYWRGZWVkcygnYWxsJyk7XG4gICAgICB9XG5cbiAgICAgIHNldEhhc01vcmUoZmVlZHMubGVuZ3RoID09PSAyMCk7XG4gICAgICBzZXRQZXJzb25hbGl6YXRpb25TY29yZSgwKTsgLy8gVGhpcyB3b3VsZCBjb21lIGZyb20gdGhlIHN0b3JlXG4gICAgICBzZXRMYXN0VXBkYXRlKG5ldyBEYXRlKCkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFcnJvciBoYW5kbGluZyAtIGNvdWxkIGJlIGxvZ2dlZCB0byBtb25pdG9yaW5nIHNlcnZpY2VcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZmVlZDonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbaXNMb2FkaW5nLCBsb2FkRmVlZHMsIHJlZnJlc2hGZWVkcywgZmVlZHMubGVuZ3RoXSk7XG5cbiAgLy8gTG9hZCBpbml0aWFsIGZlZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB2b2lkIGxvYWRGZWVkSXRlbXMoMSwgdHJ1ZSk7XG4gIH0sIFtsb2FkRmVlZEl0ZW1zXSk7XG5cbiAgLy8gU2V0IHVwIHJlYWwtdGltZSB1cGRhdGVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVuYWJsZVJlYWxUaW1lVXBkYXRlcyAmJiB1c2VySWQpIHtcbiAgICAgIC8vIFdlYlNvY2tldCBjb25uZWN0aW9uIGZvciByZWFsLXRpbWUgdXBkYXRlc1xuICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KGB3c3M6Ly95b3VyLXdlYnNvY2tldC1lbmRwb2ludC9mZWVkLyR7dXNlcklkfWApO1xuICAgICAgd3NSZWYuY3VycmVudCA9IHdzO1xuXG4gICAgICB3cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGlmIChkYXRhLmxhYmVsID09PSAnbmV3X2l0ZW0nKSB7XG4gICAgICAgICAgLy8gVXNlIHN0b3JlIGFjdGlvbiB0byBhZGQgbmV3IGZlZWQgaXRlbVxuICAgICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgc3RvcmVcbiAgICAgICAgICBsb2dnZXIuaW5mbygnTmV3IGl0ZW0gcmVjZWl2ZWQ6JywgZGF0YS5pdGVtKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmxhYmVsID09PSAnZW5nYWdlbWVudF91cGRhdGUnKSB7XG4gICAgICAgICAgLy8gVXNlIHN0b3JlIGFjdGlvbiB0byB1cGRhdGUgZW5nYWdlbWVudFxuICAgICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgc3RvcmVcbiAgICAgICAgICBsb2dnZXIuaW5mbygnRW5nYWdlbWVudCB1cGRhdGUgcmVjZWl2ZWQ6JywgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEZhbGxiYWNrIHBvbGxpbmcgZm9yIHVwZGF0ZXNcbiAgICAgIHJlZnJlc2hJbnRlcnZhbFJlZi5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB2b2lkIGxvYWRGZWVkSXRlbXMoMSwgdHJ1ZSk7XG4gICAgICB9LCAzMDAwMCk7IC8vIFJlZnJlc2ggZXZlcnkgMzAgc2Vjb25kc1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3cy5jbG9zZSgpO1xuICAgICAgICBpZiAocmVmcmVzaEludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHJlZnJlc2hJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIFtlbmFibGVSZWFsVGltZVVwZGF0ZXMsIHVzZXJJZCwgbG9hZEZlZWRJdGVtc10pO1xuXG4gIC8vIEFuYWx5dGljcyB0cmFja2luZ1xuICBjb25zdCB0cmFja0V2ZW50ID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcbiAgICBpZiAoZW5hYmxlQW5hbHl0aWNzKSB7XG4gICAgICBsb2dnZXIuaW5mbygnQW5hbHl0aWNzOicsIGV2ZW50LCBkYXRhKTtcbiAgICAgIC8vIEltcGxlbWVudCBhbmFseXRpY3MgdHJhY2tpbmcgZm9yIHNvY2lhbCBtZWRpYSBpbnRlcmFjdGlvbnNcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRyYWNrIHNvY2lhbCBtZWRpYSBjbGljayBldmVudFxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmd0YWcpIHtcbiAgICAgICAgICB3aW5kb3cuZ3RhZygnZXZlbnQnLCAnc29jaWFsX21lZGlhX2NsaWNrJywge1xuICAgICAgICAgICAgZXZlbnRfY2F0ZWdvcnk6ICdjaXZpY3MnLFxuICAgICAgICAgICAgZXZlbnRfbGFiZWw6IGRhdGE/LnBsYXRmb3JtIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRyYWNrIGluIGxvY2FsIGFuYWx5dGljcyBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5hbmFseXRpY3MpIHtcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuYW5hbHl0aWNzLnRyYWNrKCdTb2NpYWwgTWVkaWEgQ2xpY2tlZCcsIHtcbiAgICAgICAgICAgIHBsYXRmb3JtOiBkYXRhPy5wbGF0Zm9ybSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICBoYW5kbGU6IGRhdGE/LmhhbmRsZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB1cmw6IGRhdGE/LnVybCB8fCAndW5rbm93bicsXG4gICAgICAgICAgICByZXByZXNlbnRhdGl2ZTogZGF0YT8ucmVwcmVzZW50YXRpdmUgfHwgJ3Vua25vd24nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQW5hbHl0aWNzIHRyYWNraW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZW5hYmxlQW5hbHl0aWNzXSk7XG5cbiAgLy8gSGFuZGxlIGVuZ2FnZW1lbnQgYWN0aW9uc1xuICBjb25zdCBoYW5kbGVMaWtlID0gdXNlQ2FsbGJhY2soKGl0ZW1JZDogc3RyaW5nKSA9PiB7XG4gICAgLy8gVXNlIEZlZWRzU3RvcmUgdG8gbGlrZSBmZWVkXG4gICAgbGlrZUZlZWQoaXRlbUlkKTtcbiAgICBvbkxpa2U/LihpdGVtSWQpO1xuICAgIHRyYWNrRXZlbnQoJ2ZlZWRfaXRlbV9saWtlZCcsIHsgaXRlbUlkIH0pO1xuICB9LCBbbGlrZUZlZWQsIG9uTGlrZSwgdHJhY2tFdmVudF0pO1xuXG4gIGNvbnN0IGhhbmRsZUJvb2ttYXJrID0gdXNlQ2FsbGJhY2soKGl0ZW1JZDogc3RyaW5nKSA9PiB7XG4gICAgLy8gVXNlIEZlZWRzU3RvcmUgdG8gYm9va21hcmsgZmVlZFxuICAgIGJvb2ttYXJrRmVlZChpdGVtSWQpO1xuICAgIG9uQm9va21hcms/LihpdGVtSWQpO1xuICAgIHRyYWNrRXZlbnQoJ2ZlZWRfaXRlbV9ib29rbWFya2VkJywgeyBpdGVtSWQgfSk7XG4gIH0sIFtib29rbWFya0ZlZWQsIG9uQm9va21hcmssIHRyYWNrRXZlbnRdKTtcblxuICBjb25zdCBoYW5kbGVTaGFyZSA9IHVzZUNhbGxiYWNrKChpdGVtSWQ6IHN0cmluZykgPT4ge1xuICAgIG9uU2hhcmU/LihpdGVtSWQpO1xuICAgIHRyYWNrRXZlbnQoJ2ZlZWRfaXRlbV9zaGFyZWQnLCB7IGl0ZW1JZCB9KTtcbiAgICBcbiAgICAvLyBOYXRpdmUgc2hhcmluZyBpZiBhdmFpbGFibGVcbiAgICBpZiAobmF2aWdhdG9yLnNoYXJlKSB7XG4gICAgICBjb25zdCBpdGVtID0gZmVlZEl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBpdGVtSWQpO1xuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgbmF2aWdhdG9yLnNoYXJlKHtcbiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcbiAgICAgICAgICB0ZXh0OiBpdGVtLnN1bW1hcnkgfHwgJycsXG4gICAgICAgICAgdXJsOiBpdGVtLnNvdXJjZS51cmwgfHwgd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZmVlZEl0ZW1zLCBvblNoYXJlLCB0cmFja0V2ZW50XSk7XG5cbiAgY29uc3QgaGFuZGxlQ29tbWVudCA9IHVzZUNhbGxiYWNrKChpdGVtSWQ6IHN0cmluZykgPT4ge1xuICAgIG9uQ29tbWVudD8uKGl0ZW1JZCk7XG4gICAgdHJhY2tFdmVudCgnZmVlZF9pdGVtX2NvbW1lbnRlZCcsIHsgaXRlbUlkIH0pO1xuICB9LCBbb25Db21tZW50LCB0cmFja0V2ZW50XSk7XG5cbiAgY29uc3QgaGFuZGxlVmlld0RldGFpbHMgPSB1c2VDYWxsYmFjaygoaXRlbUlkOiBzdHJpbmcpID0+IHtcbiAgICBvblZpZXdEZXRhaWxzPy4oaXRlbUlkKTtcbiAgfSwgW29uVmlld0RldGFpbHNdKTtcblxuICAvLyBIYW5kbGUgcmVmcmVzaFxuICBjb25zdCBoYW5kbGVSZWZyZXNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGxvYWRGZWVkSXRlbXMoMSwgdHJ1ZSk7XG4gIH0sIFtsb2FkRmVlZEl0ZW1zXSk7XG5cbiAgLy8gSGFuZGxlIGxvYWQgbW9yZVxuICBjb25zdCBoYW5kbGVMb2FkTW9yZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBsb2FkRmVlZEl0ZW1zKHBhZ2UgKyAxLCBmYWxzZSk7XG4gIH0sIFtsb2FkRmVlZEl0ZW1zLCBwYWdlXSk7XG5cbiAgLy8gRm9ybWF0IGxhc3QgdXBkYXRlIHRpbWVcbiAgY29uc3QgZm9ybWF0TGFzdFVwZGF0ZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmSW5NaW51dGVzID0gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjApKTtcbiAgICBcbiAgICBpZiAoZGlmZkluTWludXRlcyA8IDEpIHJldHVybiAnSnVzdCBub3cnO1xuICAgIGlmIChkaWZmSW5NaW51dGVzIDwgNjApIHJldHVybiBgJHtkaWZmSW5NaW51dGVzfW0gYWdvYDtcbiAgICBpZiAoZGlmZkluTWludXRlcyA8IDE0NDApIHJldHVybiBgJHtNYXRoLmZsb29yKGRpZmZJbk1pbnV0ZXMgLyA2MCl9aCBhZ29gO1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BoLWZ1bGwgJHtjbGFzc05hbWV9YH0+XG4gICAgICB7LyogRmVlZCBIZWFkZXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBwLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+Q2l2aWMgRmVlZDwvaDI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAge2VuYWJsZVBlcnNvbmFsaXphdGlvbiAmJiBwZXJzb25hbGl6YXRpb25TY29yZSA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgICAgPFNwYXJrbGVzSWNvbiBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtYmx1ZS01MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+UGVyc29uYWxpemVkIGZvciB5b3UgKHtwZXJzb25hbGl6YXRpb25TY29yZX0lIG1hdGNoKTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTQgdGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICB7ZW5hYmxlUmVhbFRpbWVVcGRhdGVzICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JlZW4tNTAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXB1bHNlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4+TGl2ZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICA8Q2xvY2tJY29uIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICA8c3Bhbj5VcGRhdGVkIHtmb3JtYXRMYXN0VXBkYXRlKGxhc3RVcGRhdGUpfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogUmVmcmVzaCBJbmRpY2F0b3IgKi99XG4gICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibHVlLTUwIGJvcmRlci1iIGJvcmRlci1ibHVlLTIwMCBwLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtNCB3LTQgYm9yZGVyLWItMiBib3JkZXItYmx1ZS01MDBcIj48L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ibHVlLTYwMFwiPlJlZnJlc2hpbmcgZmVlZC4uLjwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogVHJlbmRpbmcgU2VjdGlvbiAqL31cbiAgICAgIHtzaG93VHJlbmRpbmcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1ibHVlLTUwIHRvLXB1cnBsZS01MCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1yZWQtNTAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXB1bHNlXCI+PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5UcmVuZGluZyBOb3c8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgQ2xpbWF0ZSBBY3Rpb24g4oCiIFZvdGluZyBSaWdodHMg4oCiIEluZnJhc3RydWN0dXJlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEVuaGFuY2VkIEZlZWQgd2l0aCBJbmZpbml0ZSBTY3JvbGwgKi99XG4gICAgICA8SW5maW5pdGVTY3JvbGxcbiAgICAgICAgb25Mb2FkTW9yZT17aGFuZGxlTG9hZE1vcmV9XG4gICAgICAgIGhhc01vcmU9e2hhc01vcmV9XG4gICAgICAgIGlzTG9hZGluZz17aXNMb2FkaW5nfVxuICAgICAgICBvblJlZnJlc2g9e2hhbmRsZVJlZnJlc2h9XG4gICAgICAgIGVuYWJsZVNjcm9sbFRvVG9wPXt0cnVlfVxuICAgICAgICBlbmFibGVQdWxsVG9SZWZyZXNoPXt0cnVlfVxuICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGxcIlxuICAgICAgICBsb2FkaW5nQ29tcG9uZW50PXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LThcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwXCI+PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0zIHRleHQtZ3JheS01MDBcIj5Mb2FkaW5nIG1vcmUuLi48L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgZW5kQ29tcG9uZW50PXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTggdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgPHA+WW91JmFwb3M7dmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBmZWVkPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBtdC0xXCI+Q2hlY2sgYmFjayBsYXRlciBmb3IgbW9yZSB1cGRhdGVzPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIHtmZWVkSXRlbXMubWFwKChpdGVtKSA9PiAoXG4gICAgICAgICAgPEZlZWRJdGVtXG4gICAgICAgICAgICBrZXk9e2l0ZW0uaWR9XG4gICAgICAgICAgICBpdGVtPXtpdGVtIGFzIGFueX0gLy8gVHlwZSBjb252ZXJzaW9uIG5lZWRlZCBkdWUgdG8gZGlmZmVyZW50IEZlZWRJdGVtIHR5cGVzXG4gICAgICAgICAgICBvbkxpa2U9e2hhbmRsZUxpa2V9XG4gICAgICAgICAgICBvblNoYXJlPXtoYW5kbGVTaGFyZX1cbiAgICAgICAgICAgIG9uQm9va21hcms9e2hhbmRsZUJvb2ttYXJrfVxuICAgICAgICAgICAgb25Db21tZW50PXtoYW5kbGVDb21tZW50fVxuICAgICAgICAgICAgb25WaWV3RGV0YWlscz17aGFuZGxlVmlld0RldGFpbHN9XG4gICAgICAgICAgICBpc0xpa2VkPXtpdGVtLnVzZXJJbnRlcmFjdGlvbi5saWtlZH1cbiAgICAgICAgICAgIGlzQm9va21hcmtlZD17aXRlbS51c2VySW50ZXJhY3Rpb24uYm9va21hcmtlZH1cbiAgICAgICAgICAgIHNob3dFbmdhZ2VtZW50PXt0cnVlfVxuICAgICAgICAgICAgZW5hYmxlSGFwdGljcz17ZW5hYmxlSGFwdGljc31cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvSW5maW5pdGVTY3JvbGw+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiRW5oYW5jZWRTb2NpYWxGZWVkIiwidXNlcklkIiwicHJlZmVyZW5jZXMiLCJfcHJlZmVyZW5jZXMiLCJvbkxpa2UiLCJvblNoYXJlIiwib25Cb29rbWFyayIsIm9uQ29tbWVudCIsIm9uVmlld0RldGFpbHMiLCJjbGFzc05hbWUiLCJlbmFibGVQZXJzb25hbGl6YXRpb24iLCJlbmFibGVSZWFsVGltZVVwZGF0ZXMiLCJlbmFibGVBbmFseXRpY3MiLCJlbmFibGVIYXB0aWNzIiwic2hvd1RyZW5kaW5nIiwiZmVlZHMiLCJ1c2VGZWVkcyIsImxvYWRGZWVkcyIsImxpa2VGZWVkIiwiYm9va21hcmtGZWVkIiwicmVmcmVzaEZlZWRzIiwidXNlRmVlZHNBY3Rpb25zIiwiaXNMb2FkaW5nIiwidXNlRmVlZHNMb2FkaW5nIiwiZmVlZEl0ZW1zIiwicGFnZSIsInNldFBhZ2UiLCJ1c2VTdGF0ZSIsImhhc01vcmUiLCJzZXRIYXNNb3JlIiwicGVyc29uYWxpemF0aW9uU2NvcmUiLCJzZXRQZXJzb25hbGl6YXRpb25TY29yZSIsImxhc3RVcGRhdGUiLCJzZXRMYXN0VXBkYXRlIiwiRGF0ZSIsIndzUmVmIiwidXNlUmVmIiwicmVmcmVzaEludGVydmFsUmVmIiwibG9hZEZlZWRJdGVtcyIsInVzZUNhbGxiYWNrIiwicGFnZU51bSIsImlzUmVmcmVzaCIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsInVzZUVmZmVjdCIsIndzIiwiV2ViU29ja2V0IiwiY3VycmVudCIsIm9ubWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsImxhYmVsIiwibG9nZ2VyIiwiaW5mbyIsIml0ZW0iLCJzZXRJbnRlcnZhbCIsImNsb3NlIiwiY2xlYXJJbnRlcnZhbCIsInRyYWNrRXZlbnQiLCJ3aW5kb3ciLCJndGFnIiwiZXZlbnRfY2F0ZWdvcnkiLCJldmVudF9sYWJlbCIsInBsYXRmb3JtIiwidmFsdWUiLCJhbmFseXRpY3MiLCJ0cmFjayIsImhhbmRsZSIsInVybCIsInJlcHJlc2VudGF0aXZlIiwid2FybiIsImhhbmRsZUxpa2UiLCJpdGVtSWQiLCJoYW5kbGVCb29rbWFyayIsImhhbmRsZVNoYXJlIiwibmF2aWdhdG9yIiwic2hhcmUiLCJmaW5kIiwiaWQiLCJ0aXRsZSIsInRleHQiLCJzdW1tYXJ5Iiwic291cmNlIiwibG9jYXRpb24iLCJocmVmIiwiaGFuZGxlQ29tbWVudCIsImhhbmRsZVZpZXdEZXRhaWxzIiwiaGFuZGxlUmVmcmVzaCIsImhhbmRsZUxvYWRNb3JlIiwiZm9ybWF0TGFzdFVwZGF0ZSIsImRhdGUiLCJub3ciLCJkaWZmSW5NaW51dGVzIiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImRpdiIsImgyIiwicCIsInNwYW4iLCJTcGFya2xlc0ljb24iLCJDbG9ja0ljb24iLCJJbmZpbml0ZVNjcm9sbCIsIm9uTG9hZE1vcmUiLCJvblJlZnJlc2giLCJlbmFibGVTY3JvbGxUb1RvcCIsImVuYWJsZVB1bGxUb1JlZnJlc2giLCJsb2FkaW5nQ29tcG9uZW50IiwiZW5kQ29tcG9uZW50IiwibWFwIiwiRmVlZEl0ZW0iLCJpc0xpa2VkIiwidXNlckludGVyYWN0aW9uIiwibGlrZWQiLCJpc0Jvb2ttYXJrZWQiLCJib29rbWFya2VkIiwic2hvd0VuZ2FnZW1lbnQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7O0NBYUMsR0FFRDs7Ozs7K0JBbUNBOzs7ZUFBd0JBOzs7O3lCQTlCakI7K0RBQ3lEO3dCQU96RDtpRUFFYzt1RUFDTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQlosU0FBU0EsbUJBQW1CLEVBQ3pDQyxNQUFNLEVBQ05DLGFBQWFDLFlBQVksRUFDekJDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLFNBQVMsRUFDVEMsYUFBYSxFQUNiQyxZQUFZLEVBQUUsRUFDZEMsd0JBQXdCLElBQUksRUFDNUJDLHdCQUF3QixJQUFJLEVBQzVCQyxrQkFBa0IsS0FBSyxFQUN2QkMsZ0JBQWdCLElBQUksRUFDcEJDLGVBQWUsSUFBSSxFQUNLO0lBQ3hCLE1BQU1DLFFBQVFDLElBQUFBLGdCQUFRO0lBQ3RCLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxRQUFRLEVBQUVDLFlBQVksRUFBRUMsWUFBWSxFQUFFLEdBQUdDLElBQUFBLHVCQUFlO0lBQzNFLE1BQU1DLFlBQVlDLElBQUFBLHVCQUFlO0lBRWpDLHlDQUF5QztJQUN6QyxNQUFNQyxZQUFZVDtJQUNsQixNQUFNLENBQUNVLE1BQU1DLFFBQVEsR0FBR0MsSUFBQUEsZUFBUSxFQUFDO0lBQ2pDLE1BQU0sQ0FBQ0MsU0FBU0MsV0FBVyxHQUFHRixJQUFBQSxlQUFRLEVBQUM7SUFDdkMsTUFBTSxDQUFD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