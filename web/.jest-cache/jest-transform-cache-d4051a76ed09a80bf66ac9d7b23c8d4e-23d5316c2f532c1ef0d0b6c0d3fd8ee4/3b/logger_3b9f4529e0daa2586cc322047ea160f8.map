{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/utils/logger.ts"],"sourcesContent":["/**\n * Logger utility for development and production environments\n * Provides structured logging with environment-aware output\n */\n/**\n * Logger utility for development and production environments\n * Provides structured logging with environment-aware output\n */\n\nexport enum LogLevel {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  NONE = 4\n}\n\ninterface LogContext {\n  [key: string]: unknown;\n}\n\nclass Logger {\n  private level: LogLevel;\n  private isDevelopment: boolean;\n\n  constructor() {\n    this.isDevelopment = process.env.NODE_ENV === 'development';\n    this.level = this.isDevelopment ? LogLevel.DEBUG : LogLevel.ERROR;\n  }\n\n  private shouldLog(level: LogLevel): boolean {\n    return level >= this.level;\n  }\n\n  private formatMessage(level: string, message: string, context?: LogContext): string {\n    const timestamp = new Date().toISOString();\n    const contextStr = context ? ` ${JSON.stringify(context)}` : '';\n    return `[${timestamp}] ${level}: ${message}${contextStr}`;\n  }\n\n  debug(message: string, context?: LogContext): void {\n    if (this.shouldLog(LogLevel.DEBUG)) {\n      // eslint-disable-next-line no-console\n      console.debug(this.formatMessage('DEBUG', message, context));\n    }\n  }\n\n  info(message: string, context?: LogContext): void {\n    if (this.shouldLog(LogLevel.INFO)) {\n      // eslint-disable-next-line no-console\n      console.info(this.formatMessage('INFO', message, context));\n    }\n  }\n\n  warn(message: string, context?: LogContext): void {\n    if (this.shouldLog(LogLevel.WARN)) {\n       \n      console.warn(this.formatMessage('WARN', message, context));\n    }\n  }\n\n  error(message: string, error?: Error, context?: LogContext): void {\n    if (this.shouldLog(LogLevel.ERROR)) {\n      const errorContext = Object.assign({}, context, {\n        error: error?.message,\n        stack: error?.stack\n      });\n       \n      console.error(this.formatMessage('ERROR', message, errorContext));\n    }\n  }\n\n  // API-specific logging\n  apiCall(endpoint: string, method: string, status?: number, duration?: number): void {\n    this.info('API Call', {\n      endpoint,\n      method,\n      status,\n      duration: duration ? `${duration}ms` : undefined\n    });\n  }\n\n  // Database-specific logging\n  dbQuery(operation: string, table: string, duration?: number): void {\n    this.debug('Database Query', {\n      operation,\n      table,\n      duration: duration ? `${duration}ms` : undefined\n    });\n  }\n\n  // User action logging\n  userAction(action: string, userId?: string, context?: LogContext): void {\n    this.info('User Action', Object.assign({\n      action,\n      userId,\n    }, context));\n  }\n\n  // Performance logging\n  performance(operation: string, duration: number, context?: LogContext): void {\n    this.info('Performance', Object.assign({\n      operation,\n      duration: `${duration}ms`,\n    }, context));\n  }\n}\n\n// Export singleton instance\nexport const logger = new Logger();\n\n// Convenience functions for common use cases\nexport const logApiCall = (endpoint: string, method: string, status?: number, duration?: number) => {\n  logger.apiCall(endpoint, method, status, duration);\n};\n\nexport const logDbQuery = (operation: string, table: string, duration?: number) => {\n  logger.dbQuery(operation, table, duration);\n};\n\nexport const logUserAction = (action: string, userId?: string, context?: LogContext) => {\n  logger.userAction(action, userId, context);\n};\n\nexport const logPerformance = (operation: string, duration: number, context?: LogContext) => {\n  logger.performance(operation, duration, context);\n};\n\n// Development-only logging (replaces logger.info)\nexport const devLog = (message: string, ...args: unknown[]) => {\n  if (process.env.NODE_ENV === 'development') {\n    // eslint-disable-next-line no-console\n    console.log(`[DEV] ${message}`, ...args);\n  }\n};\n\n// Standard logging functions\nexport const logInfo = (message: string, context?: LogContext) => {\n  logger.info(message, context);\n};\n\nexport const logWarn = (message: string, context?: LogContext) => {\n  logger.warn(message, context);\n};\n\nexport const logError = (message: string, error?: Error, context?: LogContext) => {\n  logger.error(message, error, context);\n};\n"],"names":["devLog","logApiCall","logDbQuery","logError","logInfo","logPerformance","logUserAction","logWarn","logger","LogLevel","Logger","constructor","isDevelopment","process","env","NODE_ENV","level","shouldLog","formatMessage","message","context","timestamp","Date","toISOString","contextStr","JSON","stringify","debug","console","info","warn","error","errorContext","Object","assign","stack","apiCall","endpoint","method","status","duration","undefined","dbQuery","operation","table","userAction","action","userId","performance","args","log"],"mappings":"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"}