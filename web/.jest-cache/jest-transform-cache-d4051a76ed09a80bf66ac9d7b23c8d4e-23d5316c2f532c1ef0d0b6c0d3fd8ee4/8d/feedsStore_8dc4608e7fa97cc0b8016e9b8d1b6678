80c88e4ff999b2e3ba06b57239739038
/**
 * Feeds Store - Zustand Implementation
 * 
 * Comprehensive content feed state management including feed data,
 * filtering, search, user preferences, and content interactions.
 * Consolidates feed state management and content preferences.
 * 
 * Created: October 10, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    feedsStoreDebug: function() {
        return feedsStoreDebug;
    },
    feedsStoreSubscriptions: function() {
        return feedsStoreSubscriptions;
    },
    feedsStoreUtils: function() {
        return feedsStoreUtils;
    },
    useBookmarkedFeeds: function() {
        return useBookmarkedFeeds;
    },
    useFeedCategories: function() {
        return useFeedCategories;
    },
    useFeedFilters: function() {
        return useFeedFilters;
    },
    useFeedPreferences: function() {
        return useFeedPreferences;
    },
    useFeedSearch: function() {
        return useFeedSearch;
    },
    useFeeds: function() {
        return useFeeds;
    },
    useFeedsActions: function() {
        return useFeedsActions;
    },
    useFeedsError: function() {
        return useFeedsError;
    },
    useFeedsLoading: function() {
        return useFeedsLoading;
    },
    useFeedsStats: function() {
        return useFeedsStats;
    },
    useFeedsStore: function() {
        return useFeedsStore;
    },
    useFilteredFeeds: function() {
        return useFilteredFeeds;
    },
    useLikedFeeds: function() {
        return useLikedFeeds;
    },
    useSelectedFeed: function() {
        return useSelectedFeed;
    },
    useUnreadFeeds: function() {
        return useUnreadFeeds;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _logger = require("../utils/logger");
// Default feed preferences
const defaultPreferences = {
    defaultView: "list",
    sortBy: "newest",
    itemsPerPage: 20,
    autoRefresh: true,
    refreshInterval: 15,
    notifications: {
        newContent: true,
        trendingContent: true,
        categoryUpdates: false,
        authorUpdates: false
    },
    privacy: {
        showReadHistory: false,
        showBookmarks: true,
        showLikes: true,
        shareActivity: false
    },
    content: {
        showImages: true,
        showVideos: true,
        showAudio: true,
        autoPlay: false,
        quality: "medium"
    }
};
// Default feed filters
const defaultFilters = {
    categories: [],
    types: [],
    sources: [],
    dateRange: {
        start: "",
        end: ""
    },
    readStatus: "all",
    engagement: "all",
    language: "en",
    tags: []
};
const useFeedsStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((set, get)=>({
        // Initial state
        feeds: [],
        filteredFeeds: [],
        categories: [],
        search: {
            query: "",
            results: [],
            totalResults: 0,
            currentPage: 1,
            totalPages: 1,
            filters: defaultFilters,
            suggestions: [],
            recentSearches: []
        },
        currentView: "list",
        selectedFeed: null,
        selectedCategory: null,
        filters: defaultFilters,
        preferences: defaultPreferences,
        isLoading: false,
        isSearching: false,
        isRefreshing: false,
        isUpdating: false,
        error: null,
        // Feed management actions
        setFeeds: (feeds)=>set({
                feeds,
                filteredFeeds: feeds
            }),
        addFeed: (feed)=>set((state)=>({
                    feeds: [
                        feed,
                        ...state.feeds
                    ],
                    filteredFeeds: [
                        feed,
                        ...state.filteredFeeds
                    ]
                })),
        updateFeed: (id, updates)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            ...updates
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            ...updates
                        } : feed)
                })),
        removeFeed: (id)=>set((state)=>({
                    feeds: state.feeds.filter((feed)=>feed.id !== id),
                    filteredFeeds: state.filteredFeeds.filter((feed)=>feed.id !== id)
                })),
        refreshFeeds: async ()=>{
            const { isRefreshing } = get();
            if (isRefreshing) return; // Prevent multiple simultaneous calls
            try {
                set({
                    isRefreshing: true,
                    error: null
                });
                const response = await fetch("/api/feeds", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        category: null
                    })
                });
                if (!response.ok) {
                    throw new Error("Failed to refresh feeds");
                }
                const feeds = await response.json();
                set({
                    feeds,
                    filteredFeeds: feeds,
                    isRefreshing: false
                });
                _logger.logger.info("Feeds refreshed successfully");
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage,
                    isRefreshing: false
                });
                _logger.logger.error("Failed to refresh feeds:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        loadMoreFeeds: async ()=>{
            const { isLoading } = get();
            if (isLoading) return; // Prevent multiple simultaneous calls
            try {
                set({
                    isLoading: true,
                    error: null
                });
                const response = await fetch("/api/feeds", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        category: null
                    })
                });
                if (!response.ok) {
                    throw new Error("Failed to load more feeds");
                }
                const newFeeds = await response.json();
                set((state)=>({
                        feeds: [
                            ...state.feeds,
                            ...newFeeds
                        ],
                        filteredFeeds: [
                            ...state.filteredFeeds,
                            ...newFeeds
                        ],
                        isLoading: false
                    }));
                _logger.logger.info("More feeds loaded");
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage,
                    isLoading: false
                });
                _logger.logger.error("Failed to load more feeds:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        // Filtering and search actions
        setFilters: (filters)=>set((state)=>{
                const newFilters = {
                    ...state.filters,
                    ...filters
                };
                // Apply filters to feeds
                const filtered = state.feeds.filter((feed)=>{
                    if (newFilters.categories && newFilters.categories.length > 0 && !newFilters.categories.includes(feed.category)) {
                        return false;
                    }
                    if (newFilters.types && newFilters.types.length > 0 && !newFilters.types.includes(feed.type)) {
                        return false;
                    }
                    if (newFilters.sources && newFilters.sources.length > 0 && !newFilters.sources.includes(feed.source.name)) {
                        return false;
                    }
                    if (newFilters.readStatus === "read" && !feed.userInteraction.read) {
                        return false;
                    }
                    if (newFilters.readStatus === "unread" && feed.userInteraction.read) {
                        return false;
                    }
                    if (newFilters.tags && newFilters.tags.length > 0 && !newFilters.tags.some((tag)=>feed.tags.includes(tag))) {
                        return false;
                    }
                    return true;
                });
                return {
                    filters: newFilters,
                    filteredFeeds: filtered
                };
            }),
        clearFilters: ()=>set((state)=>({
                    filters: defaultFilters,
                    filteredFeeds: state.feeds
                })),
        searchFeeds: async (query)=>{
            const { setSearching, setError } = get();
            try {
                setSearching(true);
                setError(null);
                const response = await fetch("/api/feeds/search", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        query
                    })
                });
                if (!response.ok) {
                    throw new Error("Failed to search feeds");
                }
                const results = await response.json();
                set((state)=>({
                        search: {
                            ...state.search,
                            query,
                            results: results.items,
                            totalResults: results.total,
                            currentPage: 1,
                            totalPages: Math.ceil(results.total / state.preferences.itemsPerPage)
                        }
                    }));
                _logger.logger.info("Feeds searched", {
                    query,
                    results: results.items.length,
                    total: results.total
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                setError(errorMessage);
                _logger.logger.error("Failed to search feeds:", error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setSearching(false);
            }
        },
        setSearchQuery: (query)=>set((state)=>({
                    search: {
                        ...state.search,
                        query
                    }
                })),
        clearSearch: ()=>set((state)=>({
                    search: {
                        ...state.search,
                        query: "",
                        results: [],
                        totalResults: 0,
                        currentPage: 1,
                        totalPages: 1
                    }
                })),
        // Feed interaction actions
        likeFeed: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                liked: true
                            },
                            engagement: {
                                ...feed.engagement,
                                likes: feed.engagement.likes + 1
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                liked: true
                            },
                            engagement: {
                                ...feed.engagement,
                                likes: feed.engagement.likes + 1
                            }
                        } : feed)
                })),
        unlikeFeed: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                liked: false
                            },
                            engagement: {
                                ...feed.engagement,
                                likes: Math.max(0, feed.engagement.likes - 1)
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                liked: false
                            },
                            engagement: {
                                ...feed.engagement,
                                likes: Math.max(0, feed.engagement.likes - 1)
                            }
                        } : feed)
                })),
        shareFeed: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                shared: true
                            },
                            engagement: {
                                ...feed.engagement,
                                shares: feed.engagement.shares + 1
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                shared: true
                            },
                            engagement: {
                                ...feed.engagement,
                                shares: feed.engagement.shares + 1
                            }
                        } : feed)
                })),
        bookmarkFeed: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                bookmarked: true
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                bookmarked: true
                            }
                        } : feed)
                })),
        unbookmarkFeed: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                bookmarked: false
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                bookmarked: false
                            }
                        } : feed)
                })),
        markAsRead: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                read: true,
                                readAt: new Date().toISOString()
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                read: true,
                                readAt: new Date().toISOString()
                            }
                        } : feed)
                })),
        markAsUnread: (id)=>set((state)=>({
                    feeds: state.feeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                read: false,
                                readAt: undefined
                            }
                        } : feed),
                    filteredFeeds: state.filteredFeeds.map((feed)=>feed.id === id ? {
                            ...feed,
                            userInteraction: {
                                ...feed.userInteraction,
                                read: false,
                                readAt: undefined
                            }
                        } : feed)
                })),
        // Category actions
        setCategories: (categories)=>set({
                categories
            }),
        toggleCategory: (categoryId)=>set((state)=>({
                    categories: state.categories.map((category)=>category.id === categoryId ? {
                            ...category,
                            enabled: !category.enabled
                        } : category)
                })),
        setSelectedCategory: (categoryId)=>set({
                selectedCategory: categoryId
            }),
        // Preferences actions
        updatePreferences: (preferences)=>set((state)=>({
                    preferences: {
                        ...state.preferences,
                        ...preferences
                    }
                })),
        resetPreferences: ()=>set({
                preferences: defaultPreferences
            }),
        // View management actions
        setCurrentView: (view)=>set({
                currentView: view
            }),
        setSelectedFeed: (feed)=>set({
                selectedFeed: feed
            }),
        // Data operations
        loadFeeds: async (category)=>{
            try {
                set({
                    isLoading: true,
                    error: null
                });
                const response = await fetch("/api/feeds", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        category
                    })
                });
                if (response && response.ok) {
                    const feeds = await response.json();
                    set({
                        feeds,
                        filteredFeeds: feeds,
                        isLoading: false
                    });
                    _logger.logger.info("Feeds loaded", {
                        category,
                        count: feeds.length
                    });
                } else {
                    // No fallback data - just set empty state
                    set({
                        feeds: [],
                        filteredFeeds: [],
                        isLoading: false
                    });
                }
            } catch (error) {
                // No fallback data - just set empty state on error
                set({
                    feeds: [],
                    filteredFeeds: [],
                    isLoading: false
                });
                _logger.logger.info("API error, using empty state:", {
                    error: error instanceof Error ? error.message : "Unknown error"
                });
            }
        },
        loadCategories: async ()=>{
            try {
                set({
                    isLoading: true,
                    error: null
                });
                const response = await fetch("/api/feeds/categories");
                if (!response.ok) {
                    throw new Error("Failed to load categories");
                }
                const categories = await response.json();
                set({
                    categories,
                    isLoading: false
                });
                _logger.logger.info("Feed categories loaded", {
                    count: categories.length
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage,
                    isLoading: false
                });
                _logger.logger.error("Failed to load categories:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        saveUserInteraction: async (feedId, interaction)=>{
            try {
                set({
                    isUpdating: true,
                    error: null
                });
                const response = await fetch("/api/feeds/interactions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        feedId,
                        interaction
                    })
                });
                if (!response.ok) {
                    throw new Error("Failed to save user interaction");
                }
                set({
                    isUpdating: false
                });
                _logger.logger.info("User interaction saved", {
                    feedId,
                    interaction
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage,
                    isUpdating: false
                });
                _logger.logger.error("Failed to save user interaction:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        // Loading state actions
        setLoading: (loading)=>set({
                isLoading: loading
            }),
        setSearching: (searching)=>set({
                isSearching: searching
            }),
        setRefreshing: (refreshing)=>set({
                isRefreshing: refreshing
            }),
        setUpdating: (updating)=>set({
                isUpdating: updating
            }),
        setError: (error)=>set({
                error
            }),
        clearError: ()=>set({
                error: null
            })
    }), {
    name: "feeds-store",
    partialize: (state)=>({
            feeds: state.feeds,
            categories: state.categories,
            preferences: state.preferences,
            filters: state.filters,
            currentView: state.currentView
        })
}), {
    name: "feeds-store"
}));
const useFeeds = ()=>useFeedsStore((state)=>state.feeds);
const useFilteredFeeds = ()=>useFeedsStore((state)=>state.filteredFeeds);
const useFeedCategories = ()=>useFeedsStore((state)=>state.categories);
const useFeedSearch = ()=>useFeedsStore((state)=>state.search);
const useSelectedFeed = ()=>useFeedsStore((state)=>state.selectedFeed);
const useFeedPreferences = ()=>useFeedsStore((state)=>state.preferences);
const useFeedFilters = ()=>useFeedsStore((state)=>state.filters);
const useFeedsLoading = ()=>useFeedsStore((state)=>state.isLoading);
const useFeedsError = ()=>useFeedsStore((state)=>state.error);
const useFeedsActions = ()=>useFeedsStore((state)=>state);
const useFeedsStats = ()=>{
    const totalFeeds = useFeedsStore((state)=>state.feeds.length);
    const filteredFeeds = useFeedsStore((state)=>state.filteredFeeds.length);
    const totalCategories = useFeedsStore((state)=>state.categories.length);
    const enabledCategories = useFeedsStore((state)=>state.categories.filter((cat)=>cat.enabled).length);
    const searchResults = useFeedsStore((state)=>state.search.results.length);
    const isLoading = useFeedsStore((state)=>state.isLoading);
    const isSearching = useFeedsStore((state)=>state.isSearching);
    const error = useFeedsStore((state)=>state.error);
    return {
        totalFeeds,
        filteredFeeds,
        totalCategories,
        enabledCategories,
        searchResults,
        isLoading,
        isSearching,
        error
    };
};
const useBookmarkedFeeds = ()=>useFeedsStore((state)=>state.feeds.filter((feed)=>feed.userInteraction.bookmarked));
const useUnreadFeeds = ()=>useFeedsStore((state)=>state.feeds.filter((feed)=>!feed.userInteraction.read));
const useLikedFeeds = ()=>useFeedsStore((state)=>state.feeds.filter((feed)=>feed.userInteraction.liked));
const feedsStoreUtils = {
    /**
   * Get feeds summary
   */ getFeedsSummary: ()=>{
        const state = useFeedsStore.getState();
        return {
            totalFeeds: state.feeds.length,
            filteredFeeds: state.filteredFeeds.length,
            categories: state.categories.length,
            searchResults: state.search.results.length,
            preferences: state.preferences
        };
    },
    /**
   * Get feeds by category
   */ getFeedsByCategory: (category)=>{
        const state = useFeedsStore.getState();
        return state.feeds.filter((feed)=>feed.category === category);
    },
    /**
   * Get feeds by type
   */ getFeedsByType: (type)=>{
        const state = useFeedsStore.getState();
        return state.feeds.filter((feed)=>feed.type === type);
    },
    /**
   * Get trending feeds
   */ getTrendingFeeds: ()=>{
        const state = useFeedsStore.getState();
        return state.feeds.sort((a, b)=>b.engagement.likes + b.engagement.shares - (a.engagement.likes + a.engagement.shares)).slice(0, 10);
    },
    /**
   * Get recent feeds
   */ getRecentFeeds: (limit = 10)=>{
        const state = useFeedsStore.getState();
        return state.feeds.sort((a, b)=>new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime()).slice(0, limit);
    }
};
const feedsStoreSubscriptions = {
    /**
   * Subscribe to feeds changes
   */ onFeedsChange: (callback)=>{
        return useFeedsStore.subscribe((state)=>{
            callback(state.feeds);
        });
    },
    /**
   * Subscribe to search results changes
   */ onSearchResultsChange: (callback)=>{
        return useFeedsStore.subscribe((state)=>{
            callback(state.search.results);
        });
    },
    /**
   * Subscribe to preferences changes
   */ onPreferencesChange: (callback)=>{
        return useFeedsStore.subscribe((state)=>{
            callback(state.preferences);
        });
    }
};
const feedsStoreDebug = {
    /**
   * Log current feeds state
   */ logState: ()=>{
        const state = useFeedsStore.getState();
        _logger.logger.debug("Feeds Store State", {
            totalFeeds: state.feeds.length,
            filteredFeeds: state.filteredFeeds.length,
            categories: state.categories.length,
            searchResults: state.search.results.length,
            currentView: state.currentView,
            selectedCategory: state.selectedCategory,
            isLoading: state.isLoading,
            error: state.error
        });
    },
    /**
   * Log feeds summary
   */ logSummary: ()=>{
        const summary = feedsStoreUtils.getFeedsSummary();
        _logger.logger.debug("Feeds Summary", summary);
    },
    /**
   * Log feeds by category
   */ logFeedsByCategory: ()=>{
        const state = useFeedsStore.getState();
        const byCategory = state.feeds.reduce((acc, feed)=>{
            acc[feed.category] = (acc[feed.category] || 0) + 1;
            return acc;
        }, {});
        _logger.logger.debug("Feeds by Category", byCategory);
    },
    /**
   * Reset feeds store
   */ reset: ()=>{
        useFeedsStore.getState().clearFilters();
        useFeedsStore.getState().resetPreferences();
        _logger.logger.info("Feeds store reset");
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL2ZlZWRzU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGZWVkcyBTdG9yZSAtIFp1c3RhbmQgSW1wbGVtZW50YXRpb25cbiAqIFxuICogQ29tcHJlaGVuc2l2ZSBjb250ZW50IGZlZWQgc3RhdGUgbWFuYWdlbWVudCBpbmNsdWRpbmcgZmVlZCBkYXRhLFxuICogZmlsdGVyaW5nLCBzZWFyY2gsIHVzZXIgcHJlZmVyZW5jZXMsIGFuZCBjb250ZW50IGludGVyYWN0aW9ucy5cbiAqIENvbnNvbGlkYXRlcyBmZWVkIHN0YXRlIG1hbmFnZW1lbnQgYW5kIGNvbnRlbnQgcHJlZmVyZW5jZXMuXG4gKiBcbiAqIENyZWF0ZWQ6IE9jdG9iZXIgMTAsIDIwMjVcbiAqIFN0YXR1czog4pyFIEFDVElWRVxuICovXG5cbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJ3p1c3RhbmQnO1xuaW1wb3J0IHsgZGV2dG9vbHMgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgcGVyc2lzdCB9IGZyb20gJ3p1c3RhbmQvbWlkZGxld2FyZSc7XG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvbGliL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyB3aXRoT3B0aW9uYWwgfSBmcm9tICdAL2xpYi91dGlscy9vYmplY3RzJztcblxuLy8gRmVlZCBkYXRhIHR5cGVzXG5pbnRlcmZhY2UgRmVlZEl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHN1bW1hcnk6IHN0cmluZztcbiAgYXV0aG9yOiB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgYXZhdGFyPzogc3RyaW5nO1xuICAgIHZlcmlmaWVkOiBib29sZWFuO1xuICB9O1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICB0YWdzOiBzdHJpbmdbXTtcbiAgdHlwZTogJ2FydGljbGUnIHwgJ3ZpZGVvJyB8ICdwb2RjYXN0JyB8ICdwb2xsJyB8ICdldmVudCcgfCAnbmV3cyc7XG4gIHNvdXJjZToge1xuICAgIG5hbWU6IHN0cmluZztcbiAgICB1cmw6IHN0cmluZztcbiAgICBsb2dvPzogc3RyaW5nO1xuICAgIHZlcmlmaWVkOiBib29sZWFuO1xuICB9O1xuICBwdWJsaXNoZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbiAgcmVhZFRpbWU6IG51bWJlcjsgLy8gbWludXRlc1xuICBlbmdhZ2VtZW50OiB7XG4gICAgbGlrZXM6IG51bWJlcjtcbiAgICBzaGFyZXM6IG51bWJlcjtcbiAgICBjb21tZW50czogbnVtYmVyO1xuICAgIHZpZXdzOiBudW1iZXI7XG4gIH07XG4gIHVzZXJJbnRlcmFjdGlvbjoge1xuICAgIGxpa2VkOiBib29sZWFuO1xuICAgIHNoYXJlZDogYm9vbGVhbjtcbiAgICBib29rbWFya2VkOiBib29sZWFuO1xuICAgIHJlYWQ6IGJvb2xlYW47XG4gICAgcmVhZEF0Pzogc3RyaW5nO1xuICB9O1xuICBtZXRhZGF0YToge1xuICAgIGltYWdlPzogc3RyaW5nO1xuICAgIHZpZGVvVXJsPzogc3RyaW5nO1xuICAgIGF1ZGlvVXJsPzogc3RyaW5nO1xuICAgIGV4dGVybmFsVXJsPzogc3RyaW5nO1xuICAgIGxvY2F0aW9uPzogc3RyaW5nO1xuICAgIGxhbmd1YWdlOiBzdHJpbmc7XG4gIH07XG59XG5cbmludGVyZmFjZSBGZWVkQ2F0ZWdvcnkge1xuICBpZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgY291bnQ6IG51bWJlcjtcbiAgZW5hYmxlZDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEZlZWRGaWx0ZXJzIHtcbiAgY2F0ZWdvcmllczogc3RyaW5nW107XG4gIHR5cGVzOiBzdHJpbmdbXTtcbiAgc291cmNlczogc3RyaW5nW107XG4gIGRhdGVSYW5nZToge1xuICAgIHN0YXJ0OiBzdHJpbmc7XG4gICAgZW5kOiBzdHJpbmc7XG4gIH07XG4gIHJlYWRTdGF0dXM6ICdhbGwnIHwgJ3JlYWQnIHwgJ3VucmVhZCc7XG4gIGVuZ2FnZW1lbnQ6ICdhbGwnIHwgJ3BvcHVsYXInIHwgJ3RyZW5kaW5nJztcbiAgbGFuZ3VhZ2U6IHN0cmluZztcbiAgdGFnczogc3RyaW5nW107XG59XG5cbmludGVyZmFjZSBGZWVkUHJlZmVyZW5jZXMge1xuICBkZWZhdWx0VmlldzogJ2xpc3QnIHwgJ2dyaWQnIHwgJ21hZ2F6aW5lJztcbiAgc29ydEJ5OiAnbmV3ZXN0JyB8ICdvbGRlc3QnIHwgJ3BvcHVsYXInIHwgJ3RyZW5kaW5nJyB8ICdyZWxldmFuY2UnO1xuICBpdGVtc1BlclBhZ2U6IG51bWJlcjtcbiAgYXV0b1JlZnJlc2g6IGJvb2xlYW47XG4gIHJlZnJlc2hJbnRlcnZhbDogbnVtYmVyOyAvLyBtaW51dGVzXG4gIG5vdGlmaWNhdGlvbnM6IHtcbiAgICBuZXdDb250ZW50OiBib29sZWFuO1xuICAgIHRyZW5kaW5nQ29udGVudDogYm9vbGVhbjtcbiAgICBjYXRlZ29yeVVwZGF0ZXM6IGJvb2xlYW47XG4gICAgYXV0aG9yVXBkYXRlczogYm9vbGVhbjtcbiAgfTtcbiAgcHJpdmFjeToge1xuICAgIHNob3dSZWFkSGlzdG9yeTogYm9vbGVhbjtcbiAgICBzaG93Qm9va21hcmtzOiBib29sZWFuO1xuICAgIHNob3dMaWtlczogYm9vbGVhbjtcbiAgICBzaGFyZUFjdGl2aXR5OiBib29sZWFuO1xuICB9O1xuICBjb250ZW50OiB7XG4gICAgc2hvd0ltYWdlczogYm9vbGVhbjtcbiAgICBzaG93VmlkZW9zOiBib29sZWFuO1xuICAgIHNob3dBdWRpbzogYm9vbGVhbjtcbiAgICBhdXRvUGxheTogYm9vbGVhbjtcbiAgICBxdWFsaXR5OiAnbG93JyB8ICdtZWRpdW0nIHwgJ2hpZ2gnO1xuICB9O1xufVxuXG5pbnRlcmZhY2UgRmVlZFNlYXJjaCB7XG4gIHF1ZXJ5OiBzdHJpbmc7XG4gIHJlc3VsdHM6IEZlZWRJdGVtW107XG4gIHRvdGFsUmVzdWx0czogbnVtYmVyO1xuICBjdXJyZW50UGFnZTogbnVtYmVyO1xuICB0b3RhbFBhZ2VzOiBudW1iZXI7XG4gIGZpbHRlcnM6IEZlZWRGaWx0ZXJzO1xuICBzdWdnZXN0aW9uczogc3RyaW5nW107XG4gIHJlY2VudFNlYXJjaGVzOiBzdHJpbmdbXTtcbn1cblxuLy8gRmVlZHMgc3RvcmUgc3RhdGUgaW50ZXJmYWNlXG5pbnRlcmZhY2UgRmVlZHNTdG9yZSB7XG4gIC8vIEZlZWQgZGF0YVxuICBmZWVkczogRmVlZEl0ZW1bXTtcbiAgZmlsdGVyZWRGZWVkczogRmVlZEl0ZW1bXTtcbiAgY2F0ZWdvcmllczogRmVlZENhdGVnb3J5W107XG4gIHNlYXJjaDogRmVlZFNlYXJjaDtcbiAgXG4gIC8vIFVJIHN0YXRlXG4gIGN1cnJlbnRWaWV3OiAnbGlzdCcgfCAnZ3JpZCcgfCAnbWFnYXppbmUnO1xuICBzZWxlY3RlZEZlZWQ6IEZlZWRJdGVtIHwgbnVsbDtcbiAgc2VsZWN0ZWRDYXRlZ29yeTogc3RyaW5nIHwgbnVsbDtcbiAgXG4gIC8vIEZpbHRlcnMgYW5kIHByZWZlcmVuY2VzXG4gIGZpbHRlcnM6IEZlZWRGaWx0ZXJzO1xuICBwcmVmZXJlbmNlczogRmVlZFByZWZlcmVuY2VzO1xuICBcbiAgLy8gTG9hZGluZyBzdGF0ZXNcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBpc1NlYXJjaGluZzogYm9vbGVhbjtcbiAgaXNSZWZyZXNoaW5nOiBib29sZWFuO1xuICBpc1VwZGF0aW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBGZWVkIG1hbmFnZW1lbnRcbiAgc2V0RmVlZHM6IChmZWVkczogRmVlZEl0ZW1bXSkgPT4gdm9pZDtcbiAgYWRkRmVlZDogKGZlZWQ6IEZlZWRJdGVtKSA9PiB2b2lkO1xuICB1cGRhdGVGZWVkOiAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxGZWVkSXRlbT4pID0+IHZvaWQ7XG4gIHJlbW92ZUZlZWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICByZWZyZXNoRmVlZHM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGxvYWRNb3JlRmVlZHM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBBY3Rpb25zIC0gRmlsdGVyaW5nIGFuZCBzZWFyY2hcbiAgc2V0RmlsdGVyczogKGZpbHRlcnM6IFBhcnRpYWw8RmVlZEZpbHRlcnM+KSA9PiB2b2lkO1xuICBjbGVhckZpbHRlcnM6ICgpID0+IHZvaWQ7XG4gIHNlYXJjaEZlZWRzOiAocXVlcnk6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgc2V0U2VhcmNoUXVlcnk6IChxdWVyeTogc3RyaW5nKSA9PiB2b2lkO1xuICBjbGVhclNlYXJjaDogKCkgPT4gdm9pZDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBGZWVkIGludGVyYWN0aW9uc1xuICBsaWtlRmVlZDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHVubGlrZUZlZWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzaGFyZUZlZWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBib29rbWFya0ZlZWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICB1bmJvb2ttYXJrRmVlZDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG1hcmtBc1JlYWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBtYXJrQXNVbnJlYWQ6IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIENhdGVnb3JpZXNcbiAgc2V0Q2F0ZWdvcmllczogKGNhdGVnb3JpZXM6IEZlZWRDYXRlZ29yeVtdKSA9PiB2b2lkO1xuICB0b2dnbGVDYXRlZ29yeTogKGNhdGVnb3J5SWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgc2V0U2VsZWN0ZWRDYXRlZ29yeTogKGNhdGVnb3J5SWQ6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gIFxuICAvLyBBY3Rpb25zIC0gUHJlZmVyZW5jZXNcbiAgdXBkYXRlUHJlZmVyZW5jZXM6IChwcmVmZXJlbmNlczogUGFydGlhbDxGZWVkUHJlZmVyZW5jZXM+KSA9PiB2b2lkO1xuICByZXNldFByZWZlcmVuY2VzOiAoKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIFZpZXcgbWFuYWdlbWVudFxuICBzZXRDdXJyZW50VmlldzogKHZpZXc6ICdsaXN0JyB8ICdncmlkJyB8ICdtYWdhemluZScpID0+IHZvaWQ7XG4gIHNldFNlbGVjdGVkRmVlZDogKGZlZWQ6IEZlZWRJdGVtIHwgbnVsbCkgPT4gdm9pZDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBEYXRhIG9wZXJhdGlvbnNcbiAgbG9hZEZlZWRzOiAoY2F0ZWdvcnk/OiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGxvYWRDYXRlZ29yaWVzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBzYXZlVXNlckludGVyYWN0aW9uOiAoZmVlZElkOiBzdHJpbmcsIGludGVyYWN0aW9uOiBQYXJ0aWFsPEZlZWRJdGVtWyd1c2VySW50ZXJhY3Rpb24nXT4pID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBBY3Rpb25zIC0gTG9hZGluZyBzdGF0ZXNcbiAgc2V0TG9hZGluZzogKGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldFNlYXJjaGluZzogKHNlYXJjaGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0UmVmcmVzaGluZzogKHJlZnJlc2hpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldFVwZGF0aW5nOiAodXBkYXRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldEVycm9yOiAoZXJyb3I6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gIGNsZWFyRXJyb3I6ICgpID0+IHZvaWQ7XG59XG5cbi8vIERlZmF1bHQgZmVlZCBwcmVmZXJlbmNlc1xuY29uc3QgZGVmYXVsdFByZWZlcmVuY2VzOiBGZWVkUHJlZmVyZW5jZXMgPSB7XG4gIGRlZmF1bHRWaWV3OiAnbGlzdCcsXG4gIHNvcnRCeTogJ25ld2VzdCcsXG4gIGl0ZW1zUGVyUGFnZTogMjAsXG4gIGF1dG9SZWZyZXNoOiB0cnVlLFxuICByZWZyZXNoSW50ZXJ2YWw6IDE1LFxuICBub3RpZmljYXRpb25zOiB7XG4gICAgbmV3Q29udGVudDogdHJ1ZSxcbiAgICB0cmVuZGluZ0NvbnRlbnQ6IHRydWUsXG4gICAgY2F0ZWdvcnlVcGRhdGVzOiBmYWxzZSxcbiAgICBhdXRob3JVcGRhdGVzOiBmYWxzZSxcbiAgfSxcbiAgcHJpdmFjeToge1xuICAgIHNob3dSZWFkSGlzdG9yeTogZmFsc2UsXG4gICAgc2hvd0Jvb2ttYXJrczogdHJ1ZSxcbiAgICBzaG93TGlrZXM6IHRydWUsXG4gICAgc2hhcmVBY3Rpdml0eTogZmFsc2UsXG4gIH0sXG4gIGNvbnRlbnQ6IHtcbiAgICBzaG93SW1hZ2VzOiB0cnVlLFxuICAgIHNob3dWaWRlb3M6IHRydWUsXG4gICAgc2hvd0F1ZGlvOiB0cnVlLFxuICAgIGF1dG9QbGF5OiBmYWxzZSxcbiAgICBxdWFsaXR5OiAnbWVkaXVtJyxcbiAgfSxcbn07XG5cbi8vIERlZmF1bHQgZmVlZCBmaWx0ZXJzXG5jb25zdCBkZWZhdWx0RmlsdGVyczogRmVlZEZpbHRlcnMgPSB7XG4gIGNhdGVnb3JpZXM6IFtdLFxuICB0eXBlczogW10sXG4gIHNvdXJjZXM6IFtdLFxuICBkYXRlUmFuZ2U6IHtcbiAgICBzdGFydDogJycsXG4gICAgZW5kOiAnJyxcbiAgfSxcbiAgcmVhZFN0YXR1czogJ2FsbCcsXG4gIGVuZ2FnZW1lbnQ6ICdhbGwnLFxuICBsYW5ndWFnZTogJ2VuJyxcbiAgdGFnczogW10sXG59O1xuXG4vLyBDcmVhdGUgZmVlZHMgc3RvcmUgd2l0aCBtaWRkbGV3YXJlXG5leHBvcnQgY29uc3QgdXNlRmVlZHNTdG9yZSA9IGNyZWF0ZTxGZWVkc1N0b3JlPigpKFxuICBkZXZ0b29scyhcbiAgICBwZXJzaXN0KFxuICAgICAgKHNldCwgZ2V0KSA9PiAoe1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIGZlZWRzOiBbXSxcbiAgICAgICAgZmlsdGVyZWRGZWVkczogW10sXG4gICAgICAgIGNhdGVnb3JpZXM6IFtdLFxuICAgICAgICBzZWFyY2g6IHtcbiAgICAgICAgICBxdWVyeTogJycsXG4gICAgICAgICAgcmVzdWx0czogW10sXG4gICAgICAgICAgdG90YWxSZXN1bHRzOiAwLFxuICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICAgIHRvdGFsUGFnZXM6IDEsXG4gICAgICAgICAgZmlsdGVyczogZGVmYXVsdEZpbHRlcnMsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtdLFxuICAgICAgICAgIHJlY2VudFNlYXJjaGVzOiBbXSxcbiAgICAgICAgfSxcbiAgICAgICAgY3VycmVudFZpZXc6ICdsaXN0JyxcbiAgICAgICAgc2VsZWN0ZWRGZWVkOiBudWxsLFxuICAgICAgICBzZWxlY3RlZENhdGVnb3J5OiBudWxsLFxuICAgICAgICBmaWx0ZXJzOiBkZWZhdWx0RmlsdGVycyxcbiAgICAgICAgcHJlZmVyZW5jZXM6IGRlZmF1bHRQcmVmZXJlbmNlcyxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgaXNTZWFyY2hpbmc6IGZhbHNlLFxuICAgICAgICBpc1JlZnJlc2hpbmc6IGZhbHNlLFxuICAgICAgICBpc1VwZGF0aW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIFxuICAgICAgICAvLyBGZWVkIG1hbmFnZW1lbnQgYWN0aW9uc1xuICAgICAgICBzZXRGZWVkczogKGZlZWRzKSA9PiBzZXQoeyBmZWVkcywgZmlsdGVyZWRGZWVkczogZmVlZHMgfSksXG4gICAgICAgIFxuICAgICAgICBhZGRGZWVkOiAoZmVlZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogW2ZlZWQsIC4uLnN0YXRlLmZlZWRzXSxcbiAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBbZmVlZCwgLi4uc3RhdGUuZmlsdGVyZWRGZWVkc10sXG4gICAgICAgIH0pKSxcbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZUZlZWQ6IChpZCwgdXBkYXRlcykgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogc3RhdGUuZmVlZHMubWFwKGZlZWQgPT5cbiAgICAgICAgICAgIGZlZWQuaWQgPT09IGlkID8geyAuLi5mZWVkLCAuLi51cGRhdGVzIH0gOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBzdGF0ZS5maWx0ZXJlZEZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCA/IHsgLi4uZmVlZCwgLi4udXBkYXRlcyB9IDogZmVlZFxuICAgICAgICAgICksXG4gICAgICAgIH0pKSxcbiAgICAgICAgXG4gICAgICAgIHJlbW92ZUZlZWQ6IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogc3RhdGUuZmVlZHMuZmlsdGVyKGZlZWQgPT4gZmVlZC5pZCAhPT0gaWQpLFxuICAgICAgICAgIGZpbHRlcmVkRmVlZHM6IHN0YXRlLmZpbHRlcmVkRmVlZHMuZmlsdGVyKGZlZWQgPT4gZmVlZC5pZCAhPT0gaWQpLFxuICAgICAgICB9KSksXG4gICAgICAgIFxuICAgICAgICByZWZyZXNoRmVlZHM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IGlzUmVmcmVzaGluZyB9ID0gZ2V0KCk7XG4gICAgICAgICAgaWYgKGlzUmVmcmVzaGluZykgcmV0dXJuOyAvLyBQcmV2ZW50IG11bHRpcGxlIHNpbXVsdGFuZW91cyBjYWxsc1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXQoeyBpc1JlZnJlc2hpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2ZlZWRzJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY2F0ZWdvcnk6IG51bGwgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZWZyZXNoIGZlZWRzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZlZWRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgc2V0KHsgZmVlZHMsIGZpbHRlcmVkRmVlZHM6IGZlZWRzLCBpc1JlZnJlc2hpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRmVlZHMgcmVmcmVzaGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldCh7IGVycm9yOiBlcnJvck1lc3NhZ2UsIGlzUmVmcmVzaGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byByZWZyZXNoIGZlZWRzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBsb2FkTW9yZUZlZWRzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBpc0xvYWRpbmcgfSA9IGdldCgpO1xuICAgICAgICAgIGlmIChpc0xvYWRpbmcpIHJldHVybjsgLy8gUHJldmVudCBtdWx0aXBsZSBzaW11bHRhbmVvdXMgY2FsbHNcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0KHsgaXNMb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9mZWVkcycsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGNhdGVnb3J5OiBudWxsIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBtb3JlIGZlZWRzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5ld0ZlZWRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICAgICAgZmVlZHM6IFsuLi5zdGF0ZS5mZWVkcywgLi4ubmV3RmVlZHNdLFxuICAgICAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBbLi4uc3RhdGUuZmlsdGVyZWRGZWVkcywgLi4ubmV3RmVlZHNdLFxuICAgICAgICAgICAgICBpc0xvYWRpbmc6IGZhbHNlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdNb3JlIGZlZWRzIGxvYWRlZCcpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldCh7IGVycm9yOiBlcnJvck1lc3NhZ2UsIGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIG1vcmUgZmVlZHM6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKGVycm9yTWVzc2FnZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbHRlcmluZyBhbmQgc2VhcmNoIGFjdGlvbnNcbiAgICAgICAgc2V0RmlsdGVyczogKGZpbHRlcnMpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJzID0geyAuLi5zdGF0ZS5maWx0ZXJzLCAuLi5maWx0ZXJzIH07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXBwbHkgZmlsdGVycyB0byBmZWVkc1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkID0gc3RhdGUuZmVlZHMuZmlsdGVyKGZlZWQgPT4ge1xuICAgICAgICAgICAgaWYgKG5ld0ZpbHRlcnMuY2F0ZWdvcmllcyAmJiBuZXdGaWx0ZXJzLmNhdGVnb3JpZXMubGVuZ3RoID4gMCAmJiAhbmV3RmlsdGVycy5jYXRlZ29yaWVzLmluY2x1ZGVzKGZlZWQuY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJzLnR5cGVzICYmIG5ld0ZpbHRlcnMudHlwZXMubGVuZ3RoID4gMCAmJiAhbmV3RmlsdGVycy50eXBlcy5pbmNsdWRlcyhmZWVkLnR5cGUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJzLnNvdXJjZXMgJiYgbmV3RmlsdGVycy5zb3VyY2VzLmxlbmd0aCA+IDAgJiYgIW5ld0ZpbHRlcnMuc291cmNlcy5pbmNsdWRlcyhmZWVkLnNvdXJjZS5uYW1lKSkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3RmlsdGVycy5yZWFkU3RhdHVzID09PSAncmVhZCcgJiYgIWZlZWQudXNlckludGVyYWN0aW9uLnJlYWQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ld0ZpbHRlcnMucmVhZFN0YXR1cyA9PT0gJ3VucmVhZCcgJiYgZmVlZC51c2VySW50ZXJhY3Rpb24ucmVhZCkge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3RmlsdGVycy50YWdzICYmIG5ld0ZpbHRlcnMudGFncy5sZW5ndGggPiAwICYmICFuZXdGaWx0ZXJzLnRhZ3Muc29tZSh0YWcgPT4gZmVlZC50YWdzLmluY2x1ZGVzKHRhZykpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiB7IGZpbHRlcnM6IG5ld0ZpbHRlcnMsIGZpbHRlcmVkRmVlZHM6IGZpbHRlcmVkIH07XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgY2xlYXJGaWx0ZXJzOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIGZpbHRlcnM6IGRlZmF1bHRGaWx0ZXJzLFxuICAgICAgICAgIGZpbHRlcmVkRmVlZHM6IHN0YXRlLmZlZWRzLFxuICAgICAgICB9KSksXG4gICAgICAgIFxuICAgICAgICBzZWFyY2hGZWVkczogYXN5bmMgKHF1ZXJ5KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXRTZWFyY2hpbmcsIHNldEVycm9yIH0gPSBnZXQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0U2VhcmNoaW5nKHRydWUpO1xuICAgICAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvZmVlZHMvc2VhcmNoJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcXVlcnkgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzZWFyY2ggZmVlZHMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICAgICAgc2VhcmNoOiB7XG4gICAgICAgICAgICAgICAgLi4uc3RhdGUuc2VhcmNoLFxuICAgICAgICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgICAgICAgIHJlc3VsdHM6IHJlc3VsdHMuaXRlbXMsXG4gICAgICAgICAgICAgICAgdG90YWxSZXN1bHRzOiByZXN1bHRzLnRvdGFsLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICAgICAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbChyZXN1bHRzLnRvdGFsIC8gc3RhdGUucHJlZmVyZW5jZXMuaXRlbXNQZXJQYWdlKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0ZlZWRzIHNlYXJjaGVkJywge1xuICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgcmVzdWx0czogcmVzdWx0cy5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgIHRvdGFsOiByZXN1bHRzLnRvdGFsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2VhcmNoIGZlZWRzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0U2VhcmNoaW5nKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBzZXRTZWFyY2hRdWVyeTogKHF1ZXJ5KSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHNlYXJjaDogeyAuLi5zdGF0ZS5zZWFyY2gsIHF1ZXJ5IH1cbiAgICAgICAgfSkpLFxuICAgICAgICBcbiAgICAgICAgY2xlYXJTZWFyY2g6ICgpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgc2VhcmNoOiB7XG4gICAgICAgICAgICAuLi5zdGF0ZS5zZWFyY2gsXG4gICAgICAgICAgICBxdWVyeTogJycsXG4gICAgICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgICAgIHRvdGFsUmVzdWx0czogMCxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAxLFxuICAgICAgICAgICAgdG90YWxQYWdlczogMSxcbiAgICAgICAgICB9XG4gICAgICAgIH0pKSxcbiAgICAgICAgXG4gICAgICAgIC8vIEZlZWQgaW50ZXJhY3Rpb24gYWN0aW9uc1xuICAgICAgICBsaWtlRmVlZDogKGlkKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIGZlZWRzOiBzdGF0ZS5mZWVkcy5tYXAoZmVlZCA9PlxuICAgICAgICAgICAgZmVlZC5pZCA9PT0gaWQgXG4gICAgICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgICAgIC4uLmZlZWQsXG4gICAgICAgICAgICAgICAgICB1c2VySW50ZXJhY3Rpb246IHsgLi4uZmVlZC51c2VySW50ZXJhY3Rpb24sIGxpa2VkOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgICBlbmdhZ2VtZW50OiB7IC4uLmZlZWQuZW5nYWdlbWVudCwgbGlrZXM6IGZlZWQuZW5nYWdlbWVudC5saWtlcyArIDEgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBzdGF0ZS5maWx0ZXJlZEZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IFxuICAgICAgICAgICAgICAgICAgLi4uZmVlZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJbnRlcmFjdGlvbjogeyAuLi5mZWVkLnVzZXJJbnRlcmFjdGlvbiwgbGlrZWQ6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgIGVuZ2FnZW1lbnQ6IHsgLi4uZmVlZC5lbmdhZ2VtZW50LCBsaWtlczogZmVlZC5lbmdhZ2VtZW50Lmxpa2VzICsgMSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IGZlZWRcbiAgICAgICAgICApLFxuICAgICAgICB9KSksXG4gICAgICAgIFxuICAgICAgICB1bmxpa2VGZWVkOiAoaWQpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgZmVlZHM6IHN0YXRlLmZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IFxuICAgICAgICAgICAgICAgICAgLi4uZmVlZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJbnRlcmFjdGlvbjogeyAuLi5mZWVkLnVzZXJJbnRlcmFjdGlvbiwgbGlrZWQ6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgICBlbmdhZ2VtZW50OiB7IC4uLmZlZWQuZW5nYWdlbWVudCwgbGlrZXM6IE1hdGgubWF4KDAsIGZlZWQuZW5nYWdlbWVudC5saWtlcyAtIDEpIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogZmVlZFxuICAgICAgICAgICksXG4gICAgICAgICAgZmlsdGVyZWRGZWVkczogc3RhdGUuZmlsdGVyZWRGZWVkcy5tYXAoZmVlZCA9PlxuICAgICAgICAgICAgZmVlZC5pZCA9PT0gaWQgXG4gICAgICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgICAgIC4uLmZlZWQsXG4gICAgICAgICAgICAgICAgICB1c2VySW50ZXJhY3Rpb246IHsgLi4uZmVlZC51c2VySW50ZXJhY3Rpb24sIGxpa2VkOiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgICAgZW5nYWdlbWVudDogeyAuLi5mZWVkLmVuZ2FnZW1lbnQsIGxpa2VzOiBNYXRoLm1heCgwLCBmZWVkLmVuZ2FnZW1lbnQubGlrZXMgLSAxKSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA6IGZlZWRcbiAgICAgICAgICApLFxuICAgICAgICB9KSksXG4gICAgICAgIFxuICAgICAgICBzaGFyZUZlZWQ6IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogc3RhdGUuZmVlZHMubWFwKGZlZWQgPT5cbiAgICAgICAgICAgIGZlZWQuaWQgPT09IGlkIFxuICAgICAgICAgICAgICA/IHsgXG4gICAgICAgICAgICAgICAgICAuLi5mZWVkLFxuICAgICAgICAgICAgICAgICAgdXNlckludGVyYWN0aW9uOiB7IC4uLmZlZWQudXNlckludGVyYWN0aW9uLCBzaGFyZWQ6IHRydWUgfSxcbiAgICAgICAgICAgICAgICAgIGVuZ2FnZW1lbnQ6IHsgLi4uZmVlZC5lbmdhZ2VtZW50LCBzaGFyZXM6IGZlZWQuZW5nYWdlbWVudC5zaGFyZXMgKyAxIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogZmVlZFxuICAgICAgICAgICksXG4gICAgICAgICAgZmlsdGVyZWRGZWVkczogc3RhdGUuZmlsdGVyZWRGZWVkcy5tYXAoZmVlZCA9PlxuICAgICAgICAgICAgZmVlZC5pZCA9PT0gaWQgXG4gICAgICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgICAgIC4uLmZlZWQsXG4gICAgICAgICAgICAgICAgICB1c2VySW50ZXJhY3Rpb246IHsgLi4uZmVlZC51c2VySW50ZXJhY3Rpb24sIHNoYXJlZDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgICAgZW5nYWdlbWVudDogeyAuLi5mZWVkLmVuZ2FnZW1lbnQsIHNoYXJlczogZmVlZC5lbmdhZ2VtZW50LnNoYXJlcyArIDEgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgfSkpLFxuICAgICAgICBcbiAgICAgICAgYm9va21hcmtGZWVkOiAoaWQpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgZmVlZHM6IHN0YXRlLmZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IC4uLmZlZWQsIHVzZXJJbnRlcmFjdGlvbjogeyAuLi5mZWVkLnVzZXJJbnRlcmFjdGlvbiwgYm9va21hcmtlZDogdHJ1ZSB9IH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBzdGF0ZS5maWx0ZXJlZEZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IC4uLmZlZWQsIHVzZXJJbnRlcmFjdGlvbjogeyAuLi5mZWVkLnVzZXJJbnRlcmFjdGlvbiwgYm9va21hcmtlZDogdHJ1ZSB9IH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgfSkpLFxuICAgICAgICBcbiAgICAgICAgdW5ib29rbWFya0ZlZWQ6IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogc3RhdGUuZmVlZHMubWFwKGZlZWQgPT5cbiAgICAgICAgICAgIGZlZWQuaWQgPT09IGlkIFxuICAgICAgICAgICAgICA/IHsgLi4uZmVlZCwgdXNlckludGVyYWN0aW9uOiB7IC4uLmZlZWQudXNlckludGVyYWN0aW9uLCBib29rbWFya2VkOiBmYWxzZSB9IH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBzdGF0ZS5maWx0ZXJlZEZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IC4uLmZlZWQsIHVzZXJJbnRlcmFjdGlvbjogeyAuLi5mZWVkLnVzZXJJbnRlcmFjdGlvbiwgYm9va21hcmtlZDogZmFsc2UgfSB9XG4gICAgICAgICAgICAgIDogZmVlZFxuICAgICAgICAgICksXG4gICAgICAgIH0pKSxcbiAgICAgICAgXG4gICAgICAgIG1hcmtBc1JlYWQ6IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogc3RhdGUuZmVlZHMubWFwKGZlZWQgPT5cbiAgICAgICAgICAgIGZlZWQuaWQgPT09IGlkIFxuICAgICAgICAgICAgICA/IHsgXG4gICAgICAgICAgICAgICAgICAuLi5mZWVkLFxuICAgICAgICAgICAgICAgICAgdXNlckludGVyYWN0aW9uOiB7IFxuICAgICAgICAgICAgICAgICAgICAuLi5mZWVkLnVzZXJJbnRlcmFjdGlvbiwgXG4gICAgICAgICAgICAgICAgICAgIHJlYWQ6IHRydWUsIFxuICAgICAgICAgICAgICAgICAgICByZWFkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSBcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDogZmVlZFxuICAgICAgICAgICksXG4gICAgICAgICAgZmlsdGVyZWRGZWVkczogc3RhdGUuZmlsdGVyZWRGZWVkcy5tYXAoZmVlZCA9PlxuICAgICAgICAgICAgZmVlZC5pZCA9PT0gaWQgXG4gICAgICAgICAgICAgID8geyBcbiAgICAgICAgICAgICAgICAgIC4uLmZlZWQsXG4gICAgICAgICAgICAgICAgICB1c2VySW50ZXJhY3Rpb246IHsgXG4gICAgICAgICAgICAgICAgICAgIC4uLmZlZWQudXNlckludGVyYWN0aW9uLCBcbiAgICAgICAgICAgICAgICAgICAgcmVhZDogdHJ1ZSwgXG4gICAgICAgICAgICAgICAgICAgIHJlYWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgfSkpLFxuICAgICAgICBcbiAgICAgICAgbWFya0FzVW5yZWFkOiAoaWQpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgZmVlZHM6IHN0YXRlLmZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IFxuICAgICAgICAgICAgICAgICAgLi4uZmVlZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJbnRlcmFjdGlvbjogeyBcbiAgICAgICAgICAgICAgICAgICAgLi4uZmVlZC51c2VySW50ZXJhY3Rpb24sIFxuICAgICAgICAgICAgICAgICAgICByZWFkOiBmYWxzZSwgXG4gICAgICAgICAgICAgICAgICAgIHJlYWRBdDogdW5kZWZpbmVkIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgICBmaWx0ZXJlZEZlZWRzOiBzdGF0ZS5maWx0ZXJlZEZlZWRzLm1hcChmZWVkID0+XG4gICAgICAgICAgICBmZWVkLmlkID09PSBpZCBcbiAgICAgICAgICAgICAgPyB7IFxuICAgICAgICAgICAgICAgICAgLi4uZmVlZCxcbiAgICAgICAgICAgICAgICAgIHVzZXJJbnRlcmFjdGlvbjogeyBcbiAgICAgICAgICAgICAgICAgICAgLi4uZmVlZC51c2VySW50ZXJhY3Rpb24sIFxuICAgICAgICAgICAgICAgICAgICByZWFkOiBmYWxzZSwgXG4gICAgICAgICAgICAgICAgICAgIHJlYWRBdDogdW5kZWZpbmVkIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgOiBmZWVkXG4gICAgICAgICAgKSxcbiAgICAgICAgfSkpLFxuICAgICAgICBcbiAgICAgICAgLy8gQ2F0ZWdvcnkgYWN0aW9uc1xuICAgICAgICBzZXRDYXRlZ29yaWVzOiAoY2F0ZWdvcmllcykgPT4gc2V0KHsgY2F0ZWdvcmllcyB9KSxcbiAgICAgICAgXG4gICAgICAgIHRvZ2dsZUNhdGVnb3J5OiAoY2F0ZWdvcnlJZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBjYXRlZ29yaWVzOiBzdGF0ZS5jYXRlZ29yaWVzLm1hcChjYXRlZ29yeSA9PlxuICAgICAgICAgICAgY2F0ZWdvcnkuaWQgPT09IGNhdGVnb3J5SWQgXG4gICAgICAgICAgICAgID8geyAuLi5jYXRlZ29yeSwgZW5hYmxlZDogIWNhdGVnb3J5LmVuYWJsZWQgfVxuICAgICAgICAgICAgICA6IGNhdGVnb3J5XG4gICAgICAgICAgKVxuICAgICAgICB9KSksXG4gICAgICAgIFxuICAgICAgICBzZXRTZWxlY3RlZENhdGVnb3J5OiAoY2F0ZWdvcnlJZCkgPT4gc2V0KHsgc2VsZWN0ZWRDYXRlZ29yeTogY2F0ZWdvcnlJZCB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByZWZlcmVuY2VzIGFjdGlvbnNcbiAgICAgICAgdXBkYXRlUHJlZmVyZW5jZXM6IChwcmVmZXJlbmNlcykgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBwcmVmZXJlbmNlczogeyAuLi5zdGF0ZS5wcmVmZXJlbmNlcywgLi4ucHJlZmVyZW5jZXMgfVxuICAgICAgICB9KSksXG4gICAgICAgIFxuICAgICAgICByZXNldFByZWZlcmVuY2VzOiAoKSA9PiBzZXQoeyBwcmVmZXJlbmNlczogZGVmYXVsdFByZWZlcmVuY2VzIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gVmlldyBtYW5hZ2VtZW50IGFjdGlvbnNcbiAgICAgICAgc2V0Q3VycmVudFZpZXc6ICh2aWV3KSA9PiBzZXQoeyBjdXJyZW50VmlldzogdmlldyB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFNlbGVjdGVkRmVlZDogKGZlZWQpID0+IHNldCh7IHNlbGVjdGVkRmVlZDogZmVlZCB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIERhdGEgb3BlcmF0aW9uc1xuICAgICAgICBsb2FkRmVlZHM6IGFzeW5jIChjYXRlZ29yeSkgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXQoeyBpc0xvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2ZlZWRzJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgY2F0ZWdvcnkgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZlZWRzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICBzZXQoeyBmZWVkcywgZmlsdGVyZWRGZWVkczogZmVlZHMsIGlzTG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBsb2dnZXIuaW5mbygnRmVlZHMgbG9hZGVkJywge1xuICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgIGNvdW50OiBmZWVkcy5sZW5ndGhcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBObyBmYWxsYmFjayBkYXRhIC0ganVzdCBzZXQgZW1wdHkgc3RhdGVcbiAgICAgICAgICAgICAgc2V0KHsgZmVlZHM6IFtdLCBmaWx0ZXJlZEZlZWRzOiBbXSwgaXNMb2FkaW5nOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gTm8gZmFsbGJhY2sgZGF0YSAtIGp1c3Qgc2V0IGVtcHR5IHN0YXRlIG9uIGVycm9yXG4gICAgICAgICAgICBzZXQoeyBmZWVkczogW10sIGZpbHRlcmVkRmVlZHM6IFtdLCBpc0xvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0FQSSBlcnJvciwgdXNpbmcgZW1wdHkgc3RhdGU6JywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgbG9hZENhdGVnb3JpZXM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0KHsgaXNMb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9mZWVkcy9jYXRlZ29yaWVzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gbG9hZCBjYXRlZ29yaWVzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3JpZXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBzZXQoeyBjYXRlZ29yaWVzLCBpc0xvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRmVlZCBjYXRlZ29yaWVzIGxvYWRlZCcsIHtcbiAgICAgICAgICAgICAgY291bnQ6IGNhdGVnb3JpZXMubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICAgICAgICBzZXQoeyBlcnJvcjogZXJyb3JNZXNzYWdlLCBpc0xvYWRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBjYXRlZ29yaWVzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBzYXZlVXNlckludGVyYWN0aW9uOiBhc3luYyAoZmVlZElkLCBpbnRlcmFjdGlvbikgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXQoeyBpc1VwZGF0aW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9mZWVkcy9pbnRlcmFjdGlvbnMnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBmZWVkSWQsIGludGVyYWN0aW9uIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2F2ZSB1c2VyIGludGVyYWN0aW9uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCh7IGlzVXBkYXRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1VzZXIgaW50ZXJhY3Rpb24gc2F2ZWQnLCB7XG4gICAgICAgICAgICAgIGZlZWRJZCxcbiAgICAgICAgICAgICAgaW50ZXJhY3Rpb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldCh7IGVycm9yOiBlcnJvck1lc3NhZ2UsIGlzVXBkYXRpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSB1c2VyIGludGVyYWN0aW9uOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBMb2FkaW5nIHN0YXRlIGFjdGlvbnNcbiAgICAgICAgc2V0TG9hZGluZzogKGxvYWRpbmcpID0+IHNldCh7IGlzTG9hZGluZzogbG9hZGluZyB9KSxcbiAgICAgICAgc2V0U2VhcmNoaW5nOiAoc2VhcmNoaW5nKSA9PiBzZXQoeyBpc1NlYXJjaGluZzogc2VhcmNoaW5nIH0pLFxuICAgICAgICBzZXRSZWZyZXNoaW5nOiAocmVmcmVzaGluZykgPT4gc2V0KHsgaXNSZWZyZXNoaW5nOiByZWZyZXNoaW5nIH0pLFxuICAgICAgICBzZXRVcGRhdGluZzogKHVwZGF0aW5nKSA9PiBzZXQoeyBpc1VwZGF0aW5nOiB1cGRhdGluZyB9KSxcbiAgICAgICAgc2V0RXJyb3I6IChlcnJvcikgPT4gc2V0KHsgZXJyb3IgfSksXG4gICAgICAgIGNsZWFyRXJyb3I6ICgpID0+IHNldCh7IGVycm9yOiBudWxsIH0pLFxuICAgICAgfSksXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdmZWVkcy1zdG9yZScsXG4gICAgICAgIHBhcnRpYWxpemU6IChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmZWVkczogc3RhdGUuZmVlZHMsXG4gICAgICAgICAgY2F0ZWdvcmllczogc3RhdGUuY2F0ZWdvcmllcyxcbiAgICAgICAgICBwcmVmZXJlbmNlczogc3RhdGUucHJlZmVyZW5jZXMsXG4gICAgICAgICAgZmlsdGVyczogc3RhdGUuZmlsdGVycyxcbiAgICAgICAgICBjdXJyZW50Vmlldzogc3RhdGUuY3VycmVudFZpZXcsXG4gICAgICAgIH0pLFxuICAgICAgfVxuICAgICksXG4gICAgeyBuYW1lOiAnZmVlZHMtc3RvcmUnIH1cbiAgKVxuKTtcblxuLy8gU3RvcmUgc2VsZWN0b3JzIGZvciBvcHRpbWl6ZWQgcmUtcmVuZGVyc1xuZXhwb3J0IGNvbnN0IHVzZUZlZWRzID0gKCkgPT4gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5mZWVkcyk7XG5leHBvcnQgY29uc3QgdXNlRmlsdGVyZWRGZWVkcyA9ICgpID0+IHVzZUZlZWRzU3RvcmUoc3RhdGUgPT4gc3RhdGUuZmlsdGVyZWRGZWVkcyk7XG5leHBvcnQgY29uc3QgdXNlRmVlZENhdGVnb3JpZXMgPSAoKSA9PiB1c2VGZWVkc1N0b3JlKHN0YXRlID0+IHN0YXRlLmNhdGVnb3JpZXMpO1xuZXhwb3J0IGNvbnN0IHVzZUZlZWRTZWFyY2ggPSAoKSA9PiB1c2VGZWVkc1N0b3JlKHN0YXRlID0+IHN0YXRlLnNlYXJjaCk7XG5leHBvcnQgY29uc3QgdXNlU2VsZWN0ZWRGZWVkID0gKCkgPT4gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5zZWxlY3RlZEZlZWQpO1xuZXhwb3J0IGNvbnN0IHVzZUZlZWRQcmVmZXJlbmNlcyA9ICgpID0+IHVzZUZlZWRzU3RvcmUoc3RhdGUgPT4gc3RhdGUucHJlZmVyZW5jZXMpO1xuZXhwb3J0IGNvbnN0IHVzZUZlZWRGaWx0ZXJzID0gKCkgPT4gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5maWx0ZXJzKTtcbmV4cG9ydCBjb25zdCB1c2VGZWVkc0xvYWRpbmcgPSAoKSA9PiB1c2VGZWVkc1N0b3JlKHN0YXRlID0+IHN0YXRlLmlzTG9hZGluZyk7XG5leHBvcnQgY29uc3QgdXNlRmVlZHNFcnJvciA9ICgpID0+IHVzZUZlZWRzU3RvcmUoc3RhdGUgPT4gc3RhdGUuZXJyb3IpO1xuXG4vLyBBY3Rpb24gc2VsZWN0b3JzIC0gRklYRUQ6IFVzZSBpbmRpdmlkdWFsIHNlbGVjdG9ycyB0byBwcmV2ZW50IGluZmluaXRlIHJlLXJlbmRlcnNcbmV4cG9ydCBjb25zdCB1c2VGZWVkc0FjdGlvbnMgPSAoKSA9PiB1c2VGZWVkc1N0b3JlKHN0YXRlID0+IHN0YXRlKTtcblxuLy8gQ29tcHV0ZWQgc2VsZWN0b3JzIC0gRklYRUQ6IFVzZSBpbmRpdmlkdWFsIHNlbGVjdG9ycyB0byBwcmV2ZW50IGluZmluaXRlIHJlLXJlbmRlcnNcbmV4cG9ydCBjb25zdCB1c2VGZWVkc1N0YXRzID0gKCkgPT4ge1xuICBjb25zdCB0b3RhbEZlZWRzID0gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5mZWVkcy5sZW5ndGgpO1xuICBjb25zdCBmaWx0ZXJlZEZlZWRzID0gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5maWx0ZXJlZEZlZWRzLmxlbmd0aCk7XG4gIGNvbnN0IHRvdGFsQ2F0ZWdvcmllcyA9IHVzZUZlZWRzU3RvcmUoc3RhdGUgPT4gc3RhdGUuY2F0ZWdvcmllcy5sZW5ndGgpO1xuICBjb25zdCBlbmFibGVkQ2F0ZWdvcmllcyA9IHVzZUZlZWRzU3RvcmUoc3RhdGUgPT4gc3RhdGUuY2F0ZWdvcmllcy5maWx0ZXIoY2F0ID0+IGNhdC5lbmFibGVkKS5sZW5ndGgpO1xuICBjb25zdCBzZWFyY2hSZXN1bHRzID0gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5zZWFyY2gucmVzdWx0cy5sZW5ndGgpO1xuICBjb25zdCBpc0xvYWRpbmcgPSB1c2VGZWVkc1N0b3JlKHN0YXRlID0+IHN0YXRlLmlzTG9hZGluZyk7XG4gIGNvbnN0IGlzU2VhcmNoaW5nID0gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5pc1NlYXJjaGluZyk7XG4gIGNvbnN0IGVycm9yID0gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBzdGF0ZS5lcnJvcik7XG4gIFxuICByZXR1cm4ge1xuICAgIHRvdGFsRmVlZHMsXG4gICAgZmlsdGVyZWRGZWVkcyxcbiAgICB0b3RhbENhdGVnb3JpZXMsXG4gICAgZW5hYmxlZENhdGVnb3JpZXMsXG4gICAgc2VhcmNoUmVzdWx0cyxcbiAgICBpc0xvYWRpbmcsXG4gICAgaXNTZWFyY2hpbmcsXG4gICAgZXJyb3IsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgdXNlQm9va21hcmtlZEZlZWRzID0gKCkgPT4gdXNlRmVlZHNTdG9yZShzdGF0ZSA9PiBcbiAgc3RhdGUuZmVlZHMuZmlsdGVyKGZlZWQgPT4gZmVlZC51c2VySW50ZXJhY3Rpb24uYm9va21hcmtlZClcbik7XG5cbmV4cG9ydCBjb25zdCB1c2VVbnJlYWRGZWVkcyA9ICgpID0+IHVzZUZlZWRzU3RvcmUoc3RhdGUgPT4gXG4gIHN0YXRlLmZlZWRzLmZpbHRlcihmZWVkID0+ICFmZWVkLnVzZXJJbnRlcmFjdGlvbi5yZWFkKVxuKTtcblxuZXhwb3J0IGNvbnN0IHVzZUxpa2VkRmVlZHMgPSAoKSA9PiB1c2VGZWVkc1N0b3JlKHN0YXRlID0+IFxuICBzdGF0ZS5mZWVkcy5maWx0ZXIoZmVlZCA9PiBmZWVkLnVzZXJJbnRlcmFjdGlvbi5saWtlZClcbik7XG5cbi8vIFN0b3JlIHV0aWxpdGllc1xuZXhwb3J0IGNvbnN0IGZlZWRzU3RvcmVVdGlscyA9IHtcbiAgLyoqXG4gICAqIEdldCBmZWVkcyBzdW1tYXJ5XG4gICAqL1xuICBnZXRGZWVkc1N1bW1hcnk6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZUZlZWRzU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxGZWVkczogc3RhdGUuZmVlZHMubGVuZ3RoLFxuICAgICAgZmlsdGVyZWRGZWVkczogc3RhdGUuZmlsdGVyZWRGZWVkcy5sZW5ndGgsXG4gICAgICBjYXRlZ29yaWVzOiBzdGF0ZS5jYXRlZ29yaWVzLmxlbmd0aCxcbiAgICAgIHNlYXJjaFJlc3VsdHM6IHN0YXRlLnNlYXJjaC5yZXN1bHRzLmxlbmd0aCxcbiAgICAgIHByZWZlcmVuY2VzOiBzdGF0ZS5wcmVmZXJlbmNlcyxcbiAgICB9O1xuICB9LFxuICBcbiAgLyoqXG4gICAqIEdldCBmZWVkcyBieSBjYXRlZ29yeVxuICAgKi9cbiAgZ2V0RmVlZHNCeUNhdGVnb3J5OiAoY2F0ZWdvcnk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdXNlRmVlZHNTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIHJldHVybiBzdGF0ZS5mZWVkcy5maWx0ZXIoZmVlZCA9PiBmZWVkLmNhdGVnb3J5ID09PSBjYXRlZ29yeSk7XG4gIH0sXG4gIFxuICAvKipcbiAgICogR2V0IGZlZWRzIGJ5IHR5cGVcbiAgICovXG4gIGdldEZlZWRzQnlUeXBlOiAodHlwZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSB1c2VGZWVkc1N0b3JlLmdldFN0YXRlKCk7XG4gICAgcmV0dXJuIHN0YXRlLmZlZWRzLmZpbHRlcihmZWVkID0+IGZlZWQudHlwZSA9PT0gdHlwZSk7XG4gIH0sXG4gIFxuICAvKipcbiAgICogR2V0IHRyZW5kaW5nIGZlZWRzXG4gICAqL1xuICBnZXRUcmVuZGluZ0ZlZWRzOiAoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSB1c2VGZWVkc1N0b3JlLmdldFN0YXRlKCk7XG4gICAgcmV0dXJuIHN0YXRlLmZlZWRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gKGIuZW5nYWdlbWVudC5saWtlcyArIGIuZW5nYWdlbWVudC5zaGFyZXMpIC0gKGEuZW5nYWdlbWVudC5saWtlcyArIGEuZW5nYWdlbWVudC5zaGFyZXMpKVxuICAgICAgLnNsaWNlKDAsIDEwKTtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBHZXQgcmVjZW50IGZlZWRzXG4gICAqL1xuICBnZXRSZWNlbnRGZWVkczogKGxpbWl0OiBudW1iZXIgPSAxMCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdXNlRmVlZHNTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIHJldHVybiBzdGF0ZS5mZWVkc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIucHVibGlzaGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEucHVibGlzaGVkQXQpLmdldFRpbWUoKSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cbn07XG5cbi8vIFN0b3JlIHN1YnNjcmlwdGlvbnMgZm9yIGV4dGVybmFsIGludGVncmF0aW9uc1xuZXhwb3J0IGNvbnN0IGZlZWRzU3RvcmVTdWJzY3JpcHRpb25zID0ge1xuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIGZlZWRzIGNoYW5nZXNcbiAgICovXG4gIG9uRmVlZHNDaGFuZ2U6IChjYWxsYmFjazogKGZlZWRzOiBGZWVkSXRlbVtdKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV0dXJuIHVzZUZlZWRzU3RvcmUuc3Vic2NyaWJlKFxuICAgICAgKHN0YXRlKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKHN0YXRlLmZlZWRzKTtcbiAgICAgIH1cbiAgICApO1xuICB9LFxuICBcbiAgLyoqXG4gICAqIFN1YnNjcmliZSB0byBzZWFyY2ggcmVzdWx0cyBjaGFuZ2VzXG4gICAqL1xuICBvblNlYXJjaFJlc3VsdHNDaGFuZ2U6IChjYWxsYmFjazogKHJlc3VsdHM6IEZlZWRJdGVtW10pID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlRmVlZHNTdG9yZS5zdWJzY3JpYmUoXG4gICAgICAoc3RhdGUpID0+IHtcbiAgICAgICAgY2FsbGJhY2soc3RhdGUuc2VhcmNoLnJlc3VsdHMpO1xuICAgICAgfVxuICAgICk7XG4gIH0sXG4gIFxuICAvKipcbiAgICogU3Vic2NyaWJlIHRvIHByZWZlcmVuY2VzIGNoYW5nZXNcbiAgICovXG4gIG9uUHJlZmVyZW5jZXNDaGFuZ2U6IChjYWxsYmFjazogKHByZWZlcmVuY2VzOiBGZWVkUHJlZmVyZW5jZXMpID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlRmVlZHNTdG9yZS5zdWJzY3JpYmUoXG4gICAgICAoc3RhdGUpID0+IHtcbiAgICAgICAgY2FsbGJhY2soc3RhdGUucHJlZmVyZW5jZXMpO1xuICAgICAgfVxuICAgICk7XG4gIH1cbn07XG5cbi8vIFN0b3JlIGRlYnVnZ2luZyB1dGlsaXRpZXNcbmV4cG9ydCBjb25zdCBmZWVkc1N0b3JlRGVidWcgPSB7XG4gIC8qKlxuICAgKiBMb2cgY3VycmVudCBmZWVkcyBzdGF0ZVxuICAgKi9cbiAgbG9nU3RhdGU6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZUZlZWRzU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICBsb2dnZXIuZGVidWcoJ0ZlZWRzIFN0b3JlIFN0YXRlJywge1xuICAgICAgdG90YWxGZWVkczogc3RhdGUuZmVlZHMubGVuZ3RoLFxuICAgICAgZmlsdGVyZWRGZWVkczogc3RhdGUuZmlsdGVyZWRGZWVkcy5sZW5ndGgsXG4gICAgICBjYXRlZ29yaWVzOiBzdGF0ZS5jYXRlZ29yaWVzLmxlbmd0aCxcbiAgICAgIHNlYXJjaFJlc3VsdHM6IHN0YXRlLnNlYXJjaC5yZXN1bHRzLmxlbmd0aCxcbiAgICAgIGN1cnJlbnRWaWV3OiBzdGF0ZS5jdXJyZW50VmlldyxcbiAgICAgIHNlbGVjdGVkQ2F0ZWdvcnk6IHN0YXRlLnNlbGVjdGVkQ2F0ZWdvcnksXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzTG9hZGluZyxcbiAgICAgIGVycm9yOiBzdGF0ZS5lcnJvclxuICAgIH0pO1xuICB9LFxuICBcbiAgLyoqXG4gICAqIExvZyBmZWVkcyBzdW1tYXJ5XG4gICAqL1xuICBsb2dTdW1tYXJ5OiAoKSA9PiB7XG4gICAgY29uc3Qgc3VtbWFyeSA9IGZlZWRzU3RvcmVVdGlscy5nZXRGZWVkc1N1bW1hcnkoKTtcbiAgICBsb2dnZXIuZGVidWcoJ0ZlZWRzIFN1bW1hcnknLCBzdW1tYXJ5KTtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBMb2cgZmVlZHMgYnkgY2F0ZWdvcnlcbiAgICovXG4gIGxvZ0ZlZWRzQnlDYXRlZ29yeTogKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdXNlRmVlZHNTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGNvbnN0IGJ5Q2F0ZWdvcnkgPSBzdGF0ZS5mZWVkcy5yZWR1Y2UoKGFjYywgZmVlZCkgPT4ge1xuICAgICAgYWNjW2ZlZWQuY2F0ZWdvcnldID0gKGFjY1tmZWVkLmNhdGVnb3J5XSB8fCAwKSArIDE7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pO1xuICAgIGxvZ2dlci5kZWJ1ZygnRmVlZHMgYnkgQ2F0ZWdvcnknLCBieUNhdGVnb3J5KTtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiBSZXNldCBmZWVkcyBzdG9yZVxuICAgKi9cbiAgcmVzZXQ6ICgpID0+IHtcbiAgICB1c2VGZWVkc1N0b3JlLmdldFN0YXRlKCkuY2xlYXJGaWx0ZXJzKCk7XG4gICAgdXNlRmVlZHNTdG9yZS5nZXRTdGF0ZSgpLnJlc2V0UHJlZmVyZW5jZXMoKTtcbiAgICBsb2dnZXIuaW5mbygnRmVlZHMgc3RvcmUgcmVzZXQnKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJmZWVkc1N0b3JlRGVidWciLCJmZWVkc1N0b3JlU3Vic2NyaXB0aW9ucyIsImZlZWRzU3RvcmVVdGlscyIsInVzZUJvb2ttYXJrZWRGZWVkcyIsInVzZUZlZWRDYXRlZ29yaWVzIiwidXNlRmVlZEZpbHRlcnMiLCJ1c2VGZWVkUHJlZmVyZW5jZXMiLCJ1c2VGZWVkU2VhcmNoIiwidXNlRmVlZHMiLCJ1c2VGZWVkc0FjdGlvbnMiLCJ1c2VGZWVkc0Vycm9yIiwidXNlRmVlZHNMb2FkaW5nIiwidXNlRmVlZHNTdGF0cyIsInVzZUZlZWRzU3RvcmUiLCJ1c2VGaWx0ZXJlZEZlZWRzIiwidXNlTGlrZWRGZWVkcyIsInVzZVNlbGVjdGVkRmVlZCIsInVzZVVucmVhZEZlZWRzIiwiZGVmYXVsdFByZWZlcmVuY2VzIiwiZGVmYXVsdFZpZXciLCJzb3J0QnkiLCJpdGVtc1BlclBhZ2UiLCJhdXRvUmVmcmVzaCIsInJlZnJlc2hJbnRlcnZhbCIsIm5vdGlmaWNhdGlvbnMiLCJuZXdDb250ZW50IiwidHJlbmRpbmdDb250ZW50IiwiY2F0ZWdvcnlVcGRhdGVzIiwiYXV0aG9yVXBkYXRlcyIsInByaXZhY3kiLCJzaG93UmVhZEhpc3RvcnkiLCJzaG93Qm9va21hcmtzIiwic2hvd0xpa2VzIiwic2hhcmVBY3Rpdml0eSIsImNvbnRlbnQiLCJzaG93SW1hZ2VzIiwic2hvd1ZpZGVvcyIsInNob3dBdWRpbyIsImF1dG9QbGF5IiwicXVhbGl0eSIsImRlZmF1bHRGaWx0ZXJzIiwiY2F0ZWdvcmllcyIsInR5cGVzIiwic291cmNlcyIsImRhdGVSYW5nZSIsInN0YXJ0IiwiZW5kIiwicmVhZFN0YXR1cyIsImVuZ2FnZW1lbnQiLCJsYW5ndWFnZSIsInRhZ3MiLCJjcmVhdGUiLCJkZXZ0b29scyIsInBlcnNpc3QiLCJzZXQiLCJnZXQiLCJmZWVkcyIsImZpbHRlcmVkRmVlZHMiLCJzZWFyY2giLCJxdWVyeSIsInJlc3VsdHMiLCJ0b3RhbFJlc3VsdHMiLCJjdXJyZW50UGFnZSIsInRvdGFsUGFnZXMiLCJmaWx0ZXJzIiwic3VnZ2VzdGlvbnMiLCJyZWNlbnRTZWFyY2hlcyIsImN1cnJlbnRWaWV3Iiwic2VsZWN0ZWRGZWVkIiwic2VsZWN0ZWRDYXRlZ29yeSIsInByZWZlcmVuY2VzIiwiaXNMb2FkaW5nIiwiaXNTZWFyY2hpbmciLCJpc1JlZnJlc2hpbmciLCJpc1VwZGF0aW5nIiwiZXJyb3IiLCJzZXRGZWVkcyIsImFkZEZlZWQiLCJmZWVkIiwic3RhdGUiLCJ1cGRhdGVGZWVkIiwiaWQiLCJ1cGRhdGVzIiwibWFwIiwicmVtb3ZlRmVlZCIsImZpbHRlciIsInJlZnJlc2hGZWVkcyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXRlZ29yeSIsIm9rIiwiRXJyb3IiLCJqc29uIiwibG9nZ2VyIiwiaW5mbyIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJsb2FkTW9yZUZlZWRzIiwibmV3RmVlZHMiLCJzZXRGaWx0ZXJzIiwibmV3RmlsdGVycyIsImZpbHRlcmVkIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJ0eXBlIiwic291cmNlIiwibmFtZSIsInVzZXJJbnRlcmFjdGlvbiIsInJlYWQiLCJzb21lIiwidGFnIiwiY2xlYXJGaWx0ZXJzIiwic2VhcmNoRmVlZHMiLCJzZXRTZWFyY2hpbmciLCJzZXRFcnJvciIsIml0ZW1zIiwidG90YWwiLCJNYXRoIiwiY2VpbCIsInNldFNlYXJjaFF1ZXJ5IiwiY2xlYXJTZWFyY2giLCJsaWtlRmVlZCIsImxpa2VkIiwibGlrZXMiLCJ1bmxpa2VGZWVkIiwibWF4Iiwic2hhcmVGZWVkIiwic2hhcmVkIiwic2hhcmVzIiwiYm9va21hcmtGZWVkIiwiYm9va21hcmtlZCIsInVuYm9va21hcmtGZWVkIiwibWFya0FzUmVhZCIsInJlYWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1hcmtBc1VucmVhZCIsInVuZGVmaW5lZCIsInNldENhdGVnb3JpZXMiLCJ0b2dnbGVDYXRlZ29yeSIsImNhdGVnb3J5SWQiLCJlbmFibGVkIiwic2V0U2VsZWN0ZWRDYXRlZ29yeSIsInVwZGF0ZVByZWZlcmVuY2VzIiwicmVzZXRQcmVmZXJlbmNlcyIsInNldEN1cnJlbnRWaWV3IiwidmlldyIsInNldFNlbGVjdGVkRmVlZCIsImxvYWRGZWVkcyIsImNvdW50IiwibG9hZENhdGVnb3JpZXMiLCJzYXZlVXNlckludGVyYWN0aW9uIiwiZmVlZElkIiwiaW50ZXJhY3Rpb24iLCJzZXRMb2FkaW5nIiwibG9hZGluZyIsInNlYXJjaGluZyIsInNldFJlZnJlc2hpbmciLCJyZWZyZXNoaW5nIiwic2V0VXBkYXRpbmciLCJ1cGRhdGluZyIsImNsZWFyRXJyb3IiLCJwYXJ0aWFsaXplIiwidG90YWxGZWVkcyIsInRvdGFsQ2F0ZWdvcmllcyIsImVuYWJsZWRDYXRlZ29yaWVzIiwiY2F0Iiwic2VhcmNoUmVzdWx0cyIsImdldEZlZWRzU3VtbWFyeSIsImdldFN0YXRlIiwiZ2V0RmVlZHNCeUNhdGVnb3J5IiwiZ2V0RmVlZHNCeVR5cGUiLCJnZXRUcmVuZGluZ0ZlZWRzIiwic29ydCIsImEiLCJiIiwic2xpY2UiLCJnZXRSZWNlbnRGZWVkcyIsImxpbWl0IiwicHVibGlzaGVkQXQiLCJnZXRUaW1lIiwib25GZWVkc0NoYW5nZSIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwib25TZWFyY2hSZXN1bHRzQ2hhbmdlIiwib25QcmVmZXJlbmNlc0NoYW5nZSIsImxvZ1N0YXRlIiwiZGVidWciLCJsb2dTdW1tYXJ5Iiwic3VtbWFyeSIsImxvZ0ZlZWRzQnlDYXRlZ29yeSIsImJ5Q2F0ZWdvcnkiLCJyZWR1Y2UiLCJhY2MiLCJyZXNldCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztDQVNDOzs7Ozs7Ozs7OztJQW8xQllBLGVBQWU7ZUFBZkE7O0lBcENBQyx1QkFBdUI7ZUFBdkJBOztJQXJEQUMsZUFBZTtlQUFmQTs7SUFiQUMsa0JBQWtCO2VBQWxCQTs7SUFsQ0FDLGlCQUFpQjtlQUFqQkE7O0lBSUFDLGNBQWM7ZUFBZEE7O0lBREFDLGtCQUFrQjtlQUFsQkE7O0lBRkFDLGFBQWE7ZUFBYkE7O0lBSEFDLFFBQVE7ZUFBUkE7O0lBV0FDLGVBQWU7ZUFBZkE7O0lBSEFDLGFBQWE7ZUFBYkE7O0lBREFDLGVBQWU7ZUFBZkE7O0lBT0FDLGFBQWE7ZUFBYkE7O0lBM2VBQyxhQUFhO2VBQWJBOztJQThkQUMsZ0JBQWdCO2VBQWhCQTs7SUEyQ0FDLGFBQWE7ZUFBYkE7O0lBeENBQyxlQUFlO2VBQWZBOztJQW9DQUMsY0FBYztlQUFkQTs7O3lCQWh2QlU7NEJBQ0U7d0JBR0Y7QUEyTHZCLDJCQUEyQjtBQUMzQixNQUFNQyxxQkFBc0M7SUFDMUNDLGFBQWE7SUFDYkMsUUFBUTtJQUNSQyxjQUFjO0lBQ2RDLGFBQWE7SUFDYkMsaUJBQWlCO0lBQ2pCQyxlQUFlO1FBQ2JDLFlBQVk7UUFDWkMsaUJBQWlCO1FBQ2pCQyxpQkFBaUI7UUFDakJDLGVBQWU7SUFDakI7SUFDQUMsU0FBUztRQUNQQyxpQkFBaUI7UUFDakJDLGVBQWU7UUFDZkMsV0FBVztRQUNYQyxlQUFlO0lBQ2pCO0lBQ0FDLFNBQVM7UUFDUEMsWUFBWTtRQUNaQyxZQUFZO1FBQ1pDLFdBQVc7UUFDWEMsVUFBVTtRQUNWQyxTQUFTO0lBQ1g7QUFDRjtBQUVBLHVCQUF1QjtBQUN2QixNQUFNQyxpQkFBOEI7SUFDbENDLFlBQVksRUFBRTtJQUNkQyxPQUFPLEVBQUU7SUFDVEMsU0FBUyxFQUFFO0lBQ1hDLFdBQVc7UUFDVEMs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