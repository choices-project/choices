931aa09cdfb3c2867610946cf39d4d7e
// Set up test environment variables FIRST, before any other imports
"use strict";
process.env.NODE_ENV = "test";
process.env.NEXT_PUBLIC_SUPABASE_URL = "https://test.supabase.co";
process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = "test-anon-key";
process.env.SUPABASE_SERVICE_ROLE_KEY = "test-service-role-key";
process.env.NEXTAUTH_SECRET = "test-secret";
process.env.NEXTAUTH_URL = "http://localhost:3000";
// Set up privacy pepper environment variables for testing
process.env.PRIVACY_PEPPER_DEV = "dev-pepper-consistent-for-testing-12345678901234567890";
process.env.PRIVACY_PEPPER_CURRENT = "hex:" + "ab".repeat(32);
process.env.PRIVACY_PEPPER_PREVIOUS = "hex:" + "cd".repeat(32);
// Polyfill for Web APIs in Node.js environment
if (typeof global.TextEncoder === "undefined") {
    const { TextEncoder, TextDecoder } = require("util");
    global.TextEncoder = TextEncoder;
    global.TextDecoder = TextDecoder;
}
if (typeof global.Request === "undefined") {
    const { Request, Response, Headers } = require("undici");
    global.Request = Request;
    global.Response = Response;
    global.Headers = Headers;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9qZXN0LnNldHVwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNldCB1cCB0ZXN0IGVudmlyb25tZW50IHZhcmlhYmxlcyBGSVJTVCwgYmVmb3JlIGFueSBvdGhlciBpbXBvcnRzXG5wcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcbnByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCA9ICdodHRwczovL3Rlc3Quc3VwYWJhc2UuY28nO1xucHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPSAndGVzdC1hbm9uLWtleSc7XG5wcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZID0gJ3Rlc3Qtc2VydmljZS1yb2xlLWtleSc7XG5wcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgPSAndGVzdC1zZWNyZXQnO1xucHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XG5cbi8vIFNldCB1cCBwcml2YWN5IHBlcHBlciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIHRlc3RpbmdcbnByb2Nlc3MuZW52LlBSSVZBQ1lfUEVQUEVSX0RFViA9ICdkZXYtcGVwcGVyLWNvbnNpc3RlbnQtZm9yLXRlc3RpbmctMTIzNDU2Nzg5MDEyMzQ1Njc4OTAnO1xucHJvY2Vzcy5lbnYuUFJJVkFDWV9QRVBQRVJfQ1VSUkVOVCA9ICdoZXg6JyArICdhYicucmVwZWF0KDMyKTtcbnByb2Nlc3MuZW52LlBSSVZBQ1lfUEVQUEVSX1BSRVZJT1VTID0gJ2hleDonICsgJ2NkJy5yZXBlYXQoMzIpO1xuXG4vLyBQb2x5ZmlsbCBmb3IgV2ViIEFQSXMgaW4gTm9kZS5qcyBlbnZpcm9ubWVudFxuaWYgKHR5cGVvZiBnbG9iYWwuVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gIGNvbnN0IHsgVGV4dEVuY29kZXIsIFRleHREZWNvZGVyIH0gPSByZXF1aXJlKCd1dGlsJyk7XG4gIGdsb2JhbC5UZXh0RW5jb2RlciA9IFRleHRFbmNvZGVyO1xuICBnbG9iYWwuVGV4dERlY29kZXIgPSBUZXh0RGVjb2Rlcjtcbn1cblxuaWYgKHR5cGVvZiBnbG9iYWwuUmVxdWVzdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgY29uc3QgeyBSZXF1ZXN0LCBSZXNwb25zZSwgSGVhZGVycyB9ID0gcmVxdWlyZSgndW5kaWNpJyk7XG4gIGdsb2JhbC5SZXF1ZXN0ID0gUmVxdWVzdDtcbiAgZ2xvYmFsLlJlc3BvbnNlID0gUmVzcG9uc2U7XG4gIGdsb2JhbC5IZWFkZXJzID0gSGVhZGVycztcbn1cbiJdLCJuYW1lcyI6WyJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJORVhUQVVUSF9TRUNSRVQiLCJORVhUQVVUSF9VUkwiLCJQUklWQUNZX1BFUFBFUl9ERVYiLCJQUklWQUNZX1BFUFBFUl9DVVJSRU5UIiwicmVwZWF0IiwiUFJJVkFDWV9QRVBQRVJfUFJFVklPVVMiLCJnbG9iYWwiLCJUZXh0RW5jb2RlciIsIlRleHREZWNvZGVyIiwicmVxdWlyZSIsIlJlcXVlc3QiLCJSZXNwb25zZSIsIkhlYWRlcnMiXSwibWFwcGluZ3MiOiJBQUFBLG9FQUFvRTs7QUFDcEVBLFFBQVFDLEdBQUcsQ0FBQ0MsUUFBUSxHQUFHO0FBQ3ZCRixRQUFRQyxHQUFHLENBQUNFLHdCQUF3QixHQUFHO0FBQ3ZDSCxRQUFRQyxHQUFHLENBQUNHLDZCQUE2QixHQUFHO0FBQzVDSixRQUFRQyxHQUFHLENBQUNJLHlCQUF5QixHQUFHO0FBQ3hDTCxRQUFRQyxHQUFHLENBQUNLLGVBQWUsR0FBRztBQUM5Qk4sUUFBUUMsR0FBRyxDQUFDTSxZQUFZLEdBQUc7QUFFM0IsMERBQTBEO0FBQzFEUCxRQUFRQyxHQUFHLENBQUNPLGtCQUFrQixHQUFHO0FBQ2pDUixRQUFRQyxHQUFHLENBQUNRLHNCQUFzQixHQUFHLFNBQVMsS0FBS0MsTUFBTSxDQUFDO0FBQzFEVixRQUFRQyxHQUFHLENBQUNVLHVCQUF1QixHQUFHLFNBQVMsS0FBS0QsTUFBTSxDQUFDO0FBRTNELCtDQUErQztBQUMvQyxJQUFJLE9BQU9FLE9BQU9DLFdBQVcsS0FBSyxhQUFhO0lBQzdDLE1BQU0sRUFBRUEsV0FBVyxFQUFFQyxXQUFXLEVBQUUsR0FBR0MsUUFBUTtJQUM3Q0gsT0FBT0MsV0FBVyxHQUFHQTtJQUNyQkQsT0FBT0UsV0FBVyxHQUFHQTtBQUN2QjtBQUVBLElBQUksT0FBT0YsT0FBT0ksT0FBTyxLQUFLLGFBQWE7SUFDekMsTUFBTSxFQUFFQSxPQUFPLEVBQUVDLFFBQVEsRUFBRUMsT0FBTyxFQUFFLEdBQUdILFFBQVE7SUFDL0NILE9BQU9JLE9BQU8sR0FBR0E7SUFDakJKLE9BQU9LLFFBQVEsR0FBR0E7SUFDbEJMLE9BQU9NLE9BQU8sR0FBR0E7QUFDbkIifQ==