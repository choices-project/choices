{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/jest.setup.js"],"sourcesContent":["// Set up test environment variables FIRST, before any other imports\nprocess.env.NODE_ENV = 'test';\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\nprocess.env.SUPABASE_SERVICE_ROLE_KEY = 'test-service-role-key';\nprocess.env.NEXTAUTH_SECRET = 'test-secret';\nprocess.env.NEXTAUTH_URL = 'http://localhost:3000';\n\n// Set up privacy pepper environment variables for testing\nprocess.env.PRIVACY_PEPPER_DEV = 'dev-pepper-consistent-for-testing-12345678901234567890';\nprocess.env.PRIVACY_PEPPER_CURRENT = 'hex:' + 'ab'.repeat(32);\nprocess.env.PRIVACY_PEPPER_PREVIOUS = 'hex:' + 'cd'.repeat(32);\n\n// Polyfill for Web APIs in Node.js environment\nif (typeof global.TextEncoder === 'undefined') {\n  const { TextEncoder, TextDecoder } = require('util');\n  global.TextEncoder = TextEncoder;\n  global.TextDecoder = TextDecoder;\n}\n\n// Simple Request polyfill for testing\nif (typeof global.Request === 'undefined') {\n  global.Request = class Request {\n    constructor(url, options = {}) {\n      this.url = url;\n      this.method = options.method || 'GET';\n      this.headers = new Map();\n      if (options.headers) {\n        Object.entries(options.headers).forEach(([key, value]) => {\n          this.headers.set(key.toLowerCase(), value);\n        });\n      }\n      this.body = options.body;\n    }\n    \n    async json() {\n      return JSON.parse(this.body || '{}');\n    }\n  };\n}\n\n// Simple Response polyfill for testing\nif (typeof global.Response === 'undefined') {\n  global.Response = class Response {\n    constructor(body, options = {}) {\n      this.body = body;\n      this.status = options.status || 200;\n      this.statusText = options.statusText || 'OK';\n      this.headers = new Map();\n      if (options.headers) {\n        Object.entries(options.headers).forEach(([key, value]) => {\n          this.headers.set(key.toLowerCase(), value);\n        });\n      }\n    }\n    \n    async json() {\n      return JSON.parse(this.body || '{}');\n    }\n  };\n}\n\n// Simple Headers polyfill for testing\nif (typeof global.Headers === 'undefined') {\n  global.Headers = class Headers {\n    constructor(init = {}) {\n      this.map = new Map();\n      if (init) {\n        Object.entries(init).forEach(([key, value]) => {\n          this.map.set(key.toLowerCase(), value);\n        });\n      }\n    }\n    \n    get(name) {\n      return this.map.get(name.toLowerCase());\n    }\n    \n    set(name, value) {\n      this.map.set(name.toLowerCase(), value);\n    }\n    \n    has(name) {\n      return this.map.has(name.toLowerCase());\n    }\n  };\n}\n"],"names":["process","env","NODE_ENV","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","SUPABASE_SERVICE_ROLE_KEY","NEXTAUTH_SECRET","NEXTAUTH_URL","PRIVACY_PEPPER_DEV","PRIVACY_PEPPER_CURRENT","repeat","PRIVACY_PEPPER_PREVIOUS","global","TextEncoder","TextDecoder","require","Request","constructor","url","options","method","headers","Map","Object","entries","forEach","key","value","set","toLowerCase","body","json","JSON","parse","Response","status","statusText","Headers","init","map","get","name","has"],"mappings":"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"}