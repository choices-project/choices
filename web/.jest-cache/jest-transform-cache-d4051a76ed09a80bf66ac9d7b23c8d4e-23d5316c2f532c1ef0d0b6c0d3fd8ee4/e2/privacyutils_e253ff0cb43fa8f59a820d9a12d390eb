c49cd7e775a9f45da6271c0bcf7fbd79
/**
 * Privacy utilities for civics address lookup system
 * Feature Flag: CIVICS_ADDRESS_LOOKUP (disabled by default)
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    bucketIsKAnonymous: function() {
        return bucketIsKAnonymous;
    },
    generateAddressHMAC: function() {
        return generateAddressHMAC;
    },
    generateIPHMAC: function() {
        return generateIPHMAC;
    },
    generatePlaceIdHMAC: function() {
        return generatePlaceIdHMAC;
    },
    generateRequestId: function() {
        return generateRequestId;
    },
    geohashWithJitter: function() {
        return geohashWithJitter;
    },
    hmac256: function() {
        return hmac256;
    },
    isCivicsEnabled: function() {
        return isCivicsEnabled;
    },
    normalizeAddress: function() {
        return normalizeAddress;
    },
    readJurisdictionCookie: function() {
        return readJurisdictionCookie;
    },
    setJurisdictionCookie: function() {
        return setJurisdictionCookie;
    },
    validateAddressInput: function() {
        return validateAddressInput;
    },
    verifyHmacDigest: function() {
        return verifyHmacDigest;
    }
});
const _crypto = /*#__PURE__*/ _interop_require_default(require("crypto"));
const _headers = require("next/headers");
const _featureflags = require("../../../../lib/core/feature-flags");
const _envguard = require("./env-guard");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function decodePepper(v) {
    const s = v.trim();
    if (s.startsWith("base64:")) return Buffer.from(s.slice(7), "base64");
    if (s.startsWith("hex:")) return Buffer.from(s.slice(4), "hex");
    return Buffer.from(s, "utf8");
}
function loadPeppers() {
    const env = process.env.NODE_ENV;
    const isDev = env === "development" || env === "test";
    if (isDev) {
        const dv = process.env.PRIVACY_PEPPER_DEV;
        if (!dv) throw new Error("PRIVACY_PEPPER_DEV required in development/test");
        return [
            {
                raw: decodePepper(dv),
                source: "DEV"
            }
        ];
    }
    if (!process.env.PRIVACY_PEPPER_CURRENT) throw new Error("PRIVACY_PEPPER_CURRENT required");
    const peppers = [
        {
            raw: decodePepper(process.env.PRIVACY_PEPPER_CURRENT),
            source: "CURRENT"
        }
    ];
    if (process.env.PRIVACY_PEPPER_PREVIOUS) {
        peppers.push({
            raw: decodePepper(process.env.PRIVACY_PEPPER_PREVIOUS),
            source: "PREVIOUS"
        });
    }
    peppers.forEach((p)=>{
        if (p.source !== "DEV" && p.raw.length < 32) {
            throw new Error(`${p.source} pepper must be ≥32 bytes`);
        }
    });
    return peppers;
}
// Lazy-load peppers to avoid crashes during test imports
let PEPPERS = null;
function getPeppers() {
    if (PEPPERS === null) {
        (0, _envguard.assertPepperConfig)();
        PEPPERS = loadPeppers();
    }
    return PEPPERS;
}
function hmacRaw(data, scope, pepper) {
    const h = _crypto.default.createHmac("sha256", Buffer.concat([
        pepper,
        Buffer.from(`:${scope}`)
    ]));
    h.update(data);
    return h.digest();
}
function hmac256(data, scope) {
    // Issue with CURRENT (or DEV)
    const peppers = getPeppers();
    const first = peppers[0];
    if (!first) throw new Error("No peppers configured");
    const digest = hmacRaw(data, scope, first.raw).toString("hex");
    return {
        hex: digest,
        used: first.source
    };
}
function verifyHmacDigest(plain, scope, presentedHex) {
    const presented = Buffer.from(presentedHex, "hex");
    const peppers = getPeppers();
    for (const p of peppers){
        const cand = hmacRaw(plain, scope, p.raw);
        if (presented.length === cand.length && _crypto.default.timingSafeEqual(presented, cand)) {
            return true;
        }
    }
    return false;
}
const normalizeAddress = (a)=>a.trim().toLowerCase().replace(/\./g, "").replace(/\s+/g, " ").replace(/\b(street|st|road|rd|avenue|ave|boulevard|blvd)\b/g, (m)=>({
            street: "st",
            st: "st",
            road: "rd",
            rd: "rd",
            avenue: "ave",
            ave: "ave",
            boulevard: "blvd",
            blvd: "blvd"
        })[m]);
const generateAddressHMAC = (address)=>hmac256(normalizeAddress(address), "addr").hex;
const generatePlaceIdHMAC = (placeId)=>hmac256(placeId, "place").hex;
const generateIPHMAC = (ip)=>hmac256(ip, "ip").hex;
// --- Geoprivacy helpers ---
function simpleGeohash(lat, lng, precision) {
    // Production-ready geohash implementation
    // Uses proper geohash algorithm for privacy-preserving location hashing
    const latRange = [
        -90,
        90
    ];
    const lngRange = [
        -180,
        180
    ];
    let latMin = latRange[0] ?? -90;
    let latMax = latRange[1] ?? 90;
    let lngMin = lngRange[0] ?? -180;
    let lngMax = lngRange[1] ?? 180;
    let bits = 0;
    let bit = 0;
    let ch = 0;
    let even = true;
    const base32 = "0123456789bcdefghjkmnpqrstuvwxyz";
    let result = "";
    while(bits < precision * 5){
        if (even) {
            const lngMid = (lngMin + lngMax) / 2;
            if (lng >= lngMid) {
                ch |= 1 << 4 - bit;
                lngMin = lngMid;
            } else {
                lngMax = lngMid;
            }
        } else {
            const latMid = (latMin + latMax) / 2;
            if (lat >= latMid) {
                ch |= 1 << 4 - bit;
                latMin = latMid;
            } else {
                latMax = latMid;
            }
        }
        even = !even;
        if (bit < 4) {
            bit++;
        } else {
            result += base32[ch];
            bits++;
            bit = 0;
            ch = 0;
        }
    }
    return result;
}
function geohashWithJitter(lat, lng, precision, requestId) {
    const seed = _crypto.default.createHash("sha256").update(requestId).digest();
    const j = ((seed[0] || 0) - 128) / 12800; // ≈ ±1% deterministic jitter per request
    return simpleGeohash(lat + j, lng + j, precision);
}
const bucketIsKAnonymous = (bucketCount, k = 25)=>bucketCount >= k;
// --- Cookie helpers for jurisdiction scoping ---
const COOKIE_NAME = "cx_jurisdictions";
async function setJurisdictionCookie(payload) {
    // Minimal sealed cookie using a signed value. Replace with iron-session/jose if you prefer AEAD.
    const secret = process.env.SESSION_SECRET ?? "dev-session-secret-not-for-prod";
    const body = JSON.stringify(Object.assign({}, payload, {
        v: 1,
        iat: Date.now()
    }));
    const sig = _crypto.default.createHmac("sha256", secret).update(body).digest("hex");
    const value = Buffer.from(JSON.stringify({
        body,
        sig
    })).toString("base64url");
    (0, _headers.cookies)().set({
        name: COOKIE_NAME,
        value,
        httpOnly: true,
        sameSite: "lax",
        secure: true,
        path: "/",
        maxAge: 60 * 60 * 24 * 7
    });
}
function readJurisdictionCookie() {
    const secret = process.env.SESSION_SECRET ?? "dev-session-secret-not-for-prod";
    const raw = (0, _headers.cookies)().get(COOKIE_NAME)?.value;
    if (!raw) return null;
    try {
        const { body, sig } = JSON.parse(Buffer.from(raw, "base64url").toString());
        const check = _crypto.default.createHmac("sha256", secret).update(body).digest("hex");
        if (!_crypto.default.timingSafeEqual(Buffer.from(sig), Buffer.from(check))) return null;
        const parsed = JSON.parse(body);
        return {
            state: parsed.state,
            district: parsed.district,
            county: parsed.county
        };
    } catch  {
        return null;
    }
}
function validateAddressInput(address) {
    if (!(0, _featureflags.isFeatureEnabled)("CIVICS_ADDRESS_LOOKUP")) {
        return {
            valid: false,
            error: "Feature disabled"
        };
    }
    if (!address || typeof address !== "string") {
        return {
            valid: false,
            error: "Address is required"
        };
    }
    if (address.length > 500) {
        return {
            valid: false,
            error: "Address too long"
        };
    }
    if (address.length < 5) {
        return {
            valid: false,
            error: "Address too short"
        };
    }
    // Basic character validation (allow letters, numbers, spaces, common punctuation)
    if (!/^[a-zA-Z0-9\s\.,\-#]+$/.test(address)) {
        return {
            valid: false,
            error: "Invalid characters in address"
        };
    }
    return {
        valid: true
    };
}
function isCivicsEnabled() {
    return (0, _featureflags.isFeatureEnabled)("CIVICS_ADDRESS_LOOKUP");
}
function generateRequestId() {
    if (!(0, _featureflags.isFeatureEnabled)("CIVICS_ADDRESS_LOOKUP")) {
        throw new Error("Civics address lookup feature is disabled");
    }
    return _crypto.default.randomUUID();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9jaXZpY3MvbGliL2Npdmljcy9wcml2YWN5LXV0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJpdmFjeSB1dGlsaXRpZXMgZm9yIGNpdmljcyBhZGRyZXNzIGxvb2t1cCBzeXN0ZW1cbiAqIEZlYXR1cmUgRmxhZzogQ0lWSUNTX0FERFJFU1NfTE9PS1VQIChkaXNhYmxlZCBieSBkZWZhdWx0KVxuICovXG5cbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5cbmltcG9ydCB7IGlzRmVhdHVyZUVuYWJsZWQgfSBmcm9tICdAL2xpYi9jb3JlL2ZlYXR1cmUtZmxhZ3MnO1xuXG5pbXBvcnQgeyBhc3NlcnRQZXBwZXJDb25maWcgfSBmcm9tICcuL2Vudi1ndWFyZCc7XG5cbnR5cGUgU2NvcGUgPSAnYWRkcicgfCAncGxhY2UnIHwgJ2lwJztcbmludGVyZmFjZSBFbmNvZGVkUGVwcGVyIHsgcmF3OiBCdWZmZXI7IHNvdXJjZTogJ0RFVicgfCAnQ1VSUkVOVCcgfCAnUFJFVklPVVMnIH1cblxuZnVuY3Rpb24gZGVjb2RlUGVwcGVyKHY6IHN0cmluZyk6IEJ1ZmZlciB7XG4gIGNvbnN0IHMgPSB2LnRyaW0oKTtcbiAgaWYgKHMuc3RhcnRzV2l0aCgnYmFzZTY0OicpKSByZXR1cm4gQnVmZmVyLmZyb20ocy5zbGljZSg3KSwgJ2Jhc2U2NCcpO1xuICBpZiAocy5zdGFydHNXaXRoKCdoZXg6JykpIHJldHVybiBCdWZmZXIuZnJvbShzLnNsaWNlKDQpLCAnaGV4Jyk7XG4gIHJldHVybiBCdWZmZXIuZnJvbShzLCAndXRmOCcpO1xufVxuXG5mdW5jdGlvbiBsb2FkUGVwcGVycygpOiBFbmNvZGVkUGVwcGVyW10ge1xuICBjb25zdCBlbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcbiAgY29uc3QgaXNEZXYgPSBlbnYgPT09ICdkZXZlbG9wbWVudCcgfHwgZW52ID09PSAndGVzdCc7XG5cbiAgaWYgKGlzRGV2KSB7XG4gICAgY29uc3QgZHYgPSBwcm9jZXNzLmVudi5QUklWQUNZX1BFUFBFUl9ERVY7XG4gICAgaWYgKCFkdikgdGhyb3cgbmV3IEVycm9yKCdQUklWQUNZX1BFUFBFUl9ERVYgcmVxdWlyZWQgaW4gZGV2ZWxvcG1lbnQvdGVzdCcpO1xuICAgIHJldHVybiBbeyByYXc6IGRlY29kZVBlcHBlcihkdiksIHNvdXJjZTogJ0RFVicgfV07XG4gIH1cbiAgaWYgKCFwcm9jZXNzLmVudi5QUklWQUNZX1BFUFBFUl9DVVJSRU5UKSB0aHJvdyBuZXcgRXJyb3IoJ1BSSVZBQ1lfUEVQUEVSX0NVUlJFTlQgcmVxdWlyZWQnKTtcbiAgY29uc3QgcGVwcGVyczogRW5jb2RlZFBlcHBlcltdID0gW1xuICAgIHsgcmF3OiBkZWNvZGVQZXBwZXIocHJvY2Vzcy5lbnYuUFJJVkFDWV9QRVBQRVJfQ1VSUkVOVCksIHNvdXJjZTogJ0NVUlJFTlQnIH0sXG4gIF07XG4gIGlmIChwcm9jZXNzLmVudi5QUklWQUNZX1BFUFBFUl9QUkVWSU9VUykge1xuICAgIHBlcHBlcnMucHVzaCh7IHJhdzogZGVjb2RlUGVwcGVyKHByb2Nlc3MuZW52LlBSSVZBQ1lfUEVQUEVSX1BSRVZJT1VTKSwgc291cmNlOiAnUFJFVklPVVMnIH0pO1xuICB9XG4gIHBlcHBlcnMuZm9yRWFjaChwID0+IHtcbiAgICBpZiAocC5zb3VyY2UgIT09ICdERVYnICYmIHAucmF3Lmxlbmd0aCA8IDMyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cC5zb3VyY2V9IHBlcHBlciBtdXN0IGJlIOKJpTMyIGJ5dGVzYCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHBlcHBlcnM7XG59XG5cbi8vIExhenktbG9hZCBwZXBwZXJzIHRvIGF2b2lkIGNyYXNoZXMgZHVyaW5nIHRlc3QgaW1wb3J0c1xubGV0IFBFUFBFUlM6IEVuY29kZWRQZXBwZXJbXSB8IG51bGwgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXRQZXBwZXJzKCk6IEVuY29kZWRQZXBwZXJbXSB7XG4gIGlmIChQRVBQRVJTID09PSBudWxsKSB7XG4gICAgYXNzZXJ0UGVwcGVyQ29uZmlnKCk7XG4gICAgUEVQUEVSUyA9IGxvYWRQZXBwZXJzKCk7XG4gIH1cbiAgcmV0dXJuIFBFUFBFUlM7XG59XG5cbmZ1bmN0aW9uIGhtYWNSYXcoZGF0YTogc3RyaW5nLCBzY29wZTogU2NvcGUsIHBlcHBlcjogQnVmZmVyKTogQnVmZmVyIHtcbiAgY29uc3QgaCA9IGNyeXB0by5jcmVhdGVIbWFjKCdzaGEyNTYnLCBCdWZmZXIuY29uY2F0KFtwZXBwZXIsIEJ1ZmZlci5mcm9tKGA6JHtzY29wZX1gKV0pKTtcbiAgaC51cGRhdGUoZGF0YSk7XG4gIHJldHVybiBoLmRpZ2VzdCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaG1hYzI1NihkYXRhOiBzdHJpbmcsIHNjb3BlOiBTY29wZSk6IHsgaGV4OiBzdHJpbmc7IHVzZWQ6IEVuY29kZWRQZXBwZXJbJ3NvdXJjZSddIH0ge1xuICAvLyBJc3N1ZSB3aXRoIENVUlJFTlQgKG9yIERFVilcbiAgY29uc3QgcGVwcGVycyA9IGdldFBlcHBlcnMoKTtcbiAgY29uc3QgZmlyc3QgPSBwZXBwZXJzWzBdO1xuICBpZiAoIWZpcnN0KSB0aHJvdyBuZXcgRXJyb3IoJ05vIHBlcHBlcnMgY29uZmlndXJlZCcpO1xuICBjb25zdCBkaWdlc3QgPSBobWFjUmF3KGRhdGEsIHNjb3BlLCBmaXJzdC5yYXcpLnRvU3RyaW5nKCdoZXgnKTtcbiAgcmV0dXJuIHsgaGV4OiBkaWdlc3QsIHVzZWQ6IGZpcnN0LnNvdXJjZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5SG1hY0RpZ2VzdChwbGFpbjogc3RyaW5nLCBzY29wZTogU2NvcGUsIHByZXNlbnRlZEhleDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IHByZXNlbnRlZCA9IEJ1ZmZlci5mcm9tKHByZXNlbnRlZEhleCwgJ2hleCcpO1xuICBjb25zdCBwZXBwZXJzID0gZ2V0UGVwcGVycygpO1xuICBmb3IgKGNvbnN0IHAgb2YgcGVwcGVycykge1xuICAgIGNvbnN0IGNhbmQgPSBobWFjUmF3KHBsYWluLCBzY29wZSwgcC5yYXcpO1xuICAgIGlmIChwcmVzZW50ZWQubGVuZ3RoID09PSBjYW5kLmxlbmd0aCAmJiBjcnlwdG8udGltaW5nU2FmZUVxdWFsKHByZXNlbnRlZCwgY2FuZCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBjb25zdCBub3JtYWxpemVBZGRyZXNzID0gKGE6IHN0cmluZykgPT5cbiAgYS50cmltKCkudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9cXC4vZywgJycpXG4gICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgIC5yZXBsYWNlKC9cXGIoc3RyZWV0fHN0fHJvYWR8cmR8YXZlbnVlfGF2ZXxib3VsZXZhcmR8Ymx2ZClcXGIvZywgbSA9PlxuICAgICAgKHsgc3RyZWV0OiAnc3QnLCBzdDogJ3N0Jywgcm9hZDogJ3JkJywgcmQ6ICdyZCcsIGF2ZW51ZTogJ2F2ZScsIGF2ZTogJ2F2ZScsIGJvdWxldmFyZDogJ2JsdmQnLCBibHZkOiAnYmx2ZCcgfSBhcyBhbnkpW21dXG4gICAgKTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlQWRkcmVzc0hNQUMgPSAoYWRkcmVzczogc3RyaW5nKSA9PiBobWFjMjU2KG5vcm1hbGl6ZUFkZHJlc3MoYWRkcmVzcyksICdhZGRyJykuaGV4O1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRlUGxhY2VJZEhNQUMgPSAocGxhY2VJZDogc3RyaW5nKSA9PiBobWFjMjU2KHBsYWNlSWQsICdwbGFjZScpLmhleDtcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUlQSE1BQyA9IChpcDogc3RyaW5nKSA9PiBobWFjMjU2KGlwLCAnaXAnKS5oZXg7XG5cbi8vIC0tLSBHZW9wcml2YWN5IGhlbHBlcnMgLS0tXG5mdW5jdGlvbiBzaW1wbGVHZW9oYXNoKGxhdDogbnVtYmVyLCBsbmc6IG51bWJlciwgcHJlY2lzaW9uOiA1IHwgNiB8IDcpOiBzdHJpbmcge1xuICAvLyBQcm9kdWN0aW9uLXJlYWR5IGdlb2hhc2ggaW1wbGVtZW50YXRpb25cbiAgLy8gVXNlcyBwcm9wZXIgZ2VvaGFzaCBhbGdvcml0aG0gZm9yIHByaXZhY3ktcHJlc2VydmluZyBsb2NhdGlvbiBoYXNoaW5nXG4gIGNvbnN0IGxhdFJhbmdlID0gWy05MCwgOTBdO1xuICBjb25zdCBsbmdSYW5nZSA9IFstMTgwLCAxODBdO1xuICBcbiAgbGV0IGxhdE1pbjogbnVtYmVyID0gbGF0UmFuZ2VbMF0gPz8gLTkwO1xuICBsZXQgbGF0TWF4OiBudW1iZXIgPSBsYXRSYW5nZVsxXSA/PyA5MDtcbiAgbGV0IGxuZ01pbjogbnVtYmVyID0gbG5nUmFuZ2VbMF0gPz8gLTE4MDtcbiAgbGV0IGxuZ01heDogbnVtYmVyID0gbG5nUmFuZ2VbMV0gPz8gMTgwO1xuICBcbiAgbGV0IGJpdHMgPSAwO1xuICBsZXQgYml0ID0gMDtcbiAgbGV0IGNoID0gMDtcbiAgbGV0IGV2ZW4gPSB0cnVlO1xuICBcbiAgY29uc3QgYmFzZTMyID0gJzAxMjM0NTY3ODliY2RlZmdoamttbnBxcnN0dXZ3eHl6JztcbiAgbGV0IHJlc3VsdCA9ICcnO1xuICBcbiAgd2hpbGUgKGJpdHMgPCBwcmVjaXNpb24gKiA1KSB7XG4gICAgaWYgKGV2ZW4pIHtcbiAgICAgIGNvbnN0IGxuZ01pZCA9IChsbmdNaW4gKyBsbmdNYXgpIC8gMjtcbiAgICAgIGlmIChsbmcgPj0gbG5nTWlkKSB7XG4gICAgICAgIGNoIHw9ICgxIDw8ICg0IC0gYml0KSk7XG4gICAgICAgIGxuZ01pbiA9IGxuZ01pZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxuZ01heCA9IGxuZ01pZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGF0TWlkID0gKGxhdE1pbiArIGxhdE1heCkgLyAyO1xuICAgICAgaWYgKGxhdCA+PSBsYXRNaWQpIHtcbiAgICAgICAgY2ggfD0gKDEgPDwgKDQgLSBiaXQpKTtcbiAgICAgICAgbGF0TWluID0gbGF0TWlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGF0TWF4ID0gbGF0TWlkO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBldmVuID0gIWV2ZW47XG4gICAgaWYgKGJpdCA8IDQpIHtcbiAgICAgIGJpdCsrO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgKz0gYmFzZTMyW2NoXTtcbiAgICAgIGJpdHMrKztcbiAgICAgIGJpdCA9IDA7XG4gICAgICBjaCA9IDA7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VvaGFzaFdpdGhKaXR0ZXIoXG4gIGxhdDogbnVtYmVyLCBcbiAgbG5nOiBudW1iZXIsIFxuICBwcmVjaXNpb246IDUgfCA2IHwgNyxcbiAgcmVxdWVzdElkOiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGNvbnN0IHNlZWQgPSBjcnlwdG8uY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKHJlcXVlc3RJZCkuZGlnZXN0KCk7XG4gIGNvbnN0IGogPSAoKHNlZWRbMF0gfHwgMCkgLSAxMjgpIC8gMTI4MDA7IC8vIOKJiCDCsTElIGRldGVybWluaXN0aWMgaml0dGVyIHBlciByZXF1ZXN0XG4gIHJldHVybiBzaW1wbGVHZW9oYXNoKGxhdCArIGosIGxuZyArIGosIHByZWNpc2lvbik7XG59XG5cbmV4cG9ydCBjb25zdCBidWNrZXRJc0tBbm9ueW1vdXMgPSAoYnVja2V0Q291bnQ6IG51bWJlciwgayA9IDI1KSA9PiBidWNrZXRDb3VudCA+PSBrO1xuXG4vLyAtLS0gQ29va2llIGhlbHBlcnMgZm9yIGp1cmlzZGljdGlvbiBzY29waW5nIC0tLVxuY29uc3QgQ09PS0lFX05BTUUgPSAnY3hfanVyaXNkaWN0aW9ucyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRKdXJpc2RpY3Rpb25Db29raWUocGF5bG9hZDogeyBzdGF0ZT86IHN0cmluZzsgZGlzdHJpY3Q/OiBzdHJpbmc7IGNvdW50eT86IHN0cmluZyB9KSB7XG4gIC8vIE1pbmltYWwgc2VhbGVkIGNvb2tpZSB1c2luZyBhIHNpZ25lZCB2YWx1ZS4gUmVwbGFjZSB3aXRoIGlyb24tc2Vzc2lvbi9qb3NlIGlmIHlvdSBwcmVmZXIgQUVBRC5cbiAgY29uc3Qgc2VjcmV0ID0gcHJvY2Vzcy5lbnYuU0VTU0lPTl9TRUNSRVQgPz8gJ2Rldi1zZXNzaW9uLXNlY3JldC1ub3QtZm9yLXByb2QnO1xuICBjb25zdCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbih7fSwgcGF5bG9hZCwgeyB2OiAxLCBpYXQ6IERhdGUubm93KCkgfSkpO1xuICBjb25zdCBzaWcgPSBjcnlwdG8uY3JlYXRlSG1hYygnc2hhMjU2Jywgc2VjcmV0KS51cGRhdGUoYm9keSkuZGlnZXN0KCdoZXgnKTtcbiAgY29uc3QgdmFsdWUgPSBCdWZmZXIuZnJvbShKU09OLnN0cmluZ2lmeSh7IGJvZHksIHNpZyB9KSkudG9TdHJpbmcoJ2Jhc2U2NHVybCcpO1xuXG4gIGNvb2tpZXMoKS5zZXQoe1xuICAgIG5hbWU6IENPT0tJRV9OQU1FLFxuICAgIHZhbHVlLFxuICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICBzZWN1cmU6IHRydWUsXG4gICAgcGF0aDogJy8nLFxuICAgIG1heEFnZTogNjAgKiA2MCAqIDI0ICogN1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRKdXJpc2RpY3Rpb25Db29raWUoKTogeyBzdGF0ZT86IHN0cmluZzsgZGlzdHJpY3Q/OiBzdHJpbmc7IGNvdW50eT86IHN0cmluZyB9IHwgbnVsbCB7XG4gIGNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LlNFU1NJT05fU0VDUkVUID8/ICdkZXYtc2Vzc2lvbi1zZWNyZXQtbm90LWZvci1wcm9kJztcbiAgY29uc3QgcmF3ID0gY29va2llcygpLmdldChDT09LSUVfTkFNRSk/LnZhbHVlO1xuICBpZiAoIXJhdykgcmV0dXJuIG51bGw7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBib2R5LCBzaWcgfSA9IEpTT04ucGFyc2UoQnVmZmVyLmZyb20ocmF3LCAnYmFzZTY0dXJsJykudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgY2hlY2sgPSBjcnlwdG8uY3JlYXRlSG1hYygnc2hhMjU2Jywgc2VjcmV0KS51cGRhdGUoYm9keSkuZGlnZXN0KCdoZXgnKTtcbiAgICBpZiAoIWNyeXB0by50aW1pbmdTYWZlRXF1YWwoQnVmZmVyLmZyb20oc2lnKSwgQnVmZmVyLmZyb20oY2hlY2spKSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShib2R5KTtcbiAgICByZXR1cm4geyBzdGF0ZTogcGFyc2VkLnN0YXRlLCBkaXN0cmljdDogcGFyc2VkLmRpc3RyaWN0LCBjb3VudHk6IHBhcnNlZC5jb3VudHkgfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBhZGRyZXNzIGlucHV0IGZvciBEb1MgcHJvdGVjdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBZGRyZXNzSW5wdXQoYWRkcmVzczogc3RyaW5nKTogeyB2YWxpZDogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfSB7XG4gIGlmICghaXNGZWF0dXJlRW5hYmxlZCgnQ0lWSUNTX0FERFJFU1NfTE9PS1VQJykpIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnRmVhdHVyZSBkaXNhYmxlZCcgfTtcbiAgfVxuICBcbiAgaWYgKCFhZGRyZXNzIHx8IHR5cGVvZiBhZGRyZXNzICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdBZGRyZXNzIGlzIHJlcXVpcmVkJyB9O1xuICB9XG4gIFxuICBpZiAoYWRkcmVzcy5sZW5ndGggPiA1MDApIHtcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yOiAnQWRkcmVzcyB0b28gbG9uZycgfTtcbiAgfVxuICBcbiAgaWYgKGFkZHJlc3MubGVuZ3RoIDwgNSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdBZGRyZXNzIHRvbyBzaG9ydCcgfTtcbiAgfVxuICBcbiAgLy8gQmFzaWMgY2hhcmFjdGVyIHZhbGlkYXRpb24gKGFsbG93IGxldHRlcnMsIG51bWJlcnMsIHNwYWNlcywgY29tbW9uIHB1bmN0dWF0aW9uKVxuICBpZiAoIS9eW2EtekEtWjAtOVxcc1xcLixcXC0jXSskLy50ZXN0KGFkZHJlc3MpKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0ludmFsaWQgY2hhcmFjdGVycyBpbiBhZGRyZXNzJyB9O1xuICB9XG4gIFxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGNpdmljcyBmZWF0dXJlIGlzIGVuYWJsZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2l2aWNzRW5hYmxlZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuIGlzRmVhdHVyZUVuYWJsZWQoJ0NJVklDU19BRERSRVNTX0xPT0tVUCcpO1xufVxuXG4vKipcbiAqIFByaXZhY3ktc2FmZSByZXF1ZXN0IElEIGdlbmVyYXRvclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSZXF1ZXN0SWQoKTogc3RyaW5nIHtcbiAgaWYgKCFpc0ZlYXR1cmVFbmFibGVkKCdDSVZJQ1NfQUREUkVTU19MT09LVVAnKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2l2aWNzIGFkZHJlc3MgbG9va3VwIGZlYXR1cmUgaXMgZGlzYWJsZWQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIGNyeXB0by5yYW5kb21VVUlEKCk7XG59XG4iXSwibmFtZXMiOlsiYnVja2V0SXNLQW5vbnltb3VzIiwiZ2VuZXJhdGVBZGRyZXNzSE1BQyIsImdlbmVyYXRlSVBITUFDIiwiZ2VuZXJhdGVQbGFjZUlkSE1BQyIsImdlbmVyYXRlUmVxdWVzdElkIiwiZ2VvaGFzaFdpdGhKaXR0ZXIiLCJobWFjMjU2IiwiaXNDaXZpY3NFbmFibGVkIiwibm9ybWFsaXplQWRkcmVzcyIsInJlYWRKdXJpc2RpY3Rpb25Db29raWUiLCJzZXRKdXJpc2RpY3Rpb25Db29raWUiLCJ2YWxpZGF0ZUFkZHJlc3NJbnB1dCIsInZlcmlmeUhtYWNEaWdlc3QiLCJkZWNvZGVQZXBwZXIiLCJ2IiwicyIsInRyaW0iLCJzdGFydHNXaXRoIiwiQnVmZmVyIiwiZnJvbSIsInNsaWNlIiwibG9hZFBlcHBlcnMiLCJlbnYiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJpc0RldiIsImR2IiwiUFJJVkFDWV9QRVBQRVJfREVWIiwiRXJyb3IiLCJyYXciLCJzb3VyY2UiLCJQUklWQUNZX1BFUFBFUl9DVVJSRU5UIiwicGVwcGVycyIsIlBSSVZBQ1lfUEVQUEVSX1BSRVZJT1VTIiwicHVzaCIsImZvckVhY2giLCJwIiwibGVuZ3RoIiwiUEVQUEVSUyIsImdldFBlcHBlcnMiLCJhc3NlcnRQZXBwZXJDb25maWciLCJobWFjUmF3IiwiZGF0YSIsInNjb3BlIiwicGVwcGVyIiwiaCIsImNyeXB0byIsImNyZWF0ZUhtYWMiLCJjb25jYXQiLCJ1cGRhdGUiLCJkaWdlc3QiLCJmaXJzdCIsInRvU3RyaW5nIiwiaGV4IiwidXNlZCIsInBsYWluIiwicHJlc2VudGVkSGV4IiwicHJlc2VudGVkIiwiY2FuZCIsInRpbWluZ1NhZmVFcXVhbCIsImEiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJtIiwic3RyZWV0Iiwic3QiLCJyb2FkIiwicmQiLCJhdmVudWUiLCJhdmUiLCJib3VsZXZhcmQiLCJibHZkIiwiYWRkcmVzcyIsInBsYWNlSWQiLCJpcCIsInNpbXBsZUdlb2hhc2giLCJsYXQiLCJsbmciLCJwcmVjaXNpb24iLCJsYXRSYW5nZSIsImxuZ1JhbmdlIiwibGF0TWluIiwibGF0TWF4IiwibG5nTWluIiwibG5nTWF4IiwiYml0cyIsImJpdCIsImNoIiwiZXZlbiIsImJhc2UzMiIsInJlc3VsdCIsImxuZ01pZCIsImxhdE1pZCIsInJlcXVlc3RJZCIsInNlZWQiLCJjcmVhdGVIYXNoIiwiaiIsImJ1Y2tldENvdW50IiwiayIsIkNPT0tJRV9OQU1FIiwicGF5bG9hZCIsInNlY3JldCIsIlNFU1NJT05fU0VDUkVUIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJPYmplY3QiLCJhc3NpZ24iLCJpYXQiLCJEYXRlIiwibm93Iiwic2lnIiwidmFsdWUiLCJjb29raWVzIiwic2V0IiwibmFtZSIsImh0dHBPbmx5Iiwic2FtZVNpdGUiLCJzZWN1cmUiLCJwYXRoIiwibWF4QWdlIiwiZ2V0IiwicGFyc2UiLCJjaGVjayIsInBhcnNlZCIsInN0YXRlIiwiZGlzdHJpY3QiLCJjb3VudHkiLCJpc0ZlYXR1cmVFbmFibGVkIiwidmFsaWQiLCJlcnJvciIsInRlc3QiLCJyYW5kb21VVUlEIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7Ozs7Ozs7Ozs7O0lBOEpZQSxrQkFBa0I7ZUFBbEJBOztJQXBFQUMsbUJBQW1CO2VBQW5CQTs7SUFFQUMsY0FBYztlQUFkQTs7SUFEQUMsbUJBQW1CO2VBQW5CQTs7SUErSUdDLGlCQUFpQjtlQUFqQkE7O0lBdkZBQyxpQkFBaUI7ZUFBakJBOztJQXRGQUMsT0FBTztlQUFQQTs7SUFzS0FDLGVBQWU7ZUFBZkE7O0lBakpIQyxnQkFBZ0I7ZUFBaEJBOztJQW1HR0Msc0JBQXNCO2VBQXRCQTs7SUFsQk1DLHFCQUFxQjtlQUFyQkE7O0lBb0NOQyxvQkFBb0I7ZUFBcEJBOztJQWpJQUMsZ0JBQWdCO2VBQWhCQTs7OytEQXBFRzt5QkFFSzs4QkFFUzswQkFFRTs7Ozs7O0FBS25DLFNBQVNDLGFBQWFDLENBQVM7SUFDN0IsTUFBTUMsSUFBSUQsRUFBRUUsSUFBSTtJQUNoQixJQUFJRCxFQUFFRSxVQUFVLENBQUMsWUFBWSxPQUFPQyxPQUFPQyxJQUFJLENBQUNKLEVBQUVLLEtBQUssQ0FBQyxJQUFJO0lBQzVELElBQUlMLEVBQUVFLFVBQVUsQ0FBQyxTQUFTLE9BQU9DLE9BQU9DLElBQUksQ0FBQ0osRUFBRUssS0FBSyxDQUFDLElBQUk7SUFDekQsT0FBT0YsT0FBT0MsSUFBSSxDQUFDSixHQUFHO0FBQ3hCO0FBRUEsU0FBU007SUFDUCxNQUFNQyxNQUFNQyxRQUFRRCxHQUFHLENBQUNFLFFBQVE7SUFDaEMsTUFBTUMsUUFBUUgsUUFBUSxpQkFBaUJBLFFBQVE7SUFFL0MsSUFBSUcsT0FBTztRQUNULE1BQU1DLEtBQUtILFFBQVFELEdBQUcsQ0FBQ0ssa0JBQWtCO1FBQ3pDLElBQUksQ0FBQ0QsSUFBSSxNQUFNLElBQUlFLE1BQU07UUFDekIsT0FBTztZQUFDO2dCQUFFQyxLQUFLaEIsYUFBYWE7Z0JBQUtJLFFBQVE7WUFBTTtTQUFFO0lBQ25EO0lBQ0EsSUFBSSxDQUFDUCxRQUFRRCxHQUFHLENBQUNTLHNCQUFzQixFQUFFLE1BQU0sSUFBSUgsTUFBTTtJQUN6RCxNQUFNSSxVQUEyQjtRQUMvQjtZQUFFSCxLQUFLaEIsYUFBYVUsUUFBUUQsR0FBRyxDQUFDUyxzQkFBc0I7WUFBR0QsUUFBUTtRQUFVO0tBQzVFO0lBQ0QsSUFBSVAsUUFBUUQsR0FBRyxDQUFDVyx1QkFBdUIsRUFBRTtRQUN2Q0QsUUFBUUUsSUFBSSxDQUFDO1lBQUVMLEtBQUtoQixhQUFhVSxRQUFRRCxHQUFHLENBQUNXLHVCQUF1QjtZQUFHSCxRQUFRO1FBQVc7SUFDNUY7SUFDQUUsUUFBUUcsT0FBTyxDQUFDQyxDQUFBQTtRQUNkLElBQUlBLEVBQUVOLE1BQU0sS0FBSyxTQUFTTSxFQUFFUCxHQUFHLENBQUNRLE1BQU0sR0FBRyxJQUFJO1lBQzNDLE1BQU0sSUFBSVQsTUFBTSxDQUFDLEVBQUVRLEVBQUVOLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQztRQUN4RDtJQUNGO0lBQ0EsT0FBT0U7QUFDVDtBQUVBLHlEQUF5RDtBQUN6RCxJQUFJTSxVQUFrQztBQUV0QyxTQUFTQztJQUNQLElBQUlELFlBQVksTUFBTTtRQUNwQkUsSUFBQUEsNEJBQWtCO1FBQ2xCRixVQUFVakI7SUFDWjtJQUNBLE9BQU9pQjtBQUNUO0FBRUEsU0FBU0csUUFBUUMsSUFBWSxFQUFFQyxLQUFZLEVBQUVDLE1BQWM7SUFDekQsTUFBTUMsSUFBSUMsZUFBTSxDQUFDQyxVQUFVLENBQUMsVUFBVTdCLE9BQU84QixNQUFNLENBQUM7UUFBQ0o7UUFBUTFCLE9BQU9DLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRXdCLE1BQU0sQ0FBQztLQUFFO0lBQ3RGRSxFQUFFSSxNQUFNLENBQUNQO0lBQ1QsT0FBT0csRUFBRUssTUFBTTtBQUNqQjtBQUVPLFNBQVM1QyxRQUFRb0MsSUFBWSxFQUFFQyxLQUFZO0lBQ2hELDhCQUE4QjtJQUM5QixNQUFNWCxVQUFVTztJQUNoQixNQUFNWSxRQUFRbkIsT0FBTyxDQUFDLEVBQUU7SUFDeEIsSUFBSSxDQUFDbUIsT0FBTyxNQUFNLElBQUl2QixNQUFNO0lBQzVCLE1BQU1zQixTQUFTVCxRQUFRQyxNQUFNQyxPQUFPUSxNQUFNdEIsR0FBRyxFQUFFdUIsUUFBUSxDQUFDO0lBQ3hELE9BQU87UUFBRUMsS0FBS0g7UUFBUUksTUFBTUgsTUFBTXJCLE1BQU07SUFBQztBQUMzQztBQUVPLFNBQVNsQixpQkFBaUIyQyxLQUFhLEVBQUVaLEtBQVksRUFBRWEsWUFBb0I7SUFDaEYsTUFBTUMsWUFBWXZDLE9BQU9DLElBQUksQ0FBQ3FDLGNBQWM7SUFDNUMsTUFBTXhCLFVBQVVPO0lBQ2hCLEtBQUssTUFBTUgsS0FBS0osUUFBUztRQUN2QixNQUFNMEIsT0FBT2pCLFFBQVFjLE9BQU9aLE9BQU9QLEVBQUVQLEdBQUc7UUFDeEMsSUFBSTRCLFVBQVVwQixNQUFNLEtBQUtxQixLQUFLckIsTUFBTSxJQUFJUyxlQUFNLENBQUNhLGVBQWUsQ0FBQ0YsV0FBV0MsT0FBTztZQUMvRSxPQUFPO1FBQ1Q7SUFDRjtJQUNBLE9BQU87QUFDVDtBQUVPLE1BQU1sRCxtQkFBbUIsQ0FBQ29ELElBQy9CQSxFQUFFNUMsSUFBSSxHQUFHNkMsV0FBVyxHQUNqQkMsT0FBTyxDQUFDLE9BQU8sSUFDZkEsT0FBTyxDQUFDLFFBQVEsS0FDaEJBLE9BQU8sQ0FBQyxzREFBc0RDLENBQUFBLElBQzdELEFBQUMsQ0FBQTtZQUFFQyxRQUFRO1lBQU1DLElBQUk7WUFBTUMsTUFBTTtZQUFNQyxJQUFJO1lBQU1DLFFBQVE7WUFBT0MsS0FBSztZQUFPQyxXQUFXO1lBQVFDLE1BQU07UUFBTyxDQUFBLENBQVMsQ0FBQ1IsRUFBRTtBQUd2SCxNQUFNOUQsc0JBQXNCLENBQUN1RSxVQUFvQmxFLFFBQVFFLGlCQUFpQmdFLFVBQVUsUUFBUW5CLEdBQUc7QUFDL0YsTUFBTWxELHNCQUFzQixDQUFDc0UsVUFBb0JuRSxRQUFRbUUsU0FBUyxTQUFTcEIsR0FBRztBQUM5RSxNQUFNbkQsaUJBQWlCLENBQUN3RSxLQUFlcEUsUUFBUW9FLElBQUksTUFBTXJCLEdBQUc7QUFFbkUsNkJBQTZCO0FBQzdCLFNBQVNzQixjQUFjQyxHQUFXLEVBQUVDLEdBQVcsRUFBRUMsU0FBb0I7SUFDbkUsMENBQTBDO0lBQzFDLHdFQUF3RTtJQUN4RSxNQUFNQyxXQUFXO1FBQUMsQ0FBQztRQUFJO0tBQUc7SUFDMUIsTUFBTUMsV0FBVztRQUFDLENBQUM7UUFBSztLQUFJO0lBRTVCLElBQUlDLFNBQWlCRixRQUFRLENBQUMsRUFBRSxJQUFJLENBQUM7SUFDckMsSUFBSUcsU0FBaUJILFFBQVEsQ0FBQyxFQUFFLElBQUk7SUFDcEMsSUFBSUksU0FBaUJILFFBQVEsQ0FBQyxFQUFFLElBQUksQ0FBQztJQUNyQyxJQUFJSSxTQUFpQkosUUFBUSxDQUFDLEVBQUUsSUFBSTtJQUVwQyxJQUFJSyxPQUFPO0lBQ1gsSUFBSUMsTUFBTTtJQUNWLElBQUlDLEtBQUs7SUFDVCxJQUFJQyxPQUFPO0lBRVgsTUFBTUMsU0FBUztJQUNmLElBQUlDLFNBQVM7SUFFYixNQUFPTCxPQUFPUCxZQUFZLEVBQUc7UUFDM0IsSUFBSVUsTUFBTTtZQUNSLE1BQU1HLFNBQVMsQUFBQ1IsQ0FBQUEsU0FBU0MsTUFBSyxJQUFLO1lBQ25DLElBQUlQLE9BQU9jLFFBQVE7Z0JBQ2pCSixNQUFPLEtBQU0sSUFBSUQ7Z0JBQ2pCSCxTQUFTUTtZQUNYLE9BQU87Z0JBQ0xQLFNBQVNPO1lBQ1g7UUFDRixPQUFPO1lBQ0wsTUFBTUMsU0FBUyxBQUFDWCxDQUFBQSxTQUFTQyxNQUFLLElBQUs7WUFDbkMsSUFBSU4sT0FBT2dCLFFBQVE7Z0JBQ2pCTCxNQUFPLEtBQU0sSUFBSUQ7Z0JBQ2pCTCxTQUFTVztZQUNYLE9BQU87Z0JBQ0xWLFNBQVNVO1lBQ1g7UUFDRjtRQUVBSixPQUFPLENBQUNBO1FBQ1IsSUFBSUYsTUFBTSxHQUFHO1lBQ1hBO1FBQ0YsT0FBTztZQUNMSSxVQUFVRCxNQUFNLENBQUNGLEdBQUc7WUFDcEJGO1lBQ0FDLE1BQU07WUFDTkMsS0FBSztRQUNQO0lBQ0Y7SUFFQSxPQUFPRztBQUNUO0FBRU8sU0FBU3JGLGtCQUNkdUUsR0FBVyxFQUNYQyxHQUFXLEVBQ1hDLFNBQW9CLEVBQ3BCZSxTQUFpQjtJQUVqQixNQUFNQyxPQUFPaEQsZUFBTSxDQUFDaUQsVUFBVSxDQUFDLFVBQVU5QyxNQUFNLENBQUM0QyxXQUFXM0MsTUFBTTtJQUNqRSxNQUFNOEMsSUFBSSxBQUFDLENBQUEsQUFBQ0YsQ0FBQUEsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFBLElBQUssR0FBRSxJQUFLLE9BQU8seUNBQXlDO0lBQ25GLE9BQU9uQixjQUFjQyxNQUFNb0IsR0FBR25CLE1BQU1tQixHQUFHbEI7QUFDekM7QUFFTyxNQUFNOUUscUJBQXFCLENBQUNpRyxhQUFxQkMsSUFBSSxFQUFFLEdBQUtELGVBQWVDO0FBRWxGLGtEQUFrRDtBQUNsRCxNQUFNQyxjQUFjO0FBRWIsZUFBZXpGLHNCQUFzQjBGLE9BQStEO0lBQ3pHLGlHQUFpRztJQUNqRyxNQUFNQyxTQUFTOUUsUUFBUUQsR0FBRyxDQUFDZ0YsY0FBYyxJQUFJO0lBQzdDLE1BQU1DLE9BQU9DLEtBQUtDLFNBQVMsQ0FBQ0MsT0FBT0MsTUFBTSxDQUFDLENBQUMsR0FBR1AsU0FBUztRQUFFdEYsR0FBRztRQUFHOEYsS0FBS0MsS0FBS0MsR0FBRztJQUFHO0lBQy9FLE1BQU1DLE1BQU1qRSxlQUFNLENBQUNDLFVBQVUsQ0FBQyxVQUFVc0QsUUFBUXBELE1BQU0sQ0FBQ3NELE1BQU1yRCxNQUFNLENBQUM7SUFDcEUsTUFBTThELFFBQVE5RixPQUFPQyxJQUFJLENBQUNxRixLQUFLQyxTQUFTLENBQUM7UUFBRUY7UUFBTVE7SUFBSSxJQUFJM0QsUUFBUSxDQUFDO0lBRWxFNkQsSUFBQUEsZ0JBQU8sSUFBR0MsR0FBRyxDQUFDO1FBQ1pDLE1BQU1oQjtRQUNOYTtRQUNBSSxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLFFBQVEsS0FBSyxLQUFLLEtBQUs7SUFDekI7QUFDRjtBQUVPLFNBQVMvRztJQUNkLE1BQU00RixTQUFTOUUsUUFBUUQsR0FBRyxDQUFDZ0YsY0FBYyxJQUFJO0lBQzdDLE1BQU16RSxNQUFNb0YsSUFBQUEsZ0JBQU8sSUFBR1EsR0FBRyxDQUFDdEIsY0FBY2E7SUFDeEMsSUFBSSxDQUFDbkYsS0FBSyxPQUFPO0lBQ2pCLElBQUk7UUFDRixNQUFNLEVBQUUwRSxJQUFJLEVBQUVRLEdBQUcsRUFBRSxHQUFHUCxLQUFLa0IsS0FBSyxDQUFDeEcsT0FBT0MsSUFBSSxDQUFDVSxLQUFLLGFBQWF1QixRQUFRO1FBQ3ZFLE1BQU11RSxRQUFRN0UsZUFBTSxDQUFDQyxVQUFVLENBQUMsVUFBVXNELFFBQVFwRCxNQUFNLENBQUNzRCxNQUFNckQsTUFBTSxDQUFDO1FBQ3RFLElBQUksQ0FBQ0osZUFBTSxDQUFDYSxlQUFlLENBQUN6QyxPQUFPQyxJQUFJLENBQUM0RixNQUFNN0YsT0FBT0MsSUFBSSxDQUFDd0csU0FBUyxPQUFPO1FBQzFFLE1BQU1DLFNBQVNwQixLQUFLa0IsS0FBSyxDQUFDbkI7UUFDMUIsT0FBTztZQUFFc0IsT0FBT0QsT0FBT0MsS0FBSztZQUFFQyxVQUFVRixPQUFPRSxRQUFRO1lBQUVDLFFBQVFILE9BQU9HLE1BQU07UUFBQztJQUNqRixFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRjtBQUtPLFNBQVNwSCxxQkFBcUI2RCxPQUFlO0lBQ2xELElBQUksQ0FBQ3dELElBQUFBLDhCQUFnQixFQUFDLDBCQUEwQjtRQUM5QyxPQUFPO1lBQUVDLE9BQU87WUFBT0MsT0FBTztRQUFtQjtJQUNuRDtJQUVBLElBQUksQ0FBQzFELFdBQVcsT0FBT0EsWUFBWSxVQUFVO1FBQzNDLE9BQU87WUFBRXlELE9BQU87WUFBT0MsT0FBTztRQUFzQjtJQUN0RDtJQUVBLElBQUkxRCxRQUFRbkMsTUFBTSxHQUFHLEtBQUs7UUFDeEIsT0FBTztZQUFFNEYsT0FBTztZQUFPQyxPQUFPO1FBQW1CO0lBQ25EO0lBRUEsSUFBSTFELFFBQVFuQyxNQUFNLEdBQUcsR0FBRztRQUN0QixPQUFPO1lBQUU0RixPQUFPO1lBQU9DLE9BQU87UUFBb0I7SUFDcEQ7SUFFQSxrRkFBa0Y7SUFDbEYsSUFBSSxDQUFDLHlCQUF5QkMsSUFBSSxDQUFDM0QsVUFBVTtRQUMzQyxPQUFPO1lBQUV5RCxPQUFPO1lBQU9DLE9BQU87UUFBZ0M7SUFDaEU7SUFFQSxPQUFPO1FBQUVELE9BQU87SUFBSztBQUN2QjtBQUtPLFNBQVMxSDtJQUNkLE9BQU95SCxJQUFBQSw4QkFBZ0IsRUFBQztBQUMxQjtBQUtPLFNBQVM1SDtJQUNkLElBQUksQ0FBQzRILElBQUFBLDhCQUFnQixFQUFDLDBCQUEwQjtRQUM5QyxNQUFNLElBQUlwRyxNQUFNO0lBQ2xCO0lBRUEsT0FBT2tCLGVBQU0sQ0FBQ3NGLFVBQVU7QUFDMUIifQ==