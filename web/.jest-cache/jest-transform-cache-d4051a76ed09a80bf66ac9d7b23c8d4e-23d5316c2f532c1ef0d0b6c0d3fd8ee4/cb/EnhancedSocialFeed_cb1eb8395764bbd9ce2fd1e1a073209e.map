{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/features/feeds/components/EnhancedSocialFeed.tsx"],"sourcesContent":["/**\n * Enhanced Social Feed Component\n * \n * Instagram-like social feed with advanced features\n * Features:\n * - Smooth infinite scroll\n * - Pull-to-refresh\n * - Touch gesture support\n * - Real-time updates\n * - Personalization algorithms\n * - Enhanced engagement metrics\n * - Performance optimizations\n * - Accessibility compliance\n */\n\n'use client';\n\nimport {\n  SparklesIcon,\n  ClockIcon\n} from '@heroicons/react/24/outline';\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { logger } from '@/lib/utils/logger';\n\nimport type { UserPreferences } from '@/features/feeds/types';\nimport { \n  useFeeds, \n  useFeedsActions, \n  useFeedsLoading,\n  useFeedsError,\n  useFeedPreferences,\n  useFeedFilters,\n  useAppStore,\n  usePWAStore,\n  useUserStore,\n  useNotificationStore\n} from '@/lib/stores';\n\nimport FeedItem from './FeedItem';\nimport InfiniteScroll from './InfiniteScroll';\n\n\ninterface EnhancedSocialFeedProps {\n  userId?: string;\n  preferences?: UserPreferences;\n  onLike?: (itemId: string) => void;\n  onShare?: (itemId: string) => void;\n  onBookmark?: (itemId: string) => void;\n  onComment?: (itemId: string) => void;\n  onViewDetails?: (itemId: string) => void;\n  className?: string;\n  enablePersonalization?: boolean;\n  enableRealTimeUpdates?: boolean;\n  enableAnalytics?: boolean;\n  enableHaptics?: boolean;\n  showTrending?: boolean;\n}\n\nexport default function EnhancedSocialFeed({\n  userId,\n  preferences: _preferences,\n  onLike,\n  onShare,\n  onBookmark,\n  onComment,\n  onViewDetails,\n  className = '',\n  enablePersonalization = true,\n  enableRealTimeUpdates = true,\n  enableAnalytics = false,\n  enableHaptics = true,\n  showTrending = true\n}: EnhancedSocialFeedProps) {\n  // ✅ MIGRATED: Use existing stores instead of useState\n  // Feeds state from Feeds Store\n  const feeds = useFeeds();\n  const { loadFeeds, likeFeed, bookmarkFeed, refreshFeeds } = useFeedsActions();\n  const isLoading = useFeedsLoading();\n  const error = useFeedsError();\n  const feedPreferences = useFeedPreferences();\n  const feedFilters = useFeedFilters();\n  \n  // Global UI state from App Store\n  const theme = useAppStore(state => state.theme);\n  const isMobile = useAppStore(state => state.isMobile);\n  const deviceInfo = useAppStore(state => ({\n    isMobile: state.isMobile,\n    isTablet: state.isTablet,\n    isDesktop: state.isDesktop,\n    screenSize: state.screenSize,\n    orientation: state.orientation\n  }));\n  \n  // PWA state from PWA Store\n  const isOnline = usePWAStore(state => state.offline.isOnline);\n  const pwaPerformance = usePWAStore(state => state.performance);\n  \n  // User state from User Store\n  const user = useUserStore(state => state.user);\n  const userProfile = useUserStore(state => state.profile);\n  \n  // Notification state from Notification Store\n  const notifications = useNotificationStore(state => state.notifications);\n  const addNotification = useNotificationStore(state => state.addNotification);\n  \n  // ✅ Keep local state for component-specific concerns\n  const [personalizationScore, setPersonalizationScore] = useState(0);\n  const [lastUpdate, setLastUpdate] = useState<Date>(new Date());\n  \n  const wsRef = useRef<WebSocket | null>(null);\n  const refreshIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Load feed items with personalization\n  const loadFeedItems = useCallback(async (pageNum: number, isRefresh: boolean = false) => {\n    if (isLoading) return;\n\n    try {\n      // Use FeedsStore to load feeds\n      if (isRefresh) {\n        await refreshFeeds();\n      } else {\n        await loadFeeds('all');\n      }\n\n      // Update component-specific state\n      setPersonalizationScore(0); // This would come from the store\n      setLastUpdate(new Date());\n      \n      // Add notification for user feedback\n      addNotification({\n        type: 'success',\n        title: 'Feed Updated',\n        message: isRefresh ? 'Feed refreshed!' : 'New posts loaded!',\n        duration: 3000\n      });\n    } catch (error) {\n      // Error handling - could be logged to monitoring service\n      console.error('Error loading feed:', error);\n      addNotification({\n        type: 'error',\n        title: 'Feed Load Failed',\n        message: 'Failed to load feed. Please try again.',\n        duration: 5000\n      });\n    }\n  }, [isLoading, loadFeeds, refreshFeeds, addNotification]);\n\n  // Load initial feed\n  useEffect(() => {\n    void loadFeedItems(1, true);\n  }, [loadFeedItems]);\n\n  // Set up real-time updates\n  useEffect(() => {\n    if (enableRealTimeUpdates && userId) {\n      // WebSocket connection for real-time updates\n      const ws = new WebSocket(`wss://your-websocket-endpoint/feed/${userId}`);\n      wsRef.current = ws;\n\n      ws.onmessage = (event) => {\n        const data = JSON.parse(event.data);\n        if (data.label === 'new_item') {\n          // Use store action to add new feed item\n          // This would need to be implemented in the store\n          logger.info('New item received:', data.item);\n        } else if (data.label === 'engagement_update') {\n          // Use store action to update engagement\n          // This would need to be implemented in the store\n          logger.info('Engagement update received:', data);\n        }\n      };\n\n      // Fallback polling for updates\n      refreshIntervalRef.current = setInterval(() => {\n        void loadFeedItems(1, true);\n      }, 30000); // Refresh every 30 seconds\n\n      return () => {\n        ws.close();\n        if (refreshIntervalRef.current) {\n          clearInterval(refreshIntervalRef.current);\n        }\n      };\n    }\n  }, [enableRealTimeUpdates, userId, loadFeedItems]);\n\n  // Analytics tracking\n  const trackEvent = useCallback((event: string, data?: any) => {\n    if (enableAnalytics) {\n      logger.info('Analytics:', { event, data });\n      // Implement analytics tracking for social media interactions\n      try {\n        // Track social media click event\n        if (typeof window !== 'undefined' && window.gtag) {\n          window.gtag('event', 'social_media_click', {\n            event_category: 'civics',\n            event_label: data?.platform || 'unknown',\n            value: 1\n          });\n        }\n        \n        // Track in local analytics if available\n        if (typeof window !== 'undefined' && (window as any).analytics) {\n          (window as any).analytics.track('Social Media Clicked', {\n            platform: data?.platform || 'unknown',\n            handle: data?.handle || 'unknown',\n            url: data?.url || 'unknown',\n            representative: data?.representative || 'unknown'\n          });\n        }\n      } catch (error) {\n        console.warn('Analytics tracking failed:', error);\n      }\n    }\n  }, [enableAnalytics]);\n\n  // Handle engagement actions\n  const handleLike = useCallback((itemId: string) => {\n    // Use FeedsStore to like feed\n    likeFeed(itemId);\n    onLike?.(itemId);\n    trackEvent('feed_item_liked', { itemId });\n  }, [likeFeed, onLike, trackEvent]);\n\n  const handleBookmark = useCallback((itemId: string) => {\n    // Use FeedsStore to bookmark feed\n    bookmarkFeed(itemId);\n    onBookmark?.(itemId);\n    trackEvent('feed_item_bookmarked', { itemId });\n  }, [bookmarkFeed, onBookmark, trackEvent]);\n\n  const handleShare = useCallback((itemId: string) => {\n    onShare?.(itemId);\n    trackEvent('feed_item_shared', { itemId });\n    \n    // Native sharing if available\n    if (navigator.share) {\n      const item = feeds.find((item: any) => item.id === itemId);\n      if (item) {\n        navigator.share({\n          title: item.title,\n          text: item.summary || '',\n          url: item.source.url || window.location.href\n        });\n      }\n    }\n  }, [feeds, onShare, trackEvent]);\n\n  const handleComment = useCallback((itemId: string) => {\n    onComment?.(itemId);\n    trackEvent('feed_item_commented', { itemId });\n  }, [onComment, trackEvent]);\n\n  const handleViewDetails = useCallback((itemId: string) => {\n    onViewDetails?.(itemId);\n  }, [onViewDetails]);\n\n  // Handle refresh\n  const handleRefresh = useCallback(async () => {\n    await loadFeedItems(1, true);\n  }, [loadFeedItems]);\n\n  // Handle load more\n  const handleLoadMore = useCallback(async () => {\n    await loadFeedItems(1, false);\n  }, [loadFeedItems]);\n\n  // Format last update time\n  const formatLastUpdate = (date: Date) => {\n    const now = new Date();\n    const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));\n    \n    if (diffInMinutes < 1) return 'Just now';\n    if (diffInMinutes < 60) return `${diffInMinutes}m ago`;\n    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;\n    return date.toLocaleDateString();\n  };\n\n  return (\n    <div className={`h-full ${className}`}>\n      {/* Feed Header */}\n      <div className=\"bg-white border-b border-gray-200 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-lg font-semibold text-gray-900\">Civic Feed</h2>\n            <p className=\"text-sm text-gray-500\">\n              {enablePersonalization && personalizationScore > 0 && (\n                <span className=\"flex items-center space-x-1\">\n                  <SparklesIcon className=\"w-4 h-4 text-blue-500\" />\n                  <span>Personalized for you ({personalizationScore}% match)</span>\n                </span>\n              )}\n            </p>\n          </div>\n          \n          <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n            {enableRealTimeUpdates && (\n              <div className=\"flex items-center space-x-1\">\n                <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n                <span>Live</span>\n              </div>\n            )}\n            \n            <div className=\"flex items-center space-x-1\">\n              <ClockIcon className=\"w-4 h-4\" />\n              <span>Updated {formatLastUpdate(lastUpdate)}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Refresh Indicator */}\n      {isLoading && (\n        <div className=\"bg-blue-50 border-b border-blue-200 p-3\">\n          <div className=\"flex items-center justify-center space-x-2\">\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500\"></div>\n            <span className=\"text-sm text-blue-600\">Refreshing feed...</span>\n          </div>\n        </div>\n      )}\n\n      {/* Trending Section */}\n      {showTrending && (\n        <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200 p-4\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-2 h-2 bg-red-500 rounded-full animate-pulse\"></div>\n            <span className=\"text-sm font-medium text-gray-700\">Trending Now</span>\n          </div>\n          <div className=\"mt-2 text-sm text-gray-600\">\n            Climate Action • Voting Rights • Infrastructure\n          </div>\n        </div>\n      )}\n\n      {/* Enhanced Feed with Infinite Scroll */}\n      <InfiniteScroll\n        onLoadMore={handleLoadMore}\n        hasMore={feeds.length > 0}\n        isLoading={isLoading}\n        onRefresh={handleRefresh}\n        enableScrollToTop={true}\n        enablePullToRefresh={true}\n        className=\"h-full\"\n        loadingComponent={\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n            <span className=\"ml-3 text-gray-500\">Loading more...</span>\n          </div>\n        }\n        endComponent={\n          <div className=\"text-center py-8 text-gray-500\">\n            <p>You&apos;ve reached the end of the feed</p>\n            <p className=\"text-sm mt-1\">Check back later for more updates</p>\n          </div>\n        }\n      >\n        {feeds.map((item: any) => (\n          <FeedItem\n            key={item.id}\n            item={item as any} // Type conversion needed due to different FeedItem types\n            onLike={handleLike}\n            onShare={handleShare}\n            onBookmark={handleBookmark}\n            onComment={handleComment}\n            onViewDetails={handleViewDetails}\n            isLiked={item.userInteraction.liked}\n            isBookmarked={item.userInteraction.bookmarked}\n            showEngagement={true}\n            enableHaptics={enableHaptics}\n          />\n        ))}\n      </InfiniteScroll>\n    </div>\n  );\n}\n"],"names":["EnhancedSocialFeed","userId","preferences","_preferences","onLike","onShare","onBookmark","onComment","onViewDetails","className","enablePersonalization","enableRealTimeUpdates","enableAnalytics","enableHaptics","showTrending","feeds","useFeeds","loadFeeds","likeFeed","bookmarkFeed","refreshFeeds","useFeedsActions","isLoading","useFeedsLoading","error","useFeedsError","feedPreferences","useFeedPreferences","feedFilters","useFeedFilters","theme","useAppStore","state","isMobile","deviceInfo","isTablet","isDesktop","screenSize","orientation","isOnline","usePWAStore","offline","pwaPerformance","performance","user","useUserStore","userProfile","profile","notifications","useNotificationStore","addNotification","personalizationScore","setPersonalizationScore","useState","lastUpdate","setLastUpdate","Date","wsRef","useRef","refreshIntervalRef","loadFeedItems","useCallback","pageNum","isRefresh","type","title","message","duration","console","useEffect","ws","WebSocket","current","onmessage","event","data","JSON","parse","label","logger","info","item","setInterval","close","clearInterval","trackEvent","window","gtag","event_category","event_label","platform","value","analytics","track","handle","url","representative","warn","handleLike","itemId","handleBookmark","handleShare","navigator","share","find","id","text","summary","source","location","href","handleComment","handleViewDetails","handleRefresh","handleLoadMore","formatLastUpdate","date","now","diffInMinutes","Math","floor","getTime","toLocaleDateString","div","h2","p","span","SparklesIcon","ClockIcon","InfiniteScroll","onLoadMore","hasMore","length","onRefresh","enableScrollToTop","enablePullToRefresh","loadingComponent","endComponent","map","FeedItem","isLiked","userInteraction","liked","isBookmarked","bookmarked","showEngagement"],"mappings":"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"}