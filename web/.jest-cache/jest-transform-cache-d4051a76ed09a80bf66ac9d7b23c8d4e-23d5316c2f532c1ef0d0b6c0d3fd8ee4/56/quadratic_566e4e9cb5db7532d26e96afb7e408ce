4021d27ad7cbddd50ac308dfb052b90c
/**
 * Quadratic Voting Strategy
 * 
 * Implements quadratic voting where voters allocate tokens across options.
 * The cost of votes increases quadratically with the number of votes allocated to an option.
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "QuadraticStrategy", {
    enumerable: true,
    get: function() {
        return QuadraticStrategy;
    }
});
const _logger = require("../../utils/logger");
class QuadraticStrategy {
    getVotingMethod() {
        return "quadratic";
    }
    async validateVote(request, poll) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const voteData = request.voteData;
            // Validate allocations object exists
            if (!voteData.allocations || typeof voteData.allocations !== "object") {
                return {
                    valid: false,
                    isValid: false,
                    error: "Quadratic voting requires allocations",
                    errors: [
                        "Quadratic voting requires allocations"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate allocations are numbers
            const allocations = voteData.allocations;
            let totalTokens = 0;
            for (const [optionId, tokens] of Object.entries(allocations)){
                if (typeof tokens !== "number" || tokens < 0) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Allocations must be non-negative numbers",
                        errors: [
                            "Allocations must be non-negative numbers"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                // Check if option exists (handle both option IDs and indices)
                const optionIndex = parseInt(optionId, 10);
                const optionExists = !isNaN(optionIndex) && optionIndex >= 0 && optionIndex < poll.options.length;
                const optionExistsById = poll.options.some((option)=>option.id === optionId);
                if (!optionExists && !optionExistsById) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Invalid option selected",
                        errors: [
                            "Invalid option selected"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                totalTokens += tokens;
            }
            // Check token budget
            const maxTokens = poll.votingConfig.quadraticCredits || 100;
            if (totalTokens > maxTokens) {
                return {
                    valid: false,
                    isValid: false,
                    error: `Exceeds maximum token budget of ${maxTokens}`,
                    errors: [
                        `Exceeds maximum token budget of ${maxTokens}`
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            (0, _logger.devLog)("Quadratic vote validated successfully", {
                pollId: request.pollId,
                allocations: voteData.allocations,
                totalTokens,
                userId: request.userId
            });
            return {
                valid: true,
                isValid: true,
                requiresAuthentication: false,
                requiresTokens: false
            };
        } catch (error) {
            (0, _logger.devLog)("Quadratic vote validation error:", {
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                valid: false,
                isValid: false,
                error: "Quadratic vote validation failed",
                errors: [
                    "Quadratic vote validation failed"
                ],
                requiresAuthentication: false,
                requiresTokens: false
            };
        }
    }
    async processVote(request, poll) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const voteData = request.voteData;
            // Create vote data for storage
            const voteRecord = {
                id: `vote_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                pollId: request.pollId,
                userId: request.userId,
                allocations: voteData.allocations,
                privacyLevel: "standard",
                auditReceipt: `audit_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                timestamp: new Date(),
                ipAddress: request.ipAddress,
                userAgent: request.userAgent
            };
            (0, _logger.devLog)("Quadratic vote processed successfully", {
                pollId: request.pollId,
                userId: request.userId,
                allocations: voteData.allocations,
                voteId: voteRecord.id
            });
            return {
                success: true,
                voteId: voteRecord.id,
                message: "Vote recorded successfully",
                pollId: request.pollId
            };
        } catch (error) {
            (0, _logger.devLog)("Quadratic vote processing error:", {
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                success: false,
                error: "Failed to process quadratic vote",
                message: "Failed to process quadratic vote",
                pollId: request.pollId
            };
        }
    }
    async calculateResults(poll, votes) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const startTime = Date.now();
            // Initialize tracking objects
            const totalScores = {};
            const optionVotes = {};
            const optionPercentages = {};
            // Initialize all options with zero scores
            poll.options.forEach((option)=>{
                totalScores[option.id] = 0;
                optionVotes[option.id] = 0;
                optionPercentages[option.id] = 0;
            });
            // Process each vote
            votes.forEach((vote)=>{
                if (vote.voteData?.allocations) {
                    Object.entries(vote.voteData.allocations).forEach(([optionId, tokens])=>{
                        if (typeof tokens === "number" && tokens > 0) {
                            totalScores[optionId] = (totalScores[optionId] || 0) + tokens;
                            optionVotes[optionId] = (optionVotes[optionId] || 0) + 1;
                        }
                    });
                }
            });
            const totalVotes = votes?.length || 0;
            // Calculate percentages
            if (totalVotes > 0) {
                Object.keys(optionVotes).forEach((optionId)=>{
                    const votes = optionVotes[optionId] || 0;
                    optionPercentages[optionId] = votes / totalVotes * 100;
                });
            }
            // Find winner (highest total score)
            let winner;
            let winnerVotes = 0;
            let winnerPercentage = 0;
            if (totalVotes > 0) {
                Object.entries(totalScores).forEach(([optionId, score])=>{
                    if (score > winnerVotes) {
                        winner = optionId;
                        winnerVotes = score;
                        winnerPercentage = optionPercentages[optionId] || 0;
                    }
                });
            }
            const results = {
                winner,
                winnerVotes,
                winnerPercentage,
                optionVotes,
                optionPercentages,
                abstentions: 0,
                abstentionPercentage: 0
            };
            (0, _logger.devLog)("Quadratic results calculated", {
                pollId: poll.id,
                totalVotes,
                winner,
                winnerVotes,
                winnerPercentage,
                calculationTime: Date.now() - startTime
            });
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes,
                participationRate: totalVotes / 100,
                results,
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: Date.now() - startTime,
                    method: "quadratic"
                }
            };
        } catch (error) {
            (0, _logger.devLog)("Quadratic results calculation error:", {
                error: error instanceof Error ? error.message : String(error)
            });
            // Return empty results on error
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes: 0,
                participationRate: 0,
                results: {
                    winner: undefined,
                    winnerVotes: 0,
                    winnerPercentage: 0,
                    optionVotes: {},
                    optionPercentages: {},
                    abstentions: 0,
                    abstentionPercentage: 0
                },
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: 0,
                    error: error instanceof Error ? error.message : "Unknown error"
                }
            };
        }
    }
    getConfiguration() {
        return {
            method: "quadratic",
            description: "Voters allocate tokens across options with quadratic cost",
            allowsMultipleSelections: true,
            requiresRanking: false,
            maxSelections: "token budget",
            costFunction: "quadratic"
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvdm90ZS9zdHJhdGVnaWVzL3F1YWRyYXRpYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFF1YWRyYXRpYyBWb3RpbmcgU3RyYXRlZ3lcbiAqIFxuICogSW1wbGVtZW50cyBxdWFkcmF0aWMgdm90aW5nIHdoZXJlIHZvdGVycyBhbGxvY2F0ZSB0b2tlbnMgYWNyb3NzIG9wdGlvbnMuXG4gKiBUaGUgY29zdCBvZiB2b3RlcyBpbmNyZWFzZXMgcXVhZHJhdGljYWxseSB3aXRoIHRoZSBudW1iZXIgb2Ygdm90ZXMgYWxsb2NhdGVkIHRvIGFuIG9wdGlvbi5cbiAqIFxuICogQ3JlYXRlZDogU2VwdGVtYmVyIDE1LCAyMDI1XG4gKiBVcGRhdGVkOiBTZXB0ZW1iZXIgMTUsIDIwMjVcbiAqL1xuXG5pbXBvcnQgeyBkZXZMb2cgfSBmcm9tICdAL2xpYi91dGlscy9sb2dnZXInO1xuXG5pbXBvcnQgdHlwZSB7IFxuICBWb3RpbmdTdHJhdGVneSwgXG4gIFZvdGVSZXF1ZXN0LCBcbiAgVm90ZVJlc3BvbnNlLCBcbiAgVm90ZVZhbGlkYXRpb24sIFxuICBQb2xsRGF0YSwgXG4gIFZvdGVEYXRhLCBcbiAgUmVzdWx0c0RhdGEsXG4gIFZvdGluZ01ldGhvZCxcbiAgUG9sbFJlc3VsdHNcbn0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUXVhZHJhdGljU3RyYXRlZ3kgaW1wbGVtZW50cyBWb3RpbmdTdHJhdGVneSB7XG4gIFxuICBnZXRWb3RpbmdNZXRob2QoKTogVm90aW5nTWV0aG9kIHtcbiAgICByZXR1cm4gJ3F1YWRyYXRpYyc7XG4gIH1cblxuICBhc3luYyB2YWxpZGF0ZVZvdGUocmVxdWVzdDogVm90ZVJlcXVlc3QsIHBvbGw6IFBvbGxEYXRhKTogUHJvbWlzZTxWb3RlVmFsaWRhdGlvbj4ge1xuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyBTYXRpc2Z5IHJlcXVpcmUtYXdhaXQgcnVsZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHJlcXVlc3Qudm90ZURhdGE7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbG9jYXRpb25zIG9iamVjdCBleGlzdHNcbiAgICAgIGlmICghdm90ZURhdGEuYWxsb2NhdGlvbnMgfHwgdHlwZW9mIHZvdGVEYXRhLmFsbG9jYXRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1F1YWRyYXRpYyB2b3RpbmcgcmVxdWlyZXMgYWxsb2NhdGlvbnMnLFxuICAgICAgICAgIGVycm9yczogWydRdWFkcmF0aWMgdm90aW5nIHJlcXVpcmVzIGFsbG9jYXRpb25zJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbG9jYXRpb25zIGFyZSBudW1iZXJzXG4gICAgICBjb25zdCBhbGxvY2F0aW9ucyA9IHZvdGVEYXRhLmFsbG9jYXRpb25zO1xuICAgICAgbGV0IHRvdGFsVG9rZW5zID0gMDtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBbb3B0aW9uSWQsIHRva2Vuc10gb2YgT2JqZWN0LmVudHJpZXMoYWxsb2NhdGlvbnMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdG9rZW5zICE9PSAnbnVtYmVyJyB8fCB0b2tlbnMgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdBbGxvY2F0aW9ucyBtdXN0IGJlIG5vbi1uZWdhdGl2ZSBudW1iZXJzJyxcbiAgICAgICAgICAgIGVycm9yczogWydBbGxvY2F0aW9ucyBtdXN0IGJlIG5vbi1uZWdhdGl2ZSBudW1iZXJzJ10sXG4gICAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBleGlzdHMgKGhhbmRsZSBib3RoIG9wdGlvbiBJRHMgYW5kIGluZGljZXMpXG4gICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQob3B0aW9uSWQsIDEwKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uRXhpc3RzID0gIWlzTmFOKG9wdGlvbkluZGV4KSAmJiBvcHRpb25JbmRleCA+PSAwICYmIG9wdGlvbkluZGV4IDwgcG9sbC5vcHRpb25zLmxlbmd0aDtcbiAgICAgICAgY29uc3Qgb3B0aW9uRXhpc3RzQnlJZCA9IHBvbGwub3B0aW9ucy5zb21lKG9wdGlvbiA9PiBvcHRpb24uaWQgPT09IG9wdGlvbklkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghb3B0aW9uRXhpc3RzICYmICFvcHRpb25FeGlzdHNCeUlkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIG9wdGlvbiBzZWxlY3RlZCcsXG4gICAgICAgICAgICBlcnJvcnM6IFsnSW52YWxpZCBvcHRpb24gc2VsZWN0ZWQnXSxcbiAgICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdG90YWxUb2tlbnMgKz0gdG9rZW5zO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayB0b2tlbiBidWRnZXRcbiAgICAgIGNvbnN0IG1heFRva2VucyA9IHBvbGwudm90aW5nQ29uZmlnLnF1YWRyYXRpY0NyZWRpdHMgfHwgMTAwO1xuICAgICAgaWYgKHRvdGFsVG9rZW5zID4gbWF4VG9rZW5zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBgRXhjZWVkcyBtYXhpbXVtIHRva2VuIGJ1ZGdldCBvZiAke21heFRva2Vuc31gLFxuICAgICAgICAgIGVycm9yczogW2BFeGNlZWRzIG1heGltdW0gdG9rZW4gYnVkZ2V0IG9mICR7bWF4VG9rZW5zfWBdLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBkZXZMb2coJ1F1YWRyYXRpYyB2b3RlIHZhbGlkYXRlZCBzdWNjZXNzZnVsbHknLCB7XG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgIGFsbG9jYXRpb25zOiB2b3RlRGF0YS5hbGxvY2F0aW9ucyxcbiAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ1F1YWRyYXRpYyB2b3RlIHZhbGlkYXRpb24gZXJyb3I6JywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdRdWFkcmF0aWMgdm90ZSB2YWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgIGVycm9yczogWydRdWFkcmF0aWMgdm90ZSB2YWxpZGF0aW9uIGZhaWxlZCddLFxuICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3NWb3RlKHJlcXVlc3Q6IFZvdGVSZXF1ZXN0LCBwb2xsOiBQb2xsRGF0YSk6IFByb21pc2U8Vm90ZVJlc3BvbnNlPiB7XG4gICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCk7IC8vIFNhdGlzZnkgcmVxdWlyZS1hd2FpdCBydWxlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZvdGVEYXRhID0gcmVxdWVzdC52b3RlRGF0YTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHZvdGUgZGF0YSBmb3Igc3RvcmFnZVxuICAgICAgY29uc3Qgdm90ZVJlY29yZDogVm90ZURhdGEgPSB7XG4gICAgICAgIGlkOiBgdm90ZV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICAgIGFsbG9jYXRpb25zOiB2b3RlRGF0YS5hbGxvY2F0aW9ucyxcbiAgICAgICAgcHJpdmFjeUxldmVsOiAnc3RhbmRhcmQnLFxuICAgICAgICBhdWRpdFJlY2VpcHQ6IGBhdWRpdF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgaXBBZGRyZXNzOiByZXF1ZXN0LmlwQWRkcmVzcyxcbiAgICAgICAgdXNlckFnZW50OiByZXF1ZXN0LnVzZXJBZ2VudFxuICAgICAgfTtcblxuICAgICAgZGV2TG9nKCdRdWFkcmF0aWMgdm90ZSBwcm9jZXNzZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkLFxuICAgICAgICBhbGxvY2F0aW9uczogdm90ZURhdGEuYWxsb2NhdGlvbnMsXG4gICAgICAgIHZvdGVJZDogdm90ZVJlY29yZC5pZFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHZvdGVJZDogdm90ZVJlY29yZC5pZCxcbiAgICAgICAgbWVzc2FnZTogJ1ZvdGUgcmVjb3JkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ1F1YWRyYXRpYyB2b3RlIHByb2Nlc3NpbmcgZXJyb3I6JywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH0pO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3MgcXVhZHJhdGljIHZvdGUnLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHByb2Nlc3MgcXVhZHJhdGljIHZvdGUnLFxuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNhbGN1bGF0ZVJlc3VsdHMocG9sbDogUG9sbERhdGEsIHZvdGVzOiBWb3RlRGF0YVtdKTogUHJvbWlzZTxSZXN1bHRzRGF0YT4ge1xuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyBTYXRpc2Z5IHJlcXVpcmUtYXdhaXQgcnVsZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRyYWNraW5nIG9iamVjdHNcbiAgICAgIGNvbnN0IHRvdGFsU2NvcmVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgICBjb25zdCBvcHRpb25Wb3RlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgY29uc3Qgb3B0aW9uUGVyY2VudGFnZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBhbGwgb3B0aW9ucyB3aXRoIHplcm8gc2NvcmVzXG4gICAgICBwb2xsLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICB0b3RhbFNjb3Jlc1tvcHRpb24uaWRdID0gMDtcbiAgICAgICAgb3B0aW9uVm90ZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbi5pZF0gPSAwO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB2b3RlXG4gICAgICB2b3Rlcy5mb3JFYWNoKHZvdGUgPT4ge1xuICAgICAgICBpZiAodm90ZS52b3RlRGF0YT8uYWxsb2NhdGlvbnMpIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyh2b3RlLnZvdGVEYXRhLmFsbG9jYXRpb25zKS5mb3JFYWNoKChbb3B0aW9uSWQsIHRva2Vuc10pID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW5zID09PSAnbnVtYmVyJyAmJiB0b2tlbnMgPiAwKSB7XG4gICAgICAgICAgICAgIHRvdGFsU2NvcmVzW29wdGlvbklkXSA9ICh0b3RhbFNjb3Jlc1tvcHRpb25JZF0gfHwgMCkgKyB0b2tlbnM7XG4gICAgICAgICAgICAgIG9wdGlvblZvdGVzW29wdGlvbklkXSA9IChvcHRpb25Wb3Rlc1tvcHRpb25JZF0gfHwgMCkgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdG90YWxWb3RlcyA9IHZvdGVzPy5sZW5ndGggfHwgMDtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgICBpZiAodG90YWxWb3RlcyA+IDApIHtcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9uVm90ZXMpLmZvckVhY2gob3B0aW9uSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IHZvdGVzID0gb3B0aW9uVm90ZXNbb3B0aW9uSWRdIHx8IDA7XG4gICAgICAgICAgb3B0aW9uUGVyY2VudGFnZXNbb3B0aW9uSWRdID0gKHZvdGVzIC8gdG90YWxWb3RlcykgKiAxMDA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIHdpbm5lciAoaGlnaGVzdCB0b3RhbCBzY29yZSlcbiAgICAgIGxldCB3aW5uZXI6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGxldCB3aW5uZXJWb3RlcyA9IDA7XG4gICAgICBsZXQgd2lubmVyUGVyY2VudGFnZSA9IDA7XG5cbiAgICAgIGlmICh0b3RhbFZvdGVzID4gMCkge1xuICAgICAgICBPYmplY3QuZW50cmllcyh0b3RhbFNjb3JlcykuZm9yRWFjaCgoW29wdGlvbklkLCBzY29yZV0pID0+IHtcbiAgICAgICAgICBpZiAoc2NvcmUgPiB3aW5uZXJWb3Rlcykge1xuICAgICAgICAgICAgd2lubmVyID0gb3B0aW9uSWQ7XG4gICAgICAgICAgICB3aW5uZXJWb3RlcyA9IHNjb3JlO1xuICAgICAgICAgICAgd2lubmVyUGVyY2VudGFnZSA9IG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbklkXSB8fCAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdHM6IFBvbGxSZXN1bHRzID0ge1xuICAgICAgICB3aW5uZXIsXG4gICAgICAgIHdpbm5lclZvdGVzLFxuICAgICAgICB3aW5uZXJQZXJjZW50YWdlLFxuICAgICAgICBvcHRpb25Wb3RlcyxcbiAgICAgICAgb3B0aW9uUGVyY2VudGFnZXMsXG4gICAgICAgIGFic3RlbnRpb25zOiAwLFxuICAgICAgICBhYnN0ZW50aW9uUGVyY2VudGFnZTogMFxuICAgICAgfTtcblxuICAgICAgZGV2TG9nKCdRdWFkcmF0aWMgcmVzdWx0cyBjYWxjdWxhdGVkJywge1xuICAgICAgICBwb2xsSWQ6IHBvbGwuaWQsXG4gICAgICAgIHRvdGFsVm90ZXMsXG4gICAgICAgIHdpbm5lcixcbiAgICAgICAgd2lubmVyVm90ZXMsXG4gICAgICAgIHdpbm5lclBlcmNlbnRhZ2UsXG4gICAgICAgIGNhbGN1bGF0aW9uVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvbGxJZDogcG9sbC5pZCxcbiAgICAgICAgdm90aW5nTWV0aG9kOiBwb2xsLnZvdGluZ01ldGhvZCxcbiAgICAgICAgdG90YWxWb3RlcyxcbiAgICAgICAgcGFydGljaXBhdGlvblJhdGU6IHRvdGFsVm90ZXMgLyAxMDAsIC8vIE1vY2sgcGFydGljaXBhdGlvbiByYXRlXG4gICAgICAgIHJlc3VsdHMsXG4gICAgICAgIGNhbGN1bGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGNhbGN1bGF0aW9uVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgICBtZXRob2Q6ICdxdWFkcmF0aWMnXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGV2TG9nKCdRdWFkcmF0aWMgcmVzdWx0cyBjYWxjdWxhdGlvbiBlcnJvcjonLCB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikgfSk7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBlbXB0eSByZXN1bHRzIG9uIGVycm9yXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb2xsSWQ6IHBvbGwuaWQsXG4gICAgICAgIHZvdGluZ01ldGhvZDogcG9sbC52b3RpbmdNZXRob2QsXG4gICAgICAgIHRvdGFsVm90ZXM6IDAsXG4gICAgICAgIHBhcnRpY2lwYXRpb25SYXRlOiAwLFxuICAgICAgICByZXN1bHRzOiB7XG4gICAgICAgICAgd2lubmVyOiB1bmRlZmluZWQsXG4gICAgICAgICAgd2lubmVyVm90ZXM6IDAsXG4gICAgICAgICAgd2lubmVyUGVyY2VudGFnZTogMCxcbiAgICAgICAgICBvcHRpb25Wb3Rlczoge30sXG4gICAgICAgICAgb3B0aW9uUGVyY2VudGFnZXM6IHt9LFxuICAgICAgICAgIGFic3RlbnRpb25zOiAwLFxuICAgICAgICAgIGFic3RlbnRpb25QZXJjZW50YWdlOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGN1bGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGNhbGN1bGF0aW9uVGltZTogMCxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBnZXRDb25maWd1cmF0aW9uKCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0aG9kOiAncXVhZHJhdGljJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVm90ZXJzIGFsbG9jYXRlIHRva2VucyBhY3Jvc3Mgb3B0aW9ucyB3aXRoIHF1YWRyYXRpYyBjb3N0JyxcbiAgICAgIGFsbG93c011bHRpcGxlU2VsZWN0aW9uczogdHJ1ZSxcbiAgICAgIHJlcXVpcmVzUmFua2luZzogZmFsc2UsXG4gICAgICBtYXhTZWxlY3Rpb25zOiAndG9rZW4gYnVkZ2V0JyxcbiAgICAgIGNvc3RGdW5jdGlvbjogJ3F1YWRyYXRpYydcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbIlF1YWRyYXRpY1N0cmF0ZWd5IiwiZ2V0Vm90aW5nTWV0aG9kIiwidmFsaWRhdGVWb3RlIiwicmVxdWVzdCIsInBvbGwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInZvdGVEYXRhIiwiYWxsb2NhdGlvbnMiLCJ2YWxpZCIsImlzVmFsaWQiLCJlcnJvciIsImVycm9ycyIsInJlcXVpcmVzQXV0aGVudGljYXRpb24iLCJyZXF1aXJlc1Rva2VucyIsInRvdGFsVG9rZW5zIiwib3B0aW9uSWQiLCJ0b2tlbnMiLCJPYmplY3QiLCJlbnRyaWVzIiwib3B0aW9uSW5kZXgiLCJwYXJzZUludCIsIm9wdGlvbkV4aXN0cyIsImlzTmFOIiwib3B0aW9ucyIsImxlbmd0aCIsIm9wdGlvbkV4aXN0c0J5SWQiLCJzb21lIiwib3B0aW9uIiwiaWQiLCJtYXhUb2tlbnMiLCJ2b3RpbmdDb25maWciLCJxdWFkcmF0aWNDcmVkaXRzIiwiZGV2TG9nIiwicG9sbElkIiwidXNlcklkIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwicHJvY2Vzc1ZvdGUiLCJ2b3RlUmVjb3JkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInByaXZhY3lMZXZlbCIsImF1ZGl0UmVjZWlwdCIsInRpbWVzdGFtcCIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsInZvdGVJZCIsInN1Y2Nlc3MiLCJjYWxjdWxhdGVSZXN1bHRzIiwidm90ZXMiLCJzdGFydFRpbWUiLCJ0b3RhbFNjb3JlcyIsIm9wdGlvblZvdGVzIiwib3B0aW9uUGVyY2VudGFnZXMiLCJmb3JFYWNoIiwidm90ZSIsInRvdGFsVm90ZXMiLCJrZXlzIiwid2lubmVyIiwid2lubmVyVm90ZXMiLCJ3aW5uZXJQZXJjZW50YWdlIiwic2NvcmUiLCJyZXN1bHRzIiwiYWJzdGVudGlvbnMiLCJhYnN0ZW50aW9uUGVyY2VudGFnZSIsImNhbGN1bGF0aW9uVGltZSIsInZvdGluZ01ldGhvZCIsInBhcnRpY2lwYXRpb25SYXRlIiwiY2FsY3VsYXRlZEF0IiwidG9JU09TdHJpbmciLCJtZXRhZGF0YSIsIm1ldGhvZCIsInVuZGVmaW5lZCIsImdldENvbmZpZ3VyYXRpb24iLCJkZXNjcmlwdGlvbiIsImFsbG93c011bHRpcGxlU2VsZWN0aW9ucyIsInJlcXVpcmVzUmFua2luZyIsIm1heFNlbGVjdGlvbnMiLCJjb3N0RnVuY3Rpb24iXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztDQVFDOzs7OytCQWdCWUE7OztlQUFBQTs7O3dCQWRVO0FBY2hCLE1BQU1BO0lBRVhDLGtCQUFnQztRQUM5QixPQUFPO0lBQ1Q7SUFFQSxNQUFNQyxhQUFhQyxPQUFvQixFQUFFQyxJQUFjLEVBQTJCO1FBQ2hGLE1BQU1DLFFBQVFDLE9BQU8sSUFBSSw2QkFBNkI7UUFDdEQsSUFBSTtZQUNGLE1BQU1DLFdBQVdKLFFBQVFJLFFBQVE7WUFFakMscUNBQXFDO1lBQ3JDLElBQUksQ0FBQ0EsU0FBU0MsV0FBVyxJQUFJLE9BQU9ELFNBQVNDLFdBQVcsS0FBSyxVQUFVO2dCQUNyRSxPQUFPO29CQUNMQyxPQUFPO29CQUNQQyxTQUFTO29CQUNUQyxPQUFPO29CQUNQQyxRQUFRO3dCQUFDO3FCQUF3QztvQkFDakRDLHdCQUF3QjtvQkFDeEJDLGdCQUFnQjtnQkFDbEI7WUFDRjtZQUVBLG1DQUFtQztZQUNuQyxNQUFNTixjQUFjRCxTQUFTQyxXQUFXO1lBQ3hDLElBQUlPLGNBQWM7WUFFbEIsS0FBSyxNQUFNLENBQUNDLFVBQVVDLE9BQU8sSUFBSUMsT0FBT0MsT0FBTyxDQUFDWCxhQUFjO2dCQUM1RCxJQUFJLE9BQU9TLFdBQVcsWUFBWUEsU0FBUyxHQUFHO29CQUM1QyxPQUFPO3dCQUNMUixPQUFPO3dCQUNQQyxTQUFTO3dCQUNUQyxPQUFPO3dCQUNQQyxRQUFROzRCQUFDO3lCQUEyQzt3QkFDcERDLHdC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