352e69b4415305ba7680e196e1dd3bec
/**
 * Integration Tests - API + Database (20% of tests)
 * 
 * These tests focus on how components work together.
 * Test API endpoints with real database operations.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _supabasejs = require("@supabase/supabase-js");
const _server = require("next/server");
const _route = require("../../../../app/api/polls/route");
// Set real Supabase credentials directly for testing
process.env.NEXT_PUBLIC_SUPABASE_URL = "REDACTED";
process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = "REDACTED";
// Use real Supabase client with real credentials
let supabase;
try {
    supabase = (0, _supabasejs.createClient)(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);
} catch (error) {
    console.warn("Real Supabase credentials not set up. This test requires real credentials.");
    console.warn("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.");
}
(0, _globals.describe)("Integration Tests - API + Database", ()=>{
    let testUser;
    let testPollId = null;
    (0, _globals.beforeAll)(async ()=>{
        if (!supabase) {
            console.warn("Skipping tests - Real Supabase credentials not set up");
            return;
        }
        // Login with real test user
        console.log("Integration: Logging in with real test user...");
        const { data, error } = await supabase.auth.signInWithPassword({
            email: "test@example.com",
            password: "testpassword"
        });
        if (error) {
            console.error("Failed to login with test user:", error);
            throw new Error(`Failed to login with test user: ${error.message}`);
        }
        testUser = data.user;
        console.log("Integration: Successfully logged in with test user:", testUser.email);
    });
    (0, _globals.afterAll)(async ()=>{
        if (!supabase) return;
        // Clean up test data
        if (testPollId) {
            console.log("Integration: Cleaning up test poll:", testPollId);
            await supabase.from("polls").delete().eq("id", testPollId);
        }
        // Sign out
        await supabase.auth.signOut();
    });
    (0, _globals.beforeEach)(()=>{
        // Reset test poll ID
        testPollId = null;
    });
    (0, _globals.afterEach)(async ()=>{
        if (!supabase) return;
        // Clean up any test data created during the test
        if (testPollId) {
            await supabase.from("polls").delete().eq("id", testPollId);
            testPollId = null;
        }
    });
    (0, _globals.describe)("API + Database Integration", ()=>{
        (0, _globals.it)("should create poll and retrieve it via API", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: API + Database
            // 1. Create poll via database
            const pollData = {
                title: "Integration Test Poll",
                options: [
                    {
                        text: "Integration Option 1",
                        votes: 0
                    },
                    {
                        text: "Integration Option 2",
                        votes: 0
                    }
                ],
                created_by: testUser.id,
                total_votes: 0,
                status: "active"
            };
            const { data: createdPoll, error: createError } = await supabase.from("polls").insert(pollData).select().single();
            (0, _globals.expect)(createError).toBeNull();
            (0, _globals.expect)(createdPoll).toBeDefined();
            (0, _globals.expect)(createdPoll.title).toBe("Integration Test Poll");
            // Store for cleanup
            testPollId = createdPoll.id;
            // 2. Retrieve poll via API
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            console.log("Integration: API response:", responseData);
            // 3. Verify integration
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.success).toBe(true);
            (0, _globals.expect)(Array.isArray(responseData.polls)).toBe(true);
            // Check if our created poll is in the results
            const foundPoll = responseData.polls.find((poll)=>poll.poll_id === createdPoll.id);
            (0, _globals.expect)(foundPoll).toBeDefined();
        });
        (0, _globals.it)("should handle poll creation with voting integration", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: Poll creation + Voting
            // 1. Create poll
            const pollData = {
                title: "Voting Integration Poll",
                options: [
                    {
                        text: "Vote Option 1",
                        votes: 0
                    },
                    {
                        text: "Vote Option 2",
                        votes: 0
                    }
                ],
                created_by: testUser.id,
                total_votes: 0,
                status: "active"
            };
            const { data: poll, error: pollError } = await supabase.from("polls").insert(pollData).select().single();
            (0, _globals.expect)(pollError).toBeNull();
            (0, _globals.expect)(poll).toBeDefined();
            // Store for cleanup
            testPollId = poll.id;
            // 2. Add votes
            const voteData = {
                poll_id: poll.id,
                user_id: testUser.id,
                option_index: 0,
                created_at: new Date().toISOString()
            };
            const { data: vote, error: voteError } = await supabase.from("votes").insert(voteData).select().single();
            (0, _globals.expect)(voteError).toBeNull();
            (0, _globals.expect)(vote).toBeDefined();
            // 3. Update poll vote count
            const { data: updatedPoll, error: updateError } = await supabase.from("polls").update({
                total_votes: 1
            }).eq("id", poll.id).select().single();
            (0, _globals.expect)(updateError).toBeNull();
            (0, _globals.expect)(updatedPoll.total_votes).toBe(1);
            // 4. Verify integration
            const { data: finalPoll, error: finalError } = await supabase.from("polls").select("*").eq("id", poll.id).single();
            (0, _globals.expect)(finalError).toBeNull();
            (0, _globals.expect)(finalPoll.total_votes).toBe(1);
        });
        (0, _globals.it)("should handle poll results calculation integration", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: Poll + Votes + Results
            // 1. Create poll
            const pollData = {
                title: "Results Integration Poll",
                options: [
                    {
                        text: "Results Option 1",
                        votes: 0
                    },
                    {
                        text: "Results Option 2",
                        votes: 0
                    }
                ],
                created_by: testUser.id,
                total_votes: 0,
                status: "active"
            };
            const { data: poll, error: pollError } = await supabase.from("polls").insert(pollData).select().single();
            (0, _globals.expect)(pollError).toBeNull();
            (0, _globals.expect)(poll).toBeDefined();
            // Store for cleanup
            testPollId = poll.id;
            // 2. Add multiple votes
            const votes = [
                {
                    poll_id: poll.id,
                    user_id: testUser.id,
                    option_index: 0
                },
                {
                    poll_id: poll.id,
                    user_id: "user2",
                    option_index: 0
                },
                {
                    poll_id: poll.id,
                    user_id: "user3",
                    option_index: 1
                }
            ];
            for (const vote of votes){
                const { error: voteError } = await supabase.from("votes").insert(vote);
                (0, _globals.expect)(voteError).toBeNull();
            }
            // 3. Calculate results
            const { data: allVotes, error: votesError } = await supabase.from("votes").select("*").eq("poll_id", poll.id);
            (0, _globals.expect)(votesError).toBeNull();
            (0, _globals.expect)(allVotes).toHaveLength(3);
            // 4. Verify integration
            const option1Votes = allVotes.filter((vote)=>vote.option_index === 0).length;
            const option2Votes = allVotes.filter((vote)=>vote.option_index === 1).length;
            (0, _globals.expect)(option1Votes).toBe(2);
            (0, _globals.expect)(option2Votes).toBe(1);
        });
    });
    (0, _globals.describe)("API Error Handling Integration", ()=>{
        (0, _globals.it)("should handle database errors gracefully", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: API error handling
            // 1. Test invalid poll data
            const invalidPollData = {
                // Missing required fields
                options: [
                    {
                        text: "Invalid Option 1"
                    }
                ],
                created_by: testUser.id
            };
            const { data, error } = await supabase.from("polls").insert(invalidPollData).select().single();
            // 2. Verify error handling
            (0, _globals.expect)(error).not.toBeNull();
            (0, _globals.expect)(error.message).toContain("title");
            // 3. Test API error response
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // API should still work despite database error
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.success).toBe(true);
        });
        (0, _globals.it)("should handle authentication errors integration", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: Authentication + API
            // 1. Test with invalid user
            const { data, error } = await supabase.auth.signInWithPassword({
                email: "invalid@example.com",
                password: "invalidpassword"
            });
            // 2. Verify authentication error
            (0, _globals.expect)(error).not.toBeNull();
            (0, _globals.expect)(error.message).toContain("Invalid login credentials");
            // 3. Test API with invalid authentication
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // API should still work (public endpoint)
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.success).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L2ludGVncmF0aW9uL2FwaS9wb2xscy1pbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZWdyYXRpb24gVGVzdHMgLSBBUEkgKyBEYXRhYmFzZSAoMjAlIG9mIHRlc3RzKVxuICogXG4gKiBUaGVzZSB0ZXN0cyBmb2N1cyBvbiBob3cgY29tcG9uZW50cyB3b3JrIHRvZ2V0aGVyLlxuICogVGVzdCBBUEkgZW5kcG9pbnRzIHdpdGggcmVhbCBkYXRhYmFzZSBvcGVyYXRpb25zLlxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVBbGwsIGFmdGVyQWxsLCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEdFVCwgUE9TVCB9IGZyb20gJ0AvYXBwL2FwaS9wb2xscy9yb3V0ZSc7XG5cbi8vIFNldCByZWFsIFN1cGFiYXNlIGNyZWRlbnRpYWxzIGRpcmVjdGx5IGZvciB0ZXN0aW5nXG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgPSAnaHR0cHM6Ly9tdXF3cmVoeXdqcmJhZWVyamdmYi5zdXBhYmFzZS5jbyc7XG5wcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSA9ICdzYl9wdWJsaXNoYWJsZV90Sk9wR08ySVBqdWpKRFFvdTQ0UF9nX0JnYlRGQmZjJztcblxuLy8gVXNlIHJlYWwgU3VwYWJhc2UgY2xpZW50IHdpdGggcmVhbCBjcmVkZW50aWFsc1xubGV0IHN1cGFiYXNlOiBhbnk7XG5cbnRyeSB7XG4gIHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhXG4gICk7XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLndhcm4oJ1JlYWwgU3VwYWJhc2UgY3JlZGVudGlhbHMgbm90IHNldCB1cC4gVGhpcyB0ZXN0IHJlcXVpcmVzIHJlYWwgY3JlZGVudGlhbHMuJyk7XG4gIGNvbnNvbGUud2FybignUGxlYXNlIHNldCBORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgYW5kIE5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKTtcbn1cblxuZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3RzIC0gQVBJICsgRGF0YWJhc2UnLCAoKSA9PiB7XG4gIGxldCB0ZXN0VXNlcjogYW55O1xuICBsZXQgdGVzdFBvbGxJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NraXBwaW5nIHRlc3RzIC0gUmVhbCBTdXBhYmFzZSBjcmVkZW50aWFscyBub3Qgc2V0IHVwJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTG9naW4gd2l0aCByZWFsIHRlc3QgdXNlclxuICAgIGNvbnNvbGUubG9nKCdJbnRlZ3JhdGlvbjogTG9nZ2luZyBpbiB3aXRoIHJlYWwgdGVzdCB1c2VyLi4uJyk7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgIHBhc3N3b3JkOiAndGVzdHBhc3N3b3JkJ1xuICAgIH0pO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9naW4gd2l0aCB0ZXN0IHVzZXI6JywgZXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9naW4gd2l0aCB0ZXN0IHVzZXI6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICB0ZXN0VXNlciA9IGRhdGEudXNlcjtcbiAgICBjb25zb2xlLmxvZygnSW50ZWdyYXRpb246IFN1Y2Nlc3NmdWxseSBsb2dnZWQgaW4gd2l0aCB0ZXN0IHVzZXI6JywgdGVzdFVzZXIuZW1haWwpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFzdXBhYmFzZSkgcmV0dXJuO1xuXG4gICAgLy8gQ2xlYW4gdXAgdGVzdCBkYXRhXG4gICAgaWYgKHRlc3RQb2xsSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdJbnRlZ3JhdGlvbjogQ2xlYW5pbmcgdXAgdGVzdCBwb2xsOicsIHRlc3RQb2xsSWQpO1xuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgncG9sbHMnKS5kZWxldGUoKS5lcSgnaWQnLCB0ZXN0UG9sbElkKTtcbiAgICB9XG5cbiAgICAvLyBTaWduIG91dFxuICAgIGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpO1xuICB9KTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBSZXNldCB0ZXN0IHBvbGwgSURcbiAgICB0ZXN0UG9sbElkID0gbnVsbDtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXN1cGFiYXNlKSByZXR1cm47XG5cbiAgICAvLyBDbGVhbiB1cCBhbnkgdGVzdCBkYXRhIGNyZWF0ZWQgZHVyaW5nIHRoZSB0ZXN0XG4gICAgaWYgKHRlc3RQb2xsSWQpIHtcbiAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3BvbGxzJykuZGVsZXRlKCkuZXEoJ2lkJywgdGVzdFBvbGxJZCk7XG4gICAgICB0ZXN0UG9sbElkID0gbnVsbDtcbiAgICB9XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBUEkgKyBEYXRhYmFzZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBwb2xsIGFuZCByZXRyaWV2ZSBpdCB2aWEgQVBJJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1NraXBwaW5nIHRlc3QgLSBSZWFsIFN1cGFiYXNlIGNyZWRlbnRpYWxzIG5vdCBzZXQgdXAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJbnRlZ3JhdGlvbiB0ZXN0OiBBUEkgKyBEYXRhYmFzZVxuICAgICAgLy8gMS4gQ3JlYXRlIHBvbGwgdmlhIGRhdGFiYXNlXG4gICAgICBjb25zdCBwb2xsRGF0YSA9IHtcbiAgICAgICAgdGl0bGU6ICdJbnRlZ3JhdGlvbiBUZXN0IFBvbGwnLFxuICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgeyB0ZXh0OiAnSW50ZWdyYXRpb24gT3B0aW9uIDEnLCB2b3RlczogMCB9LFxuICAgICAgICAgIHsgdGV4dDogJ0ludGVncmF0aW9uIE9wdGlvbiAyJywgdm90ZXM6IDAgfVxuICAgICAgICBdLFxuICAgICAgICBjcmVhdGVkX2J5OiB0ZXN0VXNlci5pZCxcbiAgICAgICAgdG90YWxfdm90ZXM6IDAsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogY3JlYXRlZFBvbGwsIGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BvbGxzJylcbiAgICAgICAgLmluc2VydChwb2xsRGF0YSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KGNyZWF0ZUVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KGNyZWF0ZWRQb2xsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGNyZWF0ZWRQb2xsLnRpdGxlKS50b0JlKCdJbnRlZ3JhdGlvbiBUZXN0IFBvbGwnKTtcblxuICAgICAgLy8gU3RvcmUgZm9yIGNsZWFudXBcbiAgICAgIHRlc3RQb2xsSWQgPSBjcmVhdGVkUG9sbC5pZDtcblxuICAgICAgLy8gMi4gUmV0cmlldmUgcG9sbCB2aWEgQVBJXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgY29uc29sZS5sb2coJ0ludGVncmF0aW9uOiBBUEkgcmVzcG9uc2U6JywgcmVzcG9uc2VEYXRhKTtcblxuICAgICAgLy8gMy4gVmVyaWZ5IGludGVncmF0aW9uXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnN1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZURhdGEucG9sbHMpKS50b0JlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBpZiBvdXIgY3JlYXRlZCBwb2xsIGlzIGluIHRoZSByZXN1bHRzXG4gICAgICBjb25zdCBmb3VuZFBvbGwgPSByZXNwb25zZURhdGEucG9sbHMuZmluZCgocG9sbDogYW55KSA9PiBwb2xsLnBvbGxfaWQgPT09IGNyZWF0ZWRQb2xsLmlkKTtcbiAgICAgIGV4cGVjdChmb3VuZFBvbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwb2xsIGNyZWF0aW9uIHdpdGggdm90aW5nIGludGVncmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1NraXBwaW5nIHRlc3QgLSBSZWFsIFN1cGFiYXNlIGNyZWRlbnRpYWxzIG5vdCBzZXQgdXAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJbnRlZ3JhdGlvbiB0ZXN0OiBQb2xsIGNyZWF0aW9uICsgVm90aW5nXG4gICAgICAvLyAxLiBDcmVhdGUgcG9sbFxuICAgICAgY29uc3QgcG9sbERhdGEgPSB7XG4gICAgICAgIHRpdGxlOiAnVm90aW5nIEludGVncmF0aW9uIFBvbGwnLFxuICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgeyB0ZXh0OiAnVm90ZSBPcHRpb24gMScsIHZvdGVzOiAwIH0sXG4gICAgICAgICAgeyB0ZXh0OiAnVm90ZSBPcHRpb24gMicsIHZvdGVzOiAwIH1cbiAgICAgICAgXSxcbiAgICAgICAgY3JlYXRlZF9ieTogdGVzdFVzZXIuaWQsXG4gICAgICAgIHRvdGFsX3ZvdGVzOiAwLFxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IGRhdGE6IHBvbGwsIGVycm9yOiBwb2xsRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAgIC5pbnNlcnQocG9sbERhdGEpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdChwb2xsRXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QocG9sbCkudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gU3RvcmUgZm9yIGNsZWFudXBcbiAgICAgIHRlc3RQb2xsSWQgPSBwb2xsLmlkO1xuXG4gICAgICAvLyAyLiBBZGQgdm90ZXNcbiAgICAgIGNvbnN0IHZvdGVEYXRhID0ge1xuICAgICAgICBwb2xsX2lkOiBwb2xsLmlkLFxuICAgICAgICB1c2VyX2lkOiB0ZXN0VXNlci5pZCxcbiAgICAgICAgb3B0aW9uX2luZGV4OiAwLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogdm90ZSwgZXJyb3I6IHZvdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3ZvdGVzJylcbiAgICAgICAgLmluc2VydCh2b3RlRGF0YSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KHZvdGVFcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdCh2b3RlKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyAzLiBVcGRhdGUgcG9sbCB2b3RlIGNvdW50XG4gICAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRQb2xsLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAgIC51cGRhdGUoeyB0b3RhbF92b3RlczogMSB9KVxuICAgICAgICAuZXEoJ2lkJywgcG9sbC5pZClcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KHVwZGF0ZUVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHVwZGF0ZWRQb2xsLnRvdGFsX3ZvdGVzKS50b0JlKDEpO1xuXG4gICAgICAvLyA0LiBWZXJpZnkgaW50ZWdyYXRpb25cbiAgICAgIGNvbnN0IHsgZGF0YTogZmluYWxQb2xsLCBlcnJvcjogZmluYWxFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BvbGxzJylcbiAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgIC5lcSgnaWQnLCBwb2xsLmlkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdChmaW5hbEVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KGZpbmFsUG9sbC50b3RhbF92b3RlcykudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBvbGwgcmVzdWx0cyBjYWxjdWxhdGlvbiBpbnRlZ3JhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTa2lwcGluZyB0ZXN0IC0gUmVhbCBTdXBhYmFzZSBjcmVkZW50aWFscyBub3Qgc2V0IHVwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW50ZWdyYXRpb24gdGVzdDogUG9sbCArIFZvdGVzICsgUmVzdWx0c1xuICAgICAgLy8gMS4gQ3JlYXRlIHBvbGxcbiAgICAgIGNvbnN0IHBvbGxEYXRhID0ge1xuICAgICAgICB0aXRsZTogJ1Jlc3VsdHMgSW50ZWdyYXRpb24gUG9sbCcsXG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IHRleHQ6ICdSZXN1bHRzIE9wdGlvbiAxJywgdm90ZXM6IDAgfSxcbiAgICAgICAgICB7IHRleHQ6ICdSZXN1bHRzIE9wdGlvbiAyJywgdm90ZXM6IDAgfVxuICAgICAgICBdLFxuICAgICAgICBjcmVhdGVkX2J5OiB0ZXN0VXNlci5pZCxcbiAgICAgICAgdG90YWxfdm90ZXM6IDAsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogcG9sbCwgZXJyb3I6IHBvbGxFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BvbGxzJylcbiAgICAgICAgLmluc2VydChwb2xsRGF0YSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgZXhwZWN0KHBvbGxFcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChwb2xsKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgICAvLyBTdG9yZSBmb3IgY2xlYW51cFxuICAgICAgdGVzdFBvbGxJZCA9IHBvbGwuaWQ7XG5cbiAgICAgIC8vIDIuIEFkZCBtdWx0aXBsZSB2b3Rlc1xuICAgICAgY29uc3Qgdm90ZXMgPSBbXG4gICAgICAgIHsgcG9sbF9pZDogcG9sbC5pZCwgdXNlcl9pZDogdGVzdFVzZXIuaWQsIG9wdGlvbl9pbmRleDogMCB9LFxuICAgICAgICB7IHBvbGxfaWQ6IHBvbGwuaWQsIHVzZXJfaWQ6ICd1c2VyMicsIG9wdGlvbl9pbmRleDogMCB9LFxuICAgICAgICB7IHBvbGxfaWQ6IHBvbGwuaWQsIHVzZXJfaWQ6ICd1c2VyMycsIG9wdGlvbl9pbmRleDogMSB9XG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IHZvdGUgb2Ygdm90ZXMpIHtcbiAgICAgICAgY29uc3QgeyBlcnJvcjogdm90ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCd2b3RlcycpXG4gICAgICAgICAgLmluc2VydCh2b3RlKTtcblxuICAgICAgICBleHBlY3Qodm90ZUVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgfVxuXG4gICAgICAvLyAzLiBDYWxjdWxhdGUgcmVzdWx0c1xuICAgICAgY29uc3QgeyBkYXRhOiBhbGxWb3RlcywgZXJyb3I6IHZvdGVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd2b3RlcycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ3BvbGxfaWQnLCBwb2xsLmlkKTtcblxuICAgICAgZXhwZWN0KHZvdGVzRXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoYWxsVm90ZXMpLnRvSGF2ZUxlbmd0aCgzKTtcblxuICAgICAgLy8gNC4gVmVyaWZ5IGludGVncmF0aW9uXG4gICAgICBjb25zdCBvcHRpb24xVm90ZXMgPSBhbGxWb3Rlcy5maWx0ZXIoKHZvdGU6IGFueSkgPT4gdm90ZS5vcHRpb25faW5kZXggPT09IDApLmxlbmd0aDtcbiAgICAgIGNvbnN0IG9wdGlvbjJWb3RlcyA9IGFsbFZvdGVzLmZpbHRlcigodm90ZTogYW55KSA9PiB2b3RlLm9wdGlvbl9pbmRleCA9PT0gMSkubGVuZ3RoO1xuXG4gICAgICBleHBlY3Qob3B0aW9uMVZvdGVzKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KG9wdGlvbjJWb3RlcykudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FQSSBFcnJvciBIYW5kbGluZyBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTa2lwcGluZyB0ZXN0IC0gUmVhbCBTdXBhYmFzZSBjcmVkZW50aWFscyBub3Qgc2V0IHVwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW50ZWdyYXRpb24gdGVzdDogQVBJIGVycm9yIGhhbmRsaW5nXG4gICAgICAvLyAxLiBUZXN0IGludmFsaWQgcG9sbCBkYXRhXG4gICAgICBjb25zdCBpbnZhbGlkUG9sbERhdGEgPSB7XG4gICAgICAgIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IHRleHQ6ICdJbnZhbGlkIE9wdGlvbiAxJyB9XG4gICAgICAgIF0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHRlc3RVc2VyLmlkXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncG9sbHMnKVxuICAgICAgICAuaW5zZXJ0KGludmFsaWRQb2xsRGF0YSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgLy8gMi4gVmVyaWZ5IGVycm9yIGhhbmRsaW5nXG4gICAgICBleHBlY3QoZXJyb3IpLm5vdC50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbigndGl0bGUnKTtcblxuICAgICAgLy8gMy4gVGVzdCBBUEkgZXJyb3IgcmVzcG9uc2VcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBUEkgc2hvdWxkIHN0aWxsIHdvcmsgZGVzcGl0ZSBkYXRhYmFzZSBlcnJvclxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aGVudGljYXRpb24gZXJyb3JzIGludGVncmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1NraXBwaW5nIHRlc3QgLSBSZWFsIFN1cGFiYXNlIGNyZWRlbnRpYWxzIG5vdCBzZXQgdXAnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBJbnRlZ3JhdGlvbiB0ZXN0OiBBdXRoZW50aWNhdGlvbiArIEFQSVxuICAgICAgLy8gMS4gVGVzdCB3aXRoIGludmFsaWQgdXNlclxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgICAgICBlbWFpbDogJ2ludmFsaWRAZXhhbXBsZS5jb20nLFxuICAgICAgICBwYXNzd29yZDogJ2ludmFsaWRwYXNzd29yZCdcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyLiBWZXJpZnkgYXV0aGVudGljYXRpb24gZXJyb3JcbiAgICAgIGV4cGVjdChlcnJvcikubm90LnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9Db250YWluKCdJbnZhbGlkIGxvZ2luIGNyZWRlbnRpYWxzJyk7XG5cbiAgICAgIC8vIDMuIFRlc3QgQVBJIHdpdGggaW52YWxpZCBhdXRoZW50aWNhdGlvblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb2xscycpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIEFQSSBzaG91bGQgc3RpbGwgd29yayAocHVibGljIGVuZHBvaW50KVxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiY3JlYXRlQ2xpZW50IiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsImRlc2NyaWJlIiwidGVzdFVzZXIiLCJ0ZXN0UG9sbElkIiwiYmVmb3JlQWxsIiwibG9nIiwiZGF0YSIsImF1dGgiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJlbWFpbCIsInBhc3N3b3JkIiwiRXJyb3IiLCJtZXNzYWdlIiwidXNlciIsImFmdGVyQWxsIiwiZnJvbSIsImRlbGV0ZSIsImVxIiwic2lnbk91dCIsImJlZm9yZUVhY2giLCJhZnRlckVhY2giLCJpdCIsInBvbGxEYXRhIiwidGl0bGUiLCJvcHRpb25zIiwidGV4dCIsInZvdGVzIiwiY3JlYXRlZF9ieSIsImlkIiwidG90YWxfdm90ZXMiLCJzdGF0dXMiLCJjcmVhdGVkUG9sbCIsImNyZWF0ZUVycm9yIiwiaW5zZXJ0Iiwic2VsZWN0Iiwic2luZ2xlIiwiZXhwZWN0IiwidG9CZU51bGwiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJyZXF1ZXN0IiwiTmV4dFJlcXVlc3QiLCJyZXNwb25zZSIsIkdFVCIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJzdWNjZXNzIiwiQXJyYXkiLCJpc0FycmF5IiwicG9sbHMiLCJmb3VuZFBvbGwiLCJmaW5kIiwicG9sbCIsInBvbGxfaWQiLCJwb2xsRXJyb3IiLCJ2b3RlRGF0YSIsInVzZXJfaWQiLCJvcHRpb25faW5kZXgiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidm90ZSIsInZvdGVFcnJvciIsInVwZGF0ZWRQb2xsIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJmaW5hbFBvbGwiLCJmaW5hbEVycm9yIiwiYWxsVm90ZXMiLCJ2b3Rlc0Vycm9yIiwidG9IYXZlTGVuZ3RoIiwib3B0aW9uMVZvdGVzIiwiZmlsdGVyIiwibGVuZ3RoIiwib3B0aW9uMlZvdGVzIiwiaW52YWxpZFBvbGxEYXRhIiwibm90IiwidG9Db250YWluIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7Ozt5QkFFZ0Y7NEJBQ3BEO3dCQUNEO3VCQUNGO0FBRTFCLHFEQUFxRDtBQUNyREEsUUFBUUMsR0FBRyxDQUFDQyx3QkFBd0IsR0FBRztBQUN2Q0YsUUFBUUMsR0FBRyxDQUFDRSw2QkFBNkIsR0FBRztBQUU1QyxpREFBaUQ7QUFDakQsSUFBSUM7QUFFSixJQUFJO0lBQ0ZBLFdBQVdDLElBQUFBLHdCQUFZLEVBQ3JCTCxRQUFRQyxHQUFHLENBQUNDLHdCQUF3QixFQUNwQ0YsUUFBUUMsR0FBRyxDQUFDRSw2QkFBNkI7QUFFN0MsRUFBRSxPQUFPRyxPQUFPO0lBQ2RDLFFBQVFDLElBQUksQ0FBQztJQUNiRCxRQUFRQyxJQUFJLENBQUM7QUFDZjtBQUVBQyxJQUFBQSxpQkFBUSxFQUFDLHNDQUFzQztJQUM3QyxJQUFJQztJQUNKLElBQUlDLGFBQTRCO0lBRWhDQyxJQUFBQSxrQkFBUyxFQUFDO1FBQ1IsSUFBSSxDQUFDUixVQUFV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