910b3b69c5d8cc8bd62cff83dd7d9099
/**
 * Polls CRUD API Tests
 * 
 * Tests the polls API endpoints including:
 * - GET /api/polls (list polls)
 * - POST /api/polls (create poll)
 * - GET /api/polls/[id] (get poll)
 * - PUT /api/polls/[id] (update poll)
 * - DELETE /api/polls/[id] (delete poll)
 */ "use strict";
jest.mock("@/utils/supabase/server", ()=>({
        getSupabaseServerClient: jest.fn(()=>Promise.resolve(mockSupabaseClient))
    }));
// Mock authentication
jest.mock("@/lib/core/auth/server-actions", ()=>({
        getUser: jest.fn(()=>Promise.resolve({
                id: "user-123",
                email: "test@example.com"
            }))
    }));
// Mock logger
jest.mock("@/lib/utils/logger", ()=>({
        devLog: jest.fn(),
        logger: {
            info: jest.fn(),
            error: jest.fn()
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _server = require("next/server");
const _route = require("../../../../../app/api/polls/route");
// Mock Supabase client
const mockSupabaseClient = {
    from: jest.fn(()=>({
            select: jest.fn(()=>({
                    eq: jest.fn(()=>({
                            order: jest.fn(()=>({
                                    limit: jest.fn(()=>({
                                            range: jest.fn().mockResolvedValue({
                                                data: [],
                                                error: null
                                            })
                                        }))
                                }))
                        }))
                })),
            insert: jest.fn(()=>({
                    select: jest.fn().mockResolvedValue({
                        data: [
                            {
                                id: "poll-123",
                                title: "Test Poll"
                            }
                        ],
                        error: null
                    })
                }))
        })),
    auth: {
        getUser: jest.fn()
    }
};
(0, _globals.describe)("Polls CRUD API", ()=>{
    (0, _globals.beforeEach)(()=>{
        jest.clearAllMocks();
    });
    (0, _globals.afterEach)(()=>{
        jest.resetAllMocks();
    });
    (0, _globals.describe)("GET /api/polls - List Polls", ()=>{
        (0, _globals.it)("should return list of polls with pagination", async ()=>{
            const mockPolls = [
                {
                    id: "poll-1",
                    title: "Test Poll 1",
                    description: "Description 1",
                    status: "active",
                    created_at: "2025-01-01T00:00:00Z",
                    total_votes: 10
                },
                {
                    id: "poll-2",
                    title: "Test Poll 2",
                    description: "Description 2",
                    status: "ended",
                    created_at: "2025-01-02T00:00:00Z",
                    total_votes: 25
                }
            ];
            mockSupabaseClient.from.mockReturnValue({
                select: jest.fn(()=>({
                        eq: jest.fn(()=>({
                                order: jest.fn(()=>({
                                        limit: jest.fn(()=>({
                                                range: jest.fn().mockResolvedValue({
                                                    data: mockPolls,
                                                    error: null
                                                })
                                            }))
                                    }))
                            }))
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls?page=1&limit=10");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.polls).toHaveLength(2);
            (0, _globals.expect)(responseData.polls[0].title).toBe("Test Poll 1");
            (0, _globals.expect)(responseData.polls[1].title).toBe("Test Poll 2");
        });
        (0, _globals.it)("should handle empty poll list", async ()=>{
            mockSupabaseClient.from.mockReturnValue({
                select: jest.fn(()=>({
                        eq: jest.fn(()=>({
                                order: jest.fn(()=>({
                                        limit: jest.fn(()=>({
                                                range: jest.fn().mockResolvedValue({
                                                    data: [],
                                                    error: null
                                                })
                                            }))
                                    }))
                            }))
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.polls).toHaveLength(0);
        });
        (0, _globals.it)("should handle database errors", async ()=>{
            mockSupabaseClient.from.mockReturnValue({
                select: jest.fn(()=>({
                        eq: jest.fn(()=>({
                                order: jest.fn(()=>({
                                        limit: jest.fn(()=>({
                                                range: jest.fn().mockResolvedValue({
                                                    data: null,
                                                    error: {
                                                        message: "Database error"
                                                    }
                                                })
                                            }))
                                    }))
                            }))
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(500);
            (0, _globals.expect)(responseData.error).toBe("Failed to fetch polls");
        });
    });
    (0, _globals.describe)("POST /api/polls - Create Poll", ()=>{
        (0, _globals.it)("should create a new poll with valid data", async ()=>{
            const mockPoll = {
                id: "poll-123",
                title: "New Test Poll",
                description: "Test description",
                options: [
                    {
                        text: "Option 1"
                    },
                    {
                        text: "Option 2"
                    }
                ],
                voting_method: "single",
                category: "general",
                privacy_level: "public",
                created_by: "user-123"
            };
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: [
                                mockPoll
                            ],
                            error: null
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    description: "Test description",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ],
                    votingMethod: "single",
                    category: "general",
                    privacyLevel: "public"
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(201);
            (0, _globals.expect)(responseData.poll.title).toBe("New Test Poll");
            (0, _globals.expect)(responseData.poll.id).toBe("poll-123");
        });
        (0, _globals.it)("should reject poll creation without authentication", async ()=>{
            const { getUser } = require("@/lib/core/auth/server-actions");
            getUser.mockResolvedValue(null);
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(401);
            (0, _globals.expect)(responseData.error).toBe("Authentication required to create polls");
        });
        (0, _globals.it)("should reject poll creation with missing title", async ()=>{
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toBe("Title and at least 2 options are required");
        });
        (0, _globals.it)("should reject poll creation with insufficient options", async ()=>{
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toBe("Title and at least 2 options are required");
        });
        (0, _globals.it)("should reject poll creation with empty options", async ()=>{
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: []
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toBe("Title and at least 2 options are required");
        });
        (0, _globals.it)("should handle inactive user", async ()=>{
            const { getUser } = require("@/lib/core/auth/server-actions");
            getUser.mockResolvedValue({
                id: "user-123",
                email: "test@example.com"
            });
            // Mock inactive user profile
            mockSupabaseClient.from.mockReturnValue({
                select: jest.fn(()=>({
                        eq: jest.fn(()=>({
                                single: jest.fn().mockResolvedValue({
                                    data: {
                                        is_active: false
                                    },
                                    error: null
                                })
                            }))
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(403);
            (0, _globals.expect)(responseData.error).toBe("Active account required to create polls");
        });
        (0, _globals.it)("should handle database errors during creation", async ()=>{
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: null,
                            error: {
                                message: "Database error"
                            }
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(500);
            (0, _globals.expect)(responseData.error).toBe("Failed to create poll");
        });
        (0, _globals.it)("should sanitize poll options", async ()=>{
            const mockPoll = {
                id: "poll-123",
                title: "New Test Poll",
                options: [
                    {
                        text: "Option 1"
                    },
                    {
                        text: "Option 2"
                    }
                ]
            };
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: [
                                mockPoll
                            ],
                            error: null
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        },
                        {
                            text: ""
                        },
                        {
                            text: "   "
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(201);
            (0, _globals.expect)(responseData.poll.options).toHaveLength(2);
        });
        (0, _globals.it)("should handle different voting methods", async ()=>{
            const mockPoll = {
                id: "poll-123",
                title: "New Test Poll",
                voting_method: "approval"
            };
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: [
                                mockPoll
                            ],
                            error: null
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ],
                    votingMethod: "approval"
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(201);
            (0, _globals.expect)(responseData.poll.voting_method).toBe("approval");
        });
        (0, _globals.it)("should handle hashtags in poll creation", async ()=>{
            const mockPoll = {
                id: "poll-123",
                title: "New Test Poll",
                hashtags: [
                    "politics",
                    "democracy"
                ],
                primary_hashtag: "politics"
            };
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: [
                                mockPoll
                            ],
                            error: null
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ],
                    hashtags: [
                        "politics",
                        "democracy"
                    ],
                    primaryHashtag: "politics"
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(201);
            (0, _globals.expect)(responseData.poll.hashtags).toEqual([
                "politics",
                "democracy"
            ]);
            (0, _globals.expect)(responseData.poll.primary_hashtag).toBe("politics");
        });
    });
    (0, _globals.describe)("Input Validation", ()=>{
        (0, _globals.it)("should validate poll title length", async ()=>{
            const longTitle = "a".repeat(201); // Exceeds 200 character limit
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: longTitle,
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toContain("Title too long");
        });
        (0, _globals.it)("should validate poll description length", async ()=>{
            const longDescription = "a".repeat(1001); // Exceeds 1000 character limit
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    description: longDescription,
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toContain("Description too long");
        });
        (0, _globals.it)("should validate option text length", async ()=>{
            const longOption = "a".repeat(201); // Exceeds 200 character limit
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: longOption
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toContain("Option text too long");
        });
        (0, _globals.it)("should validate maximum number of options", async ()=>{
            const manyOptions = Array.from({
                length: 11
            }, (_, i)=>({
                    text: `Option ${i + 1}`
                }));
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: manyOptions
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(400);
            (0, _globals.expect)(responseData.error).toContain("Too many options");
        });
    });
    (0, _globals.describe)("Security Measures", ()=>{
        (0, _globals.it)("should sanitize HTML in poll title", async ()=>{
            const mockPoll = {
                id: "poll-123",
                title: "New Test Poll"
            };
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: [
                                mockPoll
                            ],
                            error: null
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: '<script>alert("xss")</script>New Test Poll',
                    options: [
                        {
                            text: "Option 1"
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(201);
            (0, _globals.expect)(responseData.poll.title).toBe("New Test Poll");
        });
        (0, _globals.it)("should sanitize HTML in poll options", async ()=>{
            const mockPoll = {
                id: "poll-123",
                title: "New Test Poll",
                options: [
                    {
                        text: "Option 1"
                    },
                    {
                        text: "Option 2"
                    }
                ]
            };
            mockSupabaseClient.from.mockReturnValue({
                insert: jest.fn(()=>({
                        select: jest.fn().mockResolvedValue({
                            data: [
                                mockPoll
                            ],
                            error: null
                        })
                    }))
            });
            const request = new _server.NextRequest("http://localhost:3000/api/polls", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    title: "New Test Poll",
                    options: [
                        {
                            text: '<script>alert("xss")</script>Option 1'
                        },
                        {
                            text: "Option 2"
                        }
                    ]
                })
            });
            const response = await (0, _route.POST)(request);
            const responseData = await response.json();
            (0, _globals.expect)(response.status).toBe(201);
            (0, _globals.expect)(responseData.poll.options[0].text).toBe("Option 1");
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvYXBpL2NvcmUvcG9sbHMtY3J1ZC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUG9sbHMgQ1JVRCBBUEkgVGVzdHNcbiAqIFxuICogVGVzdHMgdGhlIHBvbGxzIEFQSSBlbmRwb2ludHMgaW5jbHVkaW5nOlxuICogLSBHRVQgL2FwaS9wb2xscyAobGlzdCBwb2xscylcbiAqIC0gUE9TVCAvYXBpL3BvbGxzIChjcmVhdGUgcG9sbClcbiAqIC0gR0VUIC9hcGkvcG9sbHMvW2lkXSAoZ2V0IHBvbGwpXG4gKiAtIFBVVCAvYXBpL3BvbGxzL1tpZF0gKHVwZGF0ZSBwb2xsKVxuICogLSBERUxFVEUgL2FwaS9wb2xscy9baWRdIChkZWxldGUgcG9sbClcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoIH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEdFVCwgUE9TVCB9IGZyb20gJ0AvYXBwL2FwaS9wb2xscy9yb3V0ZSc7XG5cbi8vIE1vY2sgU3VwYWJhc2UgY2xpZW50XG5jb25zdCBtb2NrU3VwYWJhc2VDbGllbnQgPSB7XG4gIGZyb206IGplc3QuZm4oKCkgPT4gKHtcbiAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgIG9yZGVyOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgbGltaXQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgIHJhbmdlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pKSxcbiAgICB9KSksXG4gICAgaW5zZXJ0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGRhdGE6IFt7IGlkOiAncG9sbC0xMjMnLCB0aXRsZTogJ1Rlc3QgUG9sbCcgfV0sXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgfSksXG4gICAgfSkpLFxuICB9KSksXG4gIGF1dGg6IHtcbiAgICBnZXRVc2VyOiBqZXN0LmZuKCksXG4gIH0sXG59O1xuXG5qZXN0Lm1vY2soJ0AvdXRpbHMvc3VwYWJhc2Uvc2VydmVyJywgKCkgPT4gKHtcbiAgZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQ6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG1vY2tTdXBhYmFzZUNsaWVudCkpLFxufSkpO1xuXG4vLyBNb2NrIGF1dGhlbnRpY2F0aW9uXG5qZXN0Lm1vY2soJ0AvbGliL2NvcmUvYXV0aC9zZXJ2ZXItYWN0aW9ucycsICgpID0+ICh7XG4gIGdldFVzZXI6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICBpZDogJ3VzZXItMTIzJyxcbiAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICB9KSksXG59KSk7XG5cbi8vIE1vY2sgbG9nZ2VyXG5qZXN0Lm1vY2soJ0AvbGliL3V0aWxzL2xvZ2dlcicsICgpID0+ICh7XG4gIGRldkxvZzogamVzdC5mbigpLFxuICBsb2dnZXI6IHtcbiAgICBpbmZvOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuZGVzY3JpYmUoJ1BvbGxzIENSVUQgQVBJJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LnJlc2V0QWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0dFVCAvYXBpL3BvbGxzIC0gTGlzdCBQb2xscycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBsaXN0IG9mIHBvbGxzIHdpdGggcGFnaW5hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb2xscyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncG9sbC0xJyxcbiAgICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCAxJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rlc2NyaXB0aW9uIDEnLFxuICAgICAgICAgIHN0YXR1czogJ2FjdGl2ZScsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyxcbiAgICAgICAgICB0b3RhbF92b3RlczogMTAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3BvbGwtMicsXG4gICAgICAgICAgdGl0bGU6ICdUZXN0IFBvbGwgMicsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdEZXNjcmlwdGlvbiAyJyxcbiAgICAgICAgICBzdGF0dXM6ICdlbmRlZCcsXG4gICAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMDJUMDA6MDA6MDBaJyxcbiAgICAgICAgICB0b3RhbF92b3RlczogMjUsXG4gICAgICAgIH0sXG4gICAgICBdO1xuXG4gICAgICBtb2NrU3VwYWJhc2VDbGllbnQuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgb3JkZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgbGltaXQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgICByYW5nZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgIGRhdGE6IG1vY2tQb2xscyxcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9KSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb2xscz9wYWdlPTEmbGltaXQ9MTAnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGxzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGxzWzBdLnRpdGxlKS50b0JlKCdUZXN0IFBvbGwgMScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5wb2xsc1sxXS50aXRsZSkudG9CZSgnVGVzdCBQb2xsIDInKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHBvbGwgbGlzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tTdXBhYmFzZUNsaWVudC5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHNlbGVjdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIGVxOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgICBvcmRlcjogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgICBsaW1pdDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgZGF0YTogW10sXG4gICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGxzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU3VwYWJhc2VDbGllbnQuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBlcTogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgICAgb3JkZXI6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgbGltaXQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgICAgICByYW5nZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogeyBtZXNzYWdlOiAnRGF0YWJhc2UgZXJyb3InIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg1MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5lcnJvcikudG9CZSgnRmFpbGVkIHRvIGZldGNoIHBvbGxzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQT1NUIC9hcGkvcG9sbHMgLSBDcmVhdGUgUG9sbCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBhIG5ldyBwb2xsIHdpdGggdmFsaWQgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb2xsID0ge1xuICAgICAgICBpZDogJ3BvbGwtMTIzJyxcbiAgICAgICAgdGl0bGU6ICdOZXcgVGVzdCBQb2xsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IGRlc2NyaXB0aW9uJyxcbiAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAxJyB9LFxuICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAyJyB9LFxuICAgICAgICBdLFxuICAgICAgICB2b3RpbmdfbWV0aG9kOiAnc2luZ2xlJyxcbiAgICAgICAgY2F0ZWdvcnk6ICdnZW5lcmFsJyxcbiAgICAgICAgcHJpdmFjeV9sZXZlbDogJ3B1YmxpYycsXG4gICAgICAgIGNyZWF0ZWRfYnk6ICd1c2VyLTEyMycsXG4gICAgICB9O1xuXG4gICAgICBtb2NrU3VwYWJhc2VDbGllbnQuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbbW9ja1BvbGxdLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aXRsZTogJ05ldyBUZXN0IFBvbGwnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGVzdCBkZXNjcmlwdGlvbicsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDEnIH0sXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHZvdGluZ01ldGhvZDogJ3NpbmdsZScsXG4gICAgICAgICAgY2F0ZWdvcnk6ICdnZW5lcmFsJyxcbiAgICAgICAgICBwcml2YWN5TGV2ZWw6ICdwdWJsaWMnLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEucG9sbC50aXRsZSkudG9CZSgnTmV3IFRlc3QgUG9sbCcpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5wb2xsLmlkKS50b0JlKCdwb2xsLTEyMycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcG9sbCBjcmVhdGlvbiB3aXRob3V0IGF1dGhlbnRpY2F0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBnZXRVc2VyIH0gPSByZXF1aXJlKCdAL2xpYi9jb3JlL2F1dGgvc2VydmVyLWFjdGlvbnMnKTtcbiAgICAgIGdldFVzZXIubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDEnIH0sXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZXJyb3IpLnRvQmUoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIHRvIGNyZWF0ZSBwb2xscycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcG9sbCBjcmVhdGlvbiB3aXRoIG1pc3NpbmcgdGl0bGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMScgfSxcbiAgICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAyJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5lcnJvcikudG9CZSgnVGl0bGUgYW5kIGF0IGxlYXN0IDIgb3B0aW9ucyBhcmUgcmVxdWlyZWQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHBvbGwgY3JlYXRpb24gd2l0aCBpbnN1ZmZpY2llbnQgb3B0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDEnIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLmVycm9yKS50b0JlKCdUaXRsZSBhbmQgYXQgbGVhc3QgMiBvcHRpb25zIGFyZSByZXF1aXJlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcG9sbCBjcmVhdGlvbiB3aXRoIGVtcHR5IG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aXRsZTogJ05ldyBUZXN0IFBvbGwnLFxuICAgICAgICAgIG9wdGlvbnM6IFtdLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZXJyb3IpLnRvQmUoJ1RpdGxlIGFuZCBhdCBsZWFzdCAyIG9wdGlvbnMgYXJlIHJlcXVpcmVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbmFjdGl2ZSB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBnZXRVc2VyIH0gPSByZXF1aXJlKCdAL2xpYi9jb3JlL2F1dGgvc2VydmVyLWFjdGlvbnMnKTtcbiAgICAgIGdldFVzZXIubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBpZDogJ3VzZXItMTIzJyxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb2NrIGluYWN0aXZlIHVzZXIgcHJvZmlsZVxuICAgICAgbW9ja1N1cGFiYXNlQ2xpZW50LmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgZXE6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICAgIHNpbmdsZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgZGF0YTogeyBpc19hY3RpdmU6IGZhbHNlIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgfSkpLFxuICAgICAgICB9KSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb2xscycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdGl0bGU6ICdOZXcgVGVzdCBQb2xsJyxcbiAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMScgfSxcbiAgICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAyJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDMpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5lcnJvcikudG9CZSgnQWN0aXZlIGFjY291bnQgcmVxdWlyZWQgdG8gY3JlYXRlIHBvbGxzJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSBlcnJvcnMgZHVyaW5nIGNyZWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1N1cGFiYXNlQ2xpZW50LmZyb20ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaW5zZXJ0OiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgICAgc2VsZWN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGVycm9yOiB7IG1lc3NhZ2U6ICdEYXRhYmFzZSBlcnJvcicgfSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDEnIH0sXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuZXJyb3IpLnRvQmUoJ0ZhaWxlZCB0byBjcmVhdGUgcG9sbCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSBwb2xsIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9sbCA9IHtcbiAgICAgICAgaWQ6ICdwb2xsLTEyMycsXG4gICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMScgfSxcbiAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tTdXBhYmFzZUNsaWVudC5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFttb2NrUG9sbF0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDEnIH0sXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgICAgIHsgdGV4dDogJycgfSwgLy8gRW1wdHkgb3B0aW9uIHNob3VsZCBiZSBmaWx0ZXJlZFxuICAgICAgICAgICAgeyB0ZXh0OiAnICAgJyB9LCAvLyBXaGl0ZXNwYWNlLW9ubHkgb3B0aW9uIHNob3VsZCBiZSBmaWx0ZXJlZFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDEpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5wb2xsLm9wdGlvbnMpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCB2b3RpbmcgbWV0aG9kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb2xsID0ge1xuICAgICAgICBpZDogJ3BvbGwtMTIzJyxcbiAgICAgICAgdGl0bGU6ICdOZXcgVGVzdCBQb2xsJyxcbiAgICAgICAgdm90aW5nX21ldGhvZDogJ2FwcHJvdmFsJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tTdXBhYmFzZUNsaWVudC5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFttb2NrUG9sbF0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDEnIH0sXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHZvdGluZ01ldGhvZDogJ2FwcHJvdmFsJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGwudm90aW5nX21ldGhvZCkudG9CZSgnYXBwcm92YWwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGhhc2h0YWdzIGluIHBvbGwgY3JlYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9sbCA9IHtcbiAgICAgICAgaWQ6ICdwb2xsLTEyMycsXG4gICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgIGhhc2h0YWdzOiBbJ3BvbGl0aWNzJywgJ2RlbW9jcmFjeSddLFxuICAgICAgICBwcmltYXJ5X2hhc2h0YWc6ICdwb2xpdGljcycsXG4gICAgICB9O1xuXG4gICAgICBtb2NrU3VwYWJhc2VDbGllbnQuZnJvbS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpbnNlcnQ6IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBkYXRhOiBbbW9ja1BvbGxdLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pKSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aXRsZTogJ05ldyBUZXN0IFBvbGwnLFxuICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAxJyB9LFxuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDInIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgICBoYXNodGFnczogWydwb2xpdGljcycsICdkZW1vY3JhY3knXSxcbiAgICAgICAgICBwcmltYXJ5SGFzaHRhZzogJ3BvbGl0aWNzJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGwuaGFzaHRhZ3MpLnRvRXF1YWwoWydwb2xpdGljcycsICdkZW1vY3JhY3knXSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGwucHJpbWFyeV9oYXNodGFnKS50b0JlKCdwb2xpdGljcycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW5wdXQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHBvbGwgdGl0bGUgbGVuZ3RoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbG9uZ1RpdGxlID0gJ2EnLnJlcGVhdCgyMDEpOyAvLyBFeGNlZWRzIDIwMCBjaGFyYWN0ZXIgbGltaXRcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb2xscycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdGl0bGU6IGxvbmdUaXRsZSxcbiAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMScgfSxcbiAgICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAyJyB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5lcnJvcikudG9Db250YWluKCdUaXRsZSB0b28gbG9uZycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBwb2xsIGRlc2NyaXB0aW9uIGxlbmd0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdEZXNjcmlwdGlvbiA9ICdhJy5yZXBlYXQoMTAwMSk7IC8vIEV4Y2VlZHMgMTAwMCBjaGFyYWN0ZXIgbGltaXRcblxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb2xscycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdGl0bGU6ICdOZXcgVGVzdCBQb2xsJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogbG9uZ0Rlc2NyaXB0aW9uLFxuICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAxJyB9LFxuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDInIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLmVycm9yKS50b0NvbnRhaW4oJ0Rlc2NyaXB0aW9uIHRvbyBsb25nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG9wdGlvbiB0ZXh0IGxlbmd0aCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdPcHRpb24gPSAnYScucmVwZWF0KDIwMSk7IC8vIEV4Y2VlZHMgMjAwIGNoYXJhY3RlciBsaW1pdFxuXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0aXRsZTogJ05ldyBUZXN0IFBvbGwnLFxuICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdGV4dDogbG9uZ09wdGlvbiB9LFxuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDInIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLmVycm9yKS50b0NvbnRhaW4oJ09wdGlvbiB0ZXh0IHRvbyBsb25nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIG1heGltdW0gbnVtYmVyIG9mIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYW55T3B0aW9ucyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDExIH0sIChfLCBpKSA9PiAoeyB0ZXh0OiBgT3B0aW9uICR7aSArIDF9YCB9KSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogbWFueU9wdGlvbnMsXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5lcnJvcikudG9Db250YWluKCdUb28gbWFueSBvcHRpb25zJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZWN1cml0eSBNZWFzdXJlcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNhbml0aXplIEhUTUwgaW4gcG9sbCB0aXRsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb2xsID0ge1xuICAgICAgICBpZDogJ3BvbGwtMTIzJyxcbiAgICAgICAgdGl0bGU6ICdOZXcgVGVzdCBQb2xsJyxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tTdXBhYmFzZUNsaWVudC5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFttb2NrUG9sbF0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0Pk5ldyBUZXN0IFBvbGwnLFxuICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgIHsgdGV4dDogJ09wdGlvbiAxJyB9LFxuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDInIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGwudGl0bGUpLnRvQmUoJ05ldyBUZXN0IFBvbGwnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2FuaXRpemUgSFRNTCBpbiBwb2xsIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9sbCA9IHtcbiAgICAgICAgaWQ6ICdwb2xsLTEyMycsXG4gICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMScgfSxcbiAgICAgICAgICB7IHRleHQ6ICdPcHRpb24gMicgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tTdXBhYmFzZUNsaWVudC5mcm9tLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGluc2VydDogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICAgIHNlbGVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgIGRhdGE6IFttb2NrUG9sbF0sXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRpdGxlOiAnTmV3IFRlc3QgUG9sbCcsXG4gICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgeyB0ZXh0OiAnPHNjcmlwdD5hbGVydChcInhzc1wiKTwvc2NyaXB0Pk9wdGlvbiAxJyB9LFxuICAgICAgICAgICAgeyB0ZXh0OiAnT3B0aW9uIDInIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDIwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2VEYXRhLnBvbGwub3B0aW9uc1swXS50ZXh0KS50b0JlKCdPcHRpb24gMScpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQiLCJmbiIsIlByb21pc2UiLCJyZXNvbHZlIiwibW9ja1N1cGFiYXNlQ2xpZW50IiwiZ2V0VXNlciIsImlkIiwiZW1haWwiLCJkZXZMb2ciLCJsb2dnZXIiLCJpbmZvIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImxpbWl0IiwicmFuZ2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJpbnNlcnQiLCJ0aXRsZSIsImF1dGgiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiYWZ0ZXJFYWNoIiwicmVzZXRBbGxNb2NrcyIsIml0IiwibW9ja1BvbGxzIiwiZGVzY3JpcHRpb24iLCJzdGF0dXMiLCJjcmVhdGVkX2F0IiwidG90YWxfdm90ZXMiLCJtb2NrUmV0dXJuVmFsdWUiLCJyZXF1ZXN0IiwiTmV4dFJlcXVlc3QiLCJyZXNwb25zZSIsIkdFVCIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJleHBlY3QiLCJ0b0JlIiwicG9sbHMiLCJ0b0hhdmVMZW5ndGgiLCJtZXNzYWdlIiwibW9ja1BvbGwiLCJvcHRpb25zIiwidGV4dCIsInZvdGluZ19tZXRob2QiLCJjYXRlZ29yeSIsInByaXZhY3lfbGV2ZWwiLCJjcmVhdGVkX2J5IiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwidm90aW5nTWV0aG9kIiwicHJpdmFjeUxldmVsIiwiUE9TVCIsInBvbGwiLCJyZXF1aXJlIiwic2luZ2xlIiwiaXNfYWN0aXZlIiwiaGFzaHRhZ3MiLCJwcmltYXJ5X2hhc2h0YWciLCJwcmltYXJ5SGFzaHRhZyIsInRvRXF1YWwiLCJsb25nVGl0bGUiLCJyZXBlYXQiLCJ0b0NvbnRhaW4iLCJsb25nRGVzY3JpcHRpb24iLCJsb25nT3B0aW9uIiwibWFueU9wdGlvbnMiLCJBcnJheSIsImxlbmd0aCIsIl8iLCJpIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0NBU0M7QUFpQ0RBLEtBQUtDLElB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