{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/e2e/user-workflows.test.ts"],"sourcesContent":["/**\n * End-to-End Tests - User Workflows (10% of tests)\n * \n * These tests focus on complete user journeys.\n * Test full user workflows from start to finish.\n */\n\nimport { describe, it, expect, beforeAll, afterAll, beforeEach, afterEach } from '@jest/globals';\nimport { createClient } from '@supabase/supabase-js';\nimport { NextRequest } from 'next/server';\nimport { GET, POST } from '@/app/api/polls/route';\n\n// Use real Supabase client with real credentials\nlet supabase: any;\n\ntry {\n  supabase = createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n} catch (error) {\n  console.warn('Real Supabase credentials not set up. This test requires real credentials.');\n  console.warn('Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.');\n}\n\ndescribe('E2E Tests - User Workflows', () => {\n  let testUser: any;\n  let testPollId: string | null = null;\n\n  beforeAll(async () => {\n    if (!supabase) {\n      console.warn('Skipping tests - Real Supabase credentials not set up');\n      return;\n    }\n\n    // Login with real test user\n    console.log('E2E: Logging in with real test user...');\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email: 'test@example.com',\n      password: 'testpassword'\n    });\n\n    if (error) {\n      console.error('Failed to login with test user:', error);\n      throw new Error(`Failed to login with test user: ${error.message}`);\n    }\n\n    testUser = data.user;\n    console.log('E2E: Successfully logged in with test user:', testUser.email);\n  });\n\n  afterAll(async () => {\n    if (!supabase) return;\n\n    // Clean up test data\n    if (testPollId) {\n      console.log('E2E: Cleaning up test poll:', testPollId);\n      await supabase.from('polls').delete().eq('id', testPollId);\n    }\n\n    // Sign out\n    await supabase.auth.signOut();\n  });\n\n  beforeEach(() => {\n    // Reset test poll ID\n    testPollId = null;\n  });\n\n  afterEach(async () => {\n    if (!supabase) return;\n\n    // Clean up any test data created during the test\n    if (testPollId) {\n      await supabase.from('polls').delete().eq('id', testPollId);\n      testPollId = null;\n    }\n  });\n\n  describe('Complete User Workflow: Create Poll', () => {\n    it('should complete full poll creation workflow', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // E2E Test: Complete poll creation workflow\n      // 1. User logs in (already done in beforeAll)\n      expect(testUser).toBeDefined();\n      expect(testUser.email).toBe('test@example.com');\n\n      // 2. User creates a poll\n      const pollData = {\n        title: 'E2E Test Poll',\n        options: [\n          { text: 'E2E Option 1', votes: 0 },\n          { text: 'E2E Option 2', votes: 0 },\n          { text: 'E2E Option 3', votes: 0 }\n        ],\n        created_by: testUser.id,\n        total_votes: 0,\n        status: 'active'\n      };\n\n      const { data: poll, error: pollError } = await supabase\n        .from('polls')\n        .insert(pollData)\n        .select()\n        .single();\n\n      expect(pollError).toBeNull();\n      expect(poll).toBeDefined();\n      expect(poll.title).toBe('E2E Test Poll');\n      expect(poll.options).toHaveLength(3);\n\n      // Store for cleanup\n      testPollId = poll.id;\n\n      // 3. User views the poll via API\n      const request = new NextRequest('http://localhost:3000/api/polls');\n      const response = await GET(request);\n      const responseData = await response.json();\n\n      expect(response.status).toBe(200);\n      expect(responseData.success).toBe(true);\n      expect(Array.isArray(responseData.polls)).toBe(true);\n\n      // 4. Verify poll appears in results\n      const foundPoll = responseData.polls.find((p: any) => p.poll_id === poll.id);\n      expect(foundPoll).toBeDefined();\n\n      console.log('E2E: Complete poll creation workflow successful');\n    });\n  });\n\n  describe('Complete User Workflow: Vote on Poll', () => {\n    it('should complete full voting workflow', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // E2E Test: Complete voting workflow\n      // 1. Create a poll\n      const pollData = {\n        title: 'E2E Voting Poll',\n        options: [\n          { text: 'Vote Option 1', votes: 0 },\n          { text: 'Vote Option 2', votes: 0 }\n        ],\n        created_by: testUser.id,\n        total_votes: 0,\n        status: 'active'\n      };\n\n      const { data: poll, error: pollError } = await supabase\n        .from('polls')\n        .insert(pollData)\n        .select()\n        .single();\n\n      expect(pollError).toBeNull();\n      expect(poll).toBeDefined();\n\n      // Store for cleanup\n      testPollId = poll.id;\n\n      // 2. User votes on the poll\n      const voteData = {\n        poll_id: poll.id,\n        user_id: testUser.id,\n        option_index: 0,\n        created_at: new Date().toISOString()\n      };\n\n      const { data: vote, error: voteError } = await supabase\n        .from('votes')\n        .insert(voteData)\n        .select()\n        .single();\n\n      expect(voteError).toBeNull();\n      expect(vote).toBeDefined();\n      expect(vote.poll_id).toBe(poll.id);\n      expect(vote.user_id).toBe(testUser.id);\n      expect(vote.option_index).toBe(0);\n\n      // 3. Update poll vote count\n      const { data: updatedPoll, error: updateError } = await supabase\n        .from('polls')\n        .update({ total_votes: 1 })\n        .eq('id', poll.id)\n        .select()\n        .single();\n\n      expect(updateError).toBeNull();\n      expect(updatedPoll.total_votes).toBe(1);\n\n      // 4. Verify vote is recorded\n      const { data: allVotes, error: votesError } = await supabase\n        .from('votes')\n        .select('*')\n        .eq('poll_id', poll.id);\n\n      expect(votesError).toBeNull();\n      expect(allVotes).toHaveLength(1);\n      expect(allVotes[0].option_index).toBe(0);\n\n      console.log('E2E: Complete voting workflow successful');\n    });\n  });\n\n  describe('Complete User Workflow: Poll Results', () => {\n    it('should complete full poll results workflow', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // E2E Test: Complete poll results workflow\n      // 1. Create a poll\n      const pollData = {\n        title: 'E2E Results Poll',\n        options: [\n          { text: 'Results Option 1', votes: 0 },\n          { text: 'Results Option 2', votes: 0 }\n        ],\n        created_by: testUser.id,\n        total_votes: 0,\n        status: 'active'\n      };\n\n      const { data: poll, error: pollError } = await supabase\n        .from('polls')\n        .insert(pollData)\n        .select()\n        .single();\n\n      expect(pollError).toBeNull();\n      expect(poll).toBeDefined();\n\n      // Store for cleanup\n      testPollId = poll.id;\n\n      // 2. Add multiple votes\n      const votes = [\n        { poll_id: poll.id, user_id: testUser.id, option_index: 0 },\n        { poll_id: poll.id, user_id: 'user2', option_index: 0 },\n        { poll_id: poll.id, user_id: 'user3', option_index: 1 }\n      ];\n\n      for (const vote of votes) {\n        const { error: voteError } = await supabase\n          .from('votes')\n          .insert(vote);\n\n        expect(voteError).toBeNull();\n      }\n\n      // 3. Calculate results\n      const { data: allVotes, error: votesError } = await supabase\n        .from('votes')\n        .select('*')\n        .eq('poll_id', poll.id);\n\n      expect(votesError).toBeNull();\n      expect(allVotes).toHaveLength(3);\n\n      // 4. Calculate final results\n      const option1Votes = allVotes.filter((vote: any) => vote.option_index === 0).length;\n      const option2Votes = allVotes.filter((vote: any) => vote.option_index === 1).length;\n\n      expect(option1Votes).toBe(2);\n      expect(option2Votes).toBe(1);\n\n      // 5. Update poll with final results\n      const { data: finalPoll, error: finalError } = await supabase\n        .from('polls')\n        .update({ \n          total_votes: 3,\n          options: [\n            { text: 'Results Option 1', votes: 2 },\n            { text: 'Results Option 2', votes: 1 }\n          ]\n        })\n        .eq('id', poll.id)\n        .select()\n        .single();\n\n      expect(finalError).toBeNull();\n      expect(finalPoll.total_votes).toBe(3);\n      expect(finalPoll.options[0].votes).toBe(2);\n      expect(finalPoll.options[1].votes).toBe(1);\n\n      console.log('E2E: Complete poll results workflow successful');\n    });\n  });\n\n  describe('Complete User Workflow: Error Handling', () => {\n    it('should handle errors gracefully in complete workflow', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // E2E Test: Error handling in complete workflow\n      // 1. Test invalid poll creation\n      const invalidPollData = {\n        // Missing required fields\n        options: [\n          { text: 'Invalid Option 1' }\n        ],\n        created_by: testUser.id\n      };\n\n      const { data, error } = await supabase\n        .from('polls')\n        .insert(invalidPollData)\n        .select()\n        .single();\n\n      // 2. Verify error handling\n      expect(error).not.toBeNull();\n      expect(error.message).toContain('title');\n\n      // 3. Test API still works despite error\n      const request = new NextRequest('http://localhost:3000/api/polls');\n      const response = await GET(request);\n      const responseData = await response.json();\n\n      // API should still work\n      expect(response.status).toBe(200);\n      expect(responseData.success).toBe(true);\n\n      console.log('E2E: Error handling workflow successful');\n    });\n  });\n});\n"],"names":["supabase","createClient","process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","error","console","warn","describe","testUser","testPollId","beforeAll","log","data","auth","signInWithPassword","email","password","Error","message","user","afterAll","from","delete","eq","signOut","beforeEach","afterEach","it","expect","toBeDefined","toBe","pollData","title","options","text","votes","created_by","id","total_votes","status","poll","pollError","insert","select","single","toBeNull","toHaveLength","request","NextRequest","response","GET","responseData","json","success","Array","isArray","polls","foundPoll","find","p","poll_id","voteData","user_id","option_index","created_at","Date","toISOString","vote","voteError","updatedPoll","updateError","update","allVotes","votesError","option1Votes","filter","length","option2Votes","finalPoll","finalError","invalidPollData","not","toContain"],"mappings":"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"}