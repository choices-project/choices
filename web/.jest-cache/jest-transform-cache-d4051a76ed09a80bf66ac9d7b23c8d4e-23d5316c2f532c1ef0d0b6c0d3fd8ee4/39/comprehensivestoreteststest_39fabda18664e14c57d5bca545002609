8f419bf3599f0599f324cfcc5fc0bbe3
/**
 * Comprehensive Zustand Store Tests
 * 
 * Tests all major Zustand stores with state management,
 * actions, persistence, and error handling
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _react = require("@testing-library/react");
const _appStore = require("../../../../lib/stores/appStore");
const _userStore = require("../../../../lib/stores/userStore");
const _votingStore = require("../../../../lib/stores/votingStore");
const _notificationStore = require("../../../../lib/stores/notificationStore");
// FeatureFlagsStore removed - consolidated into admin store
// Mock external dependencies
_globals.jest.mock("@/lib/utils/logger", ()=>({
        devLog: _globals.jest.fn(),
        logger: {
            info: _globals.jest.fn(),
            error: _globals.jest.fn(),
            warn: _globals.jest.fn()
        }
    }));
_globals.jest.mock("@/lib/utils/objects", ()=>({
        withOptional: _globals.jest.fn((obj)=>obj)
    }));
(0, _globals.describe)("Zustand Store Tests", ()=>{
    (0, _globals.beforeEach)(()=>{
        // Clear all store state before each test
        _appStore.useAppStore.getState().reset?.();
        _userStore.useUserStore.getState().reset?.();
        _votingStore.useVotingStore.getState().reset?.();
        // Manually clear stores that don't have reset methods
        _notificationStore.useNotificationStore.setState({
            notifications: [],
            unreadCount: 0
        });
    // FeatureFlagsStore removed - consolidated into admin store
    });
    (0, _globals.describe)("AppStore", ()=>{
        (0, _globals.it)("should initialize with default values", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _globals.expect)(result.current.theme).toBe("system");
            (0, _globals.expect)(result.current.sidebarCollapsed).toBe(false);
            (0, _globals.expect)(result.current.isMobile).toBe(false);
        });
        (0, _globals.it)("should update theme correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _react.act)(()=>{
                result.current.setTheme("dark");
            });
            (0, _globals.expect)(result.current.theme).toBe("dark");
        });
        (0, _globals.it)("should toggle sidebar correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _react.act)(()=>{
                result.current.toggleSidebar();
            });
            (0, _globals.expect)(result.current.sidebarCollapsed).toBe(true);
            (0, _react.act)(()=>{
                result.current.toggleSidebar();
            });
            (0, _globals.expect)(result.current.sidebarCollapsed).toBe(false);
        });
        (0, _globals.it)("should update system theme", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _react.act)(()=>{
                result.current.updateSystemTheme("dark");
            });
            (0, _globals.expect)(result.current.systemTheme).toBe("dark");
        });
        (0, _globals.it)("should handle modal state correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _react.act)(()=>{
                result.current.openModal("test-modal", {
                    data: "test"
                });
            });
            (0, _globals.expect)(result.current.activeModal).toBe("test-modal");
            (0, _globals.expect)(result.current.modalData).toEqual({
                data: "test"
            });
            (0, _react.act)(()=>{
                result.current.closeModal();
            });
            (0, _globals.expect)(result.current.activeModal).toBeNull();
        });
        (0, _globals.it)("should update settings correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _react.act)(()=>{
                result.current.updateSettings({
                    animations: false,
                    language: "es"
                });
            });
            (0, _globals.expect)(result.current.settings.animations).toBe(false);
            (0, _globals.expect)(result.current.settings.language).toBe("es");
        });
    });
    (0, _globals.describe)("UserStore", ()=>{
        (0, _globals.it)("should initialize with null user", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            (0, _globals.expect)(result.current.user).toBeNull();
            (0, _globals.expect)(result.current.isAuthenticated).toBe(false);
        });
        (0, _globals.it)("should set user correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            const mockUser = {
                id: "user-1",
                email: "test@example.com",
                name: "Test User",
                avatar: "https://example.com/avatar.jpg",
                role: "user",
                createdAt: new Date(),
                updatedAt: new Date()
            };
            (0, _react.act)(()=>{
                result.current.setUser(mockUser);
            });
            (0, _globals.expect)(result.current.user).toEqual(mockUser);
            (0, _globals.expect)(result.current.isAuthenticated).toBe(true);
        });
        (0, _globals.it)("should clear user on logout", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            const mockUser = {
                id: "user-1",
                name: "Test User",
                email: "test@example.com"
            };
            (0, _react.act)(()=>{
                result.current.setUser(mockUser);
            });
            (0, _globals.expect)(result.current.isAuthenticated).toBe(true);
            (0, _react.act)(()=>{
                result.current.clearUser();
            });
            (0, _globals.expect)(result.current.user).toBeNull();
            (0, _globals.expect)(result.current.isAuthenticated).toBe(false);
        });
        (0, _globals.it)("should update user profile", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            const mockUser = {
                id: "user-1",
                username: "Test User",
                email: "test@example.com",
                preferences: {
                    theme: "light",
                    notifications: true,
                    language: "en",
                    timezone: "UTC"
                },
                settings: {
                    privacy: "public",
                    location: "US",
                    interests: [],
                    bio: "Test bio"
                },
                metadata: {
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                }
            };
            (0, _react.act)(()=>{
                result.current.setProfile(mockUser);
            });
            (0, _react.act)(()=>{
                result.current.updateProfile({
                    username: "Updated User",
                    settings: {
                        ...mockUser.settings,
                        bio: "Updated bio"
                    }
                });
            });
            (0, _globals.expect)(result.current.profile?.username).toBe("Updated User");
            (0, _globals.expect)(result.current.profile?.settings.bio).toBe("Updated bio");
        });
        (0, _globals.it)("should handle authentication state changes", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            (0, _react.act)(()=>{
                result.current.setAuthenticated(true);
            });
            (0, _globals.expect)(result.current.isAuthenticated).toBe(true);
            (0, _react.act)(()=>{
                result.current.setAuthenticated(false);
            });
            (0, _globals.expect)(result.current.isAuthenticated).toBe(false);
        });
    });
    (0, _globals.describe)("VotingStore", ()=>{
        (0, _globals.it)("should initialize with empty state", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _votingStore.useVotingStore)());
            (0, _globals.expect)(result.current.ballots).toEqual([]);
            (0, _globals.expect)(result.current.elections).toEqual([]);
            (0, _globals.expect)(result.current.votingRecords).toEqual([]);
        });
        (0, _globals.it)("should add ballot correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _votingStore.useVotingStore)());
            const mockBallot = {
                id: "ballot-1",
                pollId: "poll-1",
                userId: "user-1",
                selections: [
                    "option-1"
                ],
                timestamp: new Date()
            };
            (0, _react.act)(()=>{
                result.current.addBallot(mockBallot);
            });
            (0, _globals.expect)(result.current.ballots).toHaveLength(1);
            (0, _globals.expect)(result.current.ballots[0]).toEqual(mockBallot);
        });
        (0, _globals.it)("should remove ballot correctly", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _votingStore.useVotingStore)());
            const mockBallot = {
                id: "ballot-1",
                pollId: "poll-1",
                userId: "user-1",
                selections: [
                    "option-1"
                ],
                timestamp: new Date()
            };
            (0, _react.act)(()=>{
                result.current.addBallot(mockBallot);
            });
            (0, _globals.expect)(result.current.ballots).toHaveLength(1);
            (0, _react.act)(()=>{
                result.current.removeBallot("ballot-1");
            });
            (0, _globals.expect)(result.current.ballots).toHaveLength(0);
        });
        (0, _globals.it)("should track voting records", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _votingStore.useVotingStore)());
            const mockRecord = {
                id: "record-1",
                pollId: "poll-1",
                userId: "user-1",
                action: "vote_cast",
                timestamp: new Date()
            };
            (0, _react.act)(()=>{
                result.current.addVotingRecord(mockRecord);
            });
            (0, _globals.expect)(result.current.votingRecords).toHaveLength(1);
            (0, _globals.expect)(result.current.votingRecords[0]).toEqual(mockRecord);
        });
        (0, _globals.it)("should clear user voting session", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _votingStore.useVotingStore)());
            (0, _react.act)(()=>{
                result.current.addBallot({
                    id: "ballot-1",
                    pollId: "poll-1",
                    userId: "user-1",
                    selections: [
                        "option-1"
                    ],
                    timestamp: new Date()
                });
            });
            (0, _globals.expect)(result.current.ballots).toHaveLength(1);
            (0, _react.act)(()=>{
                result.current.clearUserVotingSession();
            });
            // Should clear UI state but preserve actual voting records
            (0, _globals.expect)(result.current.ballots).toHaveLength(0);
            (0, _globals.expect)(result.current.selectedBallot).toBeNull();
            (0, _globals.expect)(result.current.currentBallot).toBeNull();
        // Note: votingRecords should be preserved for audit trail
        });
    });
    // UIStore removed - deleted as unused
    (0, _globals.describe)("NotificationStore", ()=>{
        (0, _globals.it)("should initialize with empty notifications", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _notificationStore.useNotificationStore)());
            (0, _globals.expect)(result.current.notifications).toEqual([]);
            (0, _globals.expect)(result.current.unreadCount).toBe(0);
        });
        (0, _globals.it)("should add notifications", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _notificationStore.useNotificationStore)());
            (0, _react.act)(()=>{
                result.current.addNotification({
                    message: "Test notification",
                    type: "info"
                });
            });
            (0, _globals.expect)(result.current.notifications).toHaveLength(1);
            (0, _globals.expect)(result.current.unreadCount).toBe(1);
            (0, _globals.expect)(result.current.notifications[0].message).toBe("Test notification");
        });
        (0, _globals.it)("should mark notifications as read", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _notificationStore.useNotificationStore)());
            (0, _react.act)(()=>{
                result.current.addNotification({
                    message: "Test notification",
                    type: "info"
                });
            });
            const notificationId = result.current.notifications[0].id;
            (0, _react.act)(()=>{
                result.current.markAsRead(notificationId);
            });
            (0, _globals.expect)(result.current.notifications[0].read).toBe(true);
            (0, _globals.expect)(result.current.unreadCount).toBe(0);
        });
        (0, _globals.it)("should clear all notifications", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _notificationStore.useNotificationStore)());
            (0, _react.act)(()=>{
                result.current.addNotification({
                    message: "Test notification 1",
                    type: "info"
                });
                result.current.addNotification({
                    message: "Test notification 2",
                    type: "warning"
                });
            });
            (0, _globals.expect)(result.current.notifications).toHaveLength(2);
            (0, _react.act)(()=>{
                result.current.clearAll();
            });
            (0, _globals.expect)(result.current.notifications).toHaveLength(0);
            (0, _globals.expect)(result.current.unreadCount).toBe(0);
        });
        (0, _globals.it)("should clear notifications by type", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _notificationStore.useNotificationStore)());
            (0, _react.act)(()=>{
                result.current.addNotification({
                    message: "Info notification",
                    type: "info"
                });
                result.current.addNotification({
                    message: "Warning notification",
                    type: "warning"
                });
            });
            (0, _globals.expect)(result.current.notifications).toHaveLength(2);
            (0, _react.act)(()=>{
                result.current.clearByType("info");
            });
            (0, _globals.expect)(result.current.notifications).toHaveLength(1);
            (0, _globals.expect)(result.current.notifications[0].type).toBe("warning");
        });
    });
    // FeatureFlagsStore removed - consolidated into admin store
    (0, _globals.describe)("Store Integration", ()=>{
        (0, _globals.it)("should handle cross-store interactions", ()=>{
            const appResult = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            const userResult = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            // Set user
            (0, _react.act)(()=>{
                userResult.result.current.setUser({
                    id: "user-1",
                    name: "Test User",
                    email: "test@example.com"
                });
            });
            // Update app settings
            (0, _react.act)(()=>{
                appResult.result.current.updateSettings({
                    theme: "dark",
                    language: "en"
                });
            });
            (0, _globals.expect)(userResult.result.current.isAuthenticated).toBe(true);
            (0, _globals.expect)(appResult.result.current.settings.theme).toBe("dark");
        });
        (0, _globals.it)("should handle store persistence", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            (0, _react.act)(()=>{
                result.current.setTheme("dark");
                result.current.setSidebarCollapsed(true);
            });
            // Simulate page reload by re-initializing store
            const newResult = (0, _react.renderHook)(()=>(0, _appStore.useAppStore)());
            // In a real app with persistence, these values would be restored
            // For testing, we verify the actions work correctly
            (0, _globals.expect)(result.current.theme).toBe("dark");
            (0, _globals.expect)(result.current.sidebarCollapsed).toBe(true);
        });
    });
    (0, _globals.describe)("Error Handling", ()=>{
        (0, _globals.it)("should handle store errors gracefully", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _userStore.useUserStore)());
            // Test with invalid data
            (0, _react.act)(()=>{
                try {
                    result.current.setUser(null);
                } catch (error) {
                // Store should handle null user gracefully
                }
            });
            (0, _globals.expect)(result.current.user).toBeNull();
        });
        (0, _globals.it)("should handle concurrent updates", ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _votingStore.useVotingStore)());
            // Simulate concurrent ballot additions
            (0, _react.act)(()=>{
                for(let i = 0; i < 10; i++){
                    result.current.addBallot({
                        id: `ballot-${i}`,
                        pollId: "poll-1",
                        userId: "user-1",
                        selections: [
                            "option-1"
                        ],
                        timestamp: new Date()
                    });
                }
            });
            (0, _globals.expect)(result.current.ballots).toHaveLength(10);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvc3RvcmVzL2NvbXByZWhlbnNpdmUtc3RvcmUtdGVzdHMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgWnVzdGFuZCBTdG9yZSBUZXN0c1xuICogXG4gKiBUZXN0cyBhbGwgbWFqb3IgWnVzdGFuZCBzdG9yZXMgd2l0aCBzdGF0ZSBtYW5hZ2VtZW50LFxuICogYWN0aW9ucywgcGVyc2lzdGVuY2UsIGFuZCBlcnJvciBoYW5kbGluZ1xuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscydcbmltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5cbi8vIEltcG9ydCBhbGwgc3RvcmVzXG5pbXBvcnQgeyB1c2VBcHBTdG9yZSB9IGZyb20gJ0AvbGliL3N0b3Jlcy9hcHBTdG9yZSdcbmltcG9ydCB7IHVzZVVzZXJTdG9yZSB9IGZyb20gJ0AvbGliL3N0b3Jlcy91c2VyU3RvcmUnXG5pbXBvcnQgeyB1c2VWb3RpbmdTdG9yZSB9IGZyb20gJ0AvbGliL3N0b3Jlcy92b3RpbmdTdG9yZSdcbi8vIFVJU3RvcmUgcmVtb3ZlZCAtIGRlbGV0ZWQgYXMgdW51c2VkXG5pbXBvcnQgeyB1c2VOb3RpZmljYXRpb25TdG9yZSB9IGZyb20gJ0AvbGliL3N0b3Jlcy9ub3RpZmljYXRpb25TdG9yZSdcbi8vIEZlYXR1cmVGbGFnc1N0b3JlIHJlbW92ZWQgLSBjb25zb2xpZGF0ZWQgaW50byBhZG1pbiBzdG9yZVxuXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCdAL2xpYi91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBkZXZMb2c6IGplc3QuZm4oKSxcbiAgbG9nZ2VyOiB7XG4gICAgaW5mbzogamVzdC5mbigpLFxuICAgIGVycm9yOiBqZXN0LmZuKCksXG4gICAgd2FybjogamVzdC5mbigpXG4gIH1cbn0pKVxuXG5qZXN0Lm1vY2soJ0AvbGliL3V0aWxzL29iamVjdHMnLCAoKSA9PiAoe1xuICB3aXRoT3B0aW9uYWw6IGplc3QuZm4oKG9iaikgPT4gb2JqKVxufSkpXG5cbmRlc2NyaWJlKCdadXN0YW5kIFN0b3JlIFRlc3RzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhciBhbGwgc3RvcmUgc3RhdGUgYmVmb3JlIGVhY2ggdGVzdFxuICAgIHVzZUFwcFN0b3JlLmdldFN0YXRlKCkucmVzZXQ/LigpXG4gICAgdXNlVXNlclN0b3JlLmdldFN0YXRlKCkucmVzZXQ/LigpXG4gICAgdXNlVm90aW5nU3RvcmUuZ2V0U3RhdGUoKS5yZXNldD8uKClcbiAgICBcbiAgICAvLyBNYW51YWxseSBjbGVhciBzdG9yZXMgdGhhdCBkb24ndCBoYXZlIHJlc2V0IG1ldGhvZHNcbiAgICB1c2VOb3RpZmljYXRpb25TdG9yZS5zZXRTdGF0ZSh7XG4gICAgICBub3RpZmljYXRpb25zOiBbXSxcbiAgICAgIHVucmVhZENvdW50OiAwXG4gICAgfSlcbiAgICBcbiAgICAvLyBGZWF0dXJlRmxhZ3NTdG9yZSByZW1vdmVkIC0gY29uc29saWRhdGVkIGludG8gYWRtaW4gc3RvcmVcbiAgfSlcblxuICBkZXNjcmliZSgnQXBwU3RvcmUnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggZGVmYXVsdCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBcHBTdG9yZSgpKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudGhlbWUpLnRvQmUoJ3N5c3RlbScpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2lkZWJhckNvbGxhcHNlZCkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc01vYmlsZSkudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgdGhlbWUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXBwU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuc2V0VGhlbWUoJ2RhcmsnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnRoZW1lKS50b0JlKCdkYXJrJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCB0b2dnbGUgc2lkZWJhciBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBcHBTdG9yZSgpKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC50b2dnbGVTaWRlYmFyKClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zaWRlYmFyQ29sbGFwc2VkKS50b0JlKHRydWUpXG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnRvZ2dsZVNpZGViYXIoKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNpZGViYXJDb2xsYXBzZWQpLnRvQmUoZmFsc2UpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIHN5c3RlbSB0aGVtZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUFwcFN0b3JlKCkpXG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnVwZGF0ZVN5c3RlbVRoZW1lKCdkYXJrJylcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zeXN0ZW1UaGVtZSkudG9CZSgnZGFyaycpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1vZGFsIHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUFwcFN0b3JlKCkpXG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50Lm9wZW5Nb2RhbCgndGVzdC1tb2RhbCcsIHsgZGF0YTogJ3Rlc3QnIH0pXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuYWN0aXZlTW9kYWwpLnRvQmUoJ3Rlc3QtbW9kYWwnKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lm1vZGFsRGF0YSkudG9FcXVhbCh7IGRhdGE6ICd0ZXN0JyB9KVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5jbG9zZU1vZGFsKClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5hY3RpdmVNb2RhbCkudG9CZU51bGwoKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBzZXR0aW5ncyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBcHBTdG9yZSgpKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC51cGRhdGVTZXR0aW5ncyh7XG4gICAgICAgICAgYW5pbWF0aW9uczogZmFsc2UsXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdlcydcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zZXR0aW5ncy5hbmltYXRpb25zKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnNldHRpbmdzLmxhbmd1YWdlKS50b0JlKCdlcycpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnVXNlclN0b3JlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIG51bGwgdXNlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVVzZXJTdG9yZSgpKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcikudG9CZU51bGwoKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBzZXQgdXNlciBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VVc2VyU3RvcmUoKSlcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0ge1xuICAgICAgICBpZDogJ3VzZXItMScsXG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbScsXG4gICAgICAgIG5hbWU6ICdUZXN0IFVzZXInLFxuICAgICAgICBhdmF0YXI6ICdodHRwczovL2V4YW1wbGUuY29tL2F2YXRhci5qcGcnLFxuICAgICAgICByb2xlOiAndXNlcicgYXMgY29uc3QsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnNldFVzZXIobW9ja1VzZXIpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudXNlcikudG9FcXVhbChtb2NrVXNlcilcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBjbGVhciB1c2VyIG9uIGxvZ291dCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVVzZXJTdG9yZSgpKVxuICAgICAgY29uc3QgbW9ja1VzZXIgPSB7XG4gICAgICAgIGlkOiAndXNlci0xJyxcbiAgICAgICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgICAgIGVtYWlsOiAndGVzdEBleGFtcGxlLmNvbSdcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuc2V0VXNlcihtb2NrVXNlcilcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc0F1dGhlbnRpY2F0ZWQpLnRvQmUodHJ1ZSlcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuY2xlYXJVc2VyKClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyKS50b0JlTnVsbCgpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSB1c2VyIHByb2ZpbGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VVc2VyU3RvcmUoKSlcbiAgICAgIGNvbnN0IG1vY2tVc2VyID0ge1xuICAgICAgICBpZDogJ3VzZXItMScsXG4gICAgICAgIHVzZXJuYW1lOiAnVGVzdCBVc2VyJyxcbiAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICB0aGVtZTogJ2xpZ2h0JyBhcyBjb25zdCxcbiAgICAgICAgICBub3RpZmljYXRpb25zOiB0cnVlLFxuICAgICAgICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgICAgICAgIHRpbWV6b25lOiAnVVRDJ1xuICAgICAgICB9LFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgIHByaXZhY3k6ICdwdWJsaWMnIGFzIGNvbnN0LFxuICAgICAgICAgIGxvY2F0aW9uOiAnVVMnLFxuICAgICAgICAgIGludGVyZXN0czogW10sXG4gICAgICAgICAgYmlvOiAnVGVzdCBiaW8nXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRQcm9maWxlKG1vY2tVc2VyKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQudXBkYXRlUHJvZmlsZSh7XG4gICAgICAgICAgdXNlcm5hbWU6ICdVcGRhdGVkIFVzZXInLFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAuLi5tb2NrVXNlci5zZXR0aW5ncyxcbiAgICAgICAgICAgIGJpbzogJ1VwZGF0ZWQgYmlvJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wcm9maWxlPy51c2VybmFtZSkudG9CZSgnVXBkYXRlZCBVc2VyJylcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5wcm9maWxlPy5zZXR0aW5ncy5iaW8pLnRvQmUoJ1VwZGF0ZWQgYmlvJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYXV0aGVudGljYXRpb24gc3RhdGUgY2hhbmdlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVVzZXJTdG9yZSgpKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRBdXRoZW50aWNhdGVkKHRydWUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKHRydWUpXG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnNldEF1dGhlbnRpY2F0ZWQoZmFsc2UpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNBdXRoZW50aWNhdGVkKS50b0JlKGZhbHNlKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1ZvdGluZ1N0b3JlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGVtcHR5IHN0YXRlJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlVm90aW5nU3RvcmUoKSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmJhbGxvdHMpLnRvRXF1YWwoW10pXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuZWxlY3Rpb25zKS50b0VxdWFsKFtdKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnZvdGluZ1JlY29yZHMpLnRvRXF1YWwoW10pXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgYWRkIGJhbGxvdCBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VWb3RpbmdTdG9yZSgpKVxuICAgICAgY29uc3QgbW9ja0JhbGxvdCA9IHtcbiAgICAgICAgaWQ6ICdiYWxsb3QtMScsXG4gICAgICAgIHBvbGxJZDogJ3BvbGwtMScsXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMScsXG4gICAgICAgIHNlbGVjdGlvbnM6IFsnb3B0aW9uLTEnXSxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmFkZEJhbGxvdChtb2NrQmFsbG90KVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmJhbGxvdHMpLnRvSGF2ZUxlbmd0aCgxKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmJhbGxvdHNbMF0pLnRvRXF1YWwobW9ja0JhbGxvdClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZW1vdmUgYmFsbG90IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVZvdGluZ1N0b3JlKCkpXG4gICAgICBjb25zdCBtb2NrQmFsbG90ID0ge1xuICAgICAgICBpZDogJ2JhbGxvdC0xJyxcbiAgICAgICAgcG9sbElkOiAncG9sbC0xJyxcbiAgICAgICAgdXNlcklkOiAndXNlci0xJyxcbiAgICAgICAgc2VsZWN0aW9uczogWydvcHRpb24tMSddLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuYWRkQmFsbG90KG1vY2tCYWxsb3QpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuYmFsbG90cykudG9IYXZlTGVuZ3RoKDEpXG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LnJlbW92ZUJhbGxvdCgnYmFsbG90LTEnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmJhbGxvdHMpLnRvSGF2ZUxlbmd0aCgwKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIHZvdGluZyByZWNvcmRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlVm90aW5nU3RvcmUoKSlcbiAgICAgIGNvbnN0IG1vY2tSZWNvcmQgPSB7XG4gICAgICAgIGlkOiAncmVjb3JkLTEnLFxuICAgICAgICBwb2xsSWQ6ICdwb2xsLTEnLFxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgICBhY3Rpb246ICd2b3RlX2Nhc3QnLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuYWRkVm90aW5nUmVjb3JkKG1vY2tSZWNvcmQpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudm90aW5nUmVjb3JkcykudG9IYXZlTGVuZ3RoKDEpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudm90aW5nUmVjb3Jkc1swXSkudG9FcXVhbChtb2NrUmVjb3JkKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIHVzZXIgdm90aW5nIHNlc3Npb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VWb3RpbmdTdG9yZSgpKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5hZGRCYWxsb3Qoe1xuICAgICAgICAgIGlkOiAnYmFsbG90LTEnLFxuICAgICAgICAgIHBvbGxJZDogJ3BvbGwtMScsXG4gICAgICAgICAgdXNlcklkOiAndXNlci0xJyxcbiAgICAgICAgICBzZWxlY3Rpb25zOiBbJ29wdGlvbi0xJ10sXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuYmFsbG90cykudG9IYXZlTGVuZ3RoKDEpXG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmNsZWFyVXNlclZvdGluZ1Nlc3Npb24oKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIGNsZWFyIFVJIHN0YXRlIGJ1dCBwcmVzZXJ2ZSBhY3R1YWwgdm90aW5nIHJlY29yZHNcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5iYWxsb3RzKS50b0hhdmVMZW5ndGgoMClcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5zZWxlY3RlZEJhbGxvdCkudG9CZU51bGwoKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmN1cnJlbnRCYWxsb3QpLnRvQmVOdWxsKClcbiAgICAgIC8vIE5vdGU6IHZvdGluZ1JlY29yZHMgc2hvdWxkIGJlIHByZXNlcnZlZCBmb3IgYXVkaXQgdHJhaWxcbiAgICB9KVxuICB9KVxuXG4gIC8vIFVJU3RvcmUgcmVtb3ZlZCAtIGRlbGV0ZWQgYXMgdW51c2VkXG5cbiAgZGVzY3JpYmUoJ05vdGlmaWNhdGlvblN0b3JlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGVtcHR5IG5vdGlmaWNhdGlvbnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VOb3RpZmljYXRpb25TdG9yZSgpKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQubm90aWZpY2F0aW9ucykudG9FcXVhbChbXSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51bnJlYWRDb3VudCkudG9CZSgwKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGFkZCBub3RpZmljYXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTm90aWZpY2F0aW9uU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuYWRkTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICBtZXNzYWdlOiAnVGVzdCBub3RpZmljYXRpb24nLFxuICAgICAgICAgIHR5cGU6ICdpbmZvJ1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lm5vdGlmaWNhdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LnVucmVhZENvdW50KS50b0JlKDEpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQubm90aWZpY2F0aW9uc1swXS5tZXNzYWdlKS50b0JlKCdUZXN0IG5vdGlmaWNhdGlvbicpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgbWFyayBub3RpZmljYXRpb25zIGFzIHJlYWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VOb3RpZmljYXRpb25TdG9yZSgpKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5hZGROb3RpZmljYXRpb24oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdUZXN0IG5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCBub3RpZmljYXRpb25JZCA9IHJlc3VsdC5jdXJyZW50Lm5vdGlmaWNhdGlvbnNbMF0uaWRcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQubWFya0FzUmVhZChub3RpZmljYXRpb25JZClcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5ub3RpZmljYXRpb25zWzBdLnJlYWQpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51bnJlYWRDb3VudCkudG9CZSgwKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGNsZWFyIGFsbCBub3RpZmljYXRpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlTm90aWZpY2F0aW9uU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuYWRkTm90aWZpY2F0aW9uKHtcbiAgICAgICAgICBtZXNzYWdlOiAnVGVzdCBub3RpZmljYXRpb24gMScsXG4gICAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICAgIH0pXG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmFkZE5vdGlmaWNhdGlvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ1Rlc3Qgbm90aWZpY2F0aW9uIDInLFxuICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgICB9KVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lm5vdGlmaWNhdGlvbnMpLnRvSGF2ZUxlbmd0aCgyKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5jbGVhckFsbCgpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQubm90aWZpY2F0aW9ucykudG9IYXZlTGVuZ3RoKDApXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQudW5yZWFkQ291bnQpLnRvQmUoMClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBjbGVhciBub3RpZmljYXRpb25zIGJ5IHR5cGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VOb3RpZmljYXRpb25TdG9yZSgpKVxuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICByZXN1bHQuY3VycmVudC5hZGROb3RpZmljYXRpb24oe1xuICAgICAgICAgIG1lc3NhZ2U6ICdJbmZvIG5vdGlmaWNhdGlvbicsXG4gICAgICAgICAgdHlwZTogJ2luZm8nXG4gICAgICAgIH0pXG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmFkZE5vdGlmaWNhdGlvbih7XG4gICAgICAgICAgbWVzc2FnZTogJ1dhcm5pbmcgbm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5ub3RpZmljYXRpb25zKS50b0hhdmVMZW5ndGgoMilcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuY2xlYXJCeVR5cGUoJ2luZm8nKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lm5vdGlmaWNhdGlvbnMpLnRvSGF2ZUxlbmd0aCgxKVxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50Lm5vdGlmaWNhdGlvbnNbMF0udHlwZSkudG9CZSgnd2FybmluZycpXG4gICAgfSlcbiAgfSlcblxuICAvLyBGZWF0dXJlRmxhZ3NTdG9yZSByZW1vdmVkIC0gY29uc29saWRhdGVkIGludG8gYWRtaW4gc3RvcmVcblxuICBkZXNjcmliZSgnU3RvcmUgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY3Jvc3Mtc3RvcmUgaW50ZXJhY3Rpb25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgYXBwUmVzdWx0ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBcHBTdG9yZSgpKVxuICAgICAgY29uc3QgdXNlclJlc3VsdCA9IHJlbmRlckhvb2soKCkgPT4gdXNlVXNlclN0b3JlKCkpXG4gICAgICBcbiAgICAgIC8vIFNldCB1c2VyXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICB1c2VyUmVzdWx0LnJlc3VsdC5jdXJyZW50LnNldFVzZXIoe1xuICAgICAgICAgIGlkOiAndXNlci0xJyxcbiAgICAgICAgICBuYW1lOiAnVGVzdCBVc2VyJyxcbiAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBVcGRhdGUgYXBwIHNldHRpbmdzXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBhcHBSZXN1bHQucmVzdWx0LmN1cnJlbnQudXBkYXRlU2V0dGluZ3Moe1xuICAgICAgICAgIHRoZW1lOiAnZGFyaycsXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdlbidcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdCh1c2VyUmVzdWx0LnJlc3VsdC5jdXJyZW50LmlzQXV0aGVudGljYXRlZCkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KGFwcFJlc3VsdC5yZXN1bHQuY3VycmVudC5zZXR0aW5ncy50aGVtZSkudG9CZSgnZGFyaycpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN0b3JlIHBlcnNpc3RlbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXBwU3RvcmUoKSlcbiAgICAgIFxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQuc2V0VGhlbWUoJ2RhcmsnKVxuICAgICAgICByZXN1bHQuY3VycmVudC5zZXRTaWRlYmFyQ29sbGFwc2VkKHRydWUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBwYWdlIHJlbG9hZCBieSByZS1pbml0aWFsaXppbmcgc3RvcmVcbiAgICAgIGNvbnN0IG5ld1Jlc3VsdCA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXBwU3RvcmUoKSlcbiAgICAgIFxuICAgICAgLy8gSW4gYSByZWFsIGFwcCB3aXRoIHBlcnNpc3RlbmNlLCB0aGVzZSB2YWx1ZXMgd291bGQgYmUgcmVzdG9yZWRcbiAgICAgIC8vIEZvciB0ZXN0aW5nLCB3ZSB2ZXJpZnkgdGhlIGFjdGlvbnMgd29yayBjb3JyZWN0bHlcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC50aGVtZSkudG9CZSgnZGFyaycpXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2lkZWJhckNvbGxhcHNlZCkudG9CZSh0cnVlKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ0Vycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN0b3JlIGVycm9ycyBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlVXNlclN0b3JlKCkpXG4gICAgICBcbiAgICAgIC8vIFRlc3Qgd2l0aCBpbnZhbGlkIGRhdGFcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0LmN1cnJlbnQuc2V0VXNlcihudWxsIGFzIGFueSlcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBTdG9yZSBzaG91bGQgaGFuZGxlIG51bGwgdXNlciBncmFjZWZ1bGx5XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC51c2VyKS50b0JlTnVsbCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgdXBkYXRlcycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVZvdGluZ1N0b3JlKCkpXG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIGNvbmN1cnJlbnQgYmFsbG90IGFkZGl0aW9uc1xuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgcmVzdWx0LmN1cnJlbnQuYWRkQmFsbG90KHtcbiAgICAgICAgICAgIGlkOiBgYmFsbG90LSR7aX1gLFxuICAgICAgICAgICAgcG9sbElkOiAncG9sbC0xJyxcbiAgICAgICAgICAgIHVzZXJJZDogJ3VzZXItMScsXG4gICAgICAgICAgICBzZWxlY3Rpb25zOiBbJ29wdGlvbi0xJ10sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKClcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuYmFsbG90cykudG9IYXZlTGVuZ3RoKDEwKVxuICAgIH0pXG4gIH0pXG59KVxuXG5cbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImRldkxvZyIsImZuIiwibG9nZ2VyIiwiaW5mbyIsImVycm9yIiwid2FybiIsIndpdGhPcHRpb25hbCIsIm9iaiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsInVzZUFwcFN0b3JlIiwiZ2V0U3RhdGUiLCJyZXNldCIsInVzZVVzZXJTdG9yZSIsInVzZVZvdGluZ1N0b3JlIiwidXNlTm90aWZpY2F0aW9uU3RvcmUiLCJzZXRTdGF0ZSIsIm5vdGlmaWNhdGlvbnMiLCJ1bnJlYWRDb3VudCIsIml0IiwicmVzdWx0IiwicmVuZGVySG9vayIsImV4cGVjdCIsImN1cnJlbnQiLCJ0aGVtZSIsInRvQmUiLCJzaWRlYmFyQ29sbGFwc2VkIiwiaXNNb2JpbGUiLCJhY3QiLCJzZXRUaGVtZSIsInRvZ2dsZVNpZGViYXIiLCJ1cGRhdGVTeXN0ZW1UaGVtZSIsInN5c3RlbVRoZW1lIiwib3Blbk1vZGFsIiwiZGF0YSIsImFjdGl2ZU1vZGFsIiwibW9kYWxEYXRhIiwidG9FcXVhbCIsImNsb3NlTW9kYWwiLCJ0b0JlTnVsbCIsInVwZGF0ZVNldHRpbmdzIiwiYW5pbWF0aW9ucyIsImxhbmd1YWdlIiwic2V0dGluZ3MiLCJ1c2VyIiwiaXNBdXRoZW50aWNhdGVkIiwibW9ja1VzZXIiLCJpZCIsImVtYWlsIiwibmFtZSIsImF2YXRhciIsInJvbGUiLCJjcmVhdGVkQXQiLCJEYXRlIiwidXBkYXRlZEF0Iiwic2V0VXNlciIsImNsZWFyVXNlciIsInVzZXJuYW1lIiwicHJlZmVyZW5jZXMiLCJ0aW1lem9uZSIsInByaXZhY3kiLCJsb2NhdGlvbiIsImludGVyZXN0cyIsImJpbyIsIm1ldGFkYXRhIiwidG9JU09TdHJpbmciLCJzZXRQcm9maWxlIiwidXBkYXRlUHJvZmlsZSIsInByb2ZpbGUiLCJzZXRBdXRoZW50aWNhdGVkIiwiYmFsbG90cyIsImVsZWN0aW9ucyIsInZvdGluZ1JlY29yZHMiLCJtb2NrQmFsbG90IiwicG9sbElkIiwidXNlcklkIiwic2VsZWN0aW9ucyIsInRpbWVzdGFtcCIsImFkZEJhbGxvdCIsInRvSGF2ZUxlbmd0aCIsInJlbW92ZUJhbGxvdCIsIm1vY2tSZWNvcmQiLCJhY3Rpb24iLCJhZGRWb3RpbmdSZWNvcmQiLCJjbGVhclVzZXJWb3RpbmdTZXNzaW9uIiwic2VsZWN0ZWRCYWxsb3QiLCJjdXJyZW50QmFsbG90IiwiYWRkTm90aWZpY2F0aW9uIiwibWVzc2FnZSIsInR5cGUiLCJub3RpZmljYXRpb25JZCIsIm1hcmtBc1JlYWQiLCJyZWFkIiwiY2xlYXJBbGwiLCJjbGVhckJ5VHlwZSIsImFwcFJlc3VsdCIsInVzZXJSZXN1bHQiLCJzZXRTaWRlYmFyQ29sbGFwc2VkIiwibmV3UmVzdWx0IiwiaSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0NBS0M7Ozs7eUJBRXNEO3VCQUN2QjswQkFHSjsyQkFDQzs2QkFDRTttQ0FFTTtBQUNyQyw0REFBNEQ7QUFFNUQsNkJBQTZCO0FBQzdCQSxhQUFJLENBQUNDLElBQUksQ0FBQyxzQkFBc0IsSUFBTyxDQUFBO1FBQ3JDQyxRQUFRRixhQUFJLENBQUNHLEVBQUU7UUFDZkMsUUFBUTtZQUNOQyxNQUFNTCxhQUFJLENBQUNHLEVBQUU7WUFDYkcsT0FBT04sYUFBSSxDQUFDRyxFQUFFO1lBQ2RJLE1BQU1QLGFBQUksQ0FBQ0csRUFBRTtRQUNmO0lBQ0YsQ0FBQTtBQUVBSCxhQUFJLENBQUNDLElBQUksQ0FBQyx1QkFBdUIsSUFBTyxDQUFBO1FBQ3RDTyxjQUFjUixhQUFJLENBQUNHLEVBQUUsQ0FBQyxD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