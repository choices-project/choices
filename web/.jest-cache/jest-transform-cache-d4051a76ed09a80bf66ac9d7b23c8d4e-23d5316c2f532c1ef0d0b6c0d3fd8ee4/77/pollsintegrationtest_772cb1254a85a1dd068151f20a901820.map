{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/integration/api/polls-integration.test.ts"],"sourcesContent":["/**\n * Integration Tests - API + Database (20% of tests)\n * \n * These tests focus on how components work together.\n * Test API endpoints with real database operations.\n */\n\nimport { describe, it, expect, beforeAll, afterAll, beforeEach, afterEach } from '@jest/globals';\nimport { createClient } from '@supabase/supabase-js';\nimport { NextRequest } from 'next/server';\nimport { GET, POST } from '@/app/api/polls/route';\n\n// Set real Supabase credentials directly for testing\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://muqwrehywjrbaeerjgfb.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'sb_publishable_tJOpGO2IPjujJDQou44P_g_BgbTFBfc';\n\n// Use real Supabase client with real credentials\nlet supabase: any;\n\ntry {\n  supabase = createClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n  );\n} catch (error) {\n  console.warn('Real Supabase credentials not set up. This test requires real credentials.');\n  console.warn('Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY environment variables.');\n}\n\ndescribe('Integration Tests - API + Database', () => {\n  let testUser: any;\n  let testPollId: string | null = null;\n\n  beforeAll(async () => {\n    if (!supabase) {\n      console.warn('Skipping tests - Real Supabase credentials not set up');\n      return;\n    }\n\n    // Login with real test user\n    console.log('Integration: Logging in with real test user...');\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email: 'test@example.com',\n      password: 'TestPassword123!'\n    });\n\n    if (error) {\n      console.error('Failed to login with test user:', error);\n      throw new Error(`Failed to login with test user: ${error.message}`);\n    }\n\n    testUser = data.user;\n    console.log('Integration: Successfully logged in with test user:', testUser.email);\n  });\n\n  afterAll(async () => {\n    if (!supabase) return;\n\n    // Clean up test data\n    if (testPollId) {\n      console.log('Integration: Cleaning up test poll:', testPollId);\n      await supabase.from('polls').delete().eq('id', testPollId);\n    }\n\n    // Sign out\n    await supabase.auth.signOut();\n  });\n\n  beforeEach(() => {\n    // Reset test poll ID\n    testPollId = null;\n  });\n\n  afterEach(async () => {\n    if (!supabase) return;\n\n    // Clean up any test data created during the test\n    if (testPollId) {\n      await supabase.from('polls').delete().eq('id', testPollId);\n      testPollId = null;\n    }\n  });\n\n  describe('API + Database Integration', () => {\n    it('should create poll and retrieve it via API', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // Integration test: API + Database\n      // 1. Create poll via database\n      const pollData = {\n        title: 'Integration Test Poll',\n        options: [\n          { text: 'Integration Option 1', votes: 0 },\n          { text: 'Integration Option 2', votes: 0 }\n        ],\n        created_by: testUser.id,\n        total_votes: 0,\n        status: 'active'\n      };\n\n      const { data: createdPoll, error: createError } = await supabase\n        .from('polls')\n        .insert(pollData)\n        .select()\n        .single();\n\n      expect(createError).toBeNull();\n      expect(createdPoll).toBeDefined();\n      expect(createdPoll.title).toBe('Integration Test Poll');\n\n      // Store for cleanup\n      testPollId = createdPoll.id;\n\n      // 2. Retrieve poll via API\n      const request = new NextRequest('http://localhost:3000/api/polls');\n      const response = await GET(request);\n      const responseData = await response.json();\n\n      console.log('Integration: API response:', responseData);\n\n      // 3. Verify integration\n      expect(response.status).toBe(200);\n      expect(responseData.success).toBe(true);\n      expect(Array.isArray(responseData.polls)).toBe(true);\n      \n      // Check if our created poll is in the results\n      const foundPoll = responseData.polls.find((poll: any) => poll.poll_id === createdPoll.id);\n      expect(foundPoll).toBeDefined();\n    });\n\n    it('should handle poll creation with voting integration', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // Integration test: Poll creation + Voting\n      // 1. Create poll\n      const pollData = {\n        title: 'Voting Integration Poll',\n        options: [\n          { text: 'Vote Option 1', votes: 0 },\n          { text: 'Vote Option 2', votes: 0 }\n        ],\n        created_by: testUser.id,\n        total_votes: 0,\n        status: 'active'\n      };\n\n      const { data: poll, error: pollError } = await supabase\n        .from('polls')\n        .insert(pollData)\n        .select()\n        .single();\n\n      expect(pollError).toBeNull();\n      expect(poll).toBeDefined();\n\n      // Store for cleanup\n      testPollId = poll.id;\n\n      // 2. Add votes\n      const voteData = {\n        poll_id: poll.id,\n        user_id: testUser.id,\n        option_index: 0,\n        created_at: new Date().toISOString()\n      };\n\n      const { data: vote, error: voteError } = await supabase\n        .from('votes')\n        .insert(voteData)\n        .select()\n        .single();\n\n      expect(voteError).toBeNull();\n      expect(vote).toBeDefined();\n\n      // 3. Update poll vote count\n      const { data: updatedPoll, error: updateError } = await supabase\n        .from('polls')\n        .update({ total_votes: 1 })\n        .eq('id', poll.id)\n        .select()\n        .single();\n\n      expect(updateError).toBeNull();\n      expect(updatedPoll.total_votes).toBe(1);\n\n      // 4. Verify integration\n      const { data: finalPoll, error: finalError } = await supabase\n        .from('polls')\n        .select('*')\n        .eq('id', poll.id)\n        .single();\n\n      expect(finalError).toBeNull();\n      expect(finalPoll.total_votes).toBe(1);\n    });\n\n    it('should handle poll results calculation integration', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // Integration test: Poll + Votes + Results\n      // 1. Create poll\n      const pollData = {\n        title: 'Results Integration Poll',\n        options: [\n          { text: 'Results Option 1', votes: 0 },\n          { text: 'Results Option 2', votes: 0 }\n        ],\n        created_by: testUser.id,\n        total_votes: 0,\n        status: 'active'\n      };\n\n      const { data: poll, error: pollError } = await supabase\n        .from('polls')\n        .insert(pollData)\n        .select()\n        .single();\n\n      expect(pollError).toBeNull();\n      expect(poll).toBeDefined();\n\n      // Store for cleanup\n      testPollId = poll.id;\n\n      // 2. Add multiple votes\n      const votes = [\n        { poll_id: poll.id, user_id: testUser.id, option_index: 0 },\n        { poll_id: poll.id, user_id: 'user2', option_index: 0 },\n        { poll_id: poll.id, user_id: 'user3', option_index: 1 }\n      ];\n\n      for (const vote of votes) {\n        const { error: voteError } = await supabase\n          .from('votes')\n          .insert(vote);\n\n        expect(voteError).toBeNull();\n      }\n\n      // 3. Calculate results\n      const { data: allVotes, error: votesError } = await supabase\n        .from('votes')\n        .select('*')\n        .eq('poll_id', poll.id);\n\n      expect(votesError).toBeNull();\n      expect(allVotes).toHaveLength(3);\n\n      // 4. Verify integration\n      const option1Votes = allVotes.filter((vote: any) => vote.option_index === 0).length;\n      const option2Votes = allVotes.filter((vote: any) => vote.option_index === 1).length;\n\n      expect(option1Votes).toBe(2);\n      expect(option2Votes).toBe(1);\n    });\n  });\n\n  describe('API Error Handling Integration', () => {\n    it('should handle database errors gracefully', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // Integration test: API error handling\n      // 1. Test invalid poll data\n      const invalidPollData = {\n        // Missing required fields\n        options: [\n          { text: 'Invalid Option 1' }\n        ],\n        created_by: testUser.id\n      };\n\n      const { data, error } = await supabase\n        .from('polls')\n        .insert(invalidPollData)\n        .select()\n        .single();\n\n      // 2. Verify error handling\n      expect(error).not.toBeNull();\n      expect(error.message).toContain('title');\n\n      // 3. Test API error response\n      const request = new NextRequest('http://localhost:3000/api/polls');\n      const response = await GET(request);\n      const responseData = await response.json();\n\n      // API should still work despite database error\n      expect(response.status).toBe(200);\n      expect(responseData.success).toBe(true);\n    });\n\n    it('should handle authentication errors integration', async () => {\n      if (!supabase) {\n        console.warn('Skipping test - Real Supabase credentials not set up');\n        return;\n      }\n\n      // Integration test: Authentication + API\n      // 1. Test with invalid user\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: 'invalid@example.com',\n        password: 'invalidpassword'\n      });\n\n      // 2. Verify authentication error\n      expect(error).not.toBeNull();\n      expect(error.message).toContain('Invalid login credentials');\n\n      // 3. Test API with invalid authentication\n      const request = new NextRequest('http://localhost:3000/api/polls');\n      const response = await GET(request);\n      const responseData = await response.json();\n\n      // API should still work (public endpoint)\n      expect(response.status).toBe(200);\n      expect(responseData.success).toBe(true);\n    });\n  });\n});\n"],"names":["process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","supabase","createClient","error","console","warn","describe","testUser","testPollId","beforeAll","log","data","auth","signInWithPassword","email","password","Error","message","user","afterAll","from","delete","eq","signOut","beforeEach","afterEach","it","pollData","title","options","text","votes","created_by","id","total_votes","status","createdPoll","createError","insert","select","single","expect","toBeNull","toBeDefined","toBe","request","NextRequest","response","GET","responseData","json","success","Array","isArray","polls","foundPoll","find","poll","poll_id","pollError","voteData","user_id","option_index","created_at","Date","toISOString","vote","voteError","updatedPoll","updateError","update","finalPoll","finalError","allVotes","votesError","toHaveLength","option1Votes","filter","length","option2Votes","invalidPollData","not","toContain"],"mappings":"AAAA;;;;;CAKC;;;;yBAEgF;4BACpD;wBACD;uBACF;AAE1B,qDAAqD;AACrDA,QAAQC,GAAG,CAACC,wBAAwB,GAAG;AACvCF,QAAQC,GAAG,CAACE,6BAA6B,GAAG;AAE5C,iDAAiD;AACjD,IAAIC;AAEJ,IAAI;IACFA,WAAWC,IAAAA,wBAAY,EACrBL,QAAQC,GAAG,CAACC,wBAAwB,EACpCF,QAAQC,GAAG,CAACE,6BAA6B;AAE7C,EAAE,OAAOG,OAAO;IACdC,QAAQC,IAAI,CAAC;IACbD,QAAQC,IAAI,CAAC;AACf;AAEAC,IAAAA,iBAAQ,EAAC,sCAAsC;IAC7C,IAAIC;IACJ,IAAIC,aAA4B;IAEhCC,IAAAA,kBAAS,EAAC;QACR,IAAI,CAACR,UAAU;YACbG,QAAQC,IAAI,CAAC;YACb;QACF;QAEA,4BAA4B;QAC5BD,QAAQM,GAAG,CAAC;QACZ,MAAM,EAAEC,IAAI,EAAER,KAAK,EAAE,GAAG,MAAMF,SAASW,IAAI,CAACC,kBAAkB,CAAC;YAC7DC,OAAO;YACPC,UAAU;QACZ;QAEA,IAAIZ,OAAO;YACTC,QAAQD,KAAK,CAAC,mCAAmCA;YACjD,MAAM,IAAIa,MAAM,CAAC,gCAAgC,EAAEb,MAAMc,OAAO,CAAC,CAAC;QACpE;QAEAV,WAAWI,KAAKO,IAAI;QACpBd,QAAQM,GAAG,CAAC,uDAAuDH,SAASO,KAAK;IACnF;IAEAK,IAAAA,iBAAQ,EAAC;QACP,IAAI,CAAClB,UAAU;QAEf,qBAAqB;QACrB,IAAIO,YAAY;YACdJ,QAAQM,GAAG,CAAC,uCAAuCF;YACnD,MAAMP,SAASmB,IAAI,CAAC,SAASC,MAAM,GAAGC,EAAE,CAAC,MAAMd;QACjD;QAEA,WAAW;QACX,MAAMP,SAASW,IAAI,CAACW,OAAO;IAC7B;IAEAC,IAAAA,mBAAU,EAAC;QACT,qBAAqB;QACrBhB,aAAa;IACf;IAEAiB,IAAAA,kBAAS,EAAC;QACR,IAAI,CAACxB,UAAU;QAEf,iDAAiD;QACjD,IAAIO,YAAY;YACd,MAAMP,SAASmB,IAAI,CAAC,SAASC,MAAM,GAAGC,EAAE,CAAC,MAAMd;YAC/CA,aAAa;QACf;IACF;IAEAF,IAAAA,iBAAQ,EAAC,8BAA8B;QACrCoB,IAAAA,WAAE,EAAC,8CAA8C;YAC/C,IAAI,CAACzB,UAAU;gBACbG,QAAQC,IAAI,CAAC;gBACb;YACF;YAEA,mCAAmC;YACnC,8BAA8B;YAC9B,MAAMsB,WAAW;gBACfC,OAAO;gBACPC,SAAS;oBACP;wBAAEC,MAAM;wBAAwBC,OAAO;oBAAE;oBACzC;wBAAED,MAAM;wBAAwBC,OAAO;oBAAE;iBAC1C;gBACDC,YAAYzB,SAAS0B,EAAE;gBACvBC,aAAa;gBACbC,QAAQ;YACV;YAEA,MAAM,EAAExB,MAAMyB,WAAW,EAAEjC,OAAOkC,WAAW,EAAE,GAAG,MAAMpC,SACrDmB,IAAI,CAAC,SACLkB,MAAM,CAACX,UACPY,MAAM,GACNC,MAAM;YAETC,IAAAA,eAAM,EAACJ,aAAaK,QAAQ;YAC5BD,IAAAA,eAAM,EAACL,aAAaO,WAAW;YAC/BF,IAAAA,eAAM,EAACL,YAAYR,KAAK,EAAEgB,IAAI,CAAC;YAE/B,oBAAoB;YACpBpC,aAAa4B,YAAYH,EAAE;YAE3B,2BAA2B;YAC3B,MAAMY,UAAU,IAAIC,mBAAW,CAAC;YAChC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACH;YAC3B,MAAMI,eAAe,MAAMF,SAASG,IAAI;YAExC9C,QAAQM,GAAG,CAAC,8BAA8BuC;YAE1C,wBAAwB;YACxBR,IAAAA,eAAM,EAACM,SAASZ,MAAM,EAAES,IAAI,CAAC;YAC7BH,IAAAA,eAAM,EAACQ,aAAaE,OAAO,EAAEP,IAAI,CAAC;YAClCH,IAAAA,eAAM,EAACW,MAAMC,OAAO,CAACJ,aAAaK,KAAK,GAAGV,IAAI,CAAC;YAE/C,8CAA8C;YAC9C,MAAMW,YAAYN,aAAaK,KAAK,CAACE,IAAI,CAAC,CAACC,OAAcA,KAAKC,OAAO,KAAKtB,YAAYH,EAAE;YACxFQ,IAAAA,eAAM,EAACc,WAAWZ,WAAW;QAC/B;QAEAjB,IAAAA,WAAE,EAAC,uDAAuD;YACxD,IAAI,CAACzB,UAAU;gBACbG,QAAQC,IAAI,CAAC;gBACb;YACF;YAEA,2CAA2C;YAC3C,iBAAiB;YACjB,MAAMsB,WAAW;gBACfC,OAAO;gBACPC,SAAS;oBACP;wBAAEC,MAAM;wBAAiBC,OAAO;oBAAE;oBAClC;wBAAED,MAAM;wBAAiBC,OAAO;oBAAE;iBACnC;gBACDC,YAAYzB,SAAS0B,EAAE;gBACvBC,aAAa;gBACbC,QAAQ;YACV;YAEA,MAAM,EAAExB,MAAM8C,IAAI,EAAEtD,OAAOwD,SAAS,EAAE,GAAG,MAAM1D,SAC5CmB,IAAI,CAAC,SACLkB,MAAM,CAACX,UACPY,MAAM,GACNC,MAAM;YAETC,IAAAA,eAAM,EAACkB,WAAWjB,QAAQ;YAC1BD,IAAAA,eAAM,EAACgB,MAAMd,WAAW;YAExB,oBAAoB;YACpBnC,aAAaiD,KAAKxB,EAAE;YAEpB,eAAe;YACf,MAAM2B,WAAW;gBACfF,SAASD,KAAKxB,EAAE;gBAChB4B,SAAStD,SAAS0B,EAAE;gBACpB6B,cAAc;gBACdC,YAAY,IAAIC,OAAOC,WAAW;YACpC;YAEA,MAAM,EAAEtD,MAAMuD,IAAI,EAAE/D,OAAOgE,SAAS,EAAE,GAAG,MAAMlE,SAC5CmB,IAAI,CAAC,SACLkB,MAAM,CAACsB,UACPrB,MAAM,GACNC,MAAM;YAETC,IAAAA,eAAM,EAAC0B,WAAWzB,QAAQ;YAC1BD,IAAAA,eAAM,EAACyB,MAAMvB,WAAW;YAExB,4BAA4B;YAC5B,MAAM,EAAEhC,MAAMyD,WAAW,EAAEjE,OAAOkE,WAAW,EAAE,GAAG,MAAMpE,SACrDmB,IAAI,CAAC,SACLkD,MAAM,CAAC;gBAAEpC,aAAa;YAAE,GACxBZ,EAAE,CAAC,MAAMmC,KAAKxB,EAAE,EAChBM,MAAM,GACNC,MAAM;YAETC,IAAAA,eAAM,EAAC4B,aAAa3B,QAAQ;YAC5BD,IAAAA,eAAM,EAAC2B,YAAYlC,WAAW,EAAEU,IAAI,CAAC;YAErC,wBAAwB;YACxB,MAAM,EAAEjC,MAAM4D,SAAS,EAAEpE,OAAOqE,UAAU,EAAE,GAAG,MAAMvE,SAClDmB,IAAI,CAAC,SACLmB,MAAM,CAAC,KACPjB,EAAE,CAAC,MAAMmC,KAAKxB,EAAE,EAChBO,MAAM;YAETC,IAAAA,eAAM,EAAC+B,YAAY9B,QAAQ;YAC3BD,IAAAA,eAAM,EAAC8B,UAAUrC,WAAW,EAAEU,IAAI,CAAC;QACrC;QAEAlB,IAAAA,WAAE,EAAC,sDAAsD;YACvD,IAAI,CAACzB,UAAU;gBACbG,QAAQC,IAAI,CAAC;gBACb;YACF;YAEA,2CAA2C;YAC3C,iBAAiB;YACjB,MAAMsB,WAAW;gBACfC,OAAO;gBACPC,SAAS;oBACP;wBAAEC,MAAM;wBAAoBC,OAAO;oBAAE;oBACrC;wBAAED,MAAM;wBAAoBC,OAAO;oBAAE;iBACtC;gBACDC,YAAYzB,SAAS0B,EAAE;gBACvBC,aAAa;gBACbC,QAAQ;YACV;YAEA,MAAM,EAAExB,MAAM8C,IAAI,EAAEtD,OAAOwD,SAAS,EAAE,GAAG,MAAM1D,SAC5CmB,IAAI,CAAC,SACLkB,MAAM,CAACX,UACPY,MAAM,GACNC,MAAM;YAETC,IAAAA,eAAM,EAACkB,WAAWjB,QAAQ;YAC1BD,IAAAA,eAAM,EAACgB,MAAMd,WAAW;YAExB,oBAAoB;YACpBnC,aAAaiD,KAAKxB,EAAE;YAEpB,wBAAwB;YACxB,MAAMF,QAAQ;gBACZ;oBAAE2B,SAASD,KAAKxB,EAAE;oBAAE4B,SAAStD,SAAS0B,EAAE;oBAAE6B,cAAc;gBAAE;gBAC1D;oBAAEJ,SAASD,KAAKxB,EAAE;oBAAE4B,SAAS;oBAASC,cAAc;gBAAE;gBACtD;oBAAEJ,SAASD,KAAKxB,EAAE;oBAAE4B,SAAS;oBAASC,cAAc;gBAAE;aACvD;YAED,KAAK,MAAMI,QAAQnC,MAAO;gBACxB,MAAM,EAAE5B,OAAOgE,SAAS,EAAE,GAAG,MAAMlE,SAChCmB,IAAI,CAAC,SACLkB,MAAM,CAAC4B;gBAEVzB,IAAAA,eAAM,EAAC0B,WAAWzB,QAAQ;YAC5B;YAEA,uBAAuB;YACvB,MAAM,EAAE/B,MAAM8D,QAAQ,EAAEtE,OAAOuE,UAAU,EAAE,GAAG,MAAMzE,SACjDmB,IAAI,CAAC,SACLmB,MAAM,CAAC,KACPjB,EAAE,CAAC,WAAWmC,KAAKxB,EAAE;YAExBQ,IAAAA,eAAM,EAACiC,YAAYhC,QAAQ;YAC3BD,IAAAA,eAAM,EAACgC,UAAUE,YAAY,CAAC;YAE9B,wBAAwB;YACxB,MAAMC,eAAeH,SAASI,MAAM,CAAC,CAACX,OAAcA,KAAKJ,YAAY,KAAK,GAAGgB,MAAM;YACnF,MAAMC,eAAeN,SAASI,MAAM,CAAC,CAACX,OAAcA,KAAKJ,YAAY,KAAK,GAAGgB,MAAM;YAEnFrC,IAAAA,eAAM,EAACmC,cAAchC,IAAI,CAAC;YAC1BH,IAAAA,eAAM,EAACsC,cAAcnC,IAAI,CAAC;QAC5B;IACF;IAEAtC,IAAAA,iBAAQ,EAAC,kCAAkC;QACzCoB,IAAAA,WAAE,EAAC,4CAA4C;YAC7C,IAAI,CAACzB,UAAU;gBACbG,QAAQC,IAAI,CAAC;gBACb;YACF;YAEA,uCAAuC;YACvC,4BAA4B;YAC5B,MAAM2E,kBAAkB;gBACtB,0BAA0B;gBAC1BnD,SAAS;oBACP;wBAAEC,MAAM;oBAAmB;iBAC5B;gBACDE,YAAYzB,SAAS0B,EAAE;YACzB;YAEA,MAAM,EAAEtB,IAAI,EAAER,KAAK,EAAE,GAAG,MAAMF,SAC3BmB,IAAI,CAAC,SACLkB,MAAM,CAAC0C,iBACPzC,MAAM,GACNC,MAAM;YAET,2BAA2B;YAC3BC,IAAAA,eAAM,EAACtC,OAAO8E,GAAG,CAACvC,QAAQ;YAC1BD,IAAAA,eAAM,EAACtC,MAAMc,OAAO,EAAEiE,SAAS,CAAC;YAEhC,6BAA6B;YAC7B,MAAMrC,UAAU,IAAIC,mBAAW,CAAC;YAChC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACH;YAC3B,MAAMI,eAAe,MAAMF,SAASG,IAAI;YAExC,+CAA+C;YAC/CT,IAAAA,eAAM,EAACM,SAASZ,MAAM,EAAES,IAAI,CAAC;YAC7BH,IAAAA,eAAM,EAACQ,aAAaE,OAAO,EAAEP,IAAI,CAAC;QACpC;QAEAlB,IAAAA,WAAE,EAAC,mDAAmD;YACpD,IAAI,CAACzB,UAAU;gBACbG,QAAQC,IAAI,CAAC;gBACb;YACF;YAEA,yCAAyC;YACzC,4BAA4B;YAC5B,MAAM,EAAEM,IAAI,EAAER,KAAK,EAAE,GAAG,MAAMF,SAASW,IAAI,CAACC,kBAAkB,CAAC;gBAC7DC,OAAO;gBACPC,UAAU;YACZ;YAEA,iCAAiC;YACjC0B,IAAAA,eAAM,EAACtC,OAAO8E,GAAG,CAACvC,QAAQ;YAC1BD,IAAAA,eAAM,EAACtC,MAAMc,OAAO,EAAEiE,SAAS,CAAC;YAEhC,0CAA0C;YAC1C,MAAMrC,UAAU,IAAIC,mBAAW,CAAC;YAChC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACH;YAC3B,MAAMI,eAAe,MAAMF,SAASG,IAAI;YAExC,0CAA0C;YAC1CT,IAAAA,eAAM,EAACM,SAASZ,MAAM,EAAES,IAAI,CAAC;YAC7BH,IAAAA,eAAM,EAACQ,aAAaE,OAAO,EAAEP,IAAI,CAAC;QACpC;IACF;AACF"}