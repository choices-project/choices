{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/utils/clean.ts"],"sourcesContent":["/**\n * Phase 4: exactOptionalPropertyTypes Cleanup Utilities\n * \n * Core utilities to eliminate undefined assignments and ensure type safety\n * without loosening TypeScript configuration\n */\n\n/**\n * Recursively strips undefined values from objects and arrays\n * Essential for DB writes and object construction with exactOptionalPropertyTypes\n */\nexport function stripUndefinedDeep<T>(input: T): T {\n  if (Array.isArray(input)) {\n    return input.map(stripUndefinedDeep) as any\n  }\n  \n  if (input && typeof input === 'object') {\n    const out: any = {}\n    for (const [k, v] of Object.entries(input)) {\n      if (v === undefined) continue\n      out[k] = stripUndefinedDeep(v)\n    }\n    return out\n  }\n  \n  return input\n}\n\n/**\n * Type guard to check if a value is present (not null or undefined)\n * More explicit than just truthy checks\n */\nexport const isPresent = <T>(x: T): x is NonNullable<T> => x != null\n\n/**\n * Filter array to remove null/undefined values with proper typing\n */\nexport function filterPresent<T>(arr: Array<T | null | undefined>): T[] {\n  return arr.filter(isPresent)\n}\n\n/**\n * Safe object property access with fallback\n */\nexport function safeGet<T, K extends keyof T>(\n  obj: T | null | undefined, \n  key: K, \n  fallback: T[K]\n): T[K] {\n  return obj?.[key] ?? fallback\n}\n\n/**\n * Create object with only defined properties (no undefined keys)\n */\nexport function createCleanObject<T extends Record<string, any>>(obj: T): Partial<T> {\n  const result: Partial<T> = {}\n  for (const [key, value] of Object.entries(obj)) {\n    if (value !== undefined) {\n      result[key as keyof T] = value\n    }\n  }\n  return result\n}\n"],"names":["createCleanObject","filterPresent","isPresent","safeGet","stripUndefinedDeep","input","Array","isArray","map","out","k","v","Object","entries","undefined","x","arr","filter","obj","key","fallback","result","value"],"mappings":"AAAA;;;;;CAKC,GAED;;;CAGC;;;;;;;;;;;IA6CeA,iBAAiB;eAAjBA;;IAlBAC,aAAa;eAAbA;;IALHC,SAAS;eAATA;;IAYGC,OAAO;eAAPA;;IAjCAC,kBAAkB;eAAlBA;;;AAAT,SAASA,mBAAsBC,KAAQ;IAC5C,IAAIC,MAAMC,OAAO,CAACF,QAAQ;QACxB,OAAOA,MAAMG,GAAG,CAACJ;IACnB;IAEA,IAAIC,SAAS,OAAOA,UAAU,UAAU;QACtC,MAAMI,MAAW,CAAC;QAClB,KAAK,MAAM,CAACC,GAAGC,EAAE,IAAIC,OAAOC,OAAO,CAACR,OAAQ;YAC1C,IAAIM,MAAMG,WAAW;YACrBL,GAAG,CAACC,EAAE,GAAGN,mBAAmBO;QAC9B;QACA,OAAOF;IACT;IAEA,OAAOJ;AACT;AAMO,MAAMH,YAAY,CAAIa,IAA8BA,KAAK;AAKzD,SAASd,cAAiBe,GAAgC;IAC/D,OAAOA,IAAIC,MAAM,CAACf;AACpB;AAKO,SAASC,QACde,GAAyB,EACzBC,GAAM,EACNC,QAAc;IAEd,OAAOF,KAAK,CAACC,IAAI,IAAIC;AACvB;AAKO,SAASpB,kBAAiDkB,GAAM;IACrE,MAAMG,SAAqB,CAAC;IAC5B,KAAK,MAAM,CAACF,KAAKG,MAAM,IAAIV,OAAOC,OAAO,CAACK,KAAM;QAC9C,IAAII,UAAUR,WAAW;YACvBO,MAAM,CAACF,IAAe,GAAGG;QAC3B;IACF;IACA,OAAOD;AACT"}