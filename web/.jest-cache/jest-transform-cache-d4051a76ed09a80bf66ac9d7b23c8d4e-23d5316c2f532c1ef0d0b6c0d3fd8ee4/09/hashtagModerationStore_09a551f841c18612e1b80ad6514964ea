2358d963602aec403168198dae9fe5e8
/**
 * Hashtag Moderation Store - Zustand Implementation
 * 
 * Manages hashtag moderation state including flagging interface,
 * moderation queue, and form state management.
 * 
 * Created: January 15, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    moderationStoreUtils: function() {
        return moderationStoreUtils;
    },
    useHashtagModerationStore: function() {
        return useHashtagModerationStore;
    },
    useModerationActions: function() {
        return useModerationActions;
    },
    useModerationDebug: function() {
        return useModerationDebug;
    },
    useModerationError: function() {
        return useModerationError;
    },
    useModerationForm: function() {
        return useModerationForm;
    },
    useModerationLoading: function() {
        return useModerationLoading;
    },
    useModerationModal: function() {
        return useModerationModal;
    },
    useModerationQueue: function() {
        return useModerationQueue;
    },
    useModerationStats: function() {
        return useModerationStats;
    },
    useModerationSubscription: function() {
        return useModerationSubscription;
    },
    usePendingFlags: function() {
        return usePendingFlags;
    },
    useSelectedModeration: function() {
        return useSelectedModeration;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _immer = require("zustand/middleware/immer");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useHashtagModerationStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((0, _immer.immer)((set, _get)=>({
        // Initial state
        isOpen: false,
        flagType: "inappropriate",
        reason: "",
        isSubmitting: false,
        error: null,
        moderationQueue: [],
        selectedModeration: null,
        isLoading: false,
        // Base store actions
        setLoading: (loading)=>set((state)=>{
                state.isLoading = loading;
            }),
        setError: (error)=>set((state)=>{
                state.error = error;
            }),
        clearError: ()=>set((state)=>{
                state.error = null;
            }),
        // Modal actions
        setIsOpen: (open)=>set((state)=>{
                state.isOpen = open;
                // Reset form when opening
                if (open) {
                    state.flagType = "inappropriate";
                    state.reason = "";
                    state.error = null;
                }
            }),
        // Form actions
        setFlagType: (type)=>set((state)=>{
                state.flagType = type;
            }),
        setReason: (reason)=>set((state)=>{
                state.reason = reason;
            }),
        resetForm: ()=>set((state)=>{
                state.flagType = "inappropriate";
                state.reason = "";
                state.isSubmitting = false;
                state.error = null;
            }),
        // Submission actions
        setIsSubmitting: (submitting)=>set((state)=>{
                state.isSubmitting = submitting;
            }),
        // Moderation actions
        setModerationQueue: (queue)=>set((state)=>{
                state.moderationQueue = queue;
            }),
        setSelectedModeration: (moderation)=>set((state)=>{
                state.selectedModeration = moderation;
            }),
        addModeration: (moderation)=>set((state)=>{
                state.moderationQueue.unshift(moderation);
            }),
        updateModeration: (id, updates)=>set((state)=>{
                const index = state.moderationQueue.findIndex((m)=>m.id === id);
                if (index !== -1) {
                    const existing = state.moderationQueue[index];
                    if (existing) {
                        state.moderationQueue[index] = {
                            ...existing,
                            ...updates,
                            updatedAt: new Date().toISOString()
                        };
                    }
                }
            }),
        removeModeration: (id)=>set((state)=>{
                state.moderationQueue = state.moderationQueue.filter((m)=>m.id !== id);
            }),
        // Flag actions
        submitFlag: async (hashtagId)=>{
            const state = _get();
            if (!state.reason.trim()) {
                set((state)=>{
                    state.error = "Please provide a reason for flagging";
                });
                return;
            }
            set((state)=>{
                state.isSubmitting = true;
                state.error = null;
            });
            try {
                // Get user ID from user store
                const { useUserStore } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./userStore")));
                const userStore = useUserStore.getState();
                const userId = userStore.user?.id || "anonymous";
                const flag = {
                    id: crypto.randomUUID(),
                    hashtagId,
                    flagType: state.flagType,
                    reason: state.reason,
                    userId,
                    timestamp: new Date().toISOString(),
                    status: "pending"
                };
                // Submit flag to API
                const response = await fetch("/api/hashtags?action=flag", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(flag)
                });
                if (!response.ok) {
                    throw new Error(`Failed to submit flag: ${response.statusText}`);
                }
                // Reset form after successful submission
                set((state)=>{
                    state.isSubmitting = false;
                    state.isOpen = false;
                    state.flagType = "inappropriate";
                    state.reason = "";
                });
                logger.info("Flag submitted", {
                    flag
                });
            } catch (error) {
                set((state)=>{
                    state.isSubmitting = false;
                    state.error = error instanceof Error ? error.message : "Failed to submit flag";
                });
            }
        },
        approveFlag: async (flagId)=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Approve flag via API
                const response = await fetch(`/api/hashtags?action=approve&flagId=${flagId}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to approve flag: ${response.statusText}`);
                }
                set((state)=>{
                    const flagIndex = state.moderationQueue.findIndex((m)=>m.flags?.some((f)=>f.id === flagId));
                    if (flagIndex !== -1) {
                        const moderation = state.moderationQueue[flagIndex];
                        if (moderation) {
                            const flag = moderation.flags?.find((f)=>f.id === flagId);
                            if (flag) {
                                flag.status = "approved";
                            }
                        }
                    }
                    state.isLoading = false;
                });
            // Flag approved successfully
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : "Failed to approve flag";
                });
            }
        },
        rejectFlag: async (flagId)=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Reject flag via API
                const response = await fetch(`/api/hashtags?action=reject&flagId=${flagId}`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to reject flag: ${response.statusText}`);
                }
                set((state)=>{
                    const flagIndex = state.moderationQueue.findIndex((m)=>m.flags?.some((f)=>f.id === flagId));
                    if (flagIndex !== -1) {
                        const moderation = state.moderationQueue[flagIndex];
                        if (moderation) {
                            const flag = moderation.flags?.find((f)=>f.id === flagId);
                            if (flag) {
                                flag.status = "rejected";
                            }
                        }
                    }
                    state.isLoading = false;
                });
            // Flag rejected successfully
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : "Failed to reject flag";
                });
            }
        },
        // Queue management actions
        loadModerationQueue: async ()=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Load moderation queue from API
                const response = await fetch("/api/hashtags?action=moderation-queue", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to load moderation queue: ${response.statusText}`);
                }
                const moderationQueue = await response.json();
                set((state)=>{
                    state.moderationQueue = moderationQueue;
                    state.isLoading = false;
                });
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : "Failed to load moderation queue";
                });
            }
        },
        refreshQueue: async ()=>{
            const { loadModerationQueue } = _get();
            await loadModerationQueue();
        }
    })), {
    name: "hashtag-moderation-store",
    partialize: (state)=>({
            flagType: state.flagType,
            reason: state.reason
        })
}), {
    name: "hashtag-moderation-store"
}));
const useModerationModal = ()=>useHashtagModerationStore((state)=>state.isOpen);
const useModerationForm = ()=>useHashtagModerationStore((state)=>({
            flagType: state.flagType,
            reason: state.reason,
            isSubmitting: state.isSubmitting,
            error: state.error
        }));
const useModerationQueue = ()=>useHashtagModerationStore((state)=>state.moderationQueue);
const useSelectedModeration = ()=>useHashtagModerationStore((state)=>state.selectedModeration);
const useModerationLoading = ()=>useHashtagModerationStore((state)=>state.isLoading);
const useModerationError = ()=>useHashtagModerationStore((state)=>state.error);
const useModerationActions = ()=>useHashtagModerationStore((state)=>({
            setIsOpen: state.setIsOpen,
            setFlagType: state.setFlagType,
            setReason: state.setReason,
            resetForm: state.resetForm,
            setIsSubmitting: state.setIsSubmitting,
            setError: state.setError,
            setModerationQueue: state.setModerationQueue,
            setSelectedModeration: state.setSelectedModeration,
            addModeration: state.addModeration,
            updateModeration: state.updateModeration,
            removeModeration: state.removeModeration,
            submitFlag: state.submitFlag,
            approveFlag: state.approveFlag,
            rejectFlag: state.rejectFlag,
            loadModerationQueue: state.loadModerationQueue,
            refreshQueue: state.refreshQueue
        }));
const useModerationStats = ()=>useHashtagModerationStore((state)=>{
        const queue = state.moderationQueue;
        return {
            total: queue.length,
            pending: queue.filter((m)=>m.status === "pending").length,
            approved: queue.filter((m)=>m.status === "approved").length,
            rejected: queue.filter((m)=>m.status === "rejected").length,
            underReview: queue.filter((m)=>m.status === "under_review").length
        };
    });
const usePendingFlags = ()=>useHashtagModerationStore((state)=>state.moderationQueue.flatMap((m)=>m.flags.filter((f)=>f.status === "pending")));
const moderationStoreUtils = {
    getFlagTypeLabel: (type)=>{
        const labels = {
            inappropriate: "Inappropriate Content",
            spam: "Spam",
            misleading: "Misleading",
            harassment: "Harassment",
            other: "Other"
        };
        return labels[type];
    },
    getStatusColor: (status)=>{
        const colors = {
            pending: "yellow",
            approved: "green",
            rejected: "red",
            under_review: "blue"
        };
        return colors[status];
    },
    canSubmitFlag: (reason)=>{
        return reason.trim().length > 0;
    }
};
const useModerationSubscription = ()=>{
    const store = useHashtagModerationStore();
    return {
        subscribe: (callback)=>{
            return useHashtagModerationStore.subscribe(callback);
        }
    };
};
const useModerationDebug = ()=>{
    const state = useHashtagModerationStore();
    return {
        state,
        actions: useModerationActions(),
        stats: useModerationStats()
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL2hhc2h0YWdNb2RlcmF0aW9uU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIYXNodGFnIE1vZGVyYXRpb24gU3RvcmUgLSBadXN0YW5kIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIE1hbmFnZXMgaGFzaHRhZyBtb2RlcmF0aW9uIHN0YXRlIGluY2x1ZGluZyBmbGFnZ2luZyBpbnRlcmZhY2UsXG4gKiBtb2RlcmF0aW9uIHF1ZXVlLCBhbmQgZm9ybSBzdGF0ZSBtYW5hZ2VtZW50LlxuICogXG4gKiBDcmVhdGVkOiBKYW51YXJ5IDE1LCAyMDI1XG4gKiBTdGF0dXM6IOKchSBBQ1RJVkVcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IGRldnRvb2xzIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IHBlcnNpc3QgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgaW1tZXIgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUvaW1tZXInO1xuaW1wb3J0IHsgc2hhbGxvdyB9IGZyb20gJ3p1c3RhbmQvc2hhbGxvdyc7XG5cbmltcG9ydCB0eXBlIHsgQmFzZVN0b3JlIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8vIEhhc2h0YWcgbW9kZXJhdGlvbiB0eXBlc1xuZXhwb3J0IHR5cGUgSGFzaHRhZ0ZsYWdUeXBlID0gJ2luYXBwcm9wcmlhdGUnIHwgJ3NwYW0nIHwgJ21pc2xlYWRpbmcnIHwgJ2hhcmFzc21lbnQnIHwgJ290aGVyJztcblxuZXhwb3J0IHR5cGUgSGFzaHRhZ01vZGVyYXRpb25TdGF0dXMgPSAncGVuZGluZycgfCAnYXBwcm92ZWQnIHwgJ3JlamVjdGVkJyB8ICd1bmRlcl9yZXZpZXcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhc2h0YWdGbGFnIHtcbiAgaWQ6IHN0cmluZztcbiAgaGFzaHRhZ0lkOiBzdHJpbmc7XG4gIGZsYWdUeXBlOiBIYXNodGFnRmxhZ1R5cGU7XG4gIHJlYXNvbjogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIHN0YXR1czogSGFzaHRhZ01vZGVyYXRpb25TdGF0dXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzaHRhZ01vZGVyYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICBoYXNodGFnSWQ6IHN0cmluZztcbiAgc3RhdHVzOiBIYXNodGFnTW9kZXJhdGlvblN0YXR1cztcbiAgZmxhZ3M6IEhhc2h0YWdGbGFnW107XG4gIG1vZGVyYXRvcklkPzogc3RyaW5nO1xuICBtb2RlcmF0b3JOb3Rlcz86IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xufVxuXG4vLyBTdG9yZSBzdGF0ZSBpbnRlcmZhY2VcbnR5cGUgSGFzaHRhZ01vZGVyYXRpb25TdG9yZSA9IHtcbiAgLy8gTW9kYWwgc3RhdGVcbiAgaXNPcGVuOiBib29sZWFuO1xuICBcbiAgLy8gRm9ybSBzdGF0ZVxuICBmbGFnVHlwZTogSGFzaHRhZ0ZsYWdUeXBlO1xuICByZWFzb246IHN0cmluZztcbiAgXG4gIC8vIFN1Ym1pc3Npb24gc3RhdGVcbiAgaXNTdWJtaXR0aW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgXG4gIC8vIE1vZGVyYXRpb24gcXVldWVcbiAgbW9kZXJhdGlvblF1ZXVlOiBIYXNodGFnTW9kZXJhdGlvbltdO1xuICBzZWxlY3RlZE1vZGVyYXRpb246IEhhc2h0YWdNb2RlcmF0aW9uIHwgbnVsbDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBNb2RhbFxuICBzZXRJc09wZW46IChvcGVuOiBib29sZWFuKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIEZvcm1cbiAgc2V0RmxhZ1R5cGU6ICh0eXBlOiBIYXNodGFnRmxhZ1R5cGUpID0+IHZvaWQ7XG4gIHNldFJlYXNvbjogKHJlYXNvbjogc3RyaW5nKSA9PiB2b2lkO1xuICByZXNldEZvcm06ICgpID0+IHZvaWQ7XG4gIFxuICAvLyBBY3Rpb25zIC0gU3VibWlzc2lvblxuICBzZXRJc1N1Ym1pdHRpbmc6IChzdWJtaXR0aW5nOiBib29sZWFuKSA9PiB2b2lkO1xuICBzZXRFcnJvcjogKGVycm9yOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIE1vZGVyYXRpb25cbiAgc2V0TW9kZXJhdGlvblF1ZXVlOiAocXVldWU6IEhhc2h0YWdNb2RlcmF0aW9uW10pID0+IHZvaWQ7XG4gIHNldFNlbGVjdGVkTW9kZXJhdGlvbjogKG1vZGVyYXRpb246IEhhc2h0YWdNb2RlcmF0aW9uIHwgbnVsbCkgPT4gdm9pZDtcbiAgYWRkTW9kZXJhdGlvbjogKG1vZGVyYXRpb246IEhhc2h0YWdNb2RlcmF0aW9uKSA9PiB2b2lkO1xuICB1cGRhdGVNb2RlcmF0aW9uOiAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxIYXNodGFnTW9kZXJhdGlvbj4pID0+IHZvaWQ7XG4gIHJlbW92ZU1vZGVyYXRpb246IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIEZsYWdzXG4gIHN1Ym1pdEZsYWc6IChoYXNodGFnSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgYXBwcm92ZUZsYWc6IChmbGFnSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcmVqZWN0RmxhZzogKGZsYWdJZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgLy8gQWN0aW9ucyAtIFF1ZXVlIG1hbmFnZW1lbnRcbiAgbG9hZE1vZGVyYXRpb25RdWV1ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcmVmcmVzaFF1ZXVlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufSAmIEJhc2VTdG9yZTtcblxuLy8gQ3JlYXRlIGhhc2h0YWcgbW9kZXJhdGlvbiBzdG9yZSB3aXRoIG1pZGRsZXdhcmVcbmV4cG9ydCBjb25zdCB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlID0gY3JlYXRlPEhhc2h0YWdNb2RlcmF0aW9uU3RvcmU+KCkoXG4gIGRldnRvb2xzKFxuICAgIHBlcnNpc3QoXG4gICAgICBpbW1lcigoc2V0LCBfZ2V0KSA9PiAoe1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgIGZsYWdUeXBlOiAnaW5hcHByb3ByaWF0ZScsXG4gICAgICAgIHJlYXNvbjogJycsXG4gICAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBtb2RlcmF0aW9uUXVldWU6IFtdLFxuICAgICAgICBzZWxlY3RlZE1vZGVyYXRpb246IG51bGwsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIFxuICAgICAgICAvLyBCYXNlIHN0b3JlIGFjdGlvbnNcbiAgICAgICAgc2V0TG9hZGluZzogKGxvYWRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBsb2FkaW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldEVycm9yOiAoZXJyb3IpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGNsZWFyRXJyb3I6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gTW9kYWwgYWN0aW9uc1xuICAgICAgICBzZXRJc09wZW46IChvcGVuKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNPcGVuID0gb3BlbjtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCBmb3JtIHdoZW4gb3BlbmluZ1xuICAgICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICBzdGF0ZS5mbGFnVHlwZSA9ICdpbmFwcHJvcHJpYXRlJztcbiAgICAgICAgICAgIHN0YXRlLnJlYXNvbiA9ICcnO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtIGFjdGlvbnNcbiAgICAgICAgc2V0RmxhZ1R5cGU6ICh0eXBlKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZmxhZ1R5cGUgPSB0eXBlO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFJlYXNvbjogKHJlYXNvbikgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICByZXNldEZvcm06ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5mbGFnVHlwZSA9ICdpbmFwcHJvcHJpYXRlJztcbiAgICAgICAgICBzdGF0ZS5yZWFzb24gPSAnJztcbiAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gU3VibWlzc2lvbiBhY3Rpb25zXG4gICAgICAgIHNldElzU3VibWl0dGluZzogKHN1Ym1pdHRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSBzdWJtaXR0aW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIE1vZGVyYXRpb24gYWN0aW9uc1xuICAgICAgICBzZXRNb2RlcmF0aW9uUXVldWU6IChxdWV1ZSkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZSA9IHF1ZXVlO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFNlbGVjdGVkTW9kZXJhdGlvbjogKG1vZGVyYXRpb24pID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5zZWxlY3RlZE1vZGVyYXRpb24gPSBtb2RlcmF0aW9uO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGFkZE1vZGVyYXRpb246IChtb2RlcmF0aW9uKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUubW9kZXJhdGlvblF1ZXVlLnVuc2hpZnQobW9kZXJhdGlvbik7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgdXBkYXRlTW9kZXJhdGlvbjogKGlkLCB1cGRhdGVzKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWUuZmluZEluZGV4KG0gPT4gbS5pZCA9PT0gaWQpO1xuICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlcmF0aW9uUXVldWVbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nLFxuICAgICAgICAgICAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHJlbW92ZU1vZGVyYXRpb246IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZSA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZS5maWx0ZXIobSA9PiBtLmlkICE9PSBpZCk7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gRmxhZyBhY3Rpb25zXG4gICAgICAgIHN1Ym1pdEZsYWc6IGFzeW5jIChoYXNodGFnSWQpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IF9nZXQoKTtcbiAgICAgICAgICBpZiAoIXN0YXRlLnJlYXNvbi50cmltKCkpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSAnUGxlYXNlIHByb3ZpZGUgYSByZWFzb24gZm9yIGZsYWdnaW5nJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgdXNlciBJRCBmcm9tIHVzZXIgc3RvcmVcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlVXNlclN0b3JlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3N0b3Jlcy91c2VyU3RvcmUnKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJTdG9yZSA9IHVzZVVzZXJTdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gdXNlclN0b3JlLnVzZXI/LmlkIHx8ICdhbm9ueW1vdXMnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmbGFnOiBIYXNodGFnRmxhZyA9IHtcbiAgICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICAgIGhhc2h0YWdJZCxcbiAgICAgICAgICAgICAgZmxhZ1R5cGU6IHN0YXRlLmZsYWdUeXBlLFxuICAgICAgICAgICAgICByZWFzb246IHN0YXRlLnJlYXNvbixcbiAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTdWJtaXQgZmxhZyB0byBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvaGFzaHRhZ3M/YWN0aW9uPWZsYWcnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZmxhZyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzdWJtaXQgZmxhZzogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBmb3JtIGFmdGVyIHN1Y2Nlc3NmdWwgc3VibWlzc2lvblxuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc3RhdGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmZsYWdUeXBlID0gJ2luYXBwcm9wcmlhdGUnO1xuICAgICAgICAgICAgICBzdGF0ZS5yZWFzb24gPSAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRmxhZyBzdWJtaXR0ZWQnLCB7IGZsYWcgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHN1Ym1pdCBmbGFnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGFwcHJvdmVGbGFnOiBhc3luYyAoZmxhZ0lkKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQXBwcm92ZSBmbGFnIHZpYSBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvaGFzaHRhZ3M/YWN0aW9uPWFwcHJvdmUmZmxhZ0lkPSR7ZmxhZ0lkfWAsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gYXBwcm92ZSBmbGFnOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZmxhZ0luZGV4ID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlLmZpbmRJbmRleChtID0+IFxuICAgICAgICAgICAgICAgIG0uZmxhZ3M/LnNvbWUoZiA9PiBmLmlkID09PSBmbGFnSWQpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChmbGFnSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZXJhdGlvbiA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZVtmbGFnSW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmbGFnID0gbW9kZXJhdGlvbi5mbGFncz8uZmluZChmID0+IGYuaWQgPT09IGZsYWdJZCk7XG4gICAgICAgICAgICAgICAgICBpZiAoZmxhZykge1xuICAgICAgICAgICAgICAgICAgICBmbGFnLnN0YXR1cyA9ICdhcHByb3ZlZCc7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZsYWcgYXBwcm92ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGFwcHJvdmUgZmxhZyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICByZWplY3RGbGFnOiBhc3luYyAoZmxhZ0lkKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gUmVqZWN0IGZsYWcgdmlhIEFQSVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9oYXNodGFncz9hY3Rpb249cmVqZWN0JmZsYWdJZD0ke2ZsYWdJZH1gLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHJlamVjdCBmbGFnOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZmxhZ0luZGV4ID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlLmZpbmRJbmRleChtID0+IFxuICAgICAgICAgICAgICAgIG0uZmxhZ3M/LnNvbWUoZiA9PiBmLmlkID09PSBmbGFnSWQpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChmbGFnSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZXJhdGlvbiA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZVtmbGFnSW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChtb2RlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBmbGFnID0gbW9kZXJhdGlvbi5mbGFncz8uZmluZChmID0+IGYuaWQgPT09IGZsYWdJZCk7XG4gICAgICAgICAgICAgICAgICBpZiAoZmxhZykge1xuICAgICAgICAgICAgICAgICAgICBmbGFnLnN0YXR1cyA9ICdyZWplY3RlZCc7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZsYWcgcmVqZWN0ZWQgc3VjY2Vzc2Z1bGx5XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHJlamVjdCBmbGFnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIFF1ZXVlIG1hbmFnZW1lbnQgYWN0aW9uc1xuICAgICAgICBsb2FkTW9kZXJhdGlvblF1ZXVlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTG9hZCBtb2RlcmF0aW9uIHF1ZXVlIGZyb20gQVBJXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2hhc2h0YWdzP2FjdGlvbj1tb2RlcmF0aW9uLXF1ZXVlJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxvYWQgbW9kZXJhdGlvbiBxdWV1ZTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtb2RlcmF0aW9uUXVldWUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUubW9kZXJhdGlvblF1ZXVlID0gbW9kZXJhdGlvblF1ZXVlO1xuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBsb2FkIG1vZGVyYXRpb24gcXVldWUnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmVmcmVzaFF1ZXVlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBsb2FkTW9kZXJhdGlvblF1ZXVlIH0gPSBfZ2V0KCk7XG4gICAgICAgICAgYXdhaXQgbG9hZE1vZGVyYXRpb25RdWV1ZSgpO1xuICAgICAgICB9LFxuICAgICAgfSkpLFxuICAgICAge1xuICAgICAgICBuYW1lOiAnaGFzaHRhZy1tb2RlcmF0aW9uLXN0b3JlJyxcbiAgICAgICAgcGFydGlhbGl6ZTogKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIGZsYWdUeXBlOiBzdGF0ZS5mbGFnVHlwZSxcbiAgICAgICAgICByZWFzb246IHN0YXRlLnJlYXNvbixcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgKSxcbiAgICB7IG5hbWU6ICdoYXNodGFnLW1vZGVyYXRpb24tc3RvcmUnIH1cbiAgKVxuKTtcblxuLy8gU3RvcmUgc2VsZWN0b3JzIGZvciBvcHRpbWl6ZWQgcmUtcmVuZGVyc1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25Nb2RhbCA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoc3RhdGUgPT4gc3RhdGUuaXNPcGVuKTtcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uRm9ybSA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoXG4gIHN0YXRlID0+ICh7XG4gICAgZmxhZ1R5cGU6IHN0YXRlLmZsYWdUeXBlLFxuICAgIHJlYXNvbjogc3RhdGUucmVhc29uLFxuICAgIGlzU3VibWl0dGluZzogc3RhdGUuaXNTdWJtaXR0aW5nLFxuICAgIGVycm9yOiBzdGF0ZS5lcnJvcixcbiAgfSlcbik7XG5cbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uUXVldWUgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IHN0YXRlLm1vZGVyYXRpb25RdWV1ZSk7XG5leHBvcnQgY29uc3QgdXNlU2VsZWN0ZWRNb2RlcmF0aW9uID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiBzdGF0ZS5zZWxlY3RlZE1vZGVyYXRpb24pO1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25Mb2FkaW5nID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiBzdGF0ZS5pc0xvYWRpbmcpO1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25FcnJvciA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoc3RhdGUgPT4gc3RhdGUuZXJyb3IpO1xuXG4vLyBBY3Rpb24gc2VsZWN0b3JzXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvbkFjdGlvbnMgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+ICh7XG4gIHNldElzT3Blbjogc3RhdGUuc2V0SXNPcGVuLFxuICBzZXRGbGFnVHlwZTogc3RhdGUuc2V0RmxhZ1R5cGUsXG4gIHNldFJlYXNvbjogc3RhdGUuc2V0UmVhc29uLFxuICByZXNldEZvcm06IHN0YXRlLnJlc2V0Rm9ybSxcbiAgc2V0SXNTdWJtaXR0aW5nOiBzdGF0ZS5zZXRJc1N1Ym1pdHRpbmcsXG4gIHNldEVycm9yOiBzdGF0ZS5zZXRFcnJvcixcbiAgc2V0TW9kZXJhdGlvblF1ZXVlOiBzdGF0ZS5zZXRNb2RlcmF0aW9uUXVldWUsXG4gIHNldFNlbGVjdGVkTW9kZXJhdGlvbjogc3RhdGUuc2V0U2VsZWN0ZWRNb2RlcmF0aW9uLFxuICBhZGRNb2RlcmF0aW9uOiBzdGF0ZS5hZGRNb2RlcmF0aW9uLFxuICB1cGRhdGVNb2RlcmF0aW9uOiBzdGF0ZS51cGRhdGVNb2RlcmF0aW9uLFxuICByZW1vdmVNb2RlcmF0aW9uOiBzdGF0ZS5yZW1vdmVNb2RlcmF0aW9uLFxuICBzdWJtaXRGbGFnOiBzdGF0ZS5zdWJtaXRGbGFnLFxuICBhcHByb3ZlRmxhZzogc3RhdGUuYXBwcm92ZUZsYWcsXG4gIHJlamVjdEZsYWc6IHN0YXRlLnJlamVjdEZsYWcsXG4gIGxvYWRNb2RlcmF0aW9uUXVldWU6IHN0YXRlLmxvYWRNb2RlcmF0aW9uUXVldWUsXG4gIHJlZnJlc2hRdWV1ZTogc3RhdGUucmVmcmVzaFF1ZXVlLFxufSkpO1xuXG4vLyBDb21wdXRlZCBzZWxlY3RvcnNcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uU3RhdHMgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IHtcbiAgY29uc3QgcXVldWUgPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWU7XG4gIHJldHVybiB7XG4gICAgdG90YWw6IHF1ZXVlLmxlbmd0aCxcbiAgICBwZW5kaW5nOiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKS5sZW5ndGgsXG4gICAgYXBwcm92ZWQ6IHF1ZXVlLmZpbHRlcihtID0+IG0uc3RhdHVzID09PSAnYXBwcm92ZWQnKS5sZW5ndGgsXG4gICAgcmVqZWN0ZWQ6IHF1ZXVlLmZpbHRlcihtID0+IG0uc3RhdHVzID09PSAncmVqZWN0ZWQnKS5sZW5ndGgsXG4gICAgdW5kZXJSZXZpZXc6IHF1ZXVlLmZpbHRlcihtID0+IG0uc3RhdHVzID09PSAndW5kZXJfcmV2aWV3JykubGVuZ3RoLFxuICB9O1xufSk7XG5cbmV4cG9ydCBjb25zdCB1c2VQZW5kaW5nRmxhZ3MgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IFxuICBzdGF0ZS5tb2RlcmF0aW9uUXVldWUuZmxhdE1hcChtID0+IG0uZmxhZ3MuZmlsdGVyKGYgPT4gZi5zdGF0dXMgPT09ICdwZW5kaW5nJykpXG4pO1xuXG4vLyBTdG9yZSB1dGlsaXRpZXNcbmV4cG9ydCBjb25zdCBtb2RlcmF0aW9uU3RvcmVVdGlscyA9IHtcbiAgZ2V0RmxhZ1R5cGVMYWJlbDogKHR5cGU6IEhhc2h0YWdGbGFnVHlwZSk6IHN0cmluZyA9PiB7XG4gICAgY29uc3QgbGFiZWxzID0ge1xuICAgICAgaW5hcHByb3ByaWF0ZTogJ0luYXBwcm9wcmlhdGUgQ29udGVudCcsXG4gICAgICBzcGFtOiAnU3BhbScsXG4gICAgICBtaXNsZWFkaW5nOiAnTWlzbGVhZGluZycsXG4gICAgICBoYXJhc3NtZW50OiAnSGFyYXNzbWVudCcsXG4gICAgICBvdGhlcjogJ090aGVyJyxcbiAgICB9O1xuICAgIHJldHVybiBsYWJlbHNbdHlwZV07XG4gIH0sXG4gIFxuICBnZXRTdGF0dXNDb2xvcjogKHN0YXR1czogSGFzaHRhZ01vZGVyYXRpb25TdGF0dXMpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IGNvbG9ycyA9IHtcbiAgICAgIHBlbmRpbmc6ICd5ZWxsb3cnLFxuICAgICAgYXBwcm92ZWQ6ICdncmVlbicsXG4gICAgICByZWplY3RlZDogJ3JlZCcsXG4gICAgICB1bmRlcl9yZXZpZXc6ICdibHVlJyxcbiAgICB9O1xuICAgIHJldHVybiBjb2xvcnNbc3RhdHVzXTtcbiAgfSxcbiAgXG4gIGNhblN1Ym1pdEZsYWc6IChyZWFzb246IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgIHJldHVybiByZWFzb24udHJpbSgpLmxlbmd0aCA+IDA7XG4gIH0sXG59O1xuXG4vLyBTdG9yZSBzdWJzY3JpcHRpb25zXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvblN1YnNjcmlwdGlvbiA9ICgpID0+IHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKCk7XG4gIFxuICByZXR1cm4ge1xuICAgIHN1YnNjcmliZTogKGNhbGxiYWNrOiAoc3RhdGU6IEhhc2h0YWdNb2RlcmF0aW9uU3RvcmUpID0+IHZvaWQpID0+IHtcbiAgICAgIHJldHVybiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlLnN1YnNjcmliZShjYWxsYmFjayk7XG4gICAgfSxcbiAgfTtcbn07XG5cbi8vIFN0b3JlIGRlYnVnZ2luZ1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25EZWJ1ZyA9ICgpID0+IHtcbiAgY29uc3Qgc3RhdGUgPSB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKCk7XG4gIFxuICByZXR1cm4ge1xuICAgIHN0YXRlLFxuICAgIGFjdGlvbnM6IHVzZU1vZGVyYXRpb25BY3Rpb25zKCksXG4gICAgc3RhdHM6IHVzZU1vZGVyYXRpb25TdGF0cygpLFxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJtb2RlcmF0aW9uU3RvcmVVdGlscyIsInVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUiLCJ1c2VNb2RlcmF0aW9uQWN0aW9ucyIsInVzZU1vZGVyYXRpb25EZWJ1ZyIsInVzZU1vZGVyYXRpb25FcnJvciIsInVzZU1vZGVyYXRpb25Gb3JtIiwidXNlTW9kZXJhdGlvbkxvYWRpbmciLCJ1c2VNb2RlcmF0aW9uTW9kYWwiLCJ1c2VNb2RlcmF0aW9uUXVldWUiLCJ1c2VNb2RlcmF0aW9uU3RhdHMiLCJ1c2VNb2RlcmF0aW9uU3Vic2NyaXB0aW9uIiwidXNlUGVuZGluZ0ZsYWdzIiwidXNlU2VsZWN0ZWRNb2RlcmF0aW9uIiwiY3JlYXRlIiwiZGV2dG9vbHMiLCJwZXJzaXN0IiwiaW1tZXIiLCJzZXQiLCJfZ2V0IiwiaXNPcGVuIiwiZmxhZ1R5cGUiLCJyZWFzb24iLCJpc1N1Ym1pdHRpbmciLCJlcnJvciIsIm1vZGVyYXRpb25RdWV1ZSIsInNlbGVjdGVkTW9kZXJhdGlvbiIsImlzTG9hZGluZyIsInNldExvYWRpbmciLCJsb2FkaW5nIiwic3RhdGUiLCJzZXRFcnJvciIsImNsZWFyRXJyb3IiLCJzZXRJc09wZW4iLCJvcGVuIiwic2V0RmxhZ1R5cGUiLCJ0eXBlIiwic2V0UmVhc29uIiwicmVzZXRGb3JtIiwic2V0SXNTdWJtaXR0aW5nIiwic3VibWl0dGluZyIsInNldE1vZGVyYXRpb25RdWV1ZSIsInF1ZXVlIiwic2V0U2VsZWN0ZWRNb2RlcmF0aW9uIiwibW9kZXJhdGlvbiIsImFkZE1vZGVyYXRpb24iLCJ1bnNoaWZ0IiwidXBkYXRlTW9kZXJhdGlvbiIsImlkIiwidXBkYXRlcyIsImluZGV4IiwiZmluZEluZGV4IiwibSIsImV4aXN0aW5nIiwidXBkYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicmVtb3ZlTW9kZXJhdGlvbiIsImZpbHRlciIsInN1Ym1pdEZsYWciLCJoYXNodGFnSWQiLCJ0cmltIiwidXNlVXNlclN0b3JlIiwidXNlclN0b3JlIiwiZ2V0U3RhdGUiLCJ1c2VySWQiLCJ1c2VyIiwiZmxhZyIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJ0aW1lc3RhbXAiLCJzdGF0dXMiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJsb2dnZXIiLCJpbmZvIiwibWVzc2FnZSIsImFwcHJvdmVGbGFnIiwiZmxhZ0lkIiwiZmxhZ0luZGV4IiwiZmxhZ3MiLCJzb21lIiwiZiIsImZpbmQiLCJyZWplY3RGbGFnIiwibG9hZE1vZGVyYXRpb25RdWV1ZSIsImpzb24iLCJyZWZyZXNoUXVldWUiLCJuYW1lIiwicGFydGlhbGl6ZSIsInRvdGFsIiwibGVuZ3RoIiwicGVuZGluZyIsImFwcHJvdmVkIiwicmVqZWN0ZWQiLCJ1bmRlclJldmlldyIsImZsYXRNYXAiLCJnZXRGbGFnVHlwZUxhYmVsIiwibGFiZWxzIiwiaW5hcHByb3ByaWF0ZSIsInNwYW0iLCJtaXNsZWFkaW5nIiwiaGFyYXNzbWVudCIsIm90aGVyIiwiZ2V0U3RhdHVzQ29sb3IiLCJjb2xvcnMiLCJ1bmRlcl9yZXZpZXciLCJjYW5TdWJtaXRGbGFnIiwic3RvcmUiLCJzdWJzY3JpYmUiLCJjYWxsYmFjayIsImFjdGlvbnMiLCJzdGF0cyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0NBUUM7Ozs7Ozs7Ozs7O0lBd2FZQSxvQkFBb0I7ZUFBcEJBOztJQXJWQUMseUJBQXlCO2VBQXpCQTs7SUFpVEFDLG9CQUFvQjtlQUFwQkE7O0lBMkVBQyxrQkFBa0I7ZUFBbEJBOztJQTlFQUMsa0JBQWtCO2VBQWxCQTs7SUFaQUMsaUJBQWlCO2VBQWpCQTs7SUFXQUMsb0JBQW9CO2VBQXBCQTs7SUFaQUMsa0JBQWtCO2VBQWxCQTs7SUFVQUMsa0JBQWtCO2VBQWxCQTs7SUEwQkFDLGtCQUFrQjtlQUFsQkE7O0lBNENBQyx5QkFBeUI7ZUFBekJBOztJQWpDQUMsZUFBZTtlQUFmQTs7SUFwQ0FDLHFCQUFxQjtlQUFyQkE7Ozt5QkE3WFU7NEJBQ0U7dUJBRUg7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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