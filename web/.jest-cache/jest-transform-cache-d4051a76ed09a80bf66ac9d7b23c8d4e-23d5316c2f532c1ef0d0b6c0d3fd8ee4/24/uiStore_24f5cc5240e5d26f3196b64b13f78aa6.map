{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/stores/uiStore.ts"],"sourcesContent":["/**\n * UI Store - Zustand Implementation\n * \n * Centralized UI state management for modals, navigation, sidebar,\n * and other UI components. Provides consistent UI state across the application.\n * \n * Created: January 15, 2025\n * Status: âœ… ACTIVE\n */\n\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\nimport { persist } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\nimport { shallow } from 'zustand/shallow';\n\nimport type { BaseStore } from './types';\n\n// Modal state interface\nexport interface ModalState {\n  id: string;\n  isOpen: boolean;\n  component?: React.ComponentType<any>;\n  props?: Record<string, any>;\n  onClose?: () => void;\n  closable?: boolean;\n  backdrop?: boolean;\n}\n\n// Sidebar state interface\nexport interface SidebarState {\n  isOpen: boolean;\n  isCollapsed: boolean;\n  width: number;\n  pinned: boolean;\n  activeItem?: string;\n}\n\n// Navigation state interface\nexport interface NavigationState {\n  currentRoute: string;\n  previousRoute?: string;\n  breadcrumbs: Array<{\n    label: string;\n    href: string;\n  }>;\n  history: string[];\n  canGoBack: boolean;\n  canGoForward: boolean;\n}\n\n// Toast state interface\nexport interface ToastState {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title: string;\n  message: string;\n  duration?: number;\n  position: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' | 'top-center' | 'bottom-center';\n  persistent?: boolean;\n}\n\n// UI store interface\ntype UIStore = {\n  // Modal state\n  modals: Record<string, ModalState>;\n  \n  // Sidebar state\n  sidebar: SidebarState;\n  \n  // Navigation state\n  navigation: NavigationState;\n  \n  // Toast state\n  toasts: ToastState[];\n  \n  // Loading states\n  globalLoading: boolean;\n  pageLoading: boolean;\n  \n  // Theme state\n  theme: 'light' | 'dark' | 'system';\n  systemTheme: 'light' | 'dark';\n  \n  // Screen state\n  screenSize: 'mobile' | 'tablet' | 'desktop';\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  \n  // Actions - Modal Management\n  openModal: (id: string, component?: React.ComponentType<any>, props?: Record<string, any>, options?: Partial<ModalState>) => void;\n  closeModal: (id: string) => void;\n  closeAllModals: () => void;\n  updateModal: (id: string, updates: Partial<ModalState>) => void;\n  \n  // Actions - Sidebar Management\n  toggleSidebar: () => void;\n  setSidebarOpen: (open: boolean) => void;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n  setSidebarWidth: (width: number) => void;\n  setSidebarPinned: (pinned: boolean) => void;\n  setSidebarActiveItem: (item: string) => void;\n  \n  // Actions - Navigation Management\n  setCurrentRoute: (route: string) => void;\n  setBreadcrumbs: (breadcrumbs: NavigationState['breadcrumbs']) => void;\n  addToHistory: (route: string) => void;\n  goBack: () => void;\n  goForward: () => void;\n  clearHistory: () => void;\n  \n  // Actions - Toast Management\n  addToast: (toast: Omit<ToastState, 'id'>) => void;\n  removeToast: (id: string) => void;\n  clearAllToasts: () => void;\n  updateToast: (id: string, updates: Partial<ToastState>) => void;\n  \n  // Actions - Loading Management\n  setGlobalLoading: (loading: boolean) => void;\n  setPageLoading: (loading: boolean) => void;\n  \n  // Actions - Theme Management\n  setTheme: (theme: 'light' | 'dark' | 'system') => void;\n  setSystemTheme: (theme: 'light' | 'dark') => void;\n  \n  // Actions - Screen Management\n  setScreenSize: (size: 'mobile' | 'tablet' | 'desktop') => void;\n  updateScreenState: () => void;\n  \n  // Actions - Utility\n  resetUI: () => void;\n} & BaseStore;\n\n// Create UI store with middleware\nexport const useUIStore = create<UIStore>()(\n  devtools(\n    persist(\n      immer((set, get) => ({\n        // Initial state\n        modals: {},\n        sidebar: {\n          isOpen: true,\n          isCollapsed: false,\n          width: 256,\n          pinned: false,\n        },\n        navigation: {\n          currentRoute: '/',\n          breadcrumbs: [],\n          history: ['/'],\n          canGoBack: false,\n          canGoForward: false,\n        },\n        toasts: [],\n        globalLoading: false,\n        pageLoading: false,\n        theme: 'system',\n        systemTheme: 'light',\n        screenSize: 'desktop',\n        isMobile: false,\n        isTablet: false,\n        isDesktop: true,\n        isLoading: false,\n        error: null,\n        \n        // Base store actions\n        setLoading: (loading) => set((state) => {\n          state.isLoading = loading;\n        }),\n        \n        setError: (error) => set((state) => {\n          state.error = error;\n        }),\n        \n        clearError: () => set((state) => {\n          state.error = null;\n        }),\n        \n        // Modal management actions\n        openModal: (id, component, props, options = {}) => set((state) => {\n          state.modals[id] = {\n            id,\n            isOpen: true,\n            component,\n            props,\n            closable: true,\n            backdrop: true,\n            ...options,\n          };\n        }),\n        \n        closeModal: (id) => set((state) => {\n          if (state.modals[id]) {\n            state.modals[id].isOpen = false;\n            // Call onClose if provided\n            if (state.modals[id].onClose) {\n              state.modals[id].onClose();\n            }\n          }\n        }),\n        \n        closeAllModals: () => set((state) => {\n          Object.values(state.modals).forEach(modal => {\n            modal.isOpen = false;\n            if (modal.onClose) {\n              modal.onClose();\n            }\n          });\n        }),\n        \n        updateModal: (id, updates) => set((state) => {\n          if (state.modals[id]) {\n            Object.assign(state.modals[id], updates);\n          }\n        }),\n        \n        // Sidebar management actions\n        toggleSidebar: () => set((state) => {\n          state.sidebar.isOpen = !state.sidebar.isOpen;\n        }),\n        \n        setSidebarOpen: (open) => set((state) => {\n          state.sidebar.isOpen = open;\n        }),\n        \n        setSidebarCollapsed: (collapsed) => set((state) => {\n          state.sidebar.isCollapsed = collapsed;\n        }),\n        \n        setSidebarWidth: (width) => set((state) => {\n          state.sidebar.width = Math.max(200, Math.min(400, width));\n        }),\n        \n        setSidebarPinned: (pinned) => set((state) => {\n          state.sidebar.pinned = pinned;\n        }),\n        \n        setSidebarActiveItem: (item) => set((state) => {\n          state.sidebar.activeItem = item;\n        }),\n        \n        // Navigation management actions\n        setCurrentRoute: (route) => set((state) => {\n          state.navigation.previousRoute = state.navigation.currentRoute;\n          state.navigation.currentRoute = route;\n        }),\n        \n        setBreadcrumbs: (breadcrumbs) => set((state) => {\n          state.navigation.breadcrumbs = breadcrumbs;\n        }),\n        \n        addToHistory: (route) => set((state) => {\n          const history = state.navigation.history;\n          const currentIndex = history.indexOf(state.navigation.currentRoute);\n          \n          // Remove any forward history if we're not at the end\n          if (currentIndex < history.length - 1) {\n            history.splice(currentIndex + 1);\n          }\n          \n          // Add new route\n          history.push(route);\n          state.navigation.currentRoute = route;\n          state.navigation.canGoBack = history.length > 1;\n          state.navigation.canGoForward = false;\n        }),\n        \n        goBack: () => set((state) => {\n          const history = state.navigation.history;\n          const currentIndex = history.indexOf(state.navigation.currentRoute);\n          \n          if (currentIndex > 0) {\n            const previousRoute = history[currentIndex - 1];\n            state.navigation.previousRoute = state.navigation.currentRoute;\n            state.navigation.currentRoute = previousRoute || '';\n            state.navigation.canGoBack = currentIndex > 1;\n            state.navigation.canGoForward = true;\n          }\n        }),\n        \n        goForward: () => set((state) => {\n          const history = state.navigation.history;\n          const currentIndex = history.indexOf(state.navigation.currentRoute);\n          \n          if (currentIndex < history.length - 1) {\n            const nextRoute = history[currentIndex + 1];\n            state.navigation.previousRoute = state.navigation.currentRoute;\n            state.navigation.currentRoute = nextRoute || '';\n            state.navigation.canGoBack = true;\n            state.navigation.canGoForward = currentIndex < history.length - 2;\n          }\n        }),\n        \n        clearHistory: () => set((state) => {\n          state.navigation.history = [state.navigation.currentRoute];\n          state.navigation.canGoBack = false;\n          state.navigation.canGoForward = false;\n        }),\n        \n        // Toast management actions\n        addToast: (toast) => set((state) => {\n          const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n          state.toasts.push({\n            id,\n            duration: 5000,\n            persistent: false,\n            ...toast,\n            position: toast.position || 'top-right',\n          });\n          \n          // Auto-remove toast after duration\n          if (!toast.persistent && toast.duration !== 0) {\n            setTimeout(() => {\n              get().removeToast(id);\n            }, toast.duration || 5000);\n          }\n        }),\n        \n        removeToast: (id) => set((state) => {\n          state.toasts = state.toasts.filter(toast => toast.id !== id);\n        }),\n        \n        clearAllToasts: () => set((state) => {\n          state.toasts = [];\n        }),\n        \n        updateToast: (id, updates) => set((state) => {\n          const toast = state.toasts.find(t => t.id === id);\n          if (toast) {\n            Object.assign(toast, updates);\n          }\n        }),\n        \n        // Loading management actions\n        setGlobalLoading: (loading) => set((state) => {\n          state.globalLoading = loading;\n        }),\n        \n        setPageLoading: (loading) => set((state) => {\n          state.pageLoading = loading;\n        }),\n        \n        // Theme management actions\n        setTheme: (theme) => set((state) => {\n          state.theme = theme;\n        }),\n        \n        setSystemTheme: (theme) => set((state) => {\n          state.systemTheme = theme;\n        }),\n        \n        // Screen management actions\n        setScreenSize: (size) => set((state) => {\n          state.screenSize = size;\n          state.isMobile = size === 'mobile';\n          state.isTablet = size === 'tablet';\n          state.isDesktop = size === 'desktop';\n        }),\n        \n        updateScreenState: () => set((state) => {\n          if (typeof window !== 'undefined') {\n            const width = window.innerWidth;\n            if (width < 768) {\n              state.screenSize = 'mobile';\n              state.isMobile = true;\n              state.isTablet = false;\n              state.isDesktop = false;\n            } else if (width < 1024) {\n              state.screenSize = 'tablet';\n              state.isMobile = false;\n              state.isTablet = true;\n              state.isDesktop = false;\n            } else {\n              state.screenSize = 'desktop';\n              state.isMobile = false;\n              state.isTablet = false;\n              state.isDesktop = true;\n            }\n          }\n        }),\n        \n        // Utility actions\n        resetUI: () => set((state) => {\n          state.modals = {};\n          state.sidebar = {\n            isOpen: true,\n            isCollapsed: false,\n            width: 256,\n            pinned: false,\n          };\n          state.navigation = {\n            currentRoute: '/',\n            breadcrumbs: [],\n            history: ['/'],\n            canGoBack: false,\n            canGoForward: false,\n          };\n          state.toasts = [];\n          state.globalLoading = false;\n          state.pageLoading = false;\n        }),\n      })),\n      {\n        name: 'ui-store',\n        partialize: (state) => ({\n          sidebar: state.sidebar,\n          theme: state.theme,\n          navigation: {\n            currentRoute: state.navigation.currentRoute,\n            breadcrumbs: state.navigation.breadcrumbs,\n            history: state.navigation.history,\n          },\n        }),\n      }\n    ),\n    { name: 'UIStore' }\n  )\n);\n\n// Store selectors for optimized re-renders\nexport const useModals = () => useUIStore(state => state.modals);\nexport const useModal = (id: string) => useUIStore(state => state.modals[id]);\nexport const useSidebar = () => useUIStore(state => state.sidebar);\nexport const useNavigation = () => useUIStore(state => state.navigation);\nexport const useToasts = () => useUIStore(state => state.toasts);\nexport const useGlobalLoading = () => useUIStore(state => state.globalLoading);\nexport const usePageLoading = () => useUIStore(state => state.pageLoading);\nexport const useTheme = () => useUIStore(state => state.theme);\nexport const useSystemTheme = () => useUIStore(state => state.systemTheme);\nexport const useScreenSize = () => useUIStore(state => state.screenSize);\nexport const useIsMobile = () => useUIStore(state => state.isMobile);\nexport const useIsTablet = () => useUIStore(state => state.isTablet);\nexport const useIsDesktop = () => useUIStore(state => state.isDesktop);\n\n// Computed selectors\nexport const useIsModalOpen = (id: string) => useUIStore(state => state.modals[id]?.isOpen || false);\nexport const useActiveModals = () => useUIStore(state => \n  Object.values(state.modals).filter(modal => modal.isOpen)\n);\nexport const useToastCount = () => useUIStore(state => state.toasts.length);\nexport const useCurrentBreadcrumbs = () => useUIStore(state => state.navigation.breadcrumbs);\nexport const useCanNavigate = () => useUIStore(state => ({\n  canGoBack: state.navigation.canGoBack,\n  canGoForward: state.navigation.canGoForward,\n}));\n\n// Action selectors\nexport const useUIActions = () => useUIStore(state => ({\n  openModal: state.openModal,\n  closeModal: state.closeModal,\n  closeAllModals: state.closeAllModals,\n  updateModal: state.updateModal,\n  toggleSidebar: state.toggleSidebar,\n  setSidebarOpen: state.setSidebarOpen,\n  setSidebarCollapsed: state.setSidebarCollapsed,\n  setSidebarWidth: state.setSidebarWidth,\n  setSidebarPinned: state.setSidebarPinned,\n  setSidebarActiveItem: state.setSidebarActiveItem,\n  setCurrentRoute: state.setCurrentRoute,\n  setBreadcrumbs: state.setBreadcrumbs,\n  addToHistory: state.addToHistory,\n  goBack: state.goBack,\n  goForward: state.goForward,\n  clearHistory: state.clearHistory,\n  addToast: state.addToast,\n  removeToast: state.removeToast,\n  clearAllToasts: state.clearAllToasts,\n  updateToast: state.updateToast,\n  setGlobalLoading: state.setGlobalLoading,\n  setPageLoading: state.setPageLoading,\n  setTheme: state.setTheme,\n  setSystemTheme: state.setSystemTheme,\n  setScreenSize: state.setScreenSize,\n  updateScreenState: state.updateScreenState,\n  resetUI: state.resetUI,\n}));\n\n// Debug utilities\nexport const useUIDebug = () => useUIStore(state => ({\n  modals: Object.keys(state.modals),\n  activeModals: Object.values(state.modals).filter(modal => modal.isOpen).length,\n  toasts: state.toasts.length,\n  sidebarOpen: state.sidebar.isOpen,\n  currentRoute: state.navigation.currentRoute,\n  historyLength: state.navigation.history.length,\n  theme: state.theme,\n  screenSize: state.screenSize,\n}));\n\n// Subscription utilities\nexport const useUISubscription = (selector: (state: UIStore) => any, callback: (value: any) => void) => {\n  return useUIStore.subscribe((state) => {\n    const value = selector(state);\n    callback(value);\n  });\n};\n"],"names":["useActiveModals","useCanNavigate","useCurrentBreadcrumbs","useGlobalLoading","useIsDesktop","useIsMobile","useIsModalOpen","useIsTablet","useModal","useModals","useNavigation","usePageLoading","useScreenSize","useSidebar","useSystemTheme","useTheme","useToastCount","useToasts","useUIActions","useUIDebug","useUIStore","useUISubscription","create","devtools","persist","immer","set","get","modals","sidebar","isOpen","isCollapsed","width","pinned","navigation","currentRoute","breadcrumbs","history","canGoBack","canGoForward","toasts","globalLoading","pageLoading","theme","systemTheme","screenSize","isMobile","isTablet","isDesktop","isLoading","error","setLoading","loading","state","setError","clearError","openModal","id","component","props","options","closable","backdrop","closeModal","onClose","closeAllModals","Object","values","forEach","modal","updateModal","updates","assign","toggleSidebar","setSidebarOpen","open","setSidebarCollapsed","collapsed","setSidebarWidth","Math","max","min","setSidebarPinned","setSidebarActiveItem","item","activeItem","setCurrentRoute","route","previousRoute","setBreadcrumbs","addToHistory","currentIndex","indexOf","length","splice","push","goBack","goForward","nextRoute","clearHistory","addToast","toast","Date","now","random","toString","substr","duration","persistent","position","setTimeout","removeToast","filter","clearAllToasts","updateToast","find","t","setGlobalLoading","setPageLoading","setTheme","setSystemTheme","setScreenSize","size","updateScreenState","window","innerWidth","resetUI","name","partialize","keys","activeModals","sidebarOpen","historyLength","selector","callback","subscribe","value"],"mappings":"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"}