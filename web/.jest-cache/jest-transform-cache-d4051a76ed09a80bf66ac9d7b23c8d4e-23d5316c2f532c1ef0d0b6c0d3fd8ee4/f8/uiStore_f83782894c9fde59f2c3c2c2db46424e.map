{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/stores/uiStore.ts"],"sourcesContent":["/**\n * UI Store - Zustand Implementation\n * \n * Centralized UI state management for modals, navigation, sidebar,\n * and other UI components. Provides consistent UI state across the application.\n * \n * Created: January 15, 2025\n * Status: âœ… ACTIVE\n */\n\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\nimport { persist } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\nimport { shallow } from 'zustand/shallow';\n\nimport type { BaseStore } from './types';\n\n// Modal state interface\nexport interface ModalState {\n  id: string;\n  isOpen: boolean;\n  component?: React.ComponentType<any>;\n  props?: Record<string, any>;\n  onClose?: () => void;\n  closable?: boolean;\n  backdrop?: boolean;\n}\n\n// Sidebar state interface\nexport interface SidebarState {\n  isOpen: boolean;\n  isCollapsed: boolean;\n  width: number;\n  pinned: boolean;\n  activeItem?: string;\n}\n\n// Navigation state interface\nexport interface NavigationState {\n  currentRoute: string;\n  previousRoute?: string;\n  breadcrumbs: Array<{\n    label: string;\n    href: string;\n  }>;\n  history: string[];\n  canGoBack: boolean;\n  canGoForward: boolean;\n}\n\n// Toast state interface\nexport interface ToastState {\n  id: string;\n  type: 'success' | 'error' | 'warning' | 'info';\n  title: string;\n  message: string;\n  duration?: number;\n  position: 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left' | 'top-center' | 'bottom-center';\n  persistent?: boolean;\n}\n\n// UI store interface\ntype UIStore = {\n  // Modal state\n  modals: ModalState[];\n  \n  // Sidebar state\n  sidebar: SidebarState;\n  \n  // Navigation state\n  navigation: NavigationState;\n  \n  // Toast state\n  toasts: ToastState[];\n  \n  // Loading states\n  globalLoading: boolean;\n  pageLoading: boolean;\n  \n  // Theme state\n  theme: 'light' | 'dark' | 'system';\n  systemTheme: 'light' | 'dark';\n  \n  // Screen state\n  screenSize: 'mobile' | 'tablet' | 'desktop';\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  \n  // Actions - Modal Management\n  openModal: (id: string, component?: React.ComponentType<any>, props?: Record<string, any>, options?: Partial<ModalState>) => void;\n  closeModal: (id: string) => void;\n  closeAllModals: () => void;\n  updateModal: (id: string, updates: Partial<ModalState>) => void;\n  \n  // Actions - Sidebar Management\n  toggleSidebar: () => void;\n  setSidebarOpen: (open: boolean) => void;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n  setSidebarWidth: (width: number) => void;\n  setSidebarPinned: (pinned: boolean) => void;\n  setSidebarActiveItem: (item: string) => void;\n  \n  // Actions - Navigation Management\n  setCurrentRoute: (route: string) => void;\n  setBreadcrumbs: (breadcrumbs: NavigationState['breadcrumbs']) => void;\n  addToHistory: (route: string) => void;\n  goBack: () => void;\n  goForward: () => void;\n  clearHistory: () => void;\n  \n  // Actions - Toast Management\n  addToast: (toast: Omit<ToastState, 'id'>) => void;\n  removeToast: (id: string) => void;\n  clearAllToasts: () => void;\n  updateToast: (id: string, updates: Partial<ToastState>) => void;\n  \n  // Actions - Loading Management\n  setGlobalLoading: (loading: boolean) => void;\n  setPageLoading: (loading: boolean) => void;\n  \n  // Actions - Theme Management\n  setTheme: (theme: 'light' | 'dark' | 'system') => void;\n  setSystemTheme: (theme: 'light' | 'dark') => void;\n  \n  // Actions - Screen Management\n  setScreenSize: (size: 'mobile' | 'tablet' | 'desktop') => void;\n  updateScreenState: () => void;\n  \n  // Actions - Utility\n  resetUI: () => void;\n} & BaseStore;\n\n// Create UI store with middleware\nexport const useUIStore = create<UIStore>()(\n  devtools(\n    persist(\n      immer((set, get) => ({\n        // Initial state\n        modals: {},\n        sidebar: {\n          isOpen: true,\n          isCollapsed: false,\n          width: 256,\n          pinned: false,\n        },\n        navigation: {\n          currentRoute: '/',\n          breadcrumbs: [],\n          history: ['/'],\n          canGoBack: false,\n          canGoForward: false,\n        },\n        toasts: [],\n        globalLoading: false,\n        pageLoading: false,\n        theme: 'system',\n        systemTheme: 'light',\n        screenSize: 'desktop',\n        isMobile: false,\n        isTablet: false,\n        isDesktop: true,\n        isLoading: false,\n        error: null,\n        \n        // Base store actions\n        setLoading: (loading) => set((state) => {\n          state.isLoading = loading;\n        }),\n        \n        setError: (error) => set((state) => {\n          state.error = error;\n        }),\n        \n        clearError: () => set((state) => {\n          state.error = null;\n        }),\n        \n        // Modal management actions\n        openModal: (id, component, props, options = {}) => set((state) => {\n          // Remove existing modal with same id\n          state.modals = state.modals.filter(modal => modal.id !== id);\n          \n          // Add new modal\n          state.modals.push({\n            id,\n            isOpen: true,\n            component,\n            props,\n            closable: true,\n            backdrop: true,\n            ...options,\n          });\n        }),\n        \n        closeModal: (id) => set((state) => {\n          const modal = state.modals.find(modal => modal.id === id);\n          if (modal) {\n            modal.isOpen = false;\n            // Call onClose if provided\n            if (modal.onClose) {\n              modal.onClose();\n            }\n            // Remove modal from array\n            state.modals = state.modals.filter(modal => modal.id !== id);\n          }\n        }),\n        \n        closeAllModals: () => set((state) => {\n          state.modals.forEach(modal => {\n            modal.isOpen = false;\n            if (modal.onClose) {\n              modal.onClose();\n            }\n          });\n          state.modals = [];\n        }),\n        \n        updateModal: (id, updates) => set((state) => {\n          const modal = state.modals.find(modal => modal.id === id);\n          if (modal) {\n            Object.assign(modal, updates);\n          }\n        }),\n        \n        // Sidebar management actions\n        toggleSidebar: () => set((state) => {\n          state.sidebar.isOpen = !state.sidebar.isOpen;\n        }),\n        \n        setSidebarOpen: (open) => set((state) => {\n          state.sidebar.isOpen = open;\n        }),\n        \n        setSidebarCollapsed: (collapsed) => set((state) => {\n          state.sidebar.isCollapsed = collapsed;\n        }),\n        \n        setSidebarWidth: (width) => set((state) => {\n          state.sidebar.width = Math.max(200, Math.min(400, width));\n        }),\n        \n        setSidebarPinned: (pinned) => set((state) => {\n          state.sidebar.pinned = pinned;\n        }),\n        \n        setSidebarActiveItem: (item) => set((state) => {\n          state.sidebar.activeItem = item;\n        }),\n        \n        // Navigation management actions\n        setCurrentRoute: (route) => set((state) => {\n          state.navigation.previousRoute = state.navigation.currentRoute;\n          state.navigation.currentRoute = route;\n        }),\n        \n        setBreadcrumbs: (breadcrumbs) => set((state) => {\n          state.navigation.breadcrumbs = breadcrumbs;\n        }),\n        \n        addToHistory: (route) => set((state) => {\n          const history = state.navigation.history;\n          const currentIndex = history.indexOf(state.navigation.currentRoute);\n          \n          // Remove any forward history if we're not at the end\n          if (currentIndex < history.length - 1) {\n            history.splice(currentIndex + 1);\n          }\n          \n          // Add new route\n          history.push(route);\n          state.navigation.currentRoute = route;\n          state.navigation.canGoBack = history.length > 1;\n          state.navigation.canGoForward = false;\n        }),\n        \n        goBack: () => set((state) => {\n          const history = state.navigation.history;\n          const currentIndex = history.indexOf(state.navigation.currentRoute);\n          \n          if (currentIndex > 0) {\n            const previousRoute = history[currentIndex - 1];\n            state.navigation.previousRoute = state.navigation.currentRoute;\n            state.navigation.currentRoute = previousRoute || '';\n            state.navigation.canGoBack = currentIndex > 1;\n            state.navigation.canGoForward = true;\n          }\n        }),\n        \n        goForward: () => set((state) => {\n          const history = state.navigation.history;\n          const currentIndex = history.indexOf(state.navigation.currentRoute);\n          \n          if (currentIndex < history.length - 1) {\n            const nextRoute = history[currentIndex + 1];\n            state.navigation.previousRoute = state.navigation.currentRoute;\n            state.navigation.currentRoute = nextRoute || '';\n            state.navigation.canGoBack = true;\n            state.navigation.canGoForward = currentIndex < history.length - 2;\n          }\n        }),\n        \n        clearHistory: () => set((state) => {\n          state.navigation.history = [state.navigation.currentRoute];\n          state.navigation.canGoBack = false;\n          state.navigation.canGoForward = false;\n        }),\n        \n        // Toast management actions\n        addToast: (toast) => set((state) => {\n          const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n          state.toasts.push({\n            id,\n            duration: 5000,\n            persistent: false,\n            ...toast,\n            position: toast.position || 'top-right',\n          });\n          \n          // Auto-remove toast after duration\n          if (!toast.persistent && toast.duration !== 0) {\n            setTimeout(() => {\n              get().removeToast(id);\n            }, toast.duration || 5000);\n          }\n        }),\n        \n        removeToast: (id) => set((state) => {\n          state.toasts = state.toasts.filter(toast => toast.id !== id);\n        }),\n        \n        clearAllToasts: () => set((state) => {\n          state.toasts = [];\n        }),\n        \n        updateToast: (id, updates) => set((state) => {\n          const toast = state.toasts.find(t => t.id === id);\n          if (toast) {\n            Object.assign(toast, updates);\n          }\n        }),\n        \n        // Loading management actions\n        setGlobalLoading: (loading) => set((state) => {\n          state.globalLoading = loading;\n        }),\n        \n        setPageLoading: (loading) => set((state) => {\n          state.pageLoading = loading;\n        }),\n        \n        // Theme management actions\n        setTheme: (theme) => set((state) => {\n          state.theme = theme;\n        }),\n        \n        setSystemTheme: (theme) => set((state) => {\n          state.systemTheme = theme;\n        }),\n        \n        // Screen management actions\n        setScreenSize: (size) => set((state) => {\n          state.screenSize = size;\n          state.isMobile = size === 'mobile';\n          state.isTablet = size === 'tablet';\n          state.isDesktop = size === 'desktop';\n        }),\n        \n        updateScreenState: () => set((state) => {\n          if (typeof window !== 'undefined') {\n            const width = window.innerWidth;\n            if (width < 768) {\n              state.screenSize = 'mobile';\n              state.isMobile = true;\n              state.isTablet = false;\n              state.isDesktop = false;\n            } else if (width < 1024) {\n              state.screenSize = 'tablet';\n              state.isMobile = false;\n              state.isTablet = true;\n              state.isDesktop = false;\n            } else {\n              state.screenSize = 'desktop';\n              state.isMobile = false;\n              state.isTablet = false;\n              state.isDesktop = true;\n            }\n          }\n        }),\n        \n        // Utility actions\n        resetUI: () => set((state) => {\n          state.modals = {};\n          state.sidebar = {\n            isOpen: true,\n            isCollapsed: false,\n            width: 256,\n            pinned: false,\n          };\n          state.navigation = {\n            currentRoute: '/',\n            breadcrumbs: [],\n            history: ['/'],\n            canGoBack: false,\n            canGoForward: false,\n          };\n          state.toasts = [];\n          state.globalLoading = false;\n          state.pageLoading = false;\n        }),\n      })),\n      {\n        name: 'ui-store',\n        partialize: (state) => ({\n          sidebar: state.sidebar,\n          theme: state.theme,\n          navigation: {\n            currentRoute: state.navigation.currentRoute,\n            breadcrumbs: state.navigation.breadcrumbs,\n            history: state.navigation.history,\n          },\n        }),\n      }\n    ),\n    { name: 'UIStore' }\n  )\n);\n\n// Store selectors for optimized re-renders\nexport const useModals = () => useUIStore(state => state.modals);\nexport const useModal = (id: string) => useUIStore(state => state.modals[id]);\nexport const useSidebar = () => useUIStore(state => state.sidebar);\nexport const useNavigation = () => useUIStore(state => state.navigation);\nexport const useToasts = () => useUIStore(state => state.toasts);\nexport const useGlobalLoading = () => useUIStore(state => state.globalLoading);\nexport const usePageLoading = () => useUIStore(state => state.pageLoading);\nexport const useTheme = () => useUIStore(state => state.theme);\nexport const useSystemTheme = () => useUIStore(state => state.systemTheme);\nexport const useScreenSize = () => useUIStore(state => state.screenSize);\nexport const useIsMobile = () => useUIStore(state => state.isMobile);\nexport const useIsTablet = () => useUIStore(state => state.isTablet);\nexport const useIsDesktop = () => useUIStore(state => state.isDesktop);\n\n// Computed selectors\nexport const useIsModalOpen = (id: string) => useUIStore(state => state.modals[id]?.isOpen || false);\nexport const useActiveModals = () => useUIStore(state => \n  Object.values(state.modals).filter(modal => modal.isOpen)\n);\nexport const useToastCount = () => useUIStore(state => state.toasts.length);\nexport const useCurrentBreadcrumbs = () => useUIStore(state => state.navigation.breadcrumbs);\nexport const useCanNavigate = () => useUIStore(state => ({\n  canGoBack: state.navigation.canGoBack,\n  canGoForward: state.navigation.canGoForward,\n}));\n\n// Action selectors\nexport const useUIActions = () => useUIStore(state => ({\n  openModal: state.openModal,\n  closeModal: state.closeModal,\n  closeAllModals: state.closeAllModals,\n  updateModal: state.updateModal,\n  toggleSidebar: state.toggleSidebar,\n  setSidebarOpen: state.setSidebarOpen,\n  setSidebarCollapsed: state.setSidebarCollapsed,\n  setSidebarWidth: state.setSidebarWidth,\n  setSidebarPinned: state.setSidebarPinned,\n  setSidebarActiveItem: state.setSidebarActiveItem,\n  setCurrentRoute: state.setCurrentRoute,\n  setBreadcrumbs: state.setBreadcrumbs,\n  addToHistory: state.addToHistory,\n  goBack: state.goBack,\n  goForward: state.goForward,\n  clearHistory: state.clearHistory,\n  addToast: state.addToast,\n  removeToast: state.removeToast,\n  clearAllToasts: state.clearAllToasts,\n  updateToast: state.updateToast,\n  setGlobalLoading: state.setGlobalLoading,\n  setPageLoading: state.setPageLoading,\n  setTheme: state.setTheme,\n  setSystemTheme: state.setSystemTheme,\n  setScreenSize: state.setScreenSize,\n  updateScreenState: state.updateScreenState,\n  resetUI: state.resetUI,\n}));\n\n// Debug utilities\nexport const useUIDebug = () => useUIStore(state => ({\n  modals: Object.keys(state.modals),\n  activeModals: Object.values(state.modals).filter(modal => modal.isOpen).length,\n  toasts: state.toasts.length,\n  sidebarOpen: state.sidebar.isOpen,\n  currentRoute: state.navigation.currentRoute,\n  historyLength: state.navigation.history.length,\n  theme: state.theme,\n  screenSize: state.screenSize,\n}));\n\n// Subscription utilities\nexport const useUISubscription = (selector: (state: UIStore) => any, callback: (value: any) => void) => {\n  return useUIStore.subscribe((state) => {\n    const value = selector(state);\n    callback(value);\n  });\n};\n"],"names":["useActiveModals","useCanNavigate","useCurrentBreadcrumbs","useGlobalLoading","useIsDesktop","useIsMobile","useIsModalOpen","useIsTablet","useModal","useModals","useNavigation","usePageLoading","useScreenSize","useSidebar","useSystemTheme","useTheme","useToastCount","useToasts","useUIActions","useUIDebug","useUIStore","useUISubscription","create","devtools","persist","immer","set","get","modals","sidebar","isOpen","isCollapsed","width","pinned","navigation","currentRoute","breadcrumbs","history","canGoBack","canGoForward","toasts","globalLoading","pageLoading","theme","systemTheme","screenSize","isMobile","isTablet","isDesktop","isLoading","error","setLoading","loading","state","setError","clearError","openModal","id","component","props","options","filter","modal","push","closable","backdrop","closeModal","find","onClose","closeAllModals","forEach","updateModal","updates","Object","assign","toggleSidebar","setSidebarOpen","open","setSidebarCollapsed","collapsed","setSidebarWidth","Math","max","min","setSidebarPinned","setSidebarActiveItem","item","activeItem","setCurrentRoute","route","previousRoute","setBreadcrumbs","addToHistory","currentIndex","indexOf","length","splice","goBack","goForward","nextRoute","clearHistory","addToast","toast","Date","now","random","toString","substr","duration","persistent","position","setTimeout","removeToast","clearAllToasts","updateToast","t","setGlobalLoading","setPageLoading","setTheme","setSystemTheme","setScreenSize","size","updateScreenState","window","innerWidth","resetUI","name","partialize","values","keys","activeModals","sidebarOpen","historyLength","selector","callback","subscribe","value"],"mappings":"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"}