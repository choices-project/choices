96b86291ae8b421cd177b0aff7e821ef
/**
 * Enhanced Social Feed Component
 * 
 * Instagram-like social feed with advanced features
 * Features:
 * - Smooth infinite scroll
 * - Pull-to-refresh
 * - Touch gesture support
 * - Real-time updates
 * - Personalization algorithms
 * - Enhanced engagement metrics
 * - Performance optimizations
 * - Accessibility compliance
 */ "use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return EnhancedSocialFeed;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _outline = require("@heroicons/react/24/outline");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _stores = require("../../../lib/stores");
const _FeedItem = /*#__PURE__*/ _interop_require_default(require("./FeedItem"));
const _InfiniteScroll = /*#__PURE__*/ _interop_require_default(require("./InfiniteScroll"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
function EnhancedSocialFeed({ userId, preferences: _preferences, onLike, onShare, onBookmark, onComment, onViewDetails, className = "", enablePersonalization = true, enableRealTimeUpdates = true, enableAnalytics = false, enableHaptics = true, showTrending = true }) {
    const feeds = (0, _stores.useFeeds)();
    const { loadFeeds, likeFeed, bookmarkFeed, refreshFeeds } = (0, _stores.useFeedsActions)();
    const isLoading = (0, _stores.useFeedsLoading)();
    // Use store state instead of local state
    const feedItems = feeds;
    const [page, setPage] = (0, _react.useState)(1);
    const [hasMore, setHasMore] = (0, _react.useState)(true);
    const [personalizationScore, setPersonalizationScore] = (0, _react.useState)(0);
    const [lastUpdate, setLastUpdate] = (0, _react.useState)(new Date());
    const wsRef = (0, _react.useRef)(null);
    const refreshIntervalRef = (0, _react.useRef)(null);
    // Load feed items with personalization
    const loadFeedItems = (0, _react.useCallback)(async (pageNum, isRefresh = false)=>{
        if (isLoading) return;
        try {
            // Update page state
            setPage(pageNum);
            // Use FeedsStore to load feeds
            if (isRefresh) {
                await refreshFeeds();
            } else {
                await loadFeeds("all");
            }
            setHasMore(feeds.length === 20);
            setPersonalizationScore(0); // This would come from the store
            setLastUpdate(new Date());
        } catch (error) {
            // Error handling - could be logged to monitoring service
            console.error("Error loading feed:", error);
        }
    }, [
        isLoading,
        loadFeeds,
        refreshFeeds,
        feeds.length
    ]);
    // Load initial feed
    (0, _react.useEffect)(()=>{
        void loadFeedItems(1, true);
    }, [
        loadFeedItems
    ]);
    // Set up real-time updates
    (0, _react.useEffect)(()=>{
        if (enableRealTimeUpdates && userId) {
            // WebSocket connection for real-time updates
            const ws = new WebSocket(`wss://your-websocket-endpoint/feed/${userId}`);
            wsRef.current = ws;
            ws.onmessage = (event)=>{
                const data = JSON.parse(event.data);
                if (data.label === "new_item") {
                    // Use store action to add new feed item
                    // This would need to be implemented in the store
                    console.log("New item received:", data.item);
                } else if (data.label === "engagement_update") {
                    // Use store action to update engagement
                    // This would need to be implemented in the store
                    console.log("Engagement update received:", data);
                }
            };
            // Fallback polling for updates
            refreshIntervalRef.current = setInterval(()=>{
                void loadFeedItems(1, true);
            }, 30000); // Refresh every 30 seconds
            return ()=>{
                ws.close();
                if (refreshIntervalRef.current) {
                    clearInterval(refreshIntervalRef.current);
                }
            };
        }
    }, [
        enableRealTimeUpdates,
        userId,
        loadFeedItems
    ]);
    // Analytics tracking
    const trackEvent = (0, _react.useCallback)((event, data)=>{
        if (enableAnalytics) {
            console.log("Analytics:", event, data);
            // Implement analytics tracking for social media interactions
            try {
                // Track social media click event
                if (typeof window !== "undefined" && window.gtag) {
                    window.gtag("event", "social_media_click", {
                        event_category: "civics",
                        event_label: data?.platform || "unknown",
                        value: 1
                    });
                }
                // Track in local analytics if available
                if (typeof window !== "undefined" && window.analytics) {
                    window.analytics.track("Social Media Clicked", {
                        platform: data?.platform || "unknown",
                        handle: data?.handle || "unknown",
                        url: data?.url || "unknown",
                        representative: data?.representative || "unknown"
                    });
                }
            } catch (error) {
                console.warn("Analytics tracking failed:", error);
            }
        }
    }, [
        enableAnalytics
    ]);
    // Handle engagement actions
    const handleLike = (0, _react.useCallback)((itemId)=>{
        // Use FeedsStore to like feed
        likeFeed(itemId);
        onLike?.(itemId);
        trackEvent("feed_item_liked", {
            itemId
        });
    }, [
        likeFeed,
        onLike,
        trackEvent
    ]);
    const handleBookmark = (0, _react.useCallback)((itemId)=>{
        // Use FeedsStore to bookmark feed
        bookmarkFeed(itemId);
        onBookmark?.(itemId);
        trackEvent("feed_item_bookmarked", {
            itemId
        });
    }, [
        bookmarkFeed,
        onBookmark,
        trackEvent
    ]);
    const handleShare = (0, _react.useCallback)((itemId)=>{
        onShare?.(itemId);
        trackEvent("feed_item_shared", {
            itemId
        });
        // Native sharing if available
        if (navigator.share) {
            const item = feedItems.find((item)=>item.id === itemId);
            if (item) {
                navigator.share({
                    title: item.title,
                    text: item.summary || "",
                    url: item.source.url || window.location.href
                });
            }
        }
    }, [
        feedItems,
        onShare,
        trackEvent
    ]);
    const handleComment = (0, _react.useCallback)((itemId)=>{
        onComment?.(itemId);
        trackEvent("feed_item_commented", {
            itemId
        });
    }, [
        onComment,
        trackEvent
    ]);
    const handleViewDetails = (0, _react.useCallback)((itemId)=>{
        onViewDetails?.(itemId);
    }, [
        onViewDetails
    ]);
    // Handle refresh
    const handleRefresh = (0, _react.useCallback)(async ()=>{
        await loadFeedItems(1, true);
    }, [
        loadFeedItems
    ]);
    // Handle load more
    const handleLoadMore = (0, _react.useCallback)(async ()=>{
        await loadFeedItems(page + 1, false);
    }, [
        loadFeedItems,
        page
    ]);
    // Format last update time
    const formatLastUpdate = (date)=>{
        const now = new Date();
        const diffInMinutes = Math.floor((now.getTime() - date.getTime()) / (1000 * 60));
        if (diffInMinutes < 1) return "Just now";
        if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
        if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}h ago`;
        return date.toLocaleDateString();
    };
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `h-full ${className}`,
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "bg-white border-b border-gray-200 p-4",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-between",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h2", {
                                    className: "text-lg font-semibold text-gray-900",
                                    children: "Civic Feed"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    className: "text-sm text-gray-500",
                                    children: enablePersonalization && personalizationScore > 0 && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "flex items-center space-x-1",
                                        children: [
                                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.SparklesIcon, {
                                                className: "w-4 h-4 text-blue-500"
                                            }),
                                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                                children: [
                                                    "Personalized for you (",
                                                    personalizationScore,
                                                    "% match)"
                                                ]
                                            })
                                        ]
                                    })
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center space-x-4 text-sm text-gray-500",
                            children: [
                                enableRealTimeUpdates && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center space-x-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                            className: "w-2 h-2 bg-green-500 rounded-full animate-pulse"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                            children: "Live"
                                        })
                                    ]
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex items-center space-x-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_outline.ClockIcon, {
                                            className: "w-4 h-4"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                            children: [
                                                "Updated ",
                                                formatLastUpdate(lastUpdate)
                                            ]
                                        })
                                    ]
                                })
                            ]
                        })
                    ]
                })
            }),
            isLoading && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "bg-blue-50 border-b border-blue-200 p-3",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-center space-x-2",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "text-sm text-blue-600",
                            children: "Refreshing feed..."
                        })
                    ]
                })
            }),
            showTrending && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200 p-4",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                                className: "w-2 h-2 bg-red-500 rounded-full animate-pulse"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-sm font-medium text-gray-700",
                                children: "Trending Now"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                        className: "mt-2 text-sm text-gray-600",
                        children: "Climate Action • Voting Rights • Infrastructure"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_InfiniteScroll.default, {
                onLoadMore: handleLoadMore,
                hasMore: hasMore,
                isLoading: isLoading,
                onRefresh: handleRefresh,
                enableScrollToTop: true,
                enablePullToRefresh: true,
                className: "h-full",
                loadingComponent: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center justify-center py-8",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                            className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "ml-3 text-gray-500",
                            children: "Loading more..."
                        })
                    ]
                }),
                endComponent: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "text-center py-8 text-gray-500",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            children: "You've reached the end of the feed"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                            className: "text-sm mt-1",
                            children: "Check back later for more updates"
                        })
                    ]
                }),
                children: feedItems.map((item)=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_FeedItem.default, {
                        item: item,
                        onLike: handleLike,
                        onShare: handleShare,
                        onBookmark: handleBookmark,
                        onComment: handleComment,
                        onViewDetails: handleViewDetails,
                        isLiked: item.userInteraction.liked,
                        isBookmarked: item.userInteraction.bookmarked,
                        showEngagement: true,
                        enableHaptics: enableHaptics
                    }, item.id))
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9mZWVkcy9jb21wb25lbnRzL0VuaGFuY2VkU29jaWFsRmVlZC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbmhhbmNlZCBTb2NpYWwgRmVlZCBDb21wb25lbnRcbiAqIFxuICogSW5zdGFncmFtLWxpa2Ugc29jaWFsIGZlZWQgd2l0aCBhZHZhbmNlZCBmZWF0dXJlc1xuICogRmVhdHVyZXM6XG4gKiAtIFNtb290aCBpbmZpbml0ZSBzY3JvbGxcbiAqIC0gUHVsbC10by1yZWZyZXNoXG4gKiAtIFRvdWNoIGdlc3R1cmUgc3VwcG9ydFxuICogLSBSZWFsLXRpbWUgdXBkYXRlc1xuICogLSBQZXJzb25hbGl6YXRpb24gYWxnb3JpdGhtc1xuICogLSBFbmhhbmNlZCBlbmdhZ2VtZW50IG1ldHJpY3NcbiAqIC0gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uc1xuICogLSBBY2Nlc3NpYmlsaXR5IGNvbXBsaWFuY2VcbiAqL1xuXG4ndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7XG4gIFNwYXJrbGVzSWNvbixcbiAgQ2xvY2tJY29uXG59IGZyb20gJ0BoZXJvaWNvbnMvcmVhY3QvMjQvb3V0bGluZSc7XG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHR5cGUgeyBVc2VyUHJlZmVyZW5jZXMgfSBmcm9tICdAL2ZlYXR1cmVzL2ZlZWRzL3R5cGVzJztcbmltcG9ydCB7IFxuICB1c2VGZWVkcywgXG4gIHVzZUZlZWRzQWN0aW9ucywgXG4gIHVzZUZlZWRzTG9hZGluZ1xufSBmcm9tICdAL2xpYi9zdG9yZXMnO1xuXG5pbXBvcnQgRmVlZEl0ZW0gZnJvbSAnLi9GZWVkSXRlbSc7XG5pbXBvcnQgSW5maW5pdGVTY3JvbGwgZnJvbSAnLi9JbmZpbml0ZVNjcm9sbCc7XG5cblxuaW50ZXJmYWNlIEVuaGFuY2VkU29jaWFsRmVlZFByb3BzIHtcbiAgdXNlcklkPzogc3RyaW5nO1xuICBwcmVmZXJlbmNlcz86IFVzZXJQcmVmZXJlbmNlcztcbiAgb25MaWtlPzogKGl0ZW1JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvblNoYXJlPzogKGl0ZW1JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvbkJvb2ttYXJrPzogKGl0ZW1JZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvbkNvbW1lbnQ/OiAoaXRlbUlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9uVmlld0RldGFpbHM/OiAoaXRlbUlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNsYXNzTmFtZT86IHN0cmluZztcbiAgZW5hYmxlUGVyc29uYWxpemF0aW9uPzogYm9vbGVhbjtcbiAgZW5hYmxlUmVhbFRpbWVVcGRhdGVzPzogYm9vbGVhbjtcbiAgZW5hYmxlQW5hbHl0aWNzPzogYm9vbGVhbjtcbiAgZW5hYmxlSGFwdGljcz86IGJvb2xlYW47XG4gIHNob3dUcmVuZGluZz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVuaGFuY2VkU29jaWFsRmVlZCh7XG4gIHVzZXJJZCxcbiAgcHJlZmVyZW5jZXM6IF9wcmVmZXJlbmNlcyxcbiAgb25MaWtlLFxuICBvblNoYXJlLFxuICBvbkJvb2ttYXJrLFxuICBvbkNvbW1lbnQsXG4gIG9uVmlld0RldGFpbHMsXG4gIGNsYXNzTmFtZSA9ICcnLFxuICBlbmFibGVQZXJzb25hbGl6YXRpb24gPSB0cnVlLFxuICBlbmFibGVSZWFsVGltZVVwZGF0ZXMgPSB0cnVlLFxuICBlbmFibGVBbmFseXRpY3MgPSBmYWxzZSxcbiAgZW5hYmxlSGFwdGljcyA9IHRydWUsXG4gIHNob3dUcmVuZGluZyA9IHRydWVcbn06IEVuaGFuY2VkU29jaWFsRmVlZFByb3BzKSB7XG4gIGNvbnN0IGZlZWRzID0gdXNlRmVlZHMoKTtcbiAgY29uc3QgeyBsb2FkRmVlZHMsIGxpa2VGZWVkLCBib29rbWFya0ZlZWQsIHJlZnJlc2hGZWVkcyB9ID0gdXNlRmVlZHNBY3Rpb25zKCk7XG4gIGNvbnN0IGlzTG9hZGluZyA9IHVzZUZlZWRzTG9hZGluZygpO1xuICBcbiAgLy8gVXNlIHN0b3JlIHN0YXRlIGluc3RlYWQgb2YgbG9jYWwgc3RhdGVcbiAgY29uc3QgZmVlZEl0ZW1zID0gZmVlZHM7XG4gIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlKDEpO1xuICBjb25zdCBbaGFzTW9yZSwgc2V0SGFzTW9yZV0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3BlcnNvbmFsaXphdGlvblNjb3JlLCBzZXRQZXJzb25hbGl6YXRpb25TY29yZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2xhc3RVcGRhdGUsIHNldExhc3RVcGRhdGVdID0gdXNlU3RhdGU8RGF0ZT4obmV3IERhdGUoKSk7XG4gIFxuICBjb25zdCB3c1JlZiA9IHVzZVJlZjxXZWJTb2NrZXQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgcmVmcmVzaEludGVydmFsUmVmID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG5cbiAgLy8gTG9hZCBmZWVkIGl0ZW1zIHdpdGggcGVyc29uYWxpemF0aW9uXG4gIGNvbnN0IGxvYWRGZWVkSXRlbXMgPSB1c2VDYWxsYmFjayhhc3luYyAocGFnZU51bTogbnVtYmVyLCBpc1JlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuICAgIGlmIChpc0xvYWRpbmcpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICAvLyBVcGRhdGUgcGFnZSBzdGF0ZVxuICAgICAgc2V0UGFnZShwYWdlTnVtKTtcbiAgICAgIFxuICAgICAgLy8gVXNlIEZlZWRzU3RvcmUgdG8gbG9hZCBmZWVkc1xuICAgICAgaWYgKGlzUmVmcmVzaCkge1xuICAgICAgICBhd2FpdCByZWZyZXNoRmVlZHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGxvYWRGZWVkcygnYWxsJyk7XG4gICAgICB9XG5cbiAgICAgIHNldEhhc01vcmUoZmVlZHMubGVuZ3RoID09PSAyMCk7XG4gICAgICBzZXRQZXJzb25hbGl6YXRpb25TY29yZSgwKTsgLy8gVGhpcyB3b3VsZCBjb21lIGZyb20gdGhlIHN0b3JlXG4gICAgICBzZXRMYXN0VXBkYXRlKG5ldyBEYXRlKCkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFcnJvciBoYW5kbGluZyAtIGNvdWxkIGJlIGxvZ2dlZCB0byBtb25pdG9yaW5nIHNlcnZpY2VcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZmVlZDonLCBlcnJvcik7XG4gICAgfVxuICB9LCBbaXNMb2FkaW5nLCBsb2FkRmVlZHMsIHJlZnJlc2hGZWVkcywgZmVlZHMubGVuZ3RoXSk7XG5cbiAgLy8gTG9hZCBpbml0aWFsIGZlZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB2b2lkIGxvYWRGZWVkSXRlbXMoMSwgdHJ1ZSk7XG4gIH0sIFtsb2FkRmVlZEl0ZW1zXSk7XG5cbiAgLy8gU2V0IHVwIHJlYWwtdGltZSB1cGRhdGVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGVuYWJsZVJlYWxUaW1lVXBkYXRlcyAmJiB1c2VySWQpIHtcbiAgICAgIC8vIFdlYlNvY2tldCBjb25uZWN0aW9uIGZvciByZWFsLXRpbWUgdXBkYXRlc1xuICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KGB3c3M6Ly95b3VyLXdlYnNvY2tldC1lbmRwb2ludC9mZWVkLyR7dXNlcklkfWApO1xuICAgICAgd3NSZWYuY3VycmVudCA9IHdzO1xuXG4gICAgICB3cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGlmIChkYXRhLmxhYmVsID09PSAnbmV3X2l0ZW0nKSB7XG4gICAgICAgICAgLy8gVXNlIHN0b3JlIGFjdGlvbiB0byBhZGQgbmV3IGZlZWQgaXRlbVxuICAgICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgc3RvcmVcbiAgICAgICAgICBjb25zb2xlLmxvZygnTmV3IGl0ZW0gcmVjZWl2ZWQ6JywgZGF0YS5pdGVtKTtcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmxhYmVsID09PSAnZW5nYWdlbWVudF91cGRhdGUnKSB7XG4gICAgICAgICAgLy8gVXNlIHN0b3JlIGFjdGlvbiB0byB1cGRhdGUgZW5nYWdlbWVudFxuICAgICAgICAgIC8vIFRoaXMgd291bGQgbmVlZCB0byBiZSBpbXBsZW1lbnRlZCBpbiB0aGUgc3RvcmVcbiAgICAgICAgICBjb25zb2xlLmxvZygnRW5nYWdlbWVudCB1cGRhdGUgcmVjZWl2ZWQ6JywgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEZhbGxiYWNrIHBvbGxpbmcgZm9yIHVwZGF0ZXNcbiAgICAgIHJlZnJlc2hJbnRlcnZhbFJlZi5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB2b2lkIGxvYWRGZWVkSXRlbXMoMSwgdHJ1ZSk7XG4gICAgICB9LCAzMDAwMCk7IC8vIFJlZnJlc2ggZXZlcnkgMzAgc2Vjb25kc1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3cy5jbG9zZSgpO1xuICAgICAgICBpZiAocmVmcmVzaEludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHJlZnJlc2hJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sIFtlbmFibGVSZWFsVGltZVVwZGF0ZXMsIHVzZXJJZCwgbG9hZEZlZWRJdGVtc10pO1xuXG4gIC8vIEFuYWx5dGljcyB0cmFja2luZ1xuICBjb25zdCB0cmFja0V2ZW50ID0gdXNlQ2FsbGJhY2soKGV2ZW50OiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcbiAgICBpZiAoZW5hYmxlQW5hbHl0aWNzKSB7XG4gICAgICBjb25zb2xlLmxvZygnQW5hbHl0aWNzOicsIGV2ZW50LCBkYXRhKTtcbiAgICAgIC8vIEltcGxlbWVudCBhbmFseXRpY3MgdHJhY2tpbmcgZm9yIHNvY2lhbCBtZWRpYSBpbnRlcmFjdGlvbnNcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRyYWNrIHNvY2lhbCBtZWRpYSBjbGljayBldmVudFxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmd0YWcpIHtcbiAgICAgICAgICB3aW5kb3cuZ3RhZygnZXZlbnQnLCAnc29jaWFsX21lZGlhX2NsaWNrJywge1xuICAgICAgICAgICAgZXZlbnRfY2F0ZWdvcnk6ICdjaXZpY3MnLFxuICAgICAgICAgICAgZXZlbnRfbGFiZWw6IGRhdGE/LnBsYXRmb3JtIHx8ICd1bmtub3duJyxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRyYWNrIGluIGxvY2FsIGFuYWx5dGljcyBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICh3aW5kb3cgYXMgYW55KS5hbmFseXRpY3MpIHtcbiAgICAgICAgICAod2luZG93IGFzIGFueSkuYW5hbHl0aWNzLnRyYWNrKCdTb2NpYWwgTWVkaWEgQ2xpY2tlZCcsIHtcbiAgICAgICAgICAgIHBsYXRmb3JtOiBkYXRhPy5wbGF0Zm9ybSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICBoYW5kbGU6IGRhdGE/LmhhbmRsZSB8fCAndW5rbm93bicsXG4gICAgICAgICAgICB1cmw6IGRhdGE/LnVybCB8fCAndW5rbm93bicsXG4gICAgICAgICAgICByZXByZXNlbnRhdGl2ZTogZGF0YT8ucmVwcmVzZW50YXRpdmUgfHwgJ3Vua25vd24nXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQW5hbHl0aWNzIHRyYWNraW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZW5hYmxlQW5hbHl0aWNzXSk7XG5cbiAgLy8gSGFuZGxlIGVuZ2FnZW1lbnQgYWN0aW9uc1xuICBjb25zdCBoYW5kbGVMaWtlID0gdXNlQ2FsbGJhY2soKGl0ZW1JZDogc3RyaW5nKSA9PiB7XG4gICAgLy8gVXNlIEZlZWRzU3RvcmUgdG8gbGlrZSBmZWVkXG4gICAgbGlrZUZlZWQoaXRlbUlkKTtcbiAgICBvbkxpa2U/LihpdGVtSWQpO1xuICAgIHRyYWNrRXZlbnQoJ2ZlZWRfaXRlbV9saWtlZCcsIHsgaXRlbUlkIH0pO1xuICB9LCBbbGlrZUZlZWQsIG9uTGlrZSwgdHJhY2tFdmVudF0pO1xuXG4gIGNvbnN0IGhhbmRsZUJvb2ttYXJrID0gdXNlQ2FsbGJhY2soKGl0ZW1JZDogc3RyaW5nKSA9PiB7XG4gICAgLy8gVXNlIEZlZWRzU3RvcmUgdG8gYm9va21hcmsgZmVlZFxuICAgIGJvb2ttYXJrRmVlZChpdGVtSWQpO1xuICAgIG9uQm9va21hcms/LihpdGVtSWQpO1xuICAgIHRyYWNrRXZlbnQoJ2ZlZWRfaXRlbV9ib29rbWFya2VkJywgeyBpdGVtSWQgfSk7XG4gIH0sIFtib29rbWFya0ZlZWQsIG9uQm9va21hcmssIHRyYWNrRXZlbnRdKTtcblxuICBjb25zdCBoYW5kbGVTaGFyZSA9IHVzZUNhbGxiYWNrKChpdGVtSWQ6IHN0cmluZykgPT4ge1xuICAgIG9uU2hhcmU/LihpdGVtSWQpO1xuICAgIHRyYWNrRXZlbnQoJ2ZlZWRfaXRlbV9zaGFyZWQnLCB7IGl0ZW1JZCB9KTtcbiAgICBcbiAgICAvLyBOYXRpdmUgc2hhcmluZyBpZiBhdmFpbGFibGVcbiAgICBpZiAobmF2aWdhdG9yLnNoYXJlKSB7XG4gICAgICBjb25zdCBpdGVtID0gZmVlZEl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBpdGVtSWQpO1xuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgbmF2aWdhdG9yLnNoYXJlKHtcbiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcbiAgICAgICAgICB0ZXh0OiBpdGVtLnN1bW1hcnkgfHwgJycsXG4gICAgICAgICAgdXJsOiBpdGVtLnNvdXJjZS51cmwgfHwgd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LCBbZmVlZEl0ZW1zLCBvblNoYXJlLCB0cmFja0V2ZW50XSk7XG5cbiAgY29uc3QgaGFuZGxlQ29tbWVudCA9IHVzZUNhbGxiYWNrKChpdGVtSWQ6IHN0cmluZykgPT4ge1xuICAgIG9uQ29tbWVudD8uKGl0ZW1JZCk7XG4gICAgdHJhY2tFdmVudCgnZmVlZF9pdGVtX2NvbW1lbnRlZCcsIHsgaXRlbUlkIH0pO1xuICB9LCBbb25Db21tZW50LCB0cmFja0V2ZW50XSk7XG5cbiAgY29uc3QgaGFuZGxlVmlld0RldGFpbHMgPSB1c2VDYWxsYmFjaygoaXRlbUlkOiBzdHJpbmcpID0+IHtcbiAgICBvblZpZXdEZXRhaWxzPy4oaXRlbUlkKTtcbiAgfSwgW29uVmlld0RldGFpbHNdKTtcblxuICAvLyBIYW5kbGUgcmVmcmVzaFxuICBjb25zdCBoYW5kbGVSZWZyZXNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGxvYWRGZWVkSXRlbXMoMSwgdHJ1ZSk7XG4gIH0sIFtsb2FkRmVlZEl0ZW1zXSk7XG5cbiAgLy8gSGFuZGxlIGxvYWQgbW9yZVxuICBjb25zdCBoYW5kbGVMb2FkTW9yZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBsb2FkRmVlZEl0ZW1zKHBhZ2UgKyAxLCBmYWxzZSk7XG4gIH0sIFtsb2FkRmVlZEl0ZW1zLCBwYWdlXSk7XG5cbiAgLy8gRm9ybWF0IGxhc3QgdXBkYXRlIHRpbWVcbiAgY29uc3QgZm9ybWF0TGFzdFVwZGF0ZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBkaWZmSW5NaW51dGVzID0gTWF0aC5mbG9vcigobm93LmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjApKTtcbiAgICBcbiAgICBpZiAoZGlmZkluTWludXRlcyA8IDEpIHJldHVybiAnSnVzdCBub3cnO1xuICAgIGlmIChkaWZmSW5NaW51dGVzIDwgNjApIHJldHVybiBgJHtkaWZmSW5NaW51dGVzfW0gYWdvYDtcbiAgICBpZiAoZGlmZkluTWludXRlcyA8IDE0NDApIHJldHVybiBgJHtNYXRoLmZsb29yKGRpZmZJbk1pbnV0ZXMgLyA2MCl9aCBhZ29gO1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2BoLWZ1bGwgJHtjbGFzc05hbWV9YH0+XG4gICAgICB7LyogRmVlZCBIZWFkZXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMCBwLTRcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW5cIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwXCI+Q2l2aWMgRmVlZDwvaDI+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAge2VuYWJsZVBlcnNvbmFsaXphdGlvbiAmJiBwZXJzb25hbGl6YXRpb25TY29yZSA+IDAgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgICAgPFNwYXJrbGVzSWNvbiBjbGFzc05hbWU9XCJ3LTQgaC00IHRleHQtYmx1ZS01MDBcIiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+UGVyc29uYWxpemVkIGZvciB5b3UgKHtwZXJzb25hbGl6YXRpb25TY29yZX0lIG1hdGNoKTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTQgdGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICB7ZW5hYmxlUmVhbFRpbWVVcGRhdGVzICYmIChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTFcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgYmctZ3JlZW4tNTAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXB1bHNlXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4+TGl2ZTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICA8Q2xvY2tJY29uIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgICAgICA8c3Bhbj5VcGRhdGVkIHtmb3JtYXRMYXN0VXBkYXRlKGxhc3RVcGRhdGUpfTwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogUmVmcmVzaCBJbmRpY2F0b3IgKi99XG4gICAgICB7aXNMb2FkaW5nICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibHVlLTUwIGJvcmRlci1iIGJvcmRlci1ibHVlLTIwMCBwLTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtNCB3LTQgYm9yZGVyLWItMiBib3JkZXItYmx1ZS01MDBcIj48L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ibHVlLTYwMFwiPlJlZnJlc2hpbmcgZmVlZC4uLjwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApfVxuXG4gICAgICB7LyogVHJlbmRpbmcgU2VjdGlvbiAqL31cbiAgICAgIHtzaG93VHJlbmRpbmcgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWdyYWRpZW50LXRvLXIgZnJvbS1ibHVlLTUwIHRvLXB1cnBsZS01MCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgcC00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiBiZy1yZWQtNTAwIHJvdW5kZWQtZnVsbCBhbmltYXRlLXB1bHNlXCI+PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5UcmVuZGluZyBOb3c8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgQ2xpbWF0ZSBBY3Rpb24g4oCiIFZvdGluZyBSaWdodHMg4oCiIEluZnJhc3RydWN0dXJlXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAgey8qIEVuaGFuY2VkIEZlZWQgd2l0aCBJbmZpbml0ZSBTY3JvbGwgKi99XG4gICAgICA8SW5maW5pdGVTY3JvbGxcbiAgICAgICAgb25Mb2FkTW9yZT17aGFuZGxlTG9hZE1vcmV9XG4gICAgICAgIGhhc01vcmU9e2hhc01vcmV9XG4gICAgICAgIGlzTG9hZGluZz17aXNMb2FkaW5nfVxuICAgICAgICBvblJlZnJlc2g9e2hhbmRsZVJlZnJlc2h9XG4gICAgICAgIGVuYWJsZVNjcm9sbFRvVG9wPXt0cnVlfVxuICAgICAgICBlbmFibGVQdWxsVG9SZWZyZXNoPXt0cnVlfVxuICAgICAgICBjbGFzc05hbWU9XCJoLWZ1bGxcIlxuICAgICAgICBsb2FkaW5nQ29tcG9uZW50PXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LThcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwXCI+PC9kaXY+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0zIHRleHQtZ3JheS01MDBcIj5Mb2FkaW5nIG1vcmUuLi48L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIH1cbiAgICAgICAgZW5kQ29tcG9uZW50PXtcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHB5LTggdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgPHA+WW91JmFwb3M7dmUgcmVhY2hlZCB0aGUgZW5kIG9mIHRoZSBmZWVkPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSBtdC0xXCI+Q2hlY2sgYmFjayBsYXRlciBmb3IgbW9yZSB1cGRhdGVzPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICA+XG4gICAgICAgIHtmZWVkSXRlbXMubWFwKChpdGVtKSA9PiAoXG4gICAgICAgICAgPEZlZWRJdGVtXG4gICAgICAgICAgICBrZXk9e2l0ZW0uaWR9XG4gICAgICAgICAgICBpdGVtPXtpdGVtIGFzIGFueX0gLy8gVHlwZSBjb252ZXJzaW9uIG5lZWRlZCBkdWUgdG8gZGlmZmVyZW50IEZlZWRJdGVtIHR5cGVzXG4gICAgICAgICAgICBvbkxpa2U9e2hhbmRsZUxpa2V9XG4gICAgICAgICAgICBvblNoYXJlPXtoYW5kbGVTaGFyZX1cbiAgICAgICAgICAgIG9uQm9va21hcms9e2hhbmRsZUJvb2ttYXJrfVxuICAgICAgICAgICAgb25Db21tZW50PXtoYW5kbGVDb21tZW50fVxuICAgICAgICAgICAgb25WaWV3RGV0YWlscz17aGFuZGxlVmlld0RldGFpbHN9XG4gICAgICAgICAgICBpc0xpa2VkPXtpdGVtLnVzZXJJbnRlcmFjdGlvbi5saWtlZH1cbiAgICAgICAgICAgIGlzQm9va21hcmtlZD17aXRlbS51c2VySW50ZXJhY3Rpb24uYm9va21hcmtlZH1cbiAgICAgICAgICAgIHNob3dFbmdhZ2VtZW50PXt0cnVlfVxuICAgICAgICAgICAgZW5hYmxlSGFwdGljcz17ZW5hYmxlSGFwdGljc31cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvSW5maW5pdGVTY3JvbGw+XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXSwibmFtZXMiOlsiRW5oYW5jZWRTb2NpYWxGZWVkIiwidXNlcklkIiwicHJlZmVyZW5jZXMiLCJfcHJlZmVyZW5jZXMiLCJvbkxpa2UiLCJvblNoYXJlIiwib25Cb29rbWFyayIsIm9uQ29tbWVudCIsIm9uVmlld0RldGFpbHMiLCJjbGFzc05hbWUiLCJlbmFibGVQZXJzb25hbGl6YXRpb24iLCJlbmFibGVSZWFsVGltZVVwZGF0ZXMiLCJlbmFibGVBbmFseXRpY3MiLCJlbmFibGVIYXB0aWNzIiwic2hvd1RyZW5kaW5nIiwiZmVlZHMiLCJ1c2VGZWVkcyIsImxvYWRGZWVkcyIsImxpa2VGZWVkIiwiYm9va21hcmtGZWVkIiwicmVmcmVzaEZlZWRzIiwidXNlRmVlZHNBY3Rpb25zIiwiaXNMb2FkaW5nIiwidXNlRmVlZHNMb2FkaW5nIiwiZmVlZEl0ZW1zIiwicGFnZSIsInNldFBhZ2UiLCJ1c2VTdGF0ZSIsImhhc01vcmUiLCJzZXRIYXNNb3JlIiwicGVyc29uYWxpemF0aW9uU2NvcmUiLCJzZXRQZXJzb25hbGl6YXRpb25TY29yZSIsImxhc3RVcGRhdGUiLCJzZXRMYXN0VXBkYXRlIiwiRGF0ZSIsIndzUmVmIiwidXNlUmVmIiwicmVmcmVzaEludGVydmFsUmVmIiwibG9hZEZlZWRJdGVtcyIsInVzZUNhbGxiYWNrIiwicGFnZU51bSIsImlzUmVmcmVzaCIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsInVzZUVmZmVjdCIsIndzIiwiV2ViU29ja2V0IiwiY3VycmVudCIsIm9ubWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsImxhYmVsIiwibG9nIiwiaXRlbSIsInNldEludGVydmFsIiwiY2xvc2UiLCJjbGVhckludGVydmFsIiwidHJhY2tFdmVudCIsIndpbmRvdyIsImd0YWciLCJldmVudF9jYXRlZ29yeSIsImV2ZW50X2xhYmVsIiwicGxhdGZvcm0iLCJ2YWx1ZSIsImFuYWx5dGljcyIsInRyYWNrIiwiaGFuZGxlIiwidXJsIiwicmVwcmVzZW50YXRpdmUiLCJ3YXJuIiwiaGFuZGxlTGlrZSIsIml0ZW1JZCIsImhhbmRsZUJvb2ttYXJrIiwiaGFuZGxlU2hhcmUiLCJuYXZpZ2F0b3IiLCJzaGFyZSIsImZpbmQiLCJpZCIsInRpdGxlIiwidGV4dCIsInN1bW1hcnkiLCJzb3VyY2UiLCJsb2NhdGlvbiIsImhyZWYiLCJoYW5kbGVDb21tZW50IiwiaGFuZGxlVmlld0RldGFpbHMiLCJoYW5kbGVSZWZyZXNoIiwiaGFuZGxlTG9hZE1vcmUiLCJmb3JtYXRMYXN0VXBkYXRlIiwiZGF0ZSIsIm5vdyIsImRpZmZJbk1pbnV0ZXMiLCJNYXRoIiwiZmxvb3IiLCJnZXRUaW1lIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZGl2IiwiaDIiLCJwIiwic3BhbiIsIlNwYXJrbGVzSWNvbiIsIkNsb2NrSWNvbiIsIkluZmluaXRlU2Nyb2xsIiwib25Mb2FkTW9yZSIsIm9uUmVmcmVzaCIsImVuYWJsZVNjcm9sbFRvVG9wIiwiZW5hYmxlUHVsbFRvUmVmcmVzaCIsImxvYWRpbmdDb21wb25lbnQiLCJlbmRDb21wb25lbnQiLCJtYXAiLCJGZWVkSXRlbSIsImlzTGlrZWQiLCJ1c2VySW50ZXJhY3Rpb24iLCJsaWtlZCIsImlzQm9va21hcmtlZCIsImJvb2ttYXJrZWQiLCJzaG93RW5nYWdlbWVudCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Q0FhQyxHQUVEOzs7OzsrQkFtQ0E7OztlQUF3QkE7Ozs7eUJBOUJqQjsrREFDeUQ7d0JBT3pEO2lFQUVjO3VFQUNNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CWixTQUFTQSxtQkFBbUIsRUFDekNDLE1BQU0sRUFDTkMsYUFBYUMsWUFBWSxFQUN6QkMsTUFBTSxFQUNOQyxPQUFPLEVBQ1BDLFVBQVUsRUFDVkMsU0FBUyxFQUNUQyxhQUFhLEVBQ2JDLFlBQVksRUFBRSxFQUNkQyx3QkFBd0IsSUFBSSxFQUM1QkMsd0JBQXdCLElBQUksRUFDNUJDLGtCQUFrQixLQUFLLEVBQ3ZCQyxnQkFBZ0IsSUFBSSxFQUNwQkMsZUFBZSxJQUFJLEVBQ0s7SUFDeEIsTUFBTUMsUUFBUUMsSUFBQUEsZ0JBQVE7SUFDdEIsTUFBTSxFQUFFQyxTQUFTLEVBQUVDLFFBQVEsRUFBRUMsWUFBWSxFQUFFQyxZQUFZLEVBQUUsR0FBR0MsSUFBQUEsdUJBQWU7SUFDM0UsTUFBTUMsWUFBWUMsSUFBQUEsdUJBQWU7SUFFakMseUNBQXlDO0lBQ3pDLE1BQU1DLFlBQVlUO0lBQ2xCLE1BQU0sQ0FBQ1UsTUFBTUMsUUFBUSxHQUFHQyxJQUFBQSxlQUFRLEVBQUM7SUFDakMsTUFBTSxDQUFDQyxTQUFTQyxXQUFXLEdBQUdGLElBQUFBLGVBQVEsRUFBQztJQUN2QyxNQUFNLENBQUNHLHNCQUFzQkMs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