3dd6368cfae4ef68c65eb6456201c087
/**
 * Ranked Choice Voting Strategy
 * 
 * Implements ranked choice voting where voters rank options in order of preference.
 * Uses instant runoff voting (IRV) to determine the winner.
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "RankedStrategy", {
    enumerable: true,
    get: function() {
        return RankedStrategy;
    }
});
const _logger = require("../../utils/logger");
class RankedStrategy {
    getVotingMethod() {
        return "ranked";
    }
    async validateVote(request, poll) {
        try {
            const voteData = request.voteData;
            // Validate rankings array exists
            if (!voteData.rankings || !Array.isArray(voteData.rankings)) {
                return {
                    valid: false,
                    isValid: false,
                    error: "Rankings must be an array",
                    errors: [
                        "Rankings must be an array"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate rankings array is not empty
            if (voteData.rankings.length === 0) {
                return {
                    valid: false,
                    isValid: false,
                    error: "At least one ranking is required",
                    errors: [
                        "At least one ranking is required"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate all rankings are valid integers
            for (const ranking of voteData.rankings){
                if (typeof ranking !== "number" || !Number.isInteger(ranking)) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Rankings must be integers",
                        errors: [
                            "Rankings must be integers"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                if (ranking < 0 || ranking >= poll.options.length) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Invalid option selected",
                        errors: [
                            "Invalid option selected"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
            }
            // Check for duplicate rankings
            const uniqueRankings = new Set(voteData.rankings);
            if (uniqueRankings.size !== voteData.rankings.length) {
                return {
                    valid: false,
                    isValid: false,
                    error: "Duplicate rankings are not allowed",
                    errors: [
                        "Duplicate rankings are not allowed"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Check maximum rankings limit
            const maxRankings = poll.maxChoices || poll.options.length;
            if (voteData.rankings.length > maxRankings) {
                return {
                    valid: false,
                    isValid: false,
                    error: `Maximum ${maxRankings} rankings allowed`,
                    errors: [
                        `Maximum ${maxRankings} rankings allowed`
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            (0, _logger.devLog)("Ranked vote validated successfully", {
                pollId: request.pollId,
                rankings: voteData.rankings,
                userId: request.userId
            });
            return {
                valid: true,
                isValid: true,
                requiresAuthentication: false,
                requiresTokens: false
            };
        } catch (error) {
            (0, _logger.devLog)("Ranked vote validation error:", error);
            return {
                valid: false,
                isValid: false,
                error: "Ranked vote validation failed",
                errors: [
                    "Ranked vote validation failed"
                ],
                requiresAuthentication: false,
                requiresTokens: false
            };
        }
    }
    async processVote(request, poll) {
        try {
            const voteData = request.voteData;
            // Create vote data for storage
            const voteRecord = {
                id: `vote_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                pollId: request.pollId,
                userId: request.userId,
                voteData: {
                    rankings: voteData.rankings
                },
                timestamp: new Date().toISOString(),
                ipAddress: request.ipAddress,
                userAgent: request.userAgent
            };
            (0, _logger.devLog)("Ranked vote processed successfully", {
                pollId: request.pollId,
                userId: request.userId,
                rankings: voteData.rankings,
                voteId: voteRecord.id
            });
            return {
                success: true,
                voteId: voteRecord.id,
                message: "Vote recorded successfully",
                pollId: request.pollId
            };
        } catch (error) {
            (0, _logger.devLog)("Ranked vote processing error:", error);
            return {
                success: false,
                error: "Failed to process ranked vote",
                message: "Failed to process ranked vote",
                pollId: request.pollId
            };
        }
    }
    async calculateResults(poll, votes) {
        try {
            const startTime = Date.now();
            // Initialize tracking objects
            const optionVotes = {};
            const optionPercentages = {};
            // Initialize all options with zero scores
            poll.options.forEach((option)=>{
                optionVotes[option.id] = 0;
                optionPercentages[option.id] = 0;
            });
            // Process each vote to count first choices
            votes.forEach((vote)=>{
                if (vote.voteData.rankings && vote.voteData.rankings.length > 0) {
                    const firstChoice = vote.voteData.rankings[0];
                    const optionId = poll.options[firstChoice]?.id;
                    if (optionId) {
                        optionVotes[optionId]++;
                    }
                }
            });
            const totalVotes = votes.length;
            // Calculate percentages
            if (totalVotes > 0) {
                Object.keys(optionVotes).forEach((optionId)=>{
                    const votes = optionVotes[optionId];
                    optionPercentages[optionId] = votes / totalVotes * 100;
                });
            }
            // Find winner (highest first choice votes)
            let winner;
            let winnerVotes = 0;
            let winnerPercentage = 0;
            if (totalVotes > 0) {
                Object.entries(optionVotes).forEach(([optionId, votes])=>{
                    if (votes > winnerVotes) {
                        winner = optionId;
                        winnerVotes = votes;
                        winnerPercentage = optionPercentages[optionId] || 0;
                    }
                });
            }
            const results = {
                winner,
                winnerVotes,
                winnerPercentage,
                optionVotes,
                optionPercentages,
                abstentions: 0,
                abstentionPercentage: 0
            };
            (0, _logger.devLog)("Ranked results calculated", {
                pollId: poll.id,
                totalVotes,
                winner,
                winnerVotes,
                winnerPercentage,
                calculationTime: Date.now() - startTime
            });
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes,
                participationRate: totalVotes / 100,
                results,
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: Date.now() - startTime,
                    method: "ranked"
                }
            };
        } catch (error) {
            (0, _logger.devLog)("Ranked results calculation error:", error);
            // Return empty results on error
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes: 0,
                participationRate: 0,
                results: {
                    winner: undefined,
                    winnerVotes: 0,
                    winnerPercentage: 0,
                    optionVotes: {},
                    optionPercentages: {},
                    abstentions: 0,
                    abstentionPercentage: 0
                },
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: 0,
                    error: error instanceof Error ? error.message : "Unknown error"
                }
            };
        }
    }
    getConfiguration() {
        return {
            method: "ranked",
            description: "Voters rank options in order of preference",
            allowsMultipleSelections: true,
            requiresRanking: true,
            maxSelections: "configurable",
            algorithm: "instant runoff voting"
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvdm90ZS9zdHJhdGVnaWVzL3JhbmtlZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJhbmtlZCBDaG9pY2UgVm90aW5nIFN0cmF0ZWd5XG4gKiBcbiAqIEltcGxlbWVudHMgcmFua2VkIGNob2ljZSB2b3Rpbmcgd2hlcmUgdm90ZXJzIHJhbmsgb3B0aW9ucyBpbiBvcmRlciBvZiBwcmVmZXJlbmNlLlxuICogVXNlcyBpbnN0YW50IHJ1bm9mZiB2b3RpbmcgKElSVikgdG8gZGV0ZXJtaW5lIHRoZSB3aW5uZXIuXG4gKiBcbiAqIENyZWF0ZWQ6IFNlcHRlbWJlciAxNSwgMjAyNVxuICogVXBkYXRlZDogU2VwdGVtYmVyIDE1LCAyMDI1XG4gKi9cblxuaW1wb3J0IHsgZGV2TG9nIH0gZnJvbSAnQC9saWIvdXRpbHMvbG9nZ2VyJztcbmltcG9ydCB7IHdpdGhPcHRpb25hbCB9IGZyb20gJ0AvbGliL3V0aWxzL29iamVjdHMnO1xuXG5pbXBvcnQgdHlwZSB7IFxuICBWb3RpbmdTdHJhdGVneSwgXG4gIFZvdGVSZXF1ZXN0LCBcbiAgVm90ZVJlc3BvbnNlLCBcbiAgVm90ZVZhbGlkYXRpb24sIFxuICBQb2xsRGF0YSwgXG4gIFZvdGVEYXRhLCBcbiAgUmVzdWx0c0RhdGEsXG4gIFZvdGluZ01ldGhvZCxcbiAgUG9sbFJlc3VsdHNcbn0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUmFua2VkU3RyYXRlZ3kgaW1wbGVtZW50cyBWb3RpbmdTdHJhdGVneSB7XG4gIFxuICBnZXRWb3RpbmdNZXRob2QoKTogVm90aW5nTWV0aG9kIHtcbiAgICByZXR1cm4gJ3JhbmtlZCc7XG4gIH1cblxuICBhc3luYyB2YWxpZGF0ZVZvdGUocmVxdWVzdDogVm90ZVJlcXVlc3QsIHBvbGw6IFBvbGxEYXRhKTogUHJvbWlzZTxWb3RlVmFsaWRhdGlvbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHJlcXVlc3Qudm90ZURhdGE7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHJhbmtpbmdzIGFycmF5IGV4aXN0c1xuICAgICAgaWYgKCF2b3RlRGF0YS5yYW5raW5ncyB8fCAhQXJyYXkuaXNBcnJheSh2b3RlRGF0YS5yYW5raW5ncykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdSYW5raW5ncyBtdXN0IGJlIGFuIGFycmF5JyxcbiAgICAgICAgICBlcnJvcnM6IFsnUmFua2luZ3MgbXVzdCBiZSBhbiBhcnJheSddLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSByYW5raW5ncyBhcnJheSBpcyBub3QgZW1wdHlcbiAgICAgIGlmICh2b3RlRGF0YS5yYW5raW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdBdCBsZWFzdCBvbmUgcmFua2luZyBpcyByZXF1aXJlZCcsXG4gICAgICAgICAgZXJyb3JzOiBbJ0F0IGxlYXN0IG9uZSByYW5raW5nIGlzIHJlcXVpcmVkJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbCByYW5raW5ncyBhcmUgdmFsaWQgaW50ZWdlcnNcbiAgICAgIGZvciAoY29uc3QgcmFua2luZyBvZiB2b3RlRGF0YS5yYW5raW5ncykge1xuICAgICAgICBpZiAodHlwZW9mIHJhbmtpbmcgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKHJhbmtpbmcpKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdSYW5raW5ncyBtdXN0IGJlIGludGVnZXJzJyxcbiAgICAgICAgICAgIGVycm9yczogWydSYW5raW5ncyBtdXN0IGJlIGludGVnZXJzJ10sXG4gICAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmFua2luZyA8IDAgfHwgcmFua2luZyA+PSBwb2xsLm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIG9wdGlvbiBzZWxlY3RlZCcsXG4gICAgICAgICAgICBlcnJvcnM6IFsnSW52YWxpZCBvcHRpb24gc2VsZWN0ZWQnXSxcbiAgICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIHJhbmtpbmdzXG4gICAgICBjb25zdCB1bmlxdWVSYW5raW5ncyA9IG5ldyBTZXQodm90ZURhdGEucmFua2luZ3MpO1xuICAgICAgaWYgKHVuaXF1ZVJhbmtpbmdzLnNpemUgIT09IHZvdGVEYXRhLnJhbmtpbmdzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0R1cGxpY2F0ZSByYW5raW5ncyBhcmUgbm90IGFsbG93ZWQnLFxuICAgICAgICAgIGVycm9yczogWydEdXBsaWNhdGUgcmFua2luZ3MgYXJlIG5vdCBhbGxvd2VkJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIG1heGltdW0gcmFua2luZ3MgbGltaXRcbiAgICAgIGNvbnN0IG1heFJhbmtpbmdzID0gcG9sbC5tYXhDaG9pY2VzIHx8IHBvbGwub3B0aW9ucy5sZW5ndGg7XG4gICAgICBpZiAodm90ZURhdGEucmFua2luZ3MubGVuZ3RoID4gbWF4UmFua2luZ3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGBNYXhpbXVtICR7bWF4UmFua2luZ3N9IHJhbmtpbmdzIGFsbG93ZWRgLFxuICAgICAgICAgIGVycm9yczogW2BNYXhpbXVtICR7bWF4UmFua2luZ3N9IHJhbmtpbmdzIGFsbG93ZWRgXSxcbiAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZGV2TG9nKCdSYW5rZWQgdm90ZSB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkLFxuICAgICAgICByYW5raW5nczogdm90ZURhdGEucmFua2luZ3MsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ1JhbmtlZCB2b3RlIHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdSYW5rZWQgdm90ZSB2YWxpZGF0aW9uIGZhaWxlZCcsXG4gICAgICAgIGVycm9yczogWydSYW5rZWQgdm90ZSB2YWxpZGF0aW9uIGZhaWxlZCddLFxuICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3NWb3RlKHJlcXVlc3Q6IFZvdGVSZXF1ZXN0LCBwb2xsOiBQb2xsRGF0YSk6IFByb21pc2U8Vm90ZVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZvdGVEYXRhID0gcmVxdWVzdC52b3RlRGF0YTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHZvdGUgZGF0YSBmb3Igc3RvcmFnZVxuICAgICAgY29uc3Qgdm90ZVJlY29yZDogVm90ZURhdGEgPSB7XG4gICAgICAgIGlkOiBgdm90ZV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICAgIHZvdGVEYXRhOiB7XG4gICAgICAgICAgcmFua2luZ3M6IHZvdGVEYXRhLnJhbmtpbmdzXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBpcEFkZHJlc3M6IHJlcXVlc3QuaXBBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IHJlcXVlc3QudXNlckFnZW50XG4gICAgICB9O1xuXG4gICAgICBkZXZMb2coJ1JhbmtlZCB2b3RlIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHknLCB7XG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICAgIHJhbmtpbmdzOiB2b3RlRGF0YS5yYW5raW5ncyxcbiAgICAgICAgdm90ZUlkOiB2b3RlUmVjb3JkLmlkXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdm90ZUlkOiB2b3RlUmVjb3JkLmlkLFxuICAgICAgICBtZXNzYWdlOiAnVm90ZSByZWNvcmRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRldkxvZygnUmFua2VkIHZvdGUgcHJvY2Vzc2luZyBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyByYW5rZWQgdm90ZScsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gcHJvY2VzcyByYW5rZWQgdm90ZScsXG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWRcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2FsY3VsYXRlUmVzdWx0cyhwb2xsOiBQb2xsRGF0YSwgdm90ZXM6IFZvdGVEYXRhW10pOiBQcm9taXNlPFJlc3VsdHNEYXRhPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIC8vIEluaXRpYWxpemUgdHJhY2tpbmcgb2JqZWN0c1xuICAgICAgY29uc3Qgb3B0aW9uVm90ZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICAgIGNvbnN0IG9wdGlvblBlcmNlbnRhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG5cbiAgICAgIC8vIEluaXRpYWxpemUgYWxsIG9wdGlvbnMgd2l0aCB6ZXJvIHNjb3Jlc1xuICAgICAgcG9sbC5vcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgb3B0aW9uVm90ZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbi5pZF0gPSAwO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB2b3RlIHRvIGNvdW50IGZpcnN0IGNob2ljZXNcbiAgICAgIHZvdGVzLmZvckVhY2godm90ZSA9PiB7XG4gICAgICAgIGlmICh2b3RlLnZvdGVEYXRhLnJhbmtpbmdzICYmIHZvdGUudm90ZURhdGEucmFua2luZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGZpcnN0Q2hvaWNlID0gdm90ZS52b3RlRGF0YS5yYW5raW5nc1swXTtcbiAgICAgICAgICBjb25zdCBvcHRpb25JZCA9IHBvbGwub3B0aW9uc1tmaXJzdENob2ljZV0/LmlkO1xuICAgICAgICAgIGlmIChvcHRpb25JZCkge1xuICAgICAgICAgICAgb3B0aW9uVm90ZXNbb3B0aW9uSWRdKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdG90YWxWb3RlcyA9IHZvdGVzLmxlbmd0aDtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgICBpZiAodG90YWxWb3RlcyA+IDApIHtcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9uVm90ZXMpLmZvckVhY2gob3B0aW9uSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IHZvdGVzID0gb3B0aW9uVm90ZXNbb3B0aW9uSWRdO1xuICAgICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbklkXSA9ICh2b3RlcyAvIHRvdGFsVm90ZXMpICogMTAwO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB3aW5uZXIgKGhpZ2hlc3QgZmlyc3QgY2hvaWNlIHZvdGVzKVxuICAgICAgbGV0IHdpbm5lcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgbGV0IHdpbm5lclZvdGVzID0gMDtcbiAgICAgIGxldCB3aW5uZXJQZXJjZW50YWdlID0gMDtcblxuICAgICAgaWYgKHRvdGFsVm90ZXMgPiAwKSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvblZvdGVzKS5mb3JFYWNoKChbb3B0aW9uSWQsIHZvdGVzXSkgPT4ge1xuICAgICAgICAgIGlmICh2b3RlcyA+IHdpbm5lclZvdGVzKSB7XG4gICAgICAgICAgICB3aW5uZXIgPSBvcHRpb25JZDtcbiAgICAgICAgICAgIHdpbm5lclZvdGVzID0gdm90ZXM7XG4gICAgICAgICAgICB3aW5uZXJQZXJjZW50YWdlID0gb3B0aW9uUGVyY2VudGFnZXNbb3B0aW9uSWRdIHx8IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0czogUG9sbFJlc3VsdHMgPSB7XG4gICAgICAgIHdpbm5lcixcbiAgICAgICAgd2lubmVyVm90ZXMsXG4gICAgICAgIHdpbm5lclBlcmNlbnRhZ2UsXG4gICAgICAgIG9wdGlvblZvdGVzLFxuICAgICAgICBvcHRpb25QZXJjZW50YWdlcyxcbiAgICAgICAgYWJzdGVudGlvbnM6IDAsXG4gICAgICAgIGFic3RlbnRpb25QZXJjZW50YWdlOiAwXG4gICAgICB9O1xuXG4gICAgICBkZXZMb2coJ1JhbmtlZCByZXN1bHRzIGNhbGN1bGF0ZWQnLCB7XG4gICAgICAgIHBvbGxJZDogcG9sbC5pZCxcbiAgICAgICAgdG90YWxWb3RlcyxcbiAgICAgICAgd2lubmVyLFxuICAgICAgICB3aW5uZXJWb3RlcyxcbiAgICAgICAgd2lubmVyUGVyY2VudGFnZSxcbiAgICAgICAgY2FsY3VsYXRpb25UaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9sbElkOiBwb2xsLmlkLFxuICAgICAgICB2b3RpbmdNZXRob2Q6IHBvbGwudm90aW5nTWV0aG9kLFxuICAgICAgICB0b3RhbFZvdGVzLFxuICAgICAgICBwYXJ0aWNpcGF0aW9uUmF0ZTogdG90YWxWb3RlcyAvIDEwMCwgLy8gTW9jayBwYXJ0aWNpcGF0aW9uIHJhdGVcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgY2FsY3VsYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY2FsY3VsYXRpb25UaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIG1ldGhvZDogJ3JhbmtlZCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ1JhbmtlZCByZXN1bHRzIGNhbGN1bGF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIGVtcHR5IHJlc3VsdHMgb24gZXJyb3JcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvbGxJZDogcG9sbC5pZCxcbiAgICAgICAgdm90aW5nTWV0aG9kOiBwb2xsLnZvdGluZ01ldGhvZCxcbiAgICAgICAgdG90YWxWb3RlczogMCxcbiAgICAgICAgcGFydGljaXBhdGlvblJhdGU6IDAsXG4gICAgICAgIHJlc3VsdHM6IHtcbiAgICAgICAgICB3aW5uZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgICB3aW5uZXJWb3RlczogMCxcbiAgICAgICAgICB3aW5uZXJQZXJjZW50YWdlOiAwLFxuICAgICAgICAgIG9wdGlvblZvdGVzOiB7fSxcbiAgICAgICAgICBvcHRpb25QZXJjZW50YWdlczoge30sXG4gICAgICAgICAgYWJzdGVudGlvbnM6IDAsXG4gICAgICAgICAgYWJzdGVudGlvblBlcmNlbnRhZ2U6IDBcbiAgICAgICAgfSxcbiAgICAgICAgY2FsY3VsYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY2FsY3VsYXRpb25UaW1lOiAwLFxuICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGdldENvbmZpZ3VyYXRpb24oKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICAgIHJldHVybiB7XG4gICAgICBtZXRob2Q6ICdyYW5rZWQnLFxuICAgICAgZGVzY3JpcHRpb246ICdWb3RlcnMgcmFuayBvcHRpb25zIGluIG9yZGVyIG9mIHByZWZlcmVuY2UnLFxuICAgICAgYWxsb3dzTXVsdGlwbGVTZWxlY3Rpb25zOiB0cnVlLFxuICAgICAgcmVxdWlyZXNSYW5raW5nOiB0cnVlLFxuICAgICAgbWF4U2VsZWN0aW9uczogJ2NvbmZpZ3VyYWJsZScsXG4gICAgICBhbGdvcml0aG06ICdpbnN0YW50IHJ1bm9mZiB2b3RpbmcnXG4gICAgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJSYW5rZWRTdHJhdGVneSIsImdldFZvdGluZ01ldGhvZCIsInZhbGlkYXRlVm90ZSIsInJlcXVlc3QiLCJwb2xsIiwidm90ZURhdGEiLCJyYW5raW5ncyIsIkFycmF5IiwiaXNBcnJheSIsInZhbGlkIiwiaXNWYWxpZCIsImVycm9yIiwiZXJyb3JzIiwicmVxdWlyZXNBdXRoZW50aWNhdGlvbiIsInJlcXVpcmVzVG9rZW5zIiwibGVuZ3RoIiwicmFua2luZyIsIk51bWJlciIsImlzSW50ZWdlciIsIm9wdGlvbnMiLCJ1bmlxdWVSYW5raW5ncyIsIlNldCIsInNpemUiLCJtYXhSYW5raW5ncyIsIm1heENob2ljZXMiLCJkZXZMb2ciLCJwb2xsSWQiLCJ1c2VySWQiLCJwcm9jZXNzVm90ZSIsInZvdGVSZWNvcmQiLCJpZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsInZvdGVJZCIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiY2FsY3VsYXRlUmVzdWx0cyIsInZvdGVzIiwic3RhcnRUaW1lIiwib3B0aW9uVm90ZXMiLCJvcHRpb25QZXJjZW50YWdlcyIsImZvckVhY2giLCJvcHRpb24iLCJ2b3RlIiwiZmlyc3RDaG9pY2UiLCJvcHRpb25JZCIsInRvdGFsVm90ZXMiLCJPYmplY3QiLCJrZXlzIiwid2lubmVyIiwid2lubmVyVm90ZXMiLCJ3aW5uZXJQZXJjZW50YWdlIiwiZW50cmllcyIsInJlc3VsdHMiLCJhYnN0ZW50aW9ucyIsImFic3RlbnRpb25QZXJjZW50YWdlIiwiY2FsY3VsYXRpb25UaW1lIiwidm90aW5nTWV0aG9kIiwicGFydGljaXBhdGlvblJhdGUiLCJjYWxjdWxhdGVkQXQiLCJtZXRhZGF0YSIsIm1ldGhvZCIsInVuZGVmaW5lZCIsIkVycm9yIiwiZ2V0Q29uZmlndXJhdGlvbiIsImRlc2NyaXB0aW9uIiwiYWxsb3dzTXVsdGlwbGVTZWxlY3Rpb25zIiwicmVxdWlyZXNSYW5raW5nIiwibWF4U2VsZWN0aW9ucyIsImFsZ29yaXRobSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0NBUUM7Ozs7K0JBaUJZQTs7O2VBQUFBOzs7d0JBZlU7QUFlaEIsTUFBTUE7SUFFWEMsa0JBQWdDO1FBQzlCLE9BQU87SUFDVDtJQUVBLE1BQU1DLGFBQWFDLE9BQW9CLEVBQUVDLElBQWMsRUFBMkI7UUFDaEYsSUFBSTtZQUNGLE1BQU1DLFdBQVdGLFFBQVFFLFFBQVE7WUFFakMsaUNBQWlDO1lBQ2pDLElBQUksQ0FBQ0EsU0FBU0Ms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