b3ead3a9e2d1409dee4096543229308b
/**
 * Unit Tests - Voting Algorithms (70% of tests)
 * 
 * These tests focus on individual functions and algorithms.
 * Fast, isolated, and focused on business logic.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _ranked = require("../../../../../lib/vote/strategies/ranked");
const _singlechoice = require("../../../../../lib/vote/strategies/single-choice");
(0, _globals.describe)("Unit Tests - Voting Algorithms", ()=>{
    (0, _globals.describe)("Ranked Choice Voting Algorithm", ()=>{
        (0, _globals.it)("should calculate instant-runoff voting correctly", ()=>{
            // Test data for ranked choice voting
            const votes = [
                {
                    user_id: "user1",
                    rankings: [
                        1,
                        2,
                        3
                    ]
                },
                {
                    user_id: "user2",
                    rankings: [
                        1,
                        3,
                        2
                    ]
                },
                {
                    user_id: "user3",
                    rankings: [
                        2,
                        1,
                        3
                    ]
                },
                {
                    user_id: "user4",
                    rankings: [
                        2,
                        3,
                        1
                    ]
                },
                {
                    user_id: "user5",
                    rankings: [
                        3,
                        1,
                        2
                    ]
                }
            ];
            const options = [
                {
                    id: "option1",
                    text: "Option A"
                },
                {
                    id: "option2",
                    text: "Option B"
                },
                {
                    id: "option3",
                    text: "Option C"
                }
            ];
            const result = (0, _ranked.calculateResults)(votes, options);
            // Test the algorithm logic
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.winner).toBeDefined();
            (0, _globals.expect)(result.rounds).toBeDefined();
            (0, _globals.expect)(Array.isArray(result.rounds)).toBe(true);
        });
        (0, _globals.it)("should handle ties correctly", ()=>{
            const votes = [
                {
                    user_id: "user1",
                    rankings: [
                        1,
                        2
                    ]
                },
                {
                    user_id: "user2",
                    rankings: [
                        2,
                        1
                    ]
                }
            ];
            const options = [
                {
                    id: "option1",
                    text: "Option A"
                },
                {
                    id: "option2",
                    text: "Option B"
                }
            ];
            const result = (0, _ranked.calculateResults)(votes, options);
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.winner).toBeDefined();
        });
        (0, _globals.it)("should handle single candidate correctly", ()=>{
            const votes = [
                {
                    user_id: "user1",
                    rankings: [
                        1
                    ]
                }
            ];
            const options = [
                {
                    id: "option1",
                    text: "Option A"
                }
            ];
            const result = (0, _ranked.calculateResults)(votes, options);
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.winner).toBe("option1");
        });
    });
    (0, _globals.describe)("Single Choice Voting Algorithm", ()=>{
        (0, _globals.it)("should calculate simple majority correctly", ()=>{
            const votes = [
                {
                    user_id: "user1",
                    option_index: 0
                },
                {
                    user_id: "user2",
                    option_index: 0
                },
                {
                    user_id: "user3",
                    option_index: 1
                },
                {
                    user_id: "user4",
                    option_index: 1
                },
                {
                    user_id: "user5",
                    option_index: 1
                }
            ];
            const options = [
                {
                    id: "option1",
                    text: "Option A"
                },
                {
                    id: "option2",
                    text: "Option B"
                }
            ];
            const result = (0, _singlechoice.calculateSingleChoiceResults)(votes, options);
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.winner).toBe("option2"); // Option B wins with 3 votes
            (0, _globals.expect)(result.results[1].votes).toBe(3);
            (0, _globals.expect)(result.results[0].votes).toBe(2);
        });
        (0, _globals.it)("should handle no votes correctly", ()=>{
            const votes = [];
            const options = [
                {
                    id: "option1",
                    text: "Option A"
                },
                {
                    id: "option2",
                    text: "Option B"
                }
            ];
            const result = (0, _singlechoice.calculateSingleChoiceResults)(votes, options);
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.winner).toBeNull();
            (0, _globals.expect)(result.results[0].votes).toBe(0);
            (0, _globals.expect)(result.results[1].votes).toBe(0);
        });
        (0, _globals.it)("should handle ties correctly", ()=>{
            const votes = [
                {
                    user_id: "user1",
                    option_index: 0
                },
                {
                    user_id: "user2",
                    option_index: 1
                }
            ];
            const options = [
                {
                    id: "option1",
                    text: "Option A"
                },
                {
                    id: "option2",
                    text: "Option B"
                }
            ];
            const result = (0, _singlechoice.calculateSingleChoiceResults)(votes, options);
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.winner).toBeNull(); // Tie
            (0, _globals.expect)(result.results[0].votes).toBe(1);
            (0, _globals.expect)(result.results[1].votes).toBe(1);
        });
    });
    (0, _globals.describe)("Vote Validation", ()=>{
        (0, _globals.it)("should validate vote data structure", ()=>{
            const validVote = {
                user_id: "user1",
                option_index: 0,
                created_at: new Date().toISOString()
            };
            // Test validation logic
            (0, _globals.expect)(validVote.user_id).toBeDefined();
            (0, _globals.expect)(validVote.option_index).toBeDefined();
            (0, _globals.expect)(validVote.created_at).toBeDefined();
            (0, _globals.expect)(typeof validVote.user_id).toBe("string");
            (0, _globals.expect)(typeof validVote.option_index).toBe("number");
            (0, _globals.expect)(typeof validVote.created_at).toBe("string");
        });
        (0, _globals.it)("should reject invalid vote data", ()=>{
            const invalidVote = {
                user_id: "",
                option_index: -1,
                created_at: "invalid-date"
            };
            // Test validation logic
            (0, _globals.expect)(invalidVote.user_id).toBe("");
            (0, _globals.expect)(invalidVote.option_index).toBe(-1);
            (0, _globals.expect)(invalidVote.created_at).toBe("invalid-date");
        });
    });
    (0, _globals.describe)("Result Calculations", ()=>{
        (0, _globals.it)("should calculate percentages correctly", ()=>{
            const totalVotes = 100;
            const optionVotes = 25;
            const expectedPercentage = 25;
            const percentage = optionVotes / totalVotes * 100;
            (0, _globals.expect)(percentage).toBe(expectedPercentage);
        });
        (0, _globals.it)("should handle zero total votes", ()=>{
            const totalVotes = 0;
            const optionVotes = 0;
            const percentage = totalVotes > 0 ? optionVotes / totalVotes * 100 : 0;
            (0, _globals.expect)(percentage).toBe(0);
        });
        (0, _globals.it)("should round percentages correctly", ()=>{
            const totalVotes = 3;
            const optionVotes = 1;
            const expectedPercentage = 33.33;
            const percentage = Math.round(optionVotes / totalVotes * 100 * 100) / 100;
            (0, _globals.expect)(percentage).toBe(expectedPercentage);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvbGliL3ZvdGUvdm90aW5nLWFsZ29yaXRobXMudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaXQgVGVzdHMgLSBWb3RpbmcgQWxnb3JpdGhtcyAoNzAlIG9mIHRlc3RzKVxuICogXG4gKiBUaGVzZSB0ZXN0cyBmb2N1cyBvbiBpbmRpdmlkdWFsIGZ1bmN0aW9ucyBhbmQgYWxnb3JpdGhtcy5cbiAqIEZhc3QsIGlzb2xhdGVkLCBhbmQgZm9jdXNlZCBvbiBidXNpbmVzcyBsb2dpYy5cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuXG4vLyBJbXBvcnQgdm90aW5nIGFsZ29yaXRobXNcbmltcG9ydCB7IGNhbGN1bGF0ZVJlc3VsdHMgfSBmcm9tICdAL2xpYi92b3RlL3N0cmF0ZWdpZXMvcmFua2VkJztcbmltcG9ydCB7IGNhbGN1bGF0ZVNpbmdsZUNob2ljZVJlc3VsdHMgfSBmcm9tICdAL2xpYi92b3RlL3N0cmF0ZWdpZXMvc2luZ2xlLWNob2ljZSc7XG5cbmRlc2NyaWJlKCdVbml0IFRlc3RzIC0gVm90aW5nIEFsZ29yaXRobXMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdSYW5rZWQgQ2hvaWNlIFZvdGluZyBBbGdvcml0aG0nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgaW5zdGFudC1ydW5vZmYgdm90aW5nIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgZGF0YSBmb3IgcmFua2VkIGNob2ljZSB2b3RpbmdcbiAgICAgIGNvbnN0IHZvdGVzID0gW1xuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMScsIHJhbmtpbmdzOiBbMSwgMiwgM10gfSwgLy8gQSwgQiwgQ1xuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMicsIHJhbmtpbmdzOiBbMSwgMywgMl0gfSwgLy8gQSwgQywgQlxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMycsIHJhbmtpbmdzOiBbMiwgMSwgM10gfSwgLy8gQiwgQSwgQ1xuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyNCcsIHJhbmtpbmdzOiBbMiwgMywgMV0gfSwgLy8gQiwgQywgQVxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyNScsIHJhbmtpbmdzOiBbMywgMSwgMl0gfSwgLy8gQywgQSwgQlxuICAgICAgXTtcblxuICAgICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgICAgeyBpZDogJ29wdGlvbjEnLCB0ZXh0OiAnT3B0aW9uIEEnIH0sXG4gICAgICAgIHsgaWQ6ICdvcHRpb24yJywgdGV4dDogJ09wdGlvbiBCJyB9LFxuICAgICAgICB7IGlkOiAnb3B0aW9uMycsIHRleHQ6ICdPcHRpb24gQycgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gY2FsY3VsYXRlUmVzdWx0cyh2b3Rlcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFRlc3QgdGhlIGFsZ29yaXRobSBsb2dpY1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQud2lubmVyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yb3VuZHMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXN1bHQucm91bmRzKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHRpZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3Qgdm90ZXMgPSBbXG4gICAgICAgIHsgdXNlcl9pZDogJ3VzZXIxJywgcmFua2luZ3M6IFsxLCAyXSB9LFxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMicsIHJhbmtpbmdzOiBbMiwgMV0gfVxuICAgICAgXTtcblxuICAgICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgICAgeyBpZDogJ29wdGlvbjEnLCB0ZXh0OiAnT3B0aW9uIEEnIH0sXG4gICAgICAgIHsgaWQ6ICdvcHRpb24yJywgdGV4dDogJ09wdGlvbiBCJyB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHRzKHZvdGVzLCBvcHRpb25zKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQud2lubmVyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2luZ2xlIGNhbmRpZGF0ZSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB2b3RlcyA9IFtcbiAgICAgICAgeyB1c2VyX2lkOiAndXNlcjEnLCByYW5raW5nczogWzFdIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXG4gICAgICAgIHsgaWQ6ICdvcHRpb24xJywgdGV4dDogJ09wdGlvbiBBJyB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVSZXN1bHRzKHZvdGVzLCBvcHRpb25zKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQud2lubmVyKS50b0JlKCdvcHRpb24xJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTaW5nbGUgQ2hvaWNlIFZvdGluZyBBbGdvcml0aG0nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc2ltcGxlIG1ham9yaXR5IGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZvdGVzID0gW1xuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMScsIG9wdGlvbl9pbmRleDogMCB9LFxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMicsIG9wdGlvbl9pbmRleDogMCB9LFxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyMycsIG9wdGlvbl9pbmRleDogMSB9LFxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyNCcsIG9wdGlvbl9pbmRleDogMSB9LFxuICAgICAgICB7IHVzZXJfaWQ6ICd1c2VyNScsIG9wdGlvbl9pbmRleDogMSB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCBvcHRpb25zID0gW1xuICAgICAgICB7IGlkOiAnb3B0aW9uMScsIHRleHQ6ICdPcHRpb24gQScgfSxcbiAgICAgICAgeyBpZDogJ29wdGlvbjInLCB0ZXh0OiAnT3B0aW9uIEInIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVNpbmdsZUNob2ljZVJlc3VsdHModm90ZXMsIG9wdGlvbnMpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC53aW5uZXIpLnRvQmUoJ29wdGlvbjInKTsgLy8gT3B0aW9uIEIgd2lucyB3aXRoIDMgdm90ZXNcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0c1sxXS52b3RlcykudG9CZSgzKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0c1swXS52b3RlcykudG9CZSgyKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5vIHZvdGVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHZvdGVzOiBhbnlbXSA9IFtdO1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgICAgeyBpZDogJ29wdGlvbjEnLCB0ZXh0OiAnT3B0aW9uIEEnIH0sXG4gICAgICAgIHsgaWQ6ICdvcHRpb24yJywgdGV4dDogJ09wdGlvbiBCJyB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVTaW5nbGVDaG9pY2VSZXN1bHRzKHZvdGVzLCBvcHRpb25zKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQud2lubmVyKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXN1bHRzWzBdLnZvdGVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdC5yZXN1bHRzWzFdLnZvdGVzKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGllcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCB2b3RlcyA9IFtcbiAgICAgICAgeyB1c2VyX2lkOiAndXNlcjEnLCBvcHRpb25faW5kZXg6IDAgfSxcbiAgICAgICAgeyB1c2VyX2lkOiAndXNlcjInLCBvcHRpb25faW5kZXg6IDEgfVxuICAgICAgXTtcblxuICAgICAgY29uc3Qgb3B0aW9ucyA9IFtcbiAgICAgICAgeyBpZDogJ29wdGlvbjEnLCB0ZXh0OiAnT3B0aW9uIEEnIH0sXG4gICAgICAgIHsgaWQ6ICdvcHRpb24yJywgdGV4dDogJ09wdGlvbiBCJyB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVTaW5nbGVDaG9pY2VSZXN1bHRzKHZvdGVzLCBvcHRpb25zKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQud2lubmVyKS50b0JlTnVsbCgpOyAvLyBUaWVcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0c1swXS52b3RlcykudG9CZSgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHQucmVzdWx0c1sxXS52b3RlcykudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1ZvdGUgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHZvdGUgZGF0YSBzdHJ1Y3R1cmUnLCAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFZvdGUgPSB7XG4gICAgICAgIHVzZXJfaWQ6ICd1c2VyMScsXG4gICAgICAgIG9wdGlvbl9pbmRleDogMCxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuXG4gICAgICAvLyBUZXN0IHZhbGlkYXRpb24gbG9naWNcbiAgICAgIGV4cGVjdCh2YWxpZFZvdGUudXNlcl9pZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh2YWxpZFZvdGUub3B0aW9uX2luZGV4KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHZhbGlkVm90ZS5jcmVhdGVkX2F0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiB2YWxpZFZvdGUudXNlcl9pZCkudG9CZSgnc3RyaW5nJyk7XG4gICAgICBleHBlY3QodHlwZW9mIHZhbGlkVm90ZS5vcHRpb25faW5kZXgpLnRvQmUoJ251bWJlcicpO1xuICAgICAgZXhwZWN0KHR5cGVvZiB2YWxpZFZvdGUuY3JlYXRlZF9hdCkudG9CZSgnc3RyaW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbnZhbGlkIHZvdGUgZGF0YScsICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRWb3RlID0ge1xuICAgICAgICB1c2VyX2lkOiAnJyxcbiAgICAgICAgb3B0aW9uX2luZGV4OiAtMSxcbiAgICAgICAgY3JlYXRlZF9hdDogJ2ludmFsaWQtZGF0ZSdcbiAgICAgIH07XG5cbiAgICAgIC8vIFRlc3QgdmFsaWRhdGlvbiBsb2dpY1xuICAgICAgZXhwZWN0KGludmFsaWRWb3RlLnVzZXJfaWQpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KGludmFsaWRWb3RlLm9wdGlvbl9pbmRleCkudG9CZSgtMSk7XG4gICAgICBleHBlY3QoaW52YWxpZFZvdGUuY3JlYXRlZF9hdCkudG9CZSgnaW52YWxpZC1kYXRlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZXN1bHQgQ2FsY3VsYXRpb25zJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHBlcmNlbnRhZ2VzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvdGFsVm90ZXMgPSAxMDA7XG4gICAgICBjb25zdCBvcHRpb25Wb3RlcyA9IDI1O1xuICAgICAgY29uc3QgZXhwZWN0ZWRQZXJjZW50YWdlID0gMjU7XG5cbiAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAob3B0aW9uVm90ZXMgLyB0b3RhbFZvdGVzKSAqIDEwMDtcblxuICAgICAgZXhwZWN0KHBlcmNlbnRhZ2UpLnRvQmUoZXhwZWN0ZWRQZXJjZW50YWdlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHplcm8gdG90YWwgdm90ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b3RhbFZvdGVzID0gMDtcbiAgICAgIGNvbnN0IG9wdGlvblZvdGVzID0gMDtcblxuICAgICAgY29uc3QgcGVyY2VudGFnZSA9IHRvdGFsVm90ZXMgPiAwID8gKG9wdGlvblZvdGVzIC8gdG90YWxWb3RlcykgKiAxMDAgOiAwO1xuXG4gICAgICBleHBlY3QocGVyY2VudGFnZSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcm91bmQgcGVyY2VudGFnZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgdG90YWxWb3RlcyA9IDM7XG4gICAgICBjb25zdCBvcHRpb25Wb3RlcyA9IDE7XG4gICAgICBjb25zdCBleHBlY3RlZFBlcmNlbnRhZ2UgPSAzMy4zMztcblxuICAgICAgY29uc3QgcGVyY2VudGFnZSA9IE1hdGgucm91bmQoKG9wdGlvblZvdGVzIC8gdG90YWxWb3RlcykgKiAxMDAgKiAxMDApIC8gMTAwO1xuXG4gICAgICBleHBlY3QocGVyY2VudGFnZSkudG9CZShleHBlY3RlZFBlcmNlbnRhZ2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImRlc2NyaWJlIiwiaXQiLCJ2b3RlcyIsInVzZXJfaWQiLCJyYW5raW5ncyIsIm9wdGlvbnMiLCJpZCIsInRleHQiLCJyZXN1bHQiLCJjYWxjdWxhdGVSZXN1bHRzIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJ3aW5uZXIiLCJyb3VuZHMiLCJBcnJheSIsImlzQXJyYXkiLCJ0b0JlIiwib3B0aW9uX2luZGV4IiwiY2FsY3VsYXRlU2luZ2xlQ2hvaWNlUmVzdWx0cyIsInJlc3VsdHMiLCJ0b0JlTnVsbCIsInZhbGlkVm90ZSIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJpbnZhbGlkVm90ZSIsInRvdGFsVm90ZXMiLCJvcHRpb25Wb3RlcyIsImV4cGVjdGVkUGVyY2VudGFnZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7O3lCQUVvQzt3QkFHSjs4QkFDWTtBQUU3Q0EsSUFBQUEsaUJBQVEsRUFBQyxrQ0FBa0M7SUFDekNBLElBQUFBLGlCQUFRLEVBQUMsa0NBQWtDO1FBQ3pDQyxJQUFBQSxXQUFFLEVBQUMsb0RBQW9EO1lBQ3JELHFDQUFxQztZQUNyQyxNQUFNQyxRQUFRO2dCQUNaO29CQUFFQyxTQUFTO29CQUFTQyxVQUFVO3dCQUFDO3dCQUFHO3dCQUFHO3FCQUFFO2dCQUFDO2dCQUN4QztvQkFBRUQsU0FBUztvQkFBU0MsVUFBVTt3QkFBQzt3QkFBRzt3QkFBRztxQkFBRTtnQkFBQztnQkFDeEM7b0JBQUVELFNBQVM7b0JBQVNDLFVBQVU7d0JBQUM7d0JBQUc7d0JBQUc7cUJBQUU7Z0JBQUM7Z0JBQ3hDO29CQUFFRCxTQUFTO29CQUFTQyxVQUFVO3dCQUFDO3dCQUFHO3dCQUFHO3FCQUFFO2dCQUFDO2dCQUN4QztvQkFBRUQsU0FBUztvQkFBU0MsVUFBVTt3QkFBQzt3QkFBRzt3QkFBRztxQkFBRTtnQkFBQzthQUN6QztZQUVELE1BQU1DLFVBQVU7Z0JBQ2Q7b0JBQUVDLElBQUk7b0JBQVdDLE1BQU07Z0JBQVc7Z0JBQ2xDO29CQUFFRCxJQUFJO29CQUFXQyxNQUFNO2dCQUFXO2dCQUNsQztvQkFBRUQsSUFBSTtvQkFBV0MsTUFBTTtnQkFBVzthQUNuQztZQUVELE1BQU1DLFNBQVNDLElBQUFBLHdCQUFnQixFQUFDUCxPQUFPRztZQUV2QywyQkFBMkI7WUFDM0JLLElBQUFBLGVB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