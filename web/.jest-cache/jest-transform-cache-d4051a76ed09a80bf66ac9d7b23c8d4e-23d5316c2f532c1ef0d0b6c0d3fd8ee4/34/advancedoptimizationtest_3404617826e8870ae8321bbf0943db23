6b3a383247979ce5e421b8df8477feb3
/**
 * @jest-environment jsdom
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactrouterdom = require("react-router-dom");
const _SuperiorMobileFeed = /*#__PURE__*/ _interop_require_default(require("../../../../features/feeds/components/SuperiorMobileFeed"));
const _performanceprofiler = require("./performance-profiler");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Setup minimal mocks for test environment
beforeAll(()=>{
    // Mock localStorage for component functionality
    Object.defineProperty(window, "localStorage", {
        value: {
            getItem: jest.fn(),
            setItem: jest.fn(),
            removeItem: jest.fn(),
            clear: jest.fn()
        },
        writable: true
    });
    // Mock navigator for online status
    Object.defineProperty(navigator, "onLine", {
        value: true,
        writable: true
    });
    // Mock fetch to handle API calls
    global.fetch = jest.fn((url)=>{
        if (url.includes("/api/feeds")) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve([
                        {
                            id: "1",
                            title: "Sample Civic Activity",
                            description: "A sample civic activity for testing",
                            category: "civic",
                            timestamp: new Date().toISOString(),
                            source: "test"
                        }
                    ])
            });
        }
        if (url.includes("/api/civics/analytics")) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        analytics: {
                            totalViews: 100,
                            engagement: 0.75,
                            userSatisfaction: 0.85
                        }
                    })
            });
        }
        if (url.includes("/api/pwa/offline/sync")) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true
                    })
            });
        }
        return Promise.resolve({
            ok: true,
            json: ()=>Promise.resolve({})
        });
    });
});
describe("Advanced Performance Optimization Tests", ()=>{
    beforeEach(()=>{
        // Clear profiler before each test
        _performanceprofiler.performanceProfiler.clear();
    });
    describe("Performance Profiling", ()=>{
        it("should profile component performance with deep analysis", async ()=>{
            const componentName = "SuperiorMobileFeed";
            // Start profiling
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            const startTime = performance.now();
            const startMemory = performance.memory?.usedJSHeapSize || 0;
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const endTime = performance.now();
            const endMemory = performance.memory?.usedJSHeapSize || 0;
            // Stop profiling and get metrics
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            console.log(`ðŸ” Deep Performance Analysis:`);
            console.log(`- Component: ${metrics.componentName}`);
            console.log(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            console.log(`- Memory Used: ${metrics.memoryPeak.toFixed(2)}MB`);
            console.log(`- Optimization Score: ${metrics.optimizationScore}/100`);
            console.log(`- Re-render Triggers: ${metrics.reRenderTriggers.length}`);
            console.log(`- Bottlenecks: ${metrics.performanceBottlenecks.length}`);
            console.log(`- Recommendations: ${metrics.recommendations.length}`);
            // Verify metrics
            expect(metrics.componentName).toBe(componentName);
            expect(metrics.renderCount).toBe(1);
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
            expect(metrics.recommendations.length).toBeGreaterThan(0);
        });
        it("should create component profile with optimization analysis", async ()=>{
            const componentName = "SuperiorMobileFeed";
            // Profile the component
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            // Create component profile
            const profile = _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            console.log(`ðŸ“Š Component Profile Created:`);
            console.log(`- Name: ${profile.name}`);
            console.log(`- Depth: ${profile.depth}`);
            console.log(`- Is Optimized: ${profile.isOptimized}`);
            console.log(`- Optimization Potential: ${profile.optimizationPotential}`);
            console.log(`- Optimization Score: ${profile.metrics.optimizationScore}/100`);
            // Verify profile
            expect(profile.name).toBe(componentName);
            expect(profile.metrics).toBe(metrics);
            expect(profile.depth).toBe(0);
            expect(typeof profile.isOptimized).toBe("boolean");
            expect([
                "HIGH",
                "MEDIUM",
                "LOW"
            ]).toContain(profile.optimizationPotential);
        });
        it("should generate comprehensive performance analysis", async ()=>{
            // Profile multiple components
            const components = [
                "SuperiorMobileFeed",
                "TestComponent1",
                "TestComponent2"
            ];
            for (const componentName of components){
                _performanceprofiler.performanceProfiler.startProfiling(componentName);
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
                const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, Math.floor(Math.random() * 5) + 1);
                _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            }
            // Generate comprehensive analysis
            const analysis = _performanceprofiler.performanceProfiler.generatePerformanceAnalysis();
            console.log(`ðŸ“Š Comprehensive Performance Analysis:`);
            console.log(`- Overall Score: ${analysis.overallScore.toFixed(2)}/100`);
            console.log(`- Critical Issues: ${analysis.criticalIssues.length}`);
            console.log(`- Optimization Opportunities: ${analysis.optimizationOpportunities.length}`);
            console.log(`- Memory Leaks: ${analysis.memoryLeaks.length}`);
            console.log(`- Render Optimizations: ${analysis.renderOptimizations.length}`);
            console.log(`- Network Optimizations: ${analysis.networkOptimizations.length}`);
            console.log(`- Accessibility Optimizations: ${analysis.accessibilityOptimizations.length}`);
            console.log(`- Recommendations: ${analysis.recommendations.length}`);
            console.log(`- Estimated Improvement: ${analysis.estimatedImprovement.toFixed(2)}%`);
            // Verify analysis
            expect(analysis.overallScore).toBeGreaterThanOrEqual(0);
            expect(analysis.overallScore).toBeLessThanOrEqual(100);
            expect(Array.isArray(analysis.criticalIssues)).toBe(true);
            expect(Array.isArray(analysis.optimizationOpportunities)).toBe(true);
            expect(Array.isArray(analysis.memoryLeaks)).toBe(true);
            expect(Array.isArray(analysis.renderOptimizations)).toBe(true);
            expect(Array.isArray(analysis.networkOptimizations)).toBe(true);
            expect(Array.isArray(analysis.accessibilityOptimizations)).toBe(true);
            expect(Array.isArray(analysis.recommendations)).toBe(true);
            expect(analysis.estimatedImprovement).toBeGreaterThanOrEqual(0);
        });
    });
    describe("Memory Optimization", ()=>{
        it("should identify memory optimization opportunities", async ()=>{
            const componentName = "MemoryOptimizationTest";
            // Simulate memory-intensive operations
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            console.log(`ðŸ§  Memory Optimization Analysis:`);
            console.log(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            console.log(`- Memory Average: ${metrics.memoryAverage.toFixed(2)}MB`);
            console.log(`- Memory Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes("memory")).length}`);
            // Check for memory optimization recommendations
            const memoryRecommendations = metrics.recommendations.filter((r)=>r.includes("memory") || r.includes("cleanup") || r.includes("leak"));
            console.log(`- Memory Recommendations: ${memoryRecommendations.length}`);
            memoryRecommendations.forEach((rec)=>console.log(`  - ${rec}`));
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.memoryAverage).toBeGreaterThanOrEqual(0);
            expect(Array.isArray(memoryRecommendations)).toBe(true);
        });
        it("should detect potential memory leaks", async ()=>{
            const componentName = "MemoryLeakTest";
            // Simulate multiple renders to detect memory leaks
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            for(let i = 0; i < 5; i++){
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
            }
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 5);
            console.log(`ðŸ” Memory Leak Detection:`);
            console.log(`- Render Count: ${metrics.renderCount}`);
            console.log(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            console.log(`- Memory Average: ${metrics.memoryAverage.toFixed(2)}MB`);
            // Check for memory leak indicators
            const memoryLeakIndicators = metrics.performanceBottlenecks.filter((b)=>b.includes("memory") || b.includes("leak"));
            console.log(`- Memory Leak Indicators: ${memoryLeakIndicators.length}`);
            memoryLeakIndicators.forEach((indicator)=>console.log(`  - ${indicator}`));
            expect(metrics.renderCount).toBe(5);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
        });
    });
    describe("Network Optimization", ()=>{
        it("should analyze network performance and optimization", async ()=>{
            const componentName = "NetworkOptimizationTest";
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            console.log(`ðŸŒ Network Optimization Analysis:`);
            console.log(`- Component: ${metrics.componentName}`);
            console.log(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            console.log(`- Network Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes("network")).length}`);
            // Check for network optimization recommendations
            const networkRecommendations = metrics.recommendations.filter((r)=>r.includes("network") || r.includes("API") || r.includes("request") || r.includes("cache"));
            console.log(`- Network Recommendations: ${networkRecommendations.length}`);
            networkRecommendations.forEach((rec)=>console.log(`  - ${rec}`));
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(Array.isArray(networkRecommendations)).toBe(true);
        });
        it("should identify API performance bottlenecks", async ()=>{
            const componentName = "APIPerformanceTest";
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            // Simulate API calls
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            console.log(`ðŸ”Œ API Performance Analysis:`);
            console.log(`- API Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes("API")).length}`);
            console.log(`- Network Recommendations: ${metrics.recommendations.filter((r)=>r.includes("API")).length}`);
            // Verify API performance analysis
            expect(metrics.performanceBottlenecks).toBeDefined();
            expect(metrics.recommendations).toBeDefined();
        });
    });
    describe("Accessibility Optimization", ()=>{
        it("should analyze accessibility performance", async ()=>{
            const componentName = "AccessibilityOptimizationTest";
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            console.log(`â™¿ Accessibility Performance Analysis:`);
            console.log(`- Component: ${metrics.componentName}`);
            console.log(`- Accessibility Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes("accessibility")).length}`);
            // Check for accessibility optimization recommendations
            const accessibilityRecommendations = metrics.recommendations.filter((r)=>r.includes("accessibility") || r.includes("screen reader") || r.includes("ARIA"));
            console.log(`- Accessibility Recommendations: ${accessibilityRecommendations.length}`);
            accessibilityRecommendations.forEach((rec)=>console.log(`  - ${rec}`));
            expect(metrics.componentName).toBe(componentName);
            expect(Array.isArray(accessibilityRecommendations)).toBe(true);
        });
        it("should optimize screen reader performance", async ()=>{
            const componentName = "ScreenReaderOptimizationTest";
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            console.log(`ðŸ”Š Screen Reader Performance:`);
            console.log(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            console.log(`- Optimization Score: ${metrics.optimizationScore}/100`);
            // Check for screen reader optimization recommendations
            const screenReaderRecommendations = metrics.recommendations.filter((r)=>r.includes("screen reader") || r.includes("announcement") || r.includes("ARIA"));
            console.log(`- Screen Reader Recommendations: ${screenReaderRecommendations.length}`);
            screenReaderRecommendations.forEach((rec)=>console.log(`  - ${rec}`));
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
        });
    });
    describe("Production Monitoring", ()=>{
        it("should simulate production performance monitoring", async ()=>{
            const componentName = "ProductionMonitoringTest";
            // Simulate production-like conditions
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            // Simulate multiple renders under production conditions
            for(let i = 0; i < 3; i++){
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
            }
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 3);
            console.log(`ðŸ­ Production Performance Monitoring:`);
            console.log(`- Component: ${metrics.componentName}`);
            console.log(`- Render Count: ${metrics.renderCount}`);
            console.log(`- Total Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            console.log(`- Average Render Time: ${metrics.averageRenderTime.toFixed(2)}ms`);
            console.log(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            console.log(`- Optimization Score: ${metrics.optimizationScore}/100`);
            // Verify production monitoring metrics
            expect(metrics.renderCount).toBe(3);
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(metrics.averageRenderTime).toBeGreaterThan(0);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
        });
        it("should export comprehensive profiling data", async ()=>{
            // Profile multiple components
            const components = [
                "Component1",
                "Component2",
                "Component3"
            ];
            for (const componentName of components){
                _performanceprofiler.performanceProfiler.startProfiling(componentName);
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
                const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
                _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            }
            // Export profiling data
            const exportedData = _performanceprofiler.performanceProfiler.exportProfilingData();
            const parsedData = JSON.parse(exportedData);
            console.log(`ðŸ“¤ Exported Profiling Data:`);
            console.log(`- Profiles: ${parsedData.profiles.length}`);
            console.log(`- Metrics: ${parsedData.metrics.length}`);
            console.log(`- Analysis Generated: ${!!parsedData.analysis}`);
            expect(parsedData.profiles).toBeDefined();
            expect(parsedData.metrics).toBeDefined();
            expect(parsedData.analysis).toBeDefined();
            expect(parsedData.profiles.length).toBe(3);
            expect(parsedData.metrics.length).toBe(3);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvcGVyZm9ybWFuY2UvYWR2YW5jZWQtb3B0aW1pemF0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IsIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IFN1cGVyaW9yTW9iaWxlRmVlZCBmcm9tICdAL2ZlYXR1cmVzL2ZlZWRzL2NvbXBvbmVudHMvU3VwZXJpb3JNb2JpbGVGZWVkJztcbmltcG9ydCB7IHBlcmZvcm1hbmNlUHJvZmlsZXIsIFByb2ZpbGVyTWV0cmljcywgQ29tcG9uZW50UHJvZmlsZSB9IGZyb20gJy4vcGVyZm9ybWFuY2UtcHJvZmlsZXInO1xuXG4vLyBTZXR1cCBtaW5pbWFsIG1vY2tzIGZvciB0ZXN0IGVudmlyb25tZW50XG5iZWZvcmVBbGwoKCkgPT4ge1xuICAvLyBNb2NrIGxvY2FsU3RvcmFnZSBmb3IgY29tcG9uZW50IGZ1bmN0aW9uYWxpdHlcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcbiAgICB2YWx1ZToge1xuICAgICAgZ2V0SXRlbTogamVzdC5mbigpLFxuICAgICAgc2V0SXRlbTogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgICAgY2xlYXI6IGplc3QuZm4oKSxcbiAgICB9LFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICB9KTtcbiAgXG4gIC8vIE1vY2sgbmF2aWdhdG9yIGZvciBvbmxpbmUgc3RhdHVzXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdvbkxpbmUnLCB7XG4gICAgdmFsdWU6IHRydWUsXG4gICAgd3JpdGFibGU6IHRydWUsXG4gIH0pO1xuXG4gIC8vIE1vY2sgZmV0Y2ggdG8gaGFuZGxlIEFQSSBjYWxsc1xuICBnbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCh1cmw6IHN0cmluZykgPT4ge1xuICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvZmVlZHMnKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnMScsXG4gICAgICAgICAgICB0aXRsZTogJ1NhbXBsZSBDaXZpYyBBY3Rpdml0eScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Egc2FtcGxlIGNpdmljIGFjdGl2aXR5IGZvciB0ZXN0aW5nJyxcbiAgICAgICAgICAgIGNhdGVnb3J5OiAnY2l2aWMnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBzb3VyY2U6ICd0ZXN0J1xuICAgICAgICAgIH1cbiAgICAgICAgXSlcbiAgICAgIH0gYXMgUmVzcG9uc2UpO1xuICAgIH1cbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2Npdmljcy9hbmFseXRpY3MnKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgICAgICB0b3RhbFZpZXdzOiAxMDAsXG4gICAgICAgICAgICBlbmdhZ2VtZW50OiAwLjc1LFxuICAgICAgICAgICAgdXNlclNhdGlzZmFjdGlvbjogMC44NVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gYXMgUmVzcG9uc2UpO1xuICAgIH1cbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL3B3YS9vZmZsaW5lL3N5bmMnKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG9rOiB0cnVlLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiB0cnVlIH0pXG4gICAgICB9IGFzIFJlc3BvbnNlKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XG4gICAgICBvazogdHJ1ZSxcbiAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7fSlcbiAgICB9IGFzIFJlc3BvbnNlKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ0FkdmFuY2VkIFBlcmZvcm1hbmNlIE9wdGltaXphdGlvbiBUZXN0cycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgcHJvZmlsZXIgYmVmb3JlIGVhY2ggdGVzdFxuICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuY2xlYXIoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFByb2ZpbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb2ZpbGUgY29tcG9uZW50IHBlcmZvcm1hbmNlIHdpdGggZGVlcCBhbmFseXNpcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnU3VwZXJpb3JNb2JpbGVGZWVkJztcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgcHJvZmlsaW5nXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IHN0YXJ0TWVtb3J5ID0gcGVyZm9ybWFuY2UubWVtb3J5Py51c2VkSlNIZWFwU2l6ZSB8fCAwO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IGVuZE1lbW9yeSA9IHBlcmZvcm1hbmNlLm1lbW9yeT8udXNlZEpTSGVhcFNpemUgfHwgMDtcbiAgICAgIFxuICAgICAgLy8gU3RvcCBwcm9maWxpbmcgYW5kIGdldCBtZXRyaWNzXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBEZWVwIFBlcmZvcm1hbmNlIEFuYWx5c2lzOmApO1xuICAgICAgY29uc29sZS5sb2coYC0gQ29tcG9uZW50OiAke21ldHJpY3MuY29tcG9uZW50TmFtZX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIFJlbmRlciBUaW1lOiAke21ldHJpY3MudG90YWxSZW5kZXJUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIE1lbW9yeSBVc2VkOiAke21ldHJpY3MubWVtb3J5UGVhay50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBPcHRpbWl6YXRpb24gU2NvcmU6ICR7bWV0cmljcy5vcHRpbWl6YXRpb25TY29yZX0vMTAwYCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBSZS1yZW5kZXIgVHJpZ2dlcnM6ICR7bWV0cmljcy5yZVJlbmRlclRyaWdnZXJzLmxlbmd0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5sZW5ndGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBSZWNvbW1lbmRhdGlvbnM6ICR7bWV0cmljcy5yZWNvbW1lbmRhdGlvbnMubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgbWV0cmljc1xuICAgICAgZXhwZWN0KG1ldHJpY3MuY29tcG9uZW50TmFtZSkudG9CZShjb21wb25lbnROYW1lKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlbmRlckNvdW50KS50b0JlKDEpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxSZW5kZXJUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5tZW1vcnlQZWFrKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgY29tcG9uZW50IHByb2ZpbGUgd2l0aCBvcHRpbWl6YXRpb24gYW5hbHlzaXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ1N1cGVyaW9yTW9iaWxlRmVlZCc7XG4gICAgICBcbiAgICAgIC8vIFByb2ZpbGUgdGhlIGNvbXBvbmVudFxuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFN1cGVyaW9yTW9iaWxlRmVlZCAvPlxuICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgY29tcG9uZW50IHByb2ZpbGVcbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLmNyZWF0ZUNvbXBvbmVudFByb2ZpbGUoY29tcG9uZW50TmFtZSwgbWV0cmljcyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIENvbXBvbmVudCBQcm9maWxlIENyZWF0ZWQ6YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBOYW1lOiAke3Byb2ZpbGUubmFtZX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIERlcHRoOiAke3Byb2ZpbGUuZGVwdGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBJcyBPcHRpbWl6ZWQ6ICR7cHJvZmlsZS5pc09wdGltaXplZH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIE9wdGltaXphdGlvbiBQb3RlbnRpYWw6ICR7cHJvZmlsZS5vcHRpbWl6YXRpb25Qb3RlbnRpYWx9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBPcHRpbWl6YXRpb24gU2NvcmU6ICR7cHJvZmlsZS5tZXRyaWNzLm9wdGltaXphdGlvblNjb3JlfS8xMDBgKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHByb2ZpbGVcbiAgICAgIGV4cGVjdChwcm9maWxlLm5hbWUpLnRvQmUoY29tcG9uZW50TmFtZSk7XG4gICAgICBleHBlY3QocHJvZmlsZS5tZXRyaWNzKS50b0JlKG1ldHJpY3MpO1xuICAgICAgZXhwZWN0KHByb2ZpbGUuZGVwdGgpLnRvQmUoMCk7XG4gICAgICBleHBlY3QodHlwZW9mIHByb2ZpbGUuaXNPcHRpbWl6ZWQpLnRvQmUoJ2Jvb2xlYW4nKTtcbiAgICAgIGV4cGVjdChbJ0hJR0gnLCAnTUVESVVNJywgJ0xPVyddKS50b0NvbnRhaW4ocHJvZmlsZS5vcHRpbWl6YXRpb25Qb3RlbnRpYWwpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBjb21wcmVoZW5zaXZlIHBlcmZvcm1hbmNlIGFuYWx5c2lzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUHJvZmlsZSBtdWx0aXBsZSBjb21wb25lbnRzXG4gICAgICBjb25zdCBjb21wb25lbnRzID0gWydTdXBlcmlvck1vYmlsZUZlZWQnLCAnVGVzdENvbXBvbmVudDEnLCAnVGVzdENvbXBvbmVudDInXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBjb21wb25lbnROYW1lIG9mIGNvbXBvbmVudHMpIHtcbiAgICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSkgKyAxKTtcbiAgICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5jcmVhdGVDb21wb25lbnRQcm9maWxlKGNvbXBvbmVudE5hbWUsIG1ldHJpY3MpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIGFuYWx5c2lzXG4gICAgICBjb25zdCBhbmFseXNpcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuZ2VuZXJhdGVQZXJmb3JtYW5jZUFuYWx5c2lzKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIENvbXByZWhlbnNpdmUgUGVyZm9ybWFuY2UgQW5hbHlzaXM6YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBPdmVyYWxsIFNjb3JlOiAke2FuYWx5c2lzLm92ZXJhbGxTY29yZS50b0ZpeGVkKDIpfS8xMDBgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIENyaXRpY2FsIElzc3VlczogJHthbmFseXNpcy5jcml0aWNhbElzc3Vlcy5sZW5ndGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBPcHRpbWl6YXRpb24gT3Bwb3J0dW5pdGllczogJHthbmFseXNpcy5vcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzLmxlbmd0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIE1lbW9yeSBMZWFrczogJHthbmFseXNpcy5tZW1vcnlMZWFrcy5sZW5ndGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBSZW5kZXIgT3B0aW1pemF0aW9uczogJHthbmFseXNpcy5yZW5kZXJPcHRpbWl6YXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIE5ldHdvcmsgT3B0aW1pemF0aW9uczogJHthbmFseXNpcy5uZXR3b3JrT3B0aW1pemF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBBY2Nlc3NpYmlsaXR5IE9wdGltaXphdGlvbnM6ICR7YW5hbHlzaXMuYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnMubGVuZ3RofWApO1xuICAgICAgY29uc29sZS5sb2coYC0gUmVjb21tZW5kYXRpb25zOiAke2FuYWx5c2lzLnJlY29tbWVuZGF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBFc3RpbWF0ZWQgSW1wcm92ZW1lbnQ6ICR7YW5hbHlzaXMuZXN0aW1hdGVkSW1wcm92ZW1lbnQudG9GaXhlZCgyKX0lYCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBhbmFseXNpc1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLm92ZXJhbGxTY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChhbmFseXNpcy5vdmVyYWxsU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLmNyaXRpY2FsSXNzdWVzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLm9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMubWVtb3J5TGVha3MpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMucmVuZGVyT3B0aW1pemF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5uZXR3b3JrT3B0aW1pemF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5hY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5yZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLmVzdGltYXRlZEltcHJvdmVtZW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTWVtb3J5IE9wdGltaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IG1lbW9yeSBvcHRpbWl6YXRpb24gb3Bwb3J0dW5pdGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnTWVtb3J5T3B0aW1pemF0aW9uVGVzdCc7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIG1lbW9yeS1pbnRlbnNpdmUgb3BlcmF0aW9uc1xuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFN1cGVyaW9yTW9iaWxlRmVlZCAvPlxuICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+noCBNZW1vcnkgT3B0aW1pemF0aW9uIEFuYWx5c2lzOmApO1xuICAgICAgY29uc29sZS5sb2coYC0gTWVtb3J5IFBlYWs6ICR7bWV0cmljcy5tZW1vcnlQZWFrLnRvRml4ZWQoMil9TUJgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIE1lbW9yeSBBdmVyYWdlOiAke21ldHJpY3MubWVtb3J5QXZlcmFnZS50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBNZW1vcnkgQm90dGxlbmVja3M6ICR7bWV0cmljcy5wZXJmb3JtYW5jZUJvdHRsZW5lY2tzLmZpbHRlcihiID0+IGIuaW5jbHVkZXMoJ21lbW9yeScpKS5sZW5ndGh9YCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBtZW1vcnkgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgbWVtb3J5UmVjb21tZW5kYXRpb25zID0gbWV0cmljcy5yZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ21lbW9yeScpIHx8IHIuaW5jbHVkZXMoJ2NsZWFudXAnKSB8fCByLmluY2x1ZGVzKCdsZWFrJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAtIE1lbW9yeSBSZWNvbW1lbmRhdGlvbnM6ICR7bWVtb3J5UmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIG1lbW9yeVJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiBjb25zb2xlLmxvZyhgICAtICR7cmVjfWApKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1ldHJpY3MubWVtb3J5UGVhaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeUF2ZXJhZ2UpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShtZW1vcnlSZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgcG90ZW50aWFsIG1lbW9yeSBsZWFrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnTWVtb3J5TGVha1Rlc3QnO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBtdWx0aXBsZSByZW5kZXJzIHRvIGRldGVjdCBtZW1vcnkgbGVha3NcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCA1KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYPCflI0gTWVtb3J5IExlYWsgRGV0ZWN0aW9uOmApO1xuICAgICAgY29uc29sZS5sb2coYC0gUmVuZGVyIENvdW50OiAke21ldHJpY3MucmVuZGVyQ291bnR9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBNZW1vcnkgUGVhazogJHttZXRyaWNzLm1lbW9yeVBlYWsudG9GaXhlZCgyKX1NQmApO1xuICAgICAgY29uc29sZS5sb2coYC0gTWVtb3J5IEF2ZXJhZ2U6ICR7bWV0cmljcy5tZW1vcnlBdmVyYWdlLnRvRml4ZWQoMil9TUJgKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIG1lbW9yeSBsZWFrIGluZGljYXRvcnNcbiAgICAgIGNvbnN0IG1lbW9yeUxlYWtJbmRpY2F0b3JzID0gbWV0cmljcy5wZXJmb3JtYW5jZUJvdHRsZW5lY2tzLmZpbHRlcihiID0+IFxuICAgICAgICBiLmluY2x1ZGVzKCdtZW1vcnknKSB8fCBiLmluY2x1ZGVzKCdsZWFrJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAtIE1lbW9yeSBMZWFrIEluZGljYXRvcnM6ICR7bWVtb3J5TGVha0luZGljYXRvcnMubGVuZ3RofWApO1xuICAgICAgbWVtb3J5TGVha0luZGljYXRvcnMuZm9yRWFjaChpbmRpY2F0b3IgPT4gY29uc29sZS5sb2coYCAgLSAke2luZGljYXRvcn1gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlbmRlckNvdW50KS50b0JlKDUpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MubWVtb3J5UGVhaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ05ldHdvcmsgT3B0aW1pemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBuZXR3b3JrIHBlcmZvcm1hbmNlIGFuZCBvcHRpbWl6YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ05ldHdvcmtPcHRpbWl6YXRpb25UZXN0JztcbiAgICAgIFxuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFN1cGVyaW9yTW9iaWxlRmVlZCAvPlxuICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+MkCBOZXR3b3JrIE9wdGltaXphdGlvbiBBbmFseXNpczpgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIENvbXBvbmVudDogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBSZW5kZXIgVGltZTogJHttZXRyaWNzLnRvdGFsUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBOZXR3b3JrIEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5maWx0ZXIoYiA9PiBiLmluY2x1ZGVzKCduZXR3b3JrJykpLmxlbmd0aH1gKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIG5ldHdvcmsgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgbmV0d29ya1JlY29tbWVuZGF0aW9ucyA9IG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgci5pbmNsdWRlcygnQVBJJykgfHwgci5pbmNsdWRlcygncmVxdWVzdCcpIHx8IHIuaW5jbHVkZXMoJ2NhY2hlJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAtIE5ldHdvcmsgUmVjb21tZW5kYXRpb25zOiAke25ldHdvcmtSZWNvbW1lbmRhdGlvbnMubGVuZ3RofWApO1xuICAgICAgbmV0d29ya1JlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiBjb25zb2xlLmxvZyhgICAtICR7cmVjfWApKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxSZW5kZXJUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShuZXR3b3JrUmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaWRlbnRpZnkgQVBJIHBlcmZvcm1hbmNlIGJvdHRsZW5lY2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdBUElQZXJmb3JtYW5jZVRlc3QnO1xuICAgICAgXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBBUEkgY2FsbHNcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYPCflIwgQVBJIFBlcmZvcm1hbmNlIEFuYWx5c2lzOmApO1xuICAgICAgY29uc29sZS5sb2coYC0gQVBJIEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5maWx0ZXIoYiA9PiBiLmluY2x1ZGVzKCdBUEknKSkubGVuZ3RofWApO1xuICAgICAgY29uc29sZS5sb2coYC0gTmV0d29yayBSZWNvbW1lbmRhdGlvbnM6ICR7bWV0cmljcy5yZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gci5pbmNsdWRlcygnQVBJJykpLmxlbmd0aH1gKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IEFQSSBwZXJmb3JtYW5jZSBhbmFseXNpc1xuICAgICAgZXhwZWN0KG1ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlY29tbWVuZGF0aW9ucykudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FjY2Vzc2liaWxpdHkgT3B0aW1pemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBhY2Nlc3NpYmlsaXR5IHBlcmZvcm1hbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdBY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9uVGVzdCc7XG4gICAgICBcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYOKZvyBBY2Nlc3NpYmlsaXR5IFBlcmZvcm1hbmNlIEFuYWx5c2lzOmApO1xuICAgICAgY29uc29sZS5sb2coYC0gQ29tcG9uZW50OiAke21ldHJpY3MuY29tcG9uZW50TmFtZX1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIEFjY2Vzc2liaWxpdHkgQm90dGxlbmVja3M6ICR7bWV0cmljcy5wZXJmb3JtYW5jZUJvdHRsZW5lY2tzLmZpbHRlcihiID0+IGIuaW5jbHVkZXMoJ2FjY2Vzc2liaWxpdHknKSkubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgYWNjZXNzaWJpbGl0eSBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBhY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zID0gbWV0cmljcy5yZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ2FjY2Vzc2liaWxpdHknKSB8fCByLmluY2x1ZGVzKCdzY3JlZW4gcmVhZGVyJykgfHwgci5pbmNsdWRlcygnQVJJQScpXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgLSBBY2Nlc3NpYmlsaXR5IFJlY29tbWVuZGF0aW9uczogJHthY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIGFjY2Vzc2liaWxpdHlSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4gY29uc29sZS5sb2coYCAgLSAke3JlY31gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLmNvbXBvbmVudE5hbWUpLnRvQmUoY29tcG9uZW50TmFtZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgb3B0aW1pemUgc2NyZWVuIHJlYWRlciBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnU2NyZWVuUmVhZGVyT3B0aW1pemF0aW9uVGVzdCc7XG4gICAgICBcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYPCflIogU2NyZWVuIFJlYWRlciBQZXJmb3JtYW5jZTpgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIFJlbmRlciBUaW1lOiAke21ldHJpY3MudG90YWxSZW5kZXJUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIE9wdGltaXphdGlvbiBTY29yZTogJHttZXRyaWNzLm9wdGltaXphdGlvblNjb3JlfS8xMDBgKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHNjcmVlbiByZWFkZXIgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3Qgc2NyZWVuUmVhZGVyUmVjb21tZW5kYXRpb25zID0gbWV0cmljcy5yZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ3NjcmVlbiByZWFkZXInKSB8fCByLmluY2x1ZGVzKCdhbm5vdW5jZW1lbnQnKSB8fCByLmluY2x1ZGVzKCdBUklBJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGAtIFNjcmVlbiBSZWFkZXIgUmVjb21tZW5kYXRpb25zOiAke3NjcmVlblJlYWRlclJlY29tbWVuZGF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBzY3JlZW5SZWFkZXJSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4gY29uc29sZS5sb2coYCAgLSAke3JlY31gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Byb2R1Y3Rpb24gTW9uaXRvcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNpbXVsYXRlIHByb2R1Y3Rpb24gcGVyZm9ybWFuY2UgbW9uaXRvcmluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnUHJvZHVjdGlvbk1vbml0b3JpbmdUZXN0JztcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgcHJvZHVjdGlvbi1saWtlIGNvbmRpdGlvbnNcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIG11bHRpcGxlIHJlbmRlcnMgdW5kZXIgcHJvZHVjdGlvbiBjb25kaXRpb25zXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJlbmRlcihcbiAgICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgMyk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn4+tIFByb2R1Y3Rpb24gUGVyZm9ybWFuY2UgTW9uaXRvcmluZzpgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIENvbXBvbmVudDogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9YCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBSZW5kZXIgQ291bnQ6ICR7bWV0cmljcy5yZW5kZXJDb3VudH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIFRvdGFsIFJlbmRlciBUaW1lOiAke21ldHJpY3MudG90YWxSZW5kZXJUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIEF2ZXJhZ2UgUmVuZGVyIFRpbWU6ICR7bWV0cmljcy5hdmVyYWdlUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICBjb25zb2xlLmxvZyhgLSBNZW1vcnkgUGVhazogJHttZXRyaWNzLm1lbW9yeVBlYWsudG9GaXhlZCgyKX1NQmApO1xuICAgICAgY29uc29sZS5sb2coYC0gT3B0aW1pemF0aW9uIFNjb3JlOiAke21ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmV9LzEwMGApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgcHJvZHVjdGlvbiBtb25pdG9yaW5nIG1ldHJpY3NcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlbmRlckNvdW50KS50b0JlKDMpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxSZW5kZXJUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5hdmVyYWdlUmVuZGVyVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MubWVtb3J5UGVhaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZXhwb3J0IGNvbXByZWhlbnNpdmUgcHJvZmlsaW5nIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBQcm9maWxlIG11bHRpcGxlIGNvbXBvbmVudHNcbiAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSBbJ0NvbXBvbmVudDEnLCAnQ29tcG9uZW50MicsICdDb21wb25lbnQzJ107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgY29tcG9uZW50TmFtZSBvZiBjb21wb25lbnRzKSB7XG4gICAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJlbmRlcihcbiAgICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLmNyZWF0ZUNvbXBvbmVudFByb2ZpbGUoY29tcG9uZW50TmFtZSwgbWV0cmljcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEV4cG9ydCBwcm9maWxpbmcgZGF0YVxuICAgICAgY29uc3QgZXhwb3J0ZWREYXRhID0gcGVyZm9ybWFuY2VQcm9maWxlci5leHBvcnRQcm9maWxpbmdEYXRhKCk7XG4gICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShleHBvcnRlZERhdGEpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhg8J+TpCBFeHBvcnRlZCBQcm9maWxpbmcgRGF0YTpgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAtIFByb2ZpbGVzOiAke3BhcnNlZERhdGEucHJvZmlsZXMubGVuZ3RofWApO1xuICAgICAgY29uc29sZS5sb2coYC0gTWV0cmljczogJHtwYXJzZWREYXRhLm1ldHJpY3MubGVuZ3RofWApO1xuICAgICAgY29uc29sZS5sb2coYC0gQW5hbHlzaXMgR2VuZXJhdGVkOiAkeyEhcGFyc2VkRGF0YS5hbmFseXNpc31gKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHBhcnNlZERhdGEucHJvZmlsZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGFyc2VkRGF0YS5tZXRyaWNzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEuYW5hbHlzaXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGFyc2VkRGF0YS5wcm9maWxlcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBleHBlY3QocGFyc2VkRGF0YS5tZXRyaWNzLmxlbmd0aCkudG9CZSgzKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJiZWZvcmVBbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInZhbHVlIiwiZ2V0SXRlbSIsImplc3QiLCJmbiIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJ3cml0YWJsZSIsIm5hdmlnYXRvciIsImdsb2JhbCIsImZldGNoIiwidXJsIiwiaW5jbHVkZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwianNvbiIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic291cmNlIiwic3VjY2VzcyIsImFuYWx5dGljcyIsInRvdGFsVmlld3MiLCJlbmdhZ2VtZW50IiwidXNlclNhdGlzZmFjdGlvbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsInBlcmZvcm1hbmNlUHJvZmlsZXIiLCJpdCIsImNvbXBvbmVudE5hbWUiLCJzdGFydFByb2ZpbGluZyIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93Iiwic3RhcnRNZW1vcnkiLCJtZW1vcnkiLCJ1c2VkSlNIZWFwU2l6ZSIsImFjdCIsInJlbmRlciIsIkJyb3dzZXJSb3V0ZXIiLCJTdXBlcmlvck1vYmlsZUZlZWQiLCJlbmRUaW1lIiwiZW5kTWVtb3J5IiwibWV0cmljcyIsInN0b3BQcm9maWxpbmciLCJjb25zb2xlIiwibG9nIiwidG90YWxSZW5kZXJUaW1lIiwidG9GaXhlZCIsIm1lbW9yeVBlYWsiLCJvcHRpbWl6YXRpb25TY29yZSIsInJlUmVuZGVyVHJpZ2dlcnMiLCJsZW5ndGgiLCJwZXJmb3JtYW5jZUJvdHRsZW5lY2tzIiwicmVjb21tZW5kYXRpb25zIiwiZXhwZWN0IiwidG9CZSIsInJlbmRlckNvdW50IiwidG9CZUdyZWF0ZXJUaGFuIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJwcm9maWxlIiwiY3JlYXRlQ29tcG9uZW50UHJvZmlsZSIsIm5hbWUiLCJkZXB0aCIsImlzT3B0aW1pemVkIiwib3B0aW1pemF0aW9uUG90ZW50aWFsIiwidG9Db250YWluIiwiY29tcG9uZW50cyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImFuYWx5c2lzIiwiZ2VuZXJhdGVQZXJmb3JtYW5jZUFuYWx5c2lzIiwib3ZlcmFsbFNjb3JlIiwiY3JpdGljYWxJc3N1ZXMiLCJvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzIiwibWVtb3J5TGVha3MiLCJyZW5kZXJPcHRpbWl6YXRpb25zIiwibmV0d29ya09wdGltaXphdGlvbnMiLCJhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyIsImVzdGltYXRlZEltcHJvdmVtZW50IiwiQXJyYXkiLCJpc0FycmF5IiwibWVtb3J5QXZlcmFnZSIsImZpbHRlciIsImIiLCJtZW1vcnlSZWNvbW1lbmRhdGlvbnMiLCJyIiwiZm9yRWFjaCIsInJlYyIsImkiLCJtZW1vcnlMZWFrSW5kaWNhdG9ycyIsImluZGljYXRvciIsIm5ldHdvcmtSZWNvbW1lbmRhdGlvbnMiLCJ0b0JlRGVmaW5lZCIsImFjY2Vzc2liaWxpdHlSZWNvbW1lbmRhdGlvbnMiLCJzY3JlZW5SZWFkZXJSZWNvbW1lbmRhdGlvbnMiLCJhdmVyYWdlUmVuZGVyVGltZSIsImV4cG9ydGVkRGF0YSIsImV4cG9ydFByb2ZpbGluZ0RhdGEiLCJwYXJzZWREYXRhIiwiSlNPTiIsInBhcnNlIiwicHJvZmlsZXMiXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDOzs7Ozs4REFFaUI7d0JBQzJCO2dDQUNmOzJFQUNDO3FDQUN3Qzs7Ozs7O0FBRXZFLDJDQUEyQztBQUMzQ0EsVUFBVTtJQUNSLGdEQUFnRDtJQUNoREMsT0FBT0MsY0FBYyxDQUFDQyxRQUFRLGdCQUFnQjtRQUM1Q0MsT0FBTztZQUNMQyxTQUFTQyxLQUFLQyxFQUFFO1lBQ2hCQyxTQUFTRixLQUFLQyxFQUFFO1lBQ2hCRSxZQUFZSCxLQUFLQyxFQUFFO1lBQ25CRyxPQUFPSixLQUFLQyxFQUFFO1FBQ2hCO1FBQ0FJLFVBQVU7SUFDWjtJQUVBLG1DQUFtQztJQUNuQ1YsT0FBT0MsY0FBYyxDQUFDVSxXQUFXLFVBQVU7UUFDekNSLE9BQU87UUFDUE8sVUFBVTtJQUNaO0lBRUEsaUNBQWlDO0lBQ2pDRSxPQUFPQyxLQUFLLEdBQUdSLEtBQUtDLEVBQUUsQ0FBQyxDQUFDUTtRQUN0QixJQUFJQSxJQUFJQyxRQUFRLENBQUMsZUFBZTtZQUM5QixPQUFPQyxRQUFRQyxPQUFPLENBQUM7Z0JBQ3JCQyxJQUFJO2dCQUNKQyxNQUFNLElBQU1ILFFBQVFDLE9BQU8sQ0FBQzt3QkFDMUI7NEJBQ0VHLElBQUk7NEJBQ0pDLE9BQU87NEJBQ1BDLGFBQWE7NEJBQ2JDLFVBQVU7NEJB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