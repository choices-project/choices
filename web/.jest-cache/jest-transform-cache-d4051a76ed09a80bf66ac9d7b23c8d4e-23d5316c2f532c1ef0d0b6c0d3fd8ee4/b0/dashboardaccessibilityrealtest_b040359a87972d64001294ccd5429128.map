{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/components/pages/dashboard-accessibility-real.test.tsx"],"sourcesContent":["/**\n * Dashboard Accessibility Tests - REAL FUNCTIONALITY\n * \n * Tests accessibility compliance for the SuperiorMobileFeed component:\n * - WCAG 2.1 AA compliance\n * - Screen reader compatibility\n * - Keyboard navigation\n * - Color contrast validation\n * - Focus management\n * - ARIA attributes\n * - Mobile accessibility\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { BrowserRouter } from 'react-router-dom';\nimport SuperiorMobileFeed from '@/features/feeds/components/SuperiorMobileFeed';\nimport { T } from '@/lib/testing/testIds';\n\n// Use real functionality - minimal mocking only for test environment setup\n\n// Mock localStorage for component functionality\nObject.defineProperty(window, 'localStorage', {\n  value: {\n    getItem: jest.fn(),\n    setItem: jest.fn(),\n    removeItem: jest.fn(),\n    clear: jest.fn(),\n  },\n  writable: true,\n});\n\n// Mock navigator for online status\nObject.defineProperty(navigator, 'onLine', {\n  value: true,\n  writable: true,\n});\n\n// Mock Notification API\nObject.defineProperty(window, 'Notification', {\n  value: {\n    permission: 'granted',\n    requestPermission: jest.fn().mockResolvedValue('granted'),\n  },\n  writable: true,\n});\n\n// Mock Service Worker\nObject.defineProperty(navigator, 'serviceWorker', {\n  value: {\n    register: jest.fn().mockResolvedValue({\n      installing: null,\n      waiting: null,\n      active: null,\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n    }),\n  },\n  writable: true,\n});\n\ndescribe('Dashboard Accessibility Tests - Real Functionality', () => {\n  beforeEach(() => {\n    // Clear any previous state\n    jest.clearAllMocks();\n  });\n\n  describe('WCAG 2.1 AA Compliance', () => {\n    it('should have proper heading hierarchy', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for main heading\n      const mainHeading = screen.getByRole('heading', { level: 1 });\n      expect(mainHeading).toBeInTheDocument();\n    });\n\n    it('should have proper ARIA landmarks', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for main landmark\n      const main = screen.getByRole('main');\n      expect(main).toBeInTheDocument();\n\n      // Check for navigation landmark\n      const navigation = screen.getByRole('navigation');\n      expect(navigation).toBeInTheDocument();\n    });\n\n    it('should have proper form labels and controls', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for form controls\n      const inputs = screen.getAllByRole('textbox');\n      inputs.forEach(input => {\n        expect(input).toHaveAttribute('aria-label');\n      });\n    });\n\n    it('should have proper button accessibility', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check that buttons have proper accessibility attributes\n      const buttons = screen.getAllByRole('button');\n      buttons.forEach(button => {\n        expect(button).toHaveAttribute('aria-label');\n      });\n    });\n  });\n\n  describe('Screen Reader Compatibility', () => {\n    it('should announce dynamic content changes', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for live regions\n      const liveRegions = screen.getAllByTestId(T.accessibility.liveRegion);\n      expect(liveRegions.length).toBeGreaterThan(0);\n    });\n\n    it('should have proper ARIA descriptions for complex elements', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for articles with proper descriptions\n      const articles = screen.getAllByRole('article');\n      articles.forEach(article => {\n        expect(article).toHaveAttribute('aria-describedby');\n      });\n    });\n\n    it('should announce errors to screen readers', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Trigger error alert\n      const triggerButton = screen.getByText('Trigger Test Error');\n      await userEvent.click(triggerButton);\n\n      // Check for error announcements\n      const alerts = screen.getAllByRole('alert');\n      expect(alerts.length).toBeGreaterThan(0);\n    });\n\n    it('should provide accessible error messages', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Trigger error alert\n      const triggerButton = screen.getByText('Trigger Test Error');\n      await userEvent.click(triggerButton);\n\n      // Check for error messages\n      const errorMessages = screen.getAllByRole('alert');\n      expect(errorMessages.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Keyboard Navigation', () => {\n    it('should be fully navigable with keyboard', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test keyboard navigation\n      const firstButton = screen.getAllByRole('button')[0];\n      if (firstButton) {\n        firstButton.focus();\n        expect(document.activeElement).toBe(firstButton);\n      }\n    });\n\n    it('should have proper tab order', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for proper tab order\n      const interactiveElements = screen.getAllByRole('button');\n      interactiveElements.forEach(element => {\n        expect(element).toHaveAttribute('tabIndex');\n      });\n    });\n\n    it('should handle keyboard shortcuts', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test keyboard shortcuts\n      const button = screen.getAllByRole('button')[0];\n      if (button) {\n        fireEvent.keyDown(button, { key: 'Enter' });\n        expect(button).toBeInTheDocument();\n      }\n    });\n\n    it('should not rely solely on color for information', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check that information is not conveyed by color alone\n      const statusElements = screen.getAllByTestId(T.accessibility.status);\n      statusElements.forEach(element => {\n        expect(element).toHaveTextContent(/Online|Offline|Loading|Refreshing/);\n      });\n    });\n\n    it('should manage focus properly on navigation', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for proper focus management\n      const links = screen.getAllByRole('link');\n      links.forEach(link => {\n        expect(link).toHaveAttribute('tabIndex');\n      });\n    });\n  });\n\n  describe('Mobile Accessibility', () => {\n    it('should be accessible on mobile devices', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for mobile accessibility\n      const buttons = screen.getAllByRole('button');\n      buttons.forEach(button => {\n        const rect = button.getBoundingClientRect();\n        expect(rect.width).toBeGreaterThanOrEqual(44);\n        expect(rect.height).toBeGreaterThanOrEqual(44);\n      });\n    });\n\n    it('should support touch accessibility', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for touch accessibility\n      const interactiveElements = screen.getAllByRole('button');\n      interactiveElements.forEach(element => {\n        expect(element).toHaveAttribute('tabIndex');\n      });\n    });\n\n    it('should have proper ARIA attributes on all interactive elements', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for proper ARIA attributes\n      const buttons = screen.getAllByRole('button');\n      buttons.forEach(button => {\n        expect(button).toHaveAttribute('aria-label');\n      });\n    });\n\n    it('should have proper ARIA states and properties', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for proper ARIA states\n      const expandableElements = screen.getAllByRole('button');\n      expandableElements.forEach(element => {\n        if (element.getAttribute('aria-expanded') !== null) {\n          expect(element).toHaveAttribute('aria-expanded');\n        }\n      });\n    });\n  });\n\n  describe('Real Functionality', () => {\n    it('should use real component logic', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should use real logic, not mocks\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n\n    it('should handle real accessibility features', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should handle real accessibility features\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n\n    it('should use real state management', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should use real state management\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["Object","defineProperty","window","value","getItem","jest","fn","setItem","removeItem","clear","writable","navigator","permission","requestPermission","mockResolvedValue","register","installing","waiting","active","addEventListener","removeEventListener","describe","beforeEach","clearAllMocks","it","render","BrowserRouter","SuperiorMobileFeed","mainHeading","screen","getByRole","level","expect","toBeInTheDocument","main","navigation","inputs","getAllByRole","forEach","input","toHaveAttribute","buttons","button","liveRegions","getAllByTestId","T","accessibility","liveRegion","length","toBeGreaterThan","articles","article","triggerButton","getByText","userEvent","click","alerts","errorMessages","firstButton","focus","document","activeElement","toBe","interactiveElements","element","fireEvent","keyDown","key","statusElements","status","toHaveTextContent","links","link","rect","getBoundingClientRect","width","toBeGreaterThanOrEqual","height","expandableElements","getAttribute"],"mappings":"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"}