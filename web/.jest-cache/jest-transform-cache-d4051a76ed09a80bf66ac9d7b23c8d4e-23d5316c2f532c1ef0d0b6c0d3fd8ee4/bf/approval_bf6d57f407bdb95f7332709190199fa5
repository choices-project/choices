2d8b4d05f23c9e4b8ec973d062216e18
/**
 * Approval Voting Strategy
 * 
 * Implements approval voting where voters can approve (vote for) multiple options.
 * Results show approval scores for each option, with the highest scoring option winning.
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "ApprovalStrategy", {
    enumerable: true,
    get: function() {
        return ApprovalStrategy;
    }
});
const _logger = require("../../utils/logger");
class ApprovalStrategy {
    getVotingMethod() {
        return "approval";
    }
    async validateVote(request, poll) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const voteData = request.voteData;
            // Validate approvals array exists and is not empty
            if (!voteData.approvals || !Array.isArray(voteData.approvals)) {
                return {
                    valid: false,
                    isValid: false,
                    error: "Approval votes must be an array",
                    errors: [
                        "Approval votes must be an array"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate approvals array is not empty
            if (voteData.approvals.length === 0) {
                return {
                    valid: false,
                    isValid: false,
                    error: "At least one approval is required",
                    errors: [
                        "At least one approval is required"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate all approvals are valid integers
            for (const approval of voteData.approvals){
                if (typeof approval !== "number" || !Number.isInteger(approval)) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Approval votes must be integers",
                        errors: [
                            "Approval votes must be integers"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                if (approval < 0 || approval >= poll.options.length) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Invalid option selected",
                        errors: [
                            "Invalid option selected"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
            }
            // Check for duplicate approvals
            const uniqueApprovals = new Set(voteData.approvals);
            if (uniqueApprovals.size !== voteData.approvals.length) {
                return {
                    valid: false,
                    isValid: false,
                    error: "Duplicate approvals are not allowed",
                    errors: [
                        "Duplicate approvals are not allowed"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Check maximum approvals limit
            const maxApprovals = poll.votingConfig.maxChoices || poll.options.length;
            if (voteData.approvals.length > maxApprovals) {
                return {
                    valid: false,
                    isValid: false,
                    error: `Maximum ${maxApprovals} approvals allowed`,
                    errors: [
                        `Maximum ${maxApprovals} approvals allowed`
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            (0, _logger.devLog)("Approval vote validated successfully", {
                pollId: request.pollId,
                approvals: voteData.approvals,
                userId: request.userId
            });
            return {
                valid: true,
                isValid: true,
                requiresAuthentication: false,
                requiresTokens: false
            };
        } catch (error) {
            (0, _logger.devLog)("Approval vote validation error:", {
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                valid: false,
                isValid: false,
                error: "Approval vote validation failed",
                errors: [
                    "Approval vote validation failed"
                ],
                requiresAuthentication: false,
                requiresTokens: false
            };
        }
    }
    async processVote(request, poll) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const voteData = request.voteData;
            // Create vote data for storage
            const voteRecord = {
                id: `vote_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                pollId: request.pollId,
                userId: request.userId,
                approvals: voteData.approvals,
                privacyLevel: "standard",
                auditReceipt: `audit_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                timestamp: new Date(),
                ipAddress: request.ipAddress,
                userAgent: request.userAgent
            };
            (0, _logger.devLog)("Approval vote processed successfully", {
                pollId: request.pollId,
                userId: request.userId,
                approvals: voteData.approvals,
                voteId: voteRecord.id
            });
            return {
                success: true,
                voteId: voteRecord.id,
                message: "Vote recorded successfully",
                pollId: request.pollId
            };
        } catch (error) {
            (0, _logger.devLog)("Approval vote processing error:", {
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                success: false,
                error: "Failed to process approval vote",
                message: "Failed to process approval vote",
                pollId: request.pollId
            };
        }
    }
    async calculateResults(poll, votes) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const startTime = Date.now();
            // Initialize tracking objects
            const approvalScores = {};
            const optionVotes = {};
            const approvalPercentages = {};
            const optionPercentages = {};
            // Initialize all options with zero scores
            poll.options.forEach((option)=>{
                approvalScores[option.id] = 0;
                optionVotes[option.id] = 0;
                approvalPercentages[option.id] = 0;
                optionPercentages[option.id] = 0;
            });
            // Process each vote
            votes.forEach((vote)=>{
                if (vote.voteData?.approvals) {
                    vote.voteData.approvals.forEach((approval)=>{
                        const option = poll.options[approval];
                        if (option?.id) {
                            approvalScores[option.id] = (approvalScores[option.id] || 0) + 1;
                            optionVotes[option.id] = (optionVotes[option.id] || 0) + 1;
                        }
                    });
                }
            });
            const totalVotes = votes.length;
            // Calculate percentages
            if (totalVotes > 0) {
                Object.keys(approvalScores).forEach((optionId)=>{
                    const approvalScore = approvalScores[optionId];
                    const optionVote = optionVotes[optionId];
                    if (approvalScore !== undefined) {
                        approvalPercentages[optionId] = approvalScore / totalVotes * 100;
                    }
                    if (optionVote !== undefined) {
                        optionPercentages[optionId] = optionVote / totalVotes * 100;
                    }
                });
            }
            // Find winner (highest approval score)
            let winner;
            let winnerVotes = 0;
            let winnerPercentage = 0;
            if (totalVotes > 0) {
                Object.entries(approvalScores).forEach(([optionId, score])=>{
                    if (score > winnerVotes) {
                        winner = optionId;
                        winnerVotes = score;
                        winnerPercentage = approvalPercentages[optionId] || 0;
                    }
                });
            }
            const results = {
                winner,
                winnerVotes,
                winnerPercentage,
                optionVotes,
                optionPercentages,
                abstentions: 0,
                abstentionPercentage: 0
            };
            (0, _logger.devLog)("Approval results calculated", {
                pollId: poll.id,
                totalVotes,
                winner,
                winnerVotes,
                winnerPercentage,
                calculationTime: Date.now() - startTime
            });
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes,
                participationRate: totalVotes / 100,
                results,
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: Date.now() - startTime,
                    method: "approval"
                }
            };
        } catch (error) {
            (0, _logger.devLog)("Approval results calculation error:", {
                error: error instanceof Error ? error.message : String(error)
            });
            // Return empty results on error
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes: 0,
                participationRate: 0,
                results: {
                    winner: undefined,
                    winnerVotes: 0,
                    winnerPercentage: 0,
                    optionVotes: {},
                    optionPercentages: {},
                    abstentions: 0,
                    abstentionPercentage: 0
                },
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: 0,
                    error: error instanceof Error ? error.message : "Unknown error"
                }
            };
        }
    }
    getConfiguration() {
        return {
            method: "approval",
            description: "Voters can approve multiple options",
            allowsMultipleSelections: true,
            requiresRanking: false,
            maxSelections: "unlimited"
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvdm90ZS9zdHJhdGVnaWVzL2FwcHJvdmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXBwcm92YWwgVm90aW5nIFN0cmF0ZWd5XG4gKiBcbiAqIEltcGxlbWVudHMgYXBwcm92YWwgdm90aW5nIHdoZXJlIHZvdGVycyBjYW4gYXBwcm92ZSAodm90ZSBmb3IpIG11bHRpcGxlIG9wdGlvbnMuXG4gKiBSZXN1bHRzIHNob3cgYXBwcm92YWwgc2NvcmVzIGZvciBlYWNoIG9wdGlvbiwgd2l0aCB0aGUgaGlnaGVzdCBzY29yaW5nIG9wdGlvbiB3aW5uaW5nLlxuICogXG4gKiBDcmVhdGVkOiBTZXB0ZW1iZXIgMTUsIDIwMjVcbiAqIFVwZGF0ZWQ6IFNlcHRlbWJlciAxNSwgMjAyNVxuICovXG5cbmltcG9ydCB7IGRldkxvZyB9IGZyb20gJ0AvbGliL3V0aWxzL2xvZ2dlcic7XG5cbmltcG9ydCB0eXBlIHsgXG4gIFZvdGluZ1N0cmF0ZWd5LCBcbiAgVm90ZVJlcXVlc3QsIFxuICBWb3RlUmVzcG9uc2UsIFxuICBWb3RlVmFsaWRhdGlvbiwgXG4gIFBvbGxEYXRhLCBcbiAgVm90ZURhdGEsIFxuICBSZXN1bHRzRGF0YSxcbiAgVm90aW5nTWV0aG9kLFxuICBQb2xsUmVzdWx0c1xufSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBBcHByb3ZhbFN0cmF0ZWd5IGltcGxlbWVudHMgVm90aW5nU3RyYXRlZ3kge1xuICBcbiAgZ2V0Vm90aW5nTWV0aG9kKCk6IFZvdGluZ01ldGhvZCB7XG4gICAgcmV0dXJuICdhcHByb3ZhbCc7XG4gIH1cblxuICBhc3luYyB2YWxpZGF0ZVZvdGUocmVxdWVzdDogVm90ZVJlcXVlc3QsIHBvbGw6IFBvbGxEYXRhKTogUHJvbWlzZTxWb3RlVmFsaWRhdGlvbj4ge1xuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyBTYXRpc2Z5IHJlcXVpcmUtYXdhaXQgcnVsZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHJlcXVlc3Qudm90ZURhdGE7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFwcHJvdmFscyBhcnJheSBleGlzdHMgYW5kIGlzIG5vdCBlbXB0eVxuICAgICAgaWYgKCF2b3RlRGF0YS5hcHByb3ZhbHMgfHwgIUFycmF5LmlzQXJyYXkodm90ZURhdGEuYXBwcm92YWxzKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0FwcHJvdmFsIHZvdGVzIG11c3QgYmUgYW4gYXJyYXknLFxuICAgICAgICAgIGVycm9yczogWydBcHByb3ZhbCB2b3RlcyBtdXN0IGJlIGFuIGFycmF5J10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFwcHJvdmFscyBhcnJheSBpcyBub3QgZW1wdHlcbiAgICAgIGlmICh2b3RlRGF0YS5hcHByb3ZhbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQXQgbGVhc3Qgb25lIGFwcHJvdmFsIGlzIHJlcXVpcmVkJyxcbiAgICAgICAgICBlcnJvcnM6IFsnQXQgbGVhc3Qgb25lIGFwcHJvdmFsIGlzIHJlcXVpcmVkJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbCBhcHByb3ZhbHMgYXJlIHZhbGlkIGludGVnZXJzXG4gICAgICBmb3IgKGNvbnN0IGFwcHJvdmFsIG9mIHZvdGVEYXRhLmFwcHJvdmFscykge1xuICAgICAgICBpZiAodHlwZW9mIGFwcHJvdmFsICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihhcHByb3ZhbCkpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogJ0FwcHJvdmFsIHZvdGVzIG11c3QgYmUgaW50ZWdlcnMnLFxuICAgICAgICAgICAgZXJyb3JzOiBbJ0FwcHJvdmFsIHZvdGVzIG11c3QgYmUgaW50ZWdlcnMnXSxcbiAgICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhcHByb3ZhbCA8IDAgfHwgYXBwcm92YWwgPj0gcG9sbC5vcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBvcHRpb24gc2VsZWN0ZWQnLFxuICAgICAgICAgICAgZXJyb3JzOiBbJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGVkJ10sXG4gICAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBhcHByb3ZhbHNcbiAgICAgIGNvbnN0IHVuaXF1ZUFwcHJvdmFscyA9IG5ldyBTZXQodm90ZURhdGEuYXBwcm92YWxzKTtcbiAgICAgIGlmICh1bmlxdWVBcHByb3ZhbHMuc2l6ZSAhPT0gdm90ZURhdGEuYXBwcm92YWxzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0R1cGxpY2F0ZSBhcHByb3ZhbHMgYXJlIG5vdCBhbGxvd2VkJyxcbiAgICAgICAgICBlcnJvcnM6IFsnRHVwbGljYXRlIGFwcHJvdmFscyBhcmUgbm90IGFsbG93ZWQnXSxcbiAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgbWF4aW11bSBhcHByb3ZhbHMgbGltaXRcbiAgICAgIGNvbnN0IG1heEFwcHJvdmFscyA9IHBvbGwudm90aW5nQ29uZmlnLm1heENob2ljZXMgfHwgcG9sbC5vcHRpb25zLmxlbmd0aDtcbiAgICAgIGlmICh2b3RlRGF0YS5hcHByb3ZhbHMubGVuZ3RoID4gbWF4QXBwcm92YWxzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBgTWF4aW11bSAke21heEFwcHJvdmFsc30gYXBwcm92YWxzIGFsbG93ZWRgLFxuICAgICAgICAgIGVycm9yczogW2BNYXhpbXVtICR7bWF4QXBwcm92YWxzfSBhcHByb3ZhbHMgYWxsb3dlZGBdLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHZvdGUgdmFsaWRhdGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZCxcbiAgICAgICAgYXBwcm92YWxzOiB2b3RlRGF0YS5hcHByb3ZhbHMsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgaXNWYWxpZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHZvdGUgdmFsaWRhdGlvbiBlcnJvcjonLCB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0FwcHJvdmFsIHZvdGUgdmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICBlcnJvcnM6IFsnQXBwcm92YWwgdm90ZSB2YWxpZGF0aW9uIGZhaWxlZCddLFxuICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3NWb3RlKHJlcXVlc3Q6IFZvdGVSZXF1ZXN0LCBwb2xsOiBQb2xsRGF0YSk6IFByb21pc2U8Vm90ZVJlc3BvbnNlPiB7XG4gICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKCk7IC8vIFNhdGlzZnkgcmVxdWlyZS1hd2FpdCBydWxlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZvdGVEYXRhID0gcmVxdWVzdC52b3RlRGF0YTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHZvdGUgZGF0YSBmb3Igc3RvcmFnZVxuICAgICAgY29uc3Qgdm90ZVJlY29yZDogVm90ZURhdGEgPSB7XG4gICAgICAgIGlkOiBgdm90ZV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWQsXG4gICAgICAgIGFwcHJvdmFsczogdm90ZURhdGEuYXBwcm92YWxzLFxuICAgICAgICBwcml2YWN5TGV2ZWw6ICdzdGFuZGFyZCcsXG4gICAgICAgIGF1ZGl0UmVjZWlwdDogYGF1ZGl0XyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBpcEFkZHJlc3M6IHJlcXVlc3QuaXBBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IHJlcXVlc3QudXNlckFnZW50XG4gICAgICB9O1xuXG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHZvdGUgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZCxcbiAgICAgICAgdXNlcklkOiByZXF1ZXN0LnVzZXJJZCxcbiAgICAgICAgYXBwcm92YWxzOiB2b3RlRGF0YS5hcHByb3ZhbHMsXG4gICAgICAgIHZvdGVJZDogdm90ZVJlY29yZC5pZFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHZvdGVJZDogdm90ZVJlY29yZC5pZCxcbiAgICAgICAgbWVzc2FnZTogJ1ZvdGUgcmVjb3JkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHZvdGUgcHJvY2Vzc2luZyBlcnJvcjonLCB7IGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcikgfSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBhcHByb3ZhbCB2b3RlJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBwcm9jZXNzIGFwcHJvdmFsIHZvdGUnLFxuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNhbGN1bGF0ZVJlc3VsdHMocG9sbDogUG9sbERhdGEsIHZvdGVzOiBWb3RlRGF0YVtdKTogUHJvbWlzZTxSZXN1bHRzRGF0YT4ge1xuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyBTYXRpc2Z5IHJlcXVpcmUtYXdhaXQgcnVsZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRyYWNraW5nIG9iamVjdHNcbiAgICAgIGNvbnN0IGFwcHJvdmFsU2NvcmVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgICBjb25zdCBvcHRpb25Wb3RlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgY29uc3QgYXBwcm92YWxQZXJjZW50YWdlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgY29uc3Qgb3B0aW9uUGVyY2VudGFnZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBhbGwgb3B0aW9ucyB3aXRoIHplcm8gc2NvcmVzXG4gICAgICBwb2xsLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBhcHByb3ZhbFNjb3Jlc1tvcHRpb24uaWRdID0gMDtcbiAgICAgICAgb3B0aW9uVm90ZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIGFwcHJvdmFsUGVyY2VudGFnZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbi5pZF0gPSAwO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB2b3RlXG4gICAgICB2b3Rlcy5mb3JFYWNoKHZvdGUgPT4ge1xuICAgICAgICBpZiAodm90ZS52b3RlRGF0YT8uYXBwcm92YWxzKSB7XG4gICAgICAgICAgdm90ZS52b3RlRGF0YS5hcHByb3ZhbHMuZm9yRWFjaChhcHByb3ZhbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBwb2xsLm9wdGlvbnNbYXBwcm92YWxdO1xuICAgICAgICAgICAgaWYgKG9wdGlvbj8uaWQpIHtcbiAgICAgICAgICAgICAgYXBwcm92YWxTY29yZXNbb3B0aW9uLmlkXSA9IChhcHByb3ZhbFNjb3Jlc1tvcHRpb24uaWRdIHx8IDApICsgMTtcbiAgICAgICAgICAgICAgb3B0aW9uVm90ZXNbb3B0aW9uLmlkXSA9IChvcHRpb25Wb3Rlc1tvcHRpb24uaWRdIHx8IDApICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsVm90ZXMgPSB2b3Rlcy5sZW5ndGg7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBwZXJjZW50YWdlc1xuICAgICAgaWYgKHRvdGFsVm90ZXMgPiAwKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGFwcHJvdmFsU2NvcmVzKS5mb3JFYWNoKG9wdGlvbklkID0+IHtcbiAgICAgICAgICBjb25zdCBhcHByb3ZhbFNjb3JlID0gYXBwcm92YWxTY29yZXNbb3B0aW9uSWRdO1xuICAgICAgICAgIGNvbnN0IG9wdGlvblZvdGUgPSBvcHRpb25Wb3Rlc1tvcHRpb25JZF07XG4gICAgICAgICAgaWYgKGFwcHJvdmFsU2NvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgYXBwcm92YWxQZXJjZW50YWdlc1tvcHRpb25JZF0gPSAoYXBwcm92YWxTY29yZSAvIHRvdGFsVm90ZXMpICogMTAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3B0aW9uVm90ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25QZXJjZW50YWdlc1tvcHRpb25JZF0gPSAob3B0aW9uVm90ZSAvIHRvdGFsVm90ZXMpICogMTAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpbmQgd2lubmVyIChoaWdoZXN0IGFwcHJvdmFsIHNjb3JlKVxuICAgICAgbGV0IHdpbm5lcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgbGV0IHdpbm5lclZvdGVzID0gMDtcbiAgICAgIGxldCB3aW5uZXJQZXJjZW50YWdlID0gMDtcblxuICAgICAgaWYgKHRvdGFsVm90ZXMgPiAwKSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGFwcHJvdmFsU2NvcmVzKS5mb3JFYWNoKChbb3B0aW9uSWQsIHNjb3JlXSkgPT4ge1xuICAgICAgICAgIGlmIChzY29yZSA+IHdpbm5lclZvdGVzKSB7XG4gICAgICAgICAgICB3aW5uZXIgPSBvcHRpb25JZDtcbiAgICAgICAgICAgIHdpbm5lclZvdGVzID0gc2NvcmU7XG4gICAgICAgICAgICB3aW5uZXJQZXJjZW50YWdlID0gYXBwcm92YWxQZXJjZW50YWdlc1tvcHRpb25JZF0gfHwgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHRzOiBQb2xsUmVzdWx0cyA9IHtcbiAgICAgICAgd2lubmVyLFxuICAgICAgICB3aW5uZXJWb3RlcyxcbiAgICAgICAgd2lubmVyUGVyY2VudGFnZSxcbiAgICAgICAgb3B0aW9uVm90ZXMsXG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzLFxuICAgICAgICBhYnN0ZW50aW9uczogMCxcbiAgICAgICAgYWJzdGVudGlvblBlcmNlbnRhZ2U6IDBcbiAgICAgIH07XG5cbiAgICAgIGRldkxvZygnQXBwcm92YWwgcmVzdWx0cyBjYWxjdWxhdGVkJywge1xuICAgICAgICBwb2xsSWQ6IHBvbGwuaWQsXG4gICAgICAgIHRvdGFsVm90ZXMsXG4gICAgICAgIHdpbm5lcixcbiAgICAgICAgd2lubmVyVm90ZXMsXG4gICAgICAgIHdpbm5lclBlcmNlbnRhZ2UsXG4gICAgICAgIGNhbGN1bGF0aW9uVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBvbGxJZDogcG9sbC5pZCxcbiAgICAgICAgdm90aW5nTWV0aG9kOiBwb2xsLnZvdGluZ01ldGhvZCxcbiAgICAgICAgdG90YWxWb3RlcyxcbiAgICAgICAgcGFydGljaXBhdGlvblJhdGU6IHRvdGFsVm90ZXMgLyAxMDAsIC8vIE1vY2sgcGFydGljaXBhdGlvbiByYXRlXG4gICAgICAgIHJlc3VsdHMsXG4gICAgICAgIGNhbGN1bGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGNhbGN1bGF0aW9uVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSxcbiAgICAgICAgICBtZXRob2Q6ICdhcHByb3ZhbCdcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHJlc3VsdHMgY2FsY3VsYXRpb24gZXJyb3I6JywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH0pO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gZW1wdHkgcmVzdWx0cyBvbiBlcnJvclxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9sbElkOiBwb2xsLmlkLFxuICAgICAgICB2b3RpbmdNZXRob2Q6IHBvbGwudm90aW5nTWV0aG9kLFxuICAgICAgICB0b3RhbFZvdGVzOiAwLFxuICAgICAgICBwYXJ0aWNpcGF0aW9uUmF0ZTogMCxcbiAgICAgICAgcmVzdWx0czoge1xuICAgICAgICAgIHdpbm5lcjogdW5kZWZpbmVkLFxuICAgICAgICAgIHdpbm5lclZvdGVzOiAwLFxuICAgICAgICAgIHdpbm5lclBlcmNlbnRhZ2U6IDAsXG4gICAgICAgICAgb3B0aW9uVm90ZXM6IHt9LFxuICAgICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzOiB7fSxcbiAgICAgICAgICBhYnN0ZW50aW9uczogMCxcbiAgICAgICAgICBhYnN0ZW50aW9uUGVyY2VudGFnZTogMFxuICAgICAgICB9LFxuICAgICAgICBjYWxjdWxhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBjYWxjdWxhdGlvblRpbWU6IDAsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29uZmlndXJhdGlvbigpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogJ2FwcHJvdmFsJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVm90ZXJzIGNhbiBhcHByb3ZlIG11bHRpcGxlIG9wdGlvbnMnLFxuICAgICAgYWxsb3dzTXVsdGlwbGVTZWxlY3Rpb25zOiB0cnVlLFxuICAgICAgcmVxdWlyZXNSYW5raW5nOiBmYWxzZSxcbiAgICAgIG1heFNlbGVjdGlvbnM6ICd1bmxpbWl0ZWQnXG4gICAgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJBcHByb3ZhbFN0cmF0ZWd5IiwiZ2V0Vm90aW5nTWV0aG9kIiwidmFsaWRhdGVWb3RlIiwicmVxdWVzdCIsInBvbGwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInZvdGVEYXRhIiwiYXBwcm92YWxzIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsaWQiLCJpc1ZhbGlkIiwiZXJyb3IiLCJlcnJvcnMiLCJyZXF1aXJlc0F1dGhlbnRpY2F0aW9uIiwicmVxdWlyZXNUb2tlbnMiLCJsZW5ndGgiLCJhcHByb3ZhbCIsIk51bWJlciIsImlzSW50ZWdlciIsIm9wdGlvbnMiLCJ1bmlxdWVBcHByb3ZhbHMiLCJTZXQiLCJzaXplIiwibWF4QXBwcm92YWxzIiwidm90aW5nQ29uZmlnIiwibWF4Q2hvaWNlcyIsImRldkxvZyIsInBvbGxJZCIsInVzZXJJZCIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyIsInByb2Nlc3NWb3RlIiwidm90ZVJlY29yZCIsImlkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInByaXZhY3lMZXZlbCIsImF1ZGl0UmVjZWlwdCIsInRpbWVzdGFtcCIsImlwQWRkcmVzcyIsInVzZXJBZ2VudCIsInZvdGVJZCIsInN1Y2Nlc3MiLCJjYWxjdWxhdGVSZXN1bHRzIiwidm90ZXMiLCJzdGFydFRpbWUiLCJhcHByb3ZhbFNjb3JlcyIsIm9wdGlvblZvdGVzIiwiYXBwcm92YWxQZXJjZW50YWdlcyIsIm9wdGlvblBlcmNlbnRhZ2VzIiwiZm9yRWFjaCIsIm9wdGlvbiIsInZvdGUiLCJ0b3RhbFZvdGVzIiwiT2JqZWN0Iiwia2V5cyIsIm9wdGlvbklkIiwiYXBwcm92YWxTY29yZSIsIm9wdGlvblZvdGUiLCJ1bmRlZmluZWQiLCJ3aW5uZXIiLCJ3aW5uZXJWb3RlcyIsIndpbm5lclBlcmNlbnRhZ2UiLCJlbnRyaWVzIiwic2NvcmUiLCJyZXN1bHRzIiwiYWJzdGVudGlvbnMiLCJhYnN0ZW50aW9uUGVyY2VudGFnZSIsImNhbGN1bGF0aW9uVGltZSIsInZvdGluZ01ldGhvZCIsInBhcnRpY2lwYXRpb25SYXRlIiwiY2FsY3VsYXRlZEF0IiwidG9JU09TdHJpbmciLCJtZXRhZGF0YSIsIm1ldGhvZCIsImdldENvbmZpZ3VyYXRpb24iLCJkZXNjcmlwdGlvbiIsImFsbG93c011bHRpcGxlU2VsZWN0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