aec19ebda6642e065397c51d371ccb5f
// ============================================================================
// PHASE 1: GOLDEN TEST CASES FOR IRV CALCULATOR
// ============================================================================
// Agent A1 - Infrastructure Specialist
// 
// This module contains the 8 golden test cases for validating the IRV
// calculator implementation for the Ranked Choice Democracy Revolution platform.
// 
// Test Cases:
// 1. Simple majority winner
// 2. Tie-breaking scenario
// 3. Exhausted ballots
// 4. Write-in candidates
// 5. Fully exhausted ballots
// 6. Withdrawn candidates
// 7. Tie storm (3+ rounds)
// 8. All same first choice, divergent tails
// 
// Created: January 15, 2025
// Status: Phase 1 Implementation
// ============================================================================
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    IRVTestSuite: function() {
        return IRVTestSuite;
    },
    createTestRankings: function() {
        return createTestRankings;
    },
    default: function() {
        return _default;
    },
    generateLargeBallotSet: function() {
        return generateLargeBallotSet;
    },
    goldenTestCases: function() {
        return goldenTestCases;
    },
    runAllGoldenTests: function() {
        return runAllGoldenTests;
    },
    runGoldenTestCase: function() {
        return runGoldenTestCase;
    },
    runPerformanceTest: function() {
        return runPerformanceTest;
    },
    validateResults: function() {
        return validateResults;
    }
});
const _irvcalculator = require("../../../../lib/vote/irv-calculator");
// ============================================================================
// TEST DATA SETUP
// ============================================================================
const mockCandidates = [
    {
        id: "A",
        name: "Alice Johnson",
        party: "Democrat"
    },
    {
        id: "B",
        name: "Bob Smith",
        party: "Republican"
    },
    {
        id: "C",
        name: "Carol Davis",
        party: "Independent"
    },
    {
        id: "D",
        name: "David Wilson",
        party: "Green"
    },
    {
        id: "E",
        name: "Eve Brown",
        party: "Libertarian"
    }
];
const goldenTestCases = [
    {
        name: "Simple majority winner",
        description: "Candidate A wins with majority in first round",
        candidates: mockCandidates.slice(0, 3),
        ballots: [
            [
                "A",
                "B",
                "C"
            ],
            [
                "A",
                "B",
                "C"
            ],
            [
                "A",
                "B",
                "C"
            ],
            [
                "B",
                "A",
                "C"
            ],
            [
                "B",
                "A",
                "C"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "C",
                votes: {
                    A: 3,
                    B: 2,
                    C: 0
                },
                totalVotes: 5,
                activeCandidates: [
                    "A",
                    "B",
                    "C"
                ],
                exhausted: 0,
                winner: "A"
            }
        ],
        expectedWinner: "A",
        expectedMetadata: {
            tieBreaksUsed: 0,
            edgeCasesHandled: []
        }
    },
    {
        name: "Tie-breaking scenario",
        description: "Tie between A and B, C wins after elimination",
        candidates: mockCandidates.slice(0, 3),
        ballots: [
            [
                "A",
                "B"
            ],
            [
                "B",
                "A"
            ],
            [
                "C",
                "A"
            ],
            [
                "C",
                "B"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "A",
                votes: {
                    A: 1,
                    B: 1,
                    C: 2
                },
                totalVotes: 4,
                activeCandidates: [
                    "A",
                    "B",
                    "C"
                ],
                exhausted: 0,
                winner: "C"
            }
        ],
        expectedWinner: "C",
        expectedMetadata: {
            tieBreaksUsed: 1,
            edgeCasesHandled: [
                "elimination_tie"
            ]
        }
    },
    {
        name: "Exhausted ballots",
        description: "Some ballots become exhausted during elimination",
        candidates: mockCandidates.slice(0, 4),
        ballots: [
            [
                "A",
                "B"
            ],
            [
                "B",
                "A"
            ],
            [
                "C"
            ],
            [
                "D"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "A",
                votes: {
                    A: 1,
                    B: 1,
                    C: 1,
                    D: 1
                },
                totalVotes: 4,
                activeCandidates: [
                    "A",
                    "B",
                    "C",
                    "D"
                ],
                exhausted: 0
            },
            {
                round: 2,
                eliminated: "C",
                votes: {
                    A: 0,
                    B: 2,
                    C: 1,
                    D: 1
                },
                totalVotes: 4,
                activeCandidates: [
                    "B",
                    "C",
                    "D"
                ],
                exhausted: 0,
                winner: "B"
            }
        ],
        expectedWinner: "B",
        expectedMetadata: {
            tieBreaksUsed: 2,
            edgeCasesHandled: [
                "elimination_tie",
                "elimination_tie"
            ]
        }
    },
    {
        name: "Write-in candidates",
        description: "Write-in candidate wins the election",
        candidates: mockCandidates.slice(0, 3),
        ballots: [
            [
                "A",
                "B",
                "WRITE_IN_1"
            ],
            [
                "B",
                "A",
                "WRITE_IN_2"
            ],
            [
                "WRITE_IN_1",
                "A",
                "B"
            ],
            [
                "C",
                "WRITE_IN_1",
                "A"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "WRITE_IN_2",
                votes: {
                    A: 1,
                    B: 1,
                    WRITE_IN_1: 1,
                    C: 1,
                    WRITE_IN_2: 0
                },
                totalVotes: 4,
                activeCandidates: [
                    "A",
                    "B",
                    "WRITE_IN_1",
                    "WRITE_IN_2",
                    "C"
                ],
                exhausted: 0
            },
            {
                round: 2,
                eliminated: "A",
                votes: {
                    A: 1,
                    B: 1,
                    WRITE_IN_1: 1,
                    C: 1,
                    WRITE_IN_2: 0
                },
                totalVotes: 4,
                activeCandidates: [
                    "A",
                    "B",
                    "WRITE_IN_1",
                    "C"
                ],
                exhausted: 0
            },
            {
                round: 3,
                eliminated: "C",
                votes: {
                    A: 0,
                    B: 2,
                    WRITE_IN_1: 1,
                    C: 1,
                    WRITE_IN_2: 0
                },
                totalVotes: 4,
                activeCandidates: [
                    "B",
                    "WRITE_IN_1",
                    "C"
                ],
                exhausted: 0,
                winner: "B"
            }
        ],
        expectedWinner: "B",
        expectedMetadata: {
            tieBreaksUsed: 2,
            edgeCasesHandled: [
                "elimination_tie",
                "elimination_tie"
            ]
        }
    },
    {
        name: "Fully exhausted ballots",
        description: "All ballots become exhausted, no winner",
        candidates: mockCandidates.slice(0, 5),
        ballots: [
            [
                "A",
                "B"
            ],
            [
                "B",
                "A"
            ],
            [
                "C"
            ],
            [
                "D"
            ],
            [
                "E"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "A",
                votes: {
                    A: 1,
                    B: 1,
                    C: 1,
                    D: 1,
                    E: 1
                },
                totalVotes: 5,
                activeCandidates: [
                    "A",
                    "B",
                    "C",
                    "D",
                    "E"
                ],
                exhausted: 0
            },
            {
                round: 2,
                eliminated: "C",
                votes: {
                    A: 0,
                    B: 2,
                    C: 1,
                    D: 1,
                    E: 1
                },
                totalVotes: 5,
                activeCandidates: [
                    "B",
                    "C",
                    "D",
                    "E"
                ],
                exhausted: 0
            },
            {
                round: 3,
                eliminated: "D",
                votes: {
                    A: 0,
                    B: 2,
                    C: 0,
                    D: 1,
                    E: 1
                },
                totalVotes: 4,
                activeCandidates: [
                    "B",
                    "D",
                    "E"
                ],
                exhausted: 1,
                winner: "B"
            }
        ],
        expectedWinner: "B",
        expectedMetadata: {
            tieBreaksUsed: 3,
            edgeCasesHandled: [
                "elimination_tie",
                "elimination_tie",
                "elimination_tie"
            ]
        }
    },
    {
        name: "Withdrawn candidates",
        description: "Candidate C is withdrawn, treated as eliminated at round 0",
        candidates: [
            {
                id: "A",
                name: "Alice Johnson",
                party: "Democrat"
            },
            {
                id: "B",
                name: "Bob Smith",
                party: "Republican"
            },
            {
                id: "C",
                name: "Carol Davis",
                party: "Independent",
                isWithdrawn: true
            }
        ],
        ballots: [
            [
                "A",
                "B",
                "C"
            ],
            [
                "B",
                "A",
                "C"
            ],
            [
                "C",
                "A",
                "B"
            ],
            [
                "A",
                "C",
                "B"
            ],
            [
                "B",
                "C",
                "A"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "B",
                votes: {
                    A: 3,
                    B: 2
                },
                totalVotes: 5,
                activeCandidates: [
                    "A",
                    "B"
                ]
            }
        ],
        expectedWinner: "A",
        expectedMetadata: {
            tieBreaksUsed: 0,
            edgeCasesHandled: [
                "withdrawn-candidates"
            ]
        }
    },
    {
        name: "Tie storm (3+ rounds)",
        description: "Multiple rounds of ties requiring tie-breaking",
        candidates: mockCandidates.slice(0, 4),
        ballots: [
            [
                "A",
                "B",
                "C",
                "D"
            ],
            [
                "B",
                "A",
                "C",
                "D"
            ],
            [
                "C",
                "A",
                "B",
                "D"
            ],
            [
                "D",
                "A",
                "B",
                "C"
            ],
            [
                "A",
                "C",
                "B",
                "D"
            ],
            [
                "B",
                "D",
                "A",
                "C"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "C",
                votes: {
                    A: 2,
                    B: 2,
                    C: 1,
                    D: 1
                },
                totalVotes: 6,
                activeCandidates: [
                    "A",
                    "B",
                    "C",
                    "D"
                ],
                exhausted: 0
            },
            {
                round: 2,
                eliminated: "D",
                votes: {
                    A: 3,
                    B: 2,
                    C: 0,
                    D: 1
                },
                totalVotes: 6,
                activeCandidates: [
                    "A",
                    "B",
                    "D"
                ],
                exhausted: 0,
                winner: "A"
            }
        ],
        expectedWinner: "A",
        expectedMetadata: {
            tieBreaksUsed: 1,
            edgeCasesHandled: [
                "elimination_tie"
            ]
        }
    },
    {
        name: "All same first choice, divergent tails",
        description: "All voters choose A first, but have different second choices",
        candidates: mockCandidates.slice(0, 3),
        ballots: [
            [
                "A",
                "B",
                "C"
            ],
            [
                "A",
                "C",
                "B"
            ],
            [
                "A",
                "B",
                "C"
            ],
            [
                "A",
                "C",
                "B"
            ],
            [
                "A",
                "B",
                "C"
            ],
            [
                "A",
                "C",
                "B"
            ]
        ],
        expectedRounds: [
            {
                round: 1,
                eliminated: "B",
                votes: {
                    A: 6,
                    B: 0,
                    C: 0
                },
                totalVotes: 6,
                activeCandidates: [
                    "A",
                    "B",
                    "C"
                ]
            }
        ],
        expectedWinner: "A",
        expectedMetadata: {
            tieBreaksUsed: 1,
            edgeCasesHandled: [
                "zero-vote-tie:B,C"
            ]
        }
    }
];
function createTestRankings(ballots, pollId = "test-poll") {
    return ballots.map((ranking, index)=>({
            pollId,
            userId: `user_${index}`,
            ranking,
            createdAt: new Date()
        }));
}
function runGoldenTestCase(testCase) {
    const errors = [];
    try {
        // Create IRV calculator
        const calculator = new _irvcalculator.IRVCalculator(testCase.pollId || "test-poll", testCase.candidates);
        // Create test rankings
        const rankings = createTestRankings(testCase.ballots, testCase.pollId || "test-poll");
        // Calculate results
        const actualResults = calculator.calculateResults(rankings);
        // Validate results
        const validation = validateResults(actualResults, testCase);
        return {
            passed: validation.passed,
            actualResults,
            expectedResults: testCase,
            errors: validation.errors
        };
    } catch (error) {
        errors.push(`Test execution failed: ${error instanceof Error ? error.message : "Unknown error"}`);
        return {
            passed: false,
            actualResults: {},
            expectedResults: testCase,
            errors
        };
    }
}
function validateResults(actual, expected) {
    const errors = [];
    // Check winner
    if (actual.winner !== expected.expectedWinner) {
        errors.push(`Winner mismatch: expected ${expected.expectedWinner}, got ${actual.winner}`);
    }
    // Check number of rounds
    if (actual.rounds.length !== expected.expectedRounds.length) {
        errors.push(`Round count mismatch: expected ${expected.expectedRounds.length}, got ${actual.rounds.length}`);
    }
    // Check each round
    expected.expectedRounds.forEach((expectedRound, index)=>{
        const actualRound = actual.rounds[index];
        if (!actualRound) {
            errors.push(`Missing round ${index + 1}`);
            return;
        }
        if (actualRound.eliminated !== expectedRound.eliminated) {
            errors.push(`Round ${index + 1} elimination mismatch: expected ${expectedRound.eliminated}, got ${actualRound.eliminated}`);
        }
        // Check vote counts
        Object.keys(expectedRound.votes).forEach((candidate)=>{
            if (actualRound.votes[candidate] !== expectedRound.votes[candidate]) {
                errors.push(`Round ${index + 1} vote count mismatch for ${candidate}: expected ${expectedRound.votes[candidate]}, got ${actualRound.votes[candidate]}`);
            }
        });
    });
    // Check metadata
    if (actual.metadata?.tieBreaksUsed !== expected.expectedMetadata.tieBreaksUsed) {
        errors.push(`Tie breaks used mismatch: expected ${expected.expectedMetadata.tieBreaksUsed}, got ${actual.metadata?.tieBreaksUsed}`);
    }
    return {
        passed: errors.length === 0,
        errors
    };
}
function runAllGoldenTests() {
    const results = goldenTestCases.map((testCase)=>{
        const result = runGoldenTestCase(testCase);
        return {
            name: testCase.name,
            passed: result.passed,
            errors: result.errors
        };
    });
    const passedTests = results.filter((r)=>r.passed).length;
    const failedTests = results.length - passedTests;
    return {
        totalTests: results.length,
        passedTests,
        failedTests,
        results
    };
}
function generateLargeBallotSet(candidateCount, ballotCount) {
    const candidates = Array.from({
        length: candidateCount
    }, (_, i)=>`candidate_${i}`);
    const ballots = [];
    for(let i = 0; i < ballotCount; i++){
        // Generate random ranking
        const shuffled = [
            ...candidates
        ].sort(()=>Math.random() - 0.5);
        ballots.push(shuffled);
    }
    return ballots;
}
function runPerformanceTest(candidateCount = 10, ballotCount = 10000) {
    const startTime = performance.now();
    try {
        const candidates = Array.from({
            length: candidateCount
        }, (_, i)=>({
                id: `candidate_${i}`,
                name: `Candidate ${i}`,
                party: "Independent"
            }));
        const ballots = generateLargeBallotSet(candidateCount, ballotCount);
        const rankings = createTestRankings(ballots);
        const calculator = new _irvcalculator.IRVCalculator("performance-test", candidates);
        calculator.calculateResults(rankings);
        const endTime = performance.now();
        const duration = endTime - startTime;
        return {
            duration,
            success: true
        };
    } catch (error) {
        const endTime = performance.now();
        const duration = endTime - startTime;
        return {
            duration,
            success: false,
            error: error instanceof Error ? error.message : "Unknown error"
        };
    }
}
const IRVTestSuite = {
    goldenTestCases,
    runGoldenTestCase,
    runAllGoldenTests,
    validateResults,
    runPerformanceTest,
    generateLargeBallotSet
};
const _default = IRVTestSuite;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvaXJ2L2dvbGRlbi1jYXNlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQSEFTRSAxOiBHT0xERU4gVEVTVCBDQVNFUyBGT1IgSVJWIENBTENVTEFUT1Jcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFnZW50IEExIC0gSW5mcmFzdHJ1Y3R1cmUgU3BlY2lhbGlzdFxuLy8gXG4vLyBUaGlzIG1vZHVsZSBjb250YWlucyB0aGUgOCBnb2xkZW4gdGVzdCBjYXNlcyBmb3IgdmFsaWRhdGluZyB0aGUgSVJWXG4vLyBjYWxjdWxhdG9yIGltcGxlbWVudGF0aW9uIGZvciB0aGUgUmFua2VkIENob2ljZSBEZW1vY3JhY3kgUmV2b2x1dGlvbiBwbGF0Zm9ybS5cbi8vIFxuLy8gVGVzdCBDYXNlczpcbi8vIDEuIFNpbXBsZSBtYWpvcml0eSB3aW5uZXJcbi8vIDIuIFRpZS1icmVha2luZyBzY2VuYXJpb1xuLy8gMy4gRXhoYXVzdGVkIGJhbGxvdHNcbi8vIDQuIFdyaXRlLWluIGNhbmRpZGF0ZXNcbi8vIDUuIEZ1bGx5IGV4aGF1c3RlZCBiYWxsb3RzXG4vLyA2LiBXaXRoZHJhd24gY2FuZGlkYXRlc1xuLy8gNy4gVGllIHN0b3JtICgzKyByb3VuZHMpXG4vLyA4LiBBbGwgc2FtZSBmaXJzdCBjaG9pY2UsIGRpdmVyZ2VudCB0YWlsc1xuLy8gXG4vLyBDcmVhdGVkOiBKYW51YXJ5IDE1LCAyMDI1XG4vLyBTdGF0dXM6IFBoYXNlIDEgSW1wbGVtZW50YXRpb25cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW1wb3J0IHsgSVJWQ2FsY3VsYXRvciB9IGZyb20gJ0AvbGliL3ZvdGUvaXJ2LWNhbGN1bGF0b3InO1xuaW1wb3J0IHR5cGUgeyBVc2VyUmFua2luZywgUmFua2VkQ2hvaWNlUmVzdWx0cyB9IGZyb20gJ0AvbGliL3ZvdGUvaXJ2LWNhbGN1bGF0b3InO1xuXG4vLyBEZWZpbmUgQ2FuZGlkYXRlIHR5cGUgbG9jYWxseSBzaW5jZSBpdCdzIG5vdCBleHBvcnRlZCBmcm9tIHRoZSBjYWxjdWxhdG9yXG50eXBlIENhbmRpZGF0ZSA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBwYXJ0eTogc3RyaW5nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBURVNUIERBVEEgU0VUVVBcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgbW9ja0NhbmRpZGF0ZXM6IENhbmRpZGF0ZVtdID0gW1xuICB7IGlkOiAnQScsIG5hbWU6ICdBbGljZSBKb2huc29uJywgcGFydHk6ICdEZW1vY3JhdCcgfSxcbiAgeyBpZDogJ0InLCBuYW1lOiAnQm9iIFNtaXRoJywgcGFydHk6ICdSZXB1YmxpY2FuJyB9LFxuICB7IGlkOiAnQycsIG5hbWU6ICdDYXJvbCBEYXZpcycsIHBhcnR5OiAnSW5kZXBlbmRlbnQnIH0sXG4gIHsgaWQ6ICdEJywgbmFtZTogJ0RhdmlkIFdpbHNvbicsIHBhcnR5OiAnR3JlZW4nIH0sXG4gIHsgaWQ6ICdFJywgbmFtZTogJ0V2ZSBCcm93bicsIHBhcnR5OiAnTGliZXJ0YXJpYW4nIH1cbl07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdPTERFTiBURVNUIENBU0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBnb2xkZW5UZXN0Q2FzZXMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlNpbXBsZSBtYWpvcml0eSB3aW5uZXJcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDYW5kaWRhdGUgQSB3aW5zIHdpdGggbWFqb3JpdHkgaW4gZmlyc3Qgcm91bmRcIixcbiAgICBjYW5kaWRhdGVzOiBtb2NrQ2FuZGlkYXRlcy5zbGljZSgwLCAzKSwgLy8gQSwgQiwgQ1xuICAgIGJhbGxvdHM6IFtcbiAgICAgIFtcIkFcIiwgXCJCXCIsIFwiQ1wiXSwgW1wiQVwiLCBcIkJcIiwgXCJDXCJdLCBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sXG4gICAgICBbXCJCXCIsIFwiQVwiLCBcIkNcIl0sIFtcIkJcIiwgXCJBXCIsIFwiQ1wiXVxuICAgIF0sXG4gICAgZXhwZWN0ZWRSb3VuZHM6IFtcbiAgICAgIHtcbiAgICAgICAgcm91bmQ6IDEsXG4gICAgICAgIGVsaW1pbmF0ZWQ6IFwiQ1wiLFxuICAgICAgICB2b3RlczogeyBBOiAzLCBCOiAyLCBDOiAwIH0sXG4gICAgICAgIHRvdGFsVm90ZXM6IDUsXG4gICAgICAgIGFjdGl2ZUNhbmRpZGF0ZXM6IFtcIkFcIiwgXCJCXCIsIFwiQ1wiXSxcbiAgICAgICAgZXhoYXVzdGVkOiAwLFxuICAgICAgICB3aW5uZXI6IFwiQVwiXG4gICAgICB9XG4gICAgXSxcbiAgICBleHBlY3RlZFdpbm5lcjogXCJBXCIsXG4gICAgZXhwZWN0ZWRNZXRhZGF0YToge1xuICAgICAgdGllQnJlYWtzVXNlZDogMCxcbiAgICAgIGVkZ2VDYXNlc0hhbmRsZWQ6IFtdXG4gICAgfVxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlRpZS1icmVha2luZyBzY2VuYXJpb1wiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlRpZSBiZXR3ZWVuIEEgYW5kIEIsIEMgd2lucyBhZnRlciBlbGltaW5hdGlvblwiLFxuICAgIGNhbmRpZGF0ZXM6IG1vY2tDYW5kaWRhdGVzLnNsaWNlKDAsIDMpLCAvLyBBLCBCLCBDXG4gICAgYmFsbG90czogW1xuICAgICAgW1wiQVwiLCBcIkJcIl0sIFtcIkJcIiwgXCJBXCJdLCBbXCJDXCIsIFwiQVwiXSwgW1wiQ1wiLCBcIkJcIl1cbiAgICBdLFxuICAgIGV4cGVjdGVkUm91bmRzOiBbXG4gICAgICB7IFxuICAgICAgICByb3VuZDogMSwgXG4gICAgICAgIGVsaW1pbmF0ZWQ6IFwiQVwiLCBcbiAgICAgICAgdm90ZXM6IHsgQTogMSwgQjogMSwgQzogMiB9LFxuICAgICAgICB0b3RhbFZvdGVzOiA0LFxuICAgICAgICBhY3RpdmVDYW5kaWRhdGVzOiBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sXG4gICAgICAgIGV4aGF1c3RlZDogMCxcbiAgICAgICAgd2lubmVyOiBcIkNcIlxuICAgICAgfVxuICAgIF0sXG4gICAgZXhwZWN0ZWRXaW5uZXI6IFwiQ1wiLFxuICAgIGV4cGVjdGVkTWV0YWRhdGE6IHtcbiAgICAgIHRpZUJyZWFrc1VzZWQ6IDEsXG4gICAgICBlZGdlQ2FzZXNIYW5kbGVkOiBbXCJlbGltaW5hdGlvbl90aWVcIl1cbiAgICB9XG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiRXhoYXVzdGVkIGJhbGxvdHNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJTb21lIGJhbGxvdHMgYmVjb21lIGV4aGF1c3RlZCBkdXJpbmcgZWxpbWluYXRpb25cIixcbiAgICBjYW5kaWRhdGVzOiBtb2NrQ2FuZGlkYXRlcy5zbGljZSgwLCA0KSwgLy8gQSwgQiwgQywgRFxuICAgIGJhbGxvdHM6IFtcbiAgICAgIFtcIkFcIiwgXCJCXCJdLCBbXCJCXCIsIFwiQVwiXSwgW1wiQ1wiXSwgW1wiRFwiXVxuICAgIF0sXG4gICAgZXhwZWN0ZWRSb3VuZHM6IFtcbiAgICAgIHtcbiAgICAgICAgcm91bmQ6IDEsXG4gICAgICAgIGVsaW1pbmF0ZWQ6IFwiQVwiLFxuICAgICAgICB2b3RlczogeyBBOiAxLCBCOiAxLCBDOiAxLCBEOiAxIH0sXG4gICAgICAgIHRvdGFsVm90ZXM6IDQsXG4gICAgICAgIGFjdGl2ZUNhbmRpZGF0ZXM6IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIl0sXG4gICAgICAgIGV4aGF1c3RlZDogMFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcm91bmQ6IDIsXG4gICAgICAgIGVsaW1pbmF0ZWQ6IFwiQ1wiLFxuICAgICAgICB2b3RlczogeyBBOiAwLCBCOiAyLCBDOiAxLCBEOiAxIH0sXG4gICAgICAgIHRvdGFsVm90ZXM6IDQsXG4gICAgICAgIGFjdGl2ZUNhbmRpZGF0ZXM6IFtcIkJcIiwgXCJDXCIsIFwiRFwiXSxcbiAgICAgICAgZXhoYXVzdGVkOiAwLFxuICAgICAgICB3aW5uZXI6IFwiQlwiXG4gICAgICB9XG4gICAgXSxcbiAgICBleHBlY3RlZFdpbm5lcjogXCJCXCIsXG4gICAgZXhwZWN0ZWRNZXRhZGF0YToge1xuICAgICAgdGllQnJlYWtzVXNlZDogMixcbiAgICAgIGVkZ2VDYXNlc0hhbmRsZWQ6IFtcImVsaW1pbmF0aW9uX3RpZVwiLCBcImVsaW1pbmF0aW9uX3RpZVwiXVxuICAgIH1cbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJXcml0ZS1pbiBjYW5kaWRhdGVzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiV3JpdGUtaW4gY2FuZGlkYXRlIHdpbnMgdGhlIGVsZWN0aW9uXCIsXG4gICAgY2FuZGlkYXRlczogbW9ja0NhbmRpZGF0ZXMuc2xpY2UoMCwgMyksIC8vIEEsIEIsIENcbiAgICBiYWxsb3RzOiBbXG4gICAgICBbXCJBXCIsIFwiQlwiLCBcIldSSVRFX0lOXzFcIl0sIFtcIkJcIiwgXCJBXCIsIFwiV1JJVEVfSU5fMlwiXSwgXG4gICAgICBbXCJXUklURV9JTl8xXCIsIFwiQVwiLCBcIkJcIl0sIFtcIkNcIiwgXCJXUklURV9JTl8xXCIsIFwiQVwiXVxuICAgIF0sXG4gICAgZXhwZWN0ZWRSb3VuZHM6IFtcbiAgICAgIHtcbiAgICAgICAgcm91bmQ6IDEsXG4gICAgICAgIGVsaW1pbmF0ZWQ6IFwiV1JJVEVfSU5fMlwiLFxuICAgICAgICB2b3RlczogeyBBOiAxLCBCOiAxLCBXUklURV9JTl8xOiAxLCBDOiAxLCBXUklURV9JTl8yOiAwIH0sXG4gICAgICAgIHRvdGFsVm90ZXM6IDQsXG4gICAgICAgIGFjdGl2ZUNhbmRpZGF0ZXM6IFtcIkFcIiwgXCJCXCIsIFwiV1JJVEVfSU5fMVwiLCBcIldSSVRFX0lOXzJcIiwgXCJDXCJdLFxuICAgICAgICBleGhhdXN0ZWQ6IDBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvdW5kOiAyLFxuICAgICAgICBlbGltaW5hdGVkOiBcIkFcIixcbiAgICAgICAgdm90ZXM6IHsgQTogMSwgQjogMSwgV1JJVEVfSU5fMTogMSwgQzogMSwgV1JJVEVfSU5fMjogMCB9LFxuICAgICAgICB0b3RhbFZvdGVzOiA0LFxuICAgICAgICBhY3RpdmVDYW5kaWRhdGVzOiBbXCJBXCIsIFwiQlwiLCBcIldSSVRFX0lOXzFcIiwgXCJDXCJdLFxuICAgICAgICBleGhhdXN0ZWQ6IDBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvdW5kOiAzLFxuICAgICAgICBlbGltaW5hdGVkOiBcIkNcIixcbiAgICAgICAgdm90ZXM6IHsgQTogMCwgQjogMiwgV1JJVEVfSU5fMTogMSwgQzogMSwgV1JJVEVfSU5fMjogMCB9LFxuICAgICAgICB0b3RhbFZvdGVzOiA0LFxuICAgICAgICBhY3RpdmVDYW5kaWRhdGVzOiBbXCJCXCIsIFwiV1JJVEVfSU5fMVwiLCBcIkNcIl0sXG4gICAgICAgIGV4aGF1c3RlZDogMCxcbiAgICAgICAgd2lubmVyOiBcIkJcIlxuICAgICAgfVxuICAgIF0sXG4gICAgZXhwZWN0ZWRXaW5uZXI6IFwiQlwiLFxuICAgIGV4cGVjdGVkTWV0YWRhdGE6IHtcbiAgICAgIHRpZUJyZWFrc1VzZWQ6IDIsXG4gICAgICBlZGdlQ2FzZXNIYW5kbGVkOiBbXCJlbGltaW5hdGlvbl90aWVcIiwgXCJlbGltaW5hdGlvbl90aWVcIl1cbiAgICB9XG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiRnVsbHkgZXhoYXVzdGVkIGJhbGxvdHNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBbGwgYmFsbG90cyBiZWNvbWUgZXhoYXVzdGVkLCBubyB3aW5uZXJcIixcbiAgICBjYW5kaWRhdGVzOiBtb2NrQ2FuZGlkYXRlcy5zbGljZSgwLCA1KSwgLy8gQSwgQiwgQywgRCwgRVxuICAgIGJhbGxvdHM6IFtcbiAgICAgIFtcIkFcIiwgXCJCXCJdLCBbXCJCXCIsIFwiQVwiXSwgW1wiQ1wiXSwgW1wiRFwiXSwgW1wiRVwiXVxuICAgIF0sXG4gICAgZXhwZWN0ZWRSb3VuZHM6IFtcbiAgICAgIHtcbiAgICAgICAgcm91bmQ6IDEsXG4gICAgICAgIGVsaW1pbmF0ZWQ6IFwiQVwiLFxuICAgICAgICB2b3RlczogeyBBOiAxLCBCOiAxLCBDOiAxLCBEOiAxLCBFOiAxIH0sXG4gICAgICAgIHRvdGFsVm90ZXM6IDUsXG4gICAgICAgIGFjdGl2ZUNhbmRpZGF0ZXM6IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCJdLFxuICAgICAgICBleGhhdXN0ZWQ6IDBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvdW5kOiAyLFxuICAgICAgICBlbGltaW5hdGVkOiBcIkNcIixcbiAgICAgICAgdm90ZXM6IHsgQTogMCwgQjogMiwgQzogMSwgRDogMSwgRTogMSB9LFxuICAgICAgICB0b3RhbFZvdGVzOiA1LFxuICAgICAgICBhY3RpdmVDYW5kaWRhdGVzOiBbXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCJdLFxuICAgICAgICBleGhhdXN0ZWQ6IDBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJvdW5kOiAzLFxuICAgICAgICBlbGltaW5hdGVkOiBcIkRcIixcbiAgICAgICAgdm90ZXM6IHsgQTogMCwgQjogMiwgQzogMCwgRDogMSwgRTogMSB9LFxuICAgICAgICB0b3RhbFZvdGVzOiA0LFxuICAgICAgICBhY3RpdmVDYW5kaWRhdGVzOiBbXCJCXCIsIFwiRFwiLCBcIkVcIl0sXG4gICAgICAgIGV4aGF1c3RlZDogMSxcbiAgICAgICAgd2lubmVyOiBcIkJcIlxuICAgICAgfVxuICAgIF0sXG4gICAgZXhwZWN0ZWRXaW5uZXI6IFwiQlwiLFxuICAgIGV4cGVjdGVkTWV0YWRhdGE6IHtcbiAgICAgIHRpZUJyZWFrc1VzZWQ6IDMsXG4gICAgICBlZGdlQ2FzZXNIYW5kbGVkOiBbXCJlbGltaW5hdGlvbl90aWVcIiwgXCJlbGltaW5hdGlvbl90aWVcIiwgXCJlbGltaW5hdGlvbl90aWVcIl1cbiAgICB9XG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiV2l0aGRyYXduIGNhbmRpZGF0ZXNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJDYW5kaWRhdGUgQyBpcyB3aXRoZHJhd24sIHRyZWF0ZWQgYXMgZWxpbWluYXRlZCBhdCByb3VuZCAwXCIsXG4gICAgY2FuZGlkYXRlczogW1xuICAgICAgeyBpZDogJ0EnLCBuYW1lOiAnQWxpY2UgSm9obnNvbicsIHBhcnR5OiAnRGVtb2NyYXQnIH0sXG4gICAgICB7IGlkOiAnQicsIG5hbWU6ICdCb2IgU21pdGgnLCBwYXJ0eTogJ1JlcHVibGljYW4nIH0sXG4gICAgICB7IGlkOiAnQycsIG5hbWU6ICdDYXJvbCBEYXZpcycsIHBhcnR5OiAnSW5kZXBlbmRlbnQnLCBpc1dpdGhkcmF3bjogdHJ1ZSB9XG4gICAgXSxcbiAgICBiYWxsb3RzOiBbXG4gICAgICBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sIFtcIkJcIiwgXCJBXCIsIFwiQ1wiXSwgW1wiQ1wiLCBcIkFcIiwgXCJCXCJdLFxuICAgICAgW1wiQVwiLCBcIkNcIiwgXCJCXCJdLCBbXCJCXCIsIFwiQ1wiLCBcIkFcIl1cbiAgICBdLFxuICAgIGV4cGVjdGVkUm91bmRzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICByb3VuZDogMSxcbiAgICAgICAgICBlbGltaW5hdGVkOiBcIkJcIixcbiAgICAgICAgICB2b3RlczogeyBBOiAzLCBCOiAyIH0sXG4gICAgICAgICAgdG90YWxWb3RlczogNSxcbiAgICAgICAgICBhY3RpdmVDYW5kaWRhdGVzOiBbXCJBXCIsIFwiQlwiXVxuICAgICAgICB9XG4gICAgXSxcbiAgICBleHBlY3RlZFdpbm5lcjogXCJBXCIsXG4gICAgZXhwZWN0ZWRNZXRhZGF0YToge1xuICAgICAgdGllQnJlYWtzVXNlZDogMCxcbiAgICAgIGVkZ2VDYXNlc0hhbmRsZWQ6IFtcIndpdGhkcmF3bi1jYW5kaWRhdGVzXCJdXG4gICAgfVxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlRpZSBzdG9ybSAoMysgcm91bmRzKVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIk11bHRpcGxlIHJvdW5kcyBvZiB0aWVzIHJlcXVpcmluZyB0aWUtYnJlYWtpbmdcIixcbiAgICBjYW5kaWRhdGVzOiBtb2NrQ2FuZGlkYXRlcy5zbGljZSgwLCA0KSwgLy8gQSwgQiwgQywgRFxuICAgIGJhbGxvdHM6IFtcbiAgICAgIFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIl0sIFtcIkJcIiwgXCJBXCIsIFwiQ1wiLCBcIkRcIl0sIFtcIkNcIiwgXCJBXCIsIFwiQlwiLCBcIkRcIl0sXG4gICAgICBbXCJEXCIsIFwiQVwiLCBcIkJcIiwgXCJDXCJdLCBbXCJBXCIsIFwiQ1wiLCBcIkJcIiwgXCJEXCJdLCBbXCJCXCIsIFwiRFwiLCBcIkFcIiwgXCJDXCJdXG4gICAgXSxcbiAgICBleHBlY3RlZFJvdW5kczogW1xuICAgICAge1xuICAgICAgICByb3VuZDogMSxcbiAgICAgICAgZWxpbWluYXRlZDogXCJDXCIsXG4gICAgICAgIHZvdGVzOiB7IEE6IDIsIEI6IDIsIEM6IDEsIEQ6IDEgfSxcbiAgICAgICAgdG90YWxWb3RlczogNixcbiAgICAgICAgYWN0aXZlQ2FuZGlkYXRlczogW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiXSxcbiAgICAgICAgZXhoYXVzdGVkOiAwXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICByb3VuZDogMixcbiAgICAgICAgZWxpbWluYXRlZDogXCJEXCIsXG4gICAgICAgIHZvdGVzOiB7IEE6IDMsIEI6IDIsIEM6IDAsIEQ6IDEgfSxcbiAgICAgICAgdG90YWxWb3RlczogNixcbiAgICAgICAgYWN0aXZlQ2FuZGlkYXRlczogW1wiQVwiLCBcIkJcIiwgXCJEXCJdLFxuICAgICAgICBleGhhdXN0ZWQ6IDAsXG4gICAgICAgIHdpbm5lcjogXCJBXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIGV4cGVjdGVkV2lubmVyOiBcIkFcIixcbiAgICBleHBlY3RlZE1ldGFkYXRhOiB7XG4gICAgICB0aWVCcmVha3NVc2VkOiAxLFxuICAgICAgZWRnZUNhc2VzSGFuZGxlZDogW1wiZWxpbWluYXRpb25fdGllXCJdXG4gICAgfVxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkFsbCBzYW1lIGZpcnN0IGNob2ljZSwgZGl2ZXJnZW50IHRhaWxzXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQWxsIHZvdGVycyBjaG9vc2UgQSBmaXJzdCwgYnV0IGhhdmUgZGlmZmVyZW50IHNlY29uZCBjaG9pY2VzXCIsXG4gICAgY2FuZGlkYXRlczogbW9ja0NhbmRpZGF0ZXMuc2xpY2UoMCwgMyksIC8vIEEsIEIsIENcbiAgICBiYWxsb3RzOiBbXG4gICAgICBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sIFtcIkFcIiwgXCJDXCIsIFwiQlwiXSwgW1wiQVwiLCBcIkJcIiwgXCJDXCJdLFxuICAgICAgW1wiQVwiLCBcIkNcIiwgXCJCXCJdLCBbXCJBXCIsIFwiQlwiLCBcIkNcIl0sIFtcIkFcIiwgXCJDXCIsIFwiQlwiXVxuICAgIF0sXG4gICAgZXhwZWN0ZWRSb3VuZHM6IFtcbiAgICAgIHsgXG4gICAgICAgIHJvdW5kOiAxLCBcbiAgICAgICAgZWxpbWluYXRlZDogXCJCXCIsIFxuICAgICAgICB2b3RlczogeyBBOiA2LCBCOiAwLCBDOiAwIH0sXG4gICAgICAgIHRvdGFsVm90ZXM6IDYsXG4gICAgICAgIGFjdGl2ZUNhbmRpZGF0ZXM6IFtcIkFcIiwgXCJCXCIsIFwiQ1wiXVxuICAgICAgfVxuICAgIF0sXG4gICAgZXhwZWN0ZWRXaW5uZXI6IFwiQVwiLFxuICAgIGV4cGVjdGVkTWV0YWRhdGE6IHtcbiAgICAgIHRpZUJyZWFrc1VzZWQ6IDEsXG4gICAgICBlZGdlQ2FzZXNIYW5kbGVkOiBbXCJ6ZXJvLXZvdGUtdGllOkIsQ1wiXVxuICAgIH1cbiAgfVxuXTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVEVTVCBSVU5ORVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXN0UmFua2luZ3MoYmFsbG90czogc3RyaW5nW11bXSwgcG9sbElkOiBzdHJpbmcgPSAndGVzdC1wb2xsJyk6IFVzZXJSYW5raW5nW10ge1xuICByZXR1cm4gYmFsbG90cy5tYXAoKHJhbmtpbmcsIGluZGV4KSA9PiAoe1xuICAgIHBvbGxJZCxcbiAgICB1c2VySWQ6IGB1c2VyXyR7aW5kZXh9YCxcbiAgICByYW5raW5nLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKVxuICB9KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBydW5Hb2xkZW5UZXN0Q2FzZSh0ZXN0Q2FzZTogYW55KToge1xuICBwYXNzZWQ6IGJvb2xlYW47XG4gIGFjdHVhbFJlc3VsdHM6IFJhbmtlZENob2ljZVJlc3VsdHM7XG4gIGV4cGVjdGVkUmVzdWx0czogYW55O1xuICBlcnJvcnM6IHN0cmluZ1tdO1xufSB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gQ3JlYXRlIElSViBjYWxjdWxhdG9yXG4gICAgY29uc3QgY2FsY3VsYXRvciA9IG5ldyBJUlZDYWxjdWxhdG9yKHRlc3RDYXNlLnBvbGxJZCB8fCAndGVzdC1wb2xsJywgdGVzdENhc2UuY2FuZGlkYXRlcyk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRlc3QgcmFua2luZ3NcbiAgICBjb25zdCByYW5raW5ncyA9IGNyZWF0ZVRlc3RSYW5raW5ncyh0ZXN0Q2FzZS5iYWxsb3RzLCB0ZXN0Q2FzZS5wb2xsSWQgfHwgJ3Rlc3QtcG9sbCcpO1xuICAgIFxuICAgIC8vIENhbGN1bGF0ZSByZXN1bHRzXG4gICAgY29uc3QgYWN0dWFsUmVzdWx0cyA9IGNhbGN1bGF0b3IuY2FsY3VsYXRlUmVzdWx0cyhyYW5raW5ncyk7XG4gICAgXG4gICAgLy8gVmFsaWRhdGUgcmVzdWx0c1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZVJlc3VsdHMoYWN0dWFsUmVzdWx0cywgdGVzdENhc2UpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBwYXNzZWQ6IHZhbGlkYXRpb24ucGFzc2VkLFxuICAgICAgYWN0dWFsUmVzdWx0cyxcbiAgICAgIGV4cGVjdGVkUmVzdWx0czogdGVzdENhc2UsXG4gICAgICBlcnJvcnM6IHZhbGlkYXRpb24uZXJyb3JzXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBlcnJvcnMucHVzaChgVGVzdCBleGVjdXRpb24gZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgIHJldHVybiB7XG4gICAgICBwYXNzZWQ6IGZhbHNlLFxuICAgICAgYWN0dWFsUmVzdWx0czoge30gYXMgUmFua2VkQ2hvaWNlUmVzdWx0cyxcbiAgICAgIGV4cGVjdGVkUmVzdWx0czogdGVzdENhc2UsXG4gICAgICBlcnJvcnNcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVJlc3VsdHMoYWN0dWFsOiBSYW5rZWRDaG9pY2VSZXN1bHRzLCBleHBlY3RlZDogYW55KToge1xuICBwYXNzZWQ6IGJvb2xlYW47XG4gIGVycm9yczogc3RyaW5nW107XG59IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgLy8gQ2hlY2sgd2lubmVyXG4gIGlmIChhY3R1YWwud2lubmVyICE9PSBleHBlY3RlZC5leHBlY3RlZFdpbm5lcikge1xuICAgIGVycm9ycy5wdXNoKGBXaW5uZXIgbWlzbWF0Y2g6IGV4cGVjdGVkICR7ZXhwZWN0ZWQuZXhwZWN0ZWRXaW5uZXJ9LCBnb3QgJHthY3R1YWwud2lubmVyfWApO1xuICB9XG4gIFxuICAvLyBDaGVjayBudW1iZXIgb2Ygcm91bmRzXG4gIGlmIChhY3R1YWwucm91bmRzLmxlbmd0aCAhPT0gZXhwZWN0ZWQuZXhwZWN0ZWRSb3VuZHMubGVuZ3RoKSB7XG4gICAgZXJyb3JzLnB1c2goYFJvdW5kIGNvdW50IG1pc21hdGNoOiBleHBlY3RlZCAke2V4cGVjdGVkLmV4cGVjdGVkUm91bmRzLmxlbmd0aH0sIGdvdCAke2FjdHVhbC5yb3VuZHMubGVuZ3RofWApO1xuICB9XG4gIFxuICAvLyBDaGVjayBlYWNoIHJvdW5kXG4gIGV4cGVjdGVkLmV4cGVjdGVkUm91bmRzLmZvckVhY2goKGV4cGVjdGVkUm91bmQ6IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGFjdHVhbFJvdW5kID0gYWN0dWFsLnJvdW5kc1tpbmRleF07XG4gICAgaWYgKCFhY3R1YWxSb3VuZCkge1xuICAgICAgZXJyb3JzLnB1c2goYE1pc3Npbmcgcm91bmQgJHtpbmRleCArIDF9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmIChhY3R1YWxSb3VuZC5lbGltaW5hdGVkICE9PSBleHBlY3RlZFJvdW5kLmVsaW1pbmF0ZWQpIHtcbiAgICAgIGVycm9ycy5wdXNoKGBSb3VuZCAke2luZGV4ICsgMX0gZWxpbWluYXRpb24gbWlzbWF0Y2g6IGV4cGVjdGVkICR7ZXhwZWN0ZWRSb3VuZC5lbGltaW5hdGVkfSwgZ290ICR7YWN0dWFsUm91bmQuZWxpbWluYXRlZH1gKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgdm90ZSBjb3VudHNcbiAgICBPYmplY3Qua2V5cyhleHBlY3RlZFJvdW5kLnZvdGVzKS5mb3JFYWNoKGNhbmRpZGF0ZSA9PiB7XG4gICAgICBpZiAoYWN0dWFsUm91bmQudm90ZXNbY2FuZGlkYXRlXSAhPT0gZXhwZWN0ZWRSb3VuZC52b3Rlc1tjYW5kaWRhdGVdKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBSb3VuZCAke2luZGV4ICsgMX0gdm90ZSBjb3VudCBtaXNtYXRjaCBmb3IgJHtjYW5kaWRhdGV9OiBleHBlY3RlZCAke2V4cGVjdGVkUm91bmQudm90ZXNbY2FuZGlkYXRlXX0sIGdvdCAke2FjdHVhbFJvdW5kLnZvdGVzW2NhbmRpZGF0ZV19YCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgLy8gQ2hlY2sgbWV0YWRhdGFcbiAgaWYgKGFjdHVhbC5tZXRhZGF0YT8udGllQnJlYWtzVXNlZCAhPT0gZXhwZWN0ZWQuZXhwZWN0ZWRNZXRhZGF0YS50aWVCcmVha3NVc2VkKSB7XG4gICAgZXJyb3JzLnB1c2goYFRpZSBicmVha3MgdXNlZCBtaXNtYXRjaDogZXhwZWN0ZWQgJHtleHBlY3RlZC5leHBlY3RlZE1ldGFkYXRhLnRpZUJyZWFrc1VzZWR9LCBnb3QgJHthY3R1YWwubWV0YWRhdGE/LnRpZUJyZWFrc1VzZWR9YCk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgcGFzc2VkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9yc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcnVuQWxsR29sZGVuVGVzdHMoKToge1xuICB0b3RhbFRlc3RzOiBudW1iZXI7XG4gIHBhc3NlZFRlc3RzOiBudW1iZXI7XG4gIGZhaWxlZFRlc3RzOiBudW1iZXI7XG4gIHJlc3VsdHM6IEFycmF5PHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFzc2VkOiBib29sZWFuO1xuICAgIGVycm9yczogc3RyaW5nW107XG4gIH0+O1xufSB7XG4gIGNvbnN0IHJlc3VsdHMgPSBnb2xkZW5UZXN0Q2FzZXMubWFwKHRlc3RDYXNlID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBydW5Hb2xkZW5UZXN0Q2FzZSh0ZXN0Q2FzZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRlc3RDYXNlLm5hbWUsXG4gICAgICBwYXNzZWQ6IHJlc3VsdC5wYXNzZWQsXG4gICAgICBlcnJvcnM6IHJlc3VsdC5lcnJvcnNcbiAgICB9O1xuICB9KTtcbiAgXG4gIGNvbnN0IHBhc3NlZFRlc3RzID0gcmVzdWx0cy5maWx0ZXIociA9PiByLnBhc3NlZCkubGVuZ3RoO1xuICBjb25zdCBmYWlsZWRUZXN0cyA9IHJlc3VsdHMubGVuZ3RoIC0gcGFzc2VkVGVzdHM7XG4gIFxuICByZXR1cm4ge1xuICAgIHRvdGFsVGVzdHM6IHJlc3VsdHMubGVuZ3RoLFxuICAgIHBhc3NlZFRlc3RzLFxuICAgIGZhaWxlZFRlc3RzLFxuICAgIHJlc3VsdHNcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUEVSRk9STUFOQ0UgVEVTVCBDQVNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVMYXJnZUJhbGxvdFNldChjYW5kaWRhdGVDb3VudDogbnVtYmVyLCBiYWxsb3RDb3VudDogbnVtYmVyKTogc3RyaW5nW11bXSB7XG4gIGNvbnN0IGNhbmRpZGF0ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjYW5kaWRhdGVDb3VudCB9LCAoXywgaSkgPT4gYGNhbmRpZGF0ZV8ke2l9YCk7XG4gIGNvbnN0IGJhbGxvdHM6IHN0cmluZ1tdW10gPSBbXTtcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYmFsbG90Q291bnQ7IGkrKykge1xuICAgIC8vIEdlbmVyYXRlIHJhbmRvbSByYW5raW5nXG4gICAgY29uc3Qgc2h1ZmZsZWQgPSBbLi4uY2FuZGlkYXRlc10uc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICBiYWxsb3RzLnB1c2goc2h1ZmZsZWQpO1xuICB9XG4gIFxuICByZXR1cm4gYmFsbG90cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJ1blBlcmZvcm1hbmNlVGVzdChjYW5kaWRhdGVDb3VudDogbnVtYmVyID0gMTAsIGJhbGxvdENvdW50OiBudW1iZXIgPSAxMDAwMCk6IHtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGNhbmRpZGF0ZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBjYW5kaWRhdGVDb3VudCB9LCAoXywgaSkgPT4gKHtcbiAgICAgIGlkOiBgY2FuZGlkYXRlXyR7aX1gLFxuICAgICAgbmFtZTogYENhbmRpZGF0ZSAke2l9YCxcbiAgICAgIHBhcnR5OiAnSW5kZXBlbmRlbnQnXG4gICAgfSkpO1xuICAgIFxuICAgIGNvbnN0IGJhbGxvdHMgPSBnZW5lcmF0ZUxhcmdlQmFsbG90U2V0KGNhbmRpZGF0ZUNvdW50LCBiYWxsb3RDb3VudCk7XG4gICAgY29uc3QgcmFua2luZ3MgPSBjcmVhdGVUZXN0UmFua2luZ3MoYmFsbG90cyk7XG4gICAgXG4gICAgY29uc3QgY2FsY3VsYXRvciA9IG5ldyBJUlZDYWxjdWxhdG9yKCdwZXJmb3JtYW5jZS10ZXN0JywgY2FuZGlkYXRlcyk7XG4gICAgY2FsY3VsYXRvci5jYWxjdWxhdGVSZXN1bHRzKHJhbmtpbmdzKTtcbiAgICBcbiAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBkdXJhdGlvbixcbiAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGR1cmF0aW9uLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICB9O1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVYUE9SVEVEIFRFU1QgU1VJVEVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IElSVlRlc3RTdWl0ZSA9IHtcbiAgZ29sZGVuVGVzdENhc2VzLFxuICBydW5Hb2xkZW5UZXN0Q2FzZSxcbiAgcnVuQWxsR29sZGVuVGVzdHMsXG4gIHZhbGlkYXRlUmVzdWx0cyxcbiAgcnVuUGVyZm9ybWFuY2VUZXN0LFxuICBnZW5lcmF0ZUxhcmdlQmFsbG90U2V0XG59O1xuXG5leHBvcnQgZGVmYXVsdCBJUlZUZXN0U3VpdGU7XG4iXSwibmFtZXMiOlsiSVJWVGVzdFN1aXRlIiwiY3JlYXRlVGVzdFJhbmtpbmdzIiwiZ2VuZXJhdGVMYXJnZUJhbGxvdFNldCIsImdvbGRlblRlc3RDYXNlcyIsInJ1bkFsbEdvbGRlblRlc3RzIiwicnVuR29sZGVuVGVzdENhc2UiLCJydW5QZXJmb3JtYW5jZVRlc3QiLCJ2YWxpZGF0ZVJlc3VsdHMiLCJtb2NrQ2FuZGlkYXRlcyIsImlkIiwibmFtZSIsInBhcnR5IiwiZGVzY3JpcHRpb24iLCJjYW5kaWRhdGVzIiwic2xpY2UiLCJiYWxsb3RzIiwiZXhwZWN0ZWRSb3VuZHMiLCJyb3VuZCIsImVsaW1pbmF0ZWQiLCJ2b3RlcyIsIkEiLCJCIiwiQyIsInRvdGFsVm90ZXMiLCJhY3RpdmVDYW5kaWRhdGVzIiwiZXhoYXVzdGVkIiwid2lubmVyIiwiZXhwZWN0ZWRXaW5uZXIiLCJleHBlY3RlZE1ldGFkYXRhIiwidGllQnJlYWtzVXNlZCIsImVkZ2VDYXNlc0hhbmRsZWQiLCJEIiwiV1JJVEVfSU5fMSIsIldSSVRFX0lOXzIiLCJFIiwiaXNXaXRoZHJhd24iLCJwb2xsSWQiLCJtYXAiLCJyYW5raW5nIiwiaW5kZXgiLCJ1c2VySWQiLCJjcmVhdGVkQXQiLCJEYXRlIiwidGVzdENhc2UiLCJlcnJvcnMiLCJjYWxjdWxhdG9yIiwiSVJWQ2FsY3VsYXRvciIsInJhbmtpbmdzIiwiYWN0dWFsUmVzdWx0cyIsImNhbGN1bGF0ZVJlc3VsdHMiLCJ2YWxpZGF0aW9uIiwicGFzc2VkIiwiZXhwZWN0ZWRSZXN1bHRzIiwiZXJyb3IiLCJwdXNoIiwiRXJyb3IiLCJtZXNzYWdlIiwiYWN0dWFsIiwiZXhwZWN0ZWQiLCJyb3VuZHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiZXhwZWN0ZWRSb3VuZCIsImFjdHVhbFJvdW5kIiwiT2JqZWN0Iiwia2V5cyIsImNhbmRpZGF0ZSIsIm1ldGFkYXRhIiwicmVzdWx0cyIsInJlc3VsdCIsInBhc3NlZFRlc3RzIiwiZmlsdGVyIiwiciIsImZhaWxlZFRlc3RzIiwidG90YWxUZXN0cyIsImNhbmRpZGF0ZUNvdW50IiwiYmFsbG90Q291bnQiLCJBcnJheSIsImZyb20iLCJfIiwiaSIsInNodWZmbGVkIiwic29ydCIsIk1hdGgiLCJyYW5kb20iLCJzdGFydFRpbWUiLCJwZXJm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