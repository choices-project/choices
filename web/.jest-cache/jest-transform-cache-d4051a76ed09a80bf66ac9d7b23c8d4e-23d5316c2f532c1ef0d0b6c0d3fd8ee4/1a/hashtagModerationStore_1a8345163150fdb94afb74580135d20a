d6cbdb9703d6844f27fc71d440ea7b00
/**
 * Hashtag Moderation Store - Zustand Implementation
 * 
 * Manages hashtag moderation state including flagging interface,
 * moderation queue, and form state management.
 * 
 * Created: January 15, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    moderationStoreUtils: function() {
        return moderationStoreUtils;
    },
    useHashtagModerationStore: function() {
        return useHashtagModerationStore;
    },
    useModerationActions: function() {
        return useModerationActions;
    },
    useModerationDebug: function() {
        return useModerationDebug;
    },
    useModerationError: function() {
        return useModerationError;
    },
    useModerationForm: function() {
        return useModerationForm;
    },
    useModerationLoading: function() {
        return useModerationLoading;
    },
    useModerationModal: function() {
        return useModerationModal;
    },
    useModerationQueue: function() {
        return useModerationQueue;
    },
    useModerationStats: function() {
        return useModerationStats;
    },
    useModerationSubscription: function() {
        return useModerationSubscription;
    },
    usePendingFlags: function() {
        return usePendingFlags;
    },
    useSelectedModeration: function() {
        return useSelectedModeration;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _immer = require("zustand/middleware/immer");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useHashtagModerationStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((0, _immer.immer)((set, _get)=>({
        // Initial state
        isOpen: false,
        flagType: "inappropriate",
        reason: "",
        isSubmitting: false,
        error: null,
        moderationQueue: [],
        selectedModeration: null,
        isLoading: false,
        // Base store actions
        setLoading: (loading)=>set((state)=>{
                state.isLoading = loading;
            }),
        setError: (error)=>set((state)=>{
                state.error = error;
            }),
        clearError: ()=>set((state)=>{
                state.error = null;
            }),
        // Modal actions
        setIsOpen: (open)=>set((state)=>{
                state.isOpen = open;
                // Reset form when opening
                if (open) {
                    state.flagType = "inappropriate";
                    state.reason = "";
                    state.error = null;
                }
            }),
        // Form actions
        setFlagType: (type)=>set((state)=>{
                state.flagType = type;
            }),
        setReason: (reason)=>set((state)=>{
                state.reason = reason;
            }),
        resetForm: ()=>set((state)=>{
                state.flagType = "inappropriate";
                state.reason = "";
                state.isSubmitting = false;
                state.error = null;
            }),
        // Submission actions
        setIsSubmitting: (submitting)=>set((state)=>{
                state.isSubmitting = submitting;
            }),
        // Moderation actions
        setModerationQueue: (queue)=>set((state)=>{
                state.moderationQueue = queue;
            }),
        setSelectedModeration: (moderation)=>set((state)=>{
                state.selectedModeration = moderation;
            }),
        addModeration: (moderation)=>set((state)=>{
                state.moderationQueue.unshift(moderation);
            }),
        updateModeration: (id, updates)=>set((state)=>{
                const index = state.moderationQueue.findIndex((m)=>m.id === id);
                if (index !== -1) {
                    const existing = state.moderationQueue[index];
                    if (existing) {
                        state.moderationQueue[index] = {
                            ...existing,
                            ...updates,
                            updatedAt: new Date().toISOString()
                        };
                    }
                }
            }),
        removeModeration: (id)=>set((state)=>{
                state.moderationQueue = state.moderationQueue.filter((m)=>m.id !== id);
            }),
        // Flag actions
        submitFlag: async (hashtagId)=>{
            const state = _get();
            if (!state.reason.trim()) {
                set((state)=>{
                    state.error = "Please provide a reason for flagging";
                });
                return;
            }
            set((state)=>{
                state.isSubmitting = true;
                state.error = null;
            });
            try {
                // Get user ID from user store
                const { useUserStore } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./userStore")));
                const userStore = useUserStore.getState();
                const userId = userStore.user?.id || "anonymous";
                const flag = {
                    id: crypto.randomUUID(),
                    hashtagId,
                    flagType: state.flagType,
                    reason: state.reason,
                    userId,
                    timestamp: new Date().toISOString(),
                    status: "pending"
                };
                // Submit flag to API
                const response = await fetch("/api/hashtags/flags", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(flag)
                });
                if (!response.ok) {
                    throw new Error(`Failed to submit flag: ${response.statusText}`);
                }
                // Reset form after successful submission
                set((state)=>{
                    state.isSubmitting = false;
                    state.isOpen = false;
                    state.flagType = "inappropriate";
                    state.reason = "";
                });
                logger.info("Flag submitted", {
                    flag
                });
            } catch (error) {
                set((state)=>{
                    state.isSubmitting = false;
                    state.error = error instanceof Error ? error.message : "Failed to submit flag";
                });
            }
        },
        approveFlag: async (flagId)=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Approve flag via API
                const response = await fetch(`/api/hashtags/flags/${flagId}/approve`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to approve flag: ${response.statusText}`);
                }
                set((state)=>{
                    const flagIndex = state.moderationQueue.findIndex((m)=>m.flags?.some((f)=>f.id === flagId));
                    if (flagIndex !== -1) {
                        const moderation = state.moderationQueue[flagIndex];
                        if (moderation) {
                            const flag = moderation.flags?.find((f)=>f.id === flagId);
                            if (flag) {
                                flag.status = "approved";
                            }
                        }
                    }
                    state.isLoading = false;
                });
            // Flag approved successfully
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : "Failed to approve flag";
                });
            }
        },
        rejectFlag: async (flagId)=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Reject flag via API
                const response = await fetch(`/api/hashtags/flags/${flagId}/reject`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to reject flag: ${response.statusText}`);
                }
                set((state)=>{
                    const flagIndex = state.moderationQueue.findIndex((m)=>m.flags?.some((f)=>f.id === flagId));
                    if (flagIndex !== -1) {
                        const moderation = state.moderationQueue[flagIndex];
                        if (moderation) {
                            const flag = moderation.flags?.find((f)=>f.id === flagId);
                            if (flag) {
                                flag.status = "rejected";
                            }
                        }
                    }
                    state.isLoading = false;
                });
            // Flag rejected successfully
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : "Failed to reject flag";
                });
            }
        },
        // Queue management actions
        loadModerationQueue: async ()=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Load moderation queue from API
                const response = await fetch("/api/hashtags/moderation/queue", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to load moderation queue: ${response.statusText}`);
                }
                const moderationQueue = await response.json();
                set((state)=>{
                    state.moderationQueue = moderationQueue;
                    state.isLoading = false;
                });
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : "Failed to load moderation queue";
                });
            }
        },
        refreshQueue: async ()=>{
            const { loadModerationQueue } = _get();
            await loadModerationQueue();
        }
    })), {
    name: "hashtag-moderation-store",
    partialize: (state)=>({
            flagType: state.flagType,
            reason: state.reason
        })
}), {
    name: "hashtag-moderation-store"
}));
const useModerationModal = ()=>useHashtagModerationStore((state)=>state.isOpen);
const useModerationForm = ()=>useHashtagModerationStore((state)=>({
            flagType: state.flagType,
            reason: state.reason,
            isSubmitting: state.isSubmitting,
            error: state.error
        }));
const useModerationQueue = ()=>useHashtagModerationStore((state)=>state.moderationQueue);
const useSelectedModeration = ()=>useHashtagModerationStore((state)=>state.selectedModeration);
const useModerationLoading = ()=>useHashtagModerationStore((state)=>state.isLoading);
const useModerationError = ()=>useHashtagModerationStore((state)=>state.error);
const useModerationActions = ()=>useHashtagModerationStore((state)=>({
            setIsOpen: state.setIsOpen,
            setFlagType: state.setFlagType,
            setReason: state.setReason,
            resetForm: state.resetForm,
            setIsSubmitting: state.setIsSubmitting,
            setError: state.setError,
            setModerationQueue: state.setModerationQueue,
            setSelectedModeration: state.setSelectedModeration,
            addModeration: state.addModeration,
            updateModeration: state.updateModeration,
            removeModeration: state.removeModeration,
            submitFlag: state.submitFlag,
            approveFlag: state.approveFlag,
            rejectFlag: state.rejectFlag,
            loadModerationQueue: state.loadModerationQueue,
            refreshQueue: state.refreshQueue
        }));
const useModerationStats = ()=>useHashtagModerationStore((state)=>{
        const queue = state.moderationQueue;
        return {
            total: queue.length,
            pending: queue.filter((m)=>m.status === "pending").length,
            approved: queue.filter((m)=>m.status === "approved").length,
            rejected: queue.filter((m)=>m.status === "rejected").length,
            underReview: queue.filter((m)=>m.status === "under_review").length
        };
    });
const usePendingFlags = ()=>useHashtagModerationStore((state)=>state.moderationQueue.flatMap((m)=>m.flags.filter((f)=>f.status === "pending")));
const moderationStoreUtils = {
    getFlagTypeLabel: (type)=>{
        const labels = {
            inappropriate: "Inappropriate Content",
            spam: "Spam",
            misleading: "Misleading",
            harassment: "Harassment",
            other: "Other"
        };
        return labels[type];
    },
    getStatusColor: (status)=>{
        const colors = {
            pending: "yellow",
            approved: "green",
            rejected: "red",
            under_review: "blue"
        };
        return colors[status];
    },
    canSubmitFlag: (reason)=>{
        return reason.trim().length > 0;
    }
};
const useModerationSubscription = ()=>{
    const store = useHashtagModerationStore();
    return {
        subscribe: (callback)=>{
            return useHashtagModerationStore.subscribe(callback);
        }
    };
};
const useModerationDebug = ()=>{
    const state = useHashtagModerationStore();
    return {
        state,
        actions: useModerationActions(),
        stats: useModerationStats()
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL2hhc2h0YWdNb2RlcmF0aW9uU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIYXNodGFnIE1vZGVyYXRpb24gU3RvcmUgLSBadXN0YW5kIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIE1hbmFnZXMgaGFzaHRhZyBtb2RlcmF0aW9uIHN0YXRlIGluY2x1ZGluZyBmbGFnZ2luZyBpbnRlcmZhY2UsXG4gKiBtb2RlcmF0aW9uIHF1ZXVlLCBhbmQgZm9ybSBzdGF0ZSBtYW5hZ2VtZW50LlxuICogXG4gKiBDcmVhdGVkOiBKYW51YXJ5IDE1LCAyMDI1XG4gKiBTdGF0dXM6IOKchSBBQ1RJVkVcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IGRldnRvb2xzIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IHBlcnNpc3QgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgaW1tZXIgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUvaW1tZXInO1xuaW1wb3J0IHsgc2hhbGxvdyB9IGZyb20gJ3p1c3RhbmQvc2hhbGxvdyc7XG5cbmltcG9ydCB0eXBlIHsgQmFzZVN0b3JlIH0gZnJvbSAnLi90eXBlcyc7XG5cbi8vIEhhc2h0YWcgbW9kZXJhdGlvbiB0eXBlc1xuZXhwb3J0IHR5cGUgSGFzaHRhZ0ZsYWdUeXBlID0gJ2luYXBwcm9wcmlhdGUnIHwgJ3NwYW0nIHwgJ21pc2xlYWRpbmcnIHwgJ2hhcmFzc21lbnQnIHwgJ290aGVyJztcblxuZXhwb3J0IHR5cGUgSGFzaHRhZ01vZGVyYXRpb25TdGF0dXMgPSAncGVuZGluZycgfCAnYXBwcm92ZWQnIHwgJ3JlamVjdGVkJyB8ICd1bmRlcl9yZXZpZXcnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhc2h0YWdGbGFnIHtcbiAgaWQ6IHN0cmluZztcbiAgaGFzaHRhZ0lkOiBzdHJpbmc7XG4gIGZsYWdUeXBlOiBIYXNodGFnRmxhZ1R5cGU7XG4gIHJlYXNvbjogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIHN0YXR1czogSGFzaHRhZ01vZGVyYXRpb25TdGF0dXM7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGFzaHRhZ01vZGVyYXRpb24ge1xuICBpZDogc3RyaW5nO1xuICBoYXNodGFnSWQ6IHN0cmluZztcbiAgc3RhdHVzOiBIYXNodGFnTW9kZXJhdGlvblN0YXR1cztcbiAgZmxhZ3M6IEhhc2h0YWdGbGFnW107XG4gIG1vZGVyYXRvcklkPzogc3RyaW5nO1xuICBtb2RlcmF0b3JOb3Rlcz86IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xufVxuXG4vLyBTdG9yZSBzdGF0ZSBpbnRlcmZhY2VcbnR5cGUgSGFzaHRhZ01vZGVyYXRpb25TdG9yZSA9IHtcbiAgLy8gTW9kYWwgc3RhdGVcbiAgaXNPcGVuOiBib29sZWFuO1xuICBcbiAgLy8gRm9ybSBzdGF0ZVxuICBmbGFnVHlwZTogSGFzaHRhZ0ZsYWdUeXBlO1xuICByZWFzb246IHN0cmluZztcbiAgXG4gIC8vIFN1Ym1pc3Npb24gc3RhdGVcbiAgaXNTdWJtaXR0aW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgXG4gIC8vIE1vZGVyYXRpb24gcXVldWVcbiAgbW9kZXJhdGlvblF1ZXVlOiBIYXNodGFnTW9kZXJhdGlvbltdO1xuICBzZWxlY3RlZE1vZGVyYXRpb246IEhhc2h0YWdNb2RlcmF0aW9uIHwgbnVsbDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBNb2RhbFxuICBzZXRJc09wZW46IChvcGVuOiBib29sZWFuKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIEZvcm1cbiAgc2V0RmxhZ1R5cGU6ICh0eXBlOiBIYXNodGFnRmxhZ1R5cGUpID0+IHZvaWQ7XG4gIHNldFJlYXNvbjogKHJlYXNvbjogc3RyaW5nKSA9PiB2b2lkO1xuICByZXNldEZvcm06ICgpID0+IHZvaWQ7XG4gIFxuICAvLyBBY3Rpb25zIC0gU3VibWlzc2lvblxuICBzZXRJc1N1Ym1pdHRpbmc6IChzdWJtaXR0aW5nOiBib29sZWFuKSA9PiB2b2lkO1xuICBzZXRFcnJvcjogKGVycm9yOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIE1vZGVyYXRpb25cbiAgc2V0TW9kZXJhdGlvblF1ZXVlOiAocXVldWU6IEhhc2h0YWdNb2RlcmF0aW9uW10pID0+IHZvaWQ7XG4gIHNldFNlbGVjdGVkTW9kZXJhdGlvbjogKG1vZGVyYXRpb246IEhhc2h0YWdNb2RlcmF0aW9uIHwgbnVsbCkgPT4gdm9pZDtcbiAgYWRkTW9kZXJhdGlvbjogKG1vZGVyYXRpb246IEhhc2h0YWdNb2RlcmF0aW9uKSA9PiB2b2lkO1xuICB1cGRhdGVNb2RlcmF0aW9uOiAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxIYXNodGFnTW9kZXJhdGlvbj4pID0+IHZvaWQ7XG4gIHJlbW92ZU1vZGVyYXRpb246IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIEZsYWdzXG4gIHN1Ym1pdEZsYWc6IChoYXNodGFnSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgYXBwcm92ZUZsYWc6IChmbGFnSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcmVqZWN0RmxhZzogKGZsYWdJZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgLy8gQWN0aW9ucyAtIFF1ZXVlIG1hbmFnZW1lbnRcbiAgbG9hZE1vZGVyYXRpb25RdWV1ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgcmVmcmVzaFF1ZXVlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufSAmIEJhc2VTdG9yZTtcblxuLy8gQ3JlYXRlIGhhc2h0YWcgbW9kZXJhdGlvbiBzdG9yZSB3aXRoIG1pZGRsZXdhcmVcbmV4cG9ydCBjb25zdCB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlID0gY3JlYXRlPEhhc2h0YWdNb2RlcmF0aW9uU3RvcmU+KCkoXG4gIGRldnRvb2xzKFxuICAgIHBlcnNpc3QoXG4gICAgICBpbW1lcigoc2V0LCBfZ2V0KSA9PiAoe1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIGlzT3BlbjogZmFsc2UsXG4gICAgICAgIGZsYWdUeXBlOiAnaW5hcHByb3ByaWF0ZScsXG4gICAgICAgIHJlYXNvbjogJycsXG4gICAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBtb2RlcmF0aW9uUXVldWU6IFtdLFxuICAgICAgICBzZWxlY3RlZE1vZGVyYXRpb246IG51bGwsXG4gICAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICAgIFxuICAgICAgICAvLyBCYXNlIHN0b3JlIGFjdGlvbnNcbiAgICAgICAgc2V0TG9hZGluZzogKGxvYWRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBsb2FkaW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldEVycm9yOiAoZXJyb3IpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGNsZWFyRXJyb3I6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gTW9kYWwgYWN0aW9uc1xuICAgICAgICBzZXRJc09wZW46IChvcGVuKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNPcGVuID0gb3BlbjtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCBmb3JtIHdoZW4gb3BlbmluZ1xuICAgICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICBzdGF0ZS5mbGFnVHlwZSA9ICdpbmFwcHJvcHJpYXRlJztcbiAgICAgICAgICAgIHN0YXRlLnJlYXNvbiA9ICcnO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtIGFjdGlvbnNcbiAgICAgICAgc2V0RmxhZ1R5cGU6ICh0eXBlKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZmxhZ1R5cGUgPSB0eXBlO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFJlYXNvbjogKHJlYXNvbikgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLnJlYXNvbiA9IHJlYXNvbjtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICByZXNldEZvcm06ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5mbGFnVHlwZSA9ICdpbmFwcHJvcHJpYXRlJztcbiAgICAgICAgICBzdGF0ZS5yZWFzb24gPSAnJztcbiAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gU3VibWlzc2lvbiBhY3Rpb25zXG4gICAgICAgIHNldElzU3VibWl0dGluZzogKHN1Ym1pdHRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSBzdWJtaXR0aW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIE1vZGVyYXRpb24gYWN0aW9uc1xuICAgICAgICBzZXRNb2RlcmF0aW9uUXVldWU6IChxdWV1ZSkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZSA9IHF1ZXVlO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFNlbGVjdGVkTW9kZXJhdGlvbjogKG1vZGVyYXRpb24pID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5zZWxlY3RlZE1vZGVyYXRpb24gPSBtb2RlcmF0aW9uO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGFkZE1vZGVyYXRpb246IChtb2RlcmF0aW9uKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUubW9kZXJhdGlvblF1ZXVlLnVuc2hpZnQobW9kZXJhdGlvbik7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgdXBkYXRlTW9kZXJhdGlvbjogKGlkLCB1cGRhdGVzKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWUuZmluZEluZGV4KG0gPT4gbS5pZCA9PT0gaWQpO1xuICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlcmF0aW9uUXVldWVbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nLFxuICAgICAgICAgICAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHJlbW92ZU1vZGVyYXRpb246IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZSA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZS5maWx0ZXIobSA9PiBtLmlkICE9PSBpZCk7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gRmxhZyBhY3Rpb25zXG4gICAgICAgIHN1Ym1pdEZsYWc6IGFzeW5jIChoYXNodGFnSWQpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IF9nZXQoKTtcbiAgICAgICAgICBpZiAoIXN0YXRlLnJlYXNvbi50cmltKCkpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSAnUGxlYXNlIHByb3ZpZGUgYSByZWFzb24gZm9yIGZsYWdnaW5nJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgdXNlciBJRCBmcm9tIHVzZXIgc3RvcmVcbiAgICAgICAgICAgIGNvbnN0IHsgdXNlVXNlclN0b3JlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL3N0b3Jlcy91c2VyU3RvcmUnKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJTdG9yZSA9IHVzZVVzZXJTdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgY29uc3QgdXNlcklkID0gdXNlclN0b3JlLnVzZXI/LmlkIHx8ICdhbm9ueW1vdXMnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmbGFnOiBIYXNodGFnRmxhZyA9IHtcbiAgICAgICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgICAgIGhhc2h0YWdJZCxcbiAgICAgICAgICAgICAgZmxhZ1R5cGU6IHN0YXRlLmZsYWdUeXBlLFxuICAgICAgICAgICAgICByZWFzb246IHN0YXRlLnJlYXNvbixcbiAgICAgICAgICAgICAgdXNlcklkLFxuICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTdWJtaXQgZmxhZyB0byBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvaGFzaHRhZ3MvZmxhZ3MnLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZmxhZyksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzdWJtaXQgZmxhZzogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBmb3JtIGFmdGVyIHN1Y2Nlc3NmdWwgc3VibWlzc2lvblxuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5pc1N1Ym1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc3RhdGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmZsYWdUeXBlID0gJ2luYXBwcm9wcmlhdGUnO1xuICAgICAgICAgICAgICBzdGF0ZS5yZWFzb24gPSAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRmxhZyBzdWJtaXR0ZWQnLCB7IGZsYWcgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHN1Ym1pdCBmbGFnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGFwcHJvdmVGbGFnOiBhc3luYyAoZmxhZ0lkKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQXBwcm92ZSBmbGFnIHZpYSBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvaGFzaHRhZ3MvZmxhZ3MvJHtmbGFnSWR9L2FwcHJvdmVgLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFwcHJvdmUgZmxhZzogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZsYWdJbmRleCA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZS5maW5kSW5kZXgobSA9PiBcbiAgICAgICAgICAgICAgICBtLmZsYWdzPy5zb21lKGYgPT4gZi5pZCA9PT0gZmxhZ0lkKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAoZmxhZ0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVyYXRpb24gPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWVbZmxhZ0luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZmxhZyA9IG1vZGVyYXRpb24uZmxhZ3M/LmZpbmQoZiA9PiBmLmlkID09PSBmbGFnSWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZy5zdGF0dXMgPSAnYXBwcm92ZWQnO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGbGFnIGFwcHJvdmVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBhcHByb3ZlIGZsYWcnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmVqZWN0RmxhZzogYXN5bmMgKGZsYWdJZCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFJlamVjdCBmbGFnIHZpYSBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvaGFzaHRhZ3MvZmxhZ3MvJHtmbGFnSWR9L3JlamVjdGAsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcmVqZWN0IGZsYWc6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBmbGFnSW5kZXggPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWUuZmluZEluZGV4KG0gPT4gXG4gICAgICAgICAgICAgICAgbS5mbGFncz8uc29tZShmID0+IGYuaWQgPT09IGZsYWdJZClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKGZsYWdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlcmF0aW9uID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlW2ZsYWdJbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKG1vZGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZsYWcgPSBtb2RlcmF0aW9uLmZsYWdzPy5maW5kKGYgPT4gZi5pZCA9PT0gZmxhZ0lkKTtcbiAgICAgICAgICAgICAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWcuc3RhdHVzID0gJ3JlamVjdGVkJztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmxhZyByZWplY3RlZCBzdWNjZXNzZnVsbHlcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcmVqZWN0IGZsYWcnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy8gUXVldWUgbWFuYWdlbWVudCBhY3Rpb25zXG4gICAgICAgIGxvYWRNb2RlcmF0aW9uUXVldWU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMb2FkIG1vZGVyYXRpb24gcXVldWUgZnJvbSBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvaGFzaHRhZ3MvbW9kZXJhdGlvbi9xdWV1ZScsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIG1vZGVyYXRpb24gcXVldWU6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbW9kZXJhdGlvblF1ZXVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZSA9IG1vZGVyYXRpb25RdWV1ZTtcbiAgICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBtb2RlcmF0aW9uIHF1ZXVlJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJlZnJlc2hRdWV1ZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbG9hZE1vZGVyYXRpb25RdWV1ZSB9ID0gX2dldCgpO1xuICAgICAgICAgIGF3YWl0IGxvYWRNb2RlcmF0aW9uUXVldWUoKTtcbiAgICAgICAgfSxcbiAgICAgIH0pKSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2hhc2h0YWctbW9kZXJhdGlvbi1zdG9yZScsXG4gICAgICAgIHBhcnRpYWxpemU6IChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmbGFnVHlwZTogc3RhdGUuZmxhZ1R5cGUsXG4gICAgICAgICAgcmVhc29uOiBzdGF0ZS5yZWFzb24sXG4gICAgICAgIH0pLFxuICAgICAgfVxuICAgICksXG4gICAgeyBuYW1lOiAnaGFzaHRhZy1tb2RlcmF0aW9uLXN0b3JlJyB9XG4gIClcbik7XG5cbi8vIFN0b3JlIHNlbGVjdG9ycyBmb3Igb3B0aW1pemVkIHJlLXJlbmRlcnNcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uTW9kYWwgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IHN0YXRlLmlzT3Blbik7XG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvbkZvcm0gPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKFxuICBzdGF0ZSA9PiAoe1xuICAgIGZsYWdUeXBlOiBzdGF0ZS5mbGFnVHlwZSxcbiAgICByZWFzb246IHN0YXRlLnJlYXNvbixcbiAgICBpc1N1Ym1pdHRpbmc6IHN0YXRlLmlzU3VibWl0dGluZyxcbiAgICBlcnJvcjogc3RhdGUuZXJyb3IsXG4gIH0pXG4pO1xuXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvblF1ZXVlID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiBzdGF0ZS5tb2RlcmF0aW9uUXVldWUpO1xuZXhwb3J0IGNvbnN0IHVzZVNlbGVjdGVkTW9kZXJhdGlvbiA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoc3RhdGUgPT4gc3RhdGUuc2VsZWN0ZWRNb2RlcmF0aW9uKTtcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uTG9hZGluZyA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoc3RhdGUgPT4gc3RhdGUuaXNMb2FkaW5nKTtcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uRXJyb3IgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IHN0YXRlLmVycm9yKTtcblxuLy8gQWN0aW9uIHNlbGVjdG9yc1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25BY3Rpb25zID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiAoe1xuICBzZXRJc09wZW46IHN0YXRlLnNldElzT3BlbixcbiAgc2V0RmxhZ1R5cGU6IHN0YXRlLnNldEZsYWdUeXBlLFxuICBzZXRSZWFzb246IHN0YXRlLnNldFJlYXNvbixcbiAgcmVzZXRGb3JtOiBzdGF0ZS5yZXNldEZvcm0sXG4gIHNldElzU3VibWl0dGluZzogc3RhdGUuc2V0SXNTdWJtaXR0aW5nLFxuICBzZXRFcnJvcjogc3RhdGUuc2V0RXJyb3IsXG4gIHNldE1vZGVyYXRpb25RdWV1ZTogc3RhdGUuc2V0TW9kZXJhdGlvblF1ZXVlLFxuICBzZXRTZWxlY3RlZE1vZGVyYXRpb246IHN0YXRlLnNldFNlbGVjdGVkTW9kZXJhdGlvbixcbiAgYWRkTW9kZXJhdGlvbjogc3RhdGUuYWRkTW9kZXJhdGlvbixcbiAgdXBkYXRlTW9kZXJhdGlvbjogc3RhdGUudXBkYXRlTW9kZXJhdGlvbixcbiAgcmVtb3ZlTW9kZXJhdGlvbjogc3RhdGUucmVtb3ZlTW9kZXJhdGlvbixcbiAgc3VibWl0RmxhZzogc3RhdGUuc3VibWl0RmxhZyxcbiAgYXBwcm92ZUZsYWc6IHN0YXRlLmFwcHJvdmVGbGFnLFxuICByZWplY3RGbGFnOiBzdGF0ZS5yZWplY3RGbGFnLFxuICBsb2FkTW9kZXJhdGlvblF1ZXVlOiBzdGF0ZS5sb2FkTW9kZXJhdGlvblF1ZXVlLFxuICByZWZyZXNoUXVldWU6IHN0YXRlLnJlZnJlc2hRdWV1ZSxcbn0pKTtcblxuLy8gQ29tcHV0ZWQgc2VsZWN0b3JzXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvblN0YXRzID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiB7XG4gIGNvbnN0IHF1ZXVlID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlO1xuICByZXR1cm4ge1xuICAgIHRvdGFsOiBxdWV1ZS5sZW5ndGgsXG4gICAgcGVuZGluZzogcXVldWUuZmlsdGVyKG0gPT4gbS5zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoLFxuICAgIGFwcHJvdmVkOiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ2FwcHJvdmVkJykubGVuZ3RoLFxuICAgIHJlamVjdGVkOiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ3JlamVjdGVkJykubGVuZ3RoLFxuICAgIHVuZGVyUmV2aWV3OiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ3VuZGVyX3JldmlldycpLmxlbmd0aCxcbiAgfTtcbn0pO1xuXG5leHBvcnQgY29uc3QgdXNlUGVuZGluZ0ZsYWdzID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiBcbiAgc3RhdGUubW9kZXJhdGlvblF1ZXVlLmZsYXRNYXAobSA9PiBtLmZsYWdzLmZpbHRlcihmID0+IGYuc3RhdHVzID09PSAncGVuZGluZycpKVxuKTtcblxuLy8gU3RvcmUgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgbW9kZXJhdGlvblN0b3JlVXRpbHMgPSB7XG4gIGdldEZsYWdUeXBlTGFiZWw6ICh0eXBlOiBIYXNodGFnRmxhZ1R5cGUpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IGxhYmVscyA9IHtcbiAgICAgIGluYXBwcm9wcmlhdGU6ICdJbmFwcHJvcHJpYXRlIENvbnRlbnQnLFxuICAgICAgc3BhbTogJ1NwYW0nLFxuICAgICAgbWlzbGVhZGluZzogJ01pc2xlYWRpbmcnLFxuICAgICAgaGFyYXNzbWVudDogJ0hhcmFzc21lbnQnLFxuICAgICAgb3RoZXI6ICdPdGhlcicsXG4gICAgfTtcbiAgICByZXR1cm4gbGFiZWxzW3R5cGVdO1xuICB9LFxuICBcbiAgZ2V0U3RhdHVzQ29sb3I6IChzdGF0dXM6IEhhc2h0YWdNb2RlcmF0aW9uU3RhdHVzKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBjb2xvcnMgPSB7XG4gICAgICBwZW5kaW5nOiAneWVsbG93JyxcbiAgICAgIGFwcHJvdmVkOiAnZ3JlZW4nLFxuICAgICAgcmVqZWN0ZWQ6ICdyZWQnLFxuICAgICAgdW5kZXJfcmV2aWV3OiAnYmx1ZScsXG4gICAgfTtcbiAgICByZXR1cm4gY29sb3JzW3N0YXR1c107XG4gIH0sXG4gIFxuICBjYW5TdWJtaXRGbGFnOiAocmVhc29uOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gcmVhc29uLnRyaW0oKS5sZW5ndGggPiAwO1xuICB9LFxufTtcblxuLy8gU3RvcmUgc3Vic2NyaXB0aW9uc1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25TdWJzY3JpcHRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZSgpO1xuICBcbiAgcmV0dXJuIHtcbiAgICBzdWJzY3JpYmU6IChjYWxsYmFjazogKHN0YXRlOiBIYXNodGFnTW9kZXJhdGlvblN0b3JlKSA9PiB2b2lkKSA9PiB7XG4gICAgICByZXR1cm4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZS5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH0sXG4gIH07XG59O1xuXG4vLyBTdG9yZSBkZWJ1Z2dpbmdcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uRGVidWcgPSAoKSA9PiB7XG4gIGNvbnN0IHN0YXRlID0gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZSgpO1xuICBcbiAgcmV0dXJuIHtcbiAgICBzdGF0ZSxcbiAgICBhY3Rpb25zOiB1c2VNb2RlcmF0aW9uQWN0aW9ucygpLFxuICAgIHN0YXRzOiB1c2VNb2RlcmF0aW9uU3RhdHMoKSxcbiAgfTtcbn07XG4iXSwibmFtZXMiOlsibW9kZXJhdGlvblN0b3JlVXRpbHMiLCJ1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlIiwidXNlTW9kZXJhdGlvbkFjdGlvbnMiLCJ1c2VNb2RlcmF0aW9uRGVidWciLCJ1c2VNb2RlcmF0aW9uRXJyb3IiLCJ1c2VNb2RlcmF0aW9uRm9ybSIsInVzZU1vZGVyYXRpb25Mb2FkaW5nIiwidXNlTW9kZXJhdGlvbk1vZGFsIiwidXNlTW9kZXJhdGlvblF1ZXVlIiwidXNlTW9kZXJhdGlvblN0YXRzIiwidXNlTW9kZXJhdGlvblN1YnNjcmlwdGlvbiIsInVzZVBlbmRpbmdGbGFncyIsInVzZVNlbGVjdGVkTW9kZXJhdGlvbiIsImNyZWF0ZSIsImRldnRvb2xzIiwicGVyc2lzdCIsImltbWVyIiwic2V0IiwiX2dldCIsImlzT3BlbiIsImZsYWdUeXBlIiwicmVhc29uIiwiaXNTdWJtaXR0aW5nIiwiZXJyb3IiLCJtb2RlcmF0aW9uUXVldWUiLCJzZWxlY3RlZE1vZGVyYXRpb24iLCJpc0xvYWRpbmciLCJzZXRMb2FkaW5nIiwibG9hZGluZyIsInN0YXRlIiwic2V0RXJyb3IiLCJjbGVhckVycm9yIiwic2V0SXNPcGVuIiwib3BlbiIsInNldEZsYWdUeXBlIiwidHlwZSIsInNldFJlYXNvbiIsInJlc2V0Rm9ybSIsInNldElzU3VibWl0dGluZyIsInN1Ym1pdHRpbmciLCJzZXRNb2RlcmF0aW9uUXVldWUiLCJxdWV1ZSIsInNldFNlbGVjdGVkTW9kZXJhdGlvbiIsIm1vZGVyYXRpb24iLCJhZGRNb2RlcmF0aW9uIiwidW5zaGlmdCIsInVwZGF0ZU1vZGVyYXRpb24iLCJpZCIsInVwZGF0ZXMiLCJpbmRleCIsImZpbmRJbmRleCIsIm0iLCJleGlzdGluZyIsInVwZGF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlbW92ZU1vZGVyYXRpb24iLCJmaWx0ZXIiLCJzdWJtaXRGbGFnIiwiaGFzaHRhZ0lkIiwidHJpbSIsInVzZVVzZXJTdG9yZSIsInVzZXJTdG9yZSIsImdldFN0YXRlIiwidXNlcklkIiwidXNlciIsImZsYWciLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwidGltZXN0YW1wIiwic3RhdHVzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiRXJyb3IiLCJzdGF0dXNUZXh0IiwibG9nZ2VyIiwiaW5mbyIsIm1lc3NhZ2UiLCJhcHByb3ZlRmxhZyIsImZsYWdJZCIsImZsYWdJbmRleCIsImZsYWdzIiwic29tZSIsImYiLCJmaW5kIiwicmVqZWN0RmxhZyIsImxvYWRNb2RlcmF0aW9uUXVldWUiLCJqc29uIiwicmVmcmVzaFF1ZXVlIiwibmFtZSIsInBhcnRpYWxpemUiLCJ0b3RhbCIsImxlbmd0aCIsInBlbmRpbmciLCJhcHByb3ZlZCIsInJlamVjdGVkIiwidW5kZXJSZXZpZXciLCJmbGF0TWFwIiwiZ2V0RmxhZ1R5cGVMYWJlbCIsImxhYmVscyIsImluYXBwcm9wcmlhdGUiLCJzcGFtIiwibWlzbGVhZGluZyIsImhhcmFzc21lbnQiLCJvdGhlciIsImdldFN0YXR1c0NvbG9yIiwiY29sb3JzIiwidW5kZXJfcmV2aWV3IiwiY2FuU3VibWl0RmxhZyIsInN0b3JlIiwic3Vic2NyaWJlIiwiY2FsbGJhY2siLCJhY3Rpb25zIiwic3RhdHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztDQVFDOzs7Ozs7Ozs7OztJQXdhWUEsb0JBQW9CO2VBQXBCQTs7SUFyVkFDLHlCQUF5QjtlQUF6QkE7O0lBaVRBQyxvQkFBb0I7ZUFBcEJBOztJQTJFQUMsa0JBQWtCO2VBQWxCQTs7SUE5RUFDLGtCQUFrQjtlQUFsQkE7O0lBWkFDLGlCQUFpQjtlQUFqQkE7O0lBV0FDLG9CQUFvQjtlQUFwQkE7O0lBWkFDLGtCQUFrQjtlQUFsQkE7O0lBVUFDLGtCQUFrQjtlQUFsQkE7O0lBMEJBQyxrQkFBa0I7ZUFBbEJBOztJQTRDQUMseUJBQXlCO2VBQXpCQTs7SUFqQ0FDLGVBQWU7ZUFBZkE7O0lBcENBQyxxQkFBcUI7ZUFBckJBOzs7eUJBN1hVOzRCQUNFO3VCQUVIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE4RWYsTUFBTVgsNEJBQTRCWSxJ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