5ce71ffe49c5940cf5915a6f585c089c
/**
 * Profile Store - Zustand Implementation
 * 
 * Comprehensive profile state management with Zustand integration
 * Handles profile data, preferences, settings, and real-time updates
 * 
 * Created: December 19, 2024
 * Status: âœ… INTEGRATED
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    profileSelectors: function() {
        return profileSelectors;
    },
    profileStoreDebug: function() {
        return profileStoreDebug;
    },
    profileStoreSubscriptions: function() {
        return profileStoreSubscriptions;
    },
    profileStoreUtils: function() {
        return profileStoreUtils;
    },
    useProfile: function() {
        return useProfile;
    },
    useProfileActions: function() {
        return useProfileActions;
    },
    useProfileDisplay: function() {
        return useProfileDisplay;
    },
    useProfileError: function() {
        return useProfileError;
    },
    useProfileLoading: function() {
        return useProfileLoading;
    },
    useProfileStats: function() {
        return useProfileStats;
    },
    useProfileStore: function() {
        return useProfileStore;
    },
    useProfileValidation: function() {
        return useProfileValidation;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _immer = require("zustand/middleware/immer");
const _objects = require("../utils/objects");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useProfileStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((0, _immer.immer)((set, get)=>({
        // Initial state
        profile: null,
        userProfile: null,
        isProfileLoaded: false,
        isProfileComplete: false,
        profileCompleteness: 0,
        missingFields: [],
        isLoading: false,
        isProfileLoading: false,
        isUpdating: false,
        isUploadingAvatar: false,
        isExporting: false,
        error: null,
        validationErrors: {},
        validationWarnings: {},
        preferences: null,
        privacySettings: null,
        // Base store actions
        setLoading: (loading)=>set((state)=>{
                state.isLoading = loading;
            }),
        setError: (error)=>set((state)=>{
                state.error = error;
            }),
        clearError: ()=>set((state)=>{
                state.error = null;
            }),
        // Profile data actions
        setProfile: (profile)=>set((state)=>{
                state.profile = profile;
                state.isProfileLoaded = !!profile;
                if (profile) {
                    state.updateProfileCompleteness();
                }
            }),
        setUserProfile: (userProfile)=>set((state)=>{
                state.userProfile = userProfile;
                if (userProfile) {
                    state.preferences = userProfile.preferences || null;
                    state.privacySettings = userProfile.privacy_settings || null;
                    state.updateProfileCompleteness();
                }
            }),
        // Profile update action
        updateProfile: async (updates)=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                // Import profile service dynamically to avoid circular dependencies
                const { updateProfile: updateProfileService } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfileService(updates);
                if (result.success && result.data) {
                    set((state)=>{
                        state.profile = result.data;
                        state.isUpdating = false;
                        state.updateProfileCompleteness();
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to update profile";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update profile";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Preferences update
        updatePreferences: async (preferences)=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { updateProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfile({
                    preferences
                });
                if (result.success) {
                    set((state)=>{
                        if (state.preferences) {
                            state.preferences = (0, _objects.withOptional)(state.preferences, preferences);
                        } else {
                            state.preferences = preferences;
                        }
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to update preferences";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update preferences";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Privacy settings update
        updatePrivacySettings: async (settings)=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { updateProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfile({
                    privacy_settings: settings
                });
                if (result.success) {
                    set((state)=>{
                        if (state.privacySettings) {
                            state.privacySettings = (0, _objects.withOptional)(state.privacySettings, settings);
                        } else {
                            state.privacySettings = settings;
                        }
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to update privacy settings";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update privacy settings";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Avatar actions
        updateAvatar: async (file)=>{
            set((state)=>{
                state.isUploadingAvatar = true;
                state.error = null;
            });
            try {
                const { updateProfileAvatar } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfileAvatar(file);
                set((state)=>{
                    state.isUploadingAvatar = false;
                });
                if (result.success && result.avatar_url) {
                    set((state)=>{
                        if (state.profile) {
                            state.profile.avatar_url = result.avatar_url;
                        }
                        if (state.userProfile) {
                            state.userProfile.avatar_url = result.avatar_url;
                        }
                    });
                }
                return result;
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update avatar";
                    state.isUploadingAvatar = false;
                });
                return {
                    success: false,
                    error: error instanceof Error ? error.message : "Failed to update avatar"
                };
            }
        },
        removeAvatar: async ()=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { updateProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const currentState = get();
                const result = await updateProfile({
                    display_name: currentState.profile?.display_name
                });
                if (result.success) {
                    set((state)=>{
                        if (state.profile) {
                            state.profile.avatar_url = undefined;
                        }
                        if (state.userProfile) {
                            state.userProfile.avatar_url = undefined;
                        }
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to remove avatar";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to remove avatar";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Profile management
        loadProfile: async ()=>{
            set((state)=>{
                state.isProfileLoading = true;
                state.error = null;
            });
            try {
                const { getCurrentProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await getCurrentProfile();
                if (result.success && result.data) {
                    set((state)=>{
                        state.profile = result.data;
                        state.isProfileLoaded = true;
                        state.isProfileLoading = false;
                        state.updateProfileCompleteness();
                    });
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to load profile";
                        state.isProfileLoading = false;
                    });
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to load profile";
                    state.isProfileLoading = false;
                });
            }
        },
        refreshProfile: async ()=>{
            await get().loadProfile();
        },
        exportProfile: async ()=>{
            set((state)=>{
                state.isExporting = true;
                state.error = null;
            });
            try {
                const { exportUserData } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await exportUserData();
                set((state)=>{
                    state.isExporting = false;
                });
                return result;
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to export profile";
                    state.isExporting = false;
                });
                return null;
            }
        },
        deleteProfile: async ()=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { deleteProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await deleteProfile();
                if (result.success) {
                    set((state)=>{
                        state.profile = null;
                        state.userProfile = null;
                        state.isProfileLoaded = false;
                        state.isProfileComplete = false;
                        state.profileCompleteness = 0;
                        state.missingFields = [];
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to delete profile";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to delete profile";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Validation
        validateProfile: (data)=>{
            // Basic validation logic
            const errors = [];
            const warnings = [];
            if (data.display_name && data.display_name.length < 2) {
                errors.push("Display name must be at least 2 characters");
            }
            if (data.bio && data.bio.length > 500) {
                warnings.push("Bio is quite long, consider shortening it");
            }
            return {
                isValid: errors.length === 0,
                errors,
                warnings
            };
        },
        setValidationErrors: (errors)=>set((state)=>{
                state.validationErrors = errors;
            }),
        setValidationWarnings: (warnings)=>set((state)=>{
                state.validationWarnings = warnings;
            }),
        clearValidation: ()=>set((state)=>{
                state.validationErrors = {};
                state.validationWarnings = {};
            }),
        // Loading states
        setProfileLoading: (loading)=>set((state)=>{
                state.isProfileLoading = loading;
            }),
        setUpdating: (updating)=>set((state)=>{
                state.isUpdating = updating;
            }),
        setUploadingAvatar: (uploading)=>set((state)=>{
                state.isUploadingAvatar = uploading;
            }),
        setExporting: (exporting)=>set((state)=>{
                state.isExporting = exporting;
            }),
        // Profile completeness
        updateProfileCompleteness: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            if (!profile) {
                set((state)=>{
                    state.isProfileComplete = false;
                    state.profileCompleteness = 0;
                    state.missingFields = [];
                });
                return;
            }
            const requiredFields = [
                "display_name",
                "username",
                "email"
            ];
            const missingFields = [];
            requiredFields.forEach((field)=>{
                if (!profile[field] || typeof profile[field] === "string" && profile[field].trim().length === 0) {
                    missingFields.push(field.replace("_", " "));
                }
            });
            const isComplete = missingFields.length === 0;
            const percentage = Math.round((requiredFields.length - missingFields.length) / requiredFields.length * 100);
            set((state)=>{
                state.isProfileComplete = isComplete;
                state.profileCompleteness = percentage;
                state.missingFields = missingFields;
            });
        },
        getProfileCompleteness: ()=>{
            const state = get();
            return {
                isComplete: state.isProfileComplete,
                percentage: state.profileCompleteness,
                missingFields: state.missingFields
            };
        },
        // Profile display helpers
        getDisplayName: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            if (!profile) return "User";
            return profile.display_name || profile.username || profile.email?.split("@")[0] || "User";
        },
        getInitials: ()=>{
            const state = get();
            const displayName = state.getDisplayName();
            return displayName.split(" ").map((word)=>word.charAt(0)).join("").toUpperCase().slice(0, 2);
        },
        getTrustTierDisplay: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            if (!profile) return "Unknown";
            const tierNames = {
                "T0": "New User",
                "T1": "Verified User",
                "T2": "Trusted User",
                "T3": "VIP User"
            };
            return tierNames[profile.trust_tier] || "Unknown";
        },
        isAdmin: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            return profile?.is_admin || false;
        },
        // Reset and cleanup
        resetProfile: ()=>set((state)=>{
                state.profile = null;
                state.userProfile = null;
                state.isProfileLoaded = false;
                state.isProfileComplete = false;
                state.profileCompleteness = 0;
                state.missingFields = [];
                state.preferences = null;
                state.privacySettings = null;
                state.validationErrors = {};
                state.validationWarnings = {};
            }),
        clearProfile: ()=>{
            get().resetProfile();
        }
    })), {
    name: "profile-store",
    partialize: (state)=>({
            profile: state.profile,
            userProfile: state.userProfile,
            preferences: state.preferences,
            privacySettings: state.privacySettings,
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness
        })
}), {
    name: "profile-store"
}));
const profileSelectors = {
    // Basic profile data
    profile: (state)=>state.profile,
    userProfile: (state)=>state.userProfile,
    // Profile state
    isProfileLoaded: (state)=>state.isProfileLoaded,
    isProfileComplete: (state)=>state.isProfileComplete,
    profileCompleteness: (state)=>state.profileCompleteness,
    missingFields: (state)=>state.missingFields,
    // Loading states
    isLoading: (state)=>state.isProfileLoading || state.isUpdating,
    isUpdating: (state)=>state.isUpdating,
    isUploadingAvatar: (state)=>state.isUploadingAvatar,
    isExporting: (state)=>state.isExporting,
    // Error states
    hasError: (state)=>!!state.error,
    error: (state)=>state.error,
    // Profile display
    displayName: (state)=>state.getDisplayName(),
    initials: (state)=>state.getInitials(),
    trustTierDisplay: (state)=>state.getTrustTierDisplay(),
    isAdmin: (state)=>state.isAdmin(),
    // Preferences and settings
    preferences: (state)=>state.preferences,
    privacySettings: (state)=>state.privacySettings,
    // Validation
    validationErrors: (state)=>state.validationErrors,
    validationWarnings: (state)=>state.validationWarnings,
    hasValidationErrors: (state)=>Object.keys(state.validationErrors).length > 0,
    hasValidationWarnings: (state)=>Object.keys(state.validationWarnings).length > 0
};
const useProfile = ()=>useProfileStore((state)=>({
            profile: state.profile,
            userProfile: state.userProfile,
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness,
            missingFields: state.missingFields
        }));
const useProfileLoading = ()=>useProfileStore((state)=>({
            isLoading: state.isProfileLoading,
            isUpdating: state.isUpdating,
            isUploadingAvatar: state.isUploadingAvatar,
            isExporting: state.isExporting
        }));
const useProfileError = ()=>useProfileStore((state)=>({
            error: state.error,
            hasError: !!state.error
        }));
const useProfileDisplay = ()=>useProfileStore((state)=>({
            displayName: state.getDisplayName(),
            initials: state.getInitials(),
            trustTierDisplay: state.getTrustTierDisplay(),
            isAdmin: state.isAdmin()
        }));
const useProfileValidation = ()=>useProfileStore((state)=>({
            validationErrors: state.validationErrors,
            validationWarnings: state.validationWarnings,
            hasValidationErrors: Object.keys(state.validationErrors).length > 0,
            hasValidationWarnings: Object.keys(state.validationWarnings).length > 0
        }));
const useProfileActions = ()=>useProfileStore((state)=>({
            updateProfile: state.updateProfile,
            updatePreferences: state.updatePreferences,
            updatePrivacySettings: state.updatePrivacySettings,
            updateAvatar: state.updateAvatar,
            removeAvatar: state.removeAvatar,
            loadProfile: state.loadProfile,
            refreshProfile: state.refreshProfile,
            exportProfile: state.exportProfile,
            deleteProfile: state.deleteProfile,
            validateProfile: state.validateProfile,
            setValidationErrors: state.setValidationErrors,
            clearValidation: state.clearValidation
        }));
const useProfileStats = ()=>useProfileStore((state)=>({
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness,
            missingFields: state.missingFields,
            hasPreferences: !!state.preferences,
            hasPrivacySettings: !!state.privacySettings
        }));
const profileStoreUtils = {
    // Initialize profile store
    initialize: ()=>{
        logger.info("Profile store initialized");
    },
    // Reset profile store
    reset: ()=>{
        useProfileStore.getState().resetProfile();
        logger.info("Profile store reset");
    },
    // Get profile completeness
    getCompleteness: ()=>{
        return useProfileStore.getState().getProfileCompleteness();
    },
    // Validate profile data
    validate: (data)=>{
        return useProfileStore.getState().validateProfile(data);
    },
    // Get profile display info
    getDisplayInfo: ()=>{
        const state = useProfileStore.getState();
        return {
            displayName: state.getDisplayName(),
            initials: state.getInitials(),
            trustTier: state.getTrustTierDisplay(),
            isAdmin: state.isAdmin()
        };
    }
};
const profileStoreSubscriptions = {
    // Subscribe to profile changes
    onProfileChange: (callback)=>{
        return useProfileStore.subscribe((state, prevState)=>{
            if (state.profile !== prevState.profile) {
                callback(state.profile);
            }
        });
    },
    // Subscribe to profile completeness changes
    onCompletenessChange: (callback)=>{
        return useProfileStore.subscribe((state, prevState)=>{
            const current = state.getProfileCompleteness();
            const previous = prevState.getProfileCompleteness();
            if (current !== previous) {
                callback(current);
            }
        });
    },
    // Subscribe to loading state changes
    onLoadingChange: (callback)=>{
        return useProfileStore.subscribe((state, prevState)=>{
            const current = state.isProfileLoading || state.isUpdating;
            const previous = prevState.isProfileLoading || prevState.isUpdating;
            if (current !== previous) {
                callback(current);
            }
        });
    }
};
const profileStoreDebug = {
    // Log current state
    logState: ()=>{
        const state = useProfileStore.getState();
        logger.debug("Profile Store State", {
            profile: state.profile,
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness,
            isLoading: state.isProfileLoading,
            isUpdating: state.isUpdating,
            error: state.error
        });
    },
    // Reset store
    reset: ()=>{
        profileStoreUtils.reset();
    },
    // Clear all data
    clearAll: ()=>{
        useProfileStore.getState().clearProfile();
        logger.info("Profile store cleared");
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL3Byb2ZpbGVTdG9yZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb2ZpbGUgU3RvcmUgLSBadXN0YW5kIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIENvbXByZWhlbnNpdmUgcHJvZmlsZSBzdGF0ZSBtYW5hZ2VtZW50IHdpdGggWnVzdGFuZCBpbnRlZ3JhdGlvblxuICogSGFuZGxlcyBwcm9maWxlIGRhdGEsIHByZWZlcmVuY2VzLCBzZXR0aW5ncywgYW5kIHJlYWwtdGltZSB1cGRhdGVzXG4gKiBcbiAqIENyZWF0ZWQ6IERlY2VtYmVyIDE5LCAyMDI0XG4gKiBTdGF0dXM6IOKchSBJTlRFR1JBVEVEXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnenVzdGFuZCc7XG5pbXBvcnQgeyBkZXZ0b29scyB9IGZyb20gJ3p1c3RhbmQvbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBwZXJzaXN0IH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IGltbWVyIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlL2ltbWVyJztcblxuaW1wb3J0IHR5cGUgeyBcbiAgUHJvZmlsZVVzZXIsIFxuICBVc2VyUHJvZmlsZSwgXG4gIFByb2ZpbGVVcGRhdGVEYXRhLCBcbiAgUHJvZmlsZVByZWZlcmVuY2VzLCBcbiAgUHJpdmFjeVNldHRpbmdzLFxuICBQcm9maWxlVmFsaWRhdGlvblJlc3VsdCxcbiAgQXZhdGFyVXBsb2FkUmVzdWx0LFxuICBQcm9maWxlRXhwb3J0RGF0YVxufSBmcm9tICdAL2ZlYXR1cmVzL3Byb2ZpbGUvdHlwZXMnO1xuaW1wb3J0IHsgd2l0aE9wdGlvbmFsIH0gZnJvbSAnQC9saWIvdXRpbHMvb2JqZWN0cyc7XG5cbmltcG9ydCB0eXBlIHsgQmFzZVN0b3JlIH0gZnJvbSAnLi90eXBlcyc7XG5cblxuLy8gTG9jYWwgdHlwZSBkZWZpbml0aW9uXG5pbnRlcmZhY2UgUHJvZmlsZUNvbXBsZXRlbmVzcyB7XG4gIGlzQ29tcGxldGU6IGJvb2xlYW47XG4gIHBlcmNlbnRhZ2U6IG51bWJlcjtcbiAgbWlzc2luZ0ZpZWxkczogc3RyaW5nW107XG59XG5cbi8vIFByb2ZpbGUgc3RvcmUgc3RhdGUgaW50ZXJmYWNlXG50eXBlIFByb2ZpbGVTdG9yZSA9IHtcbiAgLy8gUHJvZmlsZSBkYXRhXG4gIHByb2ZpbGU6IFByb2ZpbGVVc2VyIHwgbnVsbDtcbiAgdXNlclByb2ZpbGU6IFVzZXJQcm9maWxlIHwgbnVsbDtcbiAgXG4gIC8vIFByb2ZpbGUgc3RhdGVcbiAgaXNQcm9maWxlTG9hZGVkOiBib29sZWFuO1xuICBpc1Byb2ZpbGVDb21wbGV0ZTogYm9vbGVhbjtcbiAgcHJvZmlsZUNvbXBsZXRlbmVzczogbnVtYmVyO1xuICBtaXNzaW5nRmllbGRzOiBzdHJpbmdbXTtcbiAgXG4gIC8vIExvYWRpbmcgc3RhdGVzXG4gIGlzUHJvZmlsZUxvYWRpbmc6IGJvb2xlYW47XG4gIGlzVXBkYXRpbmc6IGJvb2xlYW47XG4gIGlzVXBsb2FkaW5nQXZhdGFyOiBib29sZWFuO1xuICBpc0V4cG9ydGluZzogYm9vbGVhbjtcbiAgXG4gIC8vIFZhbGlkYXRpb24gc3RhdGVcbiAgdmFsaWRhdGlvbkVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+O1xuICB2YWxpZGF0aW9uV2FybmluZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPjtcbiAgXG4gIC8vIFByb2ZpbGUgcHJlZmVyZW5jZXMgYW5kIHNldHRpbmdzXG4gIHByZWZlcmVuY2VzOiBQcm9maWxlUHJlZmVyZW5jZXMgfCBudWxsO1xuICBwcml2YWN5U2V0dGluZ3M6IFByaXZhY3lTZXR0aW5ncyB8IG51bGw7XG4gIFxuICAvLyBQcm9maWxlIGFjdGlvbnNcbiAgc2V0UHJvZmlsZTogKHByb2ZpbGU6IFByb2ZpbGVVc2VyIHwgbnVsbCkgPT4gdm9pZDtcbiAgc2V0VXNlclByb2ZpbGU6ICh1c2VyUHJvZmlsZTogVXNlclByb2ZpbGUgfCBudWxsKSA9PiB2b2lkO1xuICB1cGRhdGVQcm9maWxlOiAodXBkYXRlczogUHJvZmlsZVVwZGF0ZURhdGEpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIHVwZGF0ZVByZWZlcmVuY2VzOiAocHJlZmVyZW5jZXM6IFBhcnRpYWw8UHJvZmlsZVByZWZlcmVuY2VzPikgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgdXBkYXRlUHJpdmFjeVNldHRpbmdzOiAoc2V0dGluZ3M6IFBhcnRpYWw8UHJpdmFjeVNldHRpbmdzPikgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgXG4gIC8vIEF2YXRhciBhY3Rpb25zXG4gIHVwZGF0ZUF2YXRhcjogKGZpbGU6IEZpbGUpID0+IFByb21pc2U8QXZhdGFyVXBsb2FkUmVzdWx0PjtcbiAgcmVtb3ZlQXZhdGFyOiAoKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBcbiAgLy8gUHJvZmlsZSBtYW5hZ2VtZW50XG4gIGxvYWRQcm9maWxlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICByZWZyZXNoUHJvZmlsZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgZXhwb3J0UHJvZmlsZTogKCkgPT4gUHJvbWlzZTxQcm9maWxlRXhwb3J0RGF0YSB8IG51bGw+O1xuICBkZWxldGVQcm9maWxlOiAoKSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBcbiAgLy8gVmFsaWRhdGlvblxuICB2YWxpZGF0ZVByb2ZpbGU6IChkYXRhOiBQcm9maWxlVXBkYXRlRGF0YSkgPT4gUHJvZmlsZVZhbGlkYXRpb25SZXN1bHQ7XG4gIHNldFZhbGlkYXRpb25FcnJvcnM6IChlcnJvcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPikgPT4gdm9pZDtcbiAgc2V0VmFsaWRhdGlvbldhcm5pbmdzOiAod2FybmluZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPikgPT4gdm9pZDtcbiAgY2xlYXJWYWxpZGF0aW9uOiAoKSA9PiB2b2lkO1xuICBcbiAgLy8gTG9hZGluZyBzdGF0ZXNcbiAgc2V0UHJvZmlsZUxvYWRpbmc6IChsb2FkaW5nOiBib29sZWFuKSA9PiB2b2lkO1xuICBzZXRVcGRhdGluZzogKHVwZGF0aW5nOiBib29sZWFuKSA9PiB2b2lkO1xuICBzZXRVcGxvYWRpbmdBdmF0YXI6ICh1cGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldEV4cG9ydGluZzogKGV4cG9ydGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgXG4gIC8vIFByb2ZpbGUgY29tcGxldGVuZXNzXG4gIHVwZGF0ZVByb2ZpbGVDb21wbGV0ZW5lc3M6ICgpID0+IHZvaWQ7XG4gIGdldFByb2ZpbGVDb21wbGV0ZW5lc3M6ICgpID0+IFByb2ZpbGVDb21wbGV0ZW5lc3M7XG4gIFxuICAvLyBQcm9maWxlIGRpc3BsYXkgaGVscGVyc1xuICBnZXREaXNwbGF5TmFtZTogKCkgPT4gc3RyaW5nO1xuICBnZXRJbml0aWFsczogKCkgPT4gc3RyaW5nO1xuICBnZXRUcnVzdFRpZXJEaXNwbGF5OiAoKSA9PiBzdHJpbmc7XG4gIGlzQWRtaW46ICgpID0+IGJvb2xlYW47XG4gIFxuICAvLyBSZXNldCBhbmQgY2xlYW51cFxuICByZXNldFByb2ZpbGU6ICgpID0+IHZvaWQ7XG4gIGNsZWFyUHJvZmlsZTogKCkgPT4gdm9pZDtcbn0gJiBCYXNlU3RvcmVcblxuLy8gQ3JlYXRlIHByb2ZpbGUgc3RvcmUgd2l0aCBtaWRkbGV3YXJlXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZVN0b3JlID0gY3JlYXRlPFByb2ZpbGVTdG9yZT4oKShcbiAgZGV2dG9vbHMoXG4gICAgcGVyc2lzdChcbiAgICAgIGltbWVyKChzZXQsIGdldCkgPT4gKHtcbiAgICAgICAgLy8gSW5pdGlhbCBzdGF0ZVxuICAgICAgICBwcm9maWxlOiBudWxsLFxuICAgICAgICB1c2VyUHJvZmlsZTogbnVsbCxcbiAgICAgICAgaXNQcm9maWxlTG9hZGVkOiBmYWxzZSxcbiAgICAgICAgaXNQcm9maWxlQ29tcGxldGU6IGZhbHNlLFxuICAgICAgICBwcm9maWxlQ29tcGxldGVuZXNzOiAwLFxuICAgICAgICBtaXNzaW5nRmllbGRzOiBbXSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgaXNQcm9maWxlTG9hZGluZzogZmFsc2UsXG4gICAgICAgIGlzVXBkYXRpbmc6IGZhbHNlLFxuICAgICAgICBpc1VwbG9hZGluZ0F2YXRhcjogZmFsc2UsXG4gICAgICAgIGlzRXhwb3J0aW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIHZhbGlkYXRpb25FcnJvcnM6IHt9LFxuICAgICAgICB2YWxpZGF0aW9uV2FybmluZ3M6IHt9LFxuICAgICAgICBwcmVmZXJlbmNlczogbnVsbCxcbiAgICAgICAgcHJpdmFjeVNldHRpbmdzOiBudWxsLFxuICAgICAgICBcbiAgICAgICAgLy8gQmFzZSBzdG9yZSBhY3Rpb25zXG4gICAgICAgIHNldExvYWRpbmc6IChsb2FkaW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gbG9hZGluZztcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBzZXRFcnJvcjogKGVycm9yKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBjbGVhckVycm9yOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2ZpbGUgZGF0YSBhY3Rpb25zXG4gICAgICAgIHNldFByb2ZpbGU6IChwcm9maWxlKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUucHJvZmlsZSA9IHByb2ZpbGU7XG4gICAgICAgICAgc3RhdGUuaXNQcm9maWxlTG9hZGVkID0gISFwcm9maWxlO1xuICAgICAgICAgIGlmIChwcm9maWxlKSB7XG4gICAgICAgICAgICBzdGF0ZS51cGRhdGVQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFVzZXJQcm9maWxlOiAodXNlclByb2ZpbGUpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZSA9IHVzZXJQcm9maWxlO1xuICAgICAgICAgIGlmICh1c2VyUHJvZmlsZSkge1xuICAgICAgICAgICAgc3RhdGUucHJlZmVyZW5jZXMgPSB1c2VyUHJvZmlsZS5wcmVmZXJlbmNlcyBhcyBQcm9maWxlUHJlZmVyZW5jZXMgfHwgbnVsbDtcbiAgICAgICAgICAgIHN0YXRlLnByaXZhY3lTZXR0aW5ncyA9IHVzZXJQcm9maWxlLnByaXZhY3lfc2V0dGluZ3MgYXMgUHJpdmFjeVNldHRpbmdzIHx8IG51bGw7XG4gICAgICAgICAgICBzdGF0ZS51cGRhdGVQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2ZpbGUgdXBkYXRlIGFjdGlvblxuICAgICAgICB1cGRhdGVQcm9maWxlOiBhc3luYyAodXBkYXRlcykgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbXBvcnQgcHJvZmlsZSBzZXJ2aWNlIGR5bmFtaWNhbGx5IHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llc1xuICAgICAgICAgICAgY29uc3QgeyB1cGRhdGVQcm9maWxlOiB1cGRhdGVQcm9maWxlU2VydmljZSB9ID0gYXdhaXQgaW1wb3J0KCdAL2ZlYXR1cmVzL3Byb2ZpbGUvbGliL3Byb2ZpbGUtc2VydmljZScpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlUHJvZmlsZVNlcnZpY2UodXBkYXRlcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQuZGF0YSkge1xuICAgICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUucHJvZmlsZSA9IHJlc3VsdC5kYXRhIGFzIFByb2ZpbGVVc2VyO1xuICAgICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS51cGRhdGVQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IHJlc3VsdC5lcnJvciB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBwcm9maWxlJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnO1xuICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBQcmVmZXJlbmNlcyB1cGRhdGVcbiAgICAgICAgdXBkYXRlUHJlZmVyZW5jZXM6IGFzeW5jIChwcmVmZXJlbmNlcykgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHVwZGF0ZVByb2ZpbGUgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVByb2ZpbGUoeyBwcmVmZXJlbmNlcyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUucHJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgICAgICAgIHN0YXRlLnByZWZlcmVuY2VzID0gd2l0aE9wdGlvbmFsKHN0YXRlLnByZWZlcmVuY2VzLCBwcmVmZXJlbmNlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHN0YXRlLnByZWZlcmVuY2VzID0gcHJlZmVyZW5jZXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gdXBkYXRlIHByZWZlcmVuY2VzJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIHByZWZlcmVuY2VzJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy8gUHJpdmFjeSBzZXR0aW5ncyB1cGRhdGVcbiAgICAgICAgdXBkYXRlUHJpdmFjeVNldHRpbmdzOiBhc3luYyAoc2V0dGluZ3MpID0+IHtcbiAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgeyB1cGRhdGVQcm9maWxlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvZmVhdHVyZXMvcHJvZmlsZS9saWIvcHJvZmlsZS1zZXJ2aWNlJyk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlKHsgcHJpdmFjeV9zZXR0aW5nczogc2V0dGluZ3MgYXMgUHJpdmFjeVNldHRpbmdzIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wcml2YWN5U2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgIHN0YXRlLnByaXZhY3lTZXR0aW5ncyA9IHdpdGhPcHRpb25hbChzdGF0ZS5wcml2YWN5U2V0dGluZ3MsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc3RhdGUucHJpdmFjeVNldHRpbmdzID0gc2V0dGluZ3MgYXMgUHJpdmFjeVNldHRpbmdzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IHJlc3VsdC5lcnJvciB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBwcml2YWN5IHNldHRpbmdzJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIHByaXZhY3kgc2V0dGluZ3MnO1xuICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBBdmF0YXIgYWN0aW9uc1xuICAgICAgICB1cGRhdGVBdmF0YXI6IGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHVwZGF0ZVByb2ZpbGVBdmF0YXIgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVByb2ZpbGVBdmF0YXIoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmF2YXRhcl91cmwpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlLmF2YXRhcl91cmwgPSByZXN1bHQuYXZhdGFyX3VybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnVzZXJQcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZS5hdmF0YXJfdXJsID0gcmVzdWx0LmF2YXRhcl91cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgYXZhdGFyJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIGF2YXRhcidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmVtb3ZlQXZhdGFyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXBkYXRlUHJvZmlsZSB9ID0gYXdhaXQgaW1wb3J0KCdAL2ZlYXR1cmVzL3Byb2ZpbGUvbGliL3Byb2ZpbGUtc2VydmljZScpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlKHsgZGlzcGxheV9uYW1lOiBjdXJyZW50U3RhdGUucHJvZmlsZT8uZGlzcGxheV9uYW1lIH0gYXMgUHJvZmlsZVVwZGF0ZURhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlLmF2YXRhcl91cmwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS51c2VyUHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgc3RhdGUudXNlclByb2ZpbGUuYXZhdGFyX3VybCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byByZW1vdmUgYXZhdGFyJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcmVtb3ZlIGF2YXRhcic7XG4gICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2ZpbGUgbWFuYWdlbWVudFxuICAgICAgICBsb2FkUHJvZmlsZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGdldEN1cnJlbnRQcm9maWxlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvZmVhdHVyZXMvcHJvZmlsZS9saWIvcHJvZmlsZS1zZXJ2aWNlJyk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRDdXJyZW50UHJvZmlsZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmRhdGEpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLnByb2ZpbGUgPSByZXN1bHQuZGF0YSBhcyBQcm9maWxlVXNlcjtcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1Byb2ZpbGVMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS51cGRhdGVQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gbG9hZCBwcm9maWxlJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgcHJvZmlsZSc7XG4gICAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJlZnJlc2hQcm9maWxlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgZ2V0KCkubG9hZFByb2ZpbGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGV4cG9ydFByb2ZpbGU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc0V4cG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZXhwb3J0VXNlckRhdGEgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4cG9ydFVzZXJEYXRhKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGV4cG9ydCBwcm9maWxlJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZGVsZXRlUHJvZmlsZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRlbGV0ZVByb2ZpbGUgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRlbGV0ZVByb2ZpbGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNQcm9maWxlTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNQcm9maWxlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlQ29tcGxldGVuZXNzID0gMDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5taXNzaW5nRmllbGRzID0gW107XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byBkZWxldGUgcHJvZmlsZSc7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGRlbGV0ZSBwcm9maWxlJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy8gVmFsaWRhdGlvblxuICAgICAgICB2YWxpZGF0ZVByb2ZpbGU6IChkYXRhKSA9PiB7XG4gICAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBsb2dpY1xuICAgICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF0YS5kaXNwbGF5X25hbWUgJiYgZGF0YS5kaXNwbGF5X25hbWUubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0Rpc3BsYXkgbmFtZSBtdXN0IGJlIGF0IGxlYXN0IDIgY2hhcmFjdGVycycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF0YS5iaW8gJiYgZGF0YS5iaW8ubGVuZ3RoID4gNTAwKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdCaW8gaXMgcXVpdGUgbG9uZywgY29uc2lkZXIgc2hvcnRlbmluZyBpdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgICAgIHdhcm5pbmdzXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNldFZhbGlkYXRpb25FcnJvcnM6IChlcnJvcnMpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS52YWxpZGF0aW9uRXJyb3JzID0gZXJyb3JzO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFZhbGlkYXRpb25XYXJuaW5nczogKHdhcm5pbmdzKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUudmFsaWRhdGlvbldhcm5pbmdzID0gd2FybmluZ3M7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgY2xlYXJWYWxpZGF0aW9uOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUudmFsaWRhdGlvbkVycm9ycyA9IHt9O1xuICAgICAgICAgIHN0YXRlLnZhbGlkYXRpb25XYXJuaW5ncyA9IHt9O1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIExvYWRpbmcgc3RhdGVzXG4gICAgICAgIHNldFByb2ZpbGVMb2FkaW5nOiAobG9hZGluZykgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSBsb2FkaW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFVwZGF0aW5nOiAodXBkYXRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gdXBkYXRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgc2V0VXBsb2FkaW5nQXZhdGFyOiAodXBsb2FkaW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSB1cGxvYWRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgc2V0RXhwb3J0aW5nOiAoZXhwb3J0aW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNFeHBvcnRpbmcgPSBleHBvcnRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gUHJvZmlsZSBjb21wbGV0ZW5lc3NcbiAgICAgICAgdXBkYXRlUHJvZmlsZUNvbXBsZXRlbmVzczogKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHN0YXRlLnByb2ZpbGUgfHwgc3RhdGUudXNlclByb2ZpbGU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFwcm9maWxlKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MgPSAwO1xuICAgICAgICAgICAgICBzdGF0ZS5taXNzaW5nRmllbGRzID0gW107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ2Rpc3BsYXlfbmFtZScsICd1c2VybmFtZScsICdlbWFpbCddO1xuICAgICAgICAgIGNvbnN0IG1pc3NpbmdGaWVsZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgXG4gICAgICAgICAgcmVxdWlyZWRGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBpZiAoIXByb2ZpbGVbZmllbGQgYXMga2V5b2YgdHlwZW9mIHByb2ZpbGVdIHx8IFxuICAgICAgICAgICAgICAgICh0eXBlb2YgcHJvZmlsZVtmaWVsZCBhcyBrZXlvZiB0eXBlb2YgcHJvZmlsZV0gPT09ICdzdHJpbmcnICYmIFxuICAgICAgICAgICAgICAgICAocHJvZmlsZVtmaWVsZCBhcyBrZXlvZiB0eXBlb2YgcHJvZmlsZV0gYXMgc3RyaW5nKS50cmltKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICBtaXNzaW5nRmllbGRzLnB1c2goZmllbGQucmVwbGFjZSgnXycsICcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGUgPSBtaXNzaW5nRmllbGRzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgoKHJlcXVpcmVkRmllbGRzLmxlbmd0aCAtIG1pc3NpbmdGaWVsZHMubGVuZ3RoKSAvIHJlcXVpcmVkRmllbGRzLmxlbmd0aCkgKiAxMDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUNvbXBsZXRlID0gaXNDb21wbGV0ZTtcbiAgICAgICAgICAgIHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MgPSBwZXJjZW50YWdlO1xuICAgICAgICAgICAgc3RhdGUubWlzc2luZ0ZpZWxkcyA9IG1pc3NpbmdGaWVsZHM7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBnZXRQcm9maWxlQ29tcGxldGVuZXNzOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiBzdGF0ZS5wcm9maWxlQ29tcGxldGVuZXNzLFxuICAgICAgICAgICAgbWlzc2luZ0ZpZWxkczogc3RhdGUubWlzc2luZ0ZpZWxkc1xuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBQcm9maWxlIGRpc3BsYXkgaGVscGVyc1xuICAgICAgICBnZXREaXNwbGF5TmFtZTogKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHN0YXRlLnByb2ZpbGUgfHwgc3RhdGUudXNlclByb2ZpbGU7XG4gICAgICAgICAgaWYgKCFwcm9maWxlKSByZXR1cm4gJ1VzZXInO1xuICAgICAgICAgIHJldHVybiBwcm9maWxlLmRpc3BsYXlfbmFtZSB8fCBwcm9maWxlLnVzZXJuYW1lIHx8IHByb2ZpbGUuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ1VzZXInO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZ2V0SW5pdGlhbHM6ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IGdldCgpO1xuICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gc3RhdGUuZ2V0RGlzcGxheU5hbWUoKTtcbiAgICAgICAgICByZXR1cm4gZGlzcGxheU5hbWVcbiAgICAgICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkpXG4gICAgICAgICAgICAuam9pbignJylcbiAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAuc2xpY2UoMCwgMik7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBnZXRUcnVzdFRpZXJEaXNwbGF5OiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gc3RhdGUucHJvZmlsZSB8fCBzdGF0ZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICBpZiAoIXByb2ZpbGUpIHJldHVybiAnVW5rbm93bic7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdGllck5hbWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICAgJ1QwJzogJ05ldyBVc2VyJyxcbiAgICAgICAgICAgICdUMSc6ICdWZXJpZmllZCBVc2VyJyxcbiAgICAgICAgICAgICdUMic6ICdUcnVzdGVkIFVzZXInLFxuICAgICAgICAgICAgJ1QzJzogJ1ZJUCBVc2VyJyxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiB0aWVyTmFtZXNbcHJvZmlsZS50cnVzdF90aWVyXSB8fCAnVW5rbm93bic7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBpc0FkbWluOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gc3RhdGUucHJvZmlsZSB8fCBzdGF0ZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICByZXR1cm4gcHJvZmlsZT8uaXNfYWRtaW4gfHwgZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBSZXNldCBhbmQgY2xlYW51cFxuICAgICAgICByZXNldFByb2ZpbGU6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZSA9IG51bGw7XG4gICAgICAgICAgc3RhdGUuaXNQcm9maWxlTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgc3RhdGUuaXNQcm9maWxlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS5wcm9maWxlQ29tcGxldGVuZXNzID0gMDtcbiAgICAgICAgICBzdGF0ZS5taXNzaW5nRmllbGRzID0gW107XG4gICAgICAgICAgc3RhdGUucHJlZmVyZW5jZXMgPSBudWxsO1xuICAgICAgICAgIHN0YXRlLnByaXZhY3lTZXR0aW5ncyA9IG51bGw7XG4gICAgICAgICAgc3RhdGUudmFsaWRhdGlvbkVycm9ycyA9IHt9O1xuICAgICAgICAgIHN0YXRlLnZhbGlkYXRpb25XYXJuaW5ncyA9IHt9O1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGNsZWFyUHJvZmlsZTogKCkgPT4ge1xuICAgICAgICAgIGdldCgpLnJlc2V0UHJvZmlsZSgpO1xuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdwcm9maWxlLXN0b3JlJyxcbiAgICAgICAgcGFydGlhbGl6ZTogKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHByb2ZpbGU6IHN0YXRlLnByb2ZpbGUsXG4gICAgICAgICAgdXNlclByb2ZpbGU6IHN0YXRlLnVzZXJQcm9maWxlLFxuICAgICAgICAgIHByZWZlcmVuY2VzOiBzdGF0ZS5wcmVmZXJlbmNlcyxcbiAgICAgICAgICBwcml2YWN5U2V0dGluZ3M6IHN0YXRlLnByaXZhY3lTZXR0aW5ncyxcbiAgICAgICAgICBpc1Byb2ZpbGVMb2FkZWQ6IHN0YXRlLmlzUHJvZmlsZUxvYWRlZCxcbiAgICAgICAgICBpc1Byb2ZpbGVDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gICAgICAgICAgcHJvZmlsZUNvbXBsZXRlbmVzczogc3RhdGUucHJvZmlsZUNvbXBsZXRlbmVzc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICksXG4gICAge1xuICAgICAgbmFtZTogJ3Byb2ZpbGUtc3RvcmUnXG4gICAgfVxuICApXG4pO1xuXG4vLyBQcm9maWxlIHN0b3JlIHNlbGVjdG9ycyBmb3IgY29tbW9uIHVzZSBjYXNlc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTZWxlY3RvcnMgPSB7XG4gIC8vIEJhc2ljIHByb2ZpbGUgZGF0YVxuICBwcm9maWxlOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUucHJvZmlsZSxcbiAgdXNlclByb2ZpbGU6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS51c2VyUHJvZmlsZSxcbiAgXG4gIC8vIFByb2ZpbGUgc3RhdGVcbiAgaXNQcm9maWxlTG9hZGVkOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUuaXNQcm9maWxlTG9hZGVkLFxuICBpc1Byb2ZpbGVDb21wbGV0ZTogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzUHJvZmlsZUNvbXBsZXRlLFxuICBwcm9maWxlQ29tcGxldGVuZXNzOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUucHJvZmlsZUNvbXBsZXRlbmVzcyxcbiAgbWlzc2luZ0ZpZWxkczogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLm1pc3NpbmdGaWVsZHMsXG4gIFxuICAvLyBMb2FkaW5nIHN0YXRlc1xuICBpc0xvYWRpbmc6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nIHx8IHN0YXRlLmlzVXBkYXRpbmcsXG4gIGlzVXBkYXRpbmc6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5pc1VwZGF0aW5nLFxuICBpc1VwbG9hZGluZ0F2YXRhcjogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzVXBsb2FkaW5nQXZhdGFyLFxuICBpc0V4cG9ydGluZzogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzRXhwb3J0aW5nLFxuICBcbiAgLy8gRXJyb3Igc3RhdGVzXG4gIGhhc0Vycm9yOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gISFzdGF0ZS5lcnJvcixcbiAgZXJyb3I6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5lcnJvcixcbiAgXG4gIC8vIFByb2ZpbGUgZGlzcGxheVxuICBkaXNwbGF5TmFtZTogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmdldERpc3BsYXlOYW1lKCksXG4gIGluaXRpYWxzOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUuZ2V0SW5pdGlhbHMoKSxcbiAgdHJ1c3RUaWVyRGlzcGxheTogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmdldFRydXN0VGllckRpc3BsYXkoKSxcbiAgaXNBZG1pbjogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzQWRtaW4oKSxcbiAgXG4gIC8vIFByZWZlcmVuY2VzIGFuZCBzZXR0aW5nc1xuICBwcmVmZXJlbmNlczogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLnByZWZlcmVuY2VzLFxuICBwcml2YWN5U2V0dGluZ3M6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5wcml2YWN5U2V0dGluZ3MsXG4gIFxuICAvLyBWYWxpZGF0aW9uXG4gIHZhbGlkYXRpb25FcnJvcnM6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS52YWxpZGF0aW9uRXJyb3JzLFxuICB2YWxpZGF0aW9uV2FybmluZ3M6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS52YWxpZGF0aW9uV2FybmluZ3MsXG4gIGhhc1ZhbGlkYXRpb25FcnJvcnM6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBPYmplY3Qua2V5cyhzdGF0ZS52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwLFxuICBoYXNWYWxpZGF0aW9uV2FybmluZ3M6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBPYmplY3Qua2V5cyhzdGF0ZS52YWxpZGF0aW9uV2FybmluZ3MpLmxlbmd0aCA+IDBcbn07XG5cbi8vIFByb2ZpbGUgc3RvcmUgaG9va3MgZm9yIGNvbW1vbiBwYXR0ZXJuc1xuZXhwb3J0IGNvbnN0IHVzZVByb2ZpbGUgPSAoKSA9PiB1c2VQcm9maWxlU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBwcm9maWxlOiBzdGF0ZS5wcm9maWxlLFxuICB1c2VyUHJvZmlsZTogc3RhdGUudXNlclByb2ZpbGUsXG4gIGlzUHJvZmlsZUxvYWRlZDogc3RhdGUuaXNQcm9maWxlTG9hZGVkLFxuICBpc1Byb2ZpbGVDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gIHByb2ZpbGVDb21wbGV0ZW5lc3M6IHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MsXG4gIG1pc3NpbmdGaWVsZHM6IHN0YXRlLm1pc3NpbmdGaWVsZHNcbn0pKTtcblxuZXhwb3J0IGNvbnN0IHVzZVByb2ZpbGVMb2FkaW5nID0gKCkgPT4gdXNlUHJvZmlsZVN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgaXNMb2FkaW5nOiBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nLFxuICBpc1VwZGF0aW5nOiBzdGF0ZS5pc1VwZGF0aW5nLFxuICBpc1VwbG9hZGluZ0F2YXRhcjogc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIsXG4gIGlzRXhwb3J0aW5nOiBzdGF0ZS5pc0V4cG9ydGluZ1xufSkpO1xuXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZUVycm9yID0gKCkgPT4gdXNlUHJvZmlsZVN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgZXJyb3I6IHN0YXRlLmVycm9yLFxuICBoYXNFcnJvcjogISFzdGF0ZS5lcnJvclxufSkpO1xuXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZURpc3BsYXkgPSAoKSA9PiB1c2VQcm9maWxlU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBkaXNwbGF5TmFtZTogc3RhdGUuZ2V0RGlzcGxheU5hbWUoKSxcbiAgaW5pdGlhbHM6IHN0YXRlLmdldEluaXRpYWxzKCksXG4gIHRydXN0VGllckRpc3BsYXk6IHN0YXRlLmdldFRydXN0VGllckRpc3BsYXkoKSxcbiAgaXNBZG1pbjogc3RhdGUuaXNBZG1pbigpXG59KSk7XG5cbmV4cG9ydCBjb25zdCB1c2VQcm9maWxlVmFsaWRhdGlvbiA9ICgpID0+IHVzZVByb2ZpbGVTdG9yZSgoc3RhdGUpID0+ICh7XG4gIHZhbGlkYXRpb25FcnJvcnM6IHN0YXRlLnZhbGlkYXRpb25FcnJvcnMsXG4gIHZhbGlkYXRpb25XYXJuaW5nczogc3RhdGUudmFsaWRhdGlvbldhcm5pbmdzLFxuICBoYXNWYWxpZGF0aW9uRXJyb3JzOiBPYmplY3Qua2V5cyhzdGF0ZS52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwLFxuICBoYXNWYWxpZGF0aW9uV2FybmluZ3M6IE9iamVjdC5rZXlzKHN0YXRlLnZhbGlkYXRpb25XYXJuaW5ncykubGVuZ3RoID4gMFxufSkpO1xuXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZUFjdGlvbnMgPSAoKSA9PiB1c2VQcm9maWxlU3RvcmUoKHN0YXRlKSA9PiAoe1xuICB1cGRhdGVQcm9maWxlOiBzdGF0ZS51cGRhdGVQcm9maWxlLFxuICB1cGRhdGVQcmVmZXJlbmNlczogc3RhdGUudXBkYXRlUHJlZmVyZW5jZXMsXG4gIHVwZGF0ZVByaXZhY3lTZXR0aW5nczogc3RhdGUudXBkYXRlUHJpdmFjeVNldHRpbmdzLFxuICB1cGRhdGVBdmF0YXI6IHN0YXRlLnVwZGF0ZUF2YXRhcixcbiAgcmVtb3ZlQXZhdGFyOiBzdGF0ZS5yZW1vdmVBdmF0YXIsXG4gIGxvYWRQcm9maWxlOiBzdGF0ZS5sb2FkUHJvZmlsZSxcbiAgcmVmcmVzaFByb2ZpbGU6IHN0YXRlLnJlZnJlc2hQcm9maWxlLFxuICBleHBvcnRQcm9maWxlOiBzdGF0ZS5leHBvcnRQcm9maWxlLFxuICBkZWxldGVQcm9maWxlOiBzdGF0ZS5kZWxldGVQcm9maWxlLFxuICB2YWxpZGF0ZVByb2ZpbGU6IHN0YXRlLnZhbGlkYXRlUHJvZmlsZSxcbiAgc2V0VmFsaWRhdGlvbkVycm9yczogc3RhdGUuc2V0VmFsaWRhdGlvbkVycm9ycyxcbiAgY2xlYXJWYWxpZGF0aW9uOiBzdGF0ZS5jbGVhclZhbGlkYXRpb25cbn0pKTtcblxuZXhwb3J0IGNvbnN0IHVzZVByb2ZpbGVTdGF0cyA9ICgpID0+IHVzZVByb2ZpbGVTdG9yZSgoc3RhdGUpID0+ICh7XG4gIGlzUHJvZmlsZUxvYWRlZDogc3RhdGUuaXNQcm9maWxlTG9hZGVkLFxuICBpc1Byb2ZpbGVDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gIHByb2ZpbGVDb21wbGV0ZW5lc3M6IHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MsXG4gIG1pc3NpbmdGaWVsZHM6IHN0YXRlLm1pc3NpbmdGaWVsZHMsXG4gIGhhc1ByZWZlcmVuY2VzOiAhIXN0YXRlLnByZWZlcmVuY2VzLFxuICBoYXNQcml2YWN5U2V0dGluZ3M6ICEhc3RhdGUucHJpdmFjeVNldHRpbmdzXG59KSk7XG5cbi8vIFByb2ZpbGUgc3RvcmUgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgcHJvZmlsZVN0b3JlVXRpbHMgPSB7XG4gIC8vIEluaXRpYWxpemUgcHJvZmlsZSBzdG9yZVxuICBpbml0aWFsaXplOiAoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oJ1Byb2ZpbGUgc3RvcmUgaW5pdGlhbGl6ZWQnKTtcbiAgfSxcbiAgXG4gIC8vIFJlc2V0IHByb2ZpbGUgc3RvcmVcbiAgcmVzZXQ6ICgpID0+IHtcbiAgICB1c2VQcm9maWxlU3RvcmUuZ2V0U3RhdGUoKS5yZXNldFByb2ZpbGUoKTtcbiAgICBsb2dnZXIuaW5mbygnUHJvZmlsZSBzdG9yZSByZXNldCcpO1xuICB9LFxuICBcbiAgLy8gR2V0IHByb2ZpbGUgY29tcGxldGVuZXNzXG4gIGdldENvbXBsZXRlbmVzczogKCkgPT4ge1xuICAgIHJldHVybiB1c2VQcm9maWxlU3RvcmUuZ2V0U3RhdGUoKS5nZXRQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gIH0sXG4gIFxuICAvLyBWYWxpZGF0ZSBwcm9maWxlIGRhdGFcbiAgdmFsaWRhdGU6IChkYXRhOiBQcm9maWxlVXBkYXRlRGF0YSkgPT4ge1xuICAgIHJldHVybiB1c2VQcm9maWxlU3RvcmUuZ2V0U3RhdGUoKS52YWxpZGF0ZVByb2ZpbGUoZGF0YSk7XG4gIH0sXG4gIFxuICAvLyBHZXQgcHJvZmlsZSBkaXNwbGF5IGluZm9cbiAgZ2V0RGlzcGxheUluZm86ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVByb2ZpbGVTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwbGF5TmFtZTogc3RhdGUuZ2V0RGlzcGxheU5hbWUoKSxcbiAgICAgIGluaXRpYWxzOiBzdGF0ZS5nZXRJbml0aWFscygpLFxuICAgICAgdHJ1c3RUaWVyOiBzdGF0ZS5nZXRUcnVzdFRpZXJEaXNwbGF5KCksXG4gICAgICBpc0FkbWluOiBzdGF0ZS5pc0FkbWluKClcbiAgICB9O1xuICB9XG59O1xuXG4vLyBQcm9maWxlIHN0b3JlIHN1YnNjcmlwdGlvbnNcbmV4cG9ydCBjb25zdCBwcm9maWxlU3RvcmVTdWJzY3JpcHRpb25zID0ge1xuICAvLyBTdWJzY3JpYmUgdG8gcHJvZmlsZSBjaGFuZ2VzXG4gIG9uUHJvZmlsZUNoYW5nZTogKGNhbGxiYWNrOiAocHJvZmlsZTogUHJvZmlsZVVzZXIgfCBudWxsKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV0dXJuIHVzZVByb2ZpbGVTdG9yZS5zdWJzY3JpYmUoXG4gICAgICAoc3RhdGUsIHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBpZiAoc3RhdGUucHJvZmlsZSAhPT0gcHJldlN0YXRlLnByb2ZpbGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhzdGF0ZS5wcm9maWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH0sXG4gIFxuICAvLyBTdWJzY3JpYmUgdG8gcHJvZmlsZSBjb21wbGV0ZW5lc3MgY2hhbmdlc1xuICBvbkNvbXBsZXRlbmVzc0NoYW5nZTogKGNhbGxiYWNrOiAoY29tcGxldGVuZXNzOiBQcm9maWxlQ29tcGxldGVuZXNzKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV0dXJuIHVzZVByb2ZpbGVTdG9yZS5zdWJzY3JpYmUoXG4gICAgICAoc3RhdGUsIHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gc3RhdGUuZ2V0UHJvZmlsZUNvbXBsZXRlbmVzcygpO1xuICAgICAgICBjb25zdCBwcmV2aW91cyA9IHByZXZTdGF0ZS5nZXRQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgIGlmIChjdXJyZW50ICE9PSBwcmV2aW91cykge1xuICAgICAgICAgIGNhbGxiYWNrKGN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfSxcbiAgXG4gIC8vIFN1YnNjcmliZSB0byBsb2FkaW5nIHN0YXRlIGNoYW5nZXNcbiAgb25Mb2FkaW5nQ2hhbmdlOiAoY2FsbGJhY2s6IChpc0xvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlUHJvZmlsZVN0b3JlLnN1YnNjcmliZShcbiAgICAgIChzdGF0ZSwgcHJldlN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nIHx8IHN0YXRlLmlzVXBkYXRpbmc7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzID0gcHJldlN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgfHwgcHJldlN0YXRlLmlzVXBkYXRpbmc7XG4gICAgICAgIGlmIChjdXJyZW50ICE9PSBwcmV2aW91cykge1xuICAgICAgICAgIGNhbGxiYWNrKGN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxufTtcblxuLy8gUHJvZmlsZSBzdG9yZSBkZWJ1Z2dpbmdcbmV4cG9ydCBjb25zdCBwcm9maWxlU3RvcmVEZWJ1ZyA9IHtcbiAgLy8gTG9nIGN1cnJlbnQgc3RhdGVcbiAgbG9nU3RhdGU6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVByb2ZpbGVTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGxvZ2dlci5kZWJ1ZygnUHJvZmlsZSBTdG9yZSBTdGF0ZScsIHtcbiAgICAgIHByb2ZpbGU6IHN0YXRlLnByb2ZpbGUsXG4gICAgICBpc1Byb2ZpbGVMb2FkZWQ6IHN0YXRlLmlzUHJvZmlsZUxvYWRlZCxcbiAgICAgIGlzUHJvZmlsZUNvbXBsZXRlOiBzdGF0ZS5pc1Byb2ZpbGVDb21wbGV0ZSxcbiAgICAgIHByb2ZpbGVDb21wbGV0ZW5lc3M6IHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MsXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcsXG4gICAgICBpc1VwZGF0aW5nOiBzdGF0ZS5pc1VwZGF0aW5nLFxuICAgICAgZXJyb3I6IHN0YXRlLmVycm9yXG4gICAgfSk7XG4gIH0sXG4gIFxuICAvLyBSZXNldCBzdG9yZVxuICByZXNldDogKCkgPT4ge1xuICAgIHByb2ZpbGVTdG9yZVV0aWxzLnJlc2V0KCk7XG4gIH0sXG4gIFxuICAvLyBDbGVhciBhbGwgZGF0YVxuICBjbGVhckFsbDogKCkgPT4ge1xuICAgIHVzZVByb2ZpbGVTdG9yZS5nZXRTdGF0ZSgpLmNsZWFyUHJvZmlsZSgpO1xuICAgIGxvZ2dlci5pbmZvKCdQcm9maWxlIHN0b3JlIGNsZWFyZWQnKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJwcm9maWxlU2VsZWN0b3JzIiwicHJvZmlsZVN0b3JlRGVidWciLCJwcm9maWxlU3RvcmVTdWJzY3JpcHRpb25zIiwicHJvZmlsZVN0b3JlVXRpbHMiLCJ1c2VQcm9maWxlIiwidXNlUHJvZmlsZUFjdGlvbnMiLCJ1c2VQcm9maWxlRGlzcGxheSIsInVzZVByb2ZpbGVFcnJvciIsInVzZVByb2ZpbGVMb2FkaW5nIiwidXNlUHJvZmlsZVN0YXRzIiwidXNlUHJvZmlsZVN0b3JlIiwidXNlUHJvZmlsZVZhbGlkYXRpb24iLCJjcmVhdGUiLCJkZXZ0b29scyIsInBlcnNpc3QiLCJpbW1lciIsInNldCIsImdldCIsInByb2ZpbGUiLCJ1c2VyUHJvZmlsZSIsImlzUHJvZmlsZUxvYWRlZCIsImlzUHJvZmlsZUNvbXBsZXRlIiwicHJvZmlsZUNvbXBsZXRlbmVzcyIsIm1pc3NpbmdGaWVsZHMiLCJpc0xvYWRpbmciLCJpc1Byb2ZpbGVMb2FkaW5nIiwiaXNVcGRhdGluZyIsImlzVXBsb2FkaW5nQXZhdGFyIiwiaXNFeHBvcnRpbmciLCJlcnJvciIsInZhbGlkYXRpb25FcnJvcnMiLCJ2YWxpZGF0aW9uV2FybmluZ3MiLCJwcmVmZXJlbmNlcyIsInByaXZhY3lTZXR0aW5ncyIsInNldExvYWRpbmciLCJsb2FkaW5nIiwic3RhdGUiLCJzZXRFcnJvciIsImNsZWFyRXJyb3IiLCJzZXRQcm9maWxlIiwidXBkYXRlUHJvZmlsZUNvbXBsZXRlbmVzcyIsInNldFVzZXJQcm9maWxlIiwicHJpdmFjeV9zZXR0aW5ncyIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGVzIiwidXBkYXRlUHJvZmlsZVNlcnZpY2UiLCJyZXN1bHQiLCJzdWNjZXNzIiwiZGF0YSIsIkVycm9yIiwibWVzc2FnZSIsInVwZGF0ZVByZWZlcmVuY2VzIiwid2l0aE9wdGlvbmFsIiwidXBkYXRlUHJpdmFjeVNldHRpbmdzIiwic2V0dGluZ3MiLCJ1cGRhdGVBdmF0YXIiLCJmaWxlIiwidXBkYXRlUHJvZmlsZUF2YXRhciIsImF2YXRhcl91cmwiLCJyZW1vdmVBdmF0YXIiLCJjdXJyZW50U3RhdGUiLCJkaXNwbGF5X25hbWUiLCJ1bmRlZmluZWQiLCJsb2FkUHJvZmlsZSIsImdldEN1cnJlbnRQcm9maWxlIiwicmVmcmVzaFByb2ZpbGUiLCJleHBvcnRQcm9maWxlIiwiZXhwb3J0VXNlckRhdGEiLCJkZWxldGVQcm9maWxlIiwidmFsaWRhdGVQcm9maWxlIiwiZXJyb3JzIiwid2FybmluZ3MiLCJsZW5ndGgiLCJwdXNoIiwiYmlvIiwiaXNWYWxpZCIsInNldFZhbGlkYXRpb25FcnJvcnMiLCJzZXRWYWxpZGF0aW9uV2FybmluZ3MiLCJjbGVhclZhbGlkYXRpb24iLCJzZXRQcm9maWxlTG9hZGluZyIsInNldFVwZGF0aW5nIiwidXBkYXRpbmciLCJzZXRVcGxvYWRpbmdBdmF0YXIiLCJ1cGxvYWRpbmciLCJzZXRFeHBvcnRpbmciLCJleHBvcnRpbmciLCJyZXF1aXJlZEZpZWxkcyIsImZvckVhY2giLCJmaWVsZCIsInRyaW0iLCJyZXBsYWNlIiwiaXNDb21wbGV0ZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJnZXRQcm9maWxlQ29tcGxldGVuZXNzIiwiZ2V0RGlzcGxheU5hbWUiLCJ1c2VybmFtZSIsImVtYWlsIiwic3BsaXQiLCJnZXRJbml0aWFscyIsImRpc3BsYXlOYW1lIiwibWFwIiwid29yZCIsImNoYXJBdCIsImpvaW4iLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZ2V0VHJ1c3RUaWVyRGlzcGxheSIsInRpZXJOYW1lcyIsInRydXN0X3RpZXIiLCJpc0FkbWluIiwiaXNfYWRtaW4iLCJyZXNldFByb2ZpbGUiLCJjbGVhclByb2ZpbGUiLCJuYW1lIiwicGFydGlhbGl6ZSIsImhhc0Vycm9yIiwiaW5pdGlhbHMiLCJ0cnVzdFRpZXJEaXNwbGF5IiwiaGFzVmFsaWRhdGlvbkVycm9ycyIsIk9iamVjdCIsImtleXMiLCJoYXNWYWxpZGF0aW9uV2FybmluZ3MiLCJoYXNQcmVmZXJlbmNlcyIsImhhc1ByaXZhY3lTZXR0aW5ncyIsImluaXRpYWxpemUiLCJsb2dnZXIiLCJpbmZvIiwicmVzZXQiLCJnZXRTdGF0ZSIsImdldENvbXBsZXRlbmVzcyIsInZhbGlkYXRlIiwiZ2V0RGlzcGxheUluZm8iLCJ0cnVzdFRpZXIiLCJvblByb2ZpbGVDaGFuZ2UiLCJjYWxsYmFjayIsInN1YnNjcmliZSIsInByZXZTdGF0ZSIsIm9uQ29tcGxldGVuZXNzQ2hhbmdlIiwiY3VycmVudCIsInByZXZpb3VzIiwib25Mb2FkaW5nQ2hhbmdlIiwibG9nU3RhdGUiLCJkZWJ1ZyIsImNsZWFyQWxsIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQzs7Ozs7Ozs7Ozs7SUFnbUJZQSxnQkFBZ0I7ZUFBaEJBOztJQThLQUMsaUJBQWlCO2VBQWpCQTs7SUF4Q0FDLHlCQUF5QjtlQUF6QkE7O0lBbkNBQyxpQkFBaUI7ZUFBakJBOztJQTVEQUMsVUFBVTtlQUFWQTs7SUFtQ0FDLGlCQUFpQjtlQUFqQkE7O0lBZEFDLGlCQUFpQjtlQUFqQkE7O0lBTEFDLGVBQWU7ZUFBZkE7O0lBUEFDLGlCQUFpQjtlQUFqQkE7O0lBeUNBQyxlQUFlO2VBQWZBOztJQXJsQkFDLGVBQWU7ZUFBZkE7O0lBK2pCQUMsb0JBQW9C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