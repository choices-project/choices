{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/api/polls-service-role.test.ts"],"sourcesContent":["/**\n * Polls API Tests - Service Role Client\n * \n * This test uses the service role client which might work better for testing\n * since it doesn't require cookies or authentication.\n */\n\nimport { describe, it, expect } from '@jest/globals';\nimport { NextRequest } from 'next/server';\nimport { GET } from '@/app/api/polls/route';\n\ndescribe('Polls API - Service Role Client', () => {\n  it('should handle missing environment variables gracefully', async () => {\n    console.log('Testing with placeholder environment variables...');\n    \n    const request = new NextRequest('http://localhost:3000/api/polls');\n    \n    const response = await GET(request);\n    const responseData = await response.json();\n    \n    console.log('Response status:', response.status);\n    console.log('Response data:', responseData);\n    \n    // We expect a 500 error due to invalid credentials\n    expect(response.status).toBe(500);\n    expect(responseData.error).toBe('Internal server error');\n  });\n\n  it('should provide meaningful error messages', async () => {\n    const request = new NextRequest('http://localhost:3000/api/polls');\n    \n    const response = await GET(request);\n    const responseData = await response.json();\n    \n    // The error should be handled gracefully\n    expect(response.status).toBe(500);\n    expect(responseData).toHaveProperty('error');\n    expect(typeof responseData.error).toBe('string');\n  });\n});\n"],"names":["describe","it","console","log","request","NextRequest","response","GET","responseData","json","status","expect","toBe","error","toHaveProperty"],"mappings":"AAAA;;;;;CAKC;;;;yBAEoC;wBACT;uBACR;AAEpBA,IAAAA,iBAAQ,EAAC,mCAAmC;IAC1CC,IAAAA,WAAE,EAAC,0DAA0D;QAC3DC,QAAQC,GAAG,CAAC;QAEZ,MAAMC,UAAU,IAAIC,mBAAW,CAAC;QAEhC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACH;QAC3B,MAAMI,eAAe,MAAMF,SAASG,IAAI;QAExCP,QAAQC,GAAG,CAAC,oBAAoBG,SAASI,MAAM;QAC/CR,QAAQC,GAAG,CAAC,kBAAkBK;QAE9B,mDAAmD;QACnDG,IAAAA,eAAM,EAACL,SAASI,MAAM,EAAEE,IAAI,CAAC;QAC7BD,IAAAA,eAAM,EAACH,aAAaK,KAAK,EAAED,IAAI,CAAC;IAClC;IAEAX,IAAAA,WAAE,EAAC,4CAA4C;QAC7C,MAAMG,UAAU,IAAIC,mBAAW,CAAC;QAEhC,MAAMC,WAAW,MAAMC,IAAAA,UAAG,EAACH;QAC3B,MAAMI,eAAe,MAAMF,SAASG,IAAI;QAExC,yCAAyC;QACzCE,IAAAA,eAAM,EAACL,SAASI,MAAM,EAAEE,IAAI,CAAC;QAC7BD,IAAAA,eAAM,EAACH,cAAcM,cAAc,CAAC;QACpCH,IAAAA,eAAM,EAAC,OAAOH,aAAaK,KAAK,EAAED,IAAI,CAAC;IACzC;AACF"}