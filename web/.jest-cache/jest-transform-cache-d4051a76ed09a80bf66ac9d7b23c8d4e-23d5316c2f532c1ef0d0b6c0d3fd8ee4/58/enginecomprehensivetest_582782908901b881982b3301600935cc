4a97b5bc765300cecd378f0555b49e4a
/**
 * Comprehensive Vote Engine Tests
 * 
 * Tests the core voting engine with all voting strategies
 * Tests validation, processing, and results calculation
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _engine = require("../../../../../lib/vote/engine");
// Mock the logger
_globals.jest.mock("@/lib/utils/logger", ()=>({
        devLog: _globals.jest.fn()
    }));
(0, _globals.describe)("VoteEngine", ()=>{
    let engine;
    let config;
    let mockPoll;
    let mockVoteRequest;
    (0, _globals.beforeEach)(()=>{
        config = {
            maxVotesPerPoll: 1,
            allowMultipleVotes: false,
            requireAuthentication: true,
            minTrustTier: "basic",
            rateLimitPerUser: 10,
            rateLimitWindowMs: 60000
        };
        engine = new _engine.VoteEngine(config);
        mockPoll = {
            id: "test-poll-id",
            title: "Test Poll",
            description: "A test poll",
            votingMethod: "single",
            options: [
                {
                    id: "option-1",
                    text: "Option 1"
                },
                {
                    id: "option-2",
                    text: "Option 2"
                }
            ],
            status: "active",
            createdAt: new Date(),
            closeAt: new Date(Date.now() + 86400000),
            createdBy: "user-1",
            settings: {
                allowMultipleVotes: false,
                requireAuthentication: true,
                anonymousVoting: false
            }
        };
        mockVoteRequest = {
            pollId: "test-poll-id",
            userId: "user-1",
            voteData: {
                choice: 0,
                approvals: null,
                rankings: null,
                allocations: null,
                ratings: null
            },
            metadata: {
                ipAddress: "192.168.1.1",
                userAgent: "Mozilla/5.0",
                timestamp: new Date()
            }
        };
    });
    (0, _globals.describe)("Initialization", ()=>{
        (0, _globals.it)("should initialize with provided configuration", ()=>{
            (0, _globals.expect)(engine).toBeDefined();
        });
        (0, _globals.it)("should use default configuration when none provided", ()=>{
            const defaultEngine = new _engine.VoteEngine();
            (0, _globals.expect)(defaultEngine).toBeDefined();
        });
    });
    (0, _globals.describe)("Vote Validation", ()=>{
        (0, _globals.it)("should validate single-choice votes correctly", async ()=>{
            const validation = await engine.validateVote(mockVoteRequest, mockPoll);
            (0, _globals.expect)(validation.valid).toBe(true);
            (0, _globals.expect)(validation.errors).toHaveLength(0);
        });
        (0, _globals.it)("should reject votes with invalid poll ID", async ()=>{
            const invalidRequest = {
                ...mockVoteRequest,
                pollId: "invalid-poll"
            };
            const validation = await engine.validateVote(invalidRequest, mockPoll);
            (0, _globals.expect)(validation.valid).toBe(false);
            (0, _globals.expect)(validation.errors).toContain("Poll ID mismatch");
        });
        (0, _globals.it)("should reject votes for closed polls", async ()=>{
            const closedPoll = {
                ...mockPoll,
                status: "closed"
            };
            const validation = await engine.validateVote(mockVoteRequest, closedPoll);
            (0, _globals.expect)(validation.valid).toBe(false);
            (0, _globals.expect)(validation.errors).toContain("Poll is not active");
        });
        (0, _globals.it)("should reject votes with invalid options", async ()=>{
            const invalidRequest = {
                ...mockVoteRequest,
                voteData: {
                    choice: 999,
                    approvals: null,
                    rankings: null,
                    allocations: null,
                    ratings: null
                }
            };
            const validation = await engine.validateVote(invalidRequest, mockPoll);
            (0, _globals.expect)(validation.valid).toBe(false);
            (0, _globals.expect)(validation.errors).toContain("Invalid option selected");
        });
        (0, _globals.it)("should validate ranked-choice votes", async ()=>{
            const rankedPoll = {
                ...mockPoll,
                votingMethod: "ranked"
            };
            const rankedRequest = {
                ...mockVoteRequest,
                voteData: {
                    choice: null,
                    approvals: null,
                    rankings: [
                        0,
                        1
                    ],
                    allocations: null,
                    ratings: null
                }
            };
            const validation = await engine.validateVote(rankedRequest, rankedPoll);
            (0, _globals.expect)(validation.valid).toBe(true);
        });
        (0, _globals.it)("should validate approval votes", async ()=>{
            const approvalPoll = {
                ...mockPoll,
                votingMethod: "approval"
            };
            const approvalRequest = {
                ...mockVoteRequest,
                voteData: {
                    choice: null,
                    approvals: [
                        0,
                        1
                    ],
                    rankings: null,
                    allocations: null,
                    ratings: null
                }
            };
            const validation = await engine.validateVote(approvalRequest, approvalPoll);
            // Debug: Log the validation result
            console.log("Approval validation result:", JSON.stringify(validation, null, 2));
            console.log("Approval poll options:", approvalPoll.options);
            console.log("Approval request voteData:", approvalRequest.voteData);
            (0, _globals.expect)(validation.valid).toBe(true);
        });
        (0, _globals.it)("should validate quadratic votes", async ()=>{
            const quadraticPoll = {
                ...mockPoll,
                votingMethod: "quadratic"
            };
            const quadraticRequest = {
                ...mockVoteRequest,
                voteData: {
                    choice: null,
                    approvals: null,
                    rankings: null,
                    allocations: {
                        "option-1": 2,
                        "option-2": 1
                    },
                    ratings: null
                }
            };
            const validation = await engine.validateVote(quadraticRequest, quadraticPoll);
            (0, _globals.expect)(validation.valid).toBe(true);
        });
    });
    (0, _globals.describe)("Vote Processing", ()=>{
        (0, _globals.it)("should process single-choice votes successfully", async ()=>{
            const response = await engine.processVote(mockVoteRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(true);
            (0, _globals.expect)(response.voteId).toBeDefined();
            (0, _globals.expect)(response.auditReceipt).toBeDefined();
        });
        (0, _globals.it)("should process ranked-choice votes successfully", async ()=>{
            const rankedPoll = {
                ...mockPoll,
                votingMethod: "ranked-choice"
            };
            const rankedRequest = {
                ...mockVoteRequest,
                voteData: {
                    choice: null,
                    approvals: null,
                    rankings: [
                        0,
                        1
                    ],
                    allocations: null,
                    ratings: null
                }
            };
            const response = await engine.processVote(rankedRequest, rankedPoll);
            (0, _globals.expect)(response.success).toBe(true);
            (0, _globals.expect)(response.voteId).toBeDefined();
        });
        (0, _globals.it)("should handle vote processing errors gracefully", async ()=>{
            // Mock a processing error by creating a poll with invalid voting method
            const invalidPoll = {
                ...mockPoll,
                votingMethod: "invalid-method"
            };
            const response = await engine.processVote(mockVoteRequest, invalidPoll);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.error).toBeDefined();
        });
    });
    (0, _globals.describe)("Results Calculation", ()=>{
        (0, _globals.it)("should calculate single-choice results", async ()=>{
            const votes = [
                {
                    choice: 0,
                    approvals: null,
                    rankings: null,
                    allocations: null,
                    ratings: null
                },
                {
                    choice: 0,
                    approvals: null,
                    rankings: null,
                    allocations: null,
                    ratings: null
                },
                {
                    choice: 1,
                    approvals: null,
                    rankings: null,
                    allocations: null,
                    ratings: null
                }
            ];
            const results = await engine.calculateResults(mockPoll, votes);
            (0, _globals.expect)(results).toBeDefined();
            (0, _globals.expect)(results.totalVotes).toBe(3);
            (0, _globals.expect)(results.results.winner).toBe("option-1");
        });
        (0, _globals.it)("should calculate ranked-choice results", async ()=>{
            const rankedPoll = {
                ...mockPoll,
                votingMethod: "ranked-choice"
            };
            const votes = [
                {
                    id: "vote-1",
                    pollId: "test-poll-id",
                    userId: "user-1",
                    voteData: {
                        rankings: [
                            0,
                            1
                        ]
                    },
                    timestamp: new Date().toISOString(),
                    ipAddress: "192.168.1.1",
                    userAgent: "Mozilla/5.0"
                },
                {
                    id: "vote-2",
                    pollId: "test-poll-id",
                    userId: "user-2",
                    voteData: {
                        rankings: [
                            1,
                            0
                        ]
                    },
                    timestamp: new Date().toISOString(),
                    ipAddress: "192.168.1.2",
                    userAgent: "Mozilla/5.0"
                }
            ];
            const results = await engine.calculateResults(rankedPoll, votes);
            (0, _globals.expect)(results).toBeDefined();
            (0, _globals.expect)(results.totalVotes).toBe(2);
        });
        (0, _globals.it)("should handle empty vote sets", async ()=>{
            const results = await engine.calculateResults(mockPoll, []);
            (0, _globals.expect)(results).toBeDefined();
            (0, _globals.expect)(results.totalVotes).toBe(0);
            (0, _globals.expect)(results.results.winner).toBeNull();
        });
        (0, _globals.it)("should handle tie scenarios", async ()=>{
            const votes = [
                {
                    choice: 0,
                    approvals: null,
                    rankings: null,
                    allocations: null,
                    ratings: null
                },
                {
                    choice: 1,
                    approvals: null,
                    rankings: null,
                    allocations: null,
                    ratings: null
                }
            ];
            const results = await engine.calculateResults(mockPoll, votes);
            (0, _globals.expect)(results).toBeDefined();
            (0, _globals.expect)(results.totalVotes).toBe(2);
        // In a tie, the result should indicate no clear winner
        });
    });
    (0, _globals.describe)("Rate Limiting", ()=>{
        (0, _globals.it)("should enforce rate limits", async ()=>{
            // Create multiple requests from the same user
            const requests = Array.from({
                length: 15
            }, (_, i)=>({
                    ...mockVoteRequest,
                    userId: "user-1",
                    metadata: {
                        ...mockVoteRequest.metadata,
                        timestamp: new Date(Date.now() + i * 1000)
                    }
                }));
            // Process requests and check rate limiting
            const responses = await Promise.all(requests.map((request)=>engine.processVote(request, mockPoll)));
            // Some requests should be rate limited
            const rateLimitedResponses = responses.filter((r)=>!r.success && r.error?.includes("Rate limit exceeded"));
            (0, _globals.expect)(rateLimitedResponses.length).toBeGreaterThan(0);
        });
        (0, _globals.it)("should allow requests within rate limit", async ()=>{
            const requests = Array.from({
                length: 5
            }, (_, i)=>({
                    ...mockVoteRequest,
                    userId: "user-1",
                    metadata: {
                        ...mockVoteRequest.metadata,
                        timestamp: new Date(Date.now() + i * 1000)
                    }
                }));
            const responses = await Promise.all(requests.map((request)=>engine.processVote(request, mockPoll)));
            // All requests should succeed within rate limit
            const successfulResponses = responses.filter((r)=>r.success);
            (0, _globals.expect)(successfulResponses.length).toBe(5);
        });
    });
    (0, _globals.describe)("Authentication", ()=>{
        (0, _globals.it)("should require authentication when configured", async ()=>{
            const unauthenticatedRequest = {
                ...mockVoteRequest,
                userId: null
            };
            const validation = await engine.validateVote(unauthenticatedRequest, mockPoll);
            (0, _globals.expect)(validation.valid).toBe(false);
            (0, _globals.expect)(validation.errors).toContain("Authentication required to vote");
        });
        (0, _globals.it)("should allow anonymous voting when configured", async ()=>{
            const anonymousPoll = {
                ...mockPoll,
                settings: {
                    ...mockPoll.settings,
                    anonymousVoting: true
                }
            };
            const anonymousRequest = {
                ...mockVoteRequest,
                userId: null
            };
            const validation = await engine.validateVote(anonymousRequest, anonymousPoll);
            (0, _globals.expect)(validation.valid).toBe(true);
        });
    });
    (0, _globals.describe)("Error Handling", ()=>{
        (0, _globals.it)("should handle malformed vote data", async ()=>{
            const malformedRequest = {
                ...mockVoteRequest,
                voteData: null
            };
            const response = await engine.processVote(malformedRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.error).toBeDefined();
        });
        (0, _globals.it)("should handle missing poll data", async ()=>{
            const response = await engine.processVote(mockVoteRequest, null);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.error).toBeDefined();
        });
        (0, _globals.it)("should handle network errors gracefully", async ()=>{
            // Create a scenario that would cause a processing error
            const invalidRequest = {
                ...mockVoteRequest,
                voteData: null
            };
            const response = await engine.processVote(invalidRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.error).toBeDefined();
        });
    });
    (0, _globals.describe)("Performance", ()=>{
        (0, _globals.it)("should process votes within reasonable time", async ()=>{
            const startTime = performance.now();
            await engine.processVote(mockVoteRequest, mockPoll);
            const endTime = performance.now();
            const processingTime = endTime - startTime;
            // Should process within 100ms
            (0, _globals.expect)(processingTime).toBeLessThan(100);
        });
        (0, _globals.it)("should handle large vote sets efficiently", async ()=>{
            const largeVoteSet = Array.from({
                length: 1000
            }, (_, i)=>({
                    ...mockVoteRequest,
                    userId: `user-${i}`,
                    voteData: {
                        selectedOptions: [
                            "option-1"
                        ],
                        ranking: null,
                        weights: null
                    }
                }));
            const startTime = performance.now();
            const results = await engine.calculateResults(mockPoll, largeVoteSet);
            const endTime = performance.now();
            const processingTime = endTime - startTime;
            (0, _globals.expect)(results).toBeDefined();
            (0, _globals.expect)(processingTime).toBeLessThan(1000) // Should process within 1 second
            ;
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvbGliL3ZvdGUvZW5naW5lLWNvbXByZWhlbnNpdmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgVm90ZSBFbmdpbmUgVGVzdHNcbiAqIFxuICogVGVzdHMgdGhlIGNvcmUgdm90aW5nIGVuZ2luZSB3aXRoIGFsbCB2b3Rpbmcgc3RyYXRlZ2llc1xuICogVGVzdHMgdmFsaWRhdGlvbiwgcHJvY2Vzc2luZywgYW5kIHJlc3VsdHMgY2FsY3VsYXRpb25cbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnXG5pbXBvcnQgeyBWb3RlRW5naW5lLCB0eXBlIFZvdGVFbmdpbmVDb25maWcgfSBmcm9tICdAL2xpYi92b3RlL2VuZ2luZSdcbmltcG9ydCB0eXBlIHsgVm90ZVJlcXVlc3QsIFZvdGVSZXNwb25zZSwgUG9sbERhdGEsIFZvdGluZ01ldGhvZCB9IGZyb20gJ0AvbGliL3ZvdGUvdHlwZXMnXG5cbi8vIE1vY2sgdGhlIGxvZ2dlclxuamVzdC5tb2NrKCdAL2xpYi91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBkZXZMb2c6IGplc3QuZm4oKVxufSkpXG5cbmRlc2NyaWJlKCdWb3RlRW5naW5lJywgKCkgPT4ge1xuICBsZXQgZW5naW5lOiBWb3RlRW5naW5lXG4gIGxldCBjb25maWc6IFZvdGVFbmdpbmVDb25maWdcbiAgbGV0IG1vY2tQb2xsOiBQb2xsRGF0YVxuICBsZXQgbW9ja1ZvdGVSZXF1ZXN0OiBWb3RlUmVxdWVzdFxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNvbmZpZyA9IHtcbiAgICAgIG1heFZvdGVzUGVyUG9sbDogMSxcbiAgICAgIGFsbG93TXVsdGlwbGVWb3RlczogZmFsc2UsXG4gICAgICByZXF1aXJlQXV0aGVudGljYXRpb246IHRydWUsXG4gICAgICBtaW5UcnVzdFRpZXI6ICdiYXNpYycsXG4gICAgICByYXRlTGltaXRQZXJVc2VyOiAxMCxcbiAgICAgIHJhdGVMaW1pdFdpbmRvd01zOiA2MDAwMFxuICAgIH1cblxuICAgIGVuZ2luZSA9IG5ldyBWb3RlRW5naW5lKGNvbmZpZylcblxuICAgIG1vY2tQb2xsID0ge1xuICAgICAgaWQ6ICd0ZXN0LXBvbGwtaWQnLFxuICAgICAgdGl0bGU6ICdUZXN0IFBvbGwnLFxuICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgcG9sbCcsXG4gICAgICB2b3RpbmdNZXRob2Q6ICdzaW5nbGUnIGFzIFZvdGluZ01ldGhvZCxcbiAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgeyBpZDogJ29wdGlvbi0xJywgdGV4dDogJ09wdGlvbiAxJyB9LFxuICAgICAgICB7IGlkOiAnb3B0aW9uLTInLCB0ZXh0OiAnT3B0aW9uIDInIH1cbiAgICAgIF0sXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgY2xvc2VBdDogbmV3IERhdGUoRGF0ZS5ub3coKSArIDg2NDAwMDAwKSwgLy8gMjQgaG91cnMgZnJvbSBub3dcbiAgICAgIGNyZWF0ZWRCeTogJ3VzZXItMScsXG4gICAgICBzZXR0aW5nczoge1xuICAgICAgICBhbGxvd011bHRpcGxlVm90ZXM6IGZhbHNlLFxuICAgICAgICByZXF1aXJlQXV0aGVudGljYXRpb246IHRydWUsXG4gICAgICAgIGFub255bW91c1ZvdGluZzogZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtb2NrVm90ZVJlcXVlc3QgPSB7XG4gICAgICBwb2xsSWQ6ICd0ZXN0LXBvbGwtaWQnLFxuICAgICAgdXNlcklkOiAndXNlci0xJyxcbiAgICAgIHZvdGVEYXRhOiB7XG4gICAgICAgIGNob2ljZTogMCwgLy8gSW5kZXggb2Ygb3B0aW9uLTFcbiAgICAgICAgYXBwcm92YWxzOiBudWxsLFxuICAgICAgICByYW5raW5nczogbnVsbCxcbiAgICAgICAgYWxsb2NhdGlvbnM6IG51bGwsXG4gICAgICAgIHJhdGluZ3M6IG51bGxcbiAgICAgIH0sXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICBpcEFkZHJlc3M6ICcxOTIuMTY4LjEuMScsXG4gICAgICAgIHVzZXJBZ2VudDogJ01vemlsbGEvNS4wJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGRlc2NyaWJlKCdJbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBwcm92aWRlZCBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGVuZ2luZSkudG9CZURlZmluZWQoKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gd2hlbiBub25lIHByb3ZpZGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgZGVmYXVsdEVuZ2luZSA9IG5ldyBWb3RlRW5naW5lKClcbiAgICAgIGV4cGVjdChkZWZhdWx0RW5naW5lKS50b0JlRGVmaW5lZCgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnVm90ZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgc2luZ2xlLWNob2ljZSB2b3RlcyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgZW5naW5lLnZhbGlkYXRlVm90ZShtb2NrVm90ZVJlcXVlc3QsIG1vY2tQb2xsKVxuICAgICAgXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi52YWxpZCkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3JzKS50b0hhdmVMZW5ndGgoMClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgdm90ZXMgd2l0aCBpbnZhbGlkIHBvbGwgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdCA9IHsgLi4ubW9ja1ZvdGVSZXF1ZXN0LCBwb2xsSWQ6ICdpbnZhbGlkLXBvbGwnIH1cbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUoaW52YWxpZFJlcXVlc3QsIG1vY2tQb2xsKVxuICAgICAgXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi52YWxpZCkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmVycm9ycykudG9Db250YWluKCdQb2xsIElEIG1pc21hdGNoJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgdm90ZXMgZm9yIGNsb3NlZCBwb2xscycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNsb3NlZFBvbGwgPSB7IC4uLm1vY2tQb2xsLCBzdGF0dXM6ICdjbG9zZWQnIGFzIGNvbnN0IH1cbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUobW9ja1ZvdGVSZXF1ZXN0LCBjbG9zZWRQb2xsKVxuICAgICAgXG4gICAgICBleHBlY3QodmFsaWRhdGlvbi52YWxpZCkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmVycm9ycykudG9Db250YWluKCdQb2xsIGlzIG5vdCBhY3RpdmUnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCB2b3RlcyB3aXRoIGludmFsaWQgb3B0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0ID0ge1xuICAgICAgICAuLi5tb2NrVm90ZVJlcXVlc3QsXG4gICAgICAgIHZvdGVEYXRhOiB7XG4gICAgICAgICAgY2hvaWNlOiA5OTksIC8vIEludmFsaWQgb3B0aW9uIGluZGV4XG4gICAgICAgICAgYXBwcm92YWxzOiBudWxsLFxuICAgICAgICAgIHJhbmtpbmdzOiBudWxsLFxuICAgICAgICAgIGFsbG9jYXRpb25zOiBudWxsLFxuICAgICAgICAgIHJhdGluZ3M6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgZW5naW5lLnZhbGlkYXRlVm90ZShpbnZhbGlkUmVxdWVzdCwgbW9ja1BvbGwpXG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnZhbGlkKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3JzKS50b0NvbnRhaW4oJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGVkJylcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSByYW5rZWQtY2hvaWNlIHZvdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmFua2VkUG9sbCA9IHsgLi4ubW9ja1BvbGwsIHZvdGluZ01ldGhvZDogJ3JhbmtlZCcgYXMgVm90aW5nTWV0aG9kIH1cbiAgICAgIGNvbnN0IHJhbmtlZFJlcXVlc3QgPSB7XG4gICAgICAgIC4uLm1vY2tWb3RlUmVxdWVzdCxcbiAgICAgICAgdm90ZURhdGE6IHtcbiAgICAgICAgICBjaG9pY2U6IG51bGwsXG4gICAgICAgICAgYXBwcm92YWxzOiBudWxsLFxuICAgICAgICAgIHJhbmtpbmdzOiBbMCwgMV0sIC8vIFJhbmtpbmdzIGZvciBvcHRpb24tMSBhbmQgb3B0aW9uLTJcbiAgICAgICAgICBhbGxvY2F0aW9uczogbnVsbCxcbiAgICAgICAgICByYXRpbmdzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUocmFua2VkUmVxdWVzdCwgcmFua2VkUG9sbClcbiAgICAgIFxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24udmFsaWQpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBhcHByb3ZhbCB2b3RlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwcHJvdmFsUG9sbCA9IHsgLi4ubW9ja1BvbGwsIHZvdGluZ01ldGhvZDogJ2FwcHJvdmFsJyBhcyBWb3RpbmdNZXRob2QgfVxuICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0ID0ge1xuICAgICAgICAuLi5tb2NrVm90ZVJlcXVlc3QsXG4gICAgICAgIHZvdGVEYXRhOiB7XG4gICAgICAgICAgY2hvaWNlOiBudWxsLFxuICAgICAgICAgIGFwcHJvdmFsczogWzAsIDFdLCAvLyBBcHByb3ZlIG9wdGlvbi0xIGFuZCBvcHRpb24tMlxuICAgICAgICAgIHJhbmtpbmdzOiBudWxsLFxuICAgICAgICAgIGFsbG9jYXRpb25zOiBudWxsLFxuICAgICAgICAgIHJhdGluZ3M6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgZW5naW5lLnZhbGlkYXRlVm90ZShhcHByb3ZhbFJlcXVlc3QsIGFwcHJvdmFsUG9sbClcbiAgICAgIFxuICAgICAgLy8gRGVidWc6IExvZyB0aGUgdmFsaWRhdGlvbiByZXN1bHRcbiAgICAgIGNvbnNvbGUubG9nKCdBcHByb3ZhbCB2YWxpZGF0aW9uIHJlc3VsdDonLCBKU09OLnN0cmluZ2lmeSh2YWxpZGF0aW9uLCBudWxsLCAyKSlcbiAgICAgIGNvbnNvbGUubG9nKCdBcHByb3ZhbCBwb2xsIG9wdGlvbnM6JywgYXBwcm92YWxQb2xsLm9wdGlvbnMpXG4gICAgICBjb25zb2xlLmxvZygnQXBwcm92YWwgcmVxdWVzdCB2b3RlRGF0YTonLCBhcHByb3ZhbFJlcXVlc3Qudm90ZURhdGEpXG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnZhbGlkKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgcXVhZHJhdGljIHZvdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcXVhZHJhdGljUG9sbCA9IHsgLi4ubW9ja1BvbGwsIHZvdGluZ01ldGhvZDogJ3F1YWRyYXRpYycgYXMgVm90aW5nTWV0aG9kIH1cbiAgICAgIGNvbnN0IHF1YWRyYXRpY1JlcXVlc3QgPSB7XG4gICAgICAgIC4uLm1vY2tWb3RlUmVxdWVzdCxcbiAgICAgICAgdm90ZURhdGE6IHtcbiAgICAgICAgICBjaG9pY2U6IG51bGwsXG4gICAgICAgICAgYXBwcm92YWxzOiBudWxsLFxuICAgICAgICAgIHJhbmtpbmdzOiBudWxsLFxuICAgICAgICAgIGFsbG9jYXRpb25zOiB7ICdvcHRpb24tMSc6IDIsICdvcHRpb24tMic6IDEgfSxcbiAgICAgICAgICByYXRpbmdzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUocXVhZHJhdGljUmVxdWVzdCwgcXVhZHJhdGljUG9sbClcbiAgICAgIFxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24udmFsaWQpLnRvQmUodHJ1ZSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdWb3RlIFByb2Nlc3NpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcm9jZXNzIHNpbmdsZS1jaG9pY2Ugdm90ZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlbmdpbmUucHJvY2Vzc1ZvdGUobW9ja1ZvdGVSZXF1ZXN0LCBtb2NrUG9sbClcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXNwb25zZS52b3RlSWQpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChyZXNwb25zZS5hdWRpdFJlY2VpcHQpLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBwcm9jZXNzIHJhbmtlZC1jaG9pY2Ugdm90ZXMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmFua2VkUG9sbCA9IHsgLi4ubW9ja1BvbGwsIHZvdGluZ01ldGhvZDogJ3JhbmtlZC1jaG9pY2UnIGFzIFZvdGluZ01ldGhvZCB9XG4gICAgICBjb25zdCByYW5rZWRSZXF1ZXN0ID0ge1xuICAgICAgICAuLi5tb2NrVm90ZVJlcXVlc3QsXG4gICAgICAgIHZvdGVEYXRhOiB7XG4gICAgICAgICAgY2hvaWNlOiBudWxsLFxuICAgICAgICAgIGFwcHJvdmFsczogbnVsbCxcbiAgICAgICAgICByYW5raW5nczogWzAsIDFdLCAvLyBSYW5rIG9wdGlvbi0xIGZpcnN0LCBvcHRpb24tMiBzZWNvbmRcbiAgICAgICAgICBhbGxvY2F0aW9uczogbnVsbCxcbiAgICAgICAgICByYXRpbmdzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlbmdpbmUucHJvY2Vzc1ZvdGUocmFua2VkUmVxdWVzdCwgcmFua2VkUG9sbClcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChyZXNwb25zZS52b3RlSWQpLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdm90ZSBwcm9jZXNzaW5nIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBhIHByb2Nlc3NpbmcgZXJyb3IgYnkgY3JlYXRpbmcgYSBwb2xsIHdpdGggaW52YWxpZCB2b3RpbmcgbWV0aG9kXG4gICAgICBjb25zdCBpbnZhbGlkUG9sbCA9IHsgLi4ubW9ja1BvbGwsIHZvdGluZ01ldGhvZDogJ2ludmFsaWQtbWV0aG9kJyBhcyBhbnkgfVxuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVuZ2luZS5wcm9jZXNzVm90ZShtb2NrVm90ZVJlcXVlc3QsIGludmFsaWRQb2xsKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9CZURlZmluZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ1Jlc3VsdHMgQ2FsY3VsYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgc2luZ2xlLWNob2ljZSByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgdm90ZXMgPSBbXG4gICAgICAgIHsgY2hvaWNlOiAwLCBhcHByb3ZhbHM6IG51bGwsIHJhbmtpbmdzOiBudWxsLCBhbGxvY2F0aW9uczogbnVsbCwgcmF0aW5nczogbnVsbCB9LFxuICAgICAgICB7IGNob2ljZTogMCwgYXBwcm92YWxzOiBudWxsLCByYW5raW5nczogbnVsbCwgYWxsb2NhdGlvbnM6IG51bGwsIHJhdGluZ3M6IG51bGwgfSxcbiAgICAgICAgeyBjaG9pY2U6IDEsIGFwcHJvdmFsczogbnVsbCwgcmFua2luZ3M6IG51bGwsIGFsbG9jYXRpb25zOiBudWxsLCByYXRpbmdzOiBudWxsIH1cbiAgICAgIF1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVuZ2luZS5jYWxjdWxhdGVSZXN1bHRzKG1vY2tQb2xsLCB2b3RlcylcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChyZXN1bHRzLnRvdGFsVm90ZXMpLnRvQmUoMylcbiAgICAgIGV4cGVjdChyZXN1bHRzLnJlc3VsdHMud2lubmVyKS50b0JlKCdvcHRpb24tMScpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgY2FsY3VsYXRlIHJhbmtlZC1jaG9pY2UgcmVzdWx0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJhbmtlZFBvbGwgPSB7IC4uLm1vY2tQb2xsLCB2b3RpbmdNZXRob2Q6ICdyYW5rZWQtY2hvaWNlJyBhcyBWb3RpbmdNZXRob2QgfVxuICAgICAgY29uc3Qgdm90ZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3ZvdGUtMScsXG4gICAgICAgICAgcG9sbElkOiAndGVzdC1wb2xsLWlkJyxcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgICAgIHZvdGVEYXRhOiB7IHJhbmtpbmdzOiBbMCwgMV0gfSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBpcEFkZHJlc3M6ICcxOTIuMTY4LjEuMScsXG4gICAgICAgICAgdXNlckFnZW50OiAnTW96aWxsYS81LjAnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3ZvdGUtMicsXG4gICAgICAgICAgcG9sbElkOiAndGVzdC1wb2xsLWlkJyxcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTInLFxuICAgICAgICAgIHZvdGVEYXRhOiB7IHJhbmtpbmdzOiBbMSwgMF0gfSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICBpcEFkZHJlc3M6ICcxOTIuMTY4LjEuMicsXG4gICAgICAgICAgdXNlckFnZW50OiAnTW96aWxsYS81LjAnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVuZ2luZS5jYWxjdWxhdGVSZXN1bHRzKHJhbmtlZFBvbGwsIHZvdGVzKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0cykudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHJlc3VsdHMudG90YWxWb3RlcykudG9CZSgyKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2b3RlIHNldHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZW5naW5lLmNhbGN1bGF0ZVJlc3VsdHMobW9ja1BvbGwsIFtdKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0cykudG9CZURlZmluZWQoKVxuICAgICAgZXhwZWN0KHJlc3VsdHMudG90YWxWb3RlcykudG9CZSgwKVxuICAgICAgZXhwZWN0KHJlc3VsdHMucmVzdWx0cy53aW5uZXIpLnRvQmVOdWxsKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGllIHNjZW5hcmlvcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHZvdGVzID0gW1xuICAgICAgICB7IGNob2ljZTogMCwgYXBwcm92YWxzOiBudWxsLCByYW5raW5nczogbnVsbCwgYWxsb2NhdGlvbnM6IG51bGwsIHJhdGluZ3M6IG51bGwgfSxcbiAgICAgICAgeyBjaG9pY2U6IDEsIGFwcHJvdmFsczogbnVsbCwgcmFua2luZ3M6IG51bGwsIGFsbG9jYXRpb25zOiBudWxsLCByYXRpbmdzOiBudWxsIH1cbiAgICAgIF1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVuZ2luZS5jYWxjdWxhdGVSZXN1bHRzKG1vY2tQb2xsLCB2b3RlcylcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvQmVEZWZpbmVkKClcbiAgICAgIGV4cGVjdChyZXN1bHRzLnRvdGFsVm90ZXMpLnRvQmUoMilcbiAgICAgIC8vIEluIGEgdGllLCB0aGUgcmVzdWx0IHNob3VsZCBpbmRpY2F0ZSBubyBjbGVhciB3aW5uZXJcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdSYXRlIExpbWl0aW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZW5mb3JjZSByYXRlIGxpbWl0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBtdWx0aXBsZSByZXF1ZXN0cyBmcm9tIHRoZSBzYW1lIHVzZXJcbiAgICAgIGNvbnN0IHJlcXVlc3RzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTUgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIC4uLm1vY2tWb3RlUmVxdWVzdCxcbiAgICAgICAgdXNlcklkOiAndXNlci0xJyxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAuLi5tb2NrVm90ZVJlcXVlc3QubWV0YWRhdGEsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgaSAqIDEwMDApXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgICAgXG4gICAgICAvLyBQcm9jZXNzIHJlcXVlc3RzIGFuZCBjaGVjayByYXRlIGxpbWl0aW5nXG4gICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgICAgcmVxdWVzdHMubWFwKHJlcXVlc3QgPT4gZW5naW5lLnByb2Nlc3NWb3RlKHJlcXVlc3QsIG1vY2tQb2xsKSlcbiAgICAgIClcbiAgICAgIFxuICAgICAgLy8gU29tZSByZXF1ZXN0cyBzaG91bGQgYmUgcmF0ZSBsaW1pdGVkXG4gICAgICBjb25zdCByYXRlTGltaXRlZFJlc3BvbnNlcyA9IHJlc3BvbnNlcy5maWx0ZXIociA9PiAhci5zdWNjZXNzICYmIHIuZXJyb3I/LmluY2x1ZGVzKCdSYXRlIGxpbWl0IGV4Y2VlZGVkJykpXG4gICAgICBleHBlY3QocmF0ZUxpbWl0ZWRSZXNwb25zZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyByZXF1ZXN0cyB3aXRoaW4gcmF0ZSBsaW1pdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3RzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgLi4ubW9ja1ZvdGVSZXF1ZXN0LFxuICAgICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIC4uLm1vY2tWb3RlUmVxdWVzdC5tZXRhZGF0YSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgKyBpICogMTAwMClcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICByZXF1ZXN0cy5tYXAocmVxdWVzdCA9PiBlbmdpbmUucHJvY2Vzc1ZvdGUocmVxdWVzdCwgbW9ja1BvbGwpKVxuICAgICAgKVxuICAgICAgXG4gICAgICAvLyBBbGwgcmVxdWVzdHMgc2hvdWxkIHN1Y2NlZWQgd2l0aGluIHJhdGUgbGltaXRcbiAgICAgIGNvbnN0IHN1Y2Nlc3NmdWxSZXNwb25zZXMgPSByZXNwb25zZXMuZmlsdGVyKHIgPT4gci5zdWNjZXNzKVxuICAgICAgZXhwZWN0KHN1Y2Nlc3NmdWxSZXNwb25zZXMubGVuZ3RoKS50b0JlKDUpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnQXV0aGVudGljYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uIHdoZW4gY29uZmlndXJlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVuYXV0aGVudGljYXRlZFJlcXVlc3QgPSB7IC4uLm1vY2tWb3RlUmVxdWVzdCwgdXNlcklkOiBudWxsIH1cbiAgICAgIFxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUodW5hdXRoZW50aWNhdGVkUmVxdWVzdCwgbW9ja1BvbGwpXG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnZhbGlkKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3JzKS50b0NvbnRhaW4oJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkIHRvIHZvdGUnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGFsbG93IGFub255bW91cyB2b3Rpbmcgd2hlbiBjb25maWd1cmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYW5vbnltb3VzUG9sbCA9IHtcbiAgICAgICAgLi4ubW9ja1BvbGwsXG4gICAgICAgIHNldHRpbmdzOiB7IC4uLm1vY2tQb2xsLnNldHRpbmdzLCBhbm9ueW1vdXNWb3Rpbmc6IHRydWUgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBhbm9ueW1vdXNSZXF1ZXN0ID0geyAuLi5tb2NrVm90ZVJlcXVlc3QsIHVzZXJJZDogbnVsbCB9XG4gICAgICBcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBlbmdpbmUudmFsaWRhdGVWb3RlKGFub255bW91c1JlcXVlc3QsIGFub255bW91c1BvbGwpXG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLnZhbGlkKS50b0JlKHRydWUpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWFsZm9ybWVkIHZvdGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1hbGZvcm1lZFJlcXVlc3QgPSB7XG4gICAgICAgIC4uLm1vY2tWb3RlUmVxdWVzdCxcbiAgICAgICAgdm90ZURhdGE6IG51bGxcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlbmdpbmUucHJvY2Vzc1ZvdGUobWFsZm9ybWVkUmVxdWVzdCwgbW9ja1BvbGwpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmVycm9yKS50b0JlRGVmaW5lZCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3NpbmcgcG9sbCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlbmdpbmUucHJvY2Vzc1ZvdGUobW9ja1ZvdGVSZXF1ZXN0LCBudWxsIGFzIGFueSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QocmVzcG9uc2UuZXJyb3IpLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmV0d29yayBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBhIHNjZW5hcmlvIHRoYXQgd291bGQgY2F1c2UgYSBwcm9jZXNzaW5nIGVycm9yXG4gICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdCA9IHtcbiAgICAgICAgLi4ubW9ja1ZvdGVSZXF1ZXN0LFxuICAgICAgICB2b3RlRGF0YTogbnVsbCBhcyBhbnkgLy8gVGhpcyBzaG91bGQgY2F1c2UgYSB2YWxpZGF0aW9uIGVycm9yXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZW5naW5lLnByb2Nlc3NWb3RlKGludmFsaWRSZXF1ZXN0LCBtb2NrUG9sbClcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpXG4gICAgICBleHBlY3QocmVzcG9uc2UuZXJyb3IpLnRvQmVEZWZpbmVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHByb2Nlc3Mgdm90ZXMgd2l0aGluIHJlYXNvbmFibGUgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpXG4gICAgICBcbiAgICAgIGF3YWl0IGVuZ2luZS5wcm9jZXNzVm90ZShtb2NrVm90ZVJlcXVlc3QsIG1vY2tQb2xsKVxuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZVxuICAgICAgXG4gICAgICAvLyBTaG91bGQgcHJvY2VzcyB3aXRoaW4gMTAwbXNcbiAgICAgIGV4cGVjdChwcm9jZXNzaW5nVGltZSkudG9CZUxlc3NUaGFuKDEwMClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2Ugdm90ZSBzZXRzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VWb3RlU2V0ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgLi4ubW9ja1ZvdGVSZXF1ZXN0LFxuICAgICAgICB1c2VySWQ6IGB1c2VyLSR7aX1gLFxuICAgICAgICB2b3RlRGF0YToge1xuICAgICAgICAgIHNlbGVjdGVkT3B0aW9uczogWydvcHRpb24tMSddLFxuICAgICAgICAgIHJhbmtpbmc6IG51bGwsXG4gICAgICAgICAgd2VpZ2h0czogbnVsbFxuICAgICAgICB9XG4gICAgICB9KSlcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVuZ2luZS5jYWxjdWxhdGVSZXN1bHRzKG1vY2tQb2xsLCBsYXJnZVZvdGVTZXQpXG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgY29uc3QgcHJvY2Vzc2luZ1RpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0JlRGVmaW5lZCgpXG4gICAgICBleHBlY3QocHJvY2Vzc2luZ1RpbWUpLnRvQmVMZXNzVGhhbigxMDAwKSAvLyBTaG91bGQgcHJvY2VzcyB3aXRoaW4gMSBzZWNvbmRcbiAgICB9KVxuICB9KVxufSlcblxuXG5cbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImRldkxvZyIsImZuIiwiZGVzY3JpYmUiLCJlbmdpbmUiLCJjb25maWciLCJtb2NrUG9sbCIsIm1vY2tWb3RlUmVxdWVzdCIsImJlZm9yZUVhY2giLCJtYXhWb3Rlc1BlclBvbGwiLCJhbGxvd011bHRpcGxlVm90ZXMiLCJyZXF1aXJlQXV0aGVudGljYXRpb24iLCJtaW5UcnVzdFRpZXIiLCJyYXRlTGltaXRQZXJVc2VyIiwicmF0ZUxpbWl0V2luZG93TXMiLCJWb3RlRW5naW5lIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidm90aW5nTWV0aG9kIiwib3B0aW9ucyIsInRleHQiLCJzdGF0dXMiLCJjcmVhdGVkQXQiLCJEYXRlIiwiY2xvc2VBdCIsIm5vdyIsImNyZWF0ZWRCeSIsInNldHRpbmdzIiwiYW5vbnltb3VzVm90aW5nIiwicG9sbElkIiwidXNlcklkIiwidm90ZURhdGEiLCJjaG9pY2UiLCJhcHByb3ZhbHMiLCJyYW5raW5ncyIsImFsbG9jYXRpb25zIiwicmF0aW5ncyIsIm1ldGFkYXRhIiwiaXBBZGRyZXNzIiwidXNlckFnZW50IiwidGltZXN0YW1wIiwiaXQiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsImRlZmF1bHRFbmdpbmUiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVWb3RlIiwidmFsaWQiLCJ0b0JlIiwiZXJyb3JzIiwidG9IYXZlTGVuZ3RoIiwiaW52YWxpZFJlcXVlc3QiLCJ0b0NvbnRhaW4iLCJjbG9zZWRQb2xsIiwicmFua2VkUG9sbCIsInJhbmtlZFJlcXVlc3QiLCJhcHByb3ZhbFBvbGwiLCJhcHByb3ZhbFJlcXVlc3QiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsInF1YWRyYXRpY1BvbGwiLCJxdWFkcmF0aWNSZXF1ZXN0IiwicmVzcG9uc2UiLCJwcm9jZXNzVm90ZSIsInN1Y2Nlc3MiLCJ2b3RlSWQiLCJhdWRpdFJlY2VpcHQiLCJpbnZhbGlkUG9sbCIsImVycm9yIiwidm90ZXMiLCJyZXN1bHRzIiwiY2FsY3VsYXRlUmVzdWx0cyIsInRvdGFsVm90ZXMiLCJ3aW5uZXIiLCJ0b0lTT1N0cmluZyIsInRvQmVOdWxsIiwicmVxdWVzdHMiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsInJlc3BvbnNlcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJyZXF1ZXN0IiwicmF0ZUxpbWl0ZWRSZXNwb25zZXMiLCJmaWx0ZXIiLCJyIiwiaW5jbHVkZXMiLCJ0b0JlR3JlYXRlclRoYW4iLCJzdWNjZXNzZnVsUmVzcG9uc2VzIiwidW5hdXRoZW50aWNhdGVkUmVxdWVzdCIsImFub255bW91c1BvbGwiLCJhbm9ueW1vdXNSZXF1ZXN0IiwibWFsZm9ybWVkUmVxdWVzdCIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwiZW5kVGltZSIsInByb2Nlc3NpbmdUaW1lIiwidG9CZUxlc3NUaGFuIiwibGFyZ2VWb3RlU2V0Iiwic2VsZWN0ZWRPcHRpb25zIiwicmFua2luZyIsIndlaWdodHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7OztDQUtDOzs7O3lCQUVzRDt3QkFDTDtBQUdsRCxrQkFBa0I7QUFDbEJBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDLHNCQUFzQixJQUFPLENBQUE7UUFDckNDLFFBQVFGLGFBQUksQ0FBQ0csRUFBRTtJQUNqQixDQUFBO0FBRUFDLElBQUFBLGlCQUFRLEVBQUMsY0FBYztJQUNyQixJQUFJQztJQUNKLElBQUlDO0lBQ0osSUFBSUM7SUFDSixJQUFJQztJQUVKQyxJQUFBQSxtQkFBVSxFQUFDO1FBQ1RILFNBQVM7WUFDUEksaUJBQWlCO1lBQ2pCQyxvQkFBb0I7WUFDcEJDLHVCQUF1QjtZQUN2QkMsY0FBYztZQUNkQyxrQkFBa0I7WUFDbEJDLG1CQUFtQjtRQUNyQjtRQUVBVixTQUFTLElBQUlXLGtCQUFVLENBQUNWO1FBRXhCQyxXQUFXO1lBQ1RVLElBQUk7WUFDSkMsT0FBTztZQUNQQyxhQUFhO1lBQ2JDLGNBQWM7WUFDZEMsU0FBUztnQkFDUDtvQkFBRUosSUFBSTtvQkFBWUssTUFBTTtnQkFBVztnQkFDbkM7b0JBQUVMLElBQUk7b0JBQVlLLE1BQU07Z0JBQVc7YUFDcEM7WUFDREMsUUFBUTtZQUNSQyxXQUFXLElBQUlDO1lBQ2ZDLFNBQVMsSUFBSUQsS0FBS0EsS0FBS0UsR0FBRyxLQUFLO1lBQy9CQyxXQUFXO1lBQ1hDLFVBQVU7Z0JBQ1JsQixvQkFBb0I7Z0JBQ3BCQyx1QkFBdUI7Z0JBQ3ZCa0IsaUJBQWlCO1lBQ25CO1FBQ0Y7UUFFQXRCLGtCQUFrQjtZ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