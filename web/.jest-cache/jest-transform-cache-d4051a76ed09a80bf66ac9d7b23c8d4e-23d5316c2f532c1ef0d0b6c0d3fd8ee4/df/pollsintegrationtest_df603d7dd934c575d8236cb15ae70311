222d2e0f9a175fca5c810f67e9d32a3c
/**
 * Integration Tests - API + Database (20% of tests)
 * 
 * These tests focus on how components work together.
 * Test API endpoints with real database operations.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _server = require("next/server");
const _route = require("../../../../app/api/polls/route");
const _databasetestutils = require("../../../helpers/database-test-utils");
// Use real test database
let supabase;
let testUser;
(0, _globals.describe)("Integration Tests - API + Database", ()=>{
    let testUser;
    let testPollId = null;
    (0, _globals.beforeAll)(async ()=>{
        // Setup real test database with proper integration testing
        supabase = await (0, _databasetestutils.setupTestDatabase)();
        testUser = await (0, _databasetestutils.createTestUser)(supabase);
        console.log("Integration: Test database setup complete");
    });
    (0, _globals.afterAll)(async ()=>{
        // Clean up test database with proper cleanup
        await (0, _databasetestutils.cleanupTestDatabase)(supabase);
        console.log("Integration: Test database cleanup complete");
    });
    (0, _globals.beforeEach)(()=>{
        // Reset test poll ID
        testPollId = null;
    });
    (0, _globals.afterEach)(async ()=>{
        if (!supabase) return;
        // Clean up any test data created during the test
        if (testPollId) {
            await supabase.from("polls").delete().eq("id", testPollId);
            testPollId = null;
        }
    });
    (0, _globals.describe)("API + Database Integration", ()=>{
        (0, _globals.it)("should create poll and retrieve it via API", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: API + Database
            // 1. Create poll via database
            const pollData = {
                title: "Integration Test Poll",
                options: [
                    {
                        text: "Integration Option 1",
                        votes: 0
                    },
                    {
                        text: "Integration Option 2",
                        votes: 0
                    }
                ],
                created_by: testUser.id,
                total_votes: 0,
                status: "active"
            };
            const { data: createdPoll, error: createError } = await supabase.from("polls").insert(pollData).select().single();
            (0, _globals.expect)(createError).toBeNull();
            (0, _globals.expect)(createdPoll).toBeDefined();
            (0, _globals.expect)(createdPoll.title).toBe("Integration Test Poll");
            // Store for cleanup
            testPollId = createdPoll.id;
            (0, _databasetestutils.trackTestData)("polls", createdPoll.id);
            // 2. Retrieve poll via API
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            console.log("Integration: API response:", responseData);
            // 3. Verify integration
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.success).toBe(true);
            (0, _globals.expect)(Array.isArray(responseData.polls)).toBe(true);
            // Check if our created poll is in the results
            const foundPoll = responseData.polls.find((poll)=>poll.poll_id === createdPoll.id);
            (0, _globals.expect)(foundPoll).toBeDefined();
        });
        (0, _globals.it)("should handle poll creation with voting integration", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: Poll creation + Voting
            // 1. Create poll
            const pollData = {
                title: "Voting Integration Poll",
                options: [
                    {
                        text: "Vote Option 1",
                        votes: 0
                    },
                    {
                        text: "Vote Option 2",
                        votes: 0
                    }
                ],
                created_by: testUser.id,
                total_votes: 0,
                status: "active"
            };
            const { data: poll, error: pollError } = await supabase.from("polls").insert(pollData).select().single();
            (0, _globals.expect)(pollError).toBeNull();
            (0, _globals.expect)(poll).toBeDefined();
            // Store for cleanup
            testPollId = poll.id;
            // 2. Add votes
            const voteData = {
                poll_id: poll.id,
                user_id: testUser.id,
                option_index: 0,
                created_at: new Date().toISOString()
            };
            const { data: vote, error: voteError } = await supabase.from("votes").insert(voteData).select().single();
            (0, _globals.expect)(voteError).toBeNull();
            (0, _globals.expect)(vote).toBeDefined();
            // 3. Update poll vote count
            const { data: updatedPoll, error: updateError } = await supabase.from("polls").update({
                total_votes: 1
            }).eq("id", poll.id).select().single();
            (0, _globals.expect)(updateError).toBeNull();
            (0, _globals.expect)(updatedPoll.total_votes).toBe(1);
            // 4. Verify integration
            const { data: finalPoll, error: finalError } = await supabase.from("polls").select("*").eq("id", poll.id).single();
            (0, _globals.expect)(finalError).toBeNull();
            (0, _globals.expect)(finalPoll.total_votes).toBe(1);
        });
        (0, _globals.it)("should handle poll results calculation integration", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: Poll + Votes + Results
            // 1. Create poll
            const pollData = {
                title: "Results Integration Poll",
                options: [
                    {
                        text: "Results Option 1",
                        votes: 0
                    },
                    {
                        text: "Results Option 2",
                        votes: 0
                    }
                ],
                created_by: testUser.id,
                total_votes: 0,
                status: "active"
            };
            const { data: poll, error: pollError } = await supabase.from("polls").insert(pollData).select().single();
            (0, _globals.expect)(pollError).toBeNull();
            (0, _globals.expect)(poll).toBeDefined();
            // Store for cleanup
            testPollId = poll.id;
            // 2. Add multiple votes
            const votes = [
                {
                    poll_id: poll.id,
                    user_id: testUser.id,
                    option_index: 0
                },
                {
                    poll_id: poll.id,
                    user_id: "user2",
                    option_index: 0
                },
                {
                    poll_id: poll.id,
                    user_id: "user3",
                    option_index: 1
                }
            ];
            for (const vote of votes){
                const { error: voteError } = await supabase.from("votes").insert(vote);
                (0, _globals.expect)(voteError).toBeNull();
            }
            // 3. Calculate results
            const { data: allVotes, error: votesError } = await supabase.from("votes").select("*").eq("poll_id", poll.id);
            (0, _globals.expect)(votesError).toBeNull();
            (0, _globals.expect)(allVotes).toHaveLength(3);
            // 4. Verify integration
            const option1Votes = allVotes.filter((vote)=>vote.option_index === 0).length;
            const option2Votes = allVotes.filter((vote)=>vote.option_index === 1).length;
            (0, _globals.expect)(option1Votes).toBe(2);
            (0, _globals.expect)(option2Votes).toBe(1);
        });
    });
    (0, _globals.describe)("API Error Handling Integration", ()=>{
        (0, _globals.it)("should handle database errors gracefully", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: API error handling
            // 1. Test invalid poll data
            const invalidPollData = {
                // Missing required fields
                options: [
                    {
                        text: "Invalid Option 1"
                    }
                ],
                created_by: testUser.id
            };
            const { data, error } = await supabase.from("polls").insert(invalidPollData).select().single();
            // 2. Verify error handling
            (0, _globals.expect)(error).not.toBeNull();
            (0, _globals.expect)(error.message).toContain("title");
            // 3. Test API error response
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // API should still work despite database error
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.success).toBe(true);
        });
        (0, _globals.it)("should handle authentication errors integration", async ()=>{
            if (!supabase) {
                console.warn("Skipping test - Real Supabase credentials not set up");
                return;
            }
            // Integration test: Authentication + API
            // 1. Test with invalid user
            const { data, error } = await supabase.auth.signInWithPassword({
                email: "invalid@example.com",
                password: "invalidpassword"
            });
            // 2. Verify authentication error
            (0, _globals.expect)(error).not.toBeNull();
            (0, _globals.expect)(error.message).toContain("Invalid login credentials");
            // 3. Test API with invalid authentication
            const request = new _server.NextRequest("http://localhost:3000/api/polls");
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            // API should still work (public endpoint)
            (0, _globals.expect)(response.status).toBe(200);
            (0, _globals.expect)(responseData.success).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L2ludGVncmF0aW9uL2FwaS9wb2xscy1pbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZWdyYXRpb24gVGVzdHMgLSBBUEkgKyBEYXRhYmFzZSAoMjAlIG9mIHRlc3RzKVxuICogXG4gKiBUaGVzZSB0ZXN0cyBmb2N1cyBvbiBob3cgY29tcG9uZW50cyB3b3JrIHRvZ2V0aGVyLlxuICogVGVzdCBBUEkgZW5kcG9pbnRzIHdpdGggcmVhbCBkYXRhYmFzZSBvcGVyYXRpb25zLlxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVBbGwsIGFmdGVyQWxsLCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgR0VULCBQT1NUIH0gZnJvbSAnQC9hcHAvYXBpL3BvbGxzL3JvdXRlJztcbmltcG9ydCB7IFxuICBzZXR1cFRlc3REYXRhYmFzZSwgXG4gIGNyZWF0ZVRlc3RVc2VyLCBcbiAgdHJhY2tUZXN0RGF0YSxcbiAgY2xlYW51cFRlc3REYXRhYmFzZSBcbn0gZnJvbSAnLi4vLi4vLi4vaGVscGVycy9kYXRhYmFzZS10ZXN0LXV0aWxzJztcblxuLy8gVXNlIHJlYWwgdGVzdCBkYXRhYmFzZVxubGV0IHN1cGFiYXNlOiBhbnk7XG5sZXQgdGVzdFVzZXI6IGFueTtcblxuZGVzY3JpYmUoJ0ludGVncmF0aW9uIFRlc3RzIC0gQVBJICsgRGF0YWJhc2UnLCAoKSA9PiB7XG4gIGxldCB0ZXN0VXNlcjogYW55O1xuICBsZXQgdGVzdFBvbGxJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBTZXR1cCByZWFsIHRlc3QgZGF0YWJhc2Ugd2l0aCBwcm9wZXIgaW50ZWdyYXRpb24gdGVzdGluZ1xuICAgIHN1cGFiYXNlID0gYXdhaXQgc2V0dXBUZXN0RGF0YWJhc2UoKTtcbiAgICB0ZXN0VXNlciA9IGF3YWl0IGNyZWF0ZVRlc3RVc2VyKHN1cGFiYXNlKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnSW50ZWdyYXRpb246IFRlc3QgZGF0YWJhc2Ugc2V0dXAgY29tcGxldGUnKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIENsZWFuIHVwIHRlc3QgZGF0YWJhc2Ugd2l0aCBwcm9wZXIgY2xlYW51cFxuICAgIGF3YWl0IGNsZWFudXBUZXN0RGF0YWJhc2Uoc3VwYWJhc2UpO1xuICAgIGNvbnNvbGUubG9nKCdJbnRlZ3JhdGlvbjogVGVzdCBkYXRhYmFzZSBjbGVhbnVwIGNvbXBsZXRlJyk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFJlc2V0IHRlc3QgcG9sbCBJRFxuICAgIHRlc3RQb2xsSWQgPSBudWxsO1xuICB9KTtcblxuICBhZnRlckVhY2goYXN5bmMgKCkgPT4ge1xuICAgIGlmICghc3VwYWJhc2UpIHJldHVybjtcblxuICAgIC8vIENsZWFuIHVwIGFueSB0ZXN0IGRhdGEgY3JlYXRlZCBkdXJpbmcgdGhlIHRlc3RcbiAgICBpZiAodGVzdFBvbGxJZCkge1xuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgncG9sbHMnKS5kZWxldGUoKS5lcSgnaWQnLCB0ZXN0UG9sbElkKTtcbiAgICAgIHRlc3RQb2xsSWQgPSBudWxsO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FQSSArIERhdGFiYXNlIEludGVncmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIHBvbGwgYW5kIHJldHJpZXZlIGl0IHZpYSBBUEknLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignU2tpcHBpbmcgdGVzdCAtIFJlYWwgU3VwYWJhc2UgY3JlZGVudGlhbHMgbm90IHNldCB1cCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEludGVncmF0aW9uIHRlc3Q6IEFQSSArIERhdGFiYXNlXG4gICAgICAvLyAxLiBDcmVhdGUgcG9sbCB2aWEgZGF0YWJhc2VcbiAgICAgIGNvbnN0IHBvbGxEYXRhID0ge1xuICAgICAgICB0aXRsZTogJ0ludGVncmF0aW9uIFRlc3QgUG9sbCcsXG4gICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICB7IHRleHQ6ICdJbnRlZ3JhdGlvbiBPcHRpb24gMScsIHZvdGVzOiAwIH0sXG4gICAgICAgICAgeyB0ZXh0OiAnSW50ZWdyYXRpb24gT3B0aW9uIDInLCB2b3RlczogMCB9XG4gICAgICAgIF0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHRlc3RVc2VyLmlkLFxuICAgICAgICB0b3RhbF92b3RlczogMCxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgICAgfTtcblxuICAgICAgY29uc3QgeyBkYXRhOiBjcmVhdGVkUG9sbCwgZXJyb3I6IGNyZWF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncG9sbHMnKVxuICAgICAgICAuaW5zZXJ0KHBvbGxEYXRhKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QoY3JlYXRlRXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QoY3JlYXRlZFBvbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY3JlYXRlZFBvbGwudGl0bGUpLnRvQmUoJ0ludGVncmF0aW9uIFRlc3QgUG9sbCcpO1xuXG4gICAgICAvLyBTdG9yZSBmb3IgY2xlYW51cFxuICAgICAgdGVzdFBvbGxJZCA9IGNyZWF0ZWRQb2xsLmlkO1xuICAgICAgdHJhY2tUZXN0RGF0YSgncG9sbHMnLCBjcmVhdGVkUG9sbC5pZCk7XG5cbiAgICAgIC8vIDIuIFJldHJpZXZlIHBvbGwgdmlhIEFQSVxuICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9wb2xscycpO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdJbnRlZ3JhdGlvbjogQVBJIHJlc3BvbnNlOicsIHJlc3BvbnNlRGF0YSk7XG5cbiAgICAgIC8vIDMuIFZlcmlmeSBpbnRlZ3JhdGlvblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlRGF0YS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkocmVzcG9uc2VEYXRhLnBvbGxzKSkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgb3VyIGNyZWF0ZWQgcG9sbCBpcyBpbiB0aGUgcmVzdWx0c1xuICAgICAgY29uc3QgZm91bmRQb2xsID0gcmVzcG9uc2VEYXRhLnBvbGxzLmZpbmQoKHBvbGw6IGFueSkgPT4gcG9sbC5wb2xsX2lkID09PSBjcmVhdGVkUG9sbC5pZCk7XG4gICAgICBleHBlY3QoZm91bmRQb2xsKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcG9sbCBjcmVhdGlvbiB3aXRoIHZvdGluZyBpbnRlZ3JhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTa2lwcGluZyB0ZXN0IC0gUmVhbCBTdXBhYmFzZSBjcmVkZW50aWFscyBub3Qgc2V0IHVwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW50ZWdyYXRpb24gdGVzdDogUG9sbCBjcmVhdGlvbiArIFZvdGluZ1xuICAgICAgLy8gMS4gQ3JlYXRlIHBvbGxcbiAgICAgIGNvbnN0IHBvbGxEYXRhID0ge1xuICAgICAgICB0aXRsZTogJ1ZvdGluZyBJbnRlZ3JhdGlvbiBQb2xsJyxcbiAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgIHsgdGV4dDogJ1ZvdGUgT3B0aW9uIDEnLCB2b3RlczogMCB9LFxuICAgICAgICAgIHsgdGV4dDogJ1ZvdGUgT3B0aW9uIDInLCB2b3RlczogMCB9XG4gICAgICAgIF0sXG4gICAgICAgIGNyZWF0ZWRfYnk6IHRlc3RVc2VyLmlkLFxuICAgICAgICB0b3RhbF92b3RlczogMCxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgICAgfTtcblxuICAgICAgY29uc3QgeyBkYXRhOiBwb2xsLCBlcnJvcjogcG9sbEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncG9sbHMnKVxuICAgICAgICAuaW5zZXJ0KHBvbGxEYXRhKVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QocG9sbEVycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KHBvbGwpLnRvQmVEZWZpbmVkKCk7XG5cbiAgICAgIC8vIFN0b3JlIGZvciBjbGVhbnVwXG4gICAgICB0ZXN0UG9sbElkID0gcG9sbC5pZDtcblxuICAgICAgLy8gMi4gQWRkIHZvdGVzXG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHtcbiAgICAgICAgcG9sbF9pZDogcG9sbC5pZCxcbiAgICAgICAgdXNlcl9pZDogdGVzdFVzZXIuaWQsXG4gICAgICAgIG9wdGlvbl9pbmRleDogMCxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IGRhdGE6IHZvdGUsIGVycm9yOiB2b3RlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCd2b3RlcycpXG4gICAgICAgIC5pbnNlcnQodm90ZURhdGEpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdCh2b3RlRXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3Qodm90ZSkudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gMy4gVXBkYXRlIHBvbGwgdm90ZSBjb3VudFxuICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUG9sbCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncG9sbHMnKVxuICAgICAgICAudXBkYXRlKHsgdG90YWxfdm90ZXM6IDEgfSlcbiAgICAgICAgLmVxKCdpZCcsIHBvbGwuaWQpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdCh1cGRhdGVFcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdCh1cGRhdGVkUG9sbC50b3RhbF92b3RlcykudG9CZSgxKTtcblxuICAgICAgLy8gNC4gVmVyaWZ5IGludGVncmF0aW9uXG4gICAgICBjb25zdCB7IGRhdGE6IGZpbmFsUG9sbCwgZXJyb3I6IGZpbmFsRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ2lkJywgcG9sbC5pZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBleHBlY3QoZmluYWxFcnJvcikudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChmaW5hbFBvbGwudG90YWxfdm90ZXMpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBwb2xsIHJlc3VsdHMgY2FsY3VsYXRpb24gaW50ZWdyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignU2tpcHBpbmcgdGVzdCAtIFJlYWwgU3VwYWJhc2UgY3JlZGVudGlhbHMgbm90IHNldCB1cCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEludGVncmF0aW9uIHRlc3Q6IFBvbGwgKyBWb3RlcyArIFJlc3VsdHNcbiAgICAgIC8vIDEuIENyZWF0ZSBwb2xsXG4gICAgICBjb25zdCBwb2xsRGF0YSA9IHtcbiAgICAgICAgdGl0bGU6ICdSZXN1bHRzIEludGVncmF0aW9uIFBvbGwnLFxuICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgeyB0ZXh0OiAnUmVzdWx0cyBPcHRpb24gMScsIHZvdGVzOiAwIH0sXG4gICAgICAgICAgeyB0ZXh0OiAnUmVzdWx0cyBPcHRpb24gMicsIHZvdGVzOiAwIH1cbiAgICAgICAgXSxcbiAgICAgICAgY3JlYXRlZF9ieTogdGVzdFVzZXIuaWQsXG4gICAgICAgIHRvdGFsX3ZvdGVzOiAwLFxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCB7IGRhdGE6IHBvbGwsIGVycm9yOiBwb2xsRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwb2xscycpXG4gICAgICAgIC5pbnNlcnQocG9sbERhdGEpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGV4cGVjdChwb2xsRXJyb3IpLnRvQmVOdWxsKCk7XG4gICAgICBleHBlY3QocG9sbCkudG9CZURlZmluZWQoKTtcblxuICAgICAgLy8gU3RvcmUgZm9yIGNsZWFudXBcbiAgICAgIHRlc3RQb2xsSWQgPSBwb2xsLmlkO1xuXG4gICAgICAvLyAyLiBBZGQgbXVsdGlwbGUgdm90ZXNcbiAgICAgIGNvbnN0IHZvdGVzID0gW1xuICAgICAgICB7IHBvbGxfaWQ6IHBvbGwuaWQsIHVzZXJfaWQ6IHRlc3RVc2VyLmlkLCBvcHRpb25faW5kZXg6IDAgfSxcbiAgICAgICAgeyBwb2xsX2lkOiBwb2xsLmlkLCB1c2VyX2lkOiAndXNlcjInLCBvcHRpb25faW5kZXg6IDAgfSxcbiAgICAgICAgeyBwb2xsX2lkOiBwb2xsLmlkLCB1c2VyX2lkOiAndXNlcjMnLCBvcHRpb25faW5kZXg6IDEgfVxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB2b3RlIG9mIHZvdGVzKSB7XG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IHZvdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgndm90ZXMnKVxuICAgICAgICAgIC5pbnNlcnQodm90ZSk7XG5cbiAgICAgICAgZXhwZWN0KHZvdGVFcnJvcikudG9CZU51bGwoKTtcbiAgICAgIH1cblxuICAgICAgLy8gMy4gQ2FsY3VsYXRlIHJlc3VsdHNcbiAgICAgIGNvbnN0IHsgZGF0YTogYWxsVm90ZXMsIGVycm9yOiB2b3Rlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndm90ZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdwb2xsX2lkJywgcG9sbC5pZCk7XG5cbiAgICAgIGV4cGVjdCh2b3Rlc0Vycm9yKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KGFsbFZvdGVzKS50b0hhdmVMZW5ndGgoMyk7XG5cbiAgICAgIC8vIDQuIFZlcmlmeSBpbnRlZ3JhdGlvblxuICAgICAgY29uc3Qgb3B0aW9uMVZvdGVzID0gYWxsVm90ZXMuZmlsdGVyKCh2b3RlOiBhbnkpID0+IHZvdGUub3B0aW9uX2luZGV4ID09PSAwKS5sZW5ndGg7XG4gICAgICBjb25zdCBvcHRpb24yVm90ZXMgPSBhbGxWb3Rlcy5maWx0ZXIoKHZvdGU6IGFueSkgPT4gdm90ZS5vcHRpb25faW5kZXggPT09IDEpLmxlbmd0aDtcblxuICAgICAgZXhwZWN0KG9wdGlvbjFWb3RlcykudG9CZSgyKTtcbiAgICAgIGV4cGVjdChvcHRpb24yVm90ZXMpLnRvQmUoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBUEkgRXJyb3IgSGFuZGxpbmcgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGF0YWJhc2UgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignU2tpcHBpbmcgdGVzdCAtIFJlYWwgU3VwYWJhc2UgY3JlZGVudGlhbHMgbm90IHNldCB1cCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEludGVncmF0aW9uIHRlc3Q6IEFQSSBlcnJvciBoYW5kbGluZ1xuICAgICAgLy8gMS4gVGVzdCBpbnZhbGlkIHBvbGwgZGF0YVxuICAgICAgY29uc3QgaW52YWxpZFBvbGxEYXRhID0ge1xuICAgICAgICAvLyBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkc1xuICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgeyB0ZXh0OiAnSW52YWxpZCBPcHRpb24gMScgfVxuICAgICAgICBdLFxuICAgICAgICBjcmVhdGVkX2J5OiB0ZXN0VXNlci5pZFxuICAgICAgfTtcblxuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BvbGxzJylcbiAgICAgICAgLmluc2VydChpbnZhbGlkUG9sbERhdGEpXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIC8vIDIuIFZlcmlmeSBlcnJvciBoYW5kbGluZ1xuICAgICAgZXhwZWN0KGVycm9yKS5ub3QudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChlcnJvci5tZXNzYWdlKS50b0NvbnRhaW4oJ3RpdGxlJyk7XG5cbiAgICAgIC8vIDMuIFRlc3QgQVBJIGVycm9yIHJlc3BvbnNlXG4gICAgICBjb25zdCByZXF1ZXN0ID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3BvbGxzJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEdFVChyZXF1ZXN0KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgLy8gQVBJIHNob3VsZCBzdGlsbCB3b3JrIGRlc3BpdGUgZGF0YWJhc2UgZXJyb3JcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGF1dGhlbnRpY2F0aW9uIGVycm9ycyBpbnRlZ3JhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdTa2lwcGluZyB0ZXN0IC0gUmVhbCBTdXBhYmFzZSBjcmVkZW50aWFscyBub3Qgc2V0IHVwJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW50ZWdyYXRpb24gdGVzdDogQXV0aGVudGljYXRpb24gKyBBUElcbiAgICAgIC8vIDEuIFRlc3Qgd2l0aCBpbnZhbGlkIHVzZXJcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbkluV2l0aFBhc3N3b3JkKHtcbiAgICAgICAgZW1haWw6ICdpbnZhbGlkQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdpbnZhbGlkcGFzc3dvcmQnXG4gICAgICB9KTtcblxuICAgICAgLy8gMi4gVmVyaWZ5IGF1dGhlbnRpY2F0aW9uIGVycm9yXG4gICAgICBleHBlY3QoZXJyb3IpLm5vdC50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KGVycm9yLm1lc3NhZ2UpLnRvQ29udGFpbignSW52YWxpZCBsb2dpbiBjcmVkZW50aWFscycpO1xuXG4gICAgICAvLyAzLiBUZXN0IEFQSSB3aXRoIGludmFsaWQgYXV0aGVudGljYXRpb25cbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgR0VUKHJlcXVlc3QpO1xuICAgICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBBUEkgc2hvdWxkIHN0aWxsIHdvcmsgKHB1YmxpYyBlbmRwb2ludClcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZURhdGEuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsInRlc3RVc2VyIiwiZGVzY3JpYmUiLCJ0ZXN0UG9sbElkIiwiYmVmb3JlQWxsIiwic2V0dXBUZXN0RGF0YWJhc2UiLCJjcmVhdGVUZXN0VXNlciIsImNvbnNvbGUiLCJsb2ciLCJhZnRlckFsbCIsImNsZWFudXBUZXN0RGF0YWJhc2UiLCJiZWZvcmVFYWNoIiwiYWZ0ZXJFYWNoIiwiZnJvbSIsImRlbGV0ZSIsImVxIiwiaXQiLCJ3YXJuIiwicG9sbERhdGEiLCJ0aXRsZSIsIm9wdGlvbnMiLCJ0ZXh0Iiwidm90ZXMiLCJjcmVhdGVkX2J5IiwiaWQiLCJ0b3RhbF92b3RlcyIsInN0YXR1cyIsImRhdGEiLCJjcmVhdGVkUG9sbCIsImVycm9yIiwiY3JlYXRlRXJyb3IiLCJpbnNlcnQiLCJzZWxlY3QiLCJzaW5nbGUiLCJleHBlY3QiLCJ0b0JlTnVsbCIsInRvQmVEZWZpbmVkIiwidG9CZSIsInRyYWNrVGVzdERhdGEiLCJyZXF1ZXN0IiwiTmV4dFJlcXVlc3QiLCJyZXNwb25zZSIsIkdFVCIsInJlc3BvbnNlRGF0YSIsImpzb24iLCJzdWNjZXNzIiwiQXJyYXkiLCJpc0FycmF5IiwicG9sbHMiLCJmb3VuZFBvbGwiLCJmaW5kIiwicG9sbCIsInBvbGxfaWQiLCJwb2xsRXJyb3IiLCJ2b3RlRGF0YSIsInVzZXJfaWQiLCJvcHRpb25faW5kZXgiLCJjcmVhdGVkX2F0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwidm90ZSIsInZvdGVFcnJvciIsInVwZGF0ZWRQb2xsIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJmaW5hbFBvbGwiLCJmaW5hbEVycm9yIiwiYWxsVm90ZXMiLCJ2b3Rlc0Vycm9yIiwidG9IYXZlTGVuZ3RoIiwib3B0aW9uMVZvdGVzIiwiZmlsdGVyIiwibGVuZ3RoIiwib3B0aW9uMlZvdGVzIiwiaW52YWxpZFBvbGxEYXRhIiwibm90IiwibWVzc2FnZSIsInRvQ29udGFpbiIsImF1dGgiLCJzaWduSW5XaXRoUGFzc3dvcmQiLCJlbWFpbCIsInBhc3N3b3JkIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7Ozt5QkFFZ0Y7d0JBQ3JEO3VCQUNGO21DQU1uQjtBQUVQLHlCQUF5QjtBQUN6QixJQUFJQTtBQUNKLElBQUlDO0FBRUpDLElBQUFBLGlCQUFRLEVBQUMsc0NBQXNDO0lBQzdDLElBQUlEO0lBQ0osSUFBSUUsYUFBNEI7SUFFaENDLElBQUFBLGtCQUFTLEVBQUM7UUFDUiwyREFBMkQ7UUFDM0RKLFdBQVcsTUFBTUssSUFBQUEsb0NBQWlCO1FBQ2xDSixXQUFXLE1BQU1LLElBQUFBLGlDQUFjLEVBQUNOO1FBRWhDTyxRQUFRQyxHQUFHLENBQUM7SUFDZDtJQUVBQyxJQUFBQSxpQkFBUSxFQUFDO1FBQ1AsNkNBQTZDO1FBQzdDLE1BQU1DLElBQUFBLHNDQUFtQixFQUFDVjtRQUMxQk8sUUFBUUMsR0FBRyxDQUFDO0lBQ2Q7SUFFQUcsSUFBQUEsbUJBQVUsRUFBQztRQUNULHFCQUFxQjtRQUNyQlIsYUFBYTtJQUNmO0lBRUFTLElBQUFBLGtCQUFTLEVBQUM7UUFDUixJQUFJLENBQUNaLFVBQVU7UUFFZixpREFBaUQ7UUFDakQsSUFBSUcsWUFBWTtZQUNkLE1BQU1ILFNBQVNhLElBQUksQ0FBQyxTQUFTQyxNQUFNLEdBQUdDLEVBQUUsQ0FBQyxNQUFNWjtZQUMvQ0EsYUFBYTtRQUNmO0lBQ0Y7SUFFQUQsSUFBQUEsaUJB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