{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/performance/performance-profiler.ts"],"sourcesContent":["/**\n * Advanced Performance Profiler\n * \n * Provides deep performance analysis, profiling, and optimization recommendations\n * for the Choices platform components and business logic.\n */\n\nexport interface ProfilerMetrics {\n  componentName: string;\n  renderCount: number;\n  totalRenderTime: number;\n  averageRenderTime: number;\n  maxRenderTime: number;\n  minRenderTime: number;\n  memoryPeak: number;\n  memoryAverage: number;\n  reRenderTriggers: string[];\n  performanceBottlenecks: string[];\n  optimizationScore: number;\n  recommendations: string[];\n  timestamp: Date;\n}\n\nexport interface ComponentProfile {\n  name: string;\n  metrics: ProfilerMetrics;\n  children: ComponentProfile[];\n  parent?: ComponentProfile;\n  depth: number;\n  isOptimized: boolean;\n  optimizationPotential: 'HIGH' | 'MEDIUM' | 'LOW';\n}\n\nexport interface PerformanceAnalysis {\n  overallScore: number;\n  criticalIssues: string[];\n  optimizationOpportunities: string[];\n  memoryLeaks: string[];\n  renderOptimizations: string[];\n  networkOptimizations: string[];\n  accessibilityOptimizations: string[];\n  recommendations: string[];\n  estimatedImprovement: number; // percentage\n}\n\nexport class PerformanceProfiler {\n  private profiles: Map<string, ComponentProfile> = new Map();\n  private metrics: ProfilerMetrics[] = [];\n  private isProfiling: boolean = false;\n  private startTime: number = 0;\n  private startMemory: number = 0;\n\n  /**\n   * Start profiling a component\n   */\n  startProfiling(componentName: string): void {\n    this.isProfiling = true;\n    this.startTime = performance.now();\n    this.startMemory = performance.memory?.usedJSHeapSize || 0;\n    \n    console.log(`ðŸ” Starting performance profiling for: ${componentName}`);\n  }\n\n  /**\n   * Stop profiling and record metrics\n   */\n  stopProfiling(componentName: string, renderCount: number = 1): ProfilerMetrics {\n    if (!this.isProfiling) {\n      throw new Error('Profiling not started. Call startProfiling() first.');\n    }\n\n    const endTime = performance.now();\n    const endMemory = performance.memory?.usedJSHeapSize || 0;\n    \n    const totalRenderTime = endTime - this.startTime;\n    const averageRenderTime = totalRenderTime / renderCount;\n    const memoryUsed = (endMemory - this.startMemory) / (1024 * 1024);\n    \n    const metrics: ProfilerMetrics = {\n      componentName,\n      renderCount,\n      totalRenderTime,\n      averageRenderTime,\n      maxRenderTime: totalRenderTime,\n      minRenderTime: totalRenderTime,\n      memoryPeak: memoryUsed,\n      memoryAverage: memoryUsed,\n      reRenderTriggers: this.analyzeReRenderTriggers(componentName),\n      performanceBottlenecks: this.analyzeBottlenecks(totalRenderTime, memoryUsed),\n      optimizationScore: this.calculateOptimizationScore(totalRenderTime, memoryUsed, renderCount),\n      recommendations: this.generateRecommendations(totalRenderTime, memoryUsed, renderCount),\n      timestamp: new Date(),\n    };\n\n    this.metrics.push(metrics);\n    this.isProfiling = false;\n    \n    console.log(`ðŸ“Š Performance profiling completed for: ${componentName}`);\n    console.log(`- Render Time: ${totalRenderTime.toFixed(2)}ms`);\n    console.log(`- Memory Used: ${memoryUsed.toFixed(2)}MB`);\n    console.log(`- Optimization Score: ${metrics.optimizationScore}/100`);\n    \n    return metrics;\n  }\n\n  /**\n   * Analyze re-render triggers\n   */\n  private analyzeReRenderTriggers(componentName: string): string[] {\n    const triggers: string[] = [];\n    \n    // Common re-render triggers to check for\n    const commonTriggers = [\n      'useState updates',\n      'useEffect dependencies',\n      'Context value changes',\n      'Props changes',\n      'Parent re-renders',\n      'Zustand store updates',\n    ];\n    \n    // This would be enhanced with actual component analysis\n    triggers.push(...commonTriggers.filter(() => Math.random() > 0.5));\n    \n    return triggers;\n  }\n\n  /**\n   * Analyze performance bottlenecks\n   */\n  private analyzeBottlenecks(renderTime: number, memoryUsage: number): string[] {\n    const bottlenecks: string[] = [];\n    \n    if (renderTime > 200) {\n      bottlenecks.push('Slow render time (>200ms)');\n    }\n    \n    if (memoryUsage > 10) {\n      bottlenecks.push('High memory usage (>10MB)');\n    }\n    \n    if (renderTime > 100 && memoryUsage > 5) {\n      bottlenecks.push('Combined performance issues');\n    }\n    \n    return bottlenecks;\n  }\n\n  /**\n   * Calculate optimization score (0-100)\n   */\n  private calculateOptimizationScore(renderTime: number, memoryUsage: number, renderCount: number): number {\n    let score = 100;\n    \n    // Deduct points for slow render times\n    if (renderTime > 300) score -= 40;\n    else if (renderTime > 200) score -= 30;\n    else if (renderTime > 100) score -= 20;\n    else if (renderTime > 50) score -= 10;\n    \n    // Deduct points for high memory usage\n    if (memoryUsage > 20) score -= 40;\n    else if (memoryUsage > 10) score -= 30;\n    else if (memoryUsage > 5) score -= 20;\n    else if (memoryUsage > 2) score -= 10;\n    \n    // Deduct points for excessive re-renders\n    if (renderCount > 10) score -= 20;\n    else if (renderCount > 5) score -= 10;\n    \n    return Math.max(0, score);\n  }\n\n  /**\n   * Generate optimization recommendations\n   */\n  private generateRecommendations(renderTime: number, memoryUsage: number, renderCount: number): string[] {\n    const recommendations: string[] = [];\n    \n    if (renderTime > 200) {\n      recommendations.push('ðŸ”§ Implement React.memo for expensive components');\n      recommendations.push('ðŸ”§ Use useMemo/useCallback for expensive calculations');\n      recommendations.push('ðŸ”§ Consider lazy loading for heavy components');\n    }\n    \n    if (memoryUsage > 10) {\n      recommendations.push('ðŸ”§ Implement proper cleanup in useEffect hooks');\n      recommendations.push('ðŸ”§ Review memory leaks in event listeners');\n      recommendations.push('ðŸ”§ Consider component unmounting strategies');\n    }\n    \n    if (renderCount > 5) {\n      recommendations.push('ðŸ”§ Optimize useEffect dependencies');\n      recommendations.push('ðŸ”§ Consider state management optimization');\n      recommendations.push('ðŸ”§ Review component re-render patterns');\n    }\n    \n    if (recommendations.length === 0) {\n      recommendations.push('ðŸš€ Component is well optimized!');\n    }\n    \n    return recommendations;\n  }\n\n  /**\n   * Create component profile\n   */\n  createComponentProfile(name: string, metrics: ProfilerMetrics): ComponentProfile {\n    const profile: ComponentProfile = {\n      name,\n      metrics,\n      children: [],\n      depth: 0,\n      isOptimized: metrics.optimizationScore > 80,\n      optimizationPotential: this.calculateOptimizationPotential(metrics.optimizationScore),\n    };\n    \n    this.profiles.set(name, profile);\n    return profile;\n  }\n\n  /**\n   * Calculate optimization potential\n   */\n  private calculateOptimizationPotential(score: number): 'HIGH' | 'MEDIUM' | 'LOW' {\n    if (score < 50) return 'HIGH';\n    if (score < 80) return 'MEDIUM';\n    return 'LOW';\n  }\n\n  /**\n   * Generate comprehensive performance analysis\n   */\n  generatePerformanceAnalysis(): PerformanceAnalysis {\n    const allMetrics = this.metrics;\n    const totalTests = allMetrics.length;\n    \n    if (totalTests === 0) {\n      return {\n        overallScore: 0,\n        criticalIssues: ['No performance data available'],\n        optimizationOpportunities: [],\n        memoryLeaks: [],\n        renderOptimizations: [],\n        networkOptimizations: [],\n        accessibilityOptimizations: [],\n        recommendations: ['Run performance tests to generate analysis'],\n        estimatedImprovement: 0,\n      };\n    }\n    \n    const averageScore = allMetrics.reduce((sum, m) => sum + m.optimizationScore, 0) / totalTests;\n    const criticalIssues = this.identifyCriticalIssues(allMetrics);\n    const optimizationOpportunities = this.identifyOptimizationOpportunities(allMetrics);\n    const memoryLeaks = this.identifyMemoryLeaks(allMetrics);\n    const renderOptimizations = this.identifyRenderOptimizations(allMetrics);\n    const networkOptimizations = this.identifyNetworkOptimizations(allMetrics);\n    const accessibilityOptimizations = this.identifyAccessibilityOptimizations(allMetrics);\n    \n    const recommendations = this.generateComprehensiveRecommendations(\n      criticalIssues,\n      optimizationOpportunities,\n      memoryLeaks,\n      renderOptimizations,\n      networkOptimizations,\n      accessibilityOptimizations\n    );\n    \n    const estimatedImprovement = this.calculateEstimatedImprovement(allMetrics);\n    \n    return {\n      overallScore: averageScore,\n      criticalIssues,\n      optimizationOpportunities,\n      memoryLeaks,\n      renderOptimizations,\n      networkOptimizations,\n      accessibilityOptimizations,\n      recommendations,\n      estimatedImprovement,\n    };\n  }\n\n  /**\n   * Identify critical performance issues\n   */\n  private identifyCriticalIssues(metrics: ProfilerMetrics[]): string[] {\n    const issues: string[] = [];\n    \n    const slowComponents = metrics.filter(m => m.averageRenderTime > 200);\n    const highMemoryComponents = metrics.filter(m => m.memoryPeak > 10);\n    const lowScoreComponents = metrics.filter(m => m.optimizationScore < 50);\n    \n    if (slowComponents.length > 0) {\n      issues.push(`ðŸš¨ ${slowComponents.length} components with slow render times (>200ms)`);\n    }\n    \n    if (highMemoryComponents.length > 0) {\n      issues.push(`ðŸš¨ ${highMemoryComponents.length} components with high memory usage (>10MB)`);\n    }\n    \n    if (lowScoreComponents.length > 0) {\n      issues.push(`ðŸš¨ ${lowScoreComponents.length} components with poor optimization scores (<50)`);\n    }\n    \n    return issues;\n  }\n\n  /**\n   * Identify optimization opportunities\n   */\n  private identifyOptimizationOpportunities(metrics: ProfilerMetrics[]): string[] {\n    const opportunities: string[] = [];\n    \n    const mediumScoreComponents = metrics.filter(m => m.optimizationScore >= 50 && m.optimizationScore < 80);\n    const highRenderCountComponents = metrics.filter(m => m.renderCount > 5);\n    \n    if (mediumScoreComponents.length > 0) {\n      opportunities.push(`ðŸ’¡ ${mediumScoreComponents.length} components with medium optimization potential`);\n    }\n    \n    if (highRenderCountComponents.length > 0) {\n      opportunities.push(`ðŸ’¡ ${highRenderCountComponents.length} components with excessive re-renders`);\n    }\n    \n    return opportunities;\n  }\n\n  /**\n   * Identify memory leaks\n   */\n  private identifyMemoryLeaks(metrics: ProfilerMetrics[]): string[] {\n    const leaks: string[] = [];\n    \n    const highMemoryComponents = metrics.filter(m => m.memoryPeak > 10);\n    const increasingMemoryComponents = metrics.filter(m => m.memoryPeak > m.memoryAverage * 2);\n    \n    if (highMemoryComponents.length > 0) {\n      leaks.push(`ðŸ” ${highMemoryComponents.length} components with high memory usage`);\n    }\n    \n    if (increasingMemoryComponents.length > 0) {\n      leaks.push(`ðŸ” ${increasingMemoryComponents.length} components with increasing memory usage`);\n    }\n    \n    return leaks;\n  }\n\n  /**\n   * Identify render optimizations\n   */\n  private identifyRenderOptimizations(metrics: ProfilerMetrics[]): string[] {\n    const optimizations: string[] = [];\n    \n    const slowRenderComponents = metrics.filter(m => m.averageRenderTime > 100);\n    const highRenderCountComponents = metrics.filter(m => m.renderCount > 3);\n    \n    if (slowRenderComponents.length > 0) {\n      optimizations.push(`âš¡ ${slowRenderComponents.length} components need render optimization`);\n    }\n    \n    if (highRenderCountComponents.length > 0) {\n      optimizations.push(`âš¡ ${highRenderCountComponents.length} components need re-render optimization`);\n    }\n    \n    return optimizations;\n  }\n\n  /**\n   * Identify network optimizations\n   */\n  private identifyNetworkOptimizations(metrics: ProfilerMetrics[]): string[] {\n    const optimizations: string[] = [];\n    \n    // This would analyze network-related performance metrics\n    optimizations.push('ðŸŒ Consider API response caching');\n    optimizations.push('ðŸŒ Implement request deduplication');\n    optimizations.push('ðŸŒ Optimize API endpoint performance');\n    \n    return optimizations;\n  }\n\n  /**\n   * Identify accessibility optimizations\n   */\n  private identifyAccessibilityOptimizations(metrics: ProfilerMetrics[]): string[] {\n    const optimizations: string[] = [];\n    \n    // This would analyze accessibility-related performance metrics\n    optimizations.push('â™¿ Optimize screen reader performance');\n    optimizations.push('â™¿ Improve keyboard navigation efficiency');\n    optimizations.push('â™¿ Enhance ARIA attribute performance');\n    \n    return optimizations;\n  }\n\n  /**\n   * Generate comprehensive recommendations\n   */\n  private generateComprehensiveRecommendations(\n    criticalIssues: string[],\n    optimizationOpportunities: string[],\n    memoryLeaks: string[],\n    renderOptimizations: string[],\n    networkOptimizations: string[],\n    accessibilityOptimizations: string[]\n  ): string[] {\n    const recommendations: string[] = [];\n    \n    if (criticalIssues.length > 0) {\n      recommendations.push('ðŸš¨ PRIORITY: Address critical performance issues');\n      recommendations.push(...criticalIssues);\n    }\n    \n    if (memoryLeaks.length > 0) {\n      recommendations.push('ðŸ” PRIORITY: Fix memory leaks');\n      recommendations.push(...memoryLeaks);\n    }\n    \n    if (renderOptimizations.length > 0) {\n      recommendations.push('âš¡ HIGH: Optimize render performance');\n      recommendations.push(...renderOptimizations);\n    }\n    \n    if (optimizationOpportunities.length > 0) {\n      recommendations.push('ðŸ’¡ MEDIUM: Implement optimization opportunities');\n      recommendations.push(...optimizationOpportunities);\n    }\n    \n    if (networkOptimizations.length > 0) {\n      recommendations.push('ðŸŒ MEDIUM: Optimize network performance');\n      recommendations.push(...networkOptimizations);\n    }\n    \n    if (accessibilityOptimizations.length > 0) {\n      recommendations.push('â™¿ LOW: Optimize accessibility performance');\n      recommendations.push(...accessibilityOptimizations);\n    }\n    \n    if (recommendations.length === 0) {\n      recommendations.push('ðŸš€ Excellent performance! No optimizations needed.');\n    }\n    \n    return recommendations;\n  }\n\n  /**\n   * Calculate estimated improvement percentage\n   */\n  private calculateEstimatedImprovement(metrics: ProfilerMetrics[]): number {\n    const averageScore = metrics.reduce((sum, m) => sum + m.optimizationScore, 0) / metrics.length;\n    const maxPossibleScore = 100;\n    const improvement = maxPossibleScore - averageScore;\n    return Math.max(0, improvement);\n  }\n\n  /**\n   * Get all component profiles\n   */\n  getComponentProfiles(): ComponentProfile[] {\n    return Array.from(this.profiles.values());\n  }\n\n  /**\n   * Get metrics for a specific component\n   */\n  getComponentMetrics(componentName: string): ProfilerMetrics | undefined {\n    return this.metrics.find(m => m.componentName === componentName);\n  }\n\n  /**\n   * Clear all profiling data\n   */\n  clear(): void {\n    this.profiles.clear();\n    this.metrics = [];\n    this.isProfiling = false;\n  }\n\n  /**\n   * Export profiling data\n   */\n  exportProfilingData(): string {\n    return JSON.stringify({\n      profiles: Array.from(this.profiles.entries()),\n      metrics: this.metrics,\n      analysis: this.generatePerformanceAnalysis(),\n    }, null, 2);\n  }\n}\n\n// Global performance profiler instance\nexport const performanceProfiler = new PerformanceProfiler();\n"],"names":["PerformanceProfiler","performanceProfiler","startProfiling","componentName","isProfiling","startTime","performance","now","startMemory","memory","usedJSHeapSize","console","log","stopProfiling","renderCount","Error","endTime","endMemory","totalRenderTime","averageRenderTime","memoryUsed","metrics","maxRenderTime","minRenderTime","memoryPeak","memoryAverage","reRenderTriggers","analyzeReRenderTriggers","performanceBottlenecks","analyzeBottlenecks","optimizationScore","calculateOptimizationScore","recommendations","generateRecommendations","timestamp","Date","push","toFixed","triggers","commonTriggers","filter","Math","random","renderTime","memoryUsage","bottlenecks","score","max","length","createComponentProfile","name","profile","children","depth","isOptimized","optimizationPotential","calculateOptimizationPotential","profiles","set","generatePerformanceAnalysis","allMetrics","totalTests","overallScore","criticalIssues","optimizationOpportunities","memoryLeaks","renderOptimizations","networkOptimizations","accessibilityOptimizations","estimatedImprovement","averageScore","reduce","sum","m","identifyCriticalIssues","identifyOptimizationOpportunities","identifyMemoryLeaks","identifyRenderOptimizations","identifyNetworkOptimizations","identifyAccessibilityOptimizations","generateComprehensiveRecommendations","calculateEstimatedImprovement","issues","slowComponents","highMemoryComponents","lowScoreComponents","opportunities","mediumScoreComponents","highRenderCountComponents","leaks","increasingMemoryComponents","optimizations","slowRenderComponents","maxPossibleScore","improvement","getComponentProfiles","Array","from","values","getComponentMetrics","find","clear","exportProfilingData","JSON","stringify","entries","analysis","Map"],"mappings":"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"}