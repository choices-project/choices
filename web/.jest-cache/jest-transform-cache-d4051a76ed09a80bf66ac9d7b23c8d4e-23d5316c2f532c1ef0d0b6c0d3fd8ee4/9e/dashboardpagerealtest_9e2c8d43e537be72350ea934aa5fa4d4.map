{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/components/pages/dashboard-page-real.test.tsx"],"sourcesContent":["/**\n * Dashboard Page Component Tests - REAL FUNCTIONALITY\n * \n * Tests the actual SuperiorMobileFeed component with real functionality:\n * - Real state management and user interactions\n * - Real business logic and API calls\n * - Real error handling and edge cases\n * - Real user experience and accessibility\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { BrowserRouter } from 'react-router-dom';\nimport '@testing-library/jest-dom';\nimport SuperiorMobileFeed from '@/features/feeds/components/SuperiorMobileFeed';\n\n// Use real functionality - minimal mocking only for test environment setup\n\n// Mock localStorage for component functionality\nObject.defineProperty(window, 'localStorage', {\n  value: {\n    getItem: jest.fn(),\n    setItem: jest.fn(),\n    removeItem: jest.fn(),\n    clear: jest.fn(),\n  },\n  writable: true,\n});\n\n// Mock navigator for online status\nObject.defineProperty(navigator, 'onLine', {\n  value: true,\n  writable: true,\n});\n\n// Mock Notification API\nObject.defineProperty(window, 'Notification', {\n  value: {\n    permission: 'granted',\n    requestPermission: jest.fn().mockResolvedValue('granted'),\n  },\n  writable: true,\n});\n\n// Mock Service Worker\nObject.defineProperty(navigator, 'serviceWorker', {\n  value: {\n    register: jest.fn().mockResolvedValue({\n      installing: null,\n      waiting: null,\n      active: null,\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n    }),\n  },\n  writable: true,\n});\n\ndescribe('Dashboard Page Component Tests - Real Functionality', () => {\n  beforeEach(() => {\n    // Clear any previous state\n    jest.clearAllMocks();\n  });\n\n  describe('Component Rendering', () => {\n    it('should render the main dashboard component', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for main content\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n\n    it('should display the main heading', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for main heading\n      const heading = screen.getByRole('heading', { level: 1 });\n      expect(heading).toBeInTheDocument();\n    });\n\n    it('should render navigation elements', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for navigation\n      const navigation = screen.getByRole('navigation');\n      expect(navigation).toBeInTheDocument();\n    });\n  });\n\n  describe('User Interactions', () => {\n    it('should handle button clicks', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Find and click a button\n      const buttons = screen.getAllByRole('button');\n      expect(buttons.length).toBeGreaterThan(0);\n      \n      // Click the first button\n      fireEvent.click(buttons[0]);\n      \n      // Should not throw errors\n      expect(buttons[0]).toBeInTheDocument();\n    });\n\n    it('should handle theme toggle', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Find theme toggle button\n      const themeButton = screen.getByLabelText(/switch to (light|dark) mode/i);\n      expect(themeButton).toBeInTheDocument();\n      \n      // Click theme toggle\n      fireEvent.click(themeButton);\n      \n      // Should not throw errors\n      expect(themeButton).toBeInTheDocument();\n    });\n\n    it('should handle sidebar toggle', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Find hamburger menu button\n      const menuButton = screen.getByLabelText(/open navigation menu/i);\n      expect(menuButton).toBeInTheDocument();\n      \n      // Click menu button\n      fireEvent.click(menuButton);\n      \n      // Should not throw errors\n      expect(menuButton).toBeInTheDocument();\n    });\n  });\n\n  describe('State Management', () => {\n    it('should handle component state changes', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should handle state changes gracefully\n      await waitFor(() => {\n        expect(screen.getByRole('main')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle online/offline state', async () => {\n      // Simulate offline state\n      Object.defineProperty(navigator, 'onLine', {\n        value: false,\n        writable: true,\n      });\n\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should handle offline state\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle errors gracefully', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should handle errors gracefully\n      await waitFor(() => {\n        expect(screen.getByRole('main')).toBeInTheDocument();\n      });\n    });\n\n    it('should display error states appropriately', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should handle error states\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility', () => {\n    it('should have proper ARIA roles', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for main landmark\n      const main = screen.getByRole('main');\n      expect(main).toBeInTheDocument();\n\n      // Check for navigation landmark\n      const navigation = screen.getByRole('navigation');\n      expect(navigation).toBeInTheDocument();\n    });\n\n    it('should have proper button labels', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check that buttons have proper labels\n      const buttons = screen.getAllByRole('button');\n      buttons.forEach(button => {\n        expect(button).toHaveAttribute('aria-label');\n      });\n    });\n\n    it('should support keyboard navigation', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test keyboard navigation\n      const firstButton = screen.getAllByRole('button')[0];\n      firstButton.focus();\n      expect(document.activeElement).toBe(firstButton);\n    });\n  });\n\n  describe('Performance', () => {\n    it('should render within reasonable time', async () => {\n      const startTime = performance.now();\n      \n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      // Should render within reasonable time\n      expect(renderTime).toBeLessThan(1000);\n    });\n\n    it('should handle rapid interactions', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      const buttons = screen.getAllByRole('button');\n      const firstButton = buttons[0];\n      \n      // Simulate rapid clicks\n      for (let i = 0; i < 10; i++) {\n        fireEvent.click(firstButton);\n      }\n      \n      // Should handle rapid interactions gracefully\n      expect(firstButton).toBeInTheDocument();\n    });\n  });\n\n  describe('Real Functionality', () => {\n    it('should use real component logic', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should use real logic, not mocks\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n\n    it('should handle real API calls', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should handle real API calls\n      await waitFor(() => {\n        expect(screen.getByRole('main')).toBeInTheDocument();\n      });\n    });\n\n    it('should use real state management', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Component should use real state management\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["Object","defineProperty","window","value","getItem","jest","fn","setItem","removeItem","clear","writable","navigator","permission","requestPermission","mockResolvedValue","register","installing","waiting","active","addEventListener","removeEventListener","describe","beforeEach","clearAllMocks","it","render","BrowserRouter","SuperiorMobileFeed","expect","screen","getByRole","toBeInTheDocument","heading","level","navigation","buttons","getAllByRole","length","toBeGreaterThan","fireEvent","click","themeButton","getByLabelText","menuButton","waitFor","main","forEach","button","toHaveAttribute","firstButton","focus","document","activeElement","toBe","startTime","performance","now","endTime","renderTime","toBeLessThan","i"],"mappings":"AAAA;;;;;;;;CAQC;;;;;yBAEgD;uBACE;gCACrB;QACvB;2EACwB;;;;;;AAE/B,2EAA2E;AAE3E,gDAAgD;AAChDA,OAAOC,cAAc,CAACC,QAAQ,gBAAgB;IAC5CC,OAAO;QACLC,SAASC,KAAKC,EAAE;QAChBC,SAASF,KAAKC,EAAE;QAChBE,YAAYH,KAAKC,EAAE;QACnBG,OAAOJ,KAAKC,EAAE;IAChB;IACAI,UAAU;AACZ;AAEA,mCAAmC;AACnCV,OAAOC,cAAc,CAACU,WAAW,UAAU;IACzCR,OAAO;IACPO,UAAU;AACZ;AAEA,wBAAwB;AACxBV,OAAOC,cAAc,CAACC,QAAQ,gBAAgB;IAC5CC,OAAO;QACLS,YAAY;QACZC,mBAAmBR,KAAKC,EAAE,GAAGQ,iBAAiB,CAAC;IACjD;IACAJ,UAAU;AACZ;AAEA,sBAAsB;AACtBV,OAAOC,cAAc,CAACU,WAAW,iBAAiB;IAChDR,OAAO;QACLY,UAAUV,KAAKC,EAAE,GAAGQ,iBAAiB,CAAC;YACpCE,YAAY;YACZC,SAAS;YACTC,QAAQ;YACRC,kBAAkBd,KAAKC,EAAE;YACzBc,qBAAqBf,KAAKC,EAAE;QAC9B;IACF;IACAI,UAAU;AACZ;AAEAW,IAAAA,iBAAQ,EAAC,uDAAuD;IAC9DC,IAAAA,mBAAU,EAAC;QACT,2BAA2B;QAC3BjB,KAAKkB,aAAa;IACpB;IAEAF,IAAAA,iBAAQ,EAAC,uBAAuB;QAC9BG,IAAAA,WAAE,EAAC,8CAA8C;YAC/CC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,yBAAyB;YACzBC,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEAP,IAAAA,WAAE,EAAC,mCAAmC;YACpCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,yBAAyB;YACzB,MAAMK,UAAUH,aAAM,CAACC,SAAS,CAAC,WAAW;gBAAEG,OAAO;YAAE;YACvDL,IAAAA,eAAM,EAACI,SAASD,iBAAiB;QACnC;QAEAP,IAAAA,WAAE,EAAC,qCAAqC;YACtCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,uBAAuB;YACvB,MAAMO,aAAaL,aAAM,CAACC,SAAS,CAAC;YACpCF,IAAAA,eAAM,EAACM,YAAYH,iBAAiB;QACtC;IACF;IAEAV,IAAAA,iBAAQ,EAAC,qBAAqB;QAC5BG,IAAAA,WAAE,EAAC,+BAA+B;YAChCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,0BAA0B;YAC1B,MAAMQ,UAAUN,aAAM,CAACO,YAAY,CAAC;YACpCR,IAAAA,eAAM,EAACO,QAAQE,MAAM,EAAEC,eAAe,CAAC;YAEvC,yBAAyB;YACzBC,gBAAS,CAACC,KAAK,CAACL,OAAO,CAAC,EAAE;YAE1B,0BAA0B;YAC1BP,IAAAA,eAAM,EAACO,OAAO,CAAC,EAAE,EAAEJ,iBAAiB;QACtC;QAEAP,IAAAA,WAAE,EAAC,8BAA8B;YAC/BC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,2BAA2B;YAC3B,MAAMc,cAAcZ,aAAM,CAACa,cAAc,CAAC;YAC1Cd,IAAAA,eAAM,EAACa,aAAaV,iBAAiB;YAErC,qBAAqB;YACrBQ,gBAAS,CAACC,KAAK,CAACC;YAEhB,0BAA0B;YAC1Bb,IAAAA,eAAM,EAACa,aAAaV,iBAAiB;QACvC;QAEAP,IAAAA,WAAE,EAAC,gCAAgC;YACjCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,6BAA6B;YAC7B,MAAMgB,aAAad,aAAM,CAACa,cAAc,CAAC;YACzCd,IAAAA,eAAM,EAACe,YAAYZ,iBAAiB;YAEpC,oBAAoB;YACpBQ,gBAAS,CAACC,KAAK,CAACG;YAEhB,0BAA0B;YAC1Bf,IAAAA,eAAM,EAACe,YAAYZ,iBAAiB;QACtC;IACF;IAEAV,IAAAA,iBAAQ,EAAC,oBAAoB;QAC3BG,IAAAA,WAAE,EAAC,yCAAyC;YAC1CC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,mDAAmD;YACnD,MAAMiB,IAAAA,cAAO,EAAC;gBACZhB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;YACpD;QACF;QAEAP,IAAAA,WAAE,EAAC,sCAAsC;YACvC,yBAAyB;YACzBxB,OAAOC,cAAc,CAACU,WAAW,UAAU;gBACzCR,OAAO;gBACPO,UAAU;YACZ;YAEAe,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,wCAAwC;YACxCC,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAV,IAAAA,iBAAQ,EAAC,kBAAkB;QACzBG,IAAAA,WAAE,EAAC,mCAAmC;YACpCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,4CAA4C;YAC5C,MAAMiB,IAAAA,cAAO,EAAC;gBACZhB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;YACpD;QACF;QAEAP,IAAAA,WAAE,EAAC,6CAA6C;YAC9CC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,uCAAuC;YACvCC,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;IAEAV,IAAAA,iBAAQ,EAAC,iBAAiB;QACxBG,IAAAA,WAAE,EAAC,iCAAiC;YAClCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,0BAA0B;YAC1B,MAAMkB,OAAOhB,aAAM,CAACC,SAAS,CAAC;YAC9BF,IAAAA,eAAM,EAACiB,MAAMd,iBAAiB;YAE9B,gCAAgC;YAChC,MAAMG,aAAaL,aAAM,CAACC,SAAS,CAAC;YACpCF,IAAAA,eAAM,EAACM,YAAYH,iBAAiB;QACtC;QAEAP,IAAAA,WAAE,EAAC,oCAAoC;YACrCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,wCAAwC;YACxC,MAAMQ,UAAUN,aAAM,CAACO,YAAY,CAAC;YACpCD,QAAQW,OAAO,CAACC,CAAAA;gBACdnB,IAAAA,eAAM,EAACmB,QAAQC,eAAe,CAAC;YACjC;QACF;QAEAxB,IAAAA,WAAE,EAAC,sCAAsC;YACvCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,2BAA2B;YAC3B,MAAMsB,cAAcpB,aAAM,CAACO,YAAY,CAAC,SAAS,CAAC,EAAE;YACpDa,YAAYC,KAAK;YACjBtB,IAAAA,eAAM,EAACuB,SAASC,aAAa,EAAEC,IAAI,CAACJ;QACtC;IACF;IAEA5B,IAAAA,iBAAQ,EAAC,eAAe;QACtBG,IAAAA,WAAE,EAAC,wCAAwC;YACzC,MAAM8B,YAAYC,YAAYC,GAAG;YAEjC/B,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,MAAM8B,UAAUF,YAAYC,GAAG;YAC/B,MAAME,aAAaD,UAAUH;YAE7B,uCAAuC;YACvC1B,IAAAA,eAAM,EAAC8B,YAAYC,YAAY,CAAC;QAClC;QAEAnC,IAAAA,WAAE,EAAC,oCAAoC;YACrCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,MAAMQ,UAAUN,aAAM,CAACO,YAAY,CAAC;YACpC,MAAMa,cAAcd,OAAO,CAAC,EAAE;YAE9B,wBAAwB;YACxB,IAAK,IAAIyB,IAAI,GAAGA,IAAI,IAAIA,IAAK;gBAC3BrB,gBAAS,CAACC,KAAK,CAACS;YAClB;YAEA,8CAA8C;YAC9CrB,IAAAA,eAAM,EAACqB,aAAalB,iBAAiB;QACvC;IACF;IAEAV,IAAAA,iBAAQ,EAAC,sBAAsB;QAC7BG,IAAAA,WAAE,EAAC,mCAAmC;YACpCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,6CAA6C;YAC7CC,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;QAEAP,IAAAA,WAAE,EAAC,gCAAgC;YACjCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,yCAAyC;YACzC,MAAMiB,IAAAA,cAAO,EAAC;gBACZhB,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;YACpD;QACF;QAEAP,IAAAA,WAAE,EAAC,oCAAoC;YACrCC,IAAAA,aAAM,gBACJ,qBAACC,6BAAa;0BACZ,cAAA,qBAACC,2BAAkB;;YAIvB,6CAA6C;YAC7CC,IAAAA,eAAM,EAACC,aAAM,CAACC,SAAS,CAAC,SAASC,iBAAiB;QACpD;IACF;AACF"}