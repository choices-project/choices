7d8e4ec7a162e225b62b247bef1e2769
/**
 * Approval Voting Strategy
 * 
 * Implements approval voting where voters can approve (vote for) multiple options.
 * Results show approval scores for each option, with the highest scoring option winning.
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "ApprovalStrategy", {
    enumerable: true,
    get: function() {
        return ApprovalStrategy;
    }
});
const _logger = require("../../utils/logger");
class ApprovalStrategy {
    getVotingMethod() {
        return "approval";
    }
    async validateVote(request, poll) {
        try {
            const voteData = request.voteData;
            // Validate approvals array exists and is not empty
            if (!voteData.approvals || !Array.isArray(voteData.approvals)) {
                return {
                    valid: false,
                    isValid: false,
                    error: "Approval votes must be an array",
                    errors: [
                        "Approval votes must be an array"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate approvals array is not empty
            if (voteData.approvals.length === 0) {
                return {
                    valid: false,
                    isValid: false,
                    error: "At least one approval is required",
                    errors: [
                        "At least one approval is required"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate all approvals are valid integers
            for (const approval of voteData.approvals){
                if (typeof approval !== "number" || !Number.isInteger(approval)) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Approval votes must be integers",
                        errors: [
                            "Approval votes must be integers"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                if (approval < 0 || approval >= poll.options.length) {
                    return {
                        valid: false,
                        isValid: false,
                        error: "Invalid option selected",
                        errors: [
                            "Invalid option selected"
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
            }
            // Check for duplicate approvals
            const uniqueApprovals = new Set(voteData.approvals);
            if (uniqueApprovals.size !== voteData.approvals.length) {
                return {
                    valid: false,
                    isValid: false,
                    error: "Duplicate approvals are not allowed",
                    errors: [
                        "Duplicate approvals are not allowed"
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Check maximum approvals limit
            const maxApprovals = poll.maxChoices || poll.options.length;
            if (voteData.approvals.length > maxApprovals) {
                return {
                    valid: false,
                    isValid: false,
                    error: `Maximum ${maxApprovals} approvals allowed`,
                    errors: [
                        `Maximum ${maxApprovals} approvals allowed`
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            (0, _logger.devLog)("Approval vote validated successfully", {
                pollId: request.pollId,
                approvals: voteData.approvals,
                userId: request.userId
            });
            return {
                valid: true,
                isValid: true,
                requiresAuthentication: false,
                requiresTokens: false
            };
        } catch (error) {
            (0, _logger.devLog)("Approval vote validation error:", error);
            return {
                valid: false,
                isValid: false,
                error: "Approval vote validation failed",
                errors: [
                    "Approval vote validation failed"
                ],
                requiresAuthentication: false,
                requiresTokens: false
            };
        }
    }
    async processVote(request, poll) {
        try {
            const voteData = request.voteData;
            // Create vote data for storage
            const voteRecord = {
                id: `vote_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                pollId: request.pollId,
                userId: request.userId,
                voteData: {
                    approvals: voteData.approvals
                },
                timestamp: new Date().toISOString(),
                ipAddress: request.ipAddress,
                userAgent: request.userAgent
            };
            (0, _logger.devLog)("Approval vote processed successfully", {
                pollId: request.pollId,
                userId: request.userId,
                approvals: voteData.approvals,
                voteId: voteRecord.id
            });
            return {
                success: true,
                voteId: voteRecord.id,
                message: "Vote recorded successfully",
                pollId: request.pollId
            };
        } catch (error) {
            (0, _logger.devLog)("Approval vote processing error:", error);
            return {
                success: false,
                error: "Failed to process approval vote",
                message: "Failed to process approval vote",
                pollId: request.pollId
            };
        }
    }
    async calculateResults(poll, votes) {
        try {
            const startTime = Date.now();
            // Initialize tracking objects
            const approvalScores = {};
            const optionVotes = {};
            const approvalPercentages = {};
            const optionPercentages = {};
            // Initialize all options with zero scores
            poll.options.forEach((option)=>{
                approvalScores[option.id] = 0;
                optionVotes[option.id] = 0;
                approvalPercentages[option.id] = 0;
                optionPercentages[option.id] = 0;
            });
            // Process each vote
            votes.forEach((vote)=>{
                if (vote.voteData.approvals) {
                    vote.voteData.approvals.forEach((approval)=>{
                        const optionId = poll.options[approval]?.id;
                        if (optionId) {
                            approvalScores[optionId]++;
                            optionVotes[optionId]++;
                        }
                    });
                }
            });
            const totalVotes = votes.length;
            // Calculate percentages
            if (totalVotes > 0) {
                Object.keys(approvalScores).forEach((optionId)=>{
                    const approvalScore = approvalScores[optionId];
                    const optionVote = optionVotes[optionId];
                    if (approvalScore !== undefined) {
                        approvalPercentages[optionId] = approvalScore / totalVotes * 100;
                    }
                    if (optionVote !== undefined) {
                        optionPercentages[optionId] = optionVote / totalVotes * 100;
                    }
                });
            }
            // Find winner (highest approval score)
            let winner;
            let winnerVotes = 0;
            let winnerPercentage = 0;
            if (totalVotes > 0) {
                Object.entries(approvalScores).forEach(([optionId, score])=>{
                    if (score > winnerVotes) {
                        winner = optionId;
                        winnerVotes = score;
                        winnerPercentage = approvalPercentages[optionId] || 0;
                    }
                });
            }
            const results = {
                winner,
                winnerVotes,
                winnerPercentage,
                optionVotes,
                optionPercentages,
                abstentions: 0,
                abstentionPercentage: 0
            };
            (0, _logger.devLog)("Approval results calculated", {
                pollId: poll.id,
                totalVotes,
                winner,
                winnerVotes,
                winnerPercentage,
                calculationTime: Date.now() - startTime
            });
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes,
                participationRate: totalVotes / 100,
                results,
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: Date.now() - startTime,
                    method: "approval"
                }
            };
        } catch (error) {
            (0, _logger.devLog)("Approval results calculation error:", error);
            // Return empty results on error
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes: 0,
                participationRate: 0,
                results: {
                    winner: undefined,
                    winnerVotes: 0,
                    winnerPercentage: 0,
                    optionVotes: {},
                    optionPercentages: {},
                    abstentions: 0,
                    abstentionPercentage: 0
                },
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: 0,
                    error: error instanceof Error ? error.message : "Unknown error"
                }
            };
        }
    }
    getConfiguration() {
        return {
            method: "approval",
            description: "Voters can approve multiple options",
            allowsMultipleSelections: true,
            requiresRanking: false,
            maxSelections: "unlimited"
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvdm90ZS9zdHJhdGVnaWVzL2FwcHJvdmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXBwcm92YWwgVm90aW5nIFN0cmF0ZWd5XG4gKiBcbiAqIEltcGxlbWVudHMgYXBwcm92YWwgdm90aW5nIHdoZXJlIHZvdGVycyBjYW4gYXBwcm92ZSAodm90ZSBmb3IpIG11bHRpcGxlIG9wdGlvbnMuXG4gKiBSZXN1bHRzIHNob3cgYXBwcm92YWwgc2NvcmVzIGZvciBlYWNoIG9wdGlvbiwgd2l0aCB0aGUgaGlnaGVzdCBzY29yaW5nIG9wdGlvbiB3aW5uaW5nLlxuICogXG4gKiBDcmVhdGVkOiBTZXB0ZW1iZXIgMTUsIDIwMjVcbiAqIFVwZGF0ZWQ6IFNlcHRlbWJlciAxNSwgMjAyNVxuICovXG5cbmltcG9ydCB7IGRldkxvZyB9IGZyb20gJ0AvbGliL3V0aWxzL2xvZ2dlcic7XG5pbXBvcnQgeyB3aXRoT3B0aW9uYWwgfSBmcm9tICdAL2xpYi91dGlscy9vYmplY3RzJztcblxuaW1wb3J0IHR5cGUgeyBcbiAgVm90aW5nU3RyYXRlZ3ksIFxuICBWb3RlUmVxdWVzdCwgXG4gIFZvdGVSZXNwb25zZSwgXG4gIFZvdGVWYWxpZGF0aW9uLCBcbiAgUG9sbERhdGEsIFxuICBWb3RlRGF0YSwgXG4gIFJlc3VsdHNEYXRhLFxuICBWb3RpbmdNZXRob2QsXG4gIFBvbGxSZXN1bHRzXG59IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIEFwcHJvdmFsU3RyYXRlZ3kgaW1wbGVtZW50cyBWb3RpbmdTdHJhdGVneSB7XG4gIFxuICBnZXRWb3RpbmdNZXRob2QoKTogVm90aW5nTWV0aG9kIHtcbiAgICByZXR1cm4gJ2FwcHJvdmFsJztcbiAgfVxuXG4gIGFzeW5jIHZhbGlkYXRlVm90ZShyZXF1ZXN0OiBWb3RlUmVxdWVzdCwgcG9sbDogUG9sbERhdGEpOiBQcm9taXNlPFZvdGVWYWxpZGF0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHZvdGVEYXRhID0gcmVxdWVzdC52b3RlRGF0YTtcblxuICAgICAgLy8gVmFsaWRhdGUgYXBwcm92YWxzIGFycmF5IGV4aXN0cyBhbmQgaXMgbm90IGVtcHR5XG4gICAgICBpZiAoIXZvdGVEYXRhLmFwcHJvdmFscyB8fCAhQXJyYXkuaXNBcnJheSh2b3RlRGF0YS5hcHByb3ZhbHMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQXBwcm92YWwgdm90ZXMgbXVzdCBiZSBhbiBhcnJheScsXG4gICAgICAgICAgZXJyb3JzOiBbJ0FwcHJvdmFsIHZvdGVzIG11c3QgYmUgYW4gYXJyYXknXSxcbiAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgYXBwcm92YWxzIGFycmF5IGlzIG5vdCBlbXB0eVxuICAgICAgaWYgKHZvdGVEYXRhLmFwcHJvdmFscy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdBdCBsZWFzdCBvbmUgYXBwcm92YWwgaXMgcmVxdWlyZWQnLFxuICAgICAgICAgIGVycm9yczogWydBdCBsZWFzdCBvbmUgYXBwcm92YWwgaXMgcmVxdWlyZWQnXSxcbiAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgYWxsIGFwcHJvdmFscyBhcmUgdmFsaWQgaW50ZWdlcnNcbiAgICAgIGZvciAoY29uc3QgYXBwcm92YWwgb2Ygdm90ZURhdGEuYXBwcm92YWxzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXBwcm92YWwgIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKGFwcHJvdmFsKSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiAnQXBwcm92YWwgdm90ZXMgbXVzdCBiZSBpbnRlZ2VycycsXG4gICAgICAgICAgICBlcnJvcnM6IFsnQXBwcm92YWwgdm90ZXMgbXVzdCBiZSBpbnRlZ2VycyddLFxuICAgICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFwcHJvdmFsIDwgMCB8fCBhcHByb3ZhbCA+PSBwb2xsLm9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIG9wdGlvbiBzZWxlY3RlZCcsXG4gICAgICAgICAgICBlcnJvcnM6IFsnSW52YWxpZCBvcHRpb24gc2VsZWN0ZWQnXSxcbiAgICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIGFwcHJvdmFsc1xuICAgICAgY29uc3QgdW5pcXVlQXBwcm92YWxzID0gbmV3IFNldCh2b3RlRGF0YS5hcHByb3ZhbHMpO1xuICAgICAgaWYgKHVuaXF1ZUFwcHJvdmFscy5zaXplICE9PSB2b3RlRGF0YS5hcHByb3ZhbHMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnRHVwbGljYXRlIGFwcHJvdmFscyBhcmUgbm90IGFsbG93ZWQnLFxuICAgICAgICAgIGVycm9yczogWydEdXBsaWNhdGUgYXBwcm92YWxzIGFyZSBub3QgYWxsb3dlZCddLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBtYXhpbXVtIGFwcHJvdmFscyBsaW1pdFxuICAgICAgY29uc3QgbWF4QXBwcm92YWxzID0gcG9sbC5tYXhDaG9pY2VzIHx8IHBvbGwub3B0aW9ucy5sZW5ndGg7XG4gICAgICBpZiAodm90ZURhdGEuYXBwcm92YWxzLmxlbmd0aCA+IG1heEFwcHJvdmFscykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogYE1heGltdW0gJHttYXhBcHByb3ZhbHN9IGFwcHJvdmFscyBhbGxvd2VkYCxcbiAgICAgICAgICBlcnJvcnM6IFtgTWF4aW11bSAke21heEFwcHJvdmFsc30gYXBwcm92YWxzIGFsbG93ZWRgXSxcbiAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZGV2TG9nKCdBcHByb3ZhbCB2b3RlIHZhbGlkYXRlZCBzdWNjZXNzZnVsbHknLCB7XG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgIGFwcHJvdmFsczogdm90ZURhdGEuYXBwcm92YWxzLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGV2TG9nKCdBcHByb3ZhbCB2b3RlIHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdBcHByb3ZhbCB2b3RlIHZhbGlkYXRpb24gZmFpbGVkJyxcbiAgICAgICAgZXJyb3JzOiBbJ0FwcHJvdmFsIHZvdGUgdmFsaWRhdGlvbiBmYWlsZWQnXSxcbiAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcm9jZXNzVm90ZShyZXF1ZXN0OiBWb3RlUmVxdWVzdCwgcG9sbDogUG9sbERhdGEpOiBQcm9taXNlPFZvdGVSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHJlcXVlc3Qudm90ZURhdGE7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB2b3RlIGRhdGEgZm9yIHN0b3JhZ2VcbiAgICAgIGNvbnN0IHZvdGVSZWNvcmQ6IFZvdGVEYXRhID0ge1xuICAgICAgICBpZDogYHZvdGVfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkLFxuICAgICAgICB2b3RlRGF0YToge1xuICAgICAgICAgIGFwcHJvdmFsczogdm90ZURhdGEuYXBwcm92YWxzXG4gICAgICAgIH0sXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBpcEFkZHJlc3M6IHJlcXVlc3QuaXBBZGRyZXNzLFxuICAgICAgICB1c2VyQWdlbnQ6IHJlcXVlc3QudXNlckFnZW50XG4gICAgICB9O1xuXG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHZvdGUgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZCxcbiAgICAgICAgdXNlcklkOiByZXF1ZXN0LnVzZXJJZCxcbiAgICAgICAgYXBwcm92YWxzOiB2b3RlRGF0YS5hcHByb3ZhbHMsXG4gICAgICAgIHZvdGVJZDogdm90ZVJlY29yZC5pZFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHZvdGVJZDogdm90ZVJlY29yZC5pZCxcbiAgICAgICAgbWVzc2FnZTogJ1ZvdGUgcmVjb3JkZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZFxuICAgICAgfTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ0FwcHJvdmFsIHZvdGUgcHJvY2Vzc2luZyBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBhcHByb3ZhbCB2b3RlJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBwcm9jZXNzIGFwcHJvdmFsIHZvdGUnLFxuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNhbGN1bGF0ZVJlc3VsdHMocG9sbDogUG9sbERhdGEsIHZvdGVzOiBWb3RlRGF0YVtdKTogUHJvbWlzZTxSZXN1bHRzRGF0YT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRyYWNraW5nIG9iamVjdHNcbiAgICAgIGNvbnN0IGFwcHJvdmFsU2NvcmVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgICBjb25zdCBvcHRpb25Wb3RlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgY29uc3QgYXBwcm92YWxQZXJjZW50YWdlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgY29uc3Qgb3B0aW9uUGVyY2VudGFnZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBhbGwgb3B0aW9ucyB3aXRoIHplcm8gc2NvcmVzXG4gICAgICBwb2xsLm9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICBhcHByb3ZhbFNjb3Jlc1tvcHRpb24uaWRdID0gMDtcbiAgICAgICAgb3B0aW9uVm90ZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIGFwcHJvdmFsUGVyY2VudGFnZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbi5pZF0gPSAwO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFByb2Nlc3MgZWFjaCB2b3RlXG4gICAgICB2b3Rlcy5mb3JFYWNoKHZvdGUgPT4ge1xuICAgICAgICBpZiAodm90ZS52b3RlRGF0YS5hcHByb3ZhbHMpIHtcbiAgICAgICAgICB2b3RlLnZvdGVEYXRhLmFwcHJvdmFscy5mb3JFYWNoKGFwcHJvdmFsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbklkID0gcG9sbC5vcHRpb25zW2FwcHJvdmFsXT8uaWQ7XG4gICAgICAgICAgICBpZiAob3B0aW9uSWQpIHtcbiAgICAgICAgICAgICAgYXBwcm92YWxTY29yZXNbb3B0aW9uSWRdKys7XG4gICAgICAgICAgICAgIG9wdGlvblZvdGVzW29wdGlvbklkXSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdG90YWxWb3RlcyA9IHZvdGVzLmxlbmd0aDtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgICBpZiAodG90YWxWb3RlcyA+IDApIHtcbiAgICAgICAgT2JqZWN0LmtleXMoYXBwcm92YWxTY29yZXMpLmZvckVhY2gob3B0aW9uSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IGFwcHJvdmFsU2NvcmUgPSBhcHByb3ZhbFNjb3Jlc1tvcHRpb25JZF07XG4gICAgICAgICAgY29uc3Qgb3B0aW9uVm90ZSA9IG9wdGlvblZvdGVzW29wdGlvbklkXTtcbiAgICAgICAgICBpZiAoYXBwcm92YWxTY29yZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBhcHByb3ZhbFBlcmNlbnRhZ2VzW29wdGlvbklkXSA9IChhcHByb3ZhbFNjb3JlIC8gdG90YWxWb3RlcykgKiAxMDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChvcHRpb25Wb3RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbklkXSA9IChvcHRpb25Wb3RlIC8gdG90YWxWb3RlcykgKiAxMDA7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB3aW5uZXIgKGhpZ2hlc3QgYXBwcm92YWwgc2NvcmUpXG4gICAgICBsZXQgd2lubmVyOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBsZXQgd2lubmVyVm90ZXMgPSAwO1xuICAgICAgbGV0IHdpbm5lclBlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICBpZiAodG90YWxWb3RlcyA+IDApIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXMoYXBwcm92YWxTY29yZXMpLmZvckVhY2goKFtvcHRpb25JZCwgc2NvcmVdKSA9PiB7XG4gICAgICAgICAgaWYgKHNjb3JlID4gd2lubmVyVm90ZXMpIHtcbiAgICAgICAgICAgIHdpbm5lciA9IG9wdGlvbklkO1xuICAgICAgICAgICAgd2lubmVyVm90ZXMgPSBzY29yZTtcbiAgICAgICAgICAgIHdpbm5lclBlcmNlbnRhZ2UgPSBhcHByb3ZhbFBlcmNlbnRhZ2VzW29wdGlvbklkXSB8fCAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdHM6IFBvbGxSZXN1bHRzID0ge1xuICAgICAgICB3aW5uZXIsXG4gICAgICAgIHdpbm5lclZvdGVzLFxuICAgICAgICB3aW5uZXJQZXJjZW50YWdlLFxuICAgICAgICBvcHRpb25Wb3RlcyxcbiAgICAgICAgb3B0aW9uUGVyY2VudGFnZXMsXG4gICAgICAgIGFic3RlbnRpb25zOiAwLFxuICAgICAgICBhYnN0ZW50aW9uUGVyY2VudGFnZTogMFxuICAgICAgfTtcblxuICAgICAgZGV2TG9nKCdBcHByb3ZhbCByZXN1bHRzIGNhbGN1bGF0ZWQnLCB7XG4gICAgICAgIHBvbGxJZDogcG9sbC5pZCxcbiAgICAgICAgdG90YWxWb3RlcyxcbiAgICAgICAgd2lubmVyLFxuICAgICAgICB3aW5uZXJWb3RlcyxcbiAgICAgICAgd2lubmVyUGVyY2VudGFnZSxcbiAgICAgICAgY2FsY3VsYXRpb25UaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9sbElkOiBwb2xsLmlkLFxuICAgICAgICB2b3RpbmdNZXRob2Q6IHBvbGwudm90aW5nTWV0aG9kLFxuICAgICAgICB0b3RhbFZvdGVzLFxuICAgICAgICBwYXJ0aWNpcGF0aW9uUmF0ZTogdG90YWxWb3RlcyAvIDEwMCwgLy8gTW9jayBwYXJ0aWNpcGF0aW9uIHJhdGVcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgY2FsY3VsYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY2FsY3VsYXRpb25UaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIG1ldGhvZDogJ2FwcHJvdmFsJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRldkxvZygnQXBwcm92YWwgcmVzdWx0cyBjYWxjdWxhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBlbXB0eSByZXN1bHRzIG9uIGVycm9yXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb2xsSWQ6IHBvbGwuaWQsXG4gICAgICAgIHZvdGluZ01ldGhvZDogcG9sbC52b3RpbmdNZXRob2QsXG4gICAgICAgIHRvdGFsVm90ZXM6IDAsXG4gICAgICAgIHBhcnRpY2lwYXRpb25SYXRlOiAwLFxuICAgICAgICByZXN1bHRzOiB7XG4gICAgICAgICAgd2lubmVyOiB1bmRlZmluZWQsXG4gICAgICAgICAgd2lubmVyVm90ZXM6IDAsXG4gICAgICAgICAgd2lubmVyUGVyY2VudGFnZTogMCxcbiAgICAgICAgICBvcHRpb25Wb3Rlczoge30sXG4gICAgICAgICAgb3B0aW9uUGVyY2VudGFnZXM6IHt9LFxuICAgICAgICAgIGFic3RlbnRpb25zOiAwLFxuICAgICAgICAgIGFic3RlbnRpb25QZXJjZW50YWdlOiAwXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGN1bGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgIGNhbGN1bGF0aW9uVGltZTogMCxcbiAgICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBnZXRDb25maWd1cmF0aW9uKCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0aG9kOiAnYXBwcm92YWwnLFxuICAgICAgZGVzY3JpcHRpb246ICdWb3RlcnMgY2FuIGFwcHJvdmUgbXVsdGlwbGUgb3B0aW9ucycsXG4gICAgICBhbGxvd3NNdWx0aXBsZVNlbGVjdGlvbnM6IHRydWUsXG4gICAgICByZXF1aXJlc1Jhbmtpbmc6IGZhbHNlLFxuICAgICAgbWF4U2VsZWN0aW9uczogJ3VubGltaXRlZCdcbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbIkFwcHJvdmFsU3RyYXRlZ3kiLCJnZXRWb3RpbmdNZXRob2QiLCJ2YWxpZGF0ZVZvdGUiLCJyZXF1ZXN0IiwicG9sbCIsInZvdGVEYXRhIiwiYXBwcm92YWxzIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsaWQiLCJpc1ZhbGlkIiwiZXJyb3IiLCJlcnJvcnMiLCJyZXF1aXJlc0F1dGhlbnRpY2F0aW9uIiwicmVxdWlyZXNUb2tlbnMiLCJsZW5ndGgiLCJhcHByb3ZhbCIsIk51bWJlciIsImlzSW50ZWdlciIsIm9wdGlvbnMiLCJ1bmlxdWVBcHByb3ZhbHMiLCJTZXQiLCJzaXplIiwibWF4QXBwcm92YWxzIiwibWF4Q2hvaWNlcyIsImRldkxvZyIsInBvbGxJZCIsInVzZXJJZCIsInByb2Nlc3NWb3RlIiwidm90ZVJlY29yZCIsImlkIiwiRGF0ZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwiaXBBZGRyZXNzIiwidXNlckFnZW50Iiwidm90ZUlkIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJjYWxjdWxhdGVSZXN1bHRzIiwidm90ZXMiLCJzdGFydFRpbWUiLCJhcHByb3ZhbFNjb3JlcyIsIm9wdGlvblZvdGVzIiwiYXBwcm92YWxQZXJjZW50YWdlcyIsIm9wdGlvblBlcmNlbnRhZ2VzIiwiZm9yRWFjaCIsIm9wdGlvbiIsInZvdGUiLCJvcHRpb25JZCIsInRvdGFsVm90ZXMiLCJPYmplY3QiLCJrZXlzIiwiYXBwcm92YWxTY29yZSIsIm9wdGlvblZvdGUiLCJ1bmRlZmluZWQiLCJ3aW5uZXIiLCJ3aW5uZXJWb3RlcyIsIndpbm5lclBlcmNlbnRhZ2UiLCJlbnRyaWVzIiwic2NvcmUiLCJyZXN1bHRzIiwiYWJzdGVudGlvbnMiLCJhYnN0ZW50aW9uUGVyY2VudGFnZSIsImNhbGN1bGF0aW9uVGltZSIsInZvdGluZ01ldGhvZCIsInBhcnRpY2lwYXRpb25SYXRlIiwiY2FsY3VsYXRlZEF0IiwibWV0YWRhdGEiLCJtZXRob2QiLCJFcnJvciIsImdldENvbmZpZ3VyYXRpb24iLCJkZXNjcmlwdGlvbiIsImFsbG93c011bHRpcGxlU2VsZWN0aW9ucyIsInJlcXVpcmVzUmFua2luZyIsIm1heFNlbGVjdGlvbnMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztDQVFDOzs7OytCQWlCWUE7OztlQUFBQTs7O3dCQWZVO0FBZWhCLE1BQU1BO0lBRVhDLGtCQUFnQztRQUM5QixPQUFPO0lBQ1Q7SUFFQSxNQUFNQyxhQUFhQyxPQUFvQixFQUFFQyxJQUFjLEVBQTJCO1FBQ2hGLElBQUk7WUFDRixNQUFNQyxXQUFXRixRQUFRRSxRQUFRO1lBRWpDLG1EQUFtRDtZQUNuRCxJQUFJLENBQUNBLFNBQVNDLFNBQVMsSUFBSSxDQUFDQyxNQUFNQyxPQUFPLENBQUNILFNBQVNDLFNBQVMsR0FBRztnQkFDN0QsT0FBTztvQkFDTEcsT0FBTztvQkFDUEMsU0FBUztvQkFDVEMsT0FBTztvQkFDUEMsUUFBUTt3QkFBQztxQkFBa0M7b0JBQzNDQyx3QkFBd0I7b0JBQ3hCQyxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSx3Q0FBd0M7WUFDeEMsSUFBSVQsU0FBU0MsU0FBUyxDQUFDUyxNQUFNLEtBQUssR0FBRztnQkFDbkMsT0FBTztvQkFDTE4sT0FBTztvQkFDUEMsU0FBUztvQkFDVEMsT0FBTztvQkFDUEMsUUFBUTt3QkFBQztx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