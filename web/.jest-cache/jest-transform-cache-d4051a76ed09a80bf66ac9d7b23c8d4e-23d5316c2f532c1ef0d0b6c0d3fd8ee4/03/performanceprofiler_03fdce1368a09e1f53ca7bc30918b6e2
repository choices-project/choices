5a40937772e64e731c7e65bc05b3a2c8
/**
 * Advanced Performance Profiler
 * 
 * Provides deep performance analysis, profiling, and optimization recommendations
 * for the Choices platform components and business logic.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    PerformanceProfiler: function() {
        return PerformanceProfiler;
    },
    performanceProfiler: function() {
        return performanceProfiler;
    }
});
class PerformanceProfiler {
    /**
   * Start profiling a component
   */ startProfiling(componentName) {
        this.isProfiling = true;
        this.startTime = performance.now();
        this.startMemory = performance.memory?.usedJSHeapSize || 0;
        logger.info(`ðŸ” Starting performance profiling for: ${componentName}`);
    }
    /**
   * Stop profiling and record metrics
   */ stopProfiling(componentName, renderCount = 1) {
        if (!this.isProfiling) {
            throw new Error("Profiling not started. Call startProfiling() first.");
        }
        const endTime = performance.now();
        const endMemory = performance.memory?.usedJSHeapSize || 0;
        const totalRenderTime = endTime - this.startTime;
        const averageRenderTime = totalRenderTime / renderCount;
        const memoryUsed = (endMemory - this.startMemory) / (1024 * 1024);
        const metrics = {
            componentName,
            renderCount,
            totalRenderTime,
            averageRenderTime,
            maxRenderTime: totalRenderTime,
            minRenderTime: totalRenderTime,
            memoryPeak: memoryUsed,
            memoryAverage: memoryUsed,
            reRenderTriggers: this.analyzeReRenderTriggers(componentName),
            performanceBottlenecks: this.analyzeBottlenecks(totalRenderTime, memoryUsed),
            optimizationScore: this.calculateOptimizationScore(totalRenderTime, memoryUsed, renderCount),
            recommendations: this.generateRecommendations(totalRenderTime, memoryUsed, renderCount),
            timestamp: new Date()
        };
        this.metrics.push(metrics);
        this.isProfiling = false;
        logger.info(`ðŸ“Š Performance profiling completed for: ${componentName}`);
        logger.info(`- Render Time: ${totalRenderTime.toFixed(2)}ms`);
        logger.info(`- Memory Used: ${memoryUsed.toFixed(2)}MB`);
        logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
        return metrics;
    }
    /**
   * Analyze re-render triggers
   */ analyzeReRenderTriggers(componentName) {
        const triggers = [];
        // Analyze actual re-render triggers based on component behavior
        const renderCount = this.metrics.filter((m)=>m.componentName === componentName).length;
        const recentMetrics = this.metrics.filter((m)=>m.componentName === componentName).slice(-3);
        // Check for excessive re-renders
        if (renderCount > 5) {
            triggers.push("Excessive re-renders detected");
        }
        // Check for render time patterns
        if (recentMetrics.length > 1) {
            const avgRenderTime = recentMetrics.reduce((sum, m)=>sum + m.averageRenderTime, 0) / recentMetrics.length;
            if (avgRenderTime > 100) {
                triggers.push("Slow render times");
            }
        }
        // Check for memory patterns
        if (recentMetrics.length > 1) {
            const memoryTrend = recentMetrics.map((m)=>m.memoryPeak);
            const isIncreasing = memoryTrend.every((val, i)=>i === 0 || val >= memoryTrend[i - 1]);
            if (isIncreasing && memoryTrend[memoryTrend.length - 1] > 5) {
                triggers.push("Increasing memory usage pattern");
            }
        }
        // Check for performance degradation
        if (recentMetrics.length > 2) {
            const scores = recentMetrics.map((m)=>m.optimizationScore);
            const isDegrading = scores.every((score, i)=>i === 0 || score <= scores[i - 1]);
            if (isDegrading && scores[scores.length - 1] < 70) {
                triggers.push("Performance degradation detected");
            }
        }
        // Component-specific triggers
        if (componentName.includes("Feed") || componentName.includes("Mobile")) {
            triggers.push("Large component with complex state management");
        }
        if (componentName.includes("Store") || componentName.includes("Zustand")) {
            triggers.push("State management updates");
        }
        return triggers;
    }
    /**
   * Analyze performance bottlenecks
   */ analyzeBottlenecks(renderTime, memoryUsage) {
        const bottlenecks = [];
        if (renderTime > 200) {
            bottlenecks.push("Slow render time (>200ms)");
        }
        if (memoryUsage > 10) {
            bottlenecks.push("High memory usage (>10MB)");
        }
        if (renderTime > 100 && memoryUsage > 5) {
            bottlenecks.push("Combined performance issues");
        }
        return bottlenecks;
    }
    /**
   * Calculate optimization score (0-100)
   */ calculateOptimizationScore(renderTime, memoryUsage, renderCount) {
        let score = 100;
        // Deduct points for slow render times
        if (renderTime > 300) score -= 40;
        else if (renderTime > 200) score -= 30;
        else if (renderTime > 100) score -= 20;
        else if (renderTime > 50) score -= 10;
        // Deduct points for high memory usage
        if (memoryUsage > 20) score -= 40;
        else if (memoryUsage > 10) score -= 30;
        else if (memoryUsage > 5) score -= 20;
        else if (memoryUsage > 2) score -= 10;
        // Deduct points for excessive re-renders
        if (renderCount > 10) score -= 20;
        else if (renderCount > 5) score -= 10;
        return Math.max(0, score);
    }
    /**
   * Generate optimization recommendations
   */ generateRecommendations(renderTime, memoryUsage, renderCount) {
        const recommendations = [];
        if (renderTime > 200) {
            recommendations.push("\uD83D\uDD27 Implement React.memo for expensive components");
            recommendations.push("\uD83D\uDD27 Use useMemo/useCallback for expensive calculations");
            recommendations.push("\uD83D\uDD27 Consider lazy loading for heavy components");
        }
        if (memoryUsage > 10) {
            recommendations.push("\uD83D\uDD27 Implement proper cleanup in useEffect hooks");
            recommendations.push("\uD83D\uDD27 Review memory leaks in event listeners");
            recommendations.push("\uD83D\uDD27 Consider component unmounting strategies");
        }
        if (renderCount > 5) {
            recommendations.push("\uD83D\uDD27 Optimize useEffect dependencies");
            recommendations.push("\uD83D\uDD27 Consider state management optimization");
            recommendations.push("\uD83D\uDD27 Review component re-render patterns");
        }
        if (recommendations.length === 0) {
            recommendations.push("\uD83D\uDE80 Component is well optimized!");
        }
        return recommendations;
    }
    /**
   * Create component profile
   */ createComponentProfile(name, metrics) {
        const profile = {
            name,
            metrics,
            children: [],
            depth: 0,
            isOptimized: metrics.optimizationScore > 80,
            optimizationPotential: this.calculateOptimizationPotential(metrics.optimizationScore)
        };
        this.profiles.set(name, profile);
        return profile;
    }
    /**
   * Calculate optimization potential
   */ calculateOptimizationPotential(score) {
        if (score < 50) return "HIGH";
        if (score < 80) return "MEDIUM";
        return "LOW";
    }
    /**
   * Generate comprehensive performance analysis
   */ generatePerformanceAnalysis() {
        const allMetrics = this.metrics;
        const totalTests = allMetrics.length;
        if (totalTests === 0) {
            return {
                overallScore: 0,
                criticalIssues: [
                    "No performance data available"
                ],
                optimizationOpportunities: [],
                memoryLeaks: [],
                renderOptimizations: [],
                networkOptimizations: [],
                accessibilityOptimizations: [],
                recommendations: [
                    "Run performance tests to generate analysis"
                ],
                estimatedImprovement: 0
            };
        }
        const averageScore = allMetrics.reduce((sum, m)=>sum + m.optimizationScore, 0) / totalTests;
        const criticalIssues = this.identifyCriticalIssues(allMetrics);
        const optimizationOpportunities = this.identifyOptimizationOpportunities(allMetrics);
        const memoryLeaks = this.identifyMemoryLeaks(allMetrics);
        const renderOptimizations = this.identifyRenderOptimizations(allMetrics);
        const networkOptimizations = this.identifyNetworkOptimizations(allMetrics);
        const accessibilityOptimizations = this.identifyAccessibilityOptimizations(allMetrics);
        const recommendations = this.generateComprehensiveRecommendations(criticalIssues, optimizationOpportunities, memoryLeaks, renderOptimizations, networkOptimizations, accessibilityOptimizations);
        const estimatedImprovement = this.calculateEstimatedImprovement(allMetrics);
        return {
            overallScore: averageScore,
            criticalIssues,
            optimizationOpportunities,
            memoryLeaks,
            renderOptimizations,
            networkOptimizations,
            accessibilityOptimizations,
            recommendations,
            estimatedImprovement
        };
    }
    /**
   * Identify critical performance issues
   */ identifyCriticalIssues(metrics) {
        const issues = [];
        const slowComponents = metrics.filter((m)=>m.averageRenderTime > 200);
        const highMemoryComponents = metrics.filter((m)=>m.memoryPeak > 10);
        const lowScoreComponents = metrics.filter((m)=>m.optimizationScore < 50);
        if (slowComponents.length > 0) {
            issues.push(`ðŸš¨ ${slowComponents.length} components with slow render times (>200ms)`);
        }
        if (highMemoryComponents.length > 0) {
            issues.push(`ðŸš¨ ${highMemoryComponents.length} components with high memory usage (>10MB)`);
        }
        if (lowScoreComponents.length > 0) {
            issues.push(`ðŸš¨ ${lowScoreComponents.length} components with poor optimization scores (<50)`);
        }
        return issues;
    }
    /**
   * Identify optimization opportunities
   */ identifyOptimizationOpportunities(metrics) {
        const opportunities = [];
        const mediumScoreComponents = metrics.filter((m)=>m.optimizationScore >= 50 && m.optimizationScore < 80);
        const highRenderCountComponents = metrics.filter((m)=>m.renderCount > 5);
        if (mediumScoreComponents.length > 0) {
            opportunities.push(`ðŸ’¡ ${mediumScoreComponents.length} components with medium optimization potential`);
        }
        if (highRenderCountComponents.length > 0) {
            opportunities.push(`ðŸ’¡ ${highRenderCountComponents.length} components with excessive re-renders`);
        }
        return opportunities;
    }
    /**
   * Identify memory leaks
   */ identifyMemoryLeaks(metrics) {
        const leaks = [];
        const highMemoryComponents = metrics.filter((m)=>m.memoryPeak > 10);
        const increasingMemoryComponents = metrics.filter((m)=>m.memoryPeak > m.memoryAverage * 2);
        if (highMemoryComponents.length > 0) {
            leaks.push(`ðŸ” ${highMemoryComponents.length} components with high memory usage`);
        }
        if (increasingMemoryComponents.length > 0) {
            leaks.push(`ðŸ” ${increasingMemoryComponents.length} components with increasing memory usage`);
        }
        return leaks;
    }
    /**
   * Identify render optimizations
   */ identifyRenderOptimizations(metrics) {
        const optimizations = [];
        const slowRenderComponents = metrics.filter((m)=>m.averageRenderTime > 100);
        const highRenderCountComponents = metrics.filter((m)=>m.renderCount > 3);
        if (slowRenderComponents.length > 0) {
            optimizations.push(`âš¡ ${slowRenderComponents.length} components need render optimization`);
        }
        if (highRenderCountComponents.length > 0) {
            optimizations.push(`âš¡ ${highRenderCountComponents.length} components need re-render optimization`);
        }
        return optimizations;
    }
    /**
   * Identify network optimizations
   */ identifyNetworkOptimizations(metrics) {
        const optimizations = [];
        // Analyze network-related performance metrics
        const networkMetrics = metrics.filter((m)=>m.networkTime > 0);
        const highNetworkTime = metrics.filter((m)=>m.networkTime > 300);
        const apiMetrics = metrics.filter((m)=>m.apiTime > 0);
        const highApiTime = metrics.filter((m)=>m.apiTime > 200);
        // Network performance analysis
        if (networkMetrics.length > 0) {
            const avgNetworkTime = networkMetrics.reduce((sum, m)=>sum + m.networkTime, 0) / networkMetrics.length;
            if (avgNetworkTime > 200) {
                optimizations.push("\uD83C\uDF10 High network latency detected - consider CDN implementation");
            }
            if (avgNetworkTime > 500) {
                optimizations.push("\uD83C\uDF10 Critical network performance issues - optimize API endpoints");
            }
        }
        // API performance analysis
        if (apiMetrics.length > 0) {
            const avgApiTime = apiMetrics.reduce((sum, m)=>sum + m.apiTime, 0) / apiMetrics.length;
            if (avgApiTime > 150) {
                optimizations.push("\uD83D\uDD0C API response times are slow - implement caching strategies");
            }
            if (avgApiTime > 300) {
                optimizations.push("\uD83D\uDD0C Critical API performance issues - optimize database queries");
            }
        }
        // Network optimization recommendations based on patterns
        if (highNetworkTime.length > 0) {
            optimizations.push("\uD83C\uDF10 Implement request batching for multiple API calls");
            optimizations.push("\uD83C\uDF10 Add request deduplication to prevent duplicate calls");
        }
        if (highApiTime.length > 0) {
            optimizations.push("\uD83D\uDD0C Implement API response caching with TTL");
            optimizations.push("\uD83D\uDD0C Add database query optimization");
        }
        // General network optimizations
        if (networkMetrics.length > 2) {
            optimizations.push("\uD83C\uDF10 Consider implementing service worker for offline caching");
            optimizations.push("\uD83C\uDF10 Add request compression for large payloads");
        }
        return optimizations;
    }
    /**
   * Identify accessibility optimizations
   */ identifyAccessibilityOptimizations(metrics) {
        const optimizations = [];
        // Analyze accessibility-related performance metrics
        const accessibilityMetrics = metrics.filter((m)=>m.accessibilityTime > 0);
        const highAccessibilityTime = metrics.filter((m)=>m.accessibilityTime > 50);
        const slowComponents = metrics.filter((m)=>m.averageRenderTime > 100);
        const memoryIntensiveComponents = metrics.filter((m)=>m.memoryPeak > 5);
        // Accessibility performance analysis
        if (accessibilityMetrics.length > 0) {
            const avgAccessibilityTime = accessibilityMetrics.reduce((sum, m)=>sum + m.accessibilityTime, 0) / accessibilityMetrics.length;
            if (avgAccessibilityTime > 30) {
                optimizations.push("â™¿ Screen reader performance is slow - optimize ARIA announcements");
            }
            if (avgAccessibilityTime > 75) {
                optimizations.push("â™¿ Critical accessibility performance issues - review screen reader implementation");
            }
        }
        // Screen reader optimization recommendations
        if (highAccessibilityTime.length > 0) {
            optimizations.push("â™¿ Implement efficient live region management for screen readers");
            optimizations.push("â™¿ Optimize ARIA attribute rendering performance");
            optimizations.push("â™¿ Add debouncing for screen reader announcements");
        }
        // Keyboard navigation optimization
        if (slowComponents.length > 0) {
            optimizations.push("â™¿ Optimize keyboard navigation for slow-rendering components");
            optimizations.push("â™¿ Implement focus management optimization");
            optimizations.push("â™¿ Add keyboard shortcut performance improvements");
        }
        // Memory optimization for accessibility
        if (memoryIntensiveComponents.length > 0) {
            optimizations.push("â™¿ Optimize accessibility features for memory-intensive components");
            optimizations.push("â™¿ Implement efficient accessibility state management");
        }
        // General accessibility optimizations
        if (metrics.length > 2) {
            optimizations.push("â™¿ Consider implementing accessibility performance monitoring");
            optimizations.push("â™¿ Add accessibility feature lazy loading");
            optimizations.push("â™¿ Optimize accessibility testing performance");
        }
        return optimizations;
    }
    /**
   * Generate comprehensive recommendations
   */ generateComprehensiveRecommendations(criticalIssues, optimizationOpportunities, memoryLeaks, renderOptimizations, networkOptimizations, accessibilityOptimizations) {
        const recommendations = [];
        if (criticalIssues.length > 0) {
            recommendations.push("\uD83D\uDEA8 PRIORITY: Address critical performance issues");
            recommendations.push(...criticalIssues);
        }
        if (memoryLeaks.length > 0) {
            recommendations.push("\uD83D\uDD0D PRIORITY: Fix memory leaks");
            recommendations.push(...memoryLeaks);
        }
        if (renderOptimizations.length > 0) {
            recommendations.push("âš¡ HIGH: Optimize render performance");
            recommendations.push(...renderOptimizations);
        }
        if (optimizationOpportunities.length > 0) {
            recommendations.push("\uD83D\uDCA1 MEDIUM: Implement optimization opportunities");
            recommendations.push(...optimizationOpportunities);
        }
        if (networkOptimizations.length > 0) {
            recommendations.push("\uD83C\uDF10 MEDIUM: Optimize network performance");
            recommendations.push(...networkOptimizations);
        }
        if (accessibilityOptimizations.length > 0) {
            recommendations.push("â™¿ LOW: Optimize accessibility performance");
            recommendations.push(...accessibilityOptimizations);
        }
        if (recommendations.length === 0) {
            recommendations.push("\uD83D\uDE80 Excellent performance! No optimizations needed.");
        }
        return recommendations;
    }
    /**
   * Calculate estimated improvement percentage
   */ calculateEstimatedImprovement(metrics) {
        const averageScore = metrics.reduce((sum, m)=>sum + m.optimizationScore, 0) / metrics.length;
        const maxPossibleScore = 100;
        const improvement = maxPossibleScore - averageScore;
        return Math.max(0, improvement);
    }
    /**
   * Get all component profiles
   */ getComponentProfiles() {
        return Array.from(this.profiles.values());
    }
    /**
   * Get metrics for a specific component
   */ getComponentMetrics(componentName) {
        return this.metrics.find((m)=>m.componentName === componentName);
    }
    /**
   * Get all alerts
   */ getAlerts() {
        return this.alerts;
    }
    /**
   * Calculate performance grade
   */ calculatePerformanceGrade(renderTime, memoryUsage) {
        let score = 100;
        // Render time scoring
        if (renderTime < 50) score += 10;
        else if (renderTime < 100) score += 5;
        else if (renderTime > 200) score -= 30;
        else if (renderTime > 150) score -= 20;
        else if (renderTime > 100) score -= 10;
        // Memory usage scoring
        if (memoryUsage < 1) score += 10;
        else if (memoryUsage < 2) score += 5;
        else if (memoryUsage > 10) score -= 30;
        else if (memoryUsage > 5) score -= 20;
        else if (memoryUsage > 2) score -= 10;
        if (score >= 95) return "A+";
        if (score >= 90) return "A";
        if (score >= 80) return "B";
        if (score >= 70) return "C";
        if (score >= 60) return "D";
        return "F";
    }
    /**
   * Clear all profiling data
   */ clear() {
        this.profiles.clear();
        this.metrics = [];
        this.alerts = [];
        this.isProfiling = false;
    }
    /**
   * Record test metrics
   */ recordMetrics(metrics) {
        const fullMetrics = {
            ...metrics,
            timestamp: new Date()
        };
        this.metrics.push(fullMetrics);
        // Check for performance alerts
        this.checkPerformanceAlerts(fullMetrics);
    }
    /**
   * Check for performance alerts
   */ checkPerformanceAlerts(metrics) {
        const alerts = [];
        // Render time alerts
        if (metrics.renderTime > 200) {
            alerts.push(`âš ï¸ SLOW RENDER: ${metrics.componentName} took ${metrics.renderTime.toFixed(2)}ms (budget: 200ms)`);
        }
        // Memory usage alerts
        if (metrics.memoryPeak > 10) {
            alerts.push(`âš ï¸ HIGH MEMORY: ${metrics.componentName} used ${metrics.memoryPeak.toFixed(2)}MB (budget: 10MB)`);
        }
        // Performance grade alerts
        if (metrics.performanceGrade === "D" || metrics.performanceGrade === "F") {
            alerts.push(`ðŸš¨ POOR PERFORMANCE: ${metrics.componentName} received grade ${metrics.performanceGrade}`);
        }
        // Network time alerts
        if (metrics.networkTime > 500) {
            alerts.push(`âš ï¸ SLOW NETWORK: ${metrics.componentName} network took ${metrics.networkTime.toFixed(2)}ms (budget: 500ms)`);
        }
        this.alerts.push(...alerts);
    }
    /**
   * Track component lifecycle performance
   */ trackComponentLifecycle(componentName, lifecycle, duration) {
        const lifecycleMetrics = this.metrics.find((m)=>m.componentName === componentName);
        if (lifecycleMetrics) {
            // Update existing metrics with lifecycle data
            if (lifecycleMetrics.reRenderTriggers) {
                lifecycleMetrics.reRenderTriggers.push(`${lifecycle} took ${duration.toFixed(2)}ms`);
            } else {
                lifecycleMetrics.reRenderTriggers = [
                    `${lifecycle} took ${duration.toFixed(2)}ms`
                ];
            }
        } else {
            // Create new metrics for lifecycle tracking
            this.recordMetrics({
                componentName,
                testSuite: "Component Lifecycle",
                duration,
                memoryUsage: 0,
                renderTime: duration,
                networkTime: 0,
                apiTime: 0,
                accessibilityTime: 0,
                performanceGrade: this.calculatePerformanceGrade(duration, 0),
                status: "PASS"
            });
        }
        logger.info(`ðŸ”„ Component Lifecycle: ${componentName} ${lifecycle} - ${duration.toFixed(2)}ms`);
    }
    /**
   * Analyze performance patterns across multiple runs
   */ analyzePerformancePatterns() {
        const componentGroups = new Map();
        // Group metrics by component
        this.metrics.forEach((metric)=>{
            if (!componentGroups.has(metric.componentName)) {
                componentGroups.set(metric.componentName, []);
            }
            componentGroups.get(metric.componentName).push(metric);
        });
        const trendingUp = [];
        const trendingDown = [];
        const stable = [];
        const volatile = [];
        componentGroups.forEach((metrics, componentName)=>{
            if (metrics.length < 3) return; // Need at least 3 data points
            const scores = metrics.map((m)=>m.optimizationScore);
            const renderTimes = metrics.map((m)=>m.averageRenderTime);
            const memoryUsage = metrics.map((m)=>m.memoryPeak);
            // Calculate trends
            const scoreTrend = this.calculateTrend(scores);
            const renderTrend = this.calculateTrend(renderTimes);
            const memoryTrend = this.calculateTrend(memoryUsage);
            // Determine component performance pattern
            if (scoreTrend > 0.1 && renderTrend < -0.1) {
                trendingUp.push(`${componentName}: Performance improving (score +${scoreTrend.toFixed(2)}, render -${Math.abs(renderTrend).toFixed(2)}ms)`);
            } else if (scoreTrend < -0.1 && renderTrend > 0.1) {
                trendingDown.push(`${componentName}: Performance degrading (score ${scoreTrend.toFixed(2)}, render +${renderTrend.toFixed(2)}ms)`);
            } else if (Math.abs(scoreTrend) < 0.05 && Math.abs(renderTrend) < 10) {
                stable.push(`${componentName}: Performance stable (score ${scoreTrend.toFixed(2)}, render ${renderTrend.toFixed(2)}ms)`);
            } else {
                volatile.push(`${componentName}: Performance volatile (score ${scoreTrend.toFixed(2)}, render ${renderTrend.toFixed(2)}ms)`);
            }
        });
        return {
            trendingUp,
            trendingDown,
            stable,
            volatile
        };
    }
    /**
   * Calculate trend for a series of values
   */ calculateTrend(values) {
        if (values.length < 2) return 0;
        const first = values[0];
        const last = values[values.length - 1];
        const change = last - first;
        const percentChange = first !== 0 ? change / first : 0;
        return percentChange;
    }
    /**
   * Get performance insights and recommendations
   */ getPerformanceInsights() {
        const topPerformers = [];
        const needsAttention = [];
        const optimizationOpportunities = [];
        const criticalIssues = [];
        this.metrics.forEach((metric)=>{
            // Use optimizationScore if available, otherwise convert performanceGrade to score
            const score = metric.optimizationScore || this.convertGradeToScore(metric.performanceGrade);
            if (score >= 90) {
                topPerformers.push(`${metric.componentName}: ${score}/100 (EXCELLENT)`);
            } else if (score >= 70) {
                optimizationOpportunities.push(`${metric.componentName}: ${score}/100 (GOOD - room for improvement)`);
            } else if (score >= 50) {
                needsAttention.push(`${metric.componentName}: ${score}/100 (NEEDS ATTENTION)`);
            } else {
                criticalIssues.push(`${metric.componentName}: ${score}/100 (CRITICAL)`);
            }
        });
        return {
            topPerformers,
            needsAttention,
            optimizationOpportunities,
            criticalIssues
        };
    }
    /**
   * Convert performance grade to numeric score
   */ convertGradeToScore(grade) {
        switch(grade){
            case "A+":
                return 95;
            case "A":
                return 90;
            case "B":
                return 80;
            case "C":
                return 70;
            case "D":
                return 60;
            case "F":
                return 30;
            default:
                return 50;
        }
    }
    /**
   * Export profiling data
   */ exportProfilingData() {
        return JSON.stringify({
            profiles: Array.from(this.profiles.entries()),
            metrics: this.metrics,
            analysis: this.generatePerformanceAnalysis(),
            patterns: this.analyzePerformancePatterns(),
            insights: this.getPerformanceInsights()
        }, null, 2);
    }
    constructor(){
        this.profiles = new Map();
        this.metrics = [];
        this.alerts = [];
        this.isProfiling = false;
        this.startTime = 0;
        this.startMemory = 0;
    }
}
const performanceProfiler = new PerformanceProfiler();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvcGVyZm9ybWFuY2UvcGVyZm9ybWFuY2UtcHJvZmlsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZHZhbmNlZCBQZXJmb3JtYW5jZSBQcm9maWxlclxuICogXG4gKiBQcm92aWRlcyBkZWVwIHBlcmZvcm1hbmNlIGFuYWx5c2lzLCBwcm9maWxpbmcsIGFuZCBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gKiBmb3IgdGhlIENob2ljZXMgcGxhdGZvcm0gY29tcG9uZW50cyBhbmQgYnVzaW5lc3MgbG9naWMuXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBQcm9maWxlck1ldHJpY3Mge1xuICBjb21wb25lbnROYW1lOiBzdHJpbmc7XG4gIHJlbmRlckNvdW50OiBudW1iZXI7XG4gIHRvdGFsUmVuZGVyVGltZTogbnVtYmVyO1xuICBhdmVyYWdlUmVuZGVyVGltZTogbnVtYmVyO1xuICBtYXhSZW5kZXJUaW1lOiBudW1iZXI7XG4gIG1pblJlbmRlclRpbWU6IG51bWJlcjtcbiAgbWVtb3J5UGVhazogbnVtYmVyO1xuICBtZW1vcnlBdmVyYWdlOiBudW1iZXI7XG4gIHJlUmVuZGVyVHJpZ2dlcnM6IHN0cmluZ1tdO1xuICBwZXJmb3JtYW5jZUJvdHRsZW5lY2tzOiBzdHJpbmdbXTtcbiAgb3B0aW1pemF0aW9uU2NvcmU6IG51bWJlcjtcbiAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgdGltZXN0YW1wOiBEYXRlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFByb2ZpbGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljcztcbiAgY2hpbGRyZW46IENvbXBvbmVudFByb2ZpbGVbXTtcbiAgcGFyZW50PzogQ29tcG9uZW50UHJvZmlsZTtcbiAgZGVwdGg6IG51bWJlcjtcbiAgaXNPcHRpbWl6ZWQ6IGJvb2xlYW47XG4gIG9wdGltaXphdGlvblBvdGVudGlhbDogJ0hJR0gnIHwgJ01FRElVTScgfCAnTE9XJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZUFuYWx5c2lzIHtcbiAgb3ZlcmFsbFNjb3JlOiBudW1iZXI7XG4gIGNyaXRpY2FsSXNzdWVzOiBzdHJpbmdbXTtcbiAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogc3RyaW5nW107XG4gIG1lbW9yeUxlYWtzOiBzdHJpbmdbXTtcbiAgcmVuZGVyT3B0aW1pemF0aW9uczogc3RyaW5nW107XG4gIG5ldHdvcmtPcHRpbWl6YXRpb25zOiBzdHJpbmdbXTtcbiAgYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnM6IHN0cmluZ1tdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBlc3RpbWF0ZWRJbXByb3ZlbWVudDogbnVtYmVyOyAvLyBwZXJjZW50YWdlXG59XG5cbmV4cG9ydCBjbGFzcyBQZXJmb3JtYW5jZVByb2ZpbGVyIHtcbiAgcHJpdmF0ZSBwcm9maWxlczogTWFwPHN0cmluZywgQ29tcG9uZW50UHJvZmlsZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10gPSBbXTtcbiAgcHJpdmF0ZSBhbGVydHM6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgaXNQcm9maWxpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzdGFydFRpbWU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgc3RhcnRNZW1vcnk6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHByb2ZpbGluZyBhIGNvbXBvbmVudFxuICAgKi9cbiAgc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5pc1Byb2ZpbGluZyA9IHRydWU7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB0aGlzLnN0YXJ0TWVtb3J5ID0gcGVyZm9ybWFuY2UubWVtb3J5Py51c2VkSlNIZWFwU2l6ZSB8fCAwO1xuICAgIFxuICAgIGxvZ2dlci5pbmZvKGDwn5SNIFN0YXJ0aW5nIHBlcmZvcm1hbmNlIHByb2ZpbGluZyBmb3I6ICR7Y29tcG9uZW50TmFtZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHByb2ZpbGluZyBhbmQgcmVjb3JkIG1ldHJpY3NcbiAgICovXG4gIHN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZTogc3RyaW5nLCByZW5kZXJDb3VudDogbnVtYmVyID0gMSk6IFByb2ZpbGVyTWV0cmljcyB7XG4gICAgaWYgKCF0aGlzLmlzUHJvZmlsaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2ZpbGluZyBub3Qgc3RhcnRlZC4gQ2FsbCBzdGFydFByb2ZpbGluZygpIGZpcnN0LicpO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBlbmRNZW1vcnkgPSBwZXJmb3JtYW5jZS5tZW1vcnk/LnVzZWRKU0hlYXBTaXplIHx8IDA7XG4gICAgXG4gICAgY29uc3QgdG90YWxSZW5kZXJUaW1lID0gZW5kVGltZSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIGNvbnN0IGF2ZXJhZ2VSZW5kZXJUaW1lID0gdG90YWxSZW5kZXJUaW1lIC8gcmVuZGVyQ291bnQ7XG4gICAgY29uc3QgbWVtb3J5VXNlZCA9IChlbmRNZW1vcnkgLSB0aGlzLnN0YXJ0TWVtb3J5KSAvICgxMDI0ICogMTAyNCk7XG4gICAgXG4gICAgY29uc3QgbWV0cmljczogUHJvZmlsZXJNZXRyaWNzID0ge1xuICAgICAgY29tcG9uZW50TmFtZSxcbiAgICAgIHJlbmRlckNvdW50LFxuICAgICAgdG90YWxSZW5kZXJUaW1lLFxuICAgICAgYXZlcmFnZVJlbmRlclRpbWUsXG4gICAgICBtYXhSZW5kZXJUaW1lOiB0b3RhbFJlbmRlclRpbWUsXG4gICAgICBtaW5SZW5kZXJUaW1lOiB0b3RhbFJlbmRlclRpbWUsXG4gICAgICBtZW1vcnlQZWFrOiBtZW1vcnlVc2VkLFxuICAgICAgbWVtb3J5QXZlcmFnZTogbWVtb3J5VXNlZCxcbiAgICAgIHJlUmVuZGVyVHJpZ2dlcnM6IHRoaXMuYW5hbHl6ZVJlUmVuZGVyVHJpZ2dlcnMoY29tcG9uZW50TmFtZSksXG4gICAgICBwZXJmb3JtYW5jZUJvdHRsZW5lY2tzOiB0aGlzLmFuYWx5emVCb3R0bGVuZWNrcyh0b3RhbFJlbmRlclRpbWUsIG1lbW9yeVVzZWQpLFxuICAgICAgb3B0aW1pemF0aW9uU2NvcmU6IHRoaXMuY2FsY3VsYXRlT3B0aW1pemF0aW9uU2NvcmUodG90YWxSZW5kZXJUaW1lLCBtZW1vcnlVc2VkLCByZW5kZXJDb3VudCksXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IHRoaXMuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnModG90YWxSZW5kZXJUaW1lLCBtZW1vcnlVc2VkLCByZW5kZXJDb3VudCksXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIHRoaXMubWV0cmljcy5wdXNoKG1ldHJpY3MpO1xuICAgIHRoaXMuaXNQcm9maWxpbmcgPSBmYWxzZTtcbiAgICBcbiAgICBsb2dnZXIuaW5mbyhg8J+TiiBQZXJmb3JtYW5jZSBwcm9maWxpbmcgY29tcGxldGVkIGZvcjogJHtjb21wb25lbnROYW1lfWApO1xuICAgIGxvZ2dlci5pbmZvKGAtIFJlbmRlciBUaW1lOiAke3RvdGFsUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IFVzZWQ6ICR7bWVtb3J5VXNlZC50b0ZpeGVkKDIpfU1CYCk7XG4gICAgbG9nZ2VyLmluZm8oYC0gT3B0aW1pemF0aW9uIFNjb3JlOiAke21ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmV9LzEwMGApO1xuICAgIFxuICAgIHJldHVybiBtZXRyaWNzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgcmUtcmVuZGVyIHRyaWdnZXJzXG4gICAqL1xuICBwcml2YXRlIGFuYWx5emVSZVJlbmRlclRyaWdnZXJzKGNvbXBvbmVudE5hbWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB0cmlnZ2Vyczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBBbmFseXplIGFjdHVhbCByZS1yZW5kZXIgdHJpZ2dlcnMgYmFzZWQgb24gY29tcG9uZW50IGJlaGF2aW9yXG4gICAgY29uc3QgcmVuZGVyQ291bnQgPSB0aGlzLm1ldHJpY3MuZmlsdGVyKG0gPT4gbS5jb21wb25lbnROYW1lID09PSBjb21wb25lbnROYW1lKS5sZW5ndGg7XG4gICAgY29uc3QgcmVjZW50TWV0cmljcyA9IHRoaXMubWV0cmljcy5maWx0ZXIobSA9PiBtLmNvbXBvbmVudE5hbWUgPT09IGNvbXBvbmVudE5hbWUpLnNsaWNlKC0zKTtcbiAgICBcbiAgICAvLyBDaGVjayBmb3IgZXhjZXNzaXZlIHJlLXJlbmRlcnNcbiAgICBpZiAocmVuZGVyQ291bnQgPiA1KSB7XG4gICAgICB0cmlnZ2Vycy5wdXNoKCdFeGNlc3NpdmUgcmUtcmVuZGVycyBkZXRlY3RlZCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcmVuZGVyIHRpbWUgcGF0dGVybnNcbiAgICBpZiAocmVjZW50TWV0cmljcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBhdmdSZW5kZXJUaW1lID0gcmVjZW50TWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5hdmVyYWdlUmVuZGVyVGltZSwgMCkgLyByZWNlbnRNZXRyaWNzLmxlbmd0aDtcbiAgICAgIGlmIChhdmdSZW5kZXJUaW1lID4gMTAwKSB7XG4gICAgICAgIHRyaWdnZXJzLnB1c2goJ1Nsb3cgcmVuZGVyIHRpbWVzJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBtZW1vcnkgcGF0dGVybnNcbiAgICBpZiAocmVjZW50TWV0cmljcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBtZW1vcnlUcmVuZCA9IHJlY2VudE1ldHJpY3MubWFwKG0gPT4gbS5tZW1vcnlQZWFrKTtcbiAgICAgIGNvbnN0IGlzSW5jcmVhc2luZyA9IG1lbW9yeVRyZW5kLmV2ZXJ5KCh2YWwsIGkpID0+IGkgPT09IDAgfHwgdmFsID49IG1lbW9yeVRyZW5kW2kgLSAxXSk7XG4gICAgICBpZiAoaXNJbmNyZWFzaW5nICYmIG1lbW9yeVRyZW5kW21lbW9yeVRyZW5kLmxlbmd0aCAtIDFdID4gNSkge1xuICAgICAgICB0cmlnZ2Vycy5wdXNoKCdJbmNyZWFzaW5nIG1lbW9yeSB1c2FnZSBwYXR0ZXJuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvblxuICAgIGlmIChyZWNlbnRNZXRyaWNzLmxlbmd0aCA+IDIpIHtcbiAgICAgIGNvbnN0IHNjb3JlcyA9IHJlY2VudE1ldHJpY3MubWFwKG0gPT4gbS5vcHRpbWl6YXRpb25TY29yZSk7XG4gICAgICBjb25zdCBpc0RlZ3JhZGluZyA9IHNjb3Jlcy5ldmVyeSgoc2NvcmUsIGkpID0+IGkgPT09IDAgfHwgc2NvcmUgPD0gc2NvcmVzW2kgLSAxXSk7XG4gICAgICBpZiAoaXNEZWdyYWRpbmcgJiYgc2NvcmVzW3Njb3Jlcy5sZW5ndGggLSAxXSA8IDcwKSB7XG4gICAgICAgIHRyaWdnZXJzLnB1c2goJ1BlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uIGRldGVjdGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENvbXBvbmVudC1zcGVjaWZpYyB0cmlnZ2Vyc1xuICAgIGlmIChjb21wb25lbnROYW1lLmluY2x1ZGVzKCdGZWVkJykgfHwgY29tcG9uZW50TmFtZS5pbmNsdWRlcygnTW9iaWxlJykpIHtcbiAgICAgIHRyaWdnZXJzLnB1c2goJ0xhcmdlIGNvbXBvbmVudCB3aXRoIGNvbXBsZXggc3RhdGUgbWFuYWdlbWVudCcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tcG9uZW50TmFtZS5pbmNsdWRlcygnU3RvcmUnKSB8fCBjb21wb25lbnROYW1lLmluY2x1ZGVzKCdadXN0YW5kJykpIHtcbiAgICAgIHRyaWdnZXJzLnB1c2goJ1N0YXRlIG1hbmFnZW1lbnQgdXBkYXRlcycpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJpZ2dlcnM7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBwZXJmb3JtYW5jZSBib3R0bGVuZWNrc1xuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplQm90dGxlbmVja3MocmVuZGVyVGltZTogbnVtYmVyLCBtZW1vcnlVc2FnZTogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGJvdHRsZW5lY2tzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmIChyZW5kZXJUaW1lID4gMjAwKSB7XG4gICAgICBib3R0bGVuZWNrcy5wdXNoKCdTbG93IHJlbmRlciB0aW1lICg+MjAwbXMpJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChtZW1vcnlVc2FnZSA+IDEwKSB7XG4gICAgICBib3R0bGVuZWNrcy5wdXNoKCdIaWdoIG1lbW9yeSB1c2FnZSAoPjEwTUIpJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZW5kZXJUaW1lID4gMTAwICYmIG1lbW9yeVVzYWdlID4gNSkge1xuICAgICAgYm90dGxlbmVja3MucHVzaCgnQ29tYmluZWQgcGVyZm9ybWFuY2UgaXNzdWVzJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBib3R0bGVuZWNrcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgb3B0aW1pemF0aW9uIHNjb3JlICgwLTEwMClcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlT3B0aW1pemF0aW9uU2NvcmUocmVuZGVyVGltZTogbnVtYmVyLCBtZW1vcnlVc2FnZTogbnVtYmVyLCByZW5kZXJDb3VudDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgc2NvcmUgPSAxMDA7XG4gICAgXG4gICAgLy8gRGVkdWN0IHBvaW50cyBmb3Igc2xvdyByZW5kZXIgdGltZXNcbiAgICBpZiAocmVuZGVyVGltZSA+IDMwMCkgc2NvcmUgLT0gNDA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDIwMCkgc2NvcmUgLT0gMzA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDEwMCkgc2NvcmUgLT0gMjA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDUwKSBzY29yZSAtPSAxMDtcbiAgICBcbiAgICAvLyBEZWR1Y3QgcG9pbnRzIGZvciBoaWdoIG1lbW9yeSB1c2FnZVxuICAgIGlmIChtZW1vcnlVc2FnZSA+IDIwKSBzY29yZSAtPSA0MDtcbiAgICBlbHNlIGlmIChtZW1vcnlVc2FnZSA+IDEwKSBzY29yZSAtPSAzMDtcbiAgICBlbHNlIGlmIChtZW1vcnlVc2FnZSA+IDUpIHNjb3JlIC09IDIwO1xuICAgIGVsc2UgaWYgKG1lbW9yeVVzYWdlID4gMikgc2NvcmUgLT0gMTA7XG4gICAgXG4gICAgLy8gRGVkdWN0IHBvaW50cyBmb3IgZXhjZXNzaXZlIHJlLXJlbmRlcnNcbiAgICBpZiAocmVuZGVyQ291bnQgPiAxMCkgc2NvcmUgLT0gMjA7XG4gICAgZWxzZSBpZiAocmVuZGVyQ291bnQgPiA1KSBzY29yZSAtPSAxMDtcbiAgICBcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2NvcmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMocmVuZGVyVGltZTogbnVtYmVyLCBtZW1vcnlVc2FnZTogbnVtYmVyLCByZW5kZXJDb3VudDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBpZiAocmVuZGVyVGltZSA+IDIwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CflKcgSW1wbGVtZW50IFJlYWN0Lm1lbW8gZm9yIGV4cGVuc2l2ZSBjb21wb25lbnRzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UpyBVc2UgdXNlTWVtby91c2VDYWxsYmFjayBmb3IgZXhwZW5zaXZlIGNhbGN1bGF0aW9ucycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CflKcgQ29uc2lkZXIgbGF6eSBsb2FkaW5nIGZvciBoZWF2eSBjb21wb25lbnRzJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChtZW1vcnlVc2FnZSA+IDEwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UpyBJbXBsZW1lbnQgcHJvcGVyIGNsZWFudXAgaW4gdXNlRWZmZWN0IGhvb2tzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UpyBSZXZpZXcgbWVtb3J5IGxlYWtzIGluIGV2ZW50IGxpc3RlbmVycycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CflKcgQ29uc2lkZXIgY29tcG9uZW50IHVubW91bnRpbmcgc3RyYXRlZ2llcycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmVuZGVyQ291bnQgPiA1KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UpyBPcHRpbWl6ZSB1c2VFZmZlY3QgZGVwZW5kZW5jaWVzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UpyBDb25zaWRlciBzdGF0ZSBtYW5hZ2VtZW50IG9wdGltaXphdGlvbicpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CflKcgUmV2aWV3IGNvbXBvbmVudCByZS1yZW5kZXIgcGF0dGVybnMnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlY29tbWVuZGF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfwn5qAIENvbXBvbmVudCBpcyB3ZWxsIG9wdGltaXplZCEnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgY29tcG9uZW50IHByb2ZpbGVcbiAgICovXG4gIGNyZWF0ZUNvbXBvbmVudFByb2ZpbGUobmFtZTogc3RyaW5nLCBtZXRyaWNzOiBQcm9maWxlck1ldHJpY3MpOiBDb21wb25lbnRQcm9maWxlIHtcbiAgICBjb25zdCBwcm9maWxlOiBDb21wb25lbnRQcm9maWxlID0ge1xuICAgICAgbmFtZSxcbiAgICAgIG1ldHJpY3MsXG4gICAgICBjaGlsZHJlbjogW10sXG4gICAgICBkZXB0aDogMCxcbiAgICAgIGlzT3B0aW1pemVkOiBtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlID4gODAsXG4gICAgICBvcHRpbWl6YXRpb25Qb3RlbnRpYWw6IHRoaXMuY2FsY3VsYXRlT3B0aW1pemF0aW9uUG90ZW50aWFsKG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLFxuICAgIH07XG4gICAgXG4gICAgdGhpcy5wcm9maWxlcy5zZXQobmFtZSwgcHJvZmlsZSk7XG4gICAgcmV0dXJuIHByb2ZpbGU7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIG9wdGltaXphdGlvbiBwb3RlbnRpYWxcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlT3B0aW1pemF0aW9uUG90ZW50aWFsKHNjb3JlOiBudW1iZXIpOiAnSElHSCcgfCAnTUVESVVNJyB8ICdMT1cnIHtcbiAgICBpZiAoc2NvcmUgPCA1MCkgcmV0dXJuICdISUdIJztcbiAgICBpZiAoc2NvcmUgPCA4MCkgcmV0dXJuICdNRURJVU0nO1xuICAgIHJldHVybiAnTE9XJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIHBlcmZvcm1hbmNlIGFuYWx5c2lzXG4gICAqL1xuICBnZW5lcmF0ZVBlcmZvcm1hbmNlQW5hbHlzaXMoKTogUGVyZm9ybWFuY2VBbmFseXNpcyB7XG4gICAgY29uc3QgYWxsTWV0cmljcyA9IHRoaXMubWV0cmljcztcbiAgICBjb25zdCB0b3RhbFRlc3RzID0gYWxsTWV0cmljcy5sZW5ndGg7XG4gICAgXG4gICAgaWYgKHRvdGFsVGVzdHMgPT09IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG92ZXJhbGxTY29yZTogMCxcbiAgICAgICAgY3JpdGljYWxJc3N1ZXM6IFsnTm8gcGVyZm9ybWFuY2UgZGF0YSBhdmFpbGFibGUnXSxcbiAgICAgICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogW10sXG4gICAgICAgIG1lbW9yeUxlYWtzOiBbXSxcbiAgICAgICAgcmVuZGVyT3B0aW1pemF0aW9uczogW10sXG4gICAgICAgIG5ldHdvcmtPcHRpbWl6YXRpb25zOiBbXSxcbiAgICAgICAgYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnM6IFtdLFxuICAgICAgICByZWNvbW1lbmRhdGlvbnM6IFsnUnVuIHBlcmZvcm1hbmNlIHRlc3RzIHRvIGdlbmVyYXRlIGFuYWx5c2lzJ10sXG4gICAgICAgIGVzdGltYXRlZEltcHJvdmVtZW50OiAwLFxuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgYXZlcmFnZVNjb3JlID0gYWxsTWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5vcHRpbWl6YXRpb25TY29yZSwgMCkgLyB0b3RhbFRlc3RzO1xuICAgIGNvbnN0IGNyaXRpY2FsSXNzdWVzID0gdGhpcy5pZGVudGlmeUNyaXRpY2FsSXNzdWVzKGFsbE1ldHJpY3MpO1xuICAgIGNvbnN0IG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMgPSB0aGlzLmlkZW50aWZ5T3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyhhbGxNZXRyaWNzKTtcbiAgICBjb25zdCBtZW1vcnlMZWFrcyA9IHRoaXMuaWRlbnRpZnlNZW1vcnlMZWFrcyhhbGxNZXRyaWNzKTtcbiAgICBjb25zdCByZW5kZXJPcHRpbWl6YXRpb25zID0gdGhpcy5pZGVudGlmeVJlbmRlck9wdGltaXphdGlvbnMoYWxsTWV0cmljcyk7XG4gICAgY29uc3QgbmV0d29ya09wdGltaXphdGlvbnMgPSB0aGlzLmlkZW50aWZ5TmV0d29ya09wdGltaXphdGlvbnMoYWxsTWV0cmljcyk7XG4gICAgY29uc3QgYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnMgPSB0aGlzLmlkZW50aWZ5QWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnMoYWxsTWV0cmljcyk7XG4gICAgXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zID0gdGhpcy5nZW5lcmF0ZUNvbXByZWhlbnNpdmVSZWNvbW1lbmRhdGlvbnMoXG4gICAgICBjcml0aWNhbElzc3VlcyxcbiAgICAgIG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMsXG4gICAgICBtZW1vcnlMZWFrcyxcbiAgICAgIHJlbmRlck9wdGltaXphdGlvbnMsXG4gICAgICBuZXR3b3JrT3B0aW1pemF0aW9ucyxcbiAgICAgIGFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBlc3RpbWF0ZWRJbXByb3ZlbWVudCA9IHRoaXMuY2FsY3VsYXRlRXN0aW1hdGVkSW1wcm92ZW1lbnQoYWxsTWV0cmljcyk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIG92ZXJhbGxTY29yZTogYXZlcmFnZVNjb3JlLFxuICAgICAgY3JpdGljYWxJc3N1ZXMsXG4gICAgICBvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzLFxuICAgICAgbWVtb3J5TGVha3MsXG4gICAgICByZW5kZXJPcHRpbWl6YXRpb25zLFxuICAgICAgbmV0d29ya09wdGltaXphdGlvbnMsXG4gICAgICBhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyxcbiAgICAgIHJlY29tbWVuZGF0aW9ucyxcbiAgICAgIGVzdGltYXRlZEltcHJvdmVtZW50LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogSWRlbnRpZnkgY3JpdGljYWwgcGVyZm9ybWFuY2UgaXNzdWVzXG4gICAqL1xuICBwcml2YXRlIGlkZW50aWZ5Q3JpdGljYWxJc3N1ZXMobWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGNvbnN0IHNsb3dDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmF2ZXJhZ2VSZW5kZXJUaW1lID4gMjAwKTtcbiAgICBjb25zdCBoaWdoTWVtb3J5Q29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5tZW1vcnlQZWFrID4gMTApO1xuICAgIGNvbnN0IGxvd1Njb3JlQ29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5vcHRpbWl6YXRpb25TY29yZSA8IDUwKTtcbiAgICBcbiAgICBpZiAoc2xvd0NvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaXNzdWVzLnB1c2goYPCfmqggJHtzbG93Q29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgd2l0aCBzbG93IHJlbmRlciB0aW1lcyAoPjIwMG1zKWApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaGlnaE1lbW9yeUNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaXNzdWVzLnB1c2goYPCfmqggJHtoaWdoTWVtb3J5Q29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgd2l0aCBoaWdoIG1lbW9yeSB1c2FnZSAoPjEwTUIpYCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChsb3dTY29yZUNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaXNzdWVzLnB1c2goYPCfmqggJHtsb3dTY29yZUNvbXBvbmVudHMubGVuZ3RofSBjb21wb25lbnRzIHdpdGggcG9vciBvcHRpbWl6YXRpb24gc2NvcmVzICg8NTApYCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBpc3N1ZXM7XG4gIH1cblxuICAvKipcbiAgICogSWRlbnRpZnkgb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXNcbiAgICovXG4gIHByaXZhdGUgaWRlbnRpZnlPcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljc1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG9wcG9ydHVuaXRpZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgY29uc3QgbWVkaXVtU2NvcmVDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLm9wdGltaXphdGlvblNjb3JlID49IDUwICYmIG0ub3B0aW1pemF0aW9uU2NvcmUgPCA4MCk7XG4gICAgY29uc3QgaGlnaFJlbmRlckNvdW50Q29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5yZW5kZXJDb3VudCA+IDUpO1xuICAgIFxuICAgIGlmIChtZWRpdW1TY29yZUNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgb3Bwb3J0dW5pdGllcy5wdXNoKGDwn5KhICR7bWVkaXVtU2NvcmVDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyB3aXRoIG1lZGl1bSBvcHRpbWl6YXRpb24gcG90ZW50aWFsYCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChoaWdoUmVuZGVyQ291bnRDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wcG9ydHVuaXRpZXMucHVzaChg8J+SoSAke2hpZ2hSZW5kZXJDb3VudENvbXBvbmVudHMubGVuZ3RofSBjb21wb25lbnRzIHdpdGggZXhjZXNzaXZlIHJlLXJlbmRlcnNgKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG9wcG9ydHVuaXRpZXM7XG4gIH1cblxuICAvKipcbiAgICogSWRlbnRpZnkgbWVtb3J5IGxlYWtzXG4gICAqL1xuICBwcml2YXRlIGlkZW50aWZ5TWVtb3J5TGVha3MobWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGVha3M6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgY29uc3QgaGlnaE1lbW9yeUNvbXBvbmVudHMgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ubWVtb3J5UGVhayA+IDEwKTtcbiAgICBjb25zdCBpbmNyZWFzaW5nTWVtb3J5Q29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5tZW1vcnlQZWFrID4gbS5tZW1vcnlBdmVyYWdlICogMik7XG4gICAgXG4gICAgaWYgKGhpZ2hNZW1vcnlDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWtzLnB1c2goYPCflI0gJHtoaWdoTWVtb3J5Q29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgd2l0aCBoaWdoIG1lbW9yeSB1c2FnZWApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaW5jcmVhc2luZ01lbW9yeUNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgbGVha3MucHVzaChg8J+UjSAke2luY3JlYXNpbmdNZW1vcnlDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyB3aXRoIGluY3JlYXNpbmcgbWVtb3J5IHVzYWdlYCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBsZWFrcztcbiAgfVxuXG4gIC8qKlxuICAgKiBJZGVudGlmeSByZW5kZXIgb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmeVJlbmRlck9wdGltaXphdGlvbnMobWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgb3B0aW1pemF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBjb25zdCBzbG93UmVuZGVyQ29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5hdmVyYWdlUmVuZGVyVGltZSA+IDEwMCk7XG4gICAgY29uc3QgaGlnaFJlbmRlckNvdW50Q29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5yZW5kZXJDb3VudCA+IDMpO1xuICAgIFxuICAgIGlmIChzbG93UmVuZGVyQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goYOKaoSAke3Nsb3dSZW5kZXJDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyBuZWVkIHJlbmRlciBvcHRpbWl6YXRpb25gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGhpZ2hSZW5kZXJDb3VudENvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKGDimqEgJHtoaWdoUmVuZGVyQ291bnRDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyBuZWVkIHJlLXJlbmRlciBvcHRpbWl6YXRpb25gKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG9wdGltaXphdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogSWRlbnRpZnkgbmV0d29yayBvcHRpbWl6YXRpb25zXG4gICAqL1xuICBwcml2YXRlIGlkZW50aWZ5TmV0d29ya09wdGltaXphdGlvbnMobWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgb3B0aW1pemF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBBbmFseXplIG5ldHdvcmstcmVsYXRlZCBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgY29uc3QgbmV0d29ya01ldHJpY3MgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ubmV0d29ya1RpbWUgPiAwKTtcbiAgICBjb25zdCBoaWdoTmV0d29ya1RpbWUgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ubmV0d29ya1RpbWUgPiAzMDApO1xuICAgIGNvbnN0IGFwaU1ldHJpY3MgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0uYXBpVGltZSA+IDApO1xuICAgIGNvbnN0IGhpZ2hBcGlUaW1lID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmFwaVRpbWUgPiAyMDApO1xuICAgIFxuICAgIC8vIE5ldHdvcmsgcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICBpZiAobmV0d29ya01ldHJpY3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgYXZnTmV0d29ya1RpbWUgPSBuZXR3b3JrTWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5uZXR3b3JrVGltZSwgMCkgLyBuZXR3b3JrTWV0cmljcy5sZW5ndGg7XG4gICAgICBpZiAoYXZnTmV0d29ya1RpbWUgPiAyMDApIHtcbiAgICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn4yQIEhpZ2ggbmV0d29yayBsYXRlbmN5IGRldGVjdGVkIC0gY29uc2lkZXIgQ0ROIGltcGxlbWVudGF0aW9uJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXZnTmV0d29ya1RpbWUgPiA1MDApIHtcbiAgICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn4yQIENyaXRpY2FsIG5ldHdvcmsgcGVyZm9ybWFuY2UgaXNzdWVzIC0gb3B0aW1pemUgQVBJIGVuZHBvaW50cycpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBUEkgcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICBpZiAoYXBpTWV0cmljcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhdmdBcGlUaW1lID0gYXBpTWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5hcGlUaW1lLCAwKSAvIGFwaU1ldHJpY3MubGVuZ3RoO1xuICAgICAgaWYgKGF2Z0FwaVRpbWUgPiAxNTApIHtcbiAgICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn5SMIEFQSSByZXNwb25zZSB0aW1lcyBhcmUgc2xvdyAtIGltcGxlbWVudCBjYWNoaW5nIHN0cmF0ZWdpZXMnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdmdBcGlUaW1lID4gMzAwKSB7XG4gICAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn8J+UjCBDcml0aWNhbCBBUEkgcGVyZm9ybWFuY2UgaXNzdWVzIC0gb3B0aW1pemUgZGF0YWJhc2UgcXVlcmllcycpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBOZXR3b3JrIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gcGF0dGVybnNcbiAgICBpZiAoaGlnaE5ldHdvcmtUaW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn8J+MkCBJbXBsZW1lbnQgcmVxdWVzdCBiYXRjaGluZyBmb3IgbXVsdGlwbGUgQVBJIGNhbGxzJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ/CfjJAgQWRkIHJlcXVlc3QgZGVkdXBsaWNhdGlvbiB0byBwcmV2ZW50IGR1cGxpY2F0ZSBjYWxscycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaGlnaEFwaVRpbWUubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn5SMIEltcGxlbWVudCBBUEkgcmVzcG9uc2UgY2FjaGluZyB3aXRoIFRUTCcpO1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn5SMIEFkZCBkYXRhYmFzZSBxdWVyeSBvcHRpbWl6YXRpb24nKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJhbCBuZXR3b3JrIG9wdGltaXphdGlvbnNcbiAgICBpZiAobmV0d29ya01ldHJpY3MubGVuZ3RoID4gMikge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn4yQIENvbnNpZGVyIGltcGxlbWVudGluZyBzZXJ2aWNlIHdvcmtlciBmb3Igb2ZmbGluZSBjYWNoaW5nJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ/CfjJAgQWRkIHJlcXVlc3QgY29tcHJlc3Npb24gZm9yIGxhcmdlIHBheWxvYWRzJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBvcHRpbWl6YXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIElkZW50aWZ5IGFjY2Vzc2liaWxpdHkgb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmeUFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljc1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG9wdGltaXphdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQW5hbHl6ZSBhY2Nlc3NpYmlsaXR5LXJlbGF0ZWQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgIGNvbnN0IGFjY2Vzc2liaWxpdHlNZXRyaWNzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmFjY2Vzc2liaWxpdHlUaW1lID4gMCk7XG4gICAgY29uc3QgaGlnaEFjY2Vzc2liaWxpdHlUaW1lID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmFjY2Vzc2liaWxpdHlUaW1lID4gNTApO1xuICAgIGNvbnN0IHNsb3dDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmF2ZXJhZ2VSZW5kZXJUaW1lID4gMTAwKTtcbiAgICBjb25zdCBtZW1vcnlJbnRlbnNpdmVDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLm1lbW9yeVBlYWsgPiA1KTtcbiAgICBcbiAgICAvLyBBY2Nlc3NpYmlsaXR5IHBlcmZvcm1hbmNlIGFuYWx5c2lzXG4gICAgaWYgKGFjY2Vzc2liaWxpdHlNZXRyaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGF2Z0FjY2Vzc2liaWxpdHlUaW1lID0gYWNjZXNzaWJpbGl0eU1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0uYWNjZXNzaWJpbGl0eVRpbWUsIDApIC8gYWNjZXNzaWJpbGl0eU1ldHJpY3MubGVuZ3RoO1xuICAgICAgaWYgKGF2Z0FjY2Vzc2liaWxpdHlUaW1lID4gMzApIHtcbiAgICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gU2NyZWVuIHJlYWRlciBwZXJmb3JtYW5jZSBpcyBzbG93IC0gb3B0aW1pemUgQVJJQSBhbm5vdW5jZW1lbnRzJyk7XG4gICAgICB9XG4gICAgICBpZiAoYXZnQWNjZXNzaWJpbGl0eVRpbWUgPiA3NSkge1xuICAgICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBDcml0aWNhbCBhY2Nlc3NpYmlsaXR5IHBlcmZvcm1hbmNlIGlzc3VlcyAtIHJldmlldyBzY3JlZW4gcmVhZGVyIGltcGxlbWVudGF0aW9uJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFNjcmVlbiByZWFkZXIgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgIGlmIChoaWdoQWNjZXNzaWJpbGl0eVRpbWUubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gSW1wbGVtZW50IGVmZmljaWVudCBsaXZlIHJlZ2lvbiBtYW5hZ2VtZW50IGZvciBzY3JlZW4gcmVhZGVycycpO1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gT3B0aW1pemUgQVJJQSBhdHRyaWJ1dGUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBBZGQgZGVib3VuY2luZyBmb3Igc2NyZWVuIHJlYWRlciBhbm5vdW5jZW1lbnRzJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEtleWJvYXJkIG5hdmlnYXRpb24gb3B0aW1pemF0aW9uXG4gICAgaWYgKHNsb3dDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IE9wdGltaXplIGtleWJvYXJkIG5hdmlnYXRpb24gZm9yIHNsb3ctcmVuZGVyaW5nIGNvbXBvbmVudHMnKTtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IEltcGxlbWVudCBmb2N1cyBtYW5hZ2VtZW50IG9wdGltaXphdGlvbicpO1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gQWRkIGtleWJvYXJkIHNob3J0Y3V0IHBlcmZvcm1hbmNlIGltcHJvdmVtZW50cycpO1xuICAgIH1cbiAgICBcbiAgICAvLyBNZW1vcnkgb3B0aW1pemF0aW9uIGZvciBhY2Nlc3NpYmlsaXR5XG4gICAgaWYgKG1lbW9yeUludGVuc2l2ZUNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gT3B0aW1pemUgYWNjZXNzaWJpbGl0eSBmZWF0dXJlcyBmb3IgbWVtb3J5LWludGVuc2l2ZSBjb21wb25lbnRzJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBJbXBsZW1lbnQgZWZmaWNpZW50IGFjY2Vzc2liaWxpdHkgc3RhdGUgbWFuYWdlbWVudCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZW5lcmFsIGFjY2Vzc2liaWxpdHkgb3B0aW1pemF0aW9uc1xuICAgIGlmIChtZXRyaWNzLmxlbmd0aCA+IDIpIHtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IENvbnNpZGVyIGltcGxlbWVudGluZyBhY2Nlc3NpYmlsaXR5IHBlcmZvcm1hbmNlIG1vbml0b3JpbmcnKTtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IEFkZCBhY2Nlc3NpYmlsaXR5IGZlYXR1cmUgbGF6eSBsb2FkaW5nJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBPcHRpbWl6ZSBhY2Nlc3NpYmlsaXR5IHRlc3RpbmcgcGVyZm9ybWFuY2UnKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG9wdGltaXphdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVjb21tZW5kYXRpb25zKFxuICAgIGNyaXRpY2FsSXNzdWVzOiBzdHJpbmdbXSxcbiAgICBvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzOiBzdHJpbmdbXSxcbiAgICBtZW1vcnlMZWFrczogc3RyaW5nW10sXG4gICAgcmVuZGVyT3B0aW1pemF0aW9uczogc3RyaW5nW10sXG4gICAgbmV0d29ya09wdGltaXphdGlvbnM6IHN0cmluZ1tdLFxuICAgIGFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zOiBzdHJpbmdbXVxuICApOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmIChjcml0aWNhbElzc3Vlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+aqCBQUklPUklUWTogQWRkcmVzcyBjcml0aWNhbCBwZXJmb3JtYW5jZSBpc3N1ZXMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLmNyaXRpY2FsSXNzdWVzKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKG1lbW9yeUxlYWtzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfwn5SNIFBSSU9SSVRZOiBGaXggbWVtb3J5IGxlYWtzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5tZW1vcnlMZWFrcyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZW5kZXJPcHRpbWl6YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfimqEgSElHSDogT3B0aW1pemUgcmVuZGVyIHBlcmZvcm1hbmNlJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5yZW5kZXJPcHRpbWl6YXRpb25zKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CfkqEgTUVESVVNOiBJbXBsZW1lbnQgb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLm9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMpO1xuICAgIH1cbiAgICBcbiAgICBpZiAobmV0d29ya09wdGltaXphdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CfjJAgTUVESVVNOiBPcHRpbWl6ZSBuZXR3b3JrIHBlcmZvcm1hbmNlJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5uZXR3b3JrT3B0aW1pemF0aW9ucyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn4pm/IExPVzogT3B0aW1pemUgYWNjZXNzaWJpbGl0eSBwZXJmb3JtYW5jZScpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goLi4uYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnMpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmVjb21tZW5kYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CfmoAgRXhjZWxsZW50IHBlcmZvcm1hbmNlISBObyBvcHRpbWl6YXRpb25zIG5lZWRlZC4nKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZXN0aW1hdGVkIGltcHJvdmVtZW50IHBlcmNlbnRhZ2VcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlRXN0aW1hdGVkSW1wcm92ZW1lbnQobWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10pOiBudW1iZXIge1xuICAgIGNvbnN0IGF2ZXJhZ2VTY29yZSA9IG1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0ub3B0aW1pemF0aW9uU2NvcmUsIDApIC8gbWV0cmljcy5sZW5ndGg7XG4gICAgY29uc3QgbWF4UG9zc2libGVTY29yZSA9IDEwMDtcbiAgICBjb25zdCBpbXByb3ZlbWVudCA9IG1heFBvc3NpYmxlU2NvcmUgLSBhdmVyYWdlU2NvcmU7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIGltcHJvdmVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGNvbXBvbmVudCBwcm9maWxlc1xuICAgKi9cbiAgZ2V0Q29tcG9uZW50UHJvZmlsZXMoKTogQ29tcG9uZW50UHJvZmlsZVtdIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb2ZpbGVzLnZhbHVlcygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgbWV0cmljcyBmb3IgYSBzcGVjaWZpYyBjb21wb25lbnRcbiAgICovXG4gIGdldENvbXBvbmVudE1ldHJpY3MoY29tcG9uZW50TmFtZTogc3RyaW5nKTogUHJvZmlsZXJNZXRyaWNzIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5tZXRyaWNzLmZpbmQobSA9PiBtLmNvbXBvbmVudE5hbWUgPT09IGNvbXBvbmVudE5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgYWxlcnRzXG4gICAqL1xuICBnZXRBbGVydHMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLmFsZXJ0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgcGVyZm9ybWFuY2UgZ3JhZGVcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlUGVyZm9ybWFuY2VHcmFkZShyZW5kZXJUaW1lOiBudW1iZXIsIG1lbW9yeVVzYWdlOiBudW1iZXIpOiAnQSsnIHwgJ0EnIHwgJ0InIHwgJ0MnIHwgJ0QnIHwgJ0YnIHtcbiAgICBsZXQgc2NvcmUgPSAxMDA7XG4gICAgXG4gICAgLy8gUmVuZGVyIHRpbWUgc2NvcmluZ1xuICAgIGlmIChyZW5kZXJUaW1lIDwgNTApIHNjb3JlICs9IDEwO1xuICAgIGVsc2UgaWYgKHJlbmRlclRpbWUgPCAxMDApIHNjb3JlICs9IDU7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDIwMCkgc2NvcmUgLT0gMzA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDE1MCkgc2NvcmUgLT0gMjA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDEwMCkgc2NvcmUgLT0gMTA7XG4gICAgXG4gICAgLy8gTWVtb3J5IHVzYWdlIHNjb3JpbmdcbiAgICBpZiAobWVtb3J5VXNhZ2UgPCAxKSBzY29yZSArPSAxMDtcbiAgICBlbHNlIGlmIChtZW1vcnlVc2FnZSA8IDIpIHNjb3JlICs9IDU7XG4gICAgZWxzZSBpZiAobWVtb3J5VXNhZ2UgPiAxMCkgc2NvcmUgLT0gMzA7XG4gICAgZWxzZSBpZiAobWVtb3J5VXNhZ2UgPiA1KSBzY29yZSAtPSAyMDtcbiAgICBlbHNlIGlmIChtZW1vcnlVc2FnZSA+IDIpIHNjb3JlIC09IDEwO1xuICAgIFxuICAgIGlmIChzY29yZSA+PSA5NSkgcmV0dXJuICdBKyc7XG4gICAgaWYgKHNjb3JlID49IDkwKSByZXR1cm4gJ0EnO1xuICAgIGlmIChzY29yZSA+PSA4MCkgcmV0dXJuICdCJztcbiAgICBpZiAoc2NvcmUgPj0gNzApIHJldHVybiAnQyc7XG4gICAgaWYgKHNjb3JlID49IDYwKSByZXR1cm4gJ0QnO1xuICAgIHJldHVybiAnRic7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIHByb2ZpbGluZyBkYXRhXG4gICAqL1xuICBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLnByb2ZpbGVzLmNsZWFyKCk7XG4gICAgdGhpcy5tZXRyaWNzID0gW107XG4gICAgdGhpcy5hbGVydHMgPSBbXTtcbiAgICB0aGlzLmlzUHJvZmlsaW5nID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmVjb3JkIHRlc3QgbWV0cmljc1xuICAgKi9cbiAgcmVjb3JkTWV0cmljcyhtZXRyaWNzOiBPbWl0PFByb2ZpbGVyTWV0cmljcywgJ3RpbWVzdGFtcCc+KTogdm9pZCB7XG4gICAgY29uc3QgZnVsbE1ldHJpY3M6IFByb2ZpbGVyTWV0cmljcyA9IHtcbiAgICAgIC4uLm1ldHJpY3MsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLm1ldHJpY3MucHVzaChmdWxsTWV0cmljcyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHBlcmZvcm1hbmNlIGFsZXJ0c1xuICAgIHRoaXMuY2hlY2tQZXJmb3JtYW5jZUFsZXJ0cyhmdWxsTWV0cmljcyk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHBlcmZvcm1hbmNlIGFsZXJ0c1xuICAgKi9cbiAgcHJpdmF0ZSBjaGVja1BlcmZvcm1hbmNlQWxlcnRzKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljcyk6IHZvaWQge1xuICAgIGNvbnN0IGFsZXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIFJlbmRlciB0aW1lIGFsZXJ0c1xuICAgIGlmIChtZXRyaWNzLnJlbmRlclRpbWUgPiAyMDApIHtcbiAgICAgIGFsZXJ0cy5wdXNoKGDimqDvuI8gU0xPVyBSRU5ERVI6ICR7bWV0cmljcy5jb21wb25lbnROYW1lfSB0b29rICR7bWV0cmljcy5yZW5kZXJUaW1lLnRvRml4ZWQoMil9bXMgKGJ1ZGdldDogMjAwbXMpYCk7XG4gICAgfVxuXG4gICAgLy8gTWVtb3J5IHVzYWdlIGFsZXJ0c1xuICAgIGlmIChtZXRyaWNzLm1lbW9yeVBlYWsgPiAxMCkge1xuICAgICAgYWxlcnRzLnB1c2goYOKaoO+4jyBISUdIIE1FTU9SWTogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9IHVzZWQgJHttZXRyaWNzLm1lbW9yeVBlYWsudG9GaXhlZCgyKX1NQiAoYnVkZ2V0OiAxME1CKWApO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm1hbmNlIGdyYWRlIGFsZXJ0c1xuICAgIGlmIChtZXRyaWNzLnBlcmZvcm1hbmNlR3JhZGUgPT09ICdEJyB8fCBtZXRyaWNzLnBlcmZvcm1hbmNlR3JhZGUgPT09ICdGJykge1xuICAgICAgYWxlcnRzLnB1c2goYPCfmqggUE9PUiBQRVJGT1JNQU5DRTogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9IHJlY2VpdmVkIGdyYWRlICR7bWV0cmljcy5wZXJmb3JtYW5jZUdyYWRlfWApO1xuICAgIH1cblxuICAgIC8vIE5ldHdvcmsgdGltZSBhbGVydHNcbiAgICBpZiAobWV0cmljcy5uZXR3b3JrVGltZSA+IDUwMCkge1xuICAgICAgYWxlcnRzLnB1c2goYOKaoO+4jyBTTE9XIE5FVFdPUks6ICR7bWV0cmljcy5jb21wb25lbnROYW1lfSBuZXR3b3JrIHRvb2sgJHttZXRyaWNzLm5ldHdvcmtUaW1lLnRvRml4ZWQoMil9bXMgKGJ1ZGdldDogNTAwbXMpYCk7XG4gICAgfVxuXG4gICAgdGhpcy5hbGVydHMucHVzaCguLi5hbGVydHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrIGNvbXBvbmVudCBsaWZlY3ljbGUgcGVyZm9ybWFuY2VcbiAgICovXG4gIHRyYWNrQ29tcG9uZW50TGlmZWN5Y2xlKGNvbXBvbmVudE5hbWU6IHN0cmluZywgbGlmZWN5Y2xlOiAnbW91bnQnIHwgJ3VwZGF0ZScgfCAndW5tb3VudCcsIGR1cmF0aW9uOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBsaWZlY3ljbGVNZXRyaWNzID0gdGhpcy5tZXRyaWNzLmZpbmQobSA9PiBtLmNvbXBvbmVudE5hbWUgPT09IGNvbXBvbmVudE5hbWUpO1xuICAgIGlmIChsaWZlY3ljbGVNZXRyaWNzKSB7XG4gICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgbWV0cmljcyB3aXRoIGxpZmVjeWNsZSBkYXRhXG4gICAgICBpZiAobGlmZWN5Y2xlTWV0cmljcy5yZVJlbmRlclRyaWdnZXJzKSB7XG4gICAgICAgIGxpZmVjeWNsZU1ldHJpY3MucmVSZW5kZXJUcmlnZ2Vycy5wdXNoKGAke2xpZmVjeWNsZX0gdG9vayAke2R1cmF0aW9uLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpZmVjeWNsZU1ldHJpY3MucmVSZW5kZXJUcmlnZ2VycyA9IFtgJHtsaWZlY3ljbGV9IHRvb2sgJHtkdXJhdGlvbi50b0ZpeGVkKDIpfW1zYF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgbWV0cmljcyBmb3IgbGlmZWN5Y2xlIHRyYWNraW5nXG4gICAgICB0aGlzLnJlY29yZE1ldHJpY3Moe1xuICAgICAgICBjb21wb25lbnROYW1lLFxuICAgICAgICB0ZXN0U3VpdGU6ICdDb21wb25lbnQgTGlmZWN5Y2xlJyxcbiAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIG1lbW9yeVVzYWdlOiAwLFxuICAgICAgICByZW5kZXJUaW1lOiBkdXJhdGlvbixcbiAgICAgICAgbmV0d29ya1RpbWU6IDAsXG4gICAgICAgIGFwaVRpbWU6IDAsXG4gICAgICAgIGFjY2Vzc2liaWxpdHlUaW1lOiAwLFxuICAgICAgICBwZXJmb3JtYW5jZUdyYWRlOiB0aGlzLmNhbGN1bGF0ZVBlcmZvcm1hbmNlR3JhZGUoZHVyYXRpb24sIDApLFxuICAgICAgICBzdGF0dXM6ICdQQVNTJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBsb2dnZXIuaW5mbyhg8J+UhCBDb21wb25lbnQgTGlmZWN5Y2xlOiAke2NvbXBvbmVudE5hbWV9ICR7bGlmZWN5Y2xlfSAtICR7ZHVyYXRpb24udG9GaXhlZCgyKX1tc2ApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuYWx5emUgcGVyZm9ybWFuY2UgcGF0dGVybnMgYWNyb3NzIG11bHRpcGxlIHJ1bnNcbiAgICovXG4gIGFuYWx5emVQZXJmb3JtYW5jZVBhdHRlcm5zKCk6IHtcbiAgICB0cmVuZGluZ1VwOiBzdHJpbmdbXTtcbiAgICB0cmVuZGluZ0Rvd246IHN0cmluZ1tdO1xuICAgIHN0YWJsZTogc3RyaW5nW107XG4gICAgdm9sYXRpbGU6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCBjb21wb25lbnRHcm91cHMgPSBuZXcgTWFwPHN0cmluZywgUHJvZmlsZXJNZXRyaWNzW10+KCk7XG4gICAgXG4gICAgLy8gR3JvdXAgbWV0cmljcyBieSBjb21wb25lbnRcbiAgICB0aGlzLm1ldHJpY3MuZm9yRWFjaChtZXRyaWMgPT4ge1xuICAgICAgaWYgKCFjb21wb25lbnRHcm91cHMuaGFzKG1ldHJpYy5jb21wb25lbnROYW1lKSkge1xuICAgICAgICBjb21wb25lbnRHcm91cHMuc2V0KG1ldHJpYy5jb21wb25lbnROYW1lLCBbXSk7XG4gICAgICB9XG4gICAgICBjb21wb25lbnRHcm91cHMuZ2V0KG1ldHJpYy5jb21wb25lbnROYW1lKSEucHVzaChtZXRyaWMpO1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHRyZW5kaW5nVXA6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdHJlbmRpbmdEb3duOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN0YWJsZTogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2b2xhdGlsZTogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBjb21wb25lbnRHcm91cHMuZm9yRWFjaCgobWV0cmljcywgY29tcG9uZW50TmFtZSkgPT4ge1xuICAgICAgaWYgKG1ldHJpY3MubGVuZ3RoIDwgMykgcmV0dXJuOyAvLyBOZWVkIGF0IGxlYXN0IDMgZGF0YSBwb2ludHNcbiAgICAgIFxuICAgICAgY29uc3Qgc2NvcmVzID0gbWV0cmljcy5tYXAobSA9PiBtLm9wdGltaXphdGlvblNjb3JlKTtcbiAgICAgIGNvbnN0IHJlbmRlclRpbWVzID0gbWV0cmljcy5tYXAobSA9PiBtLmF2ZXJhZ2VSZW5kZXJUaW1lKTtcbiAgICAgIGNvbnN0IG1lbW9yeVVzYWdlID0gbWV0cmljcy5tYXAobSA9PiBtLm1lbW9yeVBlYWspO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgdHJlbmRzXG4gICAgICBjb25zdCBzY29yZVRyZW5kID0gdGhpcy5jYWxjdWxhdGVUcmVuZChzY29yZXMpO1xuICAgICAgY29uc3QgcmVuZGVyVHJlbmQgPSB0aGlzLmNhbGN1bGF0ZVRyZW5kKHJlbmRlclRpbWVzKTtcbiAgICAgIGNvbnN0IG1lbW9yeVRyZW5kID0gdGhpcy5jYWxjdWxhdGVUcmVuZChtZW1vcnlVc2FnZSk7XG4gICAgICBcbiAgICAgIC8vIERldGVybWluZSBjb21wb25lbnQgcGVyZm9ybWFuY2UgcGF0dGVyblxuICAgICAgaWYgKHNjb3JlVHJlbmQgPiAwLjEgJiYgcmVuZGVyVHJlbmQgPCAtMC4xKSB7XG4gICAgICAgIHRyZW5kaW5nVXAucHVzaChgJHtjb21wb25lbnROYW1lfTogUGVyZm9ybWFuY2UgaW1wcm92aW5nIChzY29yZSArJHtzY29yZVRyZW5kLnRvRml4ZWQoMil9LCByZW5kZXIgLSR7TWF0aC5hYnMocmVuZGVyVHJlbmQpLnRvRml4ZWQoMil9bXMpYCk7XG4gICAgICB9IGVsc2UgaWYgKHNjb3JlVHJlbmQgPCAtMC4xICYmIHJlbmRlclRyZW5kID4gMC4xKSB7XG4gICAgICAgIHRyZW5kaW5nRG93bi5wdXNoKGAke2NvbXBvbmVudE5hbWV9OiBQZXJmb3JtYW5jZSBkZWdyYWRpbmcgKHNjb3JlICR7c2NvcmVUcmVuZC50b0ZpeGVkKDIpfSwgcmVuZGVyICske3JlbmRlclRyZW5kLnRvRml4ZWQoMil9bXMpYCk7XG4gICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKHNjb3JlVHJlbmQpIDwgMC4wNSAmJiBNYXRoLmFicyhyZW5kZXJUcmVuZCkgPCAxMCkge1xuICAgICAgICBzdGFibGUucHVzaChgJHtjb21wb25lbnROYW1lfTogUGVyZm9ybWFuY2Ugc3RhYmxlIChzY29yZSAke3Njb3JlVHJlbmQudG9GaXhlZCgyKX0sIHJlbmRlciAke3JlbmRlclRyZW5kLnRvRml4ZWQoMil9bXMpYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2b2xhdGlsZS5wdXNoKGAke2NvbXBvbmVudE5hbWV9OiBQZXJmb3JtYW5jZSB2b2xhdGlsZSAoc2NvcmUgJHtzY29yZVRyZW5kLnRvRml4ZWQoMil9LCByZW5kZXIgJHtyZW5kZXJUcmVuZC50b0ZpeGVkKDIpfW1zKWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7IHRyZW5kaW5nVXAsIHRyZW5kaW5nRG93biwgc3RhYmxlLCB2b2xhdGlsZSB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0cmVuZCBmb3IgYSBzZXJpZXMgb2YgdmFsdWVzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVRyZW5kKHZhbHVlczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoIDwgMikgcmV0dXJuIDA7XG4gICAgXG4gICAgY29uc3QgZmlyc3QgPSB2YWx1ZXNbMF07XG4gICAgY29uc3QgbGFzdCA9IHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgY2hhbmdlID0gbGFzdCAtIGZpcnN0O1xuICAgIGNvbnN0IHBlcmNlbnRDaGFuZ2UgPSBmaXJzdCAhPT0gMCA/IChjaGFuZ2UgLyBmaXJzdCkgOiAwO1xuICAgIFxuICAgIHJldHVybiBwZXJjZW50Q2hhbmdlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwZXJmb3JtYW5jZSBpbnNpZ2h0cyBhbmQgcmVjb21tZW5kYXRpb25zXG4gICAqL1xuICBnZXRQZXJmb3JtYW5jZUluc2lnaHRzKCk6IHtcbiAgICB0b3BQZXJmb3JtZXJzOiBzdHJpbmdbXTtcbiAgICBuZWVkc0F0dGVudGlvbjogc3RyaW5nW107XG4gICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogc3RyaW5nW107XG4gICAgY3JpdGljYWxJc3N1ZXM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCB0b3BQZXJmb3JtZXJzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG5lZWRzQXR0ZW50aW9uOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgY3JpdGljYWxJc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgdGhpcy5tZXRyaWNzLmZvckVhY2gobWV0cmljID0+IHtcbiAgICAgIC8vIFVzZSBvcHRpbWl6YXRpb25TY29yZSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBjb252ZXJ0IHBlcmZvcm1hbmNlR3JhZGUgdG8gc2NvcmVcbiAgICAgIGNvbnN0IHNjb3JlID0gbWV0cmljLm9wdGltaXphdGlvblNjb3JlIHx8IHRoaXMuY29udmVydEdyYWRlVG9TY29yZShtZXRyaWMucGVyZm9ybWFuY2VHcmFkZSk7XG4gICAgICBcbiAgICAgIGlmIChzY29yZSA+PSA5MCkge1xuICAgICAgICB0b3BQZXJmb3JtZXJzLnB1c2goYCR7bWV0cmljLmNvbXBvbmVudE5hbWV9OiAke3Njb3JlfS8xMDAgKEVYQ0VMTEVOVClgKTtcbiAgICAgIH0gZWxzZSBpZiAoc2NvcmUgPj0gNzApIHtcbiAgICAgICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcy5wdXNoKGAke21ldHJpYy5jb21wb25lbnROYW1lfTogJHtzY29yZX0vMTAwIChHT09EIC0gcm9vbSBmb3IgaW1wcm92ZW1lbnQpYCk7XG4gICAgICB9IGVsc2UgaWYgKHNjb3JlID49IDUwKSB7XG4gICAgICAgIG5lZWRzQXR0ZW50aW9uLnB1c2goYCR7bWV0cmljLmNvbXBvbmVudE5hbWV9OiAke3Njb3JlfS8xMDAgKE5FRURTIEFUVEVOVElPTilgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNyaXRpY2FsSXNzdWVzLnB1c2goYCR7bWV0cmljLmNvbXBvbmVudE5hbWV9OiAke3Njb3JlfS8xMDAgKENSSVRJQ0FMKWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB7IHRvcFBlcmZvcm1lcnMsIG5lZWRzQXR0ZW50aW9uLCBvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzLCBjcml0aWNhbElzc3VlcyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgcGVyZm9ybWFuY2UgZ3JhZGUgdG8gbnVtZXJpYyBzY29yZVxuICAgKi9cbiAgcHJpdmF0ZSBjb252ZXJ0R3JhZGVUb1Njb3JlKGdyYWRlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHN3aXRjaCAoZ3JhZGUpIHtcbiAgICAgIGNhc2UgJ0ErJzogcmV0dXJuIDk1O1xuICAgICAgY2FzZSAnQSc6IHJldHVybiA5MDtcbiAgICAgIGNhc2UgJ0InOiByZXR1cm4gODA7XG4gICAgICBjYXNlICdDJzogcmV0dXJuIDcwO1xuICAgICAgY2FzZSAnRCc6IHJldHVybiA2MDtcbiAgICAgIGNhc2UgJ0YnOiByZXR1cm4gMzA7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gNTA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9ydCBwcm9maWxpbmcgZGF0YVxuICAgKi9cbiAgZXhwb3J0UHJvZmlsaW5nRGF0YSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwcm9maWxlczogQXJyYXkuZnJvbSh0aGlzLnByb2ZpbGVzLmVudHJpZXMoKSksXG4gICAgICBtZXRyaWNzOiB0aGlzLm1ldHJpY3MsXG4gICAgICBhbmFseXNpczogdGhpcy5nZW5lcmF0ZVBlcmZvcm1hbmNlQW5hbHlzaXMoKSxcbiAgICAgIHBhdHRlcm5zOiB0aGlzLmFuYWx5emVQZXJmb3JtYW5jZVBhdHRlcm5zKCksXG4gICAgICBpbnNpZ2h0czogdGhpcy5nZXRQZXJmb3JtYW5jZUluc2lnaHRzKCksXG4gICAgfSwgbnVsbCwgMik7XG4gIH1cbn1cblxuLy8gR2xvYmFsIHBlcmZvcm1hbmNlIHByb2ZpbGVyIGluc3RhbmNlXG5leHBvcnQgY29uc3QgcGVyZm9ybWFuY2VQcm9maWxlciA9IG5ldyBQZXJmb3JtYW5jZVByb2ZpbGVyKCk7XG4iXSwibmFtZXMiOlsiUGVyZm9ybWFuY2VQcm9maWxlciIsInBlcmZvcm1hbmNlUHJvZmlsZXIiLCJzdGFydFByb2ZpbGluZyIsImNvbXBvbmVudE5hbWUiLCJpc1Byb2ZpbGluZyIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93Iiwic3RhcnRNZW1vcnkiLCJtZW1vcnkiLCJ1c2VkSlNIZWFwU2l6ZSIsImxvZ2dlciIsImluZm8iLCJzdG9wUHJvZmlsaW5nIiwicmVuZGVyQ291bnQiLCJFcnJvciIsImVuZFRpbWUiLCJlbmRNZW1vcnkiLCJ0b3RhbFJlbmRlclRpbWUiLCJhdmVyYWdlUmVuZGVyVGltZSIsIm1lbW9yeVVzZWQiLCJtZXRyaWNzIiwibWF4UmVuZGVyVGltZSIsIm1pblJlbmRlclRpbWUiLCJtZW1vcnlQZWFrIiwibWVtb3J5QXZlcmFnZSIsInJlUmVuZGVyVHJpZ2dlcnMiLCJhbmFseXplUmVSZW5kZXJUcmlnZ2VycyIsInBlcmZvcm1hbmNlQm90dGxlbmVja3MiLCJhbmFseXplQm90dGxlbmVja3MiLCJvcHRpbWl6YXRpb25TY29yZSIsImNhbGN1bGF0ZU9wdGltaXphdGlvblNjb3JlIiwicmVjb21tZW5kYXRpb25zIiwiZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwicHVzaCIsInRvRml4ZWQiLCJ0cmlnZ2VycyIsImZpbHRlciIsIm0iLCJsZW5ndGgiLCJyZWNlbnRNZXRyaWNzIiwic2xpY2UiLCJhdmdSZW5kZXJUaW1lIiwicmVkdWNlIiwic3VtIiwibWVtb3J5VHJlbmQiLCJtYXAiLCJpc0luY3JlYXNpbmciLCJldmVyeSIsInZhbCIsImkiLCJzY29yZXMiLCJpc0RlZ3JhZGluZyIsInNjb3JlIiwiaW5jbHVkZXMiLCJyZW5kZXJUaW1lIiwibWVtb3J5VXNhZ2UiLCJib3R0bGVuZWNrcyIsIk1hdGgiLCJtYXgiLCJjcmVhdGVDb21wb25lbnRQcm9maWxlIiwibmFtZSIsInByb2ZpbGUiLCJjaGlsZHJlbiIsImRlcHRoIiwiaXNPcHRpbWl6ZWQiLCJvcHRpbWl6YXRpb25Qb3RlbnRpYWwiLCJjYWxjdWxhdGVPcHRpbWl6YXRpb25Qb3RlbnRpYWwiLCJwcm9maWxlcyIsInNldCIsImdlbmVyYXRlUGVyZm9ybWFuY2VBbmFseXNpcyIsImFsbE1ldHJpY3MiLCJ0b3RhbFRlc3RzIiwib3ZlcmFsbFNjb3JlIiwiY3JpdGljYWxJc3N1ZXMiLCJvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzIiwibWVtb3J5TGVha3MiLCJyZW5kZXJPcHRpbWl6YXRpb25zIiwibmV0d29ya09wdGltaXphdGlvbnMiLCJhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyIsImVzdGltYXRlZEltcHJvdmVtZW50IiwiYXZlcmFnZVNjb3JlIiwiaWRlbnRpZnlDcml0aWNhbElzc3VlcyIsImlkZW50aWZ5T3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyIsImlkZW50aWZ5TWVtb3J5TGVha3MiLCJpZGVudGlmeVJlbmRlck9wdGltaXphdGlvbnMiLCJpZGVudGlmeU5ldHdvcmtPcHRpbWl6YXRpb25zIiwiaWRlbnRpZnlBY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyIsImdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlY29tbWVuZGF0aW9ucyIsImNhbGN1bGF0ZUVzdGltYXRlZEltcHJvdmVtZW50IiwiaXNzdWVzIiwic2xvd0NvbXBvbmVudHMiLCJoaWdoTWVtb3J5Q29tcG9uZW50cyIsImxvd1Njb3JlQ29tcG9uZW50cyIsIm9wcG9ydHVuaXRpZXMiLCJtZWRpdW1TY29yZUNvbXBvbmVudHMiLCJoaWdoUmVuZGVyQ291bnRDb21wb25lbnRzIiwibGVha3MiLCJpbmNyZWFzaW5nTWVtb3J5Q29tcG9uZW50cyIsIm9wdGltaXphdGlvbnMiLCJzbG93UmVuZGVyQ29tcG9uZW50cyIsIm5ldHdvcmtNZXRyaWNzIiwibmV0d29ya1RpbWUiLCJoaWdoTmV0d29ya1RpbWUiLCJhcGlNZXRyaWNzIiwiYXBpVGltZSIsImhpZ2hBcGlUaW1lIiwiYXZnTmV0d29ya1RpbWUiLCJhdmdBcGlUaW1lIiwiYWNjZXNzaWJpbGl0eU1ldHJpY3MiLCJhY2Nlc3NpYmlsaXR5VGltZSIsImhpZ2hBY2Nlc3NpYmlsaXR5VGltZSIsIm1lbW9yeUludGVuc2l2ZUNvbXBvbmVudHMiLCJhdmdBY2Nlc3NpYmlsaXR5VGltZSIsIm1heFBvc3NpYmxlU2NvcmUiLCJpbXByb3ZlbWVudCIsImdldENvbXBvbmVudFByb2ZpbGVzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiZ2V0Q29tcG9uZW50TWV0cmljcyIsImZpbmQiLCJnZXRBbGVydHMiLCJhbGVydHMiLCJjYWxjdWxhdGVQZXJmb3JtYW5jZUdyYWRlIiwiY2xlYXIiLCJyZWNvcmRNZXRyaWNzIiwiZnVsbE1ldHJpY3MiLCJjaGVja1BlcmZvcm1hbmNlQWxlcnRzIiwicGVyZm9ybWFuY2VHcmFkZSIsInRyYWNrQ29tcG9uZW50TGlmZWN5Y2xlIiwibGlmZWN5Y2xlIiwiZHVyYXRpb24iLCJsaWZlY3ljbGVNZXRyaWNzIiwidGVzdFN1aXRlIiwic3RhdHVzIiwiYW5hbHl6ZVBlcmZvcm1hbmNlUGF0dGVybnMiLCJjb21wb25lbnRHcm91cHMiLCJNYXAiLCJmb3JFYWNoIiwibWV0cmljIiwiaGFzIiwiZ2V0IiwidHJlbmRpbmdVcCIsInRyZW5kaW5nRG93biIsInN0YWJsZSIsInZvbGF0aWxlIiwicmVuZGVyVGltZXMiLCJzY29yZVRyZW5kIiwiY2FsY3VsYXRlVHJlbmQiLCJyZW5kZXJUcmVuZCIsImFicyIsImZpcnN0IiwibGFzdCIsImNoYW5nZSIsInBlcmNlbnRDaGFuZ2UiLCJnZXRQZXJmb3JtYW5jZUluc2lnaHRzIiwidG9wUGVyZm9ybWVycyIsIm5lZWRzQXR0ZW50aW9uIiwiY29udmVydEdyYWRlVG9TY29yZSIsImdyYWRlIiwiZXhwb3J0UHJvZmlsaW5nRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlbnRyaWVzIiwiYW5hbHlzaXMiLCJwYXR0ZXJucyIsImluc2lnaHRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7Ozs7Ozs7Ozs7SUF3Q1lBLG1CQUFtQjtlQUFuQkE7O0lBK3dCQUMsbUJBQW1CO2VBQW5CQTs7O0FBL3dCTixNQUFNRDtJQVFYOztHQUVDLEdBQ0RFLGVBQWVDLGFBQXFCLEVBQVE7UUFDMUMsSUFBSSxDQUFDQyxXQUFXLEdBQUc7UUFDbkIsSUFBSSxDQUFDQyxTQUFTLEdBQUdDLFlBQVlDLEdBQUc7UUFDaEMsSUFBSSxDQUFDQyxXQUFXLEdBQUdGLFlBQVlHLE1BQU0sRUFBRUMsa0JBQWtCO1FBRXpEQyxPQUFPQyxJQUFJLENBQUMsQ0FBQyx1Q0FBdUMsRUFBRVQsY0FBYyxDQUFDO0lBQ3ZFO0lBRUE7O0dBRUMsR0FDRFUsY0FBY1YsYUFBcUIsRUFBRVcsY0FBc0IsQ0FBQyxFQUFtQjtRQUM3RSxJQUFJLENBQUMsSUFBSSxDQUFDVixXQUFXLEVBQUU7WUFDckIsTUFBTSxJQUFJVyxNQUFNO1FBQ2xCO1FBRUEsTUFBTUMsVUFBVVYsWUFBWUMsR0FBRztRQUMvQixNQUFNVSxZQUFZWCxZQUFZRyxNQUFNLEVBQUVDLGtCQUFrQjtRQUV4RCxNQUFNUSxrQkFBa0JGLFVBQVUsSUFBSSxDQUFDWCxTQUFTO1FBQ2hELE1BQU1jLG9CQUFvQkQsa0JBQWtCSjtRQUM1QyxNQUFNTSxhQUFhLEFBQUNILENBQUFBLFlBQVksSUFBSSxDQUFDVCxXQUFXLEFBQUQsSUFBTSxDQUFBLE9BQU8sSUFBRztRQUUvRCxNQUFN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