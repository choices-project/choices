497984a4af1d84d436d695252056f755
/**
 * @jest-environment jsdom
 */ // Mock window.matchMedia before any imports
"use strict";
// Mock lucide-react icons
jest.mock("lucide-react", ()=>({
        Bell: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "bell-icon"
            }),
        BellOff: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "bell-off-icon"
            }),
        CheckCircle: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "check-circle-icon"
            }),
        AlertCircle: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "alert-circle-icon"
            }),
        Wifi: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "wifi-icon"
            }),
        WifiOff: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "wifi-off-icon"
            }),
        Download: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "download-icon"
            }),
        Settings: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "settings-icon"
            }),
        RefreshCw: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "refresh-icon"
            }),
        Database: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "database-icon"
            }),
        Clock: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "clock-icon"
            }),
        Check: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "check-icon"
            }),
        X: ()=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "x-icon"
            })
    }));
// Mock PWA installation manager
jest.mock("@/lib/pwa/installation", ()=>({
        PWAInstallationManager: jest.fn().mockImplementation(()=>({
                isInstalled: false,
                canInstall: true,
                install: jest.fn(),
                checkInstallationStatus: jest.fn(),
                addListener: jest.fn(),
                removeListener: jest.fn(),
                subscribe: jest.fn(()=>jest.fn()),
                getStatus: jest.fn(()=>({
                        isInstallable: true,
                        isInstalled: false,
                        canPrompt: true,
                        platform: "web",
                        deferredPrompt: null
                    }))
            }))
    }));
// Mock usePWA hook
jest.mock("@/hooks/usePWA", ()=>({
        usePWA: jest.fn(()=>({
                installation: {
                    isInstalled: false,
                    canInstall: true,
                    install: jest.fn(),
                    checkInstallationStatus: jest.fn()
                },
                offline: {
                    isOnline: true,
                    offlineData: {
                        cachedPages: [],
                        cachedResources: [],
                        queuedActions: []
                    },
                    syncOfflineData: jest.fn(),
                    clearOfflineData: jest.fn()
                },
                notifications: {
                    permission: "default",
                    requestPermission: jest.fn(),
                    showNotification: jest.fn()
                },
                loading: false,
                error: null
            }))
    }));
// Mock PWA store
jest.mock("@/lib/stores", ()=>({
        usePWAInstallation: jest.fn(()=>({
                isInstalled: false,
                canInstall: true,
                install: jest.fn(),
                checkInstallationStatus: jest.fn()
            })),
        usePWAOffline: jest.fn(()=>({
                isOnline: true,
                offlineData: {
                    cachedPages: [],
                    cachedResources: [],
                    queuedActions: []
                },
                syncOfflineData: jest.fn(),
                clearOfflineData: jest.fn()
            })),
        usePWANotifications: jest.fn(()=>({
                permission: "default",
                requestPermission: jest.fn(),
                showNotification: jest.fn()
            })),
        usePWALoading: jest.fn(()=>false),
        usePWAError: jest.fn(()=>null)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactrouterdom = require("react-router-dom");
const _PWAFeatures = /*#__PURE__*/ _interop_require_default(require("../../../../../../features/pwa/components/PWAFeatures"));
const _testIds = require("../../../../../../lib/testing/testIds");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
Object.defineProperty(window, "matchMedia", {
    value: jest.fn().mockImplementation((query)=>({
            matches: false,
            media: query,
            onchange: null,
            addListener: jest.fn(),
            removeListener: jest.fn(),
            addEventListener: jest.fn(),
            removeEventListener: jest.fn(),
            dispatchEvent: jest.fn()
        })),
    writable: true
});
// Mock browser APIs
Object.defineProperty(navigator, "serviceWorker", {
    value: {
        register: jest.fn(),
        ready: Promise.resolve()
    },
    writable: true
});
// Mock online/offline events
Object.defineProperty(navigator, "onLine", {
    value: true,
    writable: true
});
describe("PWA Features - Simple Testing", ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        // Ensure mocks are properly set up
        const { usePWAInstallation, usePWAOffline } = require("@/lib/stores");
        usePWAInstallation.mockReturnValue({
            isInstalled: false,
            canInstall: true,
            install: jest.fn(),
            checkInstallationStatus: jest.fn()
        });
        usePWAOffline.mockReturnValue({
            isOnline: true,
            offlineData: {
                cachedPages: [],
                cachedResources: [],
                queuedActions: []
            },
            syncOfflineData: jest.fn(),
            clearOfflineData: jest.fn()
        });
    });
    describe("Component Rendering", ()=>{
        it("should render PWA features when installation is available", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_PWAFeatures.default, {})
            }));
            // Check for basic PWA elements
            expect(_react1.screen.getByTestId(_testIds.T.pwa.status)).toBeInTheDocument();
            expect(_react1.screen.getByTestId(_testIds.T.pwa.installButton)).toBeInTheDocument();
        });
        it("should render with custom className", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_PWAFeatures.default, {
                    className: "custom-class"
                })
            }));
            const container = _react1.screen.getByTestId(_testIds.T.pwa.status);
            expect(container).toHaveClass("custom-class");
        });
    });
    describe("Offline Features", ()=>{
        it("should display offline indicator when offline", ()=>{
            // Mock offline state
            const { usePWAOffline } = require("@/lib/stores");
            usePWAOffline.mockReturnValue({
                isOnline: false,
                offlineData: {},
                syncOfflineData: jest.fn(),
                clearOfflineData: jest.fn()
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_PWAFeatures.default, {})
            }));
            expect(_react1.screen.getByTestId(_testIds.T.pwa.offlineIndicator)).toBeInTheDocument();
        });
    });
    describe("Performance", ()=>{
        it("should render within performance budget", async ()=>{
            const startTime = performance.now();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_PWAFeatures.default, {})
            }));
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            // Should render within 100ms
            expect(renderTime).toBeLessThan(100);
        });
        it("should not cause memory leaks", ()=>{
            const { unmount } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_PWAFeatures.default, {})
            }));
            // Unmount component
            unmount();
            // Should not leave any event listeners or timers
            expect(jest.getTimerCount()).toBe(0);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvY29tcG9uZW50cy9mZWF0dXJlcy9wd2EvcHdhLWZlYXR1cmVzLXNpbXBsZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBqZXN0LWVudmlyb25tZW50IGpzZG9tXG4gKi9cblxuLy8gTW9jayB3aW5kb3cubWF0Y2hNZWRpYSBiZWZvcmUgYW55IGltcG9ydHNcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdtYXRjaE1lZGlhJywge1xuICB2YWx1ZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbihxdWVyeSA9PiAoe1xuICAgIG1hdGNoZXM6IGZhbHNlLFxuICAgIG1lZGlhOiBxdWVyeSxcbiAgICBvbmNoYW5nZTogbnVsbCxcbiAgICBhZGRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUxpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogamVzdC5mbigpLFxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICBkaXNwYXRjaEV2ZW50OiBqZXN0LmZuKCksXG4gIH0pKSxcbiAgd3JpdGFibGU6IHRydWUsXG59KTtcblxuLy8gTW9jayBicm93c2VyIEFQSXNcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYXZpZ2F0b3IsICdzZXJ2aWNlV29ya2VyJywge1xuICB2YWx1ZToge1xuICAgIHJlZ2lzdGVyOiBqZXN0LmZuKCksXG4gICAgcmVhZHk6IFByb21pc2UucmVzb2x2ZSgpLFxuICB9LFxuICB3cml0YWJsZTogdHJ1ZSxcbn0pO1xuXG4vLyBNb2NrIG9ubGluZS9vZmZsaW5lIGV2ZW50c1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ29uTGluZScsIHtcbiAgdmFsdWU6IHRydWUsXG4gIHdyaXRhYmxlOiB0cnVlLFxufSk7XG5cbi8vIE1vY2sgbHVjaWRlLXJlYWN0IGljb25zXG5qZXN0Lm1vY2soJ2x1Y2lkZS1yZWFjdCcsICgpID0+ICh7XG4gIEJlbGw6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJiZWxsLWljb25cIiAvPixcbiAgQmVsbE9mZjogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cImJlbGwtb2ZmLWljb25cIiAvPixcbiAgQ2hlY2tDaXJjbGU6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJjaGVjay1jaXJjbGUtaWNvblwiIC8+LFxuICBBbGVydENpcmNsZTogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cImFsZXJ0LWNpcmNsZS1pY29uXCIgLz4sXG4gIFdpZmk6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJ3aWZpLWljb25cIiAvPixcbiAgV2lmaU9mZjogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cIndpZmktb2ZmLWljb25cIiAvPixcbiAgRG93bmxvYWQ6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJkb3dubG9hZC1pY29uXCIgLz4sXG4gIFNldHRpbmdzOiAoKSA9PiA8ZGl2IGRhdGEtdGVzdGlkPVwic2V0dGluZ3MtaWNvblwiIC8+LFxuICBSZWZyZXNoQ3c6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJyZWZyZXNoLWljb25cIiAvPixcbiAgRGF0YWJhc2U6ICgpID0+IDxkaXYgZGF0YS10ZXN0aWQ9XCJkYXRhYmFzZS1pY29uXCIgLz4sXG4gIENsb2NrOiAoKSA9PiA8ZGl2IGRhdGEtdGVzdGlkPVwiY2xvY2staWNvblwiIC8+LFxuICBDaGVjazogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cImNoZWNrLWljb25cIiAvPixcbiAgWDogKCkgPT4gPGRpdiBkYXRhLXRlc3RpZD1cIngtaWNvblwiIC8+LFxufSkpO1xuXG4vLyBNb2NrIFBXQSBpbnN0YWxsYXRpb24gbWFuYWdlclxuamVzdC5tb2NrKCdAL2xpYi9wd2EvaW5zdGFsbGF0aW9uJywgKCkgPT4gKHtcbiAgUFdBSW5zdGFsbGF0aW9uTWFuYWdlcjogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIGlzSW5zdGFsbGVkOiBmYWxzZSxcbiAgICBjYW5JbnN0YWxsOiB0cnVlLFxuICAgIGluc3RhbGw6IGplc3QuZm4oKSxcbiAgICBjaGVja0luc3RhbGxhdGlvblN0YXR1czogamVzdC5mbigpLFxuICAgIGFkZExpc3RlbmVyOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICBzdWJzY3JpYmU6IGplc3QuZm4oKCkgPT4gamVzdC5mbigpKSwgLy8gUmV0dXJuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uXG4gICAgZ2V0U3RhdHVzOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBpc0luc3RhbGxhYmxlOiB0cnVlLFxuICAgICAgaXNJbnN0YWxsZWQ6IGZhbHNlLFxuICAgICAgY2FuUHJvbXB0OiB0cnVlLFxuICAgICAgcGxhdGZvcm06ICd3ZWInLFxuICAgICAgZGVmZXJyZWRQcm9tcHQ6IG51bGxcbiAgICB9KSlcbiAgfSkpXG59KSk7XG5cbi8vIE1vY2sgdXNlUFdBIGhvb2tcbmplc3QubW9jaygnQC9ob29rcy91c2VQV0EnLCAoKSA9PiAoe1xuICB1c2VQV0E6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBpbnN0YWxsYXRpb246IHtcbiAgICAgIGlzSW5zdGFsbGVkOiBmYWxzZSxcbiAgICAgIGNhbkluc3RhbGw6IHRydWUsXG4gICAgICBpbnN0YWxsOiBqZXN0LmZuKCksXG4gICAgICBjaGVja0luc3RhbGxhdGlvblN0YXR1czogamVzdC5mbigpXG4gICAgfSxcbiAgICBvZmZsaW5lOiB7XG4gICAgICBpc09ubGluZTogdHJ1ZSxcbiAgICAgIG9mZmxpbmVEYXRhOiB7XG4gICAgICAgIGNhY2hlZFBhZ2VzOiBbXSxcbiAgICAgICAgY2FjaGVkUmVzb3VyY2VzOiBbXSxcbiAgICAgICAgcXVldWVkQWN0aW9uczogW11cbiAgICAgIH0sXG4gICAgICBzeW5jT2ZmbGluZURhdGE6IGplc3QuZm4oKSxcbiAgICAgIGNsZWFyT2ZmbGluZURhdGE6IGplc3QuZm4oKVxuICAgIH0sXG4gICAgbm90aWZpY2F0aW9uczoge1xuICAgICAgcGVybWlzc2lvbjogJ2RlZmF1bHQnLFxuICAgICAgcmVxdWVzdFBlcm1pc3Npb246IGplc3QuZm4oKSxcbiAgICAgIHNob3dOb3RpZmljYXRpb246IGplc3QuZm4oKVxuICAgIH0sXG4gICAgbG9hZGluZzogZmFsc2UsXG4gICAgZXJyb3I6IG51bGxcbiAgfSkpXG59KSk7XG5cbi8vIE1vY2sgUFdBIHN0b3JlXG5qZXN0Lm1vY2soJ0AvbGliL3N0b3JlcycsICgpID0+ICh7XG4gIHVzZVBXQUluc3RhbGxhdGlvbjogamVzdC5mbigoKSA9PiAoe1xuICAgIGlzSW5zdGFsbGVkOiBmYWxzZSxcbiAgICBjYW5JbnN0YWxsOiB0cnVlLFxuICAgIGluc3RhbGw6IGplc3QuZm4oKSxcbiAgICBjaGVja0luc3RhbGxhdGlvblN0YXR1czogamVzdC5mbigpLFxuICB9KSksXG4gIHVzZVBXQU9mZmxpbmU6IGplc3QuZm4oKCkgPT4gKHtcbiAgICBpc09ubGluZTogdHJ1ZSxcbiAgICBvZmZsaW5lRGF0YToge1xuICAgICAgY2FjaGVkUGFnZXM6IFtdLFxuICAgICAgY2FjaGVkUmVzb3VyY2VzOiBbXSxcbiAgICAgIHF1ZXVlZEFjdGlvbnM6IFtdXG4gICAgfSxcbiAgICBzeW5jT2ZmbGluZURhdGE6IGplc3QuZm4oKSxcbiAgICBjbGVhck9mZmxpbmVEYXRhOiBqZXN0LmZuKCksXG4gIH0pKSxcbiAgdXNlUFdBTm90aWZpY2F0aW9uczogamVzdC5mbigoKSA9PiAoe1xuICAgIHBlcm1pc3Npb246ICdkZWZhdWx0JyxcbiAgICByZXF1ZXN0UGVybWlzc2lvbjogamVzdC5mbigpLFxuICAgIHNob3dOb3RpZmljYXRpb246IGplc3QuZm4oKSxcbiAgfSkpLFxuICB1c2VQV0FMb2FkaW5nOiBqZXN0LmZuKCgpID0+IGZhbHNlKSxcbiAgdXNlUFdBRXJyb3I6IGplc3QuZm4oKCkgPT4gbnVsbCksXG59KSk7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IFBXQUZlYXR1cmVzIGZyb20gJ0AvZmVhdHVyZXMvcHdhL2NvbXBvbmVudHMvUFdBRmVhdHVyZXMnO1xuaW1wb3J0IHsgVCB9IGZyb20gJ0AvbGliL3Rlc3RpbmcvdGVzdElkcyc7XG5cbmRlc2NyaWJlKCdQV0EgRmVhdHVyZXMgLSBTaW1wbGUgVGVzdGluZycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgXG4gICAgLy8gRW5zdXJlIG1vY2tzIGFyZSBwcm9wZXJseSBzZXQgdXBcbiAgICBjb25zdCB7IHVzZVBXQUluc3RhbGxhdGlvbiwgdXNlUFdBT2ZmbGluZSB9ID0gcmVxdWlyZSgnQC9saWIvc3RvcmVzJyk7XG4gICAgdXNlUFdBSW5zdGFsbGF0aW9uLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBpc0luc3RhbGxlZDogZmFsc2UsXG4gICAgICBjYW5JbnN0YWxsOiB0cnVlLFxuICAgICAgaW5zdGFsbDogamVzdC5mbigpLFxuICAgICAgY2hlY2tJbnN0YWxsYXRpb25TdGF0dXM6IGplc3QuZm4oKSxcbiAgICB9KTtcbiAgICB1c2VQV0FPZmZsaW5lLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBpc09ubGluZTogdHJ1ZSxcbiAgICAgIG9mZmxpbmVEYXRhOiB7XG4gICAgICAgIGNhY2hlZFBhZ2VzOiBbXSxcbiAgICAgICAgY2FjaGVkUmVzb3VyY2VzOiBbXSxcbiAgICAgICAgcXVldWVkQWN0aW9uczogW11cbiAgICAgIH0sXG4gICAgICBzeW5jT2ZmbGluZURhdGE6IGplc3QuZm4oKSxcbiAgICAgIGNsZWFyT2ZmbGluZURhdGE6IGplc3QuZm4oKSxcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbXBvbmVudCBSZW5kZXJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZW5kZXIgUFdBIGZlYXR1cmVzIHdoZW4gaW5zdGFsbGF0aW9uIGlzIGF2YWlsYWJsZScsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFBXQUZlYXR1cmVzIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBiYXNpYyBQV0EgZWxlbWVudHNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoVC5wd2Euc3RhdHVzKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoVC5wd2EuaW5zdGFsbEJ1dHRvbikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciB3aXRoIGN1c3RvbSBjbGFzc05hbWUnLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxQV0FGZWF0dXJlcyBjbGFzc05hbWU9XCJjdXN0b20tY2xhc3NcIiAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBjb250YWluZXIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoVC5wd2Euc3RhdHVzKTtcbiAgICAgIGV4cGVjdChjb250YWluZXIpLnRvSGF2ZUNsYXNzKCdjdXN0b20tY2xhc3MnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ09mZmxpbmUgRmVhdHVyZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkaXNwbGF5IG9mZmxpbmUgaW5kaWNhdG9yIHdoZW4gb2ZmbGluZScsICgpID0+IHtcbiAgICAgIC8vIE1vY2sgb2ZmbGluZSBzdGF0ZVxuICAgICAgY29uc3QgeyB1c2VQV0FPZmZsaW5lIH0gPSByZXF1aXJlKCdAL2xpYi9zdG9yZXMnKTtcbiAgICAgIHVzZVBXQU9mZmxpbmUubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNPbmxpbmU6IGZhbHNlLFxuICAgICAgICBvZmZsaW5lRGF0YToge30sXG4gICAgICAgIHN5bmNPZmZsaW5lRGF0YTogamVzdC5mbigpLFxuICAgICAgICBjbGVhck9mZmxpbmVEYXRhOiBqZXN0LmZuKCksXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8UFdBRmVhdHVyZXMgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZChULnB3YS5vZmZsaW5lSW5kaWNhdG9yKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcmVuZGVyIHdpdGhpbiBwZXJmb3JtYW5jZSBidWRnZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIFxuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8UFdBRmVhdHVyZXMgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgY29uc3QgcmVuZGVyVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCByZW5kZXIgd2l0aGluIDEwMG1zXG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG5vdCBjYXVzZSBtZW1vcnkgbGVha3MnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFBXQUZlYXR1cmVzIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFVubW91bnQgY29tcG9uZW50XG4gICAgICB1bm1vdW50KCk7XG5cbiAgICAgIC8vIFNob3VsZCBub3QgbGVhdmUgYW55IGV2ZW50IGxpc3RlbmVycyBvciB0aW1lcnNcbiAgICAgIGV4cGVjdChqZXN0LmdldFRpbWVyQ291bnQoKSkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIkJlbGwiLCJkaXYiLCJkYXRhLXRlc3RpZCIsIkJlbGxPZmYiLCJDaGVja0NpcmNsZSIsIkFsZXJ0Q2lyY2xlIiwiV2lmaSIsIldpZmlPZmYiLCJEb3dubG9hZCIsIlNldHRpbmdzIiwiUmVmcmVzaEN3IiwiRGF0YWJhc2UiLCJDbG9jayIsIkNoZWNrIiwiWCIsIlBXQUluc3RhbGxhdGlvbk1hbmFnZXIiLCJmbiIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImlzSW5zdGFsbGVkIiwiY2FuSW5zdGFsbCIsImluc3RhbGwiLCJjaGVja0luc3RhbGxhdGlvblN0YXR1cyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJzdWJzY3JpYmUiLCJnZXRTdGF0dXMiLCJpc0luc3RhbGxhYmxlIiwiY2FuUHJvbXB0IiwicGxhdGZvcm0iLCJkZWZlcnJlZFByb21wdCIsInVzZVBXQSIsImluc3RhbGxhdGlvbiIsIm9mZmxpbmUiLCJpc09ubGluZSIsIm9mZmxpbmVEYXRhIiwiY2FjaGVkUGFnZXMiLCJjYWNoZWRSZXNvdXJjZXMiLCJxdWV1ZWRBY3Rpb25zIiwic3luY09mZmxpbmVEYXRhIiwiY2xlYXJPZmZsaW5lRGF0YSIsIm5vdGlmaWNhdGlvbnMiLCJwZXJtaXNzaW9uIiwicmVxdWVzdFBlcm1pc3Npb24iLCJzaG93Tm90aWZpY2F0aW9uIiwibG9hZGluZyIsImVycm9yIiwidXNlUFdBSW5zdGFsbGF0aW9uIiwidXNlUFdBT2ZmbGluZSIsInVzZVBXQU5vdGlmaWNhdGlvbnMiLCJ1c2VQV0FMb2FkaW5nIiwidXNlUFdBRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInZhbHVlIiwicXVlcnkiLCJtYXRjaGVzIiwibWVkaWEiLCJvbmNoYW5nZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsIndyaXRhYmxlIiwibmF2aWdhdG9yIiwicmVnaXN0ZXIiLCJyZWFkeSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInJlcXVpcmUiLCJtb2NrUmV0dXJuVmFsdWUiLCJpdCIsInJlbmRlciIsIkJyb3dzZXJSb3V0ZXIiLCJQV0FGZWF0dXJlcyIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwiVCIsInB3YSIsInN0YXR1cyIsInRvQmVJblRoZURvY3VtZW50IiwiaW5zdGFsbEJ1dHRvbiIsImNsYXNzTmFtZSIsImNvbnRhaW5lciIsInRvSGF2ZUNsYXNzIiwib2ZmbGluZUluZGljYXRvciIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwiZW5kVGltZSIsInJlbmRlclRpbWUiLCJ0b0JlTGVzc1RoYW4iLCJ1bm1vdW50IiwiZ2V0VGltZXJDb3VudCIsInRvQmUiXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDLEdBRUQsNENBQTRDOztBQThCNUMsMEJBQTBCO0FBQzFCQSxLQUFLQyxJQUFJLENBQUMsZ0JBQWdCLElBQU8sQ0FBQTtRQUMvQkMsTUFBTSxrQkFBTSxxQkFBQ0M7Z0JBQUlDLGVBQVk7O1FBQzdCQyxTQUFTLGtCQUFNLHFCQUFDRjtnQkFBSUMsZUFBWTs7UUFDaENFLGFBQWEsa0JBQU0scUJBQUNIO2dCQUFJQyxl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