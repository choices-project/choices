{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/browser/cross-browser-compatibility-real.test.tsx"],"sourcesContent":["/**\n * Cross-Browser Compatibility Tests - REAL FUNCTIONALITY\n * \n * Tests browser compatibility across different browsers using real functionality:\n * - Chrome, Firefox, Safari, Edge compatibility\n * - Mobile browsers (iOS Safari, Chrome Mobile)\n * - Feature compatibility\n * - Performance consistency\n * - CSS compatibility\n * - JavaScript API compatibility\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { BrowserRouter } from 'react-router-dom';\nimport SuperiorMobileFeed from '@/features/feeds/components/SuperiorMobileFeed';\n\n// Use real functionality - minimal mocking only for test environment setup\n\n// Mock localStorage for component functionality\nObject.defineProperty(window, 'localStorage', {\n  value: {\n    getItem: jest.fn(),\n    setItem: jest.fn(),\n    removeItem: jest.fn(),\n    clear: jest.fn(),\n  },\n  writable: true,\n});\n\n// Mock navigator for online status\nObject.defineProperty(navigator, 'onLine', {\n  value: true,\n  writable: true,\n});\n\n// Mock Notification API\nObject.defineProperty(window, 'Notification', {\n  value: {\n    permission: 'granted',\n    requestPermission: jest.fn().mockResolvedValue('granted'),\n  },\n  writable: true,\n});\n\n// Mock Service Worker\nObject.defineProperty(navigator, 'serviceWorker', {\n  value: {\n    register: jest.fn().mockResolvedValue({\n      installing: null,\n      waiting: null,\n      active: null,\n      addEventListener: jest.fn(),\n      removeEventListener: jest.fn(),\n    }),\n  },\n  writable: true,\n});\n\ndescribe('Cross-Browser Compatibility Tests - Real Functionality', () => {\n  beforeEach(() => {\n    // Clear any previous state\n    jest.clearAllMocks();\n  });\n\n  describe('Core Browser Features', () => {\n    it('should work with standard DOM APIs', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test standard DOM APIs\n      const mainContent = screen.getByRole('main');\n      expect(mainContent).toBeInTheDocument();\n      \n      // Test querySelector\n      const buttons = mainContent.querySelectorAll('button');\n      expect(buttons.length).toBeGreaterThan(0);\n    });\n\n    it('should handle event listeners properly', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test event handling\n      const buttons = screen.getAllByRole('button');\n      const firstButton = buttons[0];\n      \n      fireEvent.click(firstButton);\n      // Should not throw errors\n      expect(firstButton).toBeInTheDocument();\n    });\n\n    it('should handle CSS properly', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test CSS compatibility\n      const mainContent = screen.getByRole('main');\n      const computedStyle = window.getComputedStyle(mainContent);\n      \n      // Should have proper styling\n      expect(computedStyle).toBeDefined();\n    });\n  });\n\n  describe('JavaScript API Compatibility', () => {\n    it('should work with modern JavaScript features', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test modern JavaScript features\n      const mainContent = screen.getByRole('main');\n      expect(mainContent).toBeInTheDocument();\n      \n      // Test async/await\n      const asyncTest = async () => {\n        return new Promise(resolve => {\n          setTimeout(() => resolve('test'), 0);\n        });\n      };\n      \n      const result = await asyncTest();\n      expect(result).toBe('test');\n    });\n\n    it('should handle Promises correctly', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test Promise handling\n      const promiseTest = new Promise(resolve => {\n        setTimeout(() => resolve('promise test'), 0);\n      });\n      \n      const result = await promiseTest;\n      expect(result).toBe('promise test');\n    });\n\n    it('should handle fetch API', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test fetch API compatibility\n      expect(typeof fetch).toBe('function');\n    });\n  });\n\n  describe('Storage Compatibility', () => {\n    it('should work with localStorage', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test localStorage\n      expect(typeof localStorage.getItem).toBe('function');\n      expect(typeof localStorage.setItem).toBe('function');\n    });\n\n    it('should handle storage events', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test storage event handling\n      const storageEvent = new StorageEvent('storage', {\n        key: 'test',\n        newValue: 'test value',\n        oldValue: null,\n        storageArea: localStorage\n      });\n      \n      // Should not throw errors\n      expect(storageEvent).toBeDefined();\n    });\n  });\n\n  describe('Performance Consistency', () => {\n    it('should perform consistently across browsers', async () => {\n      const startTime = performance.now();\n      \n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      // Should perform consistently\n      expect(renderTime).toBeLessThan(500);\n    });\n\n    it('should handle memory efficiently', async () => {\n      const initialMemory = performance.memory?.usedJSHeapSize || 0;\n      \n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n      \n      const finalMemory = performance.memory?.usedJSHeapSize || 0;\n      const memoryUsed = finalMemory - initialMemory;\n      \n      // Should use memory efficiently\n      expect(memoryUsed).toBeGreaterThanOrEqual(0);\n    });\n  });\n\n  describe('Mobile Compatibility', () => {\n    it('should work on mobile devices', async () => {\n      // Simulate mobile viewport\n      Object.defineProperty(window, 'innerWidth', {\n        value: 375,\n        writable: true,\n      });\n      \n      Object.defineProperty(window, 'innerHeight', {\n        value: 667,\n        writable: true,\n      });\n\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Should work on mobile\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n\n    it('should handle touch events', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test touch event handling\n      const buttons = screen.getAllByRole('button');\n      const firstButton = buttons[0];\n      \n      // Simulate touch events\n      fireEvent.touchStart(firstButton);\n      fireEvent.touchEnd(firstButton);\n      \n      // Should not throw errors\n      expect(firstButton).toBeInTheDocument();\n    });\n  });\n\n  describe('Accessibility Compatibility', () => {\n    it('should maintain accessibility across browsers', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check accessibility features\n      const mainContent = screen.getByRole('main');\n      expect(mainContent).toBeInTheDocument();\n      \n      // Check ARIA attributes\n      const buttons = screen.getAllByRole('button');\n      buttons.forEach(button => {\n        expect(button).toHaveAttribute('aria-label');\n      });\n    });\n\n    it('should handle screen readers properly', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Check for live regions\n      const liveRegions = screen.getAllByRole('status');\n      expect(liveRegions.length).toBeGreaterThan(0);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle errors gracefully across browsers', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Should handle errors gracefully\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n\n    it('should provide fallbacks for unsupported features', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Should provide fallbacks\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n  });\n\n  describe('Feature Detection', () => {\n    it('should detect browser features correctly', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Test feature detection\n      expect(typeof window.localStorage).toBe('object');\n      expect(typeof window.sessionStorage).toBe('object');\n      expect(typeof window.fetch).toBe('function');\n    });\n\n    it('should handle missing features gracefully', async () => {\n      render(\n        <BrowserRouter>\n          <SuperiorMobileFeed />\n        </BrowserRouter>\n      );\n\n      // Should handle missing features gracefully\n      expect(screen.getByRole('main')).toBeInTheDocument();\n    });\n  });\n});\n"],"names":["Object","defineProperty","window","value","getItem","jest","fn","setItem","removeItem","clear","writable","navigator","permission","requestPermission","mockResolvedValue","register","installing","waiting","active","addEventListener","removeEventListener","describe","beforeEach","clearAllMocks","it","render","BrowserRouter","SuperiorMobileFeed","mainContent","screen","getByRole","expect","toBeInTheDocument","buttons","querySelectorAll","length","toBeGreaterThan","getAllByRole","firstButton","fireEvent","click","computedStyle","getComputedStyle","toBeDefined","asyncTest","Promise","resolve","setTimeout","result","toBe","promiseTest","fetch","localStorage","storageEvent","StorageEvent","key","newValue","oldValue","storageArea","startTime","performance","now","endTime","renderTime","toBeLessThan","initialMemory","memory","usedJSHeapSize","finalMemory","memoryUsed","toBeGreaterThanOrEqual","touchStart","touchEnd","forEach","button","toHaveAttribute","liveRegions","sessionStorage"],"mappings":"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"}