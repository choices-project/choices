5859fc0a32200b5c58e761f6021a01dc
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return OfflineQueue;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _Clock = require("lucide-react/dist/esm/icons/Clock");
const _WifiOff = require("lucide-react/dist/esm/icons/WifiOff");
const _react = require("react");
const _usePWA = require("../../../hooks/usePWA");
function OfflineQueue({ className = "" }) {
    const pwa = (0, _usePWA.usePWA)();
    const [queueItems, setQueueItems] = (0, _react.useState)([]);
    const [isSyncing, setIsSyncing] = (0, _react.useState)(false);
    (0, _react.useEffect)(()=>{
        // Simulate offline queue items
        const mockQueueItems = [
            {
                id: "1",
                type: "vote",
                pollId: "poll-1",
                timestamp: Date.now() - 300000
            },
            {
                id: "2",
                type: "comment",
                pollId: "poll-1",
                timestamp: Date.now() - 180000
            },
            {
                id: "3",
                type: "vote",
                pollId: "poll-2",
                timestamp: Date.now() - 60000
            }
        ];
        setQueueItems(mockQueueItems);
    }, []);
    const handleSync = async ()=>{
        setIsSyncing(true);
        try {
            await pwa.syncOfflineData();
            setQueueItems([]);
        } catch (error) {
            console.error("Sync failed:", error);
        } finally{
            setIsSyncing(false);
        }
    };
    if (!pwa.hasOfflineData && queueItems.length === 0) {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `bg-yellow-50 border border-yellow-200 rounded-lg p-4 ${className}`,
        "data-testid": "offline-queue",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between mb-3",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_WifiOff.WifiOff, {
                                className: "w-5 h-5 text-yellow-600"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                className: "text-sm font-medium text-yellow-800",
                                children: "Offline Actions"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                        className: "text-sm text-yellow-700",
                        children: [
                            queueItems.length,
                            " pending"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "space-y-2",
                children: queueItems.map((item)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between p-2 bg-white rounded border",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Clock.Clock, {
                                        className: "w-4 h-4 text-gray-400"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "text-sm text-gray-700",
                                        children: [
                                            item.label === "vote" ? "Vote" : "Comment",
                                            " on Poll ",
                                            item.pollId
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-xs text-gray-500",
                                children: new Date(item.timestamp).toLocaleTimeString()
                            })
                        ]
                    }, item.id))
            }),
            pwa.isOnline && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: handleSync,
                disabled: isSyncing,
                className: "w-full mt-3 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 transition-colors",
                children: isSyncing ? "Syncing..." : "Sync Now"
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9wd2EvY29tcG9uZW50cy9PZmZsaW5lUXVldWUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyBDbG9jaywgV2lmaU9mZiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgdXNlUFdBIH0gZnJvbSAnQC9ob29rcy91c2VQV0EnXG5cbmludGVyZmFjZSBPZmZsaW5lUXVldWVQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBPZmZsaW5lUXVldWUoeyBjbGFzc05hbWUgPSAnJyB9OiBPZmZsaW5lUXVldWVQcm9wcykge1xuICBjb25zdCBwd2EgPSB1c2VQV0EoKVxuICBjb25zdCBbcXVldWVJdGVtcywgc2V0UXVldWVJdGVtc10gPSB1c2VTdGF0ZTxhbnlbXT4oW10pXG4gIGNvbnN0IFtpc1N5bmNpbmcsIHNldElzU3luY2luZ10gPSB1c2VTdGF0ZShmYWxzZSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNpbXVsYXRlIG9mZmxpbmUgcXVldWUgaXRlbXNcbiAgICBjb25zdCBtb2NrUXVldWVJdGVtcyA9IFtcbiAgICAgIHsgaWQ6ICcxJywgdHlwZTogJ3ZvdGUnLCBwb2xsSWQ6ICdwb2xsLTEnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzMDAwMDAgfSxcbiAgICAgIHsgaWQ6ICcyJywgdHlwZTogJ2NvbW1lbnQnLCBwb2xsSWQ6ICdwb2xsLTEnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAxODAwMDAgfSxcbiAgICAgIHsgaWQ6ICczJywgdHlwZTogJ3ZvdGUnLCBwb2xsSWQ6ICdwb2xsLTInLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSA2MDAwMCB9XG4gICAgXVxuICAgIHNldFF1ZXVlSXRlbXMobW9ja1F1ZXVlSXRlbXMpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0SXNTeW5jaW5nKHRydWUpXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHB3YS5zeW5jT2ZmbGluZURhdGEoKVxuICAgICAgc2V0UXVldWVJdGVtcyhbXSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3luYyBmYWlsZWQ6JywgZXJyb3IpXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzU3luY2luZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBpZiAoIXB3YS5oYXNPZmZsaW5lRGF0YSAmJiBxdWV1ZUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgYmcteWVsbG93LTUwIGJvcmRlciBib3JkZXIteWVsbG93LTIwMCByb3VuZGVkLWxnIHAtNCAke2NsYXNzTmFtZX1gfSBkYXRhLXRlc3RpZD1cIm9mZmxpbmUtcXVldWVcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTNcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICA8V2lmaU9mZiBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQteWVsbG93LTYwMFwiIC8+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC15ZWxsb3ctODAwXCI+T2ZmbGluZSBBY3Rpb25zPC9oMz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC15ZWxsb3ctNzAwXCI+e3F1ZXVlSXRlbXMubGVuZ3RofSBwZW5kaW5nPC9zcGFuPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgIHtxdWV1ZUl0ZW1zLm1hcCgoaXRlbSkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpdGVtLmlkfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0yIGJnLXdoaXRlIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8Q2xvY2sgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LWdyYXktNDAwXCIgLz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNzAwXCI+XG4gICAgICAgICAgICAgICAge2l0ZW0ubGFiZWwgPT09ICd2b3RlJyA/ICdWb3RlJyA6ICdDb21tZW50J30gb24gUG9sbCB7aXRlbS5wb2xsSWR9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgIHtuZXcgRGF0ZShpdGVtLnRpbWVzdGFtcCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG5cbiAgICAgIHtwd2EuaXNPbmxpbmUgJiYgKFxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlU3luY31cbiAgICAgICAgICBkaXNhYmxlZD17aXNTeW5jaW5nfVxuICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBtdC0zIHB4LTQgcHktMiBiZy15ZWxsb3ctNjAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyBob3ZlcjpiZy15ZWxsb3ctNzAwIGRpc2FibGVkOm9wYWNpdHktNTAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICA+XG4gICAgICAgICAge2lzU3luY2luZyA/ICdTeW5jaW5nLi4uJyA6ICdTeW5jIE5vdyd9XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIk9mZmxpbmVRdWV1ZSIsImNsYXNzTmFtZSIsInB3YSIsInVzZVBXQSIsInF1ZXVlSXRlbXMiLCJzZXRRdWV1ZUl0ZW1zIiwidXNlU3RhdGUiLCJpc1N5bmNpbmciLCJzZXRJc1N5bmNpbmciLCJ1c2VFZmZlY3QiLCJtb2NrUXVldWVJdGVtcyIsImlkIiwidHlwZSIsInBvbGxJZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJoYW5kbGVTeW5jIiwic3luY09mZmxpbmVEYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiaGFzT2ZmbGluZURhdGEiLCJsZW5ndGgiLCJkaXYiLCJkYXRhLXRlc3RpZCIsIldpZmlPZmYiLCJoMyIsInNwYW4iLCJtYXAiLCJpdGVtIiwiQ2xvY2siLCJsYWJlbCIsInRvTG9jYWxlVGltZVN0cmluZyIsImlzT25saW5lIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBV0E7OztlQUF3QkE7Ozs7Ozt1QkFSWTt3QkFFYjtBQU1SLFNBQVNBLGFBQWEsRUFBRUMsWUFBWSxFQUFFLEVBQXFCO0lBQ3hFLE1BQU1DLE1BQU1DLElBQUFBLGNBQU07SUFDbEIsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdDLElBQUFBLGVBQVEsRUFBUSxFQUFFO0lBQ3RELE1BQU0sQ0FBQ0MsV0FBV0MsYUFBYSxHQUFHRixJQUFBQSxlQUFRLEVBQUM7SUFFM0NHLElBQUFBLGdCQUFTLEVBQUM7UUFDUiwrQkFBK0I7UUFDL0IsTUFBTUMsaUJBQWlCO1lBQ3JCO2dCQUFFQyxJQUFJO2dCQUFLQyxNQUFNO2dCQUFRQyxRQUFRO2dCQUFVQyxXQUFXQyxLQUFLQyxHQUFHLEtBQUs7WUFBTztZQUMxRTtnQkFBRUwsSUFBSTtnQkFBS0MsTUFBTTtnQkFBV0MsUUFBUTtnQkFBVUMsV0FBV0MsS0FBS0MsR0FBRyxLQUFLO1lBQU87WUFDN0U7Z0JBQUVMLElBQUk7Z0JBQUtDLE1BQU07Z0JBQVFDLFFBQVE7Z0JBQVVDLFdBQVdDLEtBQUtDLEdBQUcsS0FBSztZQUFNO1NBQzFFO1FBQ0RYLGNBQWNLO0lBQ2hCLEdBQUcsRUFBRTtJQUVMLE1BQU1PLGFBQWE7UUFDakJULGFBQWE7UUFDYixJQUFJO1lBQ0YsTUFBTU4sSUFBSWdCLGVBQWU7WUFDekJiLGNBQWMsRUFBRTtRQUNsQixFQUFFLE9BQU9jLE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdCQUFnQkE7UUFDaEMsU0FBVTtZQUNSWCxhQUFhO1FBQ2Y7SUFDRjtJQUVBLElBQUksQ0FBQ04sSUFBSW1CLGNBQWMsSUFBSWpCLFdBQVdrQixNQUFNLEtBQUssR0FBRztRQUNsRCxPQUFPO0lBQ1Q7SUFFQSxxQkFDRSxzQkFBQ0M7UUFBSXRCLFdBQVcsQ0FBQyxxREFBcUQsRUFBRUEsVUFBVSxDQUFDO1FBQUV1QixlQUFZOzswQkFDL0Ysc0JBQUNEO2dCQUFJdEIsV0FBVTs7a0NBQ2Isc0JBQUNzQjt3QkFBSXRCLFdBQVU7OzBDQUNiLHFCQUFDd0IsZ0JBQU87Z0NBQUN4QixXQUFVOzswQ0FDbkIscUJBQUN5QjtnQ0FBR3pCLFdBQVU7MENBQXNDOzs7O2tDQUV0RCxzQkFBQzBCO3dCQUFLMUIsV0FBVTs7NEJBQTJCRyxXQUFXa0IsTUFBTTs0QkFBQzs7Ozs7MEJBRy9ELHFCQUFDQztnQkFBSXRCLFdBQVU7MEJBQ1pHLFdBQVd3QixHQUFHLENBQUMsQ0FBQ0MscUJBQ2Ysc0JBQUNOO3dCQUFrQnRCLFdBQVU7OzBDQUMzQixzQkFBQ3NCO2dDQUFJdEIsV0FBVTs7a0RBQ2IscUJBQUM2QixZQUFLO3dDQUFDN0IsV0FBVTs7a0RBQ2pCLHNCQUFDMEI7d0NBQUsxQixXQUFVOzs0Q0FDYjRCLEtBQUtFLEtBQUssS0FBSyxTQUFTLFNBQVM7NENBQVU7NENBQVVGLEtBQUtoQixNQUFNOzs7OzswQ0FHckUscUJBQUNjO2dDQUFLMUIsV0FBVTswQ0FDYixJQUFJYyxLQUFLYyxLQUFLZixTQUFTLEVBQUVrQixrQkFBa0I7Ozt1QkFSdENILEtBQUtsQixFQUFFOztZQWNwQlQsSUFBSStCLFFBQVEsa0JBQ1gscUJBQUNDO2dCQUNDQyxTQUFTbEI7Z0JBQ1RtQixVQUFVN0I7Z0JBQ1ZOLFdBQVU7MEJBRVRNLFlBQVksZUFBZTs7OztBQUt0QyJ9