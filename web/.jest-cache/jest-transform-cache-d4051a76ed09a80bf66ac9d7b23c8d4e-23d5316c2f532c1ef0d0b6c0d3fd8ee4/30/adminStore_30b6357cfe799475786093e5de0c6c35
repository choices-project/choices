680d41caa6da0b17c432f2f807825729
/**
 * Admin Store - Zustand Implementation
 * 
 * Admin-specific business logic and data management.
 * UI state (sidebar, notifications, navigation) moved to global stores.
 * 
 * Created: October 10, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    adminStoreDebug: function() {
        return adminStoreDebug;
    },
    adminStoreSubscriptions: function() {
        return adminStoreSubscriptions;
    },
    adminStoreUtils: function() {
        return adminStoreUtils;
    },
    useActivityFeed: function() {
        return useActivityFeed;
    },
    useActivityItems: function() {
        return useActivityItems;
    },
    useAdminActions: function() {
        return useAdminActions;
    },
    useAdminActiveTab: function() {
        return useAdminActiveTab;
    },
    useAdminDashboardActions: function() {
        return useAdminDashboardActions;
    },
    useAdminDashboardStats: function() {
        return useAdminDashboardStats;
    },
    useAdminError: function() {
        return useAdminError;
    },
    useAdminIsReimportRunning: function() {
        return useAdminIsReimportRunning;
    },
    useAdminIsSavingSettings: function() {
        return useAdminIsSavingSettings;
    },
    useAdminLoading: function() {
        return useAdminLoading;
    },
    useAdminNotifications: function() {
        return useAdminNotifications;
    },
    useAdminReimportActions: function() {
        return useAdminReimportActions;
    },
    useAdminReimportLogs: function() {
        return useAdminReimportLogs;
    },
    useAdminReimportProgress: function() {
        return useAdminReimportProgress;
    },
    useAdminSettingsTab: function() {
        return useAdminSettingsTab;
    },
    useAdminStats: function() {
        return useAdminStats;
    },
    useAdminStore: function() {
        return useAdminStore;
    },
    useAdminSystemSettings: function() {
        return useAdminSystemSettings;
    },
    useAdminSystemSettingsActions: function() {
        return useAdminSystemSettingsActions;
    },
    useAdminUserActions: function() {
        return useAdminUserActions;
    },
    useAdminUserFilters: function() {
        return useAdminUserFilters;
    },
    useAdminUsers: function() {
        return useAdminUsers;
    },
    useGeneratedPolls: function() {
        return useGeneratedPolls;
    },
    useRecentActivity: function() {
        return useRecentActivity;
    },
    useSystemMetrics: function() {
        return useSystemMetrics;
    },
    useTrendingTopics: function() {
        return useTrendingTopics;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _logger = require("../utils/logger");
const _objects = require("../utils/objects");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useAdminStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((set, get)=>({
        // Initial state
        trendingTopics: [],
        generatedPolls: [],
        systemMetrics: null,
        activityItems: [],
        activityFeed: [],
        users: [],
        userFilters: {
            searchTerm: "",
            roleFilter: "all",
            statusFilter: "all",
            selectedUsers: new Set(),
            showBulkActions: false
        },
        activeTab: "overview",
        dashboardStats: null,
        systemSettings: null,
        settingsTab: "general",
        isSavingSettings: false,
        reimportProgress: {
            totalStates: 0,
            processedStates: 0,
            successfulStates: 0,
            failedStates: 0,
            totalRepresentatives: 0,
            federalRepresentatives: 0,
            stateRepresentatives: 0,
            errors: [],
            stateResults: []
        },
        reimportLogs: [],
        isReimportRunning: false,
        isLoading: false,
        error: null,
        adminNotifications: [],
        // Data loading actions
        loadUsers: async ()=>{
            const { setLoading, setError } = get();
            try {
                setLoading(true);
                setError(null);
                // Fetch users directly from database
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                const { data: users, error } = await supabase.from("user_profiles").select(`
                user_id,
                email,
                display_name,
                role,
                status,
                created_at,
                last_login
              `).order("created_at", {
                    ascending: false
                });
                if (error) {
                    throw new Error(`Failed to fetch users: ${error.message}`);
                }
                // Transform data to match AdminUser interface
                const adminUsers = users?.map((user)=>({
                        id: user.user_id,
                        email: user.email,
                        name: user.display_name || "Unknown User",
                        role: user.role || "user",
                        status: user.status || "active",
                        created_at: user.created_at,
                        last_login: user.last_login
                    })) || [];
                set({
                    users: adminUsers
                });
                _logger.logger.info("Users loaded successfully", {
                    userCount: adminUsers.length
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                setError(errorMessage);
                _logger.logger.error("Failed to load users:", error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setLoading(false);
            }
        },
        loadDashboardStats: async ()=>{
            const { setLoading, setError } = get();
            try {
                setLoading(true);
                setError(null);
                // Fetch dashboard stats directly from database
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                // Get total users count
                const { count: totalUsers, error: usersError } = await supabase.from("user_profiles").select("*", {
                    count: "exact",
                    head: true
                });
                if (usersError) {
                    throw new Error(`Failed to fetch user count: ${usersError.message}`);
                }
                // Get active polls count
                const { count: activePolls, error: pollsError } = await supabase.from("polls").select("*", {
                    count: "exact",
                    head: true
                }).eq("status", "active");
                if (pollsError) {
                    throw new Error(`Failed to fetch polls count: ${pollsError.message}`);
                }
                // Get total votes count
                const { count: totalVotes, error: votesError } = await supabase.from("votes").select("*", {
                    count: "exact",
                    head: true
                });
                if (votesError) {
                    throw new Error(`Failed to fetch votes count: ${votesError.message}`);
                }
                // Determine system health based on recent activity
                const { data: recentActivity } = await supabase.from("analytics_events").select("created_at").gte("created_at", new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString()).limit(1);
                const systemHealth = recentActivity && recentActivity.length > 0 ? "healthy" : "warning";
                const stats = {
                    totalUsers: totalUsers || 0,
                    activePolls: activePolls || 0,
                    totalVotes: totalVotes || 0,
                    systemHealth: systemHealth
                };
                set({
                    dashboardStats: stats
                });
                _logger.logger.info("Dashboard stats loaded successfully", {
                    totalUsers: stats.totalUsers,
                    activePolls: stats.activePolls,
                    totalVotes: stats.totalVotes,
                    systemHealth: stats.systemHealth
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                setError(errorMessage);
                _logger.logger.error("Failed to load dashboard stats:", error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setLoading(false);
            }
        },
        loadSystemSettings: async ()=>{
            const { setLoading, setError } = get();
            try {
                setLoading(true);
                setError(null);
                // Fetch system settings from database
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                const { data: settingsData, error } = await supabase.from("system_settings").select("*").single();
                if (error && error.code !== "PGRST116") {
                    throw new Error(`Failed to fetch system settings: ${error.message}`);
                }
                // Use default settings if none exist in database
                const defaultSettings = {
                    general: {
                        siteName: "Choices Platform",
                        siteDescription: "A modern voting platform for democratic decision making",
                        maintenanceMode: false,
                        allowRegistration: true,
                        requireEmailVerification: true
                    },
                    performance: {
                        enableCaching: true,
                        cacheTTL: 3600,
                        enableCompression: true,
                        maxFileSize: 10485760
                    },
                    security: {
                        enableRateLimiting: true,
                        maxRequestsPerMinute: 100,
                        enableCSP: true,
                        enableHSTS: true
                    },
                    notifications: {
                        enableEmailNotifications: true,
                        enablePushNotifications: false,
                        notificationFrequency: "immediate"
                    }
                };
                const settings = settingsData?.settings || defaultSettings;
                set({
                    systemSettings: settings
                });
                _logger.logger.info("System settings loaded successfully");
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                setError(errorMessage);
                _logger.logger.error("Failed to load system settings:", error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setLoading(false);
            }
        },
        // User management actions
        setUserFilters: (filters)=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        ...filters
                    }
                })),
        selectUser: (userId)=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: new Set([
                            ...state.userFilters.selectedUsers,
                            userId
                        ])
                    }
                })),
        deselectUser: (userId)=>set((state)=>{
                const newSelected = new Set(state.userFilters.selectedUsers);
                newSelected.delete(userId);
                return {
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: newSelected
                    }
                };
            }),
        selectAllUsers: ()=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: new Set(state.users.map((user)=>user.id))
                    }
                })),
        deselectAllUsers: ()=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: new Set()
                    }
                })),
        updateUserRole: async (userId, role)=>{
            try {
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                const { error } = await supabase.from("user_profiles").update({
                    role
                }).eq("user_id", userId);
                if (error) {
                    throw new Error(`Failed to update user role: ${error.message}`);
                }
                // Update local state
                set((state)=>({
                        users: state.users.map((user)=>user.id === userId ? {
                                ...user,
                                role: role
                            } : user)
                    }));
                _logger.logger.info("User role updated successfully", {
                    userId,
                    role
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage
                });
                _logger.logger.error("Failed to update user role:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        updateUserStatus: async (userId, status)=>{
            try {
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                const { error } = await supabase.from("user_profiles").update({
                    status
                }).eq("user_id", userId);
                if (error) {
                    throw new Error(`Failed to update user status: ${error.message}`);
                }
                // Update local state
                set((state)=>({
                        users: state.users.map((user)=>user.id === userId ? {
                                ...user,
                                status: status
                            } : user)
                    }));
                _logger.logger.info("User status updated successfully", {
                    userId,
                    status
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage
                });
                _logger.logger.error("Failed to update user status:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        deleteUser: async (userId)=>{
            try {
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                const { error } = await supabase.from("user_profiles").delete().eq("user_id", userId);
                if (error) {
                    throw new Error(`Failed to delete user: ${error.message}`);
                }
                // Update local state
                set((state)=>({
                        users: state.users.filter((user)=>user.id !== userId)
                    }));
                _logger.logger.info("User deleted successfully", {
                    userId
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                set({
                    error: errorMessage
                });
                _logger.logger.error("Failed to delete user:", error instanceof Error ? error : new Error(errorMessage));
            }
        },
        // Dashboard actions
        setActiveTab: (tab)=>set({
                activeTab: tab
            }),
        // System settings actions
        setSystemSettings: (settings)=>set({
                systemSettings: settings
            }),
        updateSystemSetting: (section, key, value)=>set((state)=>{
                if (!state.systemSettings) return state;
                return {
                    systemSettings: (0, _objects.withOptional)(state.systemSettings, {
                        [section]: (0, _objects.withOptional)(state.systemSettings[section], {
                            [key]: value
                        })
                    })
                };
            }),
        setSettingsTab: (tab)=>set({
                settingsTab: tab
            }),
        saveSystemSettings: async ()=>{
            const { setIsSavingSettings, setError } = get();
            try {
                setIsSavingSettings(true);
                setError(null);
                const { systemSettings } = get();
                if (!systemSettings) {
                    throw new Error("No settings to save");
                }
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error("Database connection not available");
                }
                const { error } = await supabase.from("system_settings").upsert({
                    settings: systemSettings
                });
                if (error) {
                    throw new Error(`Failed to save system settings: ${error.message}`);
                }
                _logger.logger.info("System settings saved successfully");
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : "Unknown error";
                setError(errorMessage);
                _logger.logger.error("Failed to save system settings:", error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setIsSavingSettings(false);
            }
        },
        // Reimport actions
        setReimportProgress: (progress)=>set((state)=>({
                    reimportProgress: {
                        ...state.reimportProgress,
                        ...progress
                    }
                })),
        addReimportLog: (message)=>set((state)=>({
                    reimportLogs: [
                        ...state.reimportLogs,
                        message
                    ]
                })),
        clearReimportLogs: ()=>set({
                reimportLogs: []
            }),
        setIsReimportRunning: (running)=>set({
                isReimportRunning: running
            }),
        startReimport: async ()=>{
            const { setIsReimportRunning, addReimportLog, setReimportProgress } = get();
            try {
                setIsReimportRunning(true);
                addReimportLog("Starting reimport process...");
                // Reset progress
                setReimportProgress({
                    totalStates: 0,
                    processedStates: 0,
                    successfulStates: 0,
                    failedStates: 0,
                    totalRepresentatives: 0,
                    federalRepresentatives: 0,
                    stateRepresentatives: 0,
                    errors: [],
                    stateResults: []
                });
                // Implementation would go here
                addReimportLog("Reimport process completed");
            } catch (error) {
                addReimportLog(`Reimport failed: ${error instanceof Error ? error.message : "Unknown error"}`);
            } finally{
                setIsReimportRunning(false);
            }
        },
        // Activity and notifications
        addActivityItem: (item)=>set((state)=>({
                    activityItems: [
                        item,
                        ...state.activityItems.slice(0, 99)
                    ] // Keep last 100 items
                })),
        clearActivityItems: ()=>set({
                activityItems: []
            }),
        addAdminNotification: (notification)=>set((state)=>({
                    adminNotifications: [
                        notification,
                        ...state.adminNotifications
                    ]
                })),
        clearAdminNotifications: ()=>set({
                adminNotifications: []
            }),
        markNotificationAsRead: (id)=>set((state)=>({
                    adminNotifications: state.adminNotifications.map((notification)=>notification.id === id ? {
                            ...notification,
                            read: true
                        } : notification)
                })),
        // Utility actions
        setLoading: (loading)=>set({
                isLoading: loading
            }),
        setUpdating: (updating)=>set({
                isSavingSettings: updating
            }),
        setError: (error)=>set({
                error
            }),
        clearError: ()=>set({
                error: null
            }),
        setIsSavingSettings: (saving)=>set({
                isSavingSettings: saving
            }),
        refreshData: async ()=>{
            const { loadUsers, loadDashboardStats, loadSystemSettings } = get();
            await Promise.all([
                loadUsers(),
                loadDashboardStats(),
                loadSystemSettings()
            ]);
        },
        syncData: async ()=>{
            const { refreshData } = get();
            await refreshData();
        }
    }), {
    name: "admin-store",
    partialize: (state)=>({
            activeTab: state.activeTab,
            settingsTab: state.settingsTab,
            userFilters: state.userFilters
        })
}), {
    name: "admin-store"
}));
const useTrendingTopics = ()=>useAdminStore((state)=>state.trendingTopics);
const useGeneratedPolls = ()=>useAdminStore((state)=>state.generatedPolls);
const useSystemMetrics = ()=>useAdminStore((state)=>state.systemMetrics);
const useActivityItems = ()=>useAdminStore((state)=>state.activityItems);
const useActivityFeed = ()=>useAdminStore((state)=>state.activityFeed);
const useAdminNotifications = ()=>useAdminStore((state)=>state.adminNotifications);
const useAdminLoading = ()=>useAdminStore((state)=>state.isLoading);
const useAdminError = ()=>useAdminStore((state)=>state.error);
const useAdminUsers = ()=>useAdminStore((state)=>state.users);
const useAdminUserFilters = ()=>useAdminStore((state)=>state.userFilters);
const useAdminUserActions = ()=>useAdminStore((state)=>({
            setUserFilters: state.setUserFilters,
            selectUser: state.selectUser,
            deselectUser: state.deselectUser,
            selectAllUsers: state.selectAllUsers,
            deselectAllUsers: state.deselectAllUsers,
            updateUserRole: state.updateUserRole,
            updateUserStatus: state.updateUserStatus,
            deleteUser: state.deleteUser
        }));
const useAdminActiveTab = ()=>useAdminStore((state)=>state.activeTab);
const useAdminDashboardStats = ()=>useAdminStore((state)=>state.dashboardStats);
const useAdminDashboardActions = ()=>useAdminStore((state)=>({
            setActiveTab: state.setActiveTab,
            loadDashboardStats: state.loadDashboardStats
        }));
const useAdminSystemSettings = ()=>useAdminStore((state)=>state.systemSettings);
const useAdminSettingsTab = ()=>useAdminStore((state)=>state.settingsTab);
const useAdminIsSavingSettings = ()=>useAdminStore((state)=>state.isSavingSettings);
const useAdminSystemSettingsActions = ()=>useAdminStore((state)=>({
            setSystemSettings: state.setSystemSettings,
            updateSystemSetting: state.updateSystemSetting,
            setSettingsTab: state.setSettingsTab,
            saveSystemSettings: state.saveSystemSettings,
            loadSystemSettings: state.loadSystemSettings
        }));
const useAdminReimportProgress = ()=>useAdminStore((state)=>state.reimportProgress);
const useAdminReimportLogs = ()=>useAdminStore((state)=>state.reimportLogs);
const useAdminIsReimportRunning = ()=>useAdminStore((state)=>state.isReimportRunning);
const useAdminReimportActions = ()=>useAdminStore((state)=>({
            setReimportProgress: state.setReimportProgress,
            addReimportLog: state.addReimportLog,
            clearReimportLogs: state.clearReimportLogs,
            setIsReimportRunning: state.setIsReimportRunning,
            startReimport: state.startReimport
        }));
const useAdminActions = ()=>useAdminStore((state)=>({
            loadUsers: state.loadUsers,
            loadDashboardStats: state.loadDashboardStats,
            loadSystemSettings: state.loadSystemSettings,
            addActivityItem: state.addActivityItem,
            clearActivityItems: state.clearActivityItems,
            addAdminNotification: state.addAdminNotification,
            clearAdminNotifications: state.clearAdminNotifications,
            markNotificationAsRead: state.markNotificationAsRead,
            setLoading: state.setLoading,
            setUpdating: state.setUpdating,
            setError: state.setError,
            clearError: state.clearError,
            refreshData: state.refreshData,
            syncData: state.syncData
        }));
const useAdminStats = ()=>useAdminStore((state)=>({
            totalUsers: state.users.length,
            totalNotifications: state.adminNotifications.length,
            unreadNotifications: state.adminNotifications.filter((n)=>!n.read).length,
            totalActivity: state.activityItems.length
        }));
const useRecentActivity = ()=>useAdminStore((state)=>state.activityItems.slice(0, 10));
const adminStoreUtils = {
    getAdminStats: ()=>{
        const state = useAdminStore.getState();
        return {
            totalUsers: state.users.length,
            totalNotifications: state.adminNotifications.length,
            unreadNotifications: state.adminNotifications.filter((n)=>!n.read).length,
            totalActivity: state.activityItems.length
        };
    },
    getDataSummary: ()=>{
        const state = useAdminStore.getState();
        return {
            users: state.users.length,
            trendingTopics: state.trendingTopics.length,
            generatedPolls: state.generatedPolls.length,
            activityItems: state.activityItems.length,
            notifications: state.adminNotifications.length
        };
    }
};
const adminStoreSubscriptions = {
    subscribeToUsers: (callback)=>{
        return useAdminStore.subscribe((state)=>{
            callback(state.users);
        });
    },
    subscribeToDashboardStats: (callback)=>{
        return useAdminStore.subscribe((state)=>{
            callback(state.dashboardStats);
        });
    },
    subscribeToNotifications: (callback)=>{
        return useAdminStore.subscribe((state)=>{
            callback(state.adminNotifications);
        });
    }
};
const adminStoreDebug = {
    logState: ()=>{
        const state = useAdminStore.getState();
    // Admin store state logged
    },
    logStats: ()=>{
        const stats = adminStoreUtils.getAdminStats();
    // Admin statistics logged
    },
    logDataSummary: ()=>{
        const summary = adminStoreUtils.getDataSummary();
    // Admin data summary logged
    },
    reset: ()=>{
        useAdminStore.getState().clearActivityItems();
        useAdminStore.getState().clearAdminNotifications();
    // Admin store reset
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL2FkbWluU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZG1pbiBTdG9yZSAtIFp1c3RhbmQgSW1wbGVtZW50YXRpb25cbiAqIFxuICogQWRtaW4tc3BlY2lmaWMgYnVzaW5lc3MgbG9naWMgYW5kIGRhdGEgbWFuYWdlbWVudC5cbiAqIFVJIHN0YXRlIChzaWRlYmFyLCBub3RpZmljYXRpb25zLCBuYXZpZ2F0aW9uKSBtb3ZlZCB0byBnbG9iYWwgc3RvcmVzLlxuICogXG4gKiBDcmVhdGVkOiBPY3RvYmVyIDEwLCAyMDI1XG4gKiBTdGF0dXM6IOKchSBBQ1RJVkVcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IGRldnRvb2xzIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IHBlcnNpc3QgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFkbWluTm90aWZpY2F0aW9uLFxuICBUcmVuZGluZ1RvcGljLFxuICBHZW5lcmF0ZWRQb2xsLFxuICBTeXN0ZW1NZXRyaWNzLFxuICBBY3Rpdml0eUl0ZW0sXG4gIEFkbWluVXNlcixcbn0gZnJvbSAnQC9mZWF0dXJlcy9hZG1pbi90eXBlcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2xpYi91dGlscy9sb2dnZXInO1xuaW1wb3J0IHsgd2l0aE9wdGlvbmFsIH0gZnJvbSAnQC9saWIvdXRpbHMvb2JqZWN0cyc7XG5cbi8vIEFkbWluIHN0b3JlIHN0YXRlIGludGVyZmFjZSAoYnVzaW5lc3MgbG9naWMgb25seSlcbmludGVyZmFjZSBBZG1pblN0b3JlIHtcbiAgLy8gQWRtaW4tc3BlY2lmaWMgZGF0YVxuICB0cmVuZGluZ1RvcGljczogVHJlbmRpbmdUb3BpY1tdO1xuICBnZW5lcmF0ZWRQb2xsczogR2VuZXJhdGVkUG9sbFtdO1xuICBzeXN0ZW1NZXRyaWNzOiBTeXN0ZW1NZXRyaWNzIHwgbnVsbDtcbiAgYWN0aXZpdHlJdGVtczogQWN0aXZpdHlJdGVtW107XG4gIGFjdGl2aXR5RmVlZDogQWN0aXZpdHlJdGVtW107XG4gIFxuICAvLyBVc2VyIG1hbmFnZW1lbnQgZGF0YVxuICB1c2VyczogQWRtaW5Vc2VyW107XG4gIHVzZXJGaWx0ZXJzOiB7XG4gICAgc2VhcmNoVGVybTogc3RyaW5nO1xuICAgIHJvbGVGaWx0ZXI6ICdhbGwnIHwgJ2FkbWluJyB8ICdtb2RlcmF0b3InIHwgJ3VzZXInO1xuICAgIHN0YXR1c0ZpbHRlcjogJ2FsbCcgfCAnYWN0aXZlJyB8ICdpbmFjdGl2ZScgfCAnc3VzcGVuZGVkJztcbiAgICBzZWxlY3RlZFVzZXJzOiBTZXQ8c3RyaW5nPjtcbiAgICBzaG93QnVsa0FjdGlvbnM6IGJvb2xlYW47XG4gIH07XG4gIFxuICAvLyBEYXNoYm9hcmQgc3RhdGVcbiAgYWN0aXZlVGFiOiAnb3ZlcnZpZXcnIHwgJ3VzZXJzJyB8ICdhbmFseXRpY3MnIHwgJ3NldHRpbmdzJyB8ICdhdWRpdCc7XG4gIGRhc2hib2FyZFN0YXRzOiB7XG4gICAgdG90YWxVc2VyczogbnVtYmVyO1xuICAgIGFjdGl2ZVBvbGxzOiBudW1iZXI7XG4gICAgdG90YWxWb3RlczogbnVtYmVyO1xuICAgIHN5c3RlbUhlYWx0aDogJ2hlYWx0aHknIHwgJ3dhcm5pbmcnIHwgJ2NyaXRpY2FsJztcbiAgfSB8IG51bGw7XG4gIFxuICAvLyBTeXN0ZW0gc2V0dGluZ3Mgc3RhdGVcbiAgc3lzdGVtU2V0dGluZ3M6IHtcbiAgICBnZW5lcmFsOiB7XG4gICAgICBzaXRlTmFtZTogc3RyaW5nO1xuICAgICAgc2l0ZURlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICBtYWludGVuYW5jZU1vZGU6IGJvb2xlYW47XG4gICAgICBhbGxvd1JlZ2lzdHJhdGlvbjogYm9vbGVhbjtcbiAgICAgIHJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbjogYm9vbGVhbjtcbiAgICB9O1xuICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICBlbmFibGVDYWNoaW5nOiBib29sZWFuO1xuICAgICAgY2FjaGVUVEw6IG51bWJlcjtcbiAgICAgIGVuYWJsZUNvbXByZXNzaW9uOiBib29sZWFuO1xuICAgICAgbWF4RmlsZVNpemU6IG51bWJlcjtcbiAgICB9O1xuICAgIHNlY3VyaXR5OiB7XG4gICAgICBlbmFibGVSYXRlTGltaXRpbmc6IGJvb2xlYW47XG4gICAgICBtYXhSZXF1ZXN0c1Blck1pbnV0ZTogbnVtYmVyO1xuICAgICAgZW5hYmxlQ1NQOiBib29sZWFuO1xuICAgICAgZW5hYmxlSFNUUzogYm9vbGVhbjtcbiAgICB9O1xuICAgIG5vdGlmaWNhdGlvbnM6IHtcbiAgICAgIGVuYWJsZUVtYWlsTm90aWZpY2F0aW9uczogYm9vbGVhbjtcbiAgICAgIGVuYWJsZVB1c2hOb3RpZmljYXRpb25zOiBib29sZWFuO1xuICAgICAgbm90aWZpY2F0aW9uRnJlcXVlbmN5OiAnaW1tZWRpYXRlJyB8ICdkYWlseScgfCAnd2Vla2x5JztcbiAgICB9O1xuICB9IHwgbnVsbDtcbiAgc2V0dGluZ3NUYWI6ICdnZW5lcmFsJyB8ICdwZXJmb3JtYW5jZScgfCAnc2VjdXJpdHknIHwgJ25vdGlmaWNhdGlvbnMnO1xuICBpc1NhdmluZ1NldHRpbmdzOiBib29sZWFuO1xuICBcbiAgLy8gUmVpbXBvcnQgc3RhdGVcbiAgcmVpbXBvcnRQcm9ncmVzczoge1xuICAgIHRvdGFsU3RhdGVzOiBudW1iZXI7XG4gICAgcHJvY2Vzc2VkU3RhdGVzOiBudW1iZXI7XG4gICAgc3VjY2Vzc2Z1bFN0YXRlczogbnVtYmVyO1xuICAgIGZhaWxlZFN0YXRlczogbnVtYmVyO1xuICAgIHRvdGFsUmVwcmVzZW50YXRpdmVzOiBudW1iZXI7XG4gICAgZmVkZXJhbFJlcHJlc2VudGF0aXZlczogbnVtYmVyO1xuICAgIHN0YXRlUmVwcmVzZW50YXRpdmVzOiBudW1iZXI7XG4gICAgZXJyb3JzOiBzdHJpbmdbXTtcbiAgICBzdGF0ZVJlc3VsdHM6IEFycmF5PHtcbiAgICAgIHN0YXRlOiBzdHJpbmc7XG4gICAgICBzdWNjZXNzOiBib29sZWFuO1xuICAgICAgcmVwcmVzZW50YXRpdmVzOiBudW1iZXI7XG4gICAgICBkdXJhdGlvbj86IHN0cmluZztcbiAgICAgIGVycm9yPzogc3RyaW5nO1xuICAgIH0+O1xuICB9O1xuICByZWltcG9ydExvZ3M6IHN0cmluZ1tdO1xuICBpc1JlaW1wb3J0UnVubmluZzogYm9vbGVhbjtcbiAgXG4gIC8vIExvYWRpbmcgYW5kIGVycm9yIHN0YXRlc1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBzdHJpbmcgfCBudWxsO1xuICBcbiAgLy8gQWRtaW4gbm90aWZpY2F0aW9uc1xuICBhZG1pbk5vdGlmaWNhdGlvbnM6IEFkbWluTm90aWZpY2F0aW9uW107XG4gIFxuICAvLyBBY3Rpb25zXG4gIC8vIERhdGEgbG9hZGluZyBhY3Rpb25zXG4gIGxvYWRVc2VyczogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9hZERhc2hib2FyZFN0YXRzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBsb2FkU3lzdGVtU2V0dGluZ3M6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBVc2VyIG1hbmFnZW1lbnQgYWN0aW9uc1xuICBzZXRVc2VyRmlsdGVyczogKGZpbHRlcnM6IFBhcnRpYWw8QWRtaW5TdG9yZVsndXNlckZpbHRlcnMnXT4pID0+IHZvaWQ7XG4gIHNlbGVjdFVzZXI6ICh1c2VySWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgZGVzZWxlY3RVc2VyOiAodXNlcklkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIHNlbGVjdEFsbFVzZXJzOiAoKSA9PiB2b2lkO1xuICBkZXNlbGVjdEFsbFVzZXJzOiAoKSA9PiB2b2lkO1xuICB1cGRhdGVVc2VyUm9sZTogKHVzZXJJZDogc3RyaW5nLCByb2xlOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHVwZGF0ZVVzZXJTdGF0dXM6ICh1c2VySWQ6IHN0cmluZywgc3RhdHVzOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGRlbGV0ZVVzZXI6ICh1c2VySWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG4gIC8vIERhc2hib2FyZCBhY3Rpb25zXG4gIHNldEFjdGl2ZVRhYjogKHRhYjogQWRtaW5TdG9yZVsnYWN0aXZlVGFiJ10pID0+IHZvaWQ7XG4gIFxuICAvLyBTeXN0ZW0gc2V0dGluZ3MgYWN0aW9uc1xuICBzZXRTeXN0ZW1TZXR0aW5nczogKHNldHRpbmdzOiBBZG1pblN0b3JlWydzeXN0ZW1TZXR0aW5ncyddKSA9PiB2b2lkO1xuICB1cGRhdGVTeXN0ZW1TZXR0aW5nOiAoc2VjdGlvbjoga2V5b2YgTm9uTnVsbGFibGU8QWRtaW5TdG9yZVsnc3lzdGVtU2V0dGluZ3MnXT4sIGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSA9PiB2b2lkO1xuICBzZXRTZXR0aW5nc1RhYjogKHRhYjogQWRtaW5TdG9yZVsnc2V0dGluZ3NUYWInXSkgPT4gdm9pZDtcbiAgc2F2ZVN5c3RlbVNldHRpbmdzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgLy8gUmVpbXBvcnQgYWN0aW9uc1xuICBzZXRSZWltcG9ydFByb2dyZXNzOiAocHJvZ3Jlc3M6IFBhcnRpYWw8QWRtaW5TdG9yZVsncmVpbXBvcnRQcm9ncmVzcyddPikgPT4gdm9pZDtcbiAgYWRkUmVpbXBvcnRMb2c6IChtZXNzYWdlOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNsZWFyUmVpbXBvcnRMb2dzOiAoKSA9PiB2b2lkO1xuICBzZXRJc1JlaW1wb3J0UnVubmluZzogKHJ1bm5pbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHN0YXJ0UmVpbXBvcnQ6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBBY3Rpdml0eSBhbmQgbm90aWZpY2F0aW9uc1xuICBhZGRBY3Rpdml0eUl0ZW06IChpdGVtOiBBY3Rpdml0eUl0ZW0pID0+IHZvaWQ7XG4gIGNsZWFyQWN0aXZpdHlJdGVtczogKCkgPT4gdm9pZDtcbiAgYWRkQWRtaW5Ob3RpZmljYXRpb246IChub3RpZmljYXRpb246IEFkbWluTm90aWZpY2F0aW9uKSA9PiB2b2lkO1xuICBjbGVhckFkbWluTm90aWZpY2F0aW9uczogKCkgPT4gdm9pZDtcbiAgbWFya05vdGlmaWNhdGlvbkFzUmVhZDogKGlkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIFxuICAvLyBVdGlsaXR5IGFjdGlvbnNcbiAgc2V0TG9hZGluZzogKGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldFVwZGF0aW5nOiAodXBkYXRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldEVycm9yOiAoZXJyb3I6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gIGNsZWFyRXJyb3I6ICgpID0+IHZvaWQ7XG4gIHNldElzU2F2aW5nU2V0dGluZ3M6IChzYXZpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHJlZnJlc2hEYXRhOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBzeW5jRGF0YTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuLy8gQ3JlYXRlIHRoZSBhZG1pbiBzdG9yZVxuZXhwb3J0IGNvbnN0IHVzZUFkbWluU3RvcmUgPSBjcmVhdGU8QWRtaW5TdG9yZT4oKShcbiAgZGV2dG9vbHMoXG4gICAgcGVyc2lzdChcbiAgICAgIChzZXQsIGdldCkgPT4gKHtcbiAgICAgICAgLy8gSW5pdGlhbCBzdGF0ZVxuICAgICAgICB0cmVuZGluZ1RvcGljczogW10sXG4gICAgICAgIGdlbmVyYXRlZFBvbGxzOiBbXSxcbiAgICAgICAgc3lzdGVtTWV0cmljczogbnVsbCxcbiAgICAgICAgYWN0aXZpdHlJdGVtczogW10sXG4gICAgICAgIGFjdGl2aXR5RmVlZDogW10sXG4gICAgICAgIHVzZXJzOiBbXSxcbiAgICAgICAgdXNlckZpbHRlcnM6IHtcbiAgICAgICAgICBzZWFyY2hUZXJtOiAnJyxcbiAgICAgICAgICByb2xlRmlsdGVyOiAnYWxsJyxcbiAgICAgICAgICBzdGF0dXNGaWx0ZXI6ICdhbGwnLFxuICAgICAgICAgIHNlbGVjdGVkVXNlcnM6IG5ldyBTZXQoKSxcbiAgICAgICAgICBzaG93QnVsa0FjdGlvbnM6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBhY3RpdmVUYWI6ICdvdmVydmlldycsXG4gICAgICAgIGRhc2hib2FyZFN0YXRzOiBudWxsLFxuICAgICAgICBzeXN0ZW1TZXR0aW5nczogbnVsbCxcbiAgICAgICAgc2V0dGluZ3NUYWI6ICdnZW5lcmFsJyxcbiAgICAgICAgaXNTYXZpbmdTZXR0aW5nczogZmFsc2UsXG4gICAgICAgIHJlaW1wb3J0UHJvZ3Jlc3M6IHtcbiAgICAgICAgICB0b3RhbFN0YXRlczogMCxcbiAgICAgICAgICBwcm9jZXNzZWRTdGF0ZXM6IDAsXG4gICAgICAgICAgc3VjY2Vzc2Z1bFN0YXRlczogMCxcbiAgICAgICAgICBmYWlsZWRTdGF0ZXM6IDAsXG4gICAgICAgICAgdG90YWxSZXByZXNlbnRhdGl2ZXM6IDAsXG4gICAgICAgICAgZmVkZXJhbFJlcHJlc2VudGF0aXZlczogMCxcbiAgICAgICAgICBzdGF0ZVJlcHJlc2VudGF0aXZlczogMCxcbiAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgIHN0YXRlUmVzdWx0czogW10sXG4gICAgICAgIH0sXG4gICAgICAgIHJlaW1wb3J0TG9nczogW10sXG4gICAgICAgIGlzUmVpbXBvcnRSdW5uaW5nOiBmYWxzZSxcbiAgICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgIGFkbWluTm90aWZpY2F0aW9uczogW10sXG5cbiAgICAgICAgLy8gRGF0YSBsb2FkaW5nIGFjdGlvbnNcbiAgICAgICAgbG9hZFVzZXJzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXRMb2FkaW5nLCBzZXRFcnJvciB9ID0gZ2V0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmV0Y2ggdXNlcnMgZGlyZWN0bHkgZnJvbSBkYXRhYmFzZVxuICAgICAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBpbXBvcnQoJ0AvdXRpbHMvc3VwYWJhc2UvY2xpZW50JykudGhlbihtID0+IG0uZ2V0U3VwYWJhc2VDbGllbnQoKSk7XG4gICAgICAgICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogdXNlcnMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXG4gICAgICAgICAgICAgIC5zZWxlY3QoYFxuICAgICAgICAgICAgICAgIHVzZXJfaWQsXG4gICAgICAgICAgICAgICAgZW1haWwsXG4gICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lLFxuICAgICAgICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgICAgICAgIGNyZWF0ZWRfYXQsXG4gICAgICAgICAgICAgICAgbGFzdF9sb2dpblxuICAgICAgICAgICAgICBgKVxuICAgICAgICAgICAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB1c2VyczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gZGF0YSB0byBtYXRjaCBBZG1pblVzZXIgaW50ZXJmYWNlXG4gICAgICAgICAgICBjb25zdCBhZG1pblVzZXJzOiBBZG1pblVzZXJbXSA9IHVzZXJzPy5tYXAodXNlciA9PiAoe1xuICAgICAgICAgICAgICBpZDogdXNlci51c2VyX2lkLFxuICAgICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgICAgbmFtZTogdXNlci5kaXNwbGF5X25hbWUgfHwgJ1Vua25vd24gVXNlcicsXG4gICAgICAgICAgICAgIHJvbGU6ICh1c2VyLnJvbGUgYXMgJ2FkbWluJyB8ICdtb2RlcmF0b3InIHwgJ3VzZXInKSB8fCAndXNlcicsXG4gICAgICAgICAgICAgIHN0YXR1czogKHVzZXIuc3RhdHVzIGFzICdhY3RpdmUnIHwgJ2luYWN0aXZlJyB8ICdzdXNwZW5kZWQnKSB8fCAnYWN0aXZlJyxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogdXNlci5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgICBsYXN0X2xvZ2luOiB1c2VyLmxhc3RfbG9naW5cbiAgICAgICAgICAgIH0pKSB8fCBbXTtcblxuICAgICAgICAgICAgc2V0KHsgdXNlcnM6IGFkbWluVXNlcnMgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdVc2VycyBsb2FkZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICAgICAgICB1c2VyQ291bnQ6IGFkbWluVXNlcnMubGVuZ3RoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCB1c2VyczonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGxvYWREYXNoYm9hcmRTdGF0czogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgc2V0TG9hZGluZywgc2V0RXJyb3IgfSA9IGdldCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZldGNoIGRhc2hib2FyZCBzdGF0cyBkaXJlY3RseSBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGltcG9ydCgnQC91dGlscy9zdXBhYmFzZS9jbGllbnQnKS50aGVuKG0gPT4gbS5nZXRTdXBhYmFzZUNsaWVudCgpKTtcbiAgICAgICAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRvdGFsIHVzZXJzIGNvdW50XG4gICAgICAgICAgICBjb25zdCB7IGNvdW50OiB0b3RhbFVzZXJzLCBlcnJvcjogdXNlcnNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxuICAgICAgICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcblxuICAgICAgICAgICAgaWYgKHVzZXJzRXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdXNlciBjb3VudDogJHt1c2Vyc0Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdldCBhY3RpdmUgcG9sbHMgY291bnRcbiAgICAgICAgICAgIGNvbnN0IHsgY291bnQ6IGFjdGl2ZVBvbGxzLCBlcnJvcjogcG9sbHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ3BvbGxzJylcbiAgICAgICAgICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSlcbiAgICAgICAgICAgICAgLmVxKCdzdGF0dXMnLCAnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgIGlmIChwb2xsc0Vycm9yKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHBvbGxzIGNvdW50OiAke3BvbGxzRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IHRvdGFsIHZvdGVzIGNvdW50XG4gICAgICAgICAgICBjb25zdCB7IGNvdW50OiB0b3RhbFZvdGVzLCBlcnJvcjogdm90ZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ3ZvdGVzJylcbiAgICAgICAgICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSk7XG5cbiAgICAgICAgICAgIGlmICh2b3Rlc0Vycm9yKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHZvdGVzIGNvdW50OiAke3ZvdGVzRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHN5c3RlbSBoZWFsdGggYmFzZWQgb24gcmVjZW50IGFjdGl2aXR5XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHJlY2VudEFjdGl2aXR5IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgnYW5hbHl0aWNzX2V2ZW50cycpXG4gICAgICAgICAgICAgIC5zZWxlY3QoJ2NyZWF0ZWRfYXQnKVxuICAgICAgICAgICAgICAuZ3RlKCdjcmVhdGVkX2F0JywgbmV3IERhdGUoRGF0ZS5ub3coKSAtIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkpXG4gICAgICAgICAgICAgIC5saW1pdCgxKTtcblxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtSGVhbHRoID0gcmVjZW50QWN0aXZpdHkgJiYgcmVjZW50QWN0aXZpdHkubGVuZ3RoID4gMCA/ICdoZWFsdGh5JyA6ICd3YXJuaW5nJztcblxuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgICAgICAgIHRvdGFsVXNlcnM6IHRvdGFsVXNlcnMgfHwgMCxcbiAgICAgICAgICAgICAgYWN0aXZlUG9sbHM6IGFjdGl2ZVBvbGxzIHx8IDAsXG4gICAgICAgICAgICAgIHRvdGFsVm90ZXM6IHRvdGFsVm90ZXMgfHwgMCxcbiAgICAgICAgICAgICAgc3lzdGVtSGVhbHRoOiBzeXN0ZW1IZWFsdGggYXMgJ2hlYWx0aHknIHwgJ3dhcm5pbmcnIHwgJ2NyaXRpY2FsJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc2V0KHsgZGFzaGJvYXJkU3RhdHM6IHN0YXRzIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnRGFzaGJvYXJkIHN0YXRzIGxvYWRlZCBzdWNjZXNzZnVsbHknLCB7XG4gICAgICAgICAgICAgIHRvdGFsVXNlcnM6IHN0YXRzLnRvdGFsVXNlcnMsXG4gICAgICAgICAgICAgIGFjdGl2ZVBvbGxzOiBzdGF0cy5hY3RpdmVQb2xscyxcbiAgICAgICAgICAgICAgdG90YWxWb3Rlczogc3RhdHMudG90YWxWb3RlcyxcbiAgICAgICAgICAgICAgc3lzdGVtSGVhbHRoOiBzdGF0cy5zeXN0ZW1IZWFsdGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGRhc2hib2FyZCBzdGF0czonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGxvYWRTeXN0ZW1TZXR0aW5nczogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgc2V0TG9hZGluZywgc2V0RXJyb3IgfSA9IGdldCgpO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgICAgICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZldGNoIHN5c3RlbSBzZXR0aW5ncyBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGltcG9ydCgnQC91dGlscy9zdXBhYmFzZS9jbGllbnQnKS50aGVuKG0gPT4gbS5nZXRTdXBhYmFzZUNsaWVudCgpKTtcbiAgICAgICAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBzZXR0aW5nc0RhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgnc3lzdGVtX3NldHRpbmdzJylcbiAgICAgICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgICAgICAgaWYgKGVycm9yICYmIGVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHsgLy8gUEdSU1QxMTYgPSBubyByb3dzIHJldHVybmVkXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHN5c3RlbSBzZXR0aW5nczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVc2UgZGVmYXVsdCBzZXR0aW5ncyBpZiBub25lIGV4aXN0IGluIGRhdGFiYXNlXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3MgPSB7XG4gICAgICAgICAgICAgIGdlbmVyYWw6IHtcbiAgICAgICAgICAgICAgICBzaXRlTmFtZTogJ0Nob2ljZXMgUGxhdGZvcm0nLFxuICAgICAgICAgICAgICAgIHNpdGVEZXNjcmlwdGlvbjogJ0EgbW9kZXJuIHZvdGluZyBwbGF0Zm9ybSBmb3IgZGVtb2NyYXRpYyBkZWNpc2lvbiBtYWtpbmcnLFxuICAgICAgICAgICAgICAgIG1haW50ZW5hbmNlTW9kZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYWxsb3dSZWdpc3RyYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgcmVxdWlyZUVtYWlsVmVyaWZpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICAgICAgICAgIGVuYWJsZUNhY2hpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FjaGVUVEw6IDM2MDAsXG4gICAgICAgICAgICAgICAgZW5hYmxlQ29tcHJlc3Npb246IHRydWUsXG4gICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IDEwNDg1NzYwLCAvLyAxME1CXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHNlY3VyaXR5OiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlUmF0ZUxpbWl0aW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1heFJlcXVlc3RzUGVyTWludXRlOiAxMDAsXG4gICAgICAgICAgICAgICAgZW5hYmxlQ1NQOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVuYWJsZUhTVFM6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBlbmFibGVFbWFpbE5vdGlmaWNhdGlvbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgZW5hYmxlUHVzaE5vdGlmaWNhdGlvbnM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkZyZXF1ZW5jeTogJ2ltbWVkaWF0ZScgYXMgY29uc3QsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHNldHRpbmdzRGF0YT8uc2V0dGluZ3MgfHwgZGVmYXVsdFNldHRpbmdzO1xuICAgICAgICAgICAgc2V0KHsgc3lzdGVtU2V0dGluZ3M6IHNldHRpbmdzIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnU3lzdGVtIHNldHRpbmdzIGxvYWRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICAgICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBzeXN0ZW0gc2V0dGluZ3M6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKGVycm9yTWVzc2FnZSkpO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBVc2VyIG1hbmFnZW1lbnQgYWN0aW9uc1xuICAgICAgICBzZXRVc2VyRmlsdGVyczogKGZpbHRlcnMpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgdXNlckZpbHRlcnM6IHsgLi4uc3RhdGUudXNlckZpbHRlcnMsIC4uLmZpbHRlcnMgfVxuICAgICAgICB9KSksXG5cbiAgICAgICAgc2VsZWN0VXNlcjogKHVzZXJJZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICB1c2VyRmlsdGVyczoge1xuICAgICAgICAgICAgLi4uc3RhdGUudXNlckZpbHRlcnMsXG4gICAgICAgICAgICBzZWxlY3RlZFVzZXJzOiBuZXcgU2V0KFsuLi5zdGF0ZS51c2VyRmlsdGVycy5zZWxlY3RlZFVzZXJzLCB1c2VySWRdKVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpLFxuXG4gICAgICAgIGRlc2VsZWN0VXNlcjogKHVzZXJJZCkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IG5ld1NlbGVjdGVkID0gbmV3IFNldChzdGF0ZS51c2VyRmlsdGVycy5zZWxlY3RlZFVzZXJzKTtcbiAgICAgICAgICBuZXdTZWxlY3RlZC5kZWxldGUodXNlcklkKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlckZpbHRlcnM6IHtcbiAgICAgICAgICAgICAgLi4uc3RhdGUudXNlckZpbHRlcnMsXG4gICAgICAgICAgICAgIHNlbGVjdGVkVXNlcnM6IG5ld1NlbGVjdGVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG5cbiAgICAgICAgc2VsZWN0QWxsVXNlcnM6ICgpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgdXNlckZpbHRlcnM6IHtcbiAgICAgICAgICAgIC4uLnN0YXRlLnVzZXJGaWx0ZXJzLFxuICAgICAgICAgICAgc2VsZWN0ZWRVc2VyczogbmV3IFNldChzdGF0ZS51c2Vycy5tYXAodXNlciA9PiB1c2VyLmlkKSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pKSxcblxuICAgICAgICBkZXNlbGVjdEFsbFVzZXJzOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHVzZXJGaWx0ZXJzOiB7XG4gICAgICAgICAgICAuLi5zdGF0ZS51c2VyRmlsdGVycyxcbiAgICAgICAgICAgIHNlbGVjdGVkVXNlcnM6IG5ldyBTZXQoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpLFxuXG4gICAgICAgIHVwZGF0ZVVzZXJSb2xlOiBhc3luYyAodXNlcklkLCByb2xlKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL2NsaWVudCcpLnRoZW4obSA9PiBtLmdldFN1cGFiYXNlQ2xpZW50KCkpO1xuICAgICAgICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXG4gICAgICAgICAgICAgIC51cGRhdGUoeyByb2xlIH0pXG4gICAgICAgICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgdXNlciByb2xlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBzdGF0ZVxuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICAgICAgdXNlcnM6IHN0YXRlLnVzZXJzLm1hcCh1c2VyID0+IFxuICAgICAgICAgICAgICAgIHVzZXIuaWQgPT09IHVzZXJJZCA/IHsgLi4udXNlciwgcm9sZTogcm9sZSBhcyAnYWRtaW4nIHwgJ21vZGVyYXRvcicgfCAndXNlcicgfSA6IHVzZXJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnVXNlciByb2xlIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JywgeyB1c2VySWQsIHJvbGUgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICAgICAgc2V0KHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIHJvbGU6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKGVycm9yTWVzc2FnZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVVc2VyU3RhdHVzOiBhc3luYyAodXNlcklkLCBzdGF0dXMpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBpbXBvcnQoJ0AvdXRpbHMvc3VwYWJhc2UvY2xpZW50JykudGhlbihtID0+IG0uZ2V0U3VwYWJhc2VDbGllbnQoKSk7XG4gICAgICAgICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcbiAgICAgICAgICAgICAgLnVwZGF0ZSh7IHN0YXR1cyB9KVxuICAgICAgICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xuXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gdXBkYXRlIHVzZXIgc3RhdHVzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBsb2NhbCBzdGF0ZVxuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICAgICAgdXNlcnM6IHN0YXRlLnVzZXJzLm1hcCh1c2VyID0+IFxuICAgICAgICAgICAgICAgIHVzZXIuaWQgPT09IHVzZXJJZCA/IHsgLi4udXNlciwgc3RhdHVzOiBzdGF0dXMgYXMgJ2FjdGl2ZScgfCAnaW5hY3RpdmUnIHwgJ3N1c3BlbmRlZCcgfSA6IHVzZXJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnVXNlciBzdGF0dXMgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCB7IHVzZXJJZCwgc3RhdHVzIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldCh7IGVycm9yOiBlcnJvck1lc3NhZ2UgfSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgdXNlciBzdGF0dXM6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKGVycm9yTWVzc2FnZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkZWxldGVVc2VyOiBhc3luYyAodXNlcklkKSA9PiB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL2NsaWVudCcpLnRoZW4obSA9PiBtLmdldFN1cGFiYXNlQ2xpZW50KCkpO1xuICAgICAgICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXG4gICAgICAgICAgICAgIC5kZWxldGUoKVxuICAgICAgICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xuXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIHVzZXI6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgICAgICB1c2Vyczogc3RhdGUudXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5pZCAhPT0gdXNlcklkKVxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnVXNlciBkZWxldGVkIHN1Y2Nlc3NmdWxseScsIHsgdXNlcklkIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldCh7IGVycm9yOiBlcnJvck1lc3NhZ2UgfSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgdXNlcjonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIERhc2hib2FyZCBhY3Rpb25zXG4gICAgICAgIHNldEFjdGl2ZVRhYjogKHRhYikgPT4gc2V0KHsgYWN0aXZlVGFiOiB0YWIgfSksXG5cbiAgICAgICAgLy8gU3lzdGVtIHNldHRpbmdzIGFjdGlvbnNcbiAgICAgICAgc2V0U3lzdGVtU2V0dGluZ3M6IChzZXR0aW5ncykgPT4gc2V0KHsgc3lzdGVtU2V0dGluZ3M6IHNldHRpbmdzIH0pLFxuICAgICAgICBcbiAgICAgICAgdXBkYXRlU3lzdGVtU2V0dGluZzogKHNlY3Rpb24sIGtleSwgdmFsdWUpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBpZiAoIXN0YXRlLnN5c3RlbVNldHRpbmdzKSByZXR1cm4gc3RhdGU7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN5c3RlbVNldHRpbmdzOiB3aXRoT3B0aW9uYWwoc3RhdGUuc3lzdGVtU2V0dGluZ3MsIHtcbiAgICAgICAgICAgICAgW3NlY3Rpb25dOiB3aXRoT3B0aW9uYWwoc3RhdGUuc3lzdGVtU2V0dGluZ3Nbc2VjdGlvbl0sIHsgW2tleV06IHZhbHVlIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgc2V0U2V0dGluZ3NUYWI6ICh0YWIpID0+IHNldCh7IHNldHRpbmdzVGFiOiB0YWIgfSksXG5cbiAgICAgICAgc2F2ZVN5c3RlbVNldHRpbmdzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXRJc1NhdmluZ1NldHRpbmdzLCBzZXRFcnJvciB9ID0gZ2V0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldElzU2F2aW5nU2V0dGluZ3ModHJ1ZSk7XG4gICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgeyBzeXN0ZW1TZXR0aW5ncyB9ID0gZ2V0KCk7XG4gICAgICAgICAgICBpZiAoIXN5c3RlbVNldHRpbmdzKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gc2V0dGluZ3MgdG8gc2F2ZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGltcG9ydCgnQC91dGlscy9zdXBhYmFzZS9jbGllbnQnKS50aGVuKG0gPT4gbS5nZXRTdXBhYmFzZUNsaWVudCgpKTtcbiAgICAgICAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ3N5c3RlbV9zZXR0aW5ncycpXG4gICAgICAgICAgICAgIC51cHNlcnQoeyBzZXR0aW5nczogc3lzdGVtU2V0dGluZ3MgfSk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBzYXZlIHN5c3RlbSBzZXR0aW5nczogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsb2dnZXIuaW5mbygnU3lzdGVtIHNldHRpbmdzIHNhdmVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHN5c3RlbSBzZXR0aW5nczonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldElzU2F2aW5nU2V0dGluZ3MoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBSZWltcG9ydCBhY3Rpb25zXG4gICAgICAgIHNldFJlaW1wb3J0UHJvZ3Jlc3M6IChwcm9ncmVzcykgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICByZWltcG9ydFByb2dyZXNzOiB7IC4uLnN0YXRlLnJlaW1wb3J0UHJvZ3Jlc3MsIC4uLnByb2dyZXNzIH1cbiAgICAgICAgfSkpLFxuXG4gICAgICAgIGFkZFJlaW1wb3J0TG9nOiAobWVzc2FnZSkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICByZWltcG9ydExvZ3M6IFsuLi5zdGF0ZS5yZWltcG9ydExvZ3MsIG1lc3NhZ2VdXG4gICAgICAgIH0pKSxcblxuICAgICAgICBjbGVhclJlaW1wb3J0TG9nczogKCkgPT4gc2V0KHsgcmVpbXBvcnRMb2dzOiBbXSB9KSxcblxuICAgICAgICBzZXRJc1JlaW1wb3J0UnVubmluZzogKHJ1bm5pbmcpID0+IHNldCh7IGlzUmVpbXBvcnRSdW5uaW5nOiBydW5uaW5nIH0pLFxuXG4gICAgICAgIHN0YXJ0UmVpbXBvcnQ6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHNldElzUmVpbXBvcnRSdW5uaW5nLCBhZGRSZWltcG9ydExvZywgc2V0UmVpbXBvcnRQcm9ncmVzcyB9ID0gZ2V0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldElzUmVpbXBvcnRSdW5uaW5nKHRydWUpO1xuICAgICAgICAgICAgYWRkUmVpbXBvcnRMb2coJ1N0YXJ0aW5nIHJlaW1wb3J0IHByb2Nlc3MuLi4nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzZXQgcHJvZ3Jlc3NcbiAgICAgICAgICAgIHNldFJlaW1wb3J0UHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICB0b3RhbFN0YXRlczogMCxcbiAgICAgICAgICAgICAgcHJvY2Vzc2VkU3RhdGVzOiAwLFxuICAgICAgICAgICAgICBzdWNjZXNzZnVsU3RhdGVzOiAwLFxuICAgICAgICAgICAgICBmYWlsZWRTdGF0ZXM6IDAsXG4gICAgICAgICAgICAgIHRvdGFsUmVwcmVzZW50YXRpdmVzOiAwLFxuICAgICAgICAgICAgICBmZWRlcmFsUmVwcmVzZW50YXRpdmVzOiAwLFxuICAgICAgICAgICAgICBzdGF0ZVJlcHJlc2VudGF0aXZlczogMCxcbiAgICAgICAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgICAgICAgc3RhdGVSZXN1bHRzOiBbXSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBJbXBsZW1lbnRhdGlvbiB3b3VsZCBnbyBoZXJlXG4gICAgICAgICAgICBhZGRSZWltcG9ydExvZygnUmVpbXBvcnQgcHJvY2VzcyBjb21wbGV0ZWQnKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgYWRkUmVpbXBvcnRMb2coYFJlaW1wb3J0IGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0SXNSZWltcG9ydFJ1bm5pbmcoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBBY3Rpdml0eSBhbmQgbm90aWZpY2F0aW9uc1xuICAgICAgICBhZGRBY3Rpdml0eUl0ZW06IChpdGVtKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIGFjdGl2aXR5SXRlbXM6IFtpdGVtLCAuLi5zdGF0ZS5hY3Rpdml0eUl0ZW1zLnNsaWNlKDAsIDk5KV0gLy8gS2VlcCBsYXN0IDEwMCBpdGVtc1xuICAgICAgICB9KSksXG5cbiAgICAgICAgY2xlYXJBY3Rpdml0eUl0ZW1zOiAoKSA9PiBzZXQoeyBhY3Rpdml0eUl0ZW1zOiBbXSB9KSxcblxuICAgICAgICBhZGRBZG1pbk5vdGlmaWNhdGlvbjogKG5vdGlmaWNhdGlvbikgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBhZG1pbk5vdGlmaWNhdGlvbnM6IFtub3RpZmljYXRpb24sIC4uLnN0YXRlLmFkbWluTm90aWZpY2F0aW9uc11cbiAgICAgICAgfSkpLFxuXG4gICAgICAgIGNsZWFyQWRtaW5Ob3RpZmljYXRpb25zOiAoKSA9PiBzZXQoeyBhZG1pbk5vdGlmaWNhdGlvbnM6IFtdIH0pLFxuXG4gICAgICAgIG1hcmtOb3RpZmljYXRpb25Bc1JlYWQ6IChpZCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBhZG1pbk5vdGlmaWNhdGlvbnM6IHN0YXRlLmFkbWluTm90aWZpY2F0aW9ucy5tYXAobm90aWZpY2F0aW9uID0+XG4gICAgICAgICAgICBub3RpZmljYXRpb24uaWQgPT09IGlkID8geyAuLi5ub3RpZmljYXRpb24sIHJlYWQ6IHRydWUgfSA6IG5vdGlmaWNhdGlvblxuICAgICAgICAgIClcbiAgICAgICAgfSkpLFxuXG4gICAgICAgIC8vIFV0aWxpdHkgYWN0aW9uc1xuICAgICAgICBzZXRMb2FkaW5nOiAobG9hZGluZykgPT4gc2V0KHsgaXNMb2FkaW5nOiBsb2FkaW5nIH0pLFxuICAgICAgICBzZXRVcGRhdGluZzogKHVwZGF0aW5nKSA9PiBzZXQoeyBpc1NhdmluZ1NldHRpbmdzOiB1cGRhdGluZyB9KSxcbiAgICAgICAgc2V0RXJyb3I6IChlcnJvcikgPT4gc2V0KHsgZXJyb3IgfSksXG4gICAgICAgIGNsZWFyRXJyb3I6ICgpID0+IHNldCh7IGVycm9yOiBudWxsIH0pLFxuICAgICAgICBzZXRJc1NhdmluZ1NldHRpbmdzOiAoc2F2aW5nKSA9PiBzZXQoeyBpc1NhdmluZ1NldHRpbmdzOiBzYXZpbmcgfSksXG5cbiAgICAgICAgcmVmcmVzaERhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IGxvYWRVc2VycywgbG9hZERhc2hib2FyZFN0YXRzLCBsb2FkU3lzdGVtU2V0dGluZ3MgfSA9IGdldCgpO1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIGxvYWRVc2VycygpLFxuICAgICAgICAgICAgbG9hZERhc2hib2FyZFN0YXRzKCksXG4gICAgICAgICAgICBsb2FkU3lzdGVtU2V0dGluZ3MoKVxuICAgICAgICAgIF0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHN5bmNEYXRhOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyByZWZyZXNoRGF0YSB9ID0gZ2V0KCk7XG4gICAgICAgICAgYXdhaXQgcmVmcmVzaERhdGEoKTtcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAge1xuICAgICAgICBuYW1lOiAnYWRtaW4tc3RvcmUnLFxuICAgICAgICBwYXJ0aWFsaXplOiAoc3RhdGUpID0+ICh7XG4gICAgICAgICAgYWN0aXZlVGFiOiBzdGF0ZS5hY3RpdmVUYWIsXG4gICAgICAgICAgc2V0dGluZ3NUYWI6IHN0YXRlLnNldHRpbmdzVGFiLFxuICAgICAgICAgIHVzZXJGaWx0ZXJzOiBzdGF0ZS51c2VyRmlsdGVycyxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgKSxcbiAgICB7XG4gICAgICBuYW1lOiAnYWRtaW4tc3RvcmUnLFxuICAgIH1cbiAgKVxuKTtcblxuLy8gRXhwb3J0IGluZGl2aWR1YWwgc2VsZWN0b3JzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcbmV4cG9ydCBjb25zdCB1c2VUcmVuZGluZ1RvcGljcyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS50cmVuZGluZ1RvcGljcyk7XG5leHBvcnQgY29uc3QgdXNlR2VuZXJhdGVkUG9sbHMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuZ2VuZXJhdGVkUG9sbHMpO1xuZXhwb3J0IGNvbnN0IHVzZVN5c3RlbU1ldHJpY3MgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuc3lzdGVtTWV0cmljcyk7XG5leHBvcnQgY29uc3QgdXNlQWN0aXZpdHlJdGVtcyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5hY3Rpdml0eUl0ZW1zKTtcbmV4cG9ydCBjb25zdCB1c2VBY3Rpdml0eUZlZWQgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuYWN0aXZpdHlGZWVkKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pbk5vdGlmaWNhdGlvbnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pbkxvYWRpbmcgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuaXNMb2FkaW5nKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pbkVycm9yID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLmVycm9yKTtcblxuLy8gVXNlciBtYW5hZ2VtZW50IHNlbGVjdG9yc1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluVXNlcnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUudXNlcnMpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluVXNlckZpbHRlcnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUudXNlckZpbHRlcnMpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluVXNlckFjdGlvbnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgc2V0VXNlckZpbHRlcnM6IHN0YXRlLnNldFVzZXJGaWx0ZXJzLFxuICBzZWxlY3RVc2VyOiBzdGF0ZS5zZWxlY3RVc2VyLFxuICBkZXNlbGVjdFVzZXI6IHN0YXRlLmRlc2VsZWN0VXNlcixcbiAgc2VsZWN0QWxsVXNlcnM6IHN0YXRlLnNlbGVjdEFsbFVzZXJzLFxuICBkZXNlbGVjdEFsbFVzZXJzOiBzdGF0ZS5kZXNlbGVjdEFsbFVzZXJzLFxuICB1cGRhdGVVc2VyUm9sZTogc3RhdGUudXBkYXRlVXNlclJvbGUsXG4gIHVwZGF0ZVVzZXJTdGF0dXM6IHN0YXRlLnVwZGF0ZVVzZXJTdGF0dXMsXG4gIGRlbGV0ZVVzZXI6IHN0YXRlLmRlbGV0ZVVzZXIsXG59KSk7XG5cbi8vIERhc2hib2FyZCBzZWxlY3RvcnNcbmV4cG9ydCBjb25zdCB1c2VBZG1pbkFjdGl2ZVRhYiA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5hY3RpdmVUYWIpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluRGFzaGJvYXJkU3RhdHMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuZGFzaGJvYXJkU3RhdHMpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluRGFzaGJvYXJkQWN0aW9ucyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBzZXRBY3RpdmVUYWI6IHN0YXRlLnNldEFjdGl2ZVRhYixcbiAgbG9hZERhc2hib2FyZFN0YXRzOiBzdGF0ZS5sb2FkRGFzaGJvYXJkU3RhdHMsXG59KSk7XG5cbi8vIFN5c3RlbSBzZXR0aW5ncyBzZWxlY3RvcnNcbmV4cG9ydCBjb25zdCB1c2VBZG1pblN5c3RlbVNldHRpbmdzID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLnN5c3RlbVNldHRpbmdzKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pblNldHRpbmdzVGFiID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLnNldHRpbmdzVGFiKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pbklzU2F2aW5nU2V0dGluZ3MgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuaXNTYXZpbmdTZXR0aW5ncyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5TeXN0ZW1TZXR0aW5nc0FjdGlvbnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgc2V0U3lzdGVtU2V0dGluZ3M6IHN0YXRlLnNldFN5c3RlbVNldHRpbmdzLFxuICB1cGRhdGVTeXN0ZW1TZXR0aW5nOiBzdGF0ZS51cGRhdGVTeXN0ZW1TZXR0aW5nLFxuICBzZXRTZXR0aW5nc1RhYjogc3RhdGUuc2V0U2V0dGluZ3NUYWIsXG4gIHNhdmVTeXN0ZW1TZXR0aW5nczogc3RhdGUuc2F2ZVN5c3RlbVNldHRpbmdzLFxuICBsb2FkU3lzdGVtU2V0dGluZ3M6IHN0YXRlLmxvYWRTeXN0ZW1TZXR0aW5ncyxcbn0pKTtcblxuLy8gUmVpbXBvcnQgc2VsZWN0b3JzXG5leHBvcnQgY29uc3QgdXNlQWRtaW5SZWltcG9ydFByb2dyZXNzID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLnJlaW1wb3J0UHJvZ3Jlc3MpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluUmVpbXBvcnRMb2dzID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLnJlaW1wb3J0TG9ncyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5Jc1JlaW1wb3J0UnVubmluZyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5pc1JlaW1wb3J0UnVubmluZyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5SZWltcG9ydEFjdGlvbnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgc2V0UmVpbXBvcnRQcm9ncmVzczogc3RhdGUuc2V0UmVpbXBvcnRQcm9ncmVzcyxcbiAgYWRkUmVpbXBvcnRMb2c6IHN0YXRlLmFkZFJlaW1wb3J0TG9nLFxuICBjbGVhclJlaW1wb3J0TG9nczogc3RhdGUuY2xlYXJSZWltcG9ydExvZ3MsXG4gIHNldElzUmVpbXBvcnRSdW5uaW5nOiBzdGF0ZS5zZXRJc1JlaW1wb3J0UnVubmluZyxcbiAgc3RhcnRSZWltcG9ydDogc3RhdGUuc3RhcnRSZWltcG9ydCxcbn0pKTtcblxuLy8gR2VuZXJhbCBhZG1pbiBhY3Rpb25zXG5leHBvcnQgY29uc3QgdXNlQWRtaW5BY3Rpb25zID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+ICh7XG4gIGxvYWRVc2Vyczogc3RhdGUubG9hZFVzZXJzLFxuICBsb2FkRGFzaGJvYXJkU3RhdHM6IHN0YXRlLmxvYWREYXNoYm9hcmRTdGF0cyxcbiAgbG9hZFN5c3RlbVNldHRpbmdzOiBzdGF0ZS5sb2FkU3lzdGVtU2V0dGluZ3MsXG4gIGFkZEFjdGl2aXR5SXRlbTogc3RhdGUuYWRkQWN0aXZpdHlJdGVtLFxuICBjbGVhckFjdGl2aXR5SXRlbXM6IHN0YXRlLmNsZWFyQWN0aXZpdHlJdGVtcyxcbiAgYWRkQWRtaW5Ob3RpZmljYXRpb246IHN0YXRlLmFkZEFkbWluTm90aWZpY2F0aW9uLFxuICBjbGVhckFkbWluTm90aWZpY2F0aW9uczogc3RhdGUuY2xlYXJBZG1pbk5vdGlmaWNhdGlvbnMsXG4gIG1hcmtOb3RpZmljYXRpb25Bc1JlYWQ6IHN0YXRlLm1hcmtOb3RpZmljYXRpb25Bc1JlYWQsXG4gIHNldExvYWRpbmc6IHN0YXRlLnNldExvYWRpbmcsXG4gIHNldFVwZGF0aW5nOiBzdGF0ZS5zZXRVcGRhdGluZyxcbiAgc2V0RXJyb3I6IHN0YXRlLnNldEVycm9yLFxuICBjbGVhckVycm9yOiBzdGF0ZS5jbGVhckVycm9yLFxuICByZWZyZXNoRGF0YTogc3RhdGUucmVmcmVzaERhdGEsXG4gIHN5bmNEYXRhOiBzdGF0ZS5zeW5jRGF0YSxcbn0pKTtcblxuLy8gQWRtaW4gc3RvcmUgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgdXNlQWRtaW5TdGF0cyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiAoe1xuICB0b3RhbFVzZXJzOiBzdGF0ZS51c2Vycy5sZW5ndGgsXG4gIHRvdGFsTm90aWZpY2F0aW9uczogc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zLmxlbmd0aCxcbiAgdW5yZWFkTm90aWZpY2F0aW9uczogc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zLmZpbHRlcihuID0+ICFuLnJlYWQpLmxlbmd0aCxcbiAgdG90YWxBY3Rpdml0eTogc3RhdGUuYWN0aXZpdHlJdGVtcy5sZW5ndGgsXG59KSk7XG5cbi8vIFJlY2VudCBhY3Rpdml0eSBzZWxlY3RvclxuZXhwb3J0IGNvbnN0IHVzZVJlY2VudEFjdGl2aXR5ID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IFxuICBzdGF0ZS5hY3Rpdml0eUl0ZW1zLnNsaWNlKDAsIDEwKVxuKTtcblxuLy8gQWRtaW4gc3RvcmUgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgYWRtaW5TdG9yZVV0aWxzID0ge1xuICBnZXRBZG1pblN0YXRzOiAoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSB1c2VBZG1pblN0b3JlLmdldFN0YXRlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsVXNlcnM6IHN0YXRlLnVzZXJzLmxlbmd0aCxcbiAgICAgIHRvdGFsTm90aWZpY2F0aW9uczogc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zLmxlbmd0aCxcbiAgICAgIHVucmVhZE5vdGlmaWNhdGlvbnM6IHN0YXRlLmFkbWluTm90aWZpY2F0aW9ucy5maWx0ZXIobiA9PiAhbi5yZWFkKS5sZW5ndGgsXG4gICAgICB0b3RhbEFjdGl2aXR5OiBzdGF0ZS5hY3Rpdml0eUl0ZW1zLmxlbmd0aCxcbiAgICB9O1xuICB9LFxuXG4gIGdldERhdGFTdW1tYXJ5OiAoKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSB1c2VBZG1pblN0b3JlLmdldFN0YXRlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJzOiBzdGF0ZS51c2Vycy5sZW5ndGgsXG4gICAgICB0cmVuZGluZ1RvcGljczogc3RhdGUudHJlbmRpbmdUb3BpY3MubGVuZ3RoLFxuICAgICAgZ2VuZXJhdGVkUG9sbHM6IHN0YXRlLmdlbmVyYXRlZFBvbGxzLmxlbmd0aCxcbiAgICAgIGFjdGl2aXR5SXRlbXM6IHN0YXRlLmFjdGl2aXR5SXRlbXMubGVuZ3RoLFxuICAgICAgbm90aWZpY2F0aW9uczogc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zLmxlbmd0aCxcbiAgICB9O1xuICB9LFxufTtcblxuLy8gQWRtaW4gc3RvcmUgc3Vic2NyaXB0aW9uc1xuZXhwb3J0IGNvbnN0IGFkbWluU3RvcmVTdWJzY3JpcHRpb25zID0ge1xuICBzdWJzY3JpYmVUb1VzZXJzOiAoY2FsbGJhY2s6ICh1c2VyczogQWRtaW5Vc2VyW10pID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlQWRtaW5TdG9yZS5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICBjYWxsYmFjayhzdGF0ZS51c2Vycyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc3Vic2NyaWJlVG9EYXNoYm9hcmRTdGF0czogKGNhbGxiYWNrOiAoc3RhdHM6IEFkbWluU3RvcmVbJ2Rhc2hib2FyZFN0YXRzJ10pID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlQWRtaW5TdG9yZS5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICBjYWxsYmFjayhzdGF0ZS5kYXNoYm9hcmRTdGF0cyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgc3Vic2NyaWJlVG9Ob3RpZmljYXRpb25zOiAoY2FsbGJhY2s6IChub3RpZmljYXRpb25zOiBBZG1pbk5vdGlmaWNhdGlvbltdKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV0dXJuIHVzZUFkbWluU3RvcmUuc3Vic2NyaWJlKChzdGF0ZSkgPT4ge1xuICAgICAgY2FsbGJhY2soc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zKTtcbiAgICB9KTtcbiAgfSxcbn07XG5cbi8vIEFkbWluIHN0b3JlIGRlYnVnIHV0aWxpdGllc1xuZXhwb3J0IGNvbnN0IGFkbWluU3RvcmVEZWJ1ZyA9IHtcbiAgbG9nU3RhdGU6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZUFkbWluU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAvLyBBZG1pbiBzdG9yZSBzdGF0ZSBsb2dnZWRcbiAgfSxcbiAgXG4gIGxvZ1N0YXRzOiAoKSA9PiB7XG4gICAgY29uc3Qgc3RhdHMgPSBhZG1pblN0b3JlVXRpbHMuZ2V0QWRtaW5TdGF0cygpO1xuICAgIC8vIEFkbWluIHN0YXRpc3RpY3MgbG9nZ2VkXG4gIH0sXG4gIFxuICBsb2dEYXRhU3VtbWFyeTogKCkgPT4ge1xuICAgIGNvbnN0IHN1bW1hcnkgPSBhZG1pblN0b3JlVXRpbHMuZ2V0RGF0YVN1bW1hcnkoKTtcbiAgICAvLyBBZG1pbiBkYXRhIHN1bW1hcnkgbG9nZ2VkXG4gIH0sXG4gIFxuICByZXNldDogKCkgPT4ge1xuICAgIHVzZUFkbWluU3RvcmUuZ2V0U3RhdGUoKS5jbGVhckFjdGl2aXR5SXRlbXMoKTtcbiAgICB1c2VBZG1pblN0b3JlLmdldFN0YXRlKCkuY2xlYXJBZG1pbk5vdGlmaWNhdGlvbnMoKTtcbiAgICAvLyBBZG1pbiBzdG9yZSByZXNldFxuICB9XG59OyJdLCJuYW1lcyI6WyJhZG1pblN0b3JlRGVidWciLCJhZG1pblN0b3JlU3Vic2NyaXB0aW9ucyIsImFkbWluU3RvcmVVdGlscyIsInVzZUFjdGl2aXR5RmVlZCIsInVzZUFjdGl2aXR5SXRlbXMiLCJ1c2VBZG1pbkFjdGlvbnMiLCJ1c2VBZG1pbkFjdGl2ZVRhYiIsInVzZUFkbWluRGFzaGJvYXJkQWN0aW9ucyIsInVzZUFkbWluRGFzaGJvYXJkU3RhdHMiLCJ1c2VBZG1pbkVycm9yIiwidXNlQWRtaW5Jc1JlaW1wb3J0UnVubmluZyIsInVzZUFkbWluSXNTYXZpbmdTZXR0aW5ncyIsInVzZUFkbWluTG9hZGluZyIsInVzZUFkbWluTm90aWZpY2F0aW9ucyIsInVzZUFkbWluUmVpbXBvcnRBY3Rpb25zIiwidXNlQWRtaW5SZWltcG9ydExvZ3MiLCJ1c2VBZG1pblJlaW1wb3J0UHJvZ3Jlc3MiLCJ1c2VBZG1pblNldHRpbmdzVGFiIiwidXNlQWRtaW5TdGF0cyIsInVzZUFkbWluU3RvcmUiLCJ1c2VBZG1pblN5c3RlbVNldHRpbmdzIiwidXNlQWRtaW5TeXN0ZW1TZXR0aW5nc0FjdGlvbnMiLCJ1c2VBZG1pblVzZXJBY3Rpb25zIiwidXNlQWRtaW5Vc2VyRmlsdGVycyIsInVzZUFkbWluVXNlcnMiLCJ1c2VHZW5lcmF0ZWRQb2xscyIsInVzZVJlY2VudEFjdGl2aXR5IiwidXNlU3lzdGVtTWV0cmljcyIsInVzZVRyZW5kaW5nVG9waWNzIiwiY3JlYXRlIiwiZGV2dG9vbHMiLCJwZXJzaXN0Iiwic2V0IiwiZ2V0IiwidHJlbmRpbmdUb3BpY3MiLCJnZW5lcmF0ZWRQb2xscyIsInN5c3RlbU1ldHJpY3MiLCJhY3Rpdml0eUl0ZW1zIiwiYWN0aXZpdHlGZWVkIiwidXNlcnMiLCJ1c2VyRmlsdGVycyIsInNlYXJjaFRlcm0iLCJyb2xlRmlsdGVyIiwic3RhdHVzRmlsdGVyIiwic2VsZWN0ZWRVc2VycyIsIlNldCIsInNob3dCdWxrQWN0aW9ucyIsImFjdGl2ZVRhYiIsImRhc2hib2FyZFN0YXRzIiwic3lzdGVtU2V0dGluZ3MiLCJzZXR0aW5nc1RhYiIsImlzU2F2aW5nU2V0dGluZ3MiLCJyZWltcG9ydFByb2dyZXNzIiwidG90YWxTdGF0ZXMiLCJwcm9jZXNzZWRTdGF0ZXMiLCJzdWNjZXNzZnVsU3RhdGVzIiwiZmFpbGVkU3RhdGVzIiwidG90YWxSZXByZXNlbnRhdGl2ZXMiLCJmZWRlcmFsUmVwcmVzZW50YXRpdmVzIiwic3RhdGVSZXByZXNlbnRhdGl2ZXMiLCJlcnJvcnMiLCJzdGF0ZVJlc3VsdHMiLCJyZWltcG9ydExvZ3MiLCJpc1JlaW1wb3J0UnVubmluZyIsImlzTG9hZGluZyIsImVycm9yIiwiYWRtaW5Ob3RpZmljYXRpb25zIiwibG9hZFVzZXJzIiwic2V0TG9hZGluZyIsInNldEVycm9yIiwic3VwYWJhc2UiLCJ0aGVuIiwibSIsImdldFN1cGFiYXNlQ2xpZW50IiwiRXJyb3IiLCJkYXRhIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibWVzc2FnZSIsImFkbWluVXNlcnMiLCJtYXAiLCJ1c2VyIiwiaWQiLCJ1c2VyX2lkIiwiZW1haWwiLCJuYW1lIiwiZGlzcGxheV9uYW1lIiwicm9sZSIsInN0YXR1cyIsImNyZWF0ZWRfYXQiLCJsYXN0X2xvZ2luIiwibG9nZ2VyIiwiaW5mbyIsInVzZXJDb3VudCIsImxlbmd0aCIsImVycm9yTWVzc2FnZSIsImxvYWREYXNoYm9hcmRTdGF0cyIsImNvdW50IiwidG90YWxVc2VycyIsInVzZXJzRXJyb3IiLCJoZWFkIiwiYWN0aXZlUG9sbHMiLCJwb2xsc0Vycm9yIiwiZXEiLCJ0b3RhbFZvdGVzIiwidm90ZXNFcnJvciIsInJlY2VudEFjdGl2aXR5IiwiZ3RlIiwiRGF0ZSIsIm5vdyIsInRvSVNPU3RyaW5nIiwibGltaXQiLCJzeXN0ZW1IZWFsdGgiLCJzdGF0cyIsImxvYWRTeXN0ZW1TZXR0aW5ncyIsInNldHRpbmdzRGF0YSIsInNpbmdsZSIsImNvZGUiLCJkZWZhdWx0U2V0dGluZ3MiLCJnZW5lcmFsIiwic2l0ZU5hbWUiLCJzaXRlRGVzY3JpcHRpb24iLCJtYWludGVuYW5jZU1vZGUiLCJhbGxvd1JlZ2lzdHJhdGlvbiIsInJlcXVpcmVFbWFpbFZlcmlmaWNhdGlvbiIsInBlcmZvcm1hbmNlIiwiZW5hYmxlQ2FjaGluZyIsImNhY2hlVFRMIiwiZW5hYmxlQ29tcHJlc3Npb24iLCJtYXhGaWxlU2l6ZSIsInNlY3VyaXR5IiwiZW5hYmxlUmF0ZUxpbWl0aW5nIiwibWF4UmVxdWVzdHNQZXJNaW51dGUiLCJlbmFibGVDU1AiLCJlbmFibGVIU1RTIiwibm90aWZpY2F0aW9ucyIsImVuYWJsZUVtYWlsTm90aWZpY2F0aW9ucyIsImVuYWJsZVB1c2hOb3RpZmljYXRpb25zIiwibm90aWZpY2F0aW9uRnJlcXVlbmN5Iiwic2V0dGluZ3MiLCJzZXRVc2VyRmlsdGVycyIsImZpbHRlcnMiLCJzdGF0ZSIsInNlbGVjdFVzZXIiLCJ1c2VySWQiLCJkZXNlbGVjdFVzZXIiLCJuZXdTZWxlY3RlZCIsImRlbGV0ZSIsInNlbGVjdEFsbFVzZXJzIiwiZGVzZWxlY3RBbGxVc2VycyIsInVwZGF0ZVVzZXJSb2xlIiwidXBkYXRlIiwidXBkYXRlVXNlclN0YXR1cyIsImRlbGV0ZVVzZXIiLCJmaWx0ZXIiLCJzZXRBY3RpdmVUYWIiLCJ0YWIiLCJzZXRTeXN0ZW1TZXR0aW5ncyIsInVwZGF0ZVN5c3RlbVNldHRpbmciLCJzZWN0aW9uIiwia2V5IiwidmFsdWUiLCJ3aXRoT3B0aW9uYWwiLCJzZXRTZXR0aW5nc1RhYiIsInNhdmVTeXN0ZW1TZXR0aW5ncyIsInNldElzU2F2aW5nU2V0dGluZ3MiLCJ1cHNlcnQiLCJzZXRSZWltcG9ydFByb2dyZXNzIiwicHJvZ3Jlc3MiLCJhZGRSZWltcG9ydExvZyIsImNsZWFyUmVpbXBvcnRMb2dzIiwic2V0SXNSZWltcG9ydFJ1bm5pbmciLCJydW5uaW5nIiwic3RhcnRSZWltcG9ydCIsImFkZEFjdGl2aXR5SXRlbSIsIml0ZW0iLCJzbGljZSIsImNsZWFyQWN0aXZpdHlJdGVtcyIsImFkZEFkbWluTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiY2xlYXJBZG1pbk5vdGlmaWNhdGlvbnMiLCJtYXJrTm90aWZpY2F0aW9uQXNSZWFkIiwicmVhZCIsImxvYWRpbmciLCJzZXRVcGRhdGluZyIsInVwZGF0aW5nIiwiY2xlYXJFcnJvciIsInNhdmluZyIsInJlZnJlc2hEYXRhIiwiUHJvbWlzZSIsImFsbCIsInN5bmNEYXRhIiwicGFydGlhbGl6ZSIsInRvdGFsTm90aWZpY2F0aW9ucyIsInVucmVhZE5vdGlmaWNhdGlvbnMiLCJuIiwidG90YWxBY3Rpdml0eSIsImdldEFkbWluU3RhdHMiLCJnZXRTdGF0ZSIsImdldERhdGFTdW1tYXJ5Iiwic3Vic2NyaWJlVG9Vc2VycyIsImNhbGxiYWNrIiwic3Vic2NyaWJlIiwic3Vic2NyaWJlVG9EYXNoYm9hcmRTdGF0cyIsInN1YnNjcmliZVRvTm90aWZpY2F0aW9ucyIsImxvZ1N0YXRlIiwibG9nU3RhdHMiLCJsb2dEYXRhU3VtbWFyeSIsInN1bW1hcnkiLCJyZXNldCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0NBUUM7Ozs7Ozs7Ozs7O0lBNnhCWUEsZUFBZTtlQUFmQTs7SUFyQkFDLHVCQUF1QjtlQUF2QkE7O0lBeEJBQyxlQUFlO2VBQWZBOztJQW5GQUMsZUFBZTtlQUFmQTs7SUFEQUMsZ0JBQWdCO2VBQWhCQTs7SUFxREFDLGVBQWU7ZUFBZkE7O0lBaENBQyxpQkFBaUI7ZUFBakJBOztJQUVBQyx3QkFBd0I7ZUFBeEJBOztJQURBQyxzQkFBc0I7ZUFBdEJBOztJQWxCQUMsYUFBYTtlQUFiQTs7SUF1Q0FDLHlCQUF5QjtlQUF6QkE7O0lBWkFDLHdCQUF3QjtlQUF4QkE7O0lBNUJBQyxlQUFlO2VBQWZBOztJQURBQyxxQkFBcUI7ZUFBckJBOztJQTBDQUMsdUJBQXVCO2VBQXZCQTs7SUFGQUMsb0JBQW9CO2VBQXBCQTs7SUFEQUMsd0JBQXdCO2VBQXhCQTs7SUFYQUMsbUJBQW1CO2VBQW5CQTs7SUF5Q0FDLGFBQWE7ZUFBYkE7O0lBMWtCQUMsYUFBYTtlQUFiQTs7SUFnaUJBQyxzQkFBc0I7ZUFBdEJBOztJQUdBQyw2QkFBNkI7ZUFBN0JBOztJQXZCQUMsbUJBQW1CO2VBQW5CQTs7SUFEQUMsbUJBQW1CO2VBQW5CQTs7SUFEQUMsYUFBYTtlQUFiQTs7SUFUQUMsaUJBQWlCO2VBQWpCQTs7SUFpRkFDLGlCQUFpQjtlQUFqQkE7O0lBaEZBQyxnQkFBZ0I7ZUFBaEJBOztJQUZBQyxpQkFBaUI7ZUFBakJBOzs7eUJBdnBCVTs0QkFDRTt3QkFXRjt5QkFDTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMEl0QixNQUFNVCxnQkFBZ0JVLElBQUFBLGVB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