6d478ce75db0e7a1c349171b70f8e3f7
/**
 * Ranked Choice Voting Strategy
 * 
 * Implements ranked choice voting (Instant Runoff Voting) where voters rank options
 * in order of preference. Results are calculated using multiple rounds of elimination.
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "RankedStrategy", {
    enumerable: true,
    get: function() {
        return RankedStrategy;
    }
});
const _logger = require("../../utils/logger");
const _objects = require("../../utils/objects");
class RankedStrategy {
    getVotingMethod() {
        return "ranked";
    }
    async validateVote(request, poll) {
        try {
            const { voteData } = request;
            // Check if rankings array is provided
            if (!voteData.rankings || !Array.isArray(voteData.rankings)) {
                return {
                    valid: false,
                    errors: [
                        "Rankings array is required for ranked choice voting"
                    ],
                    requiresAuthentication: true,
                    requiresTokens: false
                };
            }
            // Validate rankings array is not empty
            if (voteData.rankings.length === 0) {
                return {
                    valid: false,
                    errors: [
                        "At least one option must be ranked"
                    ],
                    requiresAuthentication: true,
                    requiresTokens: false
                };
            }
            // Validate all rankings are valid integers
            for (const ranking of voteData.rankings){
                if (typeof ranking !== "number" || !Number.isInteger(ranking)) {
                    return {
                        valid: false,
                        errors: [
                            "All rankings must be valid integers"
                        ],
                        requiresAuthentication: true,
                        requiresTokens: false
                    };
                }
                if (ranking < 0 || ranking >= poll.options.length) {
                    return {
                        valid: false,
                        errors: [
                            "Invalid option selected"
                        ],
                        requiresAuthentication: true,
                        requiresTokens: false
                    };
                }
            }
            // Check for duplicate rankings
            const uniqueRankings = new Set(voteData.rankings);
            if (uniqueRankings.size !== voteData.rankings.length) {
                return {
                    valid: false,
                    errors: [
                        "Duplicate rankings are not allowed"
                    ],
                    requiresAuthentication: true,
                    requiresTokens: false
                };
            }
            // Validate ranking completeness (all options must be ranked)
            if (voteData.rankings.length !== poll.options.length) {
                return {
                    valid: false,
                    errors: [
                        "All options must be ranked"
                    ],
                    requiresAuthentication: true,
                    requiresTokens: false
                };
            }
            (0, _logger.devLog)("Ranked vote validated successfully", {
                pollId: request.pollId,
                rankings: voteData.rankings,
                userId: request.userId
            });
            return {
                valid: true,
                requiresAuthentication: true,
                requiresTokens: false
            };
        } catch (error) {
            (0, _logger.devLog)("Ranked vote validation error:", error);
            return {
                valid: false,
                errors: [
                    error instanceof Error ? error.message : "Validation failed"
                ],
                requiresAuthentication: true,
                requiresTokens: false
            };
        }
    }
    async processVote(request, poll) {
        try {
            const { voteData, userId, pollId, privacyLevel } = request;
            // Generate vote ID
            const voteId = `vote_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            // Create audit receipt
            const auditReceipt = `receipt_${voteId}_${Date.now()}`;
            // In a real implementation, this would:
            // 1. Store the vote in the database
            // 2. Update poll vote counts
            // 3. Trigger any necessary notifications
            // 4. Log the vote for audit purposes
            (0, _logger.devLog)("Ranked vote processed successfully", {
                pollId,
                voteId,
                rankings: voteData.rankings,
                userId,
                auditReceipt
            });
            return (0, _objects.withOptional)({
                success: true,
                message: "Vote submitted successfully",
                pollId,
                voteId,
                auditReceipt,
                responseTime: 0,
                metadata: {
                    votingMethod: "ranked",
                    rankings: voteData.rankings,
                    rankedOptions: voteData.rankings?.map((rank, index)=>({
                            rank: index + 1,
                            option: poll.options[rank]?.text
                        })) || []
                }
            }, {
                privacyLevel
            });
        } catch (error) {
            (0, _logger.devLog)("Ranked vote processing error:", error);
            return (0, _objects.withOptional)({
                success: false,
                message: error instanceof Error ? error.message : "Vote processing failed",
                pollId: request.pollId,
                responseTime: 0,
                metadata: {
                    votingMethod: "ranked",
                    error: error instanceof Error ? error.message : "Unknown error"
                }
            }, {
                voteId: undefined,
                auditReceipt: undefined,
                privacyLevel: request.privacyLevel
            });
        }
    }
    async calculateResults(poll, votes) {
        try {
            const startTime = Date.now();
            // Run instant runoff voting
            const runoffRounds = this.runInstantRunoff(poll, votes);
            // Calculate Borda scores
            const bordaScores = this.calculateBordaScores(poll, votes);
            // Find winner from final round
            const finalRound = runoffRounds[runoffRounds.length - 1];
            let winner;
            let winnerVotes = 0;
            let winnerPercentage = 0;
            if (finalRound && Object.keys(finalRound.votes).length > 0) {
                const entries = Object.entries(finalRound.votes);
                const maxEntry = entries.reduce((max, current)=>current[1] > max[1] ? current : max);
                winner = maxEntry[0];
                winnerVotes = maxEntry[1];
                winnerPercentage = finalRound.percentages[winner] || 0;
            }
            // Calculate option votes and percentages
            const optionVotes = {};
            const optionPercentages = {};
            poll.options.forEach((_, index)=>{
                optionVotes[index.toString()] = 0;
                optionPercentages[index.toString()] = 0;
            });
            // Count first-choice votes
            votes.forEach((vote)=>{
                if (vote.rankings && vote.rankings.length > 0) {
                    const firstRanking = vote.rankings[0];
                    if (firstRanking !== undefined) {
                        const firstChoice = firstRanking.toString();
                        if (optionVotes[firstChoice] !== undefined) {
                            optionVotes[firstChoice]++;
                        }
                    }
                }
            });
            const totalVotes = votes.length;
            if (totalVotes > 0) {
                Object.keys(optionVotes).forEach((optionIndex)=>{
                    const votes = optionVotes[optionIndex];
                    if (votes !== undefined) {
                        optionPercentages[optionIndex] = votes / totalVotes * 100;
                    }
                });
            }
            const results = (0, _objects.withOptional)({
                winnerVotes,
                winnerPercentage,
                bordaScores,
                instantRunoffRounds: runoffRounds,
                optionVotes,
                optionPercentages,
                abstentions: 0,
                abstentionPercentage: 0
            }, {
                winner
            });
            const resultsData = {
                pollId: poll.id,
                votingMethod: "ranked",
                totalVotes,
                participationRate: totalVotes > 0 ? 100 : 0,
                results,
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: Date.now() - startTime,
                    hasWinner: winner !== undefined,
                    totalRounds: runoffRounds.length,
                    isTie: winnerVotes > 0 && Object.values(finalRound?.votes || {}).filter((v)=>v === winnerVotes).length > 1
                }
            };
            (0, _logger.devLog)("Ranked results calculated", {
                pollId: poll.id,
                totalVotes,
                winner,
                winnerVotes,
                winnerPercentage,
                totalRounds: runoffRounds.length,
                calculationTime: Date.now() - startTime
            });
            return resultsData;
        } catch (error) {
            (0, _logger.devLog)("Ranked results calculation error:", error);
            throw new Error(`Failed to calculate ranked results: ${error instanceof Error ? error.message : "Unknown error"}`);
        }
    }
    runInstantRunoff(poll, votes) {
        const rounds = [];
        const remainingOptions = new Set(poll.options.map((_, index)=>index.toString()));
        const currentVotes = [
            ...votes
        ];
        let round = 1;
        while(remainingOptions.size > 1){
            // Count first-choice votes for remaining options
            const roundVotes = {};
            remainingOptions.forEach((option)=>{
                roundVotes[option] = 0;
            });
            currentVotes.forEach((vote)=>{
                if (vote.rankings && vote.rankings.length > 0) {
                    // Find the highest-ranked remaining option
                    for (const ranking of vote.rankings){
                        if (ranking !== undefined) {
                            const optionIndex = ranking.toString();
                            if (remainingOptions.has(optionIndex)) {
                                roundVotes[optionIndex] = (roundVotes[optionIndex] ?? 0) + 1;
                                break;
                            }
                        }
                    }
                }
            });
            // Calculate percentages
            const totalVotes = Object.values(roundVotes).reduce((sum, count)=>sum + count, 0);
            const roundPercentages = {};
            Object.keys(roundVotes).forEach((option)=>{
                const votes = roundVotes[option];
                if (votes !== undefined) {
                    roundPercentages[option] = totalVotes > 0 ? votes / totalVotes * 100 : 0;
                }
            });
            // Check for majority winner
            const majorityThreshold = totalVotes / 2;
            const winner = Object.entries(roundVotes).find(([_, votes])=>votes > majorityThreshold);
            if (winner) {
                // We have a majority winner
                rounds.push({
                    round,
                    votes: roundVotes,
                    percentages: roundPercentages
                });
                break;
            }
            // Find option with fewest votes to eliminate
            const minVotes = Math.min(...Object.values(roundVotes));
            const eliminatedOptions = Object.entries(roundVotes).filter(([_, votes])=>votes === minVotes).map(([option, _])=>option);
            // If there's a tie for elimination, eliminate the first one
            const eliminated = eliminatedOptions[0];
            if (!eliminated) {
                throw new Error("No options to eliminate");
            }
            remainingOptions.delete(eliminated);
            rounds.push((0, _objects.withOptional)({
                round,
                votes: roundVotes,
                percentages: roundPercentages
            }, {
                eliminated
            }));
            round++;
        }
        return rounds;
    }
    calculateBordaScores(poll, votes) {
        const bordaScores = {};
        // Initialize scores
        poll.options.forEach((_, index)=>{
            bordaScores[index.toString()] = 0;
        });
        // Calculate Borda scores
        votes.forEach((vote)=>{
            if (vote.rankings && vote.rankings.length > 0) {
                vote.rankings.forEach((optionIndex, rank)=>{
                    const score = poll.options.length - rank - 1; // Higher rank = higher score
                    const optionKey = optionIndex.toString();
                    if (bordaScores[optionKey] !== undefined) {
                        bordaScores[optionKey] += score;
                    }
                });
            }
        });
        return bordaScores;
    }
    getConfiguration() {
        return {
            name: "Ranked Choice Voting",
            description: "Voters rank options in order of preference. Results use instant runoff voting.",
            minOptions: 3,
            maxOptions: 20,
            allowAbstention: false,
            requiresRanking: true,
            allowsMultipleSelections: false,
            resultType: "instant_runoff",
            features: [
                "Eliminates vote splitting",
                "Reflects true preferences",
                "Majority winner guaranteed",
                "No wasted votes"
            ],
            limitations: [
                "More complex to understand",
                "Requires complete ranking",
                "Can be time-consuming to count",
                "May not satisfy Condorcet criterion"
            ]
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvdm90ZS9zdHJhdGVnaWVzL3JhbmtlZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFJhbmtlZCBDaG9pY2UgVm90aW5nIFN0cmF0ZWd5XG4gKiBcbiAqIEltcGxlbWVudHMgcmFua2VkIGNob2ljZSB2b3RpbmcgKEluc3RhbnQgUnVub2ZmIFZvdGluZykgd2hlcmUgdm90ZXJzIHJhbmsgb3B0aW9uc1xuICogaW4gb3JkZXIgb2YgcHJlZmVyZW5jZS4gUmVzdWx0cyBhcmUgY2FsY3VsYXRlZCB1c2luZyBtdWx0aXBsZSByb3VuZHMgb2YgZWxpbWluYXRpb24uXG4gKiBcbiAqIENyZWF0ZWQ6IFNlcHRlbWJlciAxNSwgMjAyNVxuICogVXBkYXRlZDogU2VwdGVtYmVyIDE1LCAyMDI1XG4gKi9cblxuaW1wb3J0IHsgZGV2TG9nIH0gZnJvbSAnQC9saWIvdXRpbHMvbG9nZ2VyJztcbmltcG9ydCB7IHdpdGhPcHRpb25hbCB9IGZyb20gJ0AvbGliL3V0aWxzL29iamVjdHMnO1xuXG5pbXBvcnQgdHlwZSB7IFxuICBWb3RpbmdTdHJhdGVneSwgXG4gIFZvdGVSZXF1ZXN0LCBcbiAgVm90ZVJlc3BvbnNlLCBcbiAgVm90ZVZhbGlkYXRpb24sIFxuICBQb2xsRGF0YSwgXG4gIFZvdGVEYXRhLCBcbiAgUmVzdWx0c0RhdGEsXG4gIFZvdGluZ01ldGhvZCxcbiAgUG9sbFJlc3VsdHMsXG4gIEluc3RhbnRSdW5vZmZSb3VuZFxufSBmcm9tICcuLi90eXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBSYW5rZWRTdHJhdGVneSBpbXBsZW1lbnRzIFZvdGluZ1N0cmF0ZWd5IHtcbiAgXG4gIGdldFZvdGluZ01ldGhvZCgpOiBWb3RpbmdNZXRob2Qge1xuICAgIHJldHVybiAncmFua2VkJztcbiAgfVxuXG4gIGFzeW5jIHZhbGlkYXRlVm90ZShyZXF1ZXN0OiBWb3RlUmVxdWVzdCwgcG9sbDogUG9sbERhdGEpOiBQcm9taXNlPFZvdGVWYWxpZGF0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgdm90ZURhdGEgfSA9IHJlcXVlc3Q7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHJhbmtpbmdzIGFycmF5IGlzIHByb3ZpZGVkXG4gICAgICBpZiAoIXZvdGVEYXRhLnJhbmtpbmdzIHx8ICFBcnJheS5pc0FycmF5KHZvdGVEYXRhLnJhbmtpbmdzKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcnM6IFsnUmFua2luZ3MgYXJyYXkgaXMgcmVxdWlyZWQgZm9yIHJhbmtlZCBjaG9pY2Ugdm90aW5nJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgcmFua2luZ3MgYXJyYXkgaXMgbm90IGVtcHR5XG4gICAgICBpZiAodm90ZURhdGEucmFua2luZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgIGVycm9yczogWydBdCBsZWFzdCBvbmUgb3B0aW9uIG11c3QgYmUgcmFua2VkJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFsaWRhdGUgYWxsIHJhbmtpbmdzIGFyZSB2YWxpZCBpbnRlZ2Vyc1xuICAgICAgZm9yIChjb25zdCByYW5raW5nIG9mIHZvdGVEYXRhLnJhbmtpbmdzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmFua2luZyAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIocmFua2luZykpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JzOiBbJ0FsbCByYW5raW5ncyBtdXN0IGJlIHZhbGlkIGludGVnZXJzJ10sXG4gICAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyYW5raW5nIDwgMCB8fCByYW5raW5nID49IHBvbGwub3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3JzOiBbJ0ludmFsaWQgb3B0aW9uIHNlbGVjdGVkJ10sXG4gICAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBmb3IgZHVwbGljYXRlIHJhbmtpbmdzXG4gICAgICBjb25zdCB1bmlxdWVSYW5raW5ncyA9IG5ldyBTZXQodm90ZURhdGEucmFua2luZ3MpO1xuICAgICAgaWYgKHVuaXF1ZVJhbmtpbmdzLnNpemUgIT09IHZvdGVEYXRhLnJhbmtpbmdzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcnM6IFsnRHVwbGljYXRlIHJhbmtpbmdzIGFyZSBub3QgYWxsb3dlZCddLFxuICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IHRydWUsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIHJhbmtpbmcgY29tcGxldGVuZXNzIChhbGwgb3B0aW9ucyBtdXN0IGJlIHJhbmtlZClcbiAgICAgIGlmICh2b3RlRGF0YS5yYW5raW5ncy5sZW5ndGggIT09IHBvbGwub3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgZXJyb3JzOiBbJ0FsbCBvcHRpb25zIG11c3QgYmUgcmFua2VkJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZGV2TG9nKCdSYW5rZWQgdm90ZSB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkLFxuICAgICAgICByYW5raW5nczogdm90ZURhdGEucmFua2luZ3MsXG4gICAgICAgIHVzZXJJZDogcmVxdWVzdC51c2VySWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRldkxvZygnUmFua2VkIHZvdGUgdmFsaWRhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yczogW2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1ZhbGlkYXRpb24gZmFpbGVkJ10sXG4gICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IHRydWUsXG4gICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcm9jZXNzVm90ZShyZXF1ZXN0OiBWb3RlUmVxdWVzdCwgcG9sbDogUG9sbERhdGEpOiBQcm9taXNlPFZvdGVSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHZvdGVEYXRhLCB1c2VySWQsIHBvbGxJZCwgcHJpdmFjeUxldmVsIH0gPSByZXF1ZXN0O1xuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSB2b3RlIElEXG4gICAgICBjb25zdCB2b3RlSWQgPSBgdm90ZV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhdWRpdCByZWNlaXB0XG4gICAgICBjb25zdCBhdWRpdFJlY2VpcHQgPSBgcmVjZWlwdF8ke3ZvdGVJZH1fJHtEYXRlLm5vdygpfWA7XG5cbiAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZDpcbiAgICAgIC8vIDEuIFN0b3JlIHRoZSB2b3RlIGluIHRoZSBkYXRhYmFzZVxuICAgICAgLy8gMi4gVXBkYXRlIHBvbGwgdm90ZSBjb3VudHNcbiAgICAgIC8vIDMuIFRyaWdnZXIgYW55IG5lY2Vzc2FyeSBub3RpZmljYXRpb25zXG4gICAgICAvLyA0LiBMb2cgdGhlIHZvdGUgZm9yIGF1ZGl0IHB1cnBvc2VzXG5cbiAgICAgIGRldkxvZygnUmFua2VkIHZvdGUgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgcG9sbElkLFxuICAgICAgICB2b3RlSWQsXG4gICAgICAgIHJhbmtpbmdzOiB2b3RlRGF0YS5yYW5raW5ncyxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBhdWRpdFJlY2VpcHRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gd2l0aE9wdGlvbmFsKFxuICAgICAgICB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnVm90ZSBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICBwb2xsSWQsXG4gICAgICAgICAgdm90ZUlkLFxuICAgICAgICAgIGF1ZGl0UmVjZWlwdCxcbiAgICAgICAgICByZXNwb25zZVRpbWU6IDAsIC8vIFdpbGwgYmUgc2V0IGJ5IHRoZSBlbmdpbmVcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgdm90aW5nTWV0aG9kOiAncmFua2VkJyxcbiAgICAgICAgICAgIHJhbmtpbmdzOiB2b3RlRGF0YS5yYW5raW5ncyxcbiAgICAgICAgICAgIHJhbmtlZE9wdGlvbnM6IHZvdGVEYXRhLnJhbmtpbmdzPy5tYXAoKHJhbmssIGluZGV4KSA9PiAoe1xuICAgICAgICAgICAgICByYW5rOiBpbmRleCArIDEsXG4gICAgICAgICAgICAgIG9wdGlvbjogcG9sbC5vcHRpb25zW3JhbmtdPy50ZXh0XG4gICAgICAgICAgICB9KSkgfHwgW11cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcml2YWN5TGV2ZWxcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ1JhbmtlZCB2b3RlIHByb2Nlc3NpbmcgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHdpdGhPcHRpb25hbChcbiAgICAgICAge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1ZvdGUgcHJvY2Vzc2luZyBmYWlsZWQnLFxuICAgICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWQsXG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiAwLFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICB2b3RpbmdNZXRob2Q6ICdyYW5rZWQnLFxuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdm90ZUlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgYXVkaXRSZWNlaXB0OiB1bmRlZmluZWQsXG4gICAgICAgICAgcHJpdmFjeUxldmVsOiByZXF1ZXN0LnByaXZhY3lMZXZlbFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNhbGN1bGF0ZVJlc3VsdHMocG9sbDogUG9sbERhdGEsIHZvdGVzOiBWb3RlRGF0YVtdKTogUHJvbWlzZTxSZXN1bHRzRGF0YT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICAvLyBSdW4gaW5zdGFudCBydW5vZmYgdm90aW5nXG4gICAgICBjb25zdCBydW5vZmZSb3VuZHMgPSB0aGlzLnJ1bkluc3RhbnRSdW5vZmYocG9sbCwgdm90ZXMpO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhdGUgQm9yZGEgc2NvcmVzXG4gICAgICBjb25zdCBib3JkYVNjb3JlcyA9IHRoaXMuY2FsY3VsYXRlQm9yZGFTY29yZXMocG9sbCwgdm90ZXMpO1xuICAgICAgXG4gICAgICAvLyBGaW5kIHdpbm5lciBmcm9tIGZpbmFsIHJvdW5kXG4gICAgICBjb25zdCBmaW5hbFJvdW5kID0gcnVub2ZmUm91bmRzW3J1bm9mZlJvdW5kcy5sZW5ndGggLSAxXTtcbiAgICAgIGxldCB3aW5uZXI6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgIGxldCB3aW5uZXJWb3RlcyA9IDA7XG4gICAgICBsZXQgd2lubmVyUGVyY2VudGFnZSA9IDA7XG5cbiAgICAgIGlmIChmaW5hbFJvdW5kICYmIE9iamVjdC5rZXlzKGZpbmFsUm91bmQudm90ZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGZpbmFsUm91bmQudm90ZXMpO1xuICAgICAgICBjb25zdCBtYXhFbnRyeSA9IGVudHJpZXMucmVkdWNlKChtYXgsIGN1cnJlbnQpID0+IFxuICAgICAgICAgIGN1cnJlbnRbMV0gPiBtYXhbMV0gPyBjdXJyZW50IDogbWF4XG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICB3aW5uZXIgPSBtYXhFbnRyeVswXTtcbiAgICAgICAgd2lubmVyVm90ZXMgPSBtYXhFbnRyeVsxXTtcbiAgICAgICAgd2lubmVyUGVyY2VudGFnZSA9IGZpbmFsUm91bmQucGVyY2VudGFnZXNbd2lubmVyXSB8fCAwO1xuICAgICAgfVxuXG4gICAgICAvLyBDYWxjdWxhdGUgb3B0aW9uIHZvdGVzIGFuZCBwZXJjZW50YWdlc1xuICAgICAgY29uc3Qgb3B0aW9uVm90ZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICAgIGNvbnN0IG9wdGlvblBlcmNlbnRhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgICBcbiAgICAgIHBvbGwub3B0aW9ucy5mb3JFYWNoKChfLCBpbmRleCkgPT4ge1xuICAgICAgICBvcHRpb25Wb3Rlc1tpbmRleC50b1N0cmluZygpXSA9IDA7XG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW2luZGV4LnRvU3RyaW5nKCldID0gMDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb3VudCBmaXJzdC1jaG9pY2Ugdm90ZXNcbiAgICAgIHZvdGVzLmZvckVhY2godm90ZSA9PiB7XG4gICAgICAgIGlmICh2b3RlLnJhbmtpbmdzICYmIHZvdGUucmFua2luZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGZpcnN0UmFua2luZyA9IHZvdGUucmFua2luZ3NbMF07XG4gICAgICAgICAgaWYgKGZpcnN0UmFua2luZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdENob2ljZSA9IGZpcnN0UmFua2luZy50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKG9wdGlvblZvdGVzW2ZpcnN0Q2hvaWNlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIG9wdGlvblZvdGVzW2ZpcnN0Q2hvaWNlXSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsVm90ZXMgPSB2b3Rlcy5sZW5ndGg7XG4gICAgICBpZiAodG90YWxWb3RlcyA+IDApIHtcbiAgICAgICAgT2JqZWN0LmtleXMob3B0aW9uVm90ZXMpLmZvckVhY2gob3B0aW9uSW5kZXggPT4ge1xuICAgICAgICAgIGNvbnN0IHZvdGVzID0gb3B0aW9uVm90ZXNbb3B0aW9uSW5kZXhdO1xuICAgICAgICAgIGlmICh2b3RlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25QZXJjZW50YWdlc1tvcHRpb25JbmRleF0gPSAodm90ZXMgLyB0b3RhbFZvdGVzKSAqIDEwMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHRzOiBQb2xsUmVzdWx0cyA9IHdpdGhPcHRpb25hbChcbiAgICAgICAge1xuICAgICAgICAgIHdpbm5lclZvdGVzLFxuICAgICAgICAgIHdpbm5lclBlcmNlbnRhZ2UsXG4gICAgICAgICAgYm9yZGFTY29yZXMsXG4gICAgICAgICAgaW5zdGFudFJ1bm9mZlJvdW5kczogcnVub2ZmUm91bmRzLFxuICAgICAgICAgIG9wdGlvblZvdGVzLFxuICAgICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzLFxuICAgICAgICAgIGFic3RlbnRpb25zOiAwLFxuICAgICAgICAgIGFic3RlbnRpb25QZXJjZW50YWdlOiAwXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB3aW5uZXJcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzdWx0c0RhdGE6IFJlc3VsdHNEYXRhID0ge1xuICAgICAgICBwb2xsSWQ6IHBvbGwuaWQsXG4gICAgICAgIHZvdGluZ01ldGhvZDogJ3JhbmtlZCcsXG4gICAgICAgIHRvdGFsVm90ZXMsXG4gICAgICAgIHBhcnRpY2lwYXRpb25SYXRlOiB0b3RhbFZvdGVzID4gMCA/IDEwMCA6IDAsIC8vIFRoaXMgd291bGQgYmUgY2FsY3VsYXRlZCBiYXNlZCBvbiBlbGlnaWJsZSB2b3RlcnNcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgY2FsY3VsYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgY2FsY3VsYXRpb25UaW1lOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxuICAgICAgICAgIGhhc1dpbm5lcjogd2lubmVyICE9PSB1bmRlZmluZWQsXG4gICAgICAgICAgdG90YWxSb3VuZHM6IHJ1bm9mZlJvdW5kcy5sZW5ndGgsXG4gICAgICAgICAgaXNUaWU6IHdpbm5lclZvdGVzID4gMCAmJiBPYmplY3QudmFsdWVzKGZpbmFsUm91bmQ/LnZvdGVzIHx8IHt9KS5maWx0ZXIodiA9PiB2ID09PSB3aW5uZXJWb3RlcykubGVuZ3RoID4gMVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBkZXZMb2coJ1JhbmtlZCByZXN1bHRzIGNhbGN1bGF0ZWQnLCB7XG4gICAgICAgIHBvbGxJZDogcG9sbC5pZCxcbiAgICAgICAgdG90YWxWb3RlcyxcbiAgICAgICAgd2lubmVyLFxuICAgICAgICB3aW5uZXJWb3RlcyxcbiAgICAgICAgd2lubmVyUGVyY2VudGFnZSxcbiAgICAgICAgdG90YWxSb3VuZHM6IHJ1bm9mZlJvdW5kcy5sZW5ndGgsXG4gICAgICAgIGNhbGN1bGF0aW9uVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXN1bHRzRGF0YTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBkZXZMb2coJ1JhbmtlZCByZXN1bHRzIGNhbGN1bGF0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNhbGN1bGF0ZSByYW5rZWQgcmVzdWx0czogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHJ1bkluc3RhbnRSdW5vZmYocG9sbDogUG9sbERhdGEsIHZvdGVzOiBWb3RlRGF0YVtdKTogSW5zdGFudFJ1bm9mZlJvdW5kW10ge1xuICAgIGNvbnN0IHJvdW5kczogSW5zdGFudFJ1bm9mZlJvdW5kW10gPSBbXTtcbiAgICBjb25zdCByZW1haW5pbmdPcHRpb25zID0gbmV3IFNldChwb2xsLm9wdGlvbnMubWFwKChfLCBpbmRleCkgPT4gaW5kZXgudG9TdHJpbmcoKSkpO1xuICAgIGNvbnN0IGN1cnJlbnRWb3RlcyA9IFsuLi52b3Rlc107XG5cbiAgICBsZXQgcm91bmQgPSAxO1xuICAgIHdoaWxlIChyZW1haW5pbmdPcHRpb25zLnNpemUgPiAxKSB7XG4gICAgICAvLyBDb3VudCBmaXJzdC1jaG9pY2Ugdm90ZXMgZm9yIHJlbWFpbmluZyBvcHRpb25zXG4gICAgICBjb25zdCByb3VuZFZvdGVzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgICByZW1haW5pbmdPcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgcm91bmRWb3Rlc1tvcHRpb25dID0gMDtcbiAgICAgIH0pO1xuXG4gICAgICBjdXJyZW50Vm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcbiAgICAgICAgaWYgKHZvdGUucmFua2luZ3MgJiYgdm90ZS5yYW5raW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gRmluZCB0aGUgaGlnaGVzdC1yYW5rZWQgcmVtYWluaW5nIG9wdGlvblxuICAgICAgICAgIGZvciAoY29uc3QgcmFua2luZyBvZiB2b3RlLnJhbmtpbmdzKSB7XG4gICAgICAgICAgICBpZiAocmFua2luZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcmFua2luZy50b1N0cmluZygpO1xuICAgICAgICAgICAgICBpZiAocmVtYWluaW5nT3B0aW9ucy5oYXMob3B0aW9uSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgcm91bmRWb3Rlc1tvcHRpb25JbmRleF0gPSAocm91bmRWb3Rlc1tvcHRpb25JbmRleF0gPz8gMCkgKyAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHBlcmNlbnRhZ2VzXG4gICAgICBjb25zdCB0b3RhbFZvdGVzID0gT2JqZWN0LnZhbHVlcyhyb3VuZFZvdGVzKS5yZWR1Y2UoKHN1bSwgY291bnQpID0+IHN1bSArIGNvdW50LCAwKTtcbiAgICAgIGNvbnN0IHJvdW5kUGVyY2VudGFnZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICAgIE9iamVjdC5rZXlzKHJvdW5kVm90ZXMpLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgY29uc3Qgdm90ZXMgPSByb3VuZFZvdGVzW29wdGlvbl07XG4gICAgICAgIGlmICh2b3RlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcm91bmRQZXJjZW50YWdlc1tvcHRpb25dID0gdG90YWxWb3RlcyA+IDAgPyAodm90ZXMgLyB0b3RhbFZvdGVzKSAqIDEwMCA6IDA7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayBmb3IgbWFqb3JpdHkgd2lubmVyXG4gICAgICBjb25zdCBtYWpvcml0eVRocmVzaG9sZCA9IHRvdGFsVm90ZXMgLyAyO1xuICAgICAgY29uc3Qgd2lubmVyID0gT2JqZWN0LmVudHJpZXMocm91bmRWb3RlcykuZmluZCgoW18sIHZvdGVzXSkgPT4gdm90ZXMgPiBtYWpvcml0eVRocmVzaG9sZCk7XG4gICAgICBcbiAgICAgIGlmICh3aW5uZXIpIHtcbiAgICAgICAgLy8gV2UgaGF2ZSBhIG1ham9yaXR5IHdpbm5lclxuICAgICAgICByb3VuZHMucHVzaCh7XG4gICAgICAgICAgcm91bmQsXG4gICAgICAgICAgdm90ZXM6IHJvdW5kVm90ZXMsXG4gICAgICAgICAgcGVyY2VudGFnZXM6IHJvdW5kUGVyY2VudGFnZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBGaW5kIG9wdGlvbiB3aXRoIGZld2VzdCB2b3RlcyB0byBlbGltaW5hdGVcbiAgICAgIGNvbnN0IG1pblZvdGVzID0gTWF0aC5taW4oLi4uT2JqZWN0LnZhbHVlcyhyb3VuZFZvdGVzKSk7XG4gICAgICBjb25zdCBlbGltaW5hdGVkT3B0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHJvdW5kVm90ZXMpXG4gICAgICAgIC5maWx0ZXIoKFtfLCB2b3Rlc10pID0+IHZvdGVzID09PSBtaW5Wb3RlcylcbiAgICAgICAgLm1hcCgoW29wdGlvbiwgX10pID0+IG9wdGlvbik7XG5cbiAgICAgIC8vIElmIHRoZXJlJ3MgYSB0aWUgZm9yIGVsaW1pbmF0aW9uLCBlbGltaW5hdGUgdGhlIGZpcnN0IG9uZVxuICAgICAgY29uc3QgZWxpbWluYXRlZCA9IGVsaW1pbmF0ZWRPcHRpb25zWzBdO1xuICAgICAgaWYgKCFlbGltaW5hdGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gb3B0aW9ucyB0byBlbGltaW5hdGUnKTtcbiAgICAgIH1cbiAgICAgIHJlbWFpbmluZ09wdGlvbnMuZGVsZXRlKGVsaW1pbmF0ZWQpO1xuXG4gICAgICByb3VuZHMucHVzaCh3aXRoT3B0aW9uYWwoXG4gICAgICAgIHtcbiAgICAgICAgICByb3VuZCxcbiAgICAgICAgICB2b3Rlczogcm91bmRWb3RlcyxcbiAgICAgICAgICBwZXJjZW50YWdlczogcm91bmRQZXJjZW50YWdlc1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZWxpbWluYXRlZFxuICAgICAgICB9XG4gICAgICApKTtcblxuICAgICAgcm91bmQrKztcbiAgICB9XG5cbiAgICByZXR1cm4gcm91bmRzO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVCb3JkYVNjb3Jlcyhwb2xsOiBQb2xsRGF0YSwgdm90ZXM6IFZvdGVEYXRhW10pOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+IHtcbiAgICBjb25zdCBib3JkYVNjb3JlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgc2NvcmVzXG4gICAgcG9sbC5vcHRpb25zLmZvckVhY2goKF8sIGluZGV4KSA9PiB7XG4gICAgICBib3JkYVNjb3Jlc1tpbmRleC50b1N0cmluZygpXSA9IDA7XG4gICAgfSk7XG5cbiAgICAvLyBDYWxjdWxhdGUgQm9yZGEgc2NvcmVzXG4gICAgdm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcbiAgICAgIGlmICh2b3RlLnJhbmtpbmdzICYmIHZvdGUucmFua2luZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICB2b3RlLnJhbmtpbmdzLmZvckVhY2goKG9wdGlvbkluZGV4LCByYW5rKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc2NvcmUgPSBwb2xsLm9wdGlvbnMubGVuZ3RoIC0gcmFuayAtIDE7IC8vIEhpZ2hlciByYW5rID0gaGlnaGVyIHNjb3JlXG4gICAgICAgICAgY29uc3Qgb3B0aW9uS2V5ID0gb3B0aW9uSW5kZXgudG9TdHJpbmcoKTtcbiAgICAgICAgICBpZiAoYm9yZGFTY29yZXNbb3B0aW9uS2V5XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBib3JkYVNjb3Jlc1tvcHRpb25LZXldICs9IHNjb3JlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYm9yZGFTY29yZXM7XG4gIH1cblxuICBnZXRDb25maWd1cmF0aW9uKCk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogJ1JhbmtlZCBDaG9pY2UgVm90aW5nJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVm90ZXJzIHJhbmsgb3B0aW9ucyBpbiBvcmRlciBvZiBwcmVmZXJlbmNlLiBSZXN1bHRzIHVzZSBpbnN0YW50IHJ1bm9mZiB2b3RpbmcuJyxcbiAgICAgIG1pbk9wdGlvbnM6IDMsXG4gICAgICBtYXhPcHRpb25zOiAyMCxcbiAgICAgIGFsbG93QWJzdGVudGlvbjogZmFsc2UsXG4gICAgICByZXF1aXJlc1Jhbmtpbmc6IHRydWUsXG4gICAgICBhbGxvd3NNdWx0aXBsZVNlbGVjdGlvbnM6IGZhbHNlLFxuICAgICAgcmVzdWx0VHlwZTogJ2luc3RhbnRfcnVub2ZmJyxcbiAgICAgIGZlYXR1cmVzOiBbXG4gICAgICAgICdFbGltaW5hdGVzIHZvdGUgc3BsaXR0aW5nJyxcbiAgICAgICAgJ1JlZmxlY3RzIHRydWUgcHJlZmVyZW5jZXMnLFxuICAgICAgICAnTWFqb3JpdHkgd2lubmVyIGd1YXJhbnRlZWQnLFxuICAgICAgICAnTm8gd2FzdGVkIHZvdGVzJ1xuICAgICAgXSxcbiAgICAgIGxpbWl0YXRpb25zOiBbXG4gICAgICAgICdNb3JlIGNvbXBsZXggdG8gdW5kZXJzdGFuZCcsXG4gICAgICAgICdSZXF1aXJlcyBjb21wbGV0ZSByYW5raW5nJyxcbiAgICAgICAgJ0NhbiBiZSB0aW1lLWNvbnN1bWluZyB0byBjb3VudCcsXG4gICAgICAgICdNYXkgbm90IHNhdGlzZnkgQ29uZG9yY2V0IGNyaXRlcmlvbidcbiAgICAgIF1cbiAgICB9O1xuICB9XG59Il0sIm5hbWVzIjpbIlJhbmtlZFN0cmF0ZWd5IiwiZ2V0Vm90aW5nTWV0aG9kIiwidmFsaWRhdGVWb3RlIiwicmVxdWVzdCIsInBvbGwiLCJ2b3RlRGF0YSIsInJhbmtpbmdzIiwiQXJyYXkiLCJpc0FycmF5IiwidmFsaWQiLCJlcnJvcnMiLCJyZXF1aXJlc0F1dGhlbnRpY2F0aW9uIiwicmVxdWlyZXNUb2tlbnMiLCJsZW5ndGgiLCJyYW5raW5nIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwib3B0aW9ucyIsInVuaXF1ZVJhbmtpbmdzIiwiU2V0Iiwic2l6ZSIsImRldkxvZyIsInBvbGxJZCIsInVzZXJJZCIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwicHJvY2Vzc1ZvdGUiLCJwcml2YWN5TGV2ZWwiLCJ2b3RlSWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiYXVkaXRSZWNlaXB0Iiwid2l0aE9wdGlvbmFsIiwic3VjY2VzcyIsInJlc3BvbnNlVGltZSIsIm1ldGFkYXRhIiwidm90aW5nTWV0aG9kIiwicmFua2VkT3B0aW9ucyIsIm1hcCIsInJhbmsiLCJpbmRleCIsIm9wdGlvbiIsInRleHQiLCJ1bmRlZmluZWQiLCJjYWxjdWxhdGVSZXN1bHRzIiwidm90ZXMiLCJzdGFydFRpbWUiLCJydW5vZmZSb3VuZHMiLCJydW5JbnN0YW50UnVub2ZmIiwiYm9yZGFTY29yZXMiLCJjYWxjdWxhdGVCb3JkYVNjb3JlcyIsImZpbmFsUm91bmQiLCJ3aW5uZXIiLCJ3aW5uZXJWb3RlcyIsIndpbm5lclBlcmNlbnRhZ2UiLCJPYmplY3QiLCJrZXlzIiwiZW50cmllcyIsIm1heEVudHJ5IiwicmVkdWNlIiwibWF4IiwiY3VycmVudCIsInBlcmNlbnRhZ2VzIiwib3B0aW9uVm90ZXMiLCJvcHRpb25QZXJjZW50YWdlcyIsImZvckVhY2giLCJfIiwidm90ZSIsImZpcnN0UmFua2luZyIsImZpcnN0Q2hvaWNlIiwidG90YWxWb3RlcyIsIm9wdGlvbkluZGV4IiwicmVzdWx0cyIsImluc3RhbnRSdW5vZmZSb3VuZHMiLCJhYnN0ZW50aW9ucyIsImFic3RlbnRpb25QZXJjZW50YWdlIiwicmVzdWx0c0RhdGEiLCJpZCIsInBhcnRpY2lwYXRpb25SYXRlIiwiY2FsY3VsYXRlZEF0IiwidG9JU09TdHJpbmciLCJjYWxjdWxhdGlvblRpbWUiLCJoYXNXaW5uZXIiLCJ0b3RhbFJvdW5kcyIsImlzVGllIiwidmFsdWVzIiwiZmlsdGVyIiwidiIsInJvdW5kcyIsInJlbWFpbmluZ09wdGlvbnMiLCJjdXJyZW50Vm90ZXMiLCJyb3VuZCIsInJvdW5kVm90ZXMiLCJoYXMiLCJzdW0iLCJjb3VudCIsInJvdW5kUGVyY2VudGFnZXMiLCJtYWpvcml0eVRocmVzaG9sZCIsImZpbmQiLCJwdXNoIiwibWluVm90ZXMiLCJtaW4iLCJlbGltaW5hdGVkT3B0aW9ucyIsImVsaW1pbmF0ZWQiLCJkZWxldGUiLCJzY29yZSIsIm9wdGlvbktleSIsImdldENvbmZpZ3VyYXRpb24iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJtaW5PcHRpb25zIiwibWF4T3B0aW9ucyIsImFsbG93QWJzdGVudGlvbiIsInJlcXVpcmVzUmFua2luZyIsImFsbG93c011bHRpcGxlU2VsZWN0aW9ucyIsInJlc3VsdFR5cGUiLCJmZWF0dXJlcyIsImxpbWl0YXRpb25zIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQzs7OzsrQkFrQllBOzs7ZUFBQUE7Ozt3QkFoQlU7eUJBQ007QUFldEIsTUFBTUE7SUFFWEMsa0JBQWdDO1FBQzlCLE9BQU87SUFDVDtJQUVBLE1BQU1DLGFBQWFDLE9BQW9CLEVBQUVDLElBQWMsRUFBMkI7UUFDaEYsSUFBSTtZQUNGLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdGO1lBRXJCLHNDQUFzQztZQUN0QyxJQUFJLENBQUNFLFNBQVNDLFFBQVEsSUFBSSxDQUFDQyxNQUFNQyxPQUFPLENBQUNILFNBQVNDLFFBQVEsR0FBRztnQkFDM0QsT0FBTztvQkFDTEcsT0FBTztvQkFDUEMsUUFBUTt3QkFBQztxQkFBc0Q7b0JBQy9EQyx3QkFBd0I7b0JBQ3hCQyxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSx1Q0FBdUM7WUFDdkMsSUFBSVAsU0FBU0MsUUFBUSxDQUFDTyxNQUFNLEtBQUssR0FBRztnQkFDbEMsT0FBTztvQkFDTEosT0FBTztvQkFDUEMsUUFBUTt3QkFBQztxQkFBcUM7b0JBQzlDQyx3QkFBd0I7b0JBQ3hCQyxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSwyQ0FBMkM7WUFDM0MsS0FBSyxNQUFNRSxXQUFXVCxTQUFTQyxRQUFRLENBQUU7Z0JBQ3ZDLElBQUksT0FBT1EsWUFBWSxZQUFZLENBQUNDLE9BQU9DLFNBQVMsQ0FBQ0YsVUFBVTtvQkFDN0QsT0FBTzt3QkFDTEwsT0FBTzt3QkFDUEMsUUFBUTs0QkFBQzt5QkFBc0M7d0JBQy9DQyx3QkFBd0I7d0JBQ3hCQyxnQkFBZ0I7b0JBQ2xCO2dCQUNGO2dCQUVBLElBQUlFLFVBQVUsS0FBS0EsV0FBV1YsS0FBS2EsT0FBTyxDQUFDSixNQUFNLEVBQUU7b0JBQ2pELE9BQU87d0JBQ0xKLE9BQU87d0JBQ1BDLFFBQVE7NEJBQUM7eUJBQTBCO3dCQUNuQ0Msd0JBQXdCO3dCQUN4QkMsZ0JBQWdCO29CQUNsQjtnQkFDRjtZQUNGO1lBRUEsK0JBQStCO1lBQy9CLE1BQU1NLGlCQUFpQixJQUFJQyxJQUFJZCxTQUFTQyxRQUFRO1lBQ2hELElBQUlZLGVBQWVFLElBQUksS0FBS2YsU0FBU0MsUUFBUSxDQUFDTyxNQUFNLEVBQUU7Z0JBQ3BELE9BQU87b0JBQ0xKLE9BQU87b0JBQ1BDLFFBQVE7d0JBQUM7cUJBQXFDO29CQUM5Q0Msd0JBQXdCO29CQUN4QkMsZ0JBQWdCO2dCQUNsQjtZQUNGO1lBRUEsNkRBQTZEO1lBQzdELElBQUlQLFNBQVNDLFFBQVEsQ0FBQ08sTUFBTSxLQUFLVCxLQUFLYSxPQUFPLENBQUNKLE1BQU0sRUFBRTtnQkFDcEQsT0FBTztvQkFDTEosT0FBTztvQkFDUEMsUUFBUTt3QkFBQztxQkFBNkI7b0JBQ3RDQyx3QkFBd0I7b0JBQ3hCQyxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQVMsSUFBQUEsY0FBTSxFQUFDLHNDQUFzQztnQkFDM0NDLFFBQVFuQixRQUFRbUIsTUFBTTtnQkFDdEJoQixVQUFVRCxTQUFTQyxRQUFRO2dCQUMzQmlCLFFBQVFwQixRQUFRb0IsTUFBTTtZQUN4QjtZQUVBLE9BQU87Z0JBQ0xkLE9BQU87Z0JBQ1BFLHdCQUF3QjtnQkFDeEJDLGdCQUFnQjtZQUNsQjtRQUVGLEVBQUUsT0FBT1ksT0FBTztZQUNkSCxJQUFBQSxjQUFNLEVBQUMsaUNBQWlDRztZQUN4QyxPQUFPO2dCQUNMZixPQUFPO2dCQUNQQyxRQUFRO29CQUFDYyxpQkFBaUJDLFFBQVFELE1BQU1FLE9BQU8sR0FBRztpQkFBb0I7Z0JBQ3RFZix3QkFBd0I7Z0JBQ3hCQyxnQkFBZ0I7WUFDbEI7UUFDRjtJQUNGO0lBRUEsTUFBTWUsWUFBWXhCLE9BQW9CLEVBQUVDLElBQWMsRUFBeUI7UUFDN0UsSUFBSTtZQUNGLE1BQU0sRUFBRUMsUUFBUSxFQUFFa0IsTUFBTSxFQUFFRCxNQUFNLEVBQUVNLFlBQVksRUFBRSxHQUFHekI7WUFFbkQsbUJBQW1CO1lBQ25CLE1BQU0wQixTQUFTLENBQUMsS0FBSyxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQyxFQUFFQyxLQUFLQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQyxJQUFJQyxNQUFNLENBQUMsR0FBRyxHQUFHLENBQUM7WUFFOUUsdUJBQXVCO1lBQ3ZCLE1BQU1DLGVBQWUsQ0FBQyxRQUFRLEVBQUVQLE9BQU8sQ0FBQyxFQUFFQyxLQUFLQyxHQUFHLEdBQUcsQ0FBQztZQUV0RCx3Q0FBd0M7WUFDeEMsb0NBQW9DO1lBQ3BDLDZCQUE2QjtZQUM3Qix5Q0FBeUM7WUFDekMscUNBQXFDO1lBRXJDVixJQUFBQSxjQUFNLEVBQUMsc0NBQXNDO2dCQUMzQ0M7Z0JBQ0FPO2dCQUNBdkIsVUFBVUQsU0FBU0MsUUFBUTtnQkFDM0JpQjtnQkFDQWE7WUFDRjtZQUVBLE9BQU9DLElBQUFBLHFCQUFZLEVBQ2pCO2dCQUNFQyxTQUFTO2dCQUNUWixTQUFTO2dCQUNUSjtnQkFDQU87Z0JBQ0FPO2dCQUNBRyxjQUFjO2dCQUNkQyxVQUFVO29CQUNSQyxjQUFjO29CQUNkbkMsVUFBVUQsU0FBU0MsUUFBUTtvQkFDM0JvQyxlQUFlckMsU0FBU0MsUUFBUSxFQUFFcUMsSUFBSSxDQUFDQyxNQUFNQyxRQUFXLENBQUE7NEJBQ3RERCxNQUFNQyxRQUFROzRCQUNkQyxRQUFRMUMsS0FBS2EsT0FBTyxDQUFDMkIsS0FBSyxFQUFFRzt3QkFDOUIsQ0FBQSxNQUFPLEVBQUU7Z0JBQ1g7WUFDRixHQUNBO2dCQUNFbkI7WUFDRjtRQUdKLEVBQUUsT0FBT0osT0FBTztZQUNkSCxJQUFBQSxjQUFNLEVBQUMsaUNBQWlDRztZQUN4QyxPQUFPYSxJQUFBQSxxQkFBWSxFQUNqQjtnQkFDRUMsU0FBUztnQkFDVFosU0FBU0YsaUJBQWlCQyxRQUFRRCxNQUFNRSxPQUFPLEdBQUc7Z0JBQ2xESixRQUFRbkIsUUFBUW1CLE1BQU07Z0JBQ3RCaUIsY0FBYztnQkFDZEMsVUFBVTtvQkFDUkMsY0FBYztvQkFDZGpCLE9BQU9BLGlCQUFpQkMsUUFBUUQsTUFBTUUsT0FBTyxHQUFHO2dCQUNsRDtZQUNGLEdBQ0E7Z0JBQ0VHLFFBQVFtQjtnQkFDUlosY0FBY1k7Z0JBQ2RwQixjQUFjekIsUUFBUXlCLFlBQVk7WUFDcEM7UUFFSjtJQUNGO0lBRUEsTUFBTXFCLGlCQUFpQjdDLElBQWMsRUFBRThDLEtBQWlCLEVBQXdCO1FBQzlFLElBQUk7WUFDRixNQUFNQyxZQUFZckIsS0FBS0MsR0FBRztZQUUxQiw0QkFBNEI7WUFDNUIsTUFBTXFCLGVBQWUsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ2pELE1BQU04QztZQUVqRCx5QkFBeUI7WUFDekIsTUFBTUksY0FBYyxJQUFJLENBQUNDLG9CQUFvQixDQUFDbkQsTUFBTThDO1lBRXBELCtCQUErQjtZQUMvQixNQUFNTSxhQUFhSixZQUFZLENBQUNBLGFBQWF2QyxNQUFNLEdBQUcsRUFBRTtZQUN4RCxJQUFJNEM7WUFDSixJQUFJQyxjQUFjO1lBQ2xCLElBQUlDLG1CQUFtQjtZQUV2QixJQUFJSCxjQUFjSSxPQUFPQyxJQUFJLENBQUNMLFdBQVdOLEtBQUssRUFBRXJDLE1BQU0sR0FBRyxHQUFHO2dCQUMxRCxNQUFNaUQsVUFBVUYsT0FBT0UsT0FBTyxDQUFDTixXQUFXTixLQUFLO2dCQUMvQyxNQUFNYSxXQUFXRCxRQUFRRSxNQUFNLENBQUMsQ0FBQ0MsS0FBS0MsVUFDcENBLE9BQU8sQ0FBQyxFQUFFLEdBQUdELEdBQUcsQ0FBQyxFQUFFLEdBQUdDLFVBQVVEO2dCQUdsQ1IsU0FBU00sUUFBUSxDQUFDLEVBQUU7Z0JBQ3BCTCxjQUFjSyxRQUFRLENBQUMsRUFBRTtnQkFDekJKLG1CQUFtQkgsV0FBV1csV0FBVyxDQUFDVixPQUFPLElBQUk7WUFDdkQ7WUFFQSx5Q0FBeUM7WUFDekMsTUFBTVcsY0FBc0MsQ0FBQztZQUM3QyxNQUFNQyxvQkFBNEMsQ0FBQztZQUVuRGpFLEtBQUthLE9BQU8sQ0FBQ3FELE9BQU8sQ0FBQyxDQUFDQyxHQUFHMUI7Z0JBQ3ZCdUIsV0FBVyxDQUFDdkIsTUFBTVgsUUFBUSxHQUFHLEdBQUc7Z0JBQ2hDbUMsaUJBQWlCLENBQUN4QixNQUFNWCxRQUFRLEdBQUcsR0FBRztZQUN4QztZQUVBLDJCQUEyQjtZQUMzQmdCLE1BQU1vQixPQUFPLENBQUNFLENBQUFBO2dCQUNaLElBQUlBLEtBQUtsRSxRQUFRLElBQUlrRSxLQUFLbEUsUUFBUSxDQUFDTyxNQUFNLEdBQUcsR0FBRztvQkFDN0MsTUFBTTRELGVBQWVELEtBQUtsRSxRQUFRLENBQUMsRUFBRTtvQkFDckMsSUFBSW1FLGlCQUFpQnpCLFdBQVc7d0JBQzlCLE1BQU0wQixjQUFjRCxhQUFhdkMsUUFBUTt3QkFDekMsSUFBSWtDLFdBQVcsQ0FBQ00sWUFBWSxLQUFLMUIsV0FBVzs0QkFDMUNvQixXQUFXLENBQUNNLFlBQVk7d0JBQzFCO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSxNQUFNQyxhQUFhekIsTUFBTXJDLE1BQU07WUFDL0IsSUFBSThELGFBQWEsR0FBRztnQkFDbEJmLE9BQU9DLElBQUksQ0FBQ08sYUFBYUUsT0FBTyxDQUFDTSxDQUFBQTtvQkFDL0IsTUFBTTFCLFFBQVFrQixXQUFXLENBQUNRLFlBQVk7b0JBQ3RDLElBQUkxQixVQUFVRixXQUFXO3dCQUN2QnFCLGlCQUFpQixDQUFDTyxZQUFZLEdBQUcsQUFBQzFCLFFBQVF5QixhQUFjO29CQUMxRDtnQkFDRjtZQUNGO1lBRUEsTUFBTUUsVUFBdUJ4QyxJQUFBQSxxQkFBWSxFQUN2QztnQkFDRXFCO2dCQUNBQztnQkFDQUw7Z0JBQ0F3QixxQkFBcUIxQjtnQkFDckJnQjtnQkFDQUM7Z0JBQ0FVLGFBQWE7Z0JBQ2JDLHNCQUFzQjtZQUN4QixHQUNBO2dCQUNFdkI7WUFDRjtZQUdGLE1BQU13QixjQUEyQjtnQkFDL0IzRCxRQUFRbEIsS0FBSzhFLEVBQUU7Z0JBQ2Z6QyxjQUFjO2dCQUNka0M7Z0JBQ0FRLG1CQUFtQlIsYUFBYSxJQUFJLE1BQU07Z0JBQzFDRTtnQkFDQU8sY0FBYyxJQUFJdEQsT0FBT3VELFdBQVc7Z0JBQ3BDN0MsVUFBVTtvQkFDUjhDLGlCQUFpQnhELEtBQUtDLEdBQUcsS0FBS29CO29CQUM5Qm9DLFdBQVc5QixXQUFXVDtvQkFDdEJ3QyxhQUFhcEMsYUFBYXZDLE1BQU07b0JBQ2hDNEUsT0FBTy9CLGNBQWMsS0FBS0UsT0FBTzhCLE1BQU0sQ0FBQ2xDLFlBQVlOLFNBQVMsQ0FBQyxHQUFHeUMsTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxNQUFNbEMsYUFBYTdDLE1BQU0sR0FBRztnQkFDM0c7WUFDRjtZQUVBUSxJQUFBQSxjQUFNLEVBQUMsNkJBQTZCO2dCQUNsQ0MsUUFBUWxCLEtBQUs4RSxFQUFFO2dCQUNmUDtnQkFDQWxCO2dCQUNBQztnQkFDQUM7Z0JBQ0E2QixhQUFhcEMsYUFBYXZDLE1BQU07Z0JBQ2hDeUUsaUJBQWlCeEQsS0FBS0MsR0FBRyxLQUFLb0I7WUFDaEM7WUFFQSxPQUFPOEI7UUFFVCxFQUFFLE9BQU96RCxPQUFPO1lBQ2RILElBQUFBLGNBQU0sRUFBQyxxQ0FBcUNHO1lBQzVDLE1BQU0sSUFBSUMsTUFBTSxDQUFDLG9DQUFvQyxFQUFFRCxpQkFBaUJDLFFBQVFELE1BQU1FLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztRQUNuSDtJQUNGO0lBRVEyQixpQkFBaUJqRCxJQUFjLEVBQUU4QyxLQUFpQixFQUF3QjtRQUNoRixNQUFNMkMsU0FBK0IsRUFBRTtRQUN2QyxNQUFNQyxtQkFBbUIsSUFBSTNFLElBQUlmLEtBQUthLE9BQU8sQ0FBQzBCLEdBQUcsQ0FBQyxDQUFDNEIsR0FBRzFCLFFBQVVBLE1BQU1YLFFBQVE7UUFDOUUsTUFBTTZELGVBQWU7ZUFBSTdDO1NBQU07UUFFL0IsSUFBSThDLFFBQVE7UUFDWixNQUFPRixpQkFBaUIxRSxJQUFJLEdBQUcsRUFBRztZQUNoQyxpREFBaUQ7WUFDakQsTUFBTTZFLGFBQXFDLENBQUM7WUFDNUNILGlCQUFpQnhCLE9BQU8sQ0FBQ3hCLENBQUFBO2dCQUN2Qm1ELFVBQVUsQ0FBQ25ELE9BQU8sR0FBRztZQUN2QjtZQUVBaUQsYUFBYXpCLE9BQU8sQ0FBQ0UsQ0FBQUE7Z0JBQ25CLElBQUlBLEtBQUtsRSxRQUFRLElBQUlrRSxLQUFLbEUsUUFBUSxDQUFDTyxNQUFNLEdBQUcsR0FBRztvQkFDN0MsMkNBQTJDO29CQUMzQyxLQUFLLE1BQU1DLFdBQVcwRCxLQUFLbEUsUUFBUSxDQUFFO3dCQUNuQyxJQUFJUSxZQUFZa0MsV0FBVzs0QkFDekIsTUFBTTRCLGNBQWM5RCxRQUFRb0IsUUFBUTs0QkFDcEMsSUFBSTRELGlCQUFpQkksR0FBRyxDQUFDdEIsY0FBYztnQ0FDckNxQixVQUFVLENBQUNyQixZQUFZLEdBQUcsQUFBQ3FCLENBQUFBLFVBQVUsQ0FBQ3JCLFlBQVksSUFBSSxDQUFBLElBQUs7Z0NBQzNEOzRCQUNGO3dCQUNGO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSx3QkFBd0I7WUFDeEIsTUFBTUQsYUFBYWYsT0FBTzhCLE1BQU0sQ0FBQ08sWUFBWWpDLE1BQU0sQ0FBQyxDQUFDbUMsS0FBS0MsUUFBVUQsTUFBTUMsT0FBTztZQUNqRixNQUFNQyxtQkFBMkMsQ0FBQztZQUNsRHpDLE9BQU9DLElBQUksQ0FBQ29DLFlBQVkzQixPQUFPLENBQUN4QixDQUFBQTtnQkFDOUIsTUFBTUksUUFBUStDLFVBQVUsQ0FBQ25ELE9BQU87Z0JBQ2hDLElBQUlJLFVBQVVGLFdBQVc7b0JBQ3ZCcUQsZ0JBQWdCLENBQUN2RCxPQUFPLEdBQUc2QixhQUFhLElBQUksQUFBQ3pCLFFBQVF5QixhQUFjLE1BQU07Z0JBQzNFO1lBQ0Y7WUFFQSw0QkFBNEI7WUFDNUIsTUFBTTJCLG9CQUFvQjNCLGFBQWE7WUFDdkMsTUFBTWxCLFNBQVNHLE9BQU9FLE9BQU8sQ0FBQ21DLFlBQVlNLElBQUksQ0FBQyxDQUFDLENBQUNoQyxHQUFHckIsTUFBTSxHQUFLQSxRQUFRb0Q7WUFFdkUsSUFBSTdDLFFBQVE7Z0JBQ1YsNEJBQTRCO2dCQUM1Qm9DLE9BQU9XLElBQUksQ0FBQztvQkFDVlI7b0JBQ0E5QyxPQUFPK0M7b0JBQ1A5QixhQUFha0M7Z0JBQ2Y7Z0JBQ0E7WUFDRjtZQUVBLDZDQUE2QztZQUM3QyxNQUFNSSxXQUFXekUsS0FBSzBFLEdBQUcsSUFBSTlDLE9BQU84QixNQUFNLENBQUNPO1lBQzNDLE1BQU1VLG9CQUFvQi9DLE9BQU9FLE9BQU8sQ0FBQ21DLFlBQ3RDTixNQUFNLENBQUMsQ0FBQyxDQUFDcEIsR0FBR3JCLE1BQU0sR0FBS0EsVUFBVXVELFVBQ2pDOUQsR0FBRyxDQUFDLENBQUMsQ0FBQ0csUUFBUXlCLEVBQUUsR0FBS3pCO1lBRXhCLDREQUE0RDtZQUM1RCxNQUFNOEQsYUFBYUQsaUJBQWlCLENBQUMsRUFBRTtZQUN2QyxJQUFJLENBQUNDLFlBQVk7Z0JBQ2YsTUFBTSxJQUFJbkYsTUFBTTtZQUNsQjtZQUNBcUUsaUJBQWlCZSxNQUFNLENBQUNEO1lBRXhCZixPQUFPVyxJQUFJLENBQUNuRSxJQUFBQSxxQkFBWSxFQUN0QjtnQkFDRTJEO2dCQUNBOUMsT0FBTytDO2dCQUNQOUIsYUFBYWtDO1lBQ2YsR0FDQTtnQkFDRU87WUFDRjtZQUdGWjtRQUNGO1FBRUEsT0FBT0g7SUFDVDtJQUVRdEMscUJBQXFCbkQsSUFBYyxFQUFFOEMsS0FBaUIsRUFBMEI7UUFDdEYsTUFBTUksY0FBc0MsQ0FBQztRQUU3QyxvQkFBb0I7UUFDcEJsRCxLQUFLYSxPQUFPLENBQUNxRCxPQUFPLENBQUMsQ0FBQ0MsR0FBRzFCO1lBQ3ZCUyxXQUFXLENBQUNULE1BQU1YLFFBQVEsR0FBRyxHQUFHO1FBQ2xDO1FBRUEseUJBQXlCO1FBQ3pCZ0IsTUFBTW9CLE9BQU8sQ0FBQ0UsQ0FBQUE7WUFDWixJQUFJQSxLQUFLbEUsUUFBUSxJQUFJa0UsS0FBS2xFLFFBQVEsQ0FBQ08sTUFBTSxHQUFHLEdBQUc7Z0JBQzdDMkQsS0FBS2xFLFFBQVEsQ0FBQ2dFLE9BQU8sQ0FBQyxDQUFDTSxhQUFhaEM7b0JBQ2xDLE1BQU1rRSxRQUFRMUcsS0FBS2EsT0FBTyxDQUFDSixNQUFNLEdBQUcrQixPQUFPLEdBQUcsNkJBQTZCO29CQUMzRSxNQUFNbUUsWUFBWW5DLFlBQVkxQyxRQUFRO29CQUN0QyxJQUFJb0IsV0FBVyxDQUFDeUQsVUFBVSxLQUFLL0QsV0FBVzt3QkFDeENNLFdBQVcsQ0FBQ3lELFVBQVUsSUFBSUQ7b0JBQzVCO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLE9BQU94RDtJQUNUO0lBRUEwRCxtQkFBNEM7UUFDMUMsT0FBTztZQUNMQyxNQUFNO1lBQ05DLGFBQWE7WUFDYkMsWUFBWTtZQUNaQyxZQUFZO1lBQ1pDLGlCQUFpQjtZQUNqQkMsaUJBQWlCO1lBQ2pCQywwQkFBMEI7WUFDMUJDLFlBQVk7WUFDWkMsVUFBVTtnQkFDUjtnQkFDQTtnQkFDQTtnQkFDQTthQUNEO1lBQ0RDLGFBQWE7Z0JBQ1g7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7YUFDRDtRQUNIO0lBQ0Y7QUFDRiJ9