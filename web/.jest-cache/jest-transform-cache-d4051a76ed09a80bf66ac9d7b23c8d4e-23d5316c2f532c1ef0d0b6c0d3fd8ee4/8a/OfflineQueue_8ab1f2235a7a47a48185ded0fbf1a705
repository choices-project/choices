69acd06a390000bb89d1943abe8fae0b
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return OfflineQueue;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _Clock = require("lucide-react/dist/esm/icons/Clock");
const _WifiOff = require("lucide-react/dist/esm/icons/WifiOff");
const _react = require("react");
const _usePWA = require("../../../hooks/usePWA");
function OfflineQueue({ className = "" }) {
    const pwa = (0, _usePWA.usePWA)();
    const [queueItems, setQueueItems] = (0, _react.useState)([]);
    const [isSyncing, setIsSyncing] = (0, _react.useState)(false);
    (0, _react.useEffect)(()=>{
        // Simulate offline queue items
        const mockQueueItems = [
            {
                id: "1",
                type: "vote",
                pollId: "poll-1",
                timestamp: Date.now() - 300000
            },
            {
                id: "2",
                type: "comment",
                pollId: "poll-1",
                timestamp: Date.now() - 180000
            },
            {
                id: "3",
                type: "vote",
                pollId: "poll-2",
                timestamp: Date.now() - 60000
            }
        ];
        setQueueItems(mockQueueItems);
    }, []);
    const handleSync = async ()=>{
        setIsSyncing(true);
        try {
            await pwa.syncOfflineData();
            setQueueItems([]);
        } catch (error) {
            console.error("Sync failed:", error);
        } finally{
            setIsSyncing(false);
        }
    };
    if (!pwa.hasOfflineData && queueItems.length === 0) {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `bg-yellow-50 border border-yellow-200 rounded-lg p-4 ${className}`,
        "data-testid": "offline-queue-component",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between mb-3",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_WifiOff.WifiOff, {
                                className: "w-5 h-5 text-yellow-600"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                className: "text-sm font-medium text-yellow-800",
                                children: "Offline Actions"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                        className: "text-sm text-yellow-700",
                        children: [
                            queueItems.length,
                            " pending"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "space-y-2",
                children: queueItems.map((item)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between p-2 bg-white rounded border",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Clock.Clock, {
                                        className: "w-4 h-4 text-gray-400"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "text-sm text-gray-700",
                                        children: [
                                            item.label === "vote" ? "Vote" : "Comment",
                                            " on Poll ",
                                            item.pollId
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-xs text-gray-500",
                                children: new Date(item.timestamp).toLocaleTimeString()
                            })
                        ]
                    }, item.id))
            }),
            pwa.isOnline && /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: handleSync,
                disabled: isSyncing,
                className: "w-full mt-3 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50 transition-colors",
                children: isSyncing ? "Syncing..." : "Sync Now"
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9wd2EvY29tcG9uZW50cy9PZmZsaW5lUXVldWUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyBDbG9jaywgV2lmaU9mZiB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcblxuaW1wb3J0IHsgdXNlUFdBIH0gZnJvbSAnQC9ob29rcy91c2VQV0EnXG5cbmludGVyZmFjZSBPZmZsaW5lUXVldWVQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBPZmZsaW5lUXVldWUoeyBjbGFzc05hbWUgPSAnJyB9OiBPZmZsaW5lUXVldWVQcm9wcykge1xuICBjb25zdCBwd2EgPSB1c2VQV0EoKVxuICBjb25zdCBbcXVldWVJdGVtcywgc2V0UXVldWVJdGVtc10gPSB1c2VTdGF0ZTxhbnlbXT4oW10pXG4gIGNvbnN0IFtpc1N5bmNpbmcsIHNldElzU3luY2luZ10gPSB1c2VTdGF0ZShmYWxzZSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNpbXVsYXRlIG9mZmxpbmUgcXVldWUgaXRlbXNcbiAgICBjb25zdCBtb2NrUXVldWVJdGVtcyA9IFtcbiAgICAgIHsgaWQ6ICcxJywgdHlwZTogJ3ZvdGUnLCBwb2xsSWQ6ICdwb2xsLTEnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzMDAwMDAgfSxcbiAgICAgIHsgaWQ6ICcyJywgdHlwZTogJ2NvbW1lbnQnLCBwb2xsSWQ6ICdwb2xsLTEnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAxODAwMDAgfSxcbiAgICAgIHsgaWQ6ICczJywgdHlwZTogJ3ZvdGUnLCBwb2xsSWQ6ICdwb2xsLTInLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSA2MDAwMCB9XG4gICAgXVxuICAgIHNldFF1ZXVlSXRlbXMobW9ja1F1ZXVlSXRlbXMpXG4gIH0sIFtdKVxuXG4gIGNvbnN0IGhhbmRsZVN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0SXNTeW5jaW5nKHRydWUpXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHB3YS5zeW5jT2ZmbGluZURhdGEoKVxuICAgICAgc2V0UXVldWVJdGVtcyhbXSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU3luYyBmYWlsZWQ6JywgZXJyb3IpXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzU3luY2luZyhmYWxzZSlcbiAgICB9XG4gIH1cblxuICBpZiAoIXB3YS5oYXNPZmZsaW5lRGF0YSAmJiBxdWV1ZUl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgYmcteWVsbG93LTUwIGJvcmRlciBib3JkZXIteWVsbG93LTIwMCByb3VuZGVkLWxnIHAtNCAke2NsYXNzTmFtZX1gfSBkYXRhLXRlc3RpZD1cIm9mZmxpbmUtcXVldWUtY29tcG9uZW50XCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgPFdpZmlPZmYgY2xhc3NOYW1lPVwidy01IGgtNSB0ZXh0LXllbGxvdy02MDBcIiAvPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQteWVsbG93LTgwMFwiPk9mZmxpbmUgQWN0aW9uczwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQteWVsbG93LTcwMFwiPntxdWV1ZUl0ZW1zLmxlbmd0aH0gcGVuZGluZzwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICB7cXVldWVJdGVtcy5tYXAoKGl0ZW0pID0+IChcbiAgICAgICAgICA8ZGl2IGtleT17aXRlbS5pZH0gY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMiBiZy13aGl0ZSByb3VuZGVkIGJvcmRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTJcIj5cbiAgICAgICAgICAgICAgPENsb2NrIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgIHtpdGVtLmxhYmVsID09PSAndm90ZScgPyAnVm90ZScgOiAnQ29tbWVudCd9IG9uIFBvbGwge2l0ZW0ucG9sbElkfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICB7bmV3IERhdGUoaXRlbS50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7cHdhLmlzT25saW5lICYmIChcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN5bmN9XG4gICAgICAgICAgZGlzYWJsZWQ9e2lzU3luY2luZ31cbiAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgbXQtMyBweC00IHB5LTIgYmcteWVsbG93LTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmcteWVsbG93LTcwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgPlxuICAgICAgICAgIHtpc1N5bmNpbmcgPyAnU3luY2luZy4uLicgOiAnU3luYyBOb3cnfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJPZmZsaW5lUXVldWUiLCJjbGFzc05hbWUiLCJwd2EiLCJ1c2VQV0EiLCJxdWV1ZUl0ZW1zIiwic2V0UXVldWVJdGVtcyIsInVzZVN0YXRlIiwiaXNTeW5jaW5nIiwic2V0SXNTeW5jaW5nIiwidXNlRWZmZWN0IiwibW9ja1F1ZXVlSXRlbXMiLCJpZCIsInR5cGUiLCJwb2xsSWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwiaGFuZGxlU3luYyIsInN5bmNPZmZsaW5lRGF0YSIsImVycm9yIiwiY29uc29sZSIsImhhc09mZmxpbmVEYXRhIiwibGVuZ3RoIiwiZGl2IiwiZGF0YS10ZXN0aWQiLCJXaWZpT2ZmIiwiaDMiLCJzcGFuIiwibWFwIiwiaXRlbSIsIkNsb2NrIiwibGFiZWwiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJpc09ubGluZSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQVdBOzs7ZUFBd0JBOzs7Ozs7dUJBUlk7d0JBRWI7QUFNUixTQUFTQSxhQUFhLEVBQUVDLFlBQVksRUFBRSxFQUFxQjtJQUN4RSxNQUFNQyxNQUFNQyxJQUFBQSxjQUFNO0lBQ2xCLE1BQU0sQ0FBQ0MsWUFBWUMsY0FBYyxHQUFHQyxJQUFBQSxlQUFRLEVBQVEsRUFBRTtJQUN0RCxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR0YsSUFBQUEsZUFBUSxFQUFDO0lBRTNDRyxJQUFBQSxnQkFBUyxFQUFDO1FBQ1IsK0JBQStCO1FBQy9CLE1BQU1DLGlCQUFpQjtZQUNyQjtnQkFBRUMsSUFBSTtnQkFBS0MsTUFBTTtnQkFBUUMsUUFBUTtnQkFBVUMsV0FBV0MsS0FBS0MsR0FBRyxLQUFLO1lBQU87WUFDMUU7Z0JBQUVMLElBQUk7Z0JBQUtDLE1BQU07Z0JBQVdDLFFBQVE7Z0JBQVVDLFdBQVdDLEtBQUtDLEdBQUcsS0FBSztZQUFPO1lBQzdFO2dCQUFFTCxJQUFJO2dCQUFLQyxNQUFNO2dCQUFRQyxRQUFRO2dCQUFVQyxXQUFXQyxLQUFLQyxHQUFHLEtBQUs7WUFBTTtTQUMxRTtRQUNEWCxjQUFjSztJQUNoQixHQUFHLEVBQUU7SUFFTCxNQUFNTyxhQUFhO1FBQ2pCVCxhQUFhO1FBQ2IsSUFBSTtZQUNGLE1BQU1OLElBQUlnQixlQUFlO1lBQ3pCYixjQUFjLEVBQUU7UUFDbEIsRUFBRSxPQUFPYyxPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQkFBZ0JBO1FBQ2hDLFNBQVU7WUFDUlgsYUFBYTtRQUNmO0lBQ0Y7SUFFQSxJQUFJLENBQUNOLElBQUltQixjQUFjLElBQUlqQixXQUFXa0IsTUFBTSxLQUFLLEdBQUc7UUFDbEQsT0FBTztJQUNUO0lBRUEscUJBQ0Usc0JBQUNDO1FBQUl0QixXQUFXLENBQUMscURBQXFELEVBQUVBLFVBQVUsQ0FBQztRQUFFdUIsZUFBWTs7MEJBQy9GLHNCQUFDRDtnQkFBSXRCLFdBQVU7O2tDQUNiLHNCQUFDc0I7d0JBQUl0QixXQUFVOzswQ0FDYixxQkFBQ3dCLGdCQUFPO2dDQUFDeEIsV0FBVTs7MENBQ25CLHFCQUFDeUI7Z0NBQUd6QixXQUFVOzBDQUFzQzs7OztrQ0FFdEQsc0JBQUMwQjt3QkFBSzFCLFdBQVU7OzRCQUEyQkcsV0FBV2tCLE1BQU07NEJBQUM7Ozs7OzBCQUcvRCxxQkFBQ0M7Z0JBQUl0QixXQUFVOzBCQUNaRyxXQUFXd0IsR0FBRyxDQUFDLENBQUNDLHFCQUNmLHNCQUFDTjt3QkFBa0J0QixXQUFVOzswQ0FDM0Isc0JBQUNzQjtnQ0FBSXRCLFdBQVU7O2tEQUNiLHFCQUFDNkIsWUFBSzt3Q0FBQzdCLFdBQVU7O2tEQUNqQixzQkFBQzBCO3dDQUFLMUIsV0FBVTs7NENBQ2I0QixLQUFLRSxLQUFLLEtBQUssU0FBUyxTQUFTOzRDQUFVOzRDQUFVRixLQUFLaEIsTUFBTTs7Ozs7MENBR3JFLHFCQUFDYztnQ0FBSzFCLFdBQVU7MENBQ2IsSUFBSWMsS0FBS2MsS0FBS2YsU0FBUyxFQUFFa0Isa0JBQWtCOzs7dUJBUnRDSCxLQUFLbEIsRUFBRTs7WUFjcEJULElBQUkrQixRQUFRLGtCQUNYLHFCQUFDQztnQkFDQ0MsU0FBU2xCO2dCQUNUbUIsVUFBVTdCO2dCQUNWTixXQUFVOzBCQUVUTSxZQUFZLGVBQWU7Ozs7QUFLdEMifQ==