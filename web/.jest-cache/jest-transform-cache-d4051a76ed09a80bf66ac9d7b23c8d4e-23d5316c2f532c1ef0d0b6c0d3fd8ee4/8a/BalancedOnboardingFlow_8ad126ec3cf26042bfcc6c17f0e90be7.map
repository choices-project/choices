{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/features/onboarding/components/BalancedOnboardingFlow.tsx"],"sourcesContent":["// Balanced Onboarding Flow\n// 5 essential steps: Welcome, Privacy, Demographics, Auth, Complete\n// Created: October 2, 2025\n\n'use client';\n\nimport { useRouter } from 'next/navigation';\nimport React, { useState, useEffect } from 'react';\n\nimport { FeatureWrapper } from '@/components/shared/FeatureWrapper';\nimport { PasskeyRegister } from '@/features/auth/components/PasskeyRegister';\nimport type { UserDemographics, PrivacyPreferences, OnboardingData } from '@/features/onboarding/types';\nimport { useUser, useUserLoading } from '@/lib/stores';\nimport { \n  useOnboardingStep,\n  useOnboardingData,\n  useOnboardingActions,\n  useOnboardingLoading,\n  useOnboardingError\n} from '@/lib/stores';\nimport { withOptional } from '@/lib/utils/objects';\nimport { getSupabaseBrowserClient } from '@/utils/supabase/client';\n\n\n// Step 1: Welcome & Value Proposition (30 seconds)\nconst WelcomeStep: React.FC<{\n  onNext: () => void;\n  onSkip: () => void;\n}> = ({ onNext, onSkip }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n      <div className=\"max-w-2xl mx-auto text-center p-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-5xl font-bold text-gray-900 mb-6\">\n            Welcome to Choices\n          </h1>\n          <p className=\"text-xl text-gray-600 mb-8\">\n            Make informed decisions with transparent, data-driven insights\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-4xl mb-4\">üó≥Ô∏è</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Vote on Issues</h3>\n            <p className=\"text-gray-600 text-sm\">Participate in polls on topics that matter to you</p>\n          </div>\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-4xl mb-4\">üèõÔ∏è</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Track Representatives</h3>\n            <p className=\"text-gray-600 text-sm\">See how your elected officials vote and fundraise</p>\n          </div>\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"text-4xl mb-4\">üìä</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Campaign Finance</h3>\n            <p className=\"text-gray-600 text-sm\">Understand who funds political campaigns</p>\n          </div>\n        </div>\n\n        <div className=\"bg-blue-50 rounded-lg p-4 mb-8\">\n          <p className=\"text-blue-800 font-medium\">\n            ‚è±Ô∏è This will take about 3 minutes to get you started\n          </p>\n        </div>\n\n        <div className=\"space-y-4\">\n          <button\n            onClick={onNext}\n            data-testid=\"welcome-next\"\n            className=\"w-full bg-blue-600 text-white py-4 px-8 rounded-lg font-semibold text-lg hover:bg-blue-700 transition-colors\"\n          >\n            Get Started\n          </button>\n          <button\n            onClick={onSkip}\n            className=\"w-full text-gray-500 hover:text-gray-700 transition-colors\"\n          >\n            I&apos;m a returning user\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Step 2: Data Safety & Privacy Philosophy (45 seconds)\nconst PrivacyStep: React.FC<{\n  onNext: () => void;\n  onBack: () => void;\n  privacy: PrivacyPreferences;\n  setPrivacy: (privacy: PrivacyPreferences) => void;\n}> = ({ onNext, onBack, privacy, setPrivacy }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n      <div className=\"max-w-2xl mx-auto p-8\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-4xl font-bold text-gray-900 mb-4\">\n            Your Privacy Matters\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            We believe in transparency and data protection\n          </p>\n        </div>\n\n        <div className=\"space-y-6 mb-8\">\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"text-3xl\">üîí</div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Location Data</h3>\n                <p className=\"text-gray-600\">\n                  We only need your state/district to find your representatives. \n                  We never store your exact address.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"text-3xl\">üìä</div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Demographics</h3>\n                <p className=\"text-gray-600\">\n                  Age and education help us show you relevant polls and \n                  match you with similar voters.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <div className=\"flex items-start space-x-4\">\n              <div className=\"text-3xl\">üõ°Ô∏è</div>\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Data Protection</h3>\n                <p className=\"text-gray-600\">\n                  All data is encrypted, anonymized, and never sold. \n                  You can delete your data anytime.\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-gray-50 rounded-lg p-6 mb-8\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Your Privacy Controls</h3>\n          <div className=\"space-y-4\">\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                checked={privacy.location_sharing === 'quantized'}\n                onChange={(e) => setPrivacy(withOptional(privacy, {\n                  location_sharing: e.target.checked ? 'quantized' : 'disabled'\n                }))}\n                className=\"w-5 h-5 text-blue-600 rounded\"\n              />\n              <span className=\"text-gray-700\">\n                Allow location sharing (quantized to state level)\n              </span>\n            </label>\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                checked={privacy.demographic_sharing === 'enabled'}\n                onChange={(e) => setPrivacy(withOptional(privacy, {\n                  demographic_sharing: e.target.checked ? 'enabled' : 'disabled'\n                }))}\n                className=\"w-5 h-5 text-blue-600 rounded\"\n              />\n              <span className=\"text-gray-700\">\n                Share demographics for better experience\n              </span>\n            </label>\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                checked={privacy.analytics_sharing === 'enabled'}\n                onChange={(e) => setPrivacy(withOptional(privacy, {\n                  analytics_sharing: e.target.checked ? 'enabled' : 'limited'\n                }))}\n                className=\"w-5 h-5 text-blue-600 rounded\"\n              />\n              <span className=\"text-gray-700\">\n                Share analytics to improve the platform\n              </span>\n            </label>\n          </div>\n        </div>\n\n        <div className=\"flex justify-between\">\n          <button\n            onClick={onBack}\n            className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n          >\n            ‚Üê Back\n          </button>\n          <button\n            onClick={onNext}\n            data-testid=\"privacy-next\"\n            className=\"bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors\"\n          >\n            Continue\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Step 3: Location & Demographics (60 seconds)\nconst DemographicsStep: React.FC<{\n  onNext: () => void;\n  onBack: () => void;\n  onSkip: () => void;\n  demographics: UserDemographics;\n  setDemographics: (demographics: UserDemographics) => void;\n}> = ({ onNext, onBack, onSkip, demographics, setDemographics }) => {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n      <div className=\"max-w-2xl mx-auto p-8\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-4xl font-bold text-gray-900 mb-4\">\n            Help Us Personalize Your Experience\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            This information helps us show you relevant content\n          </p>\n        </div>\n\n        <div className=\"space-y-8\">\n          {/* Location Section */}\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n              <span className=\"text-2xl mr-3\">üìç</span>\n              Location\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              We need this to find your representatives\n            </p>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  State\n                </label>\n                <select\n                  value={demographics.location.state}\n                  onChange={(e) => setDemographics(withOptional(demographics, {\n                    location: withOptional(demographics.location, { state: e.target.value })\n                  }))}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Select your state</option>\n                  <option value=\"AL\">Alabama</option>\n                  <option value=\"AK\">Alaska</option>\n                  <option value=\"AZ\">Arizona</option>\n                  <option value=\"AR\">Arkansas</option>\n                  <option value=\"CA\">California</option>\n                  <option value=\"CO\">Colorado</option>\n                  <option value=\"CT\">Connecticut</option>\n                  <option value=\"DE\">Delaware</option>\n                  <option value=\"FL\">Florida</option>\n                  <option value=\"GA\">Georgia</option>\n                  <option value=\"HI\">Hawaii</option>\n                  <option value=\"ID\">Idaho</option>\n                  <option value=\"IL\">Illinois</option>\n                  <option value=\"IN\">Indiana</option>\n                  <option value=\"IA\">Iowa</option>\n                  <option value=\"KS\">Kansas</option>\n                  <option value=\"KY\">Kentucky</option>\n                  <option value=\"LA\">Louisiana</option>\n                  <option value=\"ME\">Maine</option>\n                  <option value=\"MD\">Maryland</option>\n                  <option value=\"MA\">Massachusetts</option>\n                  <option value=\"MI\">Michigan</option>\n                  <option value=\"MN\">Minnesota</option>\n                  <option value=\"MS\">Mississippi</option>\n                  <option value=\"MO\">Missouri</option>\n                  <option value=\"MT\">Montana</option>\n                  <option value=\"NE\">Nebraska</option>\n                  <option value=\"NV\">Nevada</option>\n                  <option value=\"NH\">New Hampshire</option>\n                  <option value=\"NJ\">New Jersey</option>\n                  <option value=\"NM\">New Mexico</option>\n                  <option value=\"NY\">New York</option>\n                  <option value=\"NC\">North Carolina</option>\n                  <option value=\"ND\">North Dakota</option>\n                  <option value=\"OH\">Ohio</option>\n                  <option value=\"OK\">Oklahoma</option>\n                  <option value=\"OR\">Oregon</option>\n                  <option value=\"PA\">Pennsylvania</option>\n                  <option value=\"RI\">Rhode Island</option>\n                  <option value=\"SC\">South Carolina</option>\n                  <option value=\"SD\">South Dakota</option>\n                  <option value=\"TN\">Tennessee</option>\n                  <option value=\"TX\">Texas</option>\n                  <option value=\"UT\">Utah</option>\n                  <option value=\"VT\">Vermont</option>\n                  <option value=\"VA\">Virginia</option>\n                  <option value=\"WA\">Washington</option>\n                  <option value=\"WV\">West Virginia</option>\n                  <option value=\"WI\">Wisconsin</option>\n                  <option value=\"WY\">Wyoming</option>\n                </select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  District (Optional)\n                </label>\n                <input\n                  type=\"text\"\n                  value={demographics.location.district || ''}\n                  onChange={(e) => setDemographics(withOptional(demographics, {\n                    location: withOptional(demographics.location, { district: e.target.value })\n                  }))}\n                  placeholder=\"Enter your congressional district\"\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              </div>\n            </div>\n            <p className=\"text-sm text-gray-500 mt-2\">\n              We only store your state and district, not your exact address\n            </p>\n          </div>\n\n          {/* Demographics Section */}\n          <div className=\"bg-white rounded-lg p-6 shadow-sm\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n              <span className=\"text-2xl mr-3\">üë§</span>\n              Demographics\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              This helps us show you relevant polls and match you with similar voters\n            </p>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Age Range\n                </label>\n                <select\n                  value={demographics.age_range}\n                  onChange={(e) => setDemographics(withOptional(demographics, {\n                    age_range: e.target.value as UserDemographics['age_range']\n                  }))}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Select age range</option>\n                  <option value=\"18-24\">18-24</option>\n                  <option value=\"25-34\">25-34</option>\n                  <option value=\"35-44\">35-44</option>\n                  <option value=\"45-54\">45-54</option>\n                  <option value=\"55-64\">55-64</option>\n                  <option value=\"65+\">65+</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Education Level\n                </label>\n                <select\n                  value={demographics.education}\n                  onChange={(e) => setDemographics(withOptional(demographics, {\n                    education: e.target.value as UserDemographics['education']\n                  }))}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Select education</option>\n                  <option value=\"high_school\">High School</option>\n                  <option value=\"some_college\">Some College</option>\n                  <option value=\"bachelor\">Bachelor&apos;s Degree</option>\n                  <option value=\"graduate\">Graduate Degree</option>\n                </select>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Political Engagement\n                </label>\n                <select\n                  value={demographics.political_engagement}\n                  onChange={(e) => setDemographics(withOptional(demographics, {\n                    political_engagement: e.target.value as UserDemographics['political_engagement']\n                  }))}\n                  className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                >\n                  <option value=\"\">Select engagement</option>\n                  <option value=\"casual\">Casual (vote occasionally)</option>\n                  <option value=\"moderate\">Moderate (follow politics)</option>\n                  <option value=\"very_engaged\">Very Engaged (very active)</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-between items-center mt-8\">\n          <button\n            onClick={onBack}\n            className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n          >\n            ‚Üê Back\n          </button>\n          \n          <div className=\"flex space-x-4\">\n            <button\n              onClick={onSkip}\n              className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n            >\n              Skip for now\n            </button>\n            <button\n              onClick={onNext}\n              data-testid=\"profile-next\"\n              className=\"bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors\"\n            >\n              Continue\n            </button>\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-500 text-center mt-4\">\n          You can always add this information later\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Step 4: Authentication Setup (45 seconds)\nconst AuthStep: React.FC<{\n  onNext: () => void;\n  onBack: () => void;\n  onSkip: () => void;\n  error?: string | null;\n  isLoading?: boolean;\n}> = ({ onNext, onBack, onSkip, error, isLoading }) => {\n  const [authMethod, setAuthMethod] = useState<'email' | 'passkey' | 'google' | null>(null);\n  const [success, setSuccess] = useState(false);\n\n  const handleAuthMethodSelect = (method: 'email' | 'passkey' | 'google') => {\n    setAuthMethod(method);\n    // Error is managed by the store\n    setSuccess(false);\n  };\n\n  const handlePasskeySuccess = () => {\n    setSuccess(true);\n    setTimeout(() => {\n      onNext();\n    }, 1000);\n  };\n\n  const handlePasskeyError = (error: string) => {\n    // Error is managed by the store\n    console.error('Passkey error:', error);\n  };\n\n  const handleEmailAuth = async () => {\n    try {\n      // Redirect to registration page for email auth\n      const { safeNavigate } = await import('@/lib/utils/ssr-safe');\n      safeNavigate('/register');\n    } catch {\n      console.error('Failed to redirect to registration');\n    }\n  };\n\n  const handleGoogleAuth = async () => {\n    try {\n      // Redirect to Google OAuth\n      const { safeNavigate } = await import('@/lib/utils/ssr-safe');\n      safeNavigate('/auth/google');\n    } catch {\n      console.error('Failed to redirect to Google authentication');\n    }\n  };\n\n  // If user has selected a method, show the appropriate interface\n  if (authMethod === 'passkey') {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n        <div className=\"max-w-2xl mx-auto p-8\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-4xl font-bold text-gray-900 mb-4\">\n              Set Up Your Passkey\n            </h2>\n            <p className=\"text-xl text-gray-600\">\n              Create a secure, passwordless way to sign in\n            </p>\n          </div>\n\n          <div className=\"bg-white rounded-lg p-6 shadow-sm mb-8\">\n            <div className=\"text-center mb-6\">\n              <div className=\"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <span className=\"text-3xl\">üîê</span>\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Why Passkeys?</h3>\n              <ul className=\"text-gray-600 space-y-2 text-left\">\n                <li>‚Ä¢ Use your fingerprint, face, or device PIN</li>\n                <li>‚Ä¢ No passwords to remember or type</li>\n                <li>‚Ä¢ Works across all your devices</li>\n                <li>‚Ä¢ Maximum security with privacy</li>\n              </ul>\n            </div>\n\n            <FeatureWrapper feature=\"WEBAUTHN\">\n              <div data-testid=\"onboarding-passkey-setup\">\n                <PasskeyRegister\n                  onSuccess={handlePasskeySuccess}\n                  onError={handlePasskeyError}\n                  className=\"w-full\"\n                />\n              </div>\n            </FeatureWrapper>\n\n            {error && (\n              <div className=\"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg\">\n                <div className=\"flex items-center gap-2 text-red-800\">\n                  <span className=\"text-sm\">{error}</span>\n                </div>\n              </div>\n            )}\n\n            {success && (\n              <div className=\"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg\">\n                <div className=\"flex items-center gap-2 text-green-800\">\n                  <span className=\"text-sm\">‚úÖ Passkey created successfully!</span>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex justify-between items-center\">\n            <button\n              onClick={() => setAuthMethod(null)}\n              className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n            >\n              ‚Üê Back to options\n            </button>\n            \n            <div className=\"flex space-x-4\">\n              <button\n                onClick={onSkip}\n                className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n              >\n                Skip for now\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main authentication method selection\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n      <div className=\"max-w-2xl mx-auto p-8\">\n        <div className=\"text-center mb-8\">\n          <h2 className=\"text-4xl font-bold text-gray-900 mb-4\">\n            Create Your Account\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            Choose how you&apos;d like to sign in\n          </p>\n        </div>\n\n        <div className=\"space-y-4 mb-8\">\n          <FeatureWrapper feature=\"WEBAUTHN\">\n            <button\n              onClick={() => handleAuthMethodSelect('passkey')}\n              disabled={isLoading}\n              data-testid=\"auth-passkey-option\"\n              className=\"w-full flex items-center space-x-4 p-6 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors disabled:opacity-50\"\n            >\n              <span className=\"text-3xl\">üîê</span>\n              <div className=\"text-left\">\n                <div className=\"text-lg font-semibold\">Passkey (Recommended)</div>\n                <div className=\"text-gray-500\">Passwordless and secure</div>\n              </div>\n            </button>\n          </FeatureWrapper>\n\n          <button\n            onClick={handleEmailAuth}\n            disabled={isLoading}\n            data-testid=\"auth-email-option\"\n            className=\"w-full flex items-center space-x-4 p-6 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors disabled:opacity-50\"\n          >\n            <span className=\"text-3xl\">üìß</span>\n            <div className=\"text-left\">\n              <div className=\"text-lg font-semibold\">Email & Password</div>\n              <div className=\"text-gray-500\">Simple and secure</div>\n            </div>\n          </button>\n\n          <button\n            onClick={handleGoogleAuth}\n            disabled={isLoading}\n            data-testid=\"auth-google-option\"\n            className=\"w-full flex items-center space-x-4 p-6 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors disabled:opacity-50\"\n          >\n            <span className=\"text-3xl\">üì±</span>\n            <div className=\"text-left\">\n              <div className=\"text-lg font-semibold\">Continue with Google</div>\n              <div className=\"text-gray-500\">Quick and easy</div>\n            </div>\n          </button>\n        </div>\n\n        <div className=\"bg-gray-50 rounded-lg p-6 mb-8\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Why do we need authentication?</h3>\n          <ul className=\"text-gray-600 space-y-2\">\n            <li>‚Ä¢ Save your preferences and voting history</li>\n            <li>‚Ä¢ Show you personalized content</li>\n            <li>‚Ä¢ Keep your data secure and private</li>\n          </ul>\n        </div>\n\n        <div className=\"flex justify-between items-center\">\n          <button\n            onClick={onBack}\n            className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n          >\n            ‚Üê Back\n          </button>\n          \n          <div className=\"flex space-x-4\">\n            <button\n              onClick={onSkip}\n              className=\"text-gray-500 hover:text-gray-700 transition-colors\"\n            >\n              Continue without account\n            </button>\n          </div>\n        </div>\n        \n        <p className=\"text-sm text-gray-500 text-center mt-4\">\n          You can start without an account, but with limited features\n        </p>\n      </div>\n    </div>\n  );\n};\n\n// Step 5: Profile Setup (Optional - can be skipped)\nconst ProfileStep: React.FC<{\n  onNext: () => void;\n  onBack: () => void;\n  onSkip: () => void;\n  profile: OnboardingData['profile'];\n  onUpdate: (updates: Partial<OnboardingData['profile']>) => void;\n}> = ({ onNext, onBack, onSkip, profile, onUpdate }) => {\n  const [displayName, setDisplayName] = useState(profile?.display_name || '');\n  const [bio, setBio] = useState(profile?.bio || '');\n  const [primaryConcerns] = useState<string[]>(profile?.primary_concerns || []);\n  const [communityFocus] = useState<string[]>(profile?.community_focus || []);\n  const [participationStyle, setParticipationStyle] = useState<'observer' | 'contributor' | 'leader'>(profile?.participation_style || 'observer');\n\n  const handleNext = () => {\n    onUpdate({\n      display_name: displayName,\n      bio,\n      primary_concerns: primaryConcerns,\n      community_focus: communityFocus,\n      participation_style: participationStyle\n    });\n    onNext();\n  };\n\n  const handleSkip = () => {\n    onSkip();\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <div className=\"text-center mb-8\">\n        <h2 className=\"text-3xl font-bold text-gray-900 mb-4\">Complete Your Profile</h2>\n        <p className=\"text-lg text-gray-600\">\n          Help us personalize your experience (optional)\n        </p>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Display Name */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Display Name\n          </label>\n          <input\n            type=\"text\"\n            value={displayName}\n            onChange={(e) => setDisplayName(e.target.value)}\n            placeholder=\"Enter your display name\"\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n\n        {/* Bio */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Bio (Optional)\n          </label>\n          <textarea\n            value={bio}\n            onChange={(e) => setBio(e.target.value)}\n            placeholder=\"Share a brief description about yourself (optional)\"\n            rows={3}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          />\n        </div>\n\n        {/* Participation Style */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            How do you prefer to participate?\n          </label>\n          <div className=\"space-y-2\">\n            {[\n              { value: 'observer', label: 'Observer', desc: 'I prefer to read and learn' },\n              { value: 'contributor', label: 'Contributor', desc: 'I like to share my thoughts' },\n              { value: 'leader', label: 'Leader', desc: 'I want to drive discussions' }\n            ].map((option) => (\n              <label key={option.value} className=\"flex items-center space-x-3 p-3 border rounded-md cursor-pointer hover:bg-gray-50\">\n                <input\n                  type=\"radio\"\n                  name=\"participation\"\n                  value={option.value}\n                  checked={participationStyle === option.value}\n                  onChange={(e) => setParticipationStyle(e.target.value as any)}\n                  className=\"h-4 w-4 text-blue-600\"\n                />\n                <div>\n                  <div className=\"font-medium\">{option.label}</div>\n                  <div className=\"text-sm text-gray-500\">{option.desc}</div>\n                </div>\n              </label>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex justify-between mt-8\">\n        <button\n          onClick={onBack}\n          className=\"px-4 py-2 text-gray-600 hover:text-gray-800\"\n        >\n          ‚Üê Back\n        </button>\n        <div className=\"space-x-3\">\n          <button\n            onClick={handleSkip}\n            className=\"px-4 py-2 text-gray-600 hover:text-gray-800\"\n          >\n            Skip for now\n          </button>\n          <button\n            onClick={handleNext}\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\n          >\n            Complete Profile\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Step 6: Complete & First Experience (30 seconds)\nconst CompleteStep: React.FC<{\n  onFinish: () => void;\n  demographics: UserDemographics;\n}> = ({ onFinish, demographics }) => {\n  const router = useRouter();\n\n  const handleFindRepresentatives = () => {\n    onFinish();\n    router.push('/civics');\n  };\n\n  const handleBrowsePolls = () => {\n    onFinish();\n    router.push('/polls');\n  };\n\n  const handleExploreFeatures = () => {\n    onFinish();\n    router.push('/dashboard');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n      <div className=\"max-w-2xl mx-auto text-center p-8\">\n        <div className=\"mb-8\">\n          <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6\">\n            <span className=\"text-4xl\">üéâ</span>\n          </div>\n          <h2 className=\"text-4xl font-bold text-gray-900 mb-4\">\n            You&apos;re All Set!\n          </h2>\n          <p className=\"text-xl text-gray-600\">\n            Let&apos;s find your representatives and explore what&apos;s available\n          </p>\n        </div>\n\n        <div className=\"bg-white rounded-lg p-6 shadow-sm mb-8\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Your Personalized Dashboard</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n              <div className=\"text-2xl mb-2\">üèõÔ∏è</div>\n              <h4 className=\"font-semibold text-gray-900\">Your Representatives</h4>\n              <p className=\"text-sm text-gray-600\">\n                Based on your location: {demographics.location.state}\n              </p>\n            </div>\n            <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n              <div className=\"text-2xl mb-2\">üó≥Ô∏è</div>\n              <h4 className=\"font-semibold text-gray-900\">Relevant Polls</h4>\n              <p className=\"text-sm text-gray-600\">\n                Polls matching your interests\n              </p>\n            </div>\n            <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n              <div className=\"text-2xl mb-2\">üìä</div>\n              <h4 className=\"font-semibold text-gray-900\">Campaign Finance</h4>\n              <p className=\"text-sm text-gray-600\">\n                See who funds campaigns\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-4 mb-8\">\n          <button\n            onClick={handleFindRepresentatives}\n            data-testid=\"complete-onboarding\"\n            className=\"w-full bg-blue-600 text-white py-4 px-8 rounded-lg font-semibold text-lg hover:bg-blue-700 transition-colors\"\n          >\n            Find My Representatives\n          </button>\n          <button\n            onClick={handleBrowsePolls}\n            className=\"w-full bg-green-600 text-white py-4 px-8 rounded-lg font-semibold text-lg hover:bg-green-700 transition-colors\"\n          >\n            Browse Current Polls\n          </button>\n          <button\n            onClick={handleExploreFeatures}\n            className=\"w-full bg-purple-600 text-white py-4 px-8 rounded-lg font-semibold text-lg hover:bg-purple-700 transition-colors\"\n          >\n            Explore All Features\n          </button>\n        </div>\n\n        <div className=\"bg-gray-50 rounded-lg p-6\">\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">What&apos;s Next?</h3>\n          <ul className=\"text-left text-gray-600 space-y-2\">\n            <li>‚Ä¢ Vote on polls that interest you</li>\n            <li>‚Ä¢ Track how your representatives vote</li>\n            <li>‚Ä¢ See campaign finance data</li>\n            <li>‚Ä¢ Get notified about important issues</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n/**\n * Balanced Onboarding Flow Component\n * \n * A comprehensive onboarding flow that guides users through 6 essential steps:\n * 1. Welcome - Introduction and value proposition\n * 2. Privacy - Data usage and privacy preferences\n * 3. Demographics - User background information\n * 4. Auth - Authentication setup (email, social, passkey, or anonymous)\n * 5. Profile - Display name, visibility, and notification preferences\n * 6. Complete - Success confirmation and next steps\n * \n * Features:\n * - Automatic auth step skipping for users with existing passkey credentials\n * - Progress tracking and data persistence\n * - Responsive design with mobile-first approach\n * - Integration with Supabase authentication\n * \n * @returns {JSX.Element} The complete onboarding flow interface\n */\nconst BalancedOnboardingFlow: React.FC = () => {\n  const currentStep = useOnboardingStep();\n  const onboardingData = useOnboardingData() as any;\n  const { nextStep, previousStep, updateFormData, completeOnboarding, setCurrentStep } = useOnboardingActions() as any;\n  const loading = useOnboardingLoading();\n  const error = useOnboardingError();\n\n  const user = useUser();\n  const isLoading = useUserLoading();\n\n  // Check if user has already completed onboarding\n  useEffect(() => {\n    const checkOnboardingStatus = async () => {\n    if (!isLoading && user) {\n        try {\n          const supabase = await getSupabaseBrowserClient();\n          const { data: profile } = await supabase\n            .from('user_profiles')\n            .select('onboarding_completed')\n            .eq('user_id', user.id)\n            .single();\n\n          if (profile?.onboarding_completed) {\n            // User has already completed onboarding, redirect to dashboard\n            const { safeNavigate } = await import('@/lib/utils/ssr-safe');\n            safeNavigate('/dashboard');\n          }\n        } catch (error) {\n          console.error('Error checking onboarding status:', error);\n          // Continue with onboarding if we can't check status\n        }\n      }\n    };\n\n    checkOnboardingStatus();\n  }, [user, isLoading]);\n\n  const handleNext = () => {\n    nextStep();\n  };\n\n\n  const handleBack = () => {\n    previousStep();\n  };\n\n  const handleSkip = () => {\n    // Skip to complete step\n    setCurrentStep(5); // Complete step\n  };\n\n  const handleFinish = async () => {\n    try {\n      // Update user profile to mark onboarding as completed\n      if (user) {\n        const supabase = await getSupabaseBrowserClient();\n        const { error } = await supabase\n          .from('user_profiles')\n          .update({ \n            onboarding_completed: true,\n            updated_at: new Date().toISOString()\n          })\n          .eq('user_id', user.id);\n\n        if (error) {\n          console.error('Failed to update onboarding status:', error);\n        }\n      }\n\n    // Complete onboarding\n    completeOnboarding();\n    \n    // Redirect to main app\n    window.location.href = '/civics';\n    } catch (error) {\n      console.error('Error completing onboarding:', error);\n      // Still redirect even if database update fails\n      window.location.href = '/civics';\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"balanced-onboarding\">\n      {/* E2E Test Compatibility: Hidden buttons for test automation */}\n      <div style={{ position: 'absolute', left: '-9999px', top: '-9999px' }}>\n        <button data-testid=\"tour-next\" onClick={handleNext}>Tour Next</button>\n        <button data-testid=\"data-usage-next\" onClick={handleNext}>Data Usage Next</button>\n        <button data-testid=\"interests-next\" onClick={handleNext}>Interests Next</button>\n        <button data-testid=\"experience-next\" onClick={handleNext}>Experience Next</button>\n      </div>\n\n      {currentStep === 0 && (\n        <WelcomeStep onNext={handleNext} onSkip={handleSkip} />\n      )}\n      {currentStep === 1 && (\n        <PrivacyStep\n          onNext={handleNext}\n          onBack={handleBack}\n          privacy={onboardingData?.privacy || { location_sharing: 'disabled', demographic_sharing: 'disabled', analytics_sharing: 'disabled' }}\n          setPrivacy={(privacy) => updateFormData(2, { privacy })}\n        />\n      )}\n      {currentStep === 2 && (\n        <DemographicsStep \n          onNext={handleNext} \n          onBack={handleBack}\n          onSkip={handleNext}\n          demographics={onboardingData.demographics}\n          setDemographics={(demographics) => updateFormData(0, { demographics })}\n        />\n      )}\n      {currentStep === 3 && (\n        <AuthStep onNext={handleNext} onBack={handleBack} onSkip={handleNext} error={error} isLoading={loading} />\n      )}\n      {currentStep === 4 && (\n        <ProfileStep \n          onNext={handleNext} \n          onBack={handleBack}\n          onSkip={handleSkip}\n          profile={onboardingData.profile}\n          onUpdate={(profile) => updateFormData(0, { profile })}\n        />\n      )}\n      {currentStep === 5 && (\n        <CompleteStep \n          onFinish={handleFinish}\n          demographics={onboardingData.demographics}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default BalancedOnboardingFlow;\n"],"names":["WelcomeStep","onNext","onSkip","div","className","h1","p","h3","button","onClick","data-testid","PrivacyStep","onBack","privacy","setPrivacy","h2","label","input","type","checked","location_sharing","onChange","e","withOptional","target","span","demographic_sharing","analytics_sharing","DemographicsStep","demographics","setDemographics","select","value","location","state","option","district","placeholder","age_range","education","political_engagement","AuthStep","error","isLoading","authMethod","setAuthMethod","useState","success","setSuccess","handleAuthMethodSelect","method","handlePasskeySuccess","setTimeout","handlePasskeyError","console","handleEmailAuth","safeNavigate","handleGoogleAuth","ul","li","FeatureWrapper","feature","PasskeyRegister","onSuccess","onError","disabled","ProfileStep","profile","onUpdate","displayName","setDisplayName","display_name","bio","setBio","primaryConcerns","primary_concerns","communityFocus","community_focus","participationStyle","setParticipationStyle","participation_style","handleNext","handleSkip","textarea","rows","desc","map","name","CompleteStep","onFinish","router","useRouter","handleFindRepresentatives","push","handleBrowsePolls","handleExploreFeatures","h4","BalancedOnboardingFlow","currentStep","useOnboardingStep","onboardingData","useOnboardingData","nextStep","previousStep","updateFormData","completeOnboarding","setCurrentStep","useOnboardingActions","loading","useOnboardingLoading","useOnboardingError","user","useUser","useUserLoading","useEffect","checkOnboardingStatus","supabase","getSupabaseBrowserClient","data","from","eq","id","single","onboarding_completed","handleBack","handleFinish","update","updated_at","Date","toISOString","window","href","style","position","left","top"],"mappings":"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EAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB,qBAACG;4DAAOH,OAAM;sEAAK;;sEACnB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"}