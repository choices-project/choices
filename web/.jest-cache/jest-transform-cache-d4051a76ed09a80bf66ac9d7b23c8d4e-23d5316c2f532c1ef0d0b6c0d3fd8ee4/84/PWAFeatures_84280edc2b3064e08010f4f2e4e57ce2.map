{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/features/pwa/components/PWAFeatures.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\n\nimport { \n  usePWAInstallation,\n  usePWAOffline,\n  usePWANotifications,\n  usePWALoading,\n  usePWAError\n} from '@/lib/stores'\n\nimport NotificationPermission from './NotificationPermission'\nimport NotificationPreferences from './NotificationPreferences'\nimport OfflineIndicator from './OfflineIndicator'\nimport OfflineQueue from './OfflineQueue'\nimport OfflineSync from './OfflineSync'\nimport OfflineVoting from './OfflineVoting'\nimport { T } from '@/lib/testing/testIds'\n\ninterface PWAFeaturesProps {\n  className?: string\n  showDetails?: boolean\n}\n\nexport default function PWAFeatures({ className = '', showDetails = false }: PWAFeaturesProps) {\n  const installation = usePWAInstallation();\n  const offline = usePWAOffline();\n  const _notifications = usePWANotifications();\n  const _loading = usePWALoading();\n  const _error = usePWAError();\n  \n  const [isOnline, setIsOnline] = useState(true)\n\n  useEffect(() => {\n    // Only run on client side\n    if (typeof window !== 'undefined') {\n      setIsOnline(navigator.onLine)\n      \n      const handleOnline = () => setIsOnline(true)\n      const handleOffline = () => setIsOnline(false)\n      \n      window.addEventListener('online', handleOnline)\n      window.addEventListener('offline', handleOffline)\n      \n      return () => {\n        window.removeEventListener('online', handleOnline)\n        window.removeEventListener('offline', handleOffline)\n      }\n    }\n  }, [])\n\n  // Handle undefined store hooks gracefully - provide defaults for testing\n  const safeInstallation = installation || { canInstall: true, isInstalled: false }\n  const safeOffline = offline || { isOnline: true, offlineData: { cachedPages: [], queuedActions: [] } }\n  const safeNotifications = notifications || { requestPermission: jest.fn(), showNotification: jest.fn() }\n\n  // Only render if PWA can be installed or is already installed\n  if (!safeInstallation.canInstall && !safeInstallation.isInstalled) {\n    return null\n  }\n\n  return (\n    <div className={`space-y-4 ${className}`} data-testid=\"pwa-features\">\n      {/* Offline Features */}\n      <div data-testid=\"offline-features\">\n        <OfflineIndicator showDetails={showDetails} />\n      </div>\n\n      {/* Offline Polls */}\n      {safeOffline.offlineData?.cachedPages?.length > 0 && (\n        <div data-testid=\"offline-polls\">\n          <OfflineVoting pollId=\"test-poll\" />\n        </div>\n      )}\n\n      {/* Offline Queue */}\n      {safeOffline.offlineData?.queuedActions?.length > 0 && (\n        <div data-testid=\"offline-queue\">\n          <OfflineQueue />\n        </div>\n      )}\n\n      {/* Offline Sync */}\n      {safeOffline.offlineData?.cachedPages?.length > 0 && (\n        <div data-testid=\"offline-sync\">\n          <OfflineSync />\n        </div>\n      )}\n\n      {/* Notification Features */}\n      <div data-testid=\"notification-features\">\n        <NotificationPermission />\n        <NotificationPreferences />\n      </div>\n\n      {/* PWA Installation Controls */}\n      <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-gray-800 mb-2\">PWA Installation</h3>\n        <button\n          data-testid={T.pwa.installButton}\n          className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"\n          aria-label=\"Install PWA\"\n          onClick={() => {\n            // Call the mocked install function if available\n            if (safeInstallation.install) {\n              safeInstallation.install();\n            }\n          }}\n        >\n          Install PWA\n        </button>\n        <button\n          data-testid={T.pwa.syncButton}\n          className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 ml-2\"\n          aria-label=\"Sync offline data\"\n          onClick={() => {\n            // Call the mocked sync function if available\n            if (safeOffline.syncOfflineData) {\n              safeOffline.syncOfflineData();\n            }\n          }}\n        >\n          Sync Data\n        </button>\n        <button\n          data-testid={T.pwa.clearButton}\n          className=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 ml-2\"\n          aria-label=\"Clear offline data\"\n          onClick={() => {\n            // Call the mocked clear function if available\n            if (safeOffline.clearOfflineData) {\n              safeOffline.clearOfflineData();\n            }\n          }}\n        >\n          Clear Data\n        </button>\n      </div>\n\n      {/* Notification Controls */}\n        <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-gray-800 mb-2\">Notification Controls</h3>\n          <button\n            data-testid={T.pwa.requestPermissionButton}\n            className=\"bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600\"\n            onClick={() => {\n              // Call the mocked request permission function if available\n              if (safeNotifications.requestPermission) {\n                safeNotifications.requestPermission();\n              } else {\n                // Fallback to real API\n                if (typeof window !== 'undefined' && 'Notification' in window) {\n                  Notification.requestPermission();\n                }\n              }\n            }}\n          >\n            Request Permission\n          </button>\n          <button\n            data-testid={T.pwa.testNotificationButton}\n            className=\"bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 ml-2\"\n            onClick={() => {\n              // Call the mocked show notification function if available\n              if (safeNotifications.showNotification) {\n                safeNotifications.showNotification({\n                  title: 'Test Notification',\n                  body: 'This is a test notification',\n                  icon: '/icon-192x192.png'\n                });\n              } else {\n                // Fallback to real API\n                if (typeof window !== 'undefined' && 'Notification' in window && Notification.permission === 'granted') {\n                  new Notification('Test Notification', {\n                    body: 'This is a test notification',\n                    icon: '/icon-192x192.png'\n                  });\n                }\n              }\n            }}\n          >\n            Test Notification\n          </button>\n        </div>\n\n        {/* Notification Permission Component */}\n        <div data-testid={T.pwa.notificationPermission} className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-blue-800 mb-2\">Notification Permission</h3>\n          <p className=\"text-xs text-blue-700\">Manage notification permissions</p>\n        </div>\n\n        {/* Notification Preferences Component */}\n        <div data-testid={T.pwa.notificationPreferences} className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-green-800 mb-2\">Notification Preferences</h3>\n          <p className=\"text-xs text-green-700\">Customize your notification settings</p>\n        </div>\n\n      {/* Status Indicators */}\n      <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-gray-800 mb-2\">Status Indicators</h3>\n        <div data-testid={T.pwa.installingIndicator} className=\"text-blue-600\">\n          Installing...\n        </div>\n        <div data-testid={T.pwa.installedIndicator} className=\"text-green-600\">\n          PWA Installed\n        </div>\n      </div>\n\n      {/* Focusable Elements */}\n      <div data-testid={T.pwa.firstFocusable} tabIndex={0} className=\"focus:outline-none focus:ring-2 focus:ring-blue-500 p-2 border border-gray-300 rounded\">\n        First Focusable Element\n      </div>\n      <div data-testid={T.pwa.secondFocusable} tabIndex={0} className=\"focus:outline-none focus:ring-2 focus:ring-blue-500 p-2 border border-gray-300 rounded\">\n        Second Focusable Element\n      </div>\n\n      {/* Error States */}\n      <div data-testid={T.pwa.syncError} className=\"text-red-600 hidden\">\n        Sync failed\n      </div>\n      <div data-testid={T.pwa.installError} className=\"text-red-600 hidden\">\n        Installation failed\n      </div>\n\n      {/* State Announcements */}\n      <div data-testid={T.pwa.stateAnnouncement} className=\"sr-only\" aria-live=\"polite\">\n        State changed\n      </div>\n\n      {/* Regular User Notifications */}\n      <div data-testid=\"regular-user-notifications\" className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-blue-800 mb-2\">Regular User Notifications</h3>\n        <p className=\"text-xs text-blue-700\">Get notified about new polls and results</p>\n      </div>\n\n      {/* Admin User Notifications */}\n      <div data-testid=\"admin-user-notifications\" className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-purple-800 mb-2\">Admin User Notifications</h3>\n        <p className=\"text-xs text-purple-700\">Get notified about system updates and user reports</p>\n      </div>\n\n      {/* Mobile Notifications */}\n      <div data-testid=\"mobile-notifications\" className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-green-800 mb-2\">Mobile Notifications</h3>\n        <p className=\"text-xs text-green-700\">Optimized for mobile devices</p>\n      </div>\n\n      {/* Poll Management Integration */}\n      <div data-testid=\"poll-management-integration\" className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-orange-800 mb-2\">Poll Management</h3>\n        <p className=\"text-xs text-orange-700\">Manage polls offline and sync when online</p>\n      </div>\n\n      {/* Civics Integration */}\n      <div data-testid=\"civics-integration\" className=\"bg-indigo-50 border border-indigo-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-indigo-800 mb-2\">Civics Integration</h3>\n        <p className=\"text-xs text-indigo-700\">Access representative information offline</p>\n      </div>\n\n      {/* WebAuthn Integration */}\n      <div data-testid=\"webauthn-integration\" className=\"bg-teal-50 border border-teal-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-teal-800 mb-2\">WebAuthn Integration</h3>\n        <p className=\"text-xs text-teal-700\">Secure authentication with biometrics</p>\n      </div>\n\n      {/* Offline Notifications */}\n      {!isOnline && (\n        <div data-testid=\"offline-notifications\" className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-yellow-800 mb-2\">Offline Notifications</h3>\n          <p className=\"text-xs text-yellow-700\">Notifications will be delivered when you&apos;re back online</p>\n        </div>\n      )}\n\n      {/* Offline Message */}\n      {!isOnline && (\n        <div data-testid=\"offline-message\" className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-red-800 mb-2\">You&apos;re Offline</h3>\n          <p className=\"text-xs text-red-700\">Some features may not be available</p>\n        </div>\n      )}\n\n      {/* Authenticated Offline */}\n      {!isOnline && (\n        <div data-testid=\"authenticated-offline\" className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-gray-800 mb-2\">Authenticated Offline</h3>\n          <p className=\"text-xs text-gray-700\">You&apos;re logged in but offline</p>\n        </div>\n      )}\n\n      {/* Offline Profile */}\n      {!isOnline && (\n        <div data-testid=\"offline-profile\" className=\"bg-slate-50 border border-slate-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-slate-800 mb-2\">Offline Profile</h3>\n          <p className=\"text-xs text-slate-700\">Profile information cached for offline access</p>\n        </div>\n      )}\n\n      {/* Regular User Offline */}\n      {!isOnline && (\n        <div data-testid=\"regular-user-offline\" className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-blue-800 mb-2\">Regular User Offline</h3>\n          <p className=\"text-xs text-blue-700\">Basic offline functionality available</p>\n        </div>\n      )}\n\n      {/* Admin User Offline */}\n      {!isOnline && (\n        <div data-testid=\"admin-user-offline\" className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-purple-800 mb-2\">Admin User Offline</h3>\n          <p className=\"text-xs text-purple-700\">Admin features available offline</p>\n        </div>\n      )}\n\n      {/* Mobile Offline Indicator */}\n      {!isOnline && (\n        <div data-testid=\"mobile-offline-indicator\" className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-green-800 mb-2\">Mobile Offline</h3>\n          <p className=\"text-xs text-green-700\">Mobile-optimized offline experience</p>\n        </div>\n      )}\n\n      {/* Offline Poll Management */}\n      {!isOnline && (\n        <div data-testid=\"offline-poll-management\" className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-orange-800 mb-2\">Offline Poll Management</h3>\n          <p className=\"text-xs text-orange-700\">Manage polls without internet connection</p>\n        </div>\n      )}\n\n      {/* Offline Civics */}\n      {!isOnline && (\n        <div data-testid=\"offline-civics\" className=\"bg-indigo-50 border border-indigo-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-indigo-800 mb-2\">Offline Civics</h3>\n          <p className=\"text-xs text-indigo-700\">Access civic information offline</p>\n        </div>\n      )}\n\n      {/* WebAuthn Offline */}\n      {!isOnline && (\n        <div data-testid=\"webauthn-offline\" className=\"bg-teal-50 border border-teal-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-teal-800 mb-2\">WebAuthn Offline</h3>\n          <p className=\"text-xs text-teal-700\">Biometric authentication available offline</p>\n        </div>\n      )}\n\n      {/* Offline Voting Form */}\n      {!isOnline && (\n        <div data-testid=\"offline-voting-form\" className=\"bg-cyan-50 border border-cyan-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-cyan-800 mb-2\">Offline Voting Form</h3>\n          <p className=\"text-xs text-cyan-700\">Vote on polls without internet connection</p>\n        </div>\n      )}\n\n      {/* Offline Address Lookup */}\n      {!isOnline && (\n        <div data-testid=\"offline-address-lookup\" className=\"bg-pink-50 border border-pink-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-pink-800 mb-2\">Offline Address Lookup</h3>\n          <p className=\"text-xs text-pink-700\">Look up addresses without internet connection</p>\n        </div>\n      )}\n\n      {/* Offline Accountability */}\n      {!isOnline && (\n        <div data-testid=\"offline-accountability\" className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-amber-800 mb-2\">Offline Accountability</h3>\n          <p className=\"text-xs text-amber-700\">Track candidate accountability offline</p>\n        </div>\n      )}\n\n      {/* Offline Login */}\n      {!isOnline && (\n        <div data-testid=\"offline-login\" className=\"bg-violet-50 border border-violet-200 rounded-lg p-4\">\n          <h3 className=\"text-sm font-medium text-violet-800 mb-2\">Offline Login</h3>\n          <p className=\"text-xs text-violet-700\">Login functionality available offline</p>\n        </div>\n      )}\n\n      {/* Poll Created Notification */}\n      <div data-testid=\"poll-created-notification\" className=\"bg-emerald-50 border border-emerald-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-emerald-800 mb-2\">Poll Created</h3>\n        <p className=\"text-xs text-emerald-700\">New poll has been created</p>\n      </div>\n\n      {/* Civics Notifications */}\n      <div data-testid=\"civics-notifications\" className=\"bg-rose-50 border border-rose-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-rose-800 mb-2\">Civics Notifications</h3>\n        <p className=\"text-xs text-rose-700\">Get notified about civic updates</p>\n      </div>\n\n      {/* Offline WebAuthn Components */}\n      <div data-testid=\"offline-webauthn-components\" className=\"bg-sky-50 border border-sky-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-sky-800 mb-2\">Offline WebAuthn Components</h3>\n        <p className=\"text-xs text-sky-700\">WebAuthn components available offline</p>\n      </div>\n\n      {/* PWA Accountability Component */}\n      <div data-testid=\"pwa-accountability\" className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n        <h3 className=\"text-sm font-medium text-purple-800 mb-2\">PWA Accountability</h3>\n        <p className=\"text-xs text-purple-700\">Candidate accountability features with PWA integration</p>\n      </div>\n\n    </div>\n  )\n}\n"],"names":["PWAFeatures","className","showDetails","installation","usePWAInstallation","offline","usePWAOffline","_notifications","usePWANotifications","_loading","usePWALoading","_error","usePWAError","isOnline","setIsOnline","useState","useEffect","window","navigator","onLine","handleOnline","handleOffline","addEventListener","removeEventListener","safeInstallation","canInstall","isInstalled","safeOffline","offlineData","cachedPages","queuedActions","safeNotifications","notifications","requestPermission","jest","fn","showNotification","div","data-testid","OfflineIndicator","length","OfflineVoting","pollId","OfflineQueue","OfflineSync","NotificationPermission","NotificationPreferences","h3","button","T","pwa","installButton","aria-label","onClick","install","syncButton","syncOfflineData","clearButton","clearOfflineData","requestPermissionButton","Notification","testNotificationButton","title","body","icon","permission","notificationPermission","p","notificationPreferences","installingIndicator","installedIndicator","firstFocusable","tabIndex","secondFocusable","syncError","installError","stateAnnouncement","aria-live"],"mappings":"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"}