34bea70b5018e73cf1e97b41d562f5dd
/**
 * Debug Polls API Test
 * 
 * This test helps debug why the polls API is returning 500 errors.
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _server = require("next/server");
const _route = require("../../../../app/api/polls/route");
(0, _globals.describe)("Debug Polls API", ()=>{
    (0, _globals.it)("should debug the polls API error", async ()=>{
        console.log("Environment variables:");
        console.log("NEXT_PUBLIC_SUPABASE_URL:", process.env.NEXT_PUBLIC_SUPABASE_URL);
        console.log("NEXT_PUBLIC_SUPABASE_ANON_KEY:", process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);
        console.log("SUPABASE_SECRET_KEY:", process.env.SUPABASE_SECRET_KEY);
        const request = new _server.NextRequest("http://localhost:3000/api/polls");
        try {
            const response = await (0, _route.GET)(request);
            const responseData = await response.json();
            console.log("Response status:", response.status);
            console.log("Response data:", responseData);
            // For now, just log the response to debug
            (0, _globals.expect)(response.status).toBeDefined();
        } catch (error) {
            console.log("Error caught:", error);
            throw error;
        }
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvYXBpL2RlYnVnLXBvbGxzLWFwaS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGVidWcgUG9sbHMgQVBJIFRlc3RcbiAqIFxuICogVGhpcyB0ZXN0IGhlbHBzIGRlYnVnIHdoeSB0aGUgcG9sbHMgQVBJIGlzIHJldHVybmluZyA1MDAgZXJyb3JzLlxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEdFVCB9IGZyb20gJ0AvYXBwL2FwaS9wb2xscy9yb3V0ZSc7XG5cbmRlc2NyaWJlKCdEZWJ1ZyBQb2xscyBBUEknLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgZGVidWcgdGhlIHBvbGxzIEFQSSBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnRW52aXJvbm1lbnQgdmFyaWFibGVzOicpO1xuICAgIGNvbnNvbGUubG9nKCdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkw6JywgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMKTtcbiAgICBjb25zb2xlLmxvZygnTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk6JywgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkpO1xuICAgIGNvbnNvbGUubG9nKCdTVVBBQkFTRV9TRUNSRVRfS0VZOicsIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFQ1JFVF9LRVkpO1xuICAgIFxuICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvcG9sbHMnKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBHRVQocmVxdWVzdCk7XG4gICAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSBkYXRhOicsIHJlc3BvbnNlRGF0YSk7XG4gICAgICBcbiAgICAgIC8vIEZvciBub3csIGp1c3QgbG9nIHRoZSByZXNwb25zZSB0byBkZWJ1Z1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGNhdWdodDonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiZGVzY3JpYmUiLCJpdCIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJTVVBBQkFTRV9TRUNSRVRfS0VZIiwicmVxdWVzdCIsIk5leHRSZXF1ZXN0IiwicmVzcG9uc2UiLCJHRVQiLCJyZXNwb25zZURhdGEiLCJqc29uIiwic3RhdHVzIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Q0FJQzs7Ozt5QkFFb0M7d0JBQ1Q7dUJBQ1I7QUFFcEJBLElBQUFBLGlCQUFRLEVBQUMsbUJBQW1CO0lBQzFCQyxJQUFBQSxXQUFFLEVBQUMsb0NBQW9DO1FBQ3JDQyxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QkMsUUFBUUMsR0FBRyxDQUFDQyx3QkFBd0I7UUFDN0VKLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0NDLFFBQVFDLEdBQUcsQ0FBQ0UsNkJBQTZCO1FBQ3ZGTCxRQUFRQyxHQUFHLENBQUMsd0JBQXdCQyxRQUFRQyxHQUFHLENBQUNHLG1CQUFtQjtRQUVuRSxNQUFNQyxVQUFVLElBQUlDLG1CQUFXLENBQUM7UUFFaEMsSUFBSTtZQUNGLE1BQU1DLFdBQVcsTUFBTUMsSUFBQUEsVUFBRyxFQUFDSDtZQUMzQixNQUFNSSxlQUFlLE1BQU1GLFNBQVNHLElBQUk7WUFFeENaLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JRLFNBQVNJLE1BQU07WUFDL0NiLFFBQVFDLEdBQUcsQ0FBQyxrQkFBa0JVO1lBRTlCLDBDQUEwQztZQUMxQ0csSUFBQUEsZUFBTSxFQUFDTCxTQUFTSSxNQUFNLEVBQUVFLFdBQVc7UUFDckMsRUFBRSxPQUFPQyxPQUFPO1lBQ2RoQixRQUFRQyxHQUFHLENBQUMsaUJBQWlCZTtZQUM3QixNQUFNQTtRQUNSO0lBQ0Y7QUFDRiJ9