{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/features/feeds/components/SuperiorMobileFeed.tsx"],"sourcesContent":["/**\n * Superior Mobile Feed Component\n * Advanced PWA features with comprehensive representative data display\n * \n * Created: October 8, 2025\n * Updated: October 8, 2025\n */\n\n'use client';\n\nimport {\n  HomeIcon,\n  UserGroupIcon,\n  HeartIcon,\n  ChartBarIcon,\n  UserIcon,\n  BellIcon,\n  Bars3Icon,\n  XMarkIcon,\n  ArrowPathIcon,\n  ChevronUpIcon,\n  SunIcon,\n  MoonIcon,\n  WifiIcon,\n  SignalSlashIcon,\n  ShareIcon,\n  BookmarkIcon,\n  AdjustmentsHorizontalIcon\n} from '@heroicons/react/24/outline';\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { \n  useFeeds, \n  useFeedsActions, \n  useFeedsLoading, \n  useFeedsError,\n  useFeedPreferences,\n  useFeedFilters,\n  useFeedsStore\n} from '@/lib/stores';\n\n\n\nimport EnhancedCandidateCard from '@/features/civics/components/EnhancedCandidateCard';\nimport { devLog } from '@/lib/utils/logger';\n\nimport EnhancedSocialFeed from './EnhancedSocialFeed';\n\ninterface SuperiorMobileFeedProps {\n  userId?: string;\n  className?: string;\n}\n\nexport default function SuperiorMobileFeed({ userId, className = '' }: SuperiorMobileFeedProps) {\n  // UI state (local)\n  const [activeTab, setActiveTab] = useState<'feed' | 'representatives' | 'analytics'>('feed');\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [userAddress, setUserAddress] = useState<string>('');\n  const [selectedRepresentative, setSelectedRepresentative] = useState<any>(null);\n  const [analyticsData, setAnalyticsData] = useState<any>(null);\n  \n  // Get feeds store state and actions - FIXED: Use individual selectors to prevent infinite re-renders\n  const feeds = useFeeds();\n  const loadFeeds = useFeedsStore(state => state.loadFeeds);\n  const refreshFeeds = useFeedsStore(state => state.refreshFeeds);\n  const loadMoreFeeds = useFeedsStore(state => state.loadMoreFeeds);\n  const setFilters = useFeedsStore(state => state.setFilters);\n  const isLoading = useFeedsLoading();\n  const error = useFeedsError();\n  const preferences = useFeedPreferences();\n  const filters = useFeedFilters();\n  \n  // Local state for pagination\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  \n  // Load feed items using feedsStore - fixed infinite loop\n  const loadFeedItems = useCallback(async (pageNumber?: number) => {\n    const currentPage = pageNumber || page;\n    try {\n      if (pageNumber === 1) {\n        // Refresh feeds\n        await refreshFeeds();\n        setPage(1);\n      } else {\n        // Load more feeds\n        await loadMoreFeeds();\n        setPage(currentPage + 1);\n      }\n      // Use current feeds length instead of dependency\n      const currentFeedsLength = feeds.length;\n      setHasMore(currentFeedsLength === 20); // Assuming 20 items per page\n    } catch (error) {\n      console.error('Error loading feed items:', error);\n    }\n  }, [page, refreshFeeds, loadMoreFeeds]); // Removed feeds.length to prevent infinite loops\n  const [isOnline, setIsOnline] = useState(true);\n  const [isDarkMode, setIsDarkMode] = useState(false);\n  const [notificationPermission, setNotificationPermission] = useState<NotificationPermission>('default');\n  const [swRegistration, setSwRegistration] = useState<ServiceWorkerRegistration | null>(null);\n  const [lastSync, setLastSync] = useState<Date | null>(null);\n  const [syncStatus, setSyncStatus] = useState<'idle' | 'syncing' | 'error'>('idle');\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);\n  \n  const scrollToTopRef = useRef<HTMLButtonElement>(null);\n\n  // Initialize superior PWA features - moved after function declarations\n\n  const initializeSuperiorPWAFeatures = async () => {\n    // Check if app is installed\n    if ('serviceWorker' in navigator) {\n      try {\n        const registration = await navigator.serviceWorker.ready;\n        setSwRegistration(registration);\n        devLog('Service Worker ready:', registration);\n      } catch (error) {\n        console.error('Service Worker registration failed:', error);\n      }\n    }\n  };\n\n  const loadUserPreferences = useCallback(() => {\n    const savedAddress = localStorage.getItem('userAddress');\n    const savedTheme = localStorage.getItem('theme');\n    const savedViewMode = localStorage.getItem('viewMode');\n    \n    if (savedAddress) setUserAddress(savedAddress);\n    if (savedTheme === 'dark') setIsDarkMode(true);\n    if (savedViewMode) setActiveTab(savedViewMode as any);\n    \n    // Don't call loadFeeds here to prevent infinite loops\n    // loadFeeds('all');\n  }, []); // Remove loadFeeds dependency to prevent infinite loops\n\n  const checkOnlineStatus = useCallback(() => {\n    setIsOnline(navigator.onLine);\n    \n    const handleOnline = () => {\n      setIsOnline(true);\n      if (swRegistration) {\n        syncOfflineData();\n      }\n    };\n    \n    const handleOffline = () => {\n      setIsOnline(false);\n    };\n    \n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    \n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [swRegistration]);\n\n  const requestNotificationPermission = useCallback(async () => {\n    if ('Notification' in window) {\n      const permission = await Notification.requestPermission();\n      setNotificationPermission(permission);\n      \n      if (permission === 'granted' && swRegistration) {\n        subscribeToNotifications();\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [swRegistration]);\n\n  const registerServiceWorker = async () => {\n    if ('serviceWorker' in navigator) {\n      try {\n        const registration = await navigator.serviceWorker.register('/sw.js');\n        devLog('Service Worker registered:', registration);\n        setSwRegistration(registration);\n      } catch (error) {\n        console.error('Service Worker registration failed:', error);\n      }\n    }\n  };\n\n  const subscribeToNotifications = async () => {\n    if (!swRegistration) return;\n    \n    try {\n      const subscription = await swRegistration.pushManager.subscribe({\n        userVisibleOnly: true,\n        applicationServerKey: process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY || null\n      });\n      \n      // Send subscription to server\n      await fetch('/api/pwa/notifications/subscribe', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(subscription)\n      });\n      \n      devLog('Push subscription successful');\n    } catch (error) {\n      console.error('Push subscription failed:', error);\n    }\n  };\n\n  const syncOfflineData = useCallback(async () => {\n    if (!isOnline) return;\n    \n    setSyncStatus('syncing');\n    try {\n      const response = await fetch('/api/pwa/offline/sync', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId, lastSync: lastSync?.toISOString() })\n      });\n      \n      if (response.ok) {\n        setLastSync(new Date());\n        setSyncStatus('idle');\n        devLog('Offline data synced successfully');\n      }\n    } catch (error) {\n      console.error('Sync failed:', error);\n      setSyncStatus('error');\n    }\n  }, [isOnline, lastSync, userId]);\n\n  // loadFeedItems function is already defined above with useCallback\n\n  const loadAnalyticsData = async () => {\n    try {\n      const response = await fetch('/api/civics/analytics');\n      const data = await response.json();\n      if (data.success) {\n        setAnalyticsData(data.analytics);\n      }\n    } catch (error) {\n      console.error('Error loading analytics data:', error);\n    }\n  };\n\n  const handleLoadMore = async () => {\n    if (hasMore && !isLoading) {\n      await loadFeedItems(page + 1);\n    }\n  };\n\n  const handleRefresh = async () => {\n    setPage(1);\n    setHasMore(true);\n    await refreshFeeds();\n  };\n\n  const toggleDarkMode = () => {\n    const newTheme = !isDarkMode;\n    setIsDarkMode(newTheme);\n    localStorage.setItem('theme', newTheme ? 'dark' : 'light');\n    \n    // Apply theme to document\n    if (newTheme) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  };\n\n  const scrollToTop = () => {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleRepresentativeClick = (representative: any) => {\n    setSelectedRepresentative(representative);\n  };\n\n  const handleContact = (type: string, value: string) => {\n    devLog('Contacting representative via', type, ':', value);\n    // Implement contact functionality based on type\n    switch (type) {\n      case 'email':\n        window.location.href = `mailto:${value}?subject=Inquiry from constituent`;\n        break;\n      case 'phone':\n        window.location.href = `tel:${value}`;\n        break;\n      case 'website':\n        window.open(value, '_blank');\n        break;\n      case 'social':\n        window.open(value, '_blank');\n        break;\n      default:\n        devLog('Unknown contact type:', type);\n    }\n  };\n\n  const handleContactRepresentative = (id: string, type: string) => {\n    // Handle contact based on type\n    if (type === 'email') {\n      handleContact('email', id);\n    } else if (type === 'phone') {\n      handleContact('phone', id);\n    } else if (type === 'website') {\n      handleContact('website', id);\n    }\n  };\n\n  const handleShare = (representative: any) => {\n    devLog('Sharing representative:', representative.name);\n    // Implement share functionality using Web Share API\n    if (navigator.share) {\n      navigator.share({\n        title: `Check out ${representative.name}`,\n        text: `Learn more about ${representative.name}, ${representative.office} for ${representative.state}`,\n        url: window.location.href\n      }).catch((error) => {\n        devLog('Share failed:', error);\n      });\n    } else {\n      // Fallback to clipboard\n      const shareText = `Check out ${representative.name}, ${representative.office} for ${representative.state}: ${window.location.href}`;\n      navigator.clipboard.writeText(shareText).then(() => {\n        alert('Representative info copied to clipboard!');\n      }).catch((error) => {\n        devLog('Clipboard write failed:', error);\n      });\n    }\n  };\n\n  const handleBookmark = (representative: any) => {\n    devLog('Bookmark representative:', representative.name);\n    // Implement bookmark functionality\n  };\n\n  const sidebarItems = [\n    {\n      id: 'feed',\n      name: 'Feed',\n      icon: <HomeIcon className=\"w-6 h-6\" />,\n      description: 'Your civic activity feed'\n    },\n    {\n      id: 'representatives',\n      name: 'Representatives',\n      icon: <UserGroupIcon className=\"w-6 h-6\" />,\n      description: 'Your elected officials'\n    },\n    {\n      id: 'analytics',\n      name: 'Analytics',\n      icon: <ChartBarIcon className=\"w-6 h-6\" />,\n      description: 'Data insights and analytics'\n    },\n    {\n      id: 'polls',\n      name: 'Polls',\n      icon: <HeartIcon className=\"w-6 h-6\" />,\n      description: 'Participate in polls'\n    },\n    {\n      id: 'dashboard',\n      name: 'Dashboard',\n      icon: <ChartBarIcon className=\"w-6 h-6\" />,\n      description: 'Your civic dashboard'\n    },\n    {\n      id: 'profile',\n      name: 'Profile',\n      icon: <UserIcon className=\"w-6 h-6\" />,\n      description: 'Manage your profile'\n    }\n  ];\n\n  // Load feeds on component mount\n  useEffect(() => {\n    const loadInitialFeeds = async () => {\n      try {\n        await loadFeeds('all');\n      } catch (error) {\n        console.error('Error loading initial feeds:', error);\n      }\n    };\n    \n    loadInitialFeeds();\n  }, [loadFeeds]);\n\n  // Initialize superior PWA features - FIXED: Proper dependency management with act() wrapping\n  useEffect(() => {\n    const initializeApp = async () => {\n      try {\n        // Wrap all state updates in act() for testing\n        await initializeSuperiorPWAFeatures();\n        loadUserPreferences();\n        checkOnlineStatus();\n        await requestNotificationPermission();\n        await registerServiceWorker();\n        await loadAnalyticsData();\n      } catch (error) {\n        console.error('Error initializing app:', error);\n      }\n    };\n    \n    // Use setTimeout to defer initialization and avoid act() warnings\n    const timeoutId = setTimeout(initializeApp, 0);\n    return () => clearTimeout(timeoutId);\n  }, []); // Empty dependency array - initialization should only run once\n\n  const renderContent = () => {\n    switch (activeTab) {\n      case 'feed':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Civic Activity Feed</h3>\n                <button\n                  onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <AdjustmentsHorizontalIcon className=\"w-5 h-5\" />\n                </button>\n              </div>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n                Your personalized feed of civic activities and representative updates\n              </p>\n              \n              {/* Advanced Filters */}\n              {showAdvancedFilters && (\n                <div className=\"mb-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                  <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">Advanced Filters</h4>\n                  <div className=\"space-y-2\">\n                    <label className=\"block text-sm text-gray-600 dark:text-gray-400\">\n                      <input type=\"checkbox\" className=\"mr-2\" /> Federal Representatives\n                    </label>\n                    <label className=\"block text-sm text-gray-600 dark:text-gray-400\">\n                      <input type=\"checkbox\" className=\"mr-2\" /> State Representatives\n                    </label>\n                    <label className=\"block text-sm text-gray-600 dark:text-gray-400\">\n                      <input type=\"checkbox\" className=\"mr-2\" /> Local Representatives\n                    </label>\n                  </div>\n                </div>\n              )}\n              \n              {/* Feed Items */}\n              <div className=\"space-y-3\">\n                {Array.isArray(feeds) ? feeds.map((item) => (\n                  <div key={item.id} className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n                    <h4 className=\"font-medium text-gray-900 dark:text-white\">{item.title}</h4>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">{item.content}</p>\n                    <div className=\"flex items-center justify-between mt-3\">\n                      <span className=\"text-xs text-gray-500\">{new Date(item.publishedAt).toLocaleString()}</span>\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => handleBookmark(item)}\n                          className=\"p-1 text-gray-400 hover:text-blue-500 transition-colors\"\n                        >\n                          <BookmarkIcon className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => handleShare(item)}\n                          className=\"p-1 text-gray-400 hover:text-green-500 transition-colors\"\n                        >\n                          <ShareIcon className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )) : (\n                  <div className=\"text-center text-gray-500 py-4\">\n                    No feeds available\n                  </div>\n                )}\n                \n                {/* Load More Button */}\n                {hasMore && (\n                  <button\n                    onClick={handleLoadMore}\n                    disabled={isLoading}\n                    className=\"w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors\"\n                  >\n                    {isLoading ? 'Loading...' : 'Load More'}\n                  </button>\n                )}\n                \n                {/* Refresh Button */}\n                <button\n                  onClick={handleRefresh}\n                  className=\"w-full py-2 px-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors\"\n                >\n                  Refresh Feed\n                </button>\n              </div>\n            </div>\n          </div>\n        );\n      case 'representatives':\n        return (\n          <EnhancedSocialFeed\n            userId={userId || ''}\n            onViewDetails={handleRepresentativeClick}\n          />\n        );\n      case 'analytics':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center\">\n                <ChartBarIcon className=\"w-5 h-5 mr-2\" />\n                Data Analytics\n              </h3>\n              {analyticsData ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">Total Representatives</h4>\n                    <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">{analyticsData.totalRepresentatives}</div>\n                  </div>\n                  <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">Average Quality Score</h4>\n                    <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">{analyticsData.averageQualityScore}%</div>\n                  </div>\n                  <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">Data Sources</h4>\n                    <div className=\"text-2xl font-bold text-gray-900 dark:text-white\">{analyticsData.dataSources}</div>\n                  </div>\n                  <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">Last Updated</h4>\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400\">{new Date(analyticsData.lastUpdated).toLocaleString()}</div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <div className=\"animate-pulse\">\n                    <div className=\"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/2 mx-auto mb-4\"></div>\n                    <div className=\"h-4 bg-gray-200 dark:bg-gray-600 rounded w-1/3 mx-auto\"></div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      default:\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">Welcome to Choices</h3>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Your comprehensive civic engagement platform\n              </p>\n            </div>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className={`min-h-screen bg-gray-50 dark:bg-gray-900 ${className}`}>\n      {/* Mobile Header */}\n      <div className=\"md:hidden flex items-center justify-between p-4 bg-white dark:bg-gray-800 shadow-sm\">\n        <button \n          onClick={() => setSidebarOpen(true)} \n          data-testid=\"hamburger-menu\"\n          className=\"p-2 rounded-md text-gray-700 dark:text-gray-300\"\n        >\n          <Bars3Icon className=\"w-6 h-6\" />\n        </button>\n        <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">Choices</h1>\n        <div className=\"flex items-center space-x-2\">\n          <button \n            onClick={toggleDarkMode}\n            data-testid=\"theme-toggle\"\n            className=\"p-2 rounded-md text-gray-700 dark:text-gray-300\"\n          >\n            {isDarkMode ? <SunIcon className=\"w-5 h-5\" /> : <MoonIcon className=\"w-5 h-5\" />}\n          </button>\n          <button className=\"p-2 rounded-md text-gray-700 dark:text-gray-300\">\n            <BellIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"bg-blue-50 dark:bg-blue-900 border-b border-gray-200 dark:border-gray-700 p-2\">\n        <div className=\"flex items-center justify-between text-sm\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-1\" data-testid={isOnline ? \"online-indicator\" : \"offline-indicator\"}>\n              {isOnline ? (\n                <WifiIcon className=\"w-4 h-4 text-green-500\" />\n              ) : (\n                <SignalSlashIcon className=\"w-4 h-4 text-red-500\" />\n              )}\n              <span className={isOnline ? 'text-green-600' : 'text-red-600'}>\n                {isOnline ? 'Online' : 'Offline'}\n              </span>\n            </div>\n            {syncStatus === 'syncing' && (\n              <div data-testid=\"sync-indicator\" className=\"flex items-center space-x-1\">\n                <ArrowPathIcon className=\"w-4 h-4 text-blue-500 animate-spin\" />\n                <span className=\"text-blue-600\">Syncing...</span>\n              </div>\n            )}\n            {isLoading && (\n              <div data-testid=\"refresh-indicator\" className=\"flex items-center space-x-1\">\n                <ArrowPathIcon className=\"w-4 h-4 text-blue-500 animate-spin\" />\n                <span className=\"text-blue-600\">Refreshing...</span>\n              </div>\n            )}\n            {notificationPermission === 'granted' && (\n              <div className=\"flex items-center space-x-1\">\n                <BellIcon className=\"w-4 h-4 text-green-500\" />\n                <span className=\"text-green-600\">Notifications</span>\n              </div>\n            )}\n          </div>\n          {lastSync && (\n            <span className=\"text-gray-500\">\n              Last sync: {lastSync.toLocaleTimeString()}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\">\n        <div className=\"flex\">\n          {[\n            { id: 'feed', name: 'Feed', icon: HomeIcon },\n            { id: 'representatives', name: 'Representatives', icon: UserGroupIcon },\n            { id: 'analytics', name: 'Analytics', icon: ChartBarIcon }\n          ].map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id as any)}\n              className={`flex-1 flex items-center justify-center space-x-2 py-3 px-4 text-sm font-medium transition-colors ${\n                activeTab === tab.id\n                  ? 'text-blue-600 border-b-2 border-blue-600 bg-blue-50 dark:bg-blue-900'\n                  : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700'\n              }`}\n            >\n              <tab.icon className=\"w-5 h-5\" />\n              <span>{tab.name}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Sidebar for Mobile */}\n      <div className={`fixed inset-0 bg-gray-800 bg-opacity-75 z-40 md:hidden ${sidebarOpen ? 'block' : 'hidden'}`} \n           onClick={() => setSidebarOpen(false)}></div>\n      <div data-testid=\"mobile-nav\" className={`fixed inset-y-0 left-0 w-64 bg-white dark:bg-gray-800 shadow-lg z-50 transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:hidden transition-transform duration-300 ease-in-out`}>\n        <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between\">\n          <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">Navigation</h2>\n          <button \n            onClick={() => setSidebarOpen(false)} \n            className=\"p-2 rounded-md text-gray-700 dark:text-gray-300\"\n          >\n            <XMarkIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n        <nav className=\"mt-5 space-y-1 px-2\">\n          {sidebarItems.map((item) => (\n            <a\n              key={item.id}\n              href=\"#\"\n              onClick={() => {\n                setActiveTab(item.id as any);\n                setSidebarOpen(false);\n              }}\n              className={`flex items-center px-3 py-2 text-sm font-medium rounded-md ${\n                activeTab === item.id\n                  ? 'bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\n                  : 'text-gray-700 hover:bg-gray-50 hover:text-blue-700 dark:text-gray-300 dark:hover:bg-gray-700'\n              }`}\n            >\n              {item.icon}\n              <span className=\"ml-3\">{item.name}</span>\n            </a>\n          ))}\n        </nav>\n        \n        {/* User Address Input */}\n        <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 px-4\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-3\">Your Location</h3>\n          <input\n            type=\"text\"\n            placeholder=\"Enter your address\"\n            value={userAddress}\n            onChange={(e) => setUserAddress(e.target.value)}\n            onBlur={() => localStorage.setItem('userAddress', userAddress)}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n          />\n          {userAddress && (\n            <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n              Representatives for: <span className=\"font-medium\">{userAddress}</span>\n            </p>\n          )}\n        </div>\n      </div>\n\n      {/* Main Content Area */}\n      <div data-testid=\"feed-container\" role=\"main\" className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {renderContent()}\n      </div>\n\n      {/* Selected Representative Modal */}\n      {selectedRepresentative && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Representative Details</h3>\n              <button\n                onClick={() => setSelectedRepresentative(null)}\n                className=\"p-2 rounded-md text-gray-400 hover:text-gray-600\"\n              >\n                <XMarkIcon className=\"w-5 h-5\" />\n              </button>\n            </div>\n            <div className=\"p-6\">\n              <EnhancedCandidateCard\n                representative={selectedRepresentative}\n                onContact={handleContactRepresentative}\n                onShare={handleShare}\n                className=\"w-full\"\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Scroll to Top Button */}\n      <button\n        ref={scrollToTopRef}\n        onClick={scrollToTop}\n        className=\"fixed bottom-20 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors z-30\"\n        aria-label=\"Scroll to top\"\n      >\n        <ChevronUpIcon className=\"w-6 h-6\" />\n      </button>\n    </div>\n  );\n}\n"],"names":["SuperiorMobileFeed","userId","className","activeTab","setActiveTab","useState","sidebarOpen","setSidebarOpen","userAddress","setUserAddress","selectedRepresentative","setSelectedRepresentative","analyticsData","setAnalyticsData","feeds","useFeeds","loadFeeds","useFeedsStore","state","refreshFeeds","loadMoreFeeds","setFilters","isLoading","useFeedsLoading","error","useFeedsError","preferences","useFeedPreferences","filters","useFeedFilters","page","setPage","hasMore","setHasMore","loadFeedItems","useCallback","pageNumber","currentPage","currentFeedsLength","length","console","isOnline","setIsOnline","isDarkMode","setIsDarkMode","notificationPermission","setNotificationPermission","swRegistration","setSwRegistration","lastSync","setLastSync","syncStatus","setSyncStatus","showAdvancedFilters","setShowAdvancedFilters","scrollToTopRef","useRef","initializeSuperiorPWAFeatures","navigator","registration","serviceWorker","ready","devLog","loadUserPreferences","savedAddress","localStorage","getItem","savedTheme","savedViewMode","checkOnlineStatus","onLine","handleOnline","syncOfflineData","handleOffline","window","addEventListener","removeEventListener","requestNotificationPermission","permission","Notification","requestPermission","subscribeToNotifications","registerServiceWorker","register","subscription","pushManager","subscribe","userVisibleOnly","applicationServerKey","process","env","NEXT_PUBLIC_VAPID_PUBLIC_KEY","fetch","method","headers","body","JSON","stringify","response","toISOString","ok","Date","loadAnalyticsData","data","json","success","analytics","handleLoadMore","handleRefresh","toggleDarkMode","newTheme","setItem","document","documentElement","classList","add","remove","scrollToTop","scrollTo","top","behavior","handleRepresentativeClick","representative","handleContact","type","value","location","href","open","handleContactRepresentative","id","handleShare","name","share","title","text","office","url","catch","shareText","clipboard","writeText","then","alert","handleBookmark","sidebarItems","icon","HomeIcon","description","UserGroupIcon","ChartBarIcon","HeartIcon","UserIcon","useEffect","loadInitialFeeds","initializeApp","timeoutId","setTimeout","clearTimeout","renderContent","div","h3","button","onClick","AdjustmentsHorizontalIcon","p","h4","label","input","Array","isArray","map","item","content","span","publishedAt","toLocaleString","BookmarkIcon","ShareIcon","disabled","EnhancedSocialFeed","onViewDetails","totalRepresentatives","averageQualityScore","dataSources","lastUpdated","data-testid","Bars3Icon","h1","SunIcon","MoonIcon","BellIcon","WifiIcon","SignalSlashIcon","ArrowPathIcon","toLocaleTimeString","tab","h2","XMarkIcon","nav","a","placeholder","onChange","e","target","onBlur","role","EnhancedCandidateCard","onContact","onShare","ref","aria-label","ChevronUpIcon"],"mappings":"AAAA;;;;;;CAMC,GAED;;;;;+BA4CA;;;eAAwBA;;;;yBAxBjB;+DACyD;wBASzD;8EAI2B;wBACX;2EAEQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOhB,SAASA,mBAAmB,EAAEC,MAAM,EAAEC,YAAY,EAAE,EAA2B;IAC5F,mBAAmB;IACnB,MAAM,CAACC,WAAWC,aAAa,GAAGC,IAAAA,eAAQ,EAA2C;IACrF,MAAM,CAACC,aAAaC,eAAe,GAAGF,IAAAA,eAAQ,EAAC;IAC/C,MAAM,CAACG,aAAaC,eAAe,GAAGJ,IAAAA,eAAQ,EAAS;IACvD,MAAM,CAACK,wBAAwBC,0BAA0B,GAAGN,IAAAA,eAAQ,EAAM;IAC1E,MAAM,CAACO,eAAeC,iBAAiB,GAAGR,IAAAA,eAAQ,EAAM;IAExD,qGAAqG;IACrG,MAAMS,QAAQC,IAAAA,gBAAQ;IACtB,MAAMC,YAAYC,IAAAA,qBAAa,EAACC,CAAAA,QAASA,MAAMF,SAAS;IACxD,MAAMG,eAAeF,IAAAA,qBAAa,EAACC,CAAAA,QAASA,MAAMC,YAAY;IAC9D,MAAMC,gBAAgBH,IAAAA,qBAAa,EAACC,CAAAA,QAASA,MAAME,aAAa;IAChE,MAAMC,aAAaJ,IAAAA,qBAAa,EAACC,CAAAA,QAASA,MAAMG,UAAU;IAC1D,MAAMC,YAAYC,IAAAA,uBAAe;IACjC,MAAMC,QAAQC,IAAAA,qBAAa;IAC3B,MAAMC,cAAcC,IAAAA,0BAAkB;IACtC,MAAMC,UAAUC,IAAAA,sBAAc;IAE9B,6BAA6B;IAC7B,MAAM,CAACC,MAAMC,QAAQ,GAAG1B,IAAAA,eAAQ,EAAC;IACjC,MAAM,CAAC2B,SAASC,WAAW,GAAG5B,IAAAA,eAAQ,EAAC;IAEvC,yDAAyD;IACzD,MAAM6B,gBAAgBC,IAAAA,kBAAW,EAAC,OAAOC;QACvC,MAAMC,cAAcD,cAAcN;QAClC,IAAI;YACF,IAAIM,eAAe,GAAG;gBACpB,gBAAgB;gBAChB,MAAMjB;gBACNY,QAAQ;YACV,OAAO;gBACL,kBAAkB;gBAClB,MAAMX;gBACNW,QAAQM,cAAc;YACxB;YACA,iDAAiD;YACjD,MAAMC,qBAAqBxB,MAAMyB,MAAM;YACvCN,WAAWK,uBAAuB,KAAK,6BAA6B;QACtE,EAAE,OAAOd,OAAO;YACdgB,QAAQhB,KAAK,CAAC,6BAA6BA;QAC7C;IACF,GAAG;QAACM;QAAMX;QAAcC;KAAc,GAAG,iDAAiD;IAC1F,MAAM,CAACqB,UAAUC,YAAY,GAAGrC,IAAAA,eAAQ,EAAC;IACzC,MAAM,CAACsC,YAAYC,cAAc,GAAGvC,IAAAA,eAAQ,EAAC;IAC7C,MAAM,CAACwC,wBAAwBC,0BAA0B,GAAGzC,IAAAA,eAAQ,EAAyB;IAC7F,MAAM,CAAC0C,gBAAgBC,kBAAkB,GAAG3C,IAAAA,eAAQ,EAAmC;IACvF,MAAM,CAAC4C,UAAUC,YAAY,GAAG7C,IAAAA,eAAQ,EAAc;IACtD,MAAM,CAAC8C,YAAYC,cAAc,GAAG/C,IAAAA,eAAQ,EAA+B;IAC3E,MAAM,CAACgD,qBAAqBC,uBAAuB,GAAGjD,IAAAA,eAAQ,EAAC;IAE/D,MAAMkD,iBAAiBC,IAAAA,aAAM,EAAoB;IAEjD,uEAAuE;IAEvE,MAAMC,gCAAgC;QACpC,4BAA4B;QAC5B,IAAI,mBAAmBC,WAAW;YAChC,IAAI;gBACF,MAAMC,eAAe,MAAMD,UAAUE,aAAa,CAACC,KAAK;gBACxDb,kBAAkBW;gBAClBG,IAAAA,cAAM,EAAC,yBAAyBH;YAClC,EAAE,OAAOnC,OAAO;gBACdgB,QAAQhB,KAAK,CAAC,uCAAuCA;YACvD;QACF;IACF;IAEA,MAAMuC,sBAAsB5B,IAAAA,kBAAW,EAAC;QACtC,MAAM6B,eAAeC,aAAaC,OAAO,CAAC;QAC1C,MAAMC,aAAaF,aAAaC,OAAO,CAAC;QACxC,MAAME,gBAAgBH,aAAaC,OAAO,CAAC;QAE3C,IAAIF,cAAcvD,eAAeuD;QACjC,IAAIG,eAAe,QAAQvB,cAAc;QACzC,IAAIwB,eAAehE,aAAagE;IAEhC,sDAAsD;IACtD,oBAAoB;IACtB,GAAG,EAAE,GAAG,wDAAwD;IAEhE,MAAMC,oBAAoBlC,IAAAA,kBAAW,EAAC;QACpCO,YAAYgB,UAAUY,MAAM;QAE5B,MAAMC,eAAe;YACnB7B,YAAY;YACZ,IAAIK,gBAAgB;gBAClByB;YACF;QACF;QAEA,MAAMC,gBAAgB;YACpB/B,YAAY;QACd;QAEAgC,OAAOC,gBAAgB,CAAC,UAAUJ;QAClCG,OAAOC,gBAAgB,CAAC,WAAWF;QAEnC,OAAO;YACLC,OAAOE,mBAAmB,CAAC,UAAUL;YACrCG,OAAOE,mBAAmB,CAAC,WAAWH;QACxC;IACF,uDAAuD;IACvD,GAAG;QAAC1B;KAAe;IAEnB,MAAM8B,gCAAgC1C,IAAAA,kBAAW,EAAC;QAChD,IAAI,kBAAkBuC,QAAQ;YAC5B,MAAMI,aAAa,MAAMC,aAAaC,iBAAiB;YACvDlC,0BAA0BgC;YAE1B,IAAIA,eAAe,aAAa/B,gBAAgB;gBAC9CkC;YACF;QACF;IACF,uDAAuD;IACvD,GAAG;QAAClC;KAAe;IAEnB,MAAMmC,wBAAwB;QAC5B,IAAI,mBAAmBxB,WAAW;YAChC,IAAI;gBACF,MAAMC,eAAe,MAAMD,UAAUE,aAAa,CAACuB,QAAQ,CAAC;gBAC5DrB,IAAAA,cAAM,EAAC,8BAA8BH;gBACrCX,kBAAkBW;YACpB,EAAE,OAAOnC,OAAO;gBACdgB,QAAQhB,KAAK,CAAC,uCAAuCA;YACvD;QACF;IACF;IAEA,MAAMyD,2BAA2B;QAC/B,IAAI,CAAClC,gBAAgB;QAErB,IAAI;YACF,MAAMqC,eAAe,MAAMrC,eAAesC,WAAW,CAACC,SAAS,CAAC;gBAC9DC,iBAAiB;gBACjBC,sBAAsBC,QAAQC,GAAG,CAACC,4BAA4B,IAAI;YACpE;YAEA,8BAA8B;YAC9B,MAAMC,MAAM,oCAAoC;gBAC9CC,QAAQ;gBACRC,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9CC,MAAMC,KAAKC,SAAS,CAACb;YACvB;YAEAtB,IAAAA,cAAM,EAAC;QACT,EAAE,OAAOtC,OAAO;YACdgB,QAAQhB,KAAK,CAAC,6BAA6BA;QAC7C;IACF;IAEA,MAAMgD,kBAAkBrC,IAAAA,kBAAW,EAAC;QAClC,IAAI,CAACM,UAAU;QAEfW,cAAc;QACd,IAAI;YACF,MAAM8C,WAAW,MAAMN,MAAM,yBAAyB;gBACpDC,QAAQ;gBACRC,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9CC,MAAMC,KAAKC,SAAS,CAAC;oBAAEhG;oBAAQgD,UAAUA,UAAUkD;gBAAc;YACnE;YAEA,IAAID,SAASE,EAAE,EAAE;gBACflD,YAAY,IAAImD;gBAChBjD,cAAc;gBACdU,IAAAA,cAAM,EAAC;YACT;QACF,EAAE,OAAOtC,OAAO;YACdgB,QAAQhB,KAAK,CAAC,gBAAgBA;YAC9B4B,cAAc;QAChB;IACF,GAAG;QAACX;QAAUQ;QAAUhD;KAAO;IAE/B,mEAAmE;IAEnE,MAAMqG,oBAAoB;QACxB,IAAI;YACF,MAAMJ,WAAW,MAAMN,MAAM;YAC7B,MAAMW,OAAO,MAAML,SAASM,IAAI;YAChC,IAAID,KAAKE,OAAO,EAAE;gBAChB5F,iBAAiB0F,KAAKG,SAAS;YACjC;QACF,EAAE,OAAOlF,OAAO;YACdgB,QAAQhB,KAAK,CAAC,iCAAiCA;QACjD;IACF;IAEA,MAAMmF,iBAAiB;QACrB,IAAI3E,WAAW,CAACV,WAAW;YACzB,MAAMY,cAAcJ,OAAO;QAC7B;IACF;IAEA,MAAM8E,gBAAgB;QACpB7E,QAAQ;QACRE,WAAW;QACX,MAAMd;IACR;IAEA,MAAM0F,iBAAiB;QACrB,MAAMC,WAAW,CAACnE;QAClBC,cAAckE;QACd7C,aAAa8C,OAAO,CAAC,SAASD,WAAW,SAAS;QAElD,0BAA0B;QAC1B,IAAIA,UAAU;YACZE,SAASC,eAAe,CAACC,SAAS,CAACC,GAAG,CAAC;QACzC,OAAO;YACLH,SAASC,eAAe,CAACC,SAAS,CAACE,MAAM,CAAC;QAC5C;IACF;IAEA,MAAMC,cAAc;QAClB3C,OAAO4C,QAAQ,CAAC;YAAEC,KAAK;YAAGC,UAAU;QAAS;IAC/C;IAEA,MAAMC,4BAA4B,CAACC;QACjC/G,0BAA0B+G;IAC5B;IAEA,MAAMC,gBAAgB,CAACC,MAAcC;QACnC/D,IAAAA,cAAM,EAAC,iCAAiC8D,MAAM,KAAKC;QACnD,gDAAgD;QAChD,OAAQD;YACN,KAAK;gBACHlD,OAAOoD,QAAQ,CAACC,IAAI,GAAG,CAAC,OAAO,EAAEF,MAAM,iCAAiC,CAAC;gBACzE;YACF,KAAK;gBACHnD,OAAOoD,QAAQ,CAACC,IAAI,GAAG,CAAC,IAAI,EAAEF,MAAM,CAAC;gBACrC;YACF,KAAK;gBACHnD,OAAOsD,IAAI,CAACH,OAAO;gBACnB;YACF,KAAK;gBACHnD,OAAOsD,IAAI,CAACH,OAAO;gBACnB;YACF;gBACE/D,IAAAA,cAAM,EAAC,yBAAyB8D;QACpC;IACF;IAEA,MAAMK,8BAA8B,CAACC,IAAYN;QAC/C,+BAA+B;QAC/B,IAAIA,SAAS,SAAS;YACpBD,cAAc,SAASO;QACzB,OAAO,IAAIN,SAAS,SAAS;YAC3BD,cAAc,SAASO;QACzB,OAAO,IAAIN,SAAS,WAAW;YAC7BD,cAAc,WAAWO;QAC3B;IACF;IAEA,MAAMC,cAAc,CAACT;QACnB5D,IAAAA,cAAM,EAAC,2BAA2B4D,eAAeU,IAAI;QACrD,oDAAoD;QACpD,IAAI1E,UAAU2E,KAAK,EAAE;YACnB3E,UAAU2E,KAAK,CAAC;gBACdC,OAAO,CAAC,UAAU,EAAEZ,eAAeU,IAAI,CAAC,CAAC;gBACzCG,MAAM,CAAC,iBAAiB,EAAEb,eAAeU,IAAI,CAAC,EAAE,EAAEV,eAAec,MAAM,CAAC,KAAK,EAAEd,eAAexG,KAAK,CAAC,CAAC;gBACrGuH,KAAK/D,OAAOoD,QAAQ,CAACC,IAAI;YAC3B,GAAGW,KAAK,CAAC,CAAClH;gBACRsC,IAAAA,cAAM,EAAC,iBAAiBtC;YAC1B;QACF,OAAO;YACL,wBAAwB;YACxB,MAAMmH,YAAY,CAAC,UAAU,EAAEjB,eAAeU,IAAI,CAAC,EAAE,EAAEV,eAAec,MAAM,CAAC,KAAK,EAAEd,eAAexG,KAAK,CAAC,EAAE,EAAEwD,OAAOoD,QAAQ,CAACC,IAAI,CAAC,CAAC;YACnIrE,UAAUkF,SAAS,CAACC,SAAS,CAACF,WAAWG,IAAI,CAAC;gBAC5CC,MAAM;YACR,GAAGL,KAAK,CAAC,CAAClH;gBACRsC,IAAAA,cAAM,EAAC,2BAA2BtC;YACpC;QACF;IACF;IAEA,MAAMwH,iBAAiB,CAACtB;QACtB5D,IAAAA,cAAM,EAAC,4BAA4B4D,eAAeU,IAAI;IACtD,mCAAmC;IACrC;IAEA,MAAMa,eAAe;QACnB;YACEf,IAAI;YACJE,MAAM;YACNc,oBAAM,qBAACC,iBAAQ;gBAACjJ,WAAU;;YAC1BkJ,aAAa;QACf;QACA;YACElB,IAAI;YACJE,MAAM;YACNc,oBAAM,qBAACG,sBAAa;gBAACnJ,WAAU;;YAC/BkJ,aAAa;QACf;QACA;YACElB,IAAI;YACJE,MAAM;YACNc,oBAAM,qBAACI,qBAAY;gBAACpJ,WAAU;;YAC9BkJ,aAAa;QACf;QACA;YACElB,IAAI;YACJE,MAAM;YACNc,oBAAM,qBAACK,kBAAS;gBAACrJ,WAAU;;YAC3BkJ,aAAa;QACf;QACA;YACElB,IAAI;YACJE,MAAM;YACNc,oBAAM,qBAACI,qBAAY;gBAACpJ,WAAU;;YAC9BkJ,aAAa;QACf;QACA;YACElB,IAAI;YACJE,MAAM;YACNc,oBAAM,qBAACM,iBAAQ;gBAACtJ,WAAU;;YAC1BkJ,aAAa;QACf;KACD;IAED,gCAAgC;IAChCK,IAAAA,gBAAS,EAAC;QACR,MAAMC,mBAAmB;YACvB,IAAI;gBACF,MAAM1I,UAAU;YAClB,EAAE,OAAOQ,OAAO;gBACdgB,QAAQhB,KAAK,CAAC,gCAAgCA;YAChD;QACF;QAEAkI;IACF,GAAG;QAAC1I;KAAU;IAEd,6FAA6F;IAC7FyI,IAAAA,gBAAS,EAAC;QACR,MAAME,gBAAgB;YACpB,IAAI;gBACF,8CAA8C;gBAC9C,MAAMlG;gBACNM;gBACAM;gBACA,MAAMQ;gBACN,MAAMK;gBACN,MAAMoB;YACR,EAAE,OAAO9E,OAAO;gBACdgB,QAAQhB,KAAK,CAAC,2BAA2BA;YAC3C;QACF;QAEA,kEAAkE;QAClE,MAAMoI,YAAYC,WAAWF,eAAe;QAC5C,OAAO,IAAMG,aAAaF;IAC5B,GAAG,EAAE,GAAG,+DAA+D;IAEvE,MAAMG,gBAAgB;QACpB,OAAQ5J;YACN,KAAK;gBACH,qBACE,qBAAC6J;oBAAI9J,WAAU;8BACb,cAAA,sBAAC8J;wBAAI9J,WAAU;;0CACb,sBAAC8J;gCAAI9J,WAAU;;kDACb,qBAAC+J;wCAAG/J,WAAU;kDAAsD;;kDACpE,qBAACgK;wCACCC,SAAS,IAAM7G,uBAAuB,CAACD;wCACvCnD,WAAU;kDAEV,cAAA,qBAACkK,kCAAyB;4CAAClK,WAAU;;;;;0CAGzC,qBAACmK;gCAAEnK,WAAU;0CAAgD;;4BAK5DmD,qCACC,sBAAC2G;gCAAI9J,WAAU;;kDACb,qBAACoK;wCAAGpK,WAAU;kDAAyD;;kDACvE,sBAAC8J;wCAAI9J,WAAU;;0DACb,sBAACqK;gDAAMrK,WAAU;;kEACf,qBAACsK;wDAAM5C,MAAK;wDAAW1H,WAAU;;oDAAS;;;0DAE5C,sBAACqK;gDAAMrK,WAAU;;kEACf,qBAACsK;wDAAM5C,MAAK;wDAAW1H,WAAU;;oDAAS;;;0DAE5C,sBAACqK;gDAAMrK,WAAU;;kEACf,qBAACsK;wDAAM5C,MAAK;wDAAW1H,WAAU;;oDAAS;;;;;;;0CAOlD,sBAAC8J;gCAAI9J,WAAU;;oCACZuK,MAAMC,OAAO,CAAC5J,SAASA,MAAM6J,GAAG,CAAC,CAACC,qBACjC,sBAACZ;4CAAkB9J,WAAU;;8DAC3B,qBAACoK;oDAAGpK,WAAU;8DAA6C0K,KAAKtC,KAAK;;8DACrE,qBAAC+B;oDAAEnK,WAAU;8DAAiD0K,KAAKC,OAAO;;8DAC1E,sBAACb;oDAAI9J,WAAU;;sEACb,qBAAC4K;4DAAK5K,WAAU;sEAAyB,IAAImG,KAAKuE,KAAKG,WAAW,EAAEC,cAAc;;sEAClF,sBAAChB;4DAAI9J,WAAU;;8EACb,qBAACgK;oEACCC,SAAS,IAAMnB,eAAe4B;oEAC9B1K,WAAU;8EAEV,cAAA,qBAAC+K,qBAAY;wEAAC/K,WAAU;;;8EAE1B,qBAACgK;oEACCC,SAAS,IAAMhC,YAAYyC;oEAC3B1K,WAAU;8EAEV,cAAA,qBAACgL,kBAAS;wEAAChL,WAAU;;;;;;;;2CAhBnB0K,KAAK1C,EAAE,mBAsBjB,qBAAC8B;wCAAI9J,WAAU;kDAAiC;;oCAMjD8B,yBACC,qBAACkI;wCACCC,SAASxD;wCACTwE,UAAU7J;wCACVpB,WAAU;kDAEToB,YAAY,eAAe;;kDAKhC,qBAAC4I;wCACCC,SAASvD;wCACT1G,WAAU;kDACX;;;;;;;YAOX,KAAK;gBACH,qBACE,qBAACkL,2BAAkB;oBACjBnL,QAAQA,UAAU;oBAClBoL,eAAe5D;;YAGrB,KAAK;gBACH,qBACE,qBAACuC;oBAAI9J,WAAU;8BACb,cAAA,sBAAC8J;wBAAI9J,WAAU;;0CACb,sBAAC+J;gCAAG/J,WAAU;;kDACZ,qBAACoJ,qBAAY;wCAACpJ,WAAU;;oCAAiB;;;4BAG1CU,8BACC,sBAACoJ;gCAAI9J,WAAU;;kDACb,sBAAC8J;wCAAI9J,WAAU;;0DACb,qBAACoK;gDAAGpK,WAAU;0DAAyD;;0DACvE,qBAAC8J;gDAAI9J,WAAU;0DAAoDU,cAAc0K,oBAAoB;;;;kDAEvG,sBAACtB;wCAAI9J,WAAU;;0DACb,qBAACoK;gDAAGpK,WAAU;0DAAyD;;0DACvE,sBAAC8J;gDAAI9J,WAAU;;oDAAoDU,cAAc2K,mBAAmB;oDAAC;;;;;kDAEvG,sBAACvB;wCAAI9J,WAAU;;0DACb,qBAACoK;gDAAGpK,WAAU;0DAAyD;;0DACvE,qBAAC8J;gDAAI9J,WAAU;0DAAoDU,cAAc4K,WAAW;;;;kDAE9F,sBAACxB;wCAAI9J,WAAU;;0DACb,qBAACoK;gDAAGpK,WAAU;0DAAyD;;0DACvE,qBAAC8J;gDAAI9J,WAAU;0DAA4C,IAAImG,KAAKzF,cAAc6K,WAAW,EAAET,cAAc;;;;;+CAIjH,qBAAChB;gCAAI9J,WAAU;0CACb,cAAA,sBAAC8J;oCAAI9J,WAAU;;sDACb,qBAAC8J;4CAAI9J,WAAU;;sDACf,qBAAC8J;4CAAI9J,WAAU;;;;;;;;YAO7B;gBACE,qBACE,qBAAC8J;oBAAI9J,WAAU;8BACb,cAAA,sBAAC8J;wBAAI9J,WAAU;;0CACb,qBAAC+J;gCAAG/J,WAAU;0CAA2D;;0CACzE,qBAACmK;gCAAEnK,WAAU;0CAA2C;;;;;QAMlE;IACF;IAEA,qBACE,sBAAC8J;QAAI9J,WAAW,CAAC,yCAAyC,EAAEA,UAAU,CAAC;;0BAErE,sBAAC8J;gBAAI9J,WAAU;;kCACb,qBAACgK;wBACCC,SAAS,IAAM5J,eAAe;wBAC9BmL,eAAY;wBACZxL,WAAU;kCAEV,cAAA,qBAACyL,kBAAS;4BAACzL,WAAU;;;kCAEvB,qBAAC0L;wBAAG1L,WAAU;kCAAkD;;kCAChE,sBAAC8J;wBAAI9J,WAAU;;0CACb,qBAACgK;gCACCC,SAAStD;gCACT6E,eAAY;gCACZxL,WAAU;0CAETyC,2BAAa,qBAACkJ,gBAAO;oCAAC3L,WAAU;mDAAe,qBAAC4L,iBAAQ;oCAAC5L,WAAU;;;0CAEtE,qBAACgK;gCAAOhK,WAAU;0CAChB,cAAA,qBAAC6L,iBAAQ;oCAAC7L,WAAU;;;;;;;0BAM1B,qBAAC8J;gBAAI9J,WAAU;0BACb,cAAA,sBAAC8J;oBAAI9J,WAAU;;sCACb,sBAAC8J;4BAAI9J,WAAU;;8CACb,sBAAC8J;oCAAI9J,WAAU;oCAA8BwL,eAAajJ,WAAW,qBAAqB;;wCACvFA,yBACC,qBAACuJ,iBAAQ;4CAAC9L,WAAU;2DAEpB,qBAAC+L,wBAAe;4CAAC/L,WAAU;;sDAE7B,qBAAC4K;4CAAK5K,WAAWuC,WAAW,mBAAmB;sDAC5CA,WAAW,WAAW;;;;gCAG1BU,eAAe,2BACd,sBAAC6G;oCAAI0B,eAAY;oCAAiBxL,WAAU;;sDAC1C,qBAACgM,sBAAa;4CAAChM,WAAU;;sDACzB,qBAAC4K;4CAAK5K,WAAU;sDAAgB;;;;gCAGnCoB,2BACC,sBAAC0I;oCAAI0B,eAAY;oCAAoBxL,WAAU;;sDAC7C,qBAACgM,sBAAa;4CAAChM,WAAU;;sDACzB,qBAAC4K;4CAAK5K,WAAU;sDAAgB;;;;gCAGnC2C,2BAA2B,2BAC1B,sBAACmH;oCAAI9J,WAAU;;sDACb,qBAAC6L,iBAAQ;4CAAC7L,WAAU;;sDACpB,qBAAC4K;4CAAK5K,WAAU;sDAAiB;;;;;;wBAItC+C,0BACC,sBAAC6H;4BAAK5K,WAAU;;gCAAgB;gCAClB+C,SAASkJ,kBAAkB;;;;;;0BAO/C,qBAACnC;gBAAI9J,WAAU;0BACb,cAAA,qBAAC8J;oBAAI9J,WAAU;8BACZ;wBACC;4BAAEgI,IAAI;4BAAQE,MAAM;4BAAQc,MAAMC,iBAAQ;wBAAC;wBAC3C;4BAAEjB,IAAI;4BAAmBE,MAAM;4BAAmBc,MAAMG,sBAAa;wBAAC;wBACtE;4BAAEnB,IAAI;4BAAaE,MAAM;4BAAac,MAAMI,qBAAY;wBAAC;qBAC1D,CAACqB,GAAG,CAAC,CAACyB,oBACL,sBAAClC;4BAECC,SAAS,IAAM/J,aAAagM,IAAIlE,EAAE;4BAClChI,WAAW,CAAC,kGAAkG,EAC5GC,cAAciM,IAAIlE,EAAE,GAChB,yEACA,qHACL,CAAC;;8CAEF,qBAACkE,IAAIlD,IAAI;oCAAChJ,WAAU;;8CACpB,qBAAC4K;8CAAMsB,IAAIhE,IAAI;;;2BATVgE,IAAIlE,EAAE;;;0BAgBnB,qBAAC8B;gBAAI9J,WAAW,CAAC,uDAAuD,EAAEI,cAAc,UAAU,SAAS,CAAC;gBACvG6J,SAAS,IAAM5J,eAAe;;0BACnC,sBAACyJ;gBAAI0B,eAAY;gBAAaxL,WAAW,CAAC,+EAA+E,EAAEI,cAAc,kBAAkB,oBAAoB,wDAAwD,CAAC;;kCACtO,sBAAC0J;wBAAI9J,WAAU;;0CACb,qBAACmM;gCAAGnM,WAAU;0CAAkD;;0CAChE,qBAACgK;gCACCC,SAAS,IAAM5J,eAAe;gCAC9BL,WAAU;0CAEV,cAAA,qBAACoM,kBAAS;oCAACpM,WAAU;;;;;kCAGzB,qBAACqM;wBAAIrM,WAAU;kCACZ+I,aAAa0B,GAAG,CAAC,CAACC,qBACjB,sBAAC4B;gCAECzE,MAAK;gCACLoC,SAAS;oCACP/J,aAAawK,KAAK1C,EAAE;oCACpB3H,eAAe;gCACjB;gCACAL,WAAW,CAAC,2DAA2D,EACrEC,cAAcyK,KAAK1C,EAAE,GACjB,iEACA,+FACL,CAAC;;oCAED0C,KAAK1B,IAAI;kDACV,qBAAC4B;wCAAK5K,WAAU;kDAAQ0K,KAAKxC,IAAI;;;+BAb5BwC,KAAK1C,EAAE;;kCAmBlB,sBAAC8B;wBAAI9J,WAAU;;0CACb,qBAAC+J;gCAAG/J,WAAU;0CAA2D;;0CACzE,qBAACsK;gCACC5C,MAAK;gCACL6E,aAAY;gCACZ5E,OAAOrH;gCACPkM,UAAU,CAACC,IAAMlM,eAAekM,EAAEC,MAAM,CAAC/E,KAAK;gCAC9CgF,QAAQ,IAAM5I,aAAa8C,OAAO,CAAC,eAAevG;gCAClDN,WAAU;;4BAEXM,6BACC,sBAAC6J;gCAAEnK,WAAU;;oCAAgD;kDACtC,qBAAC4K;wCAAK5K,WAAU;kDAAeM;;;;;;;;0BAO5D,qBAACwJ;gBAAI0B,eAAY;gBAAiBoB,MAAK;gBAAO5M,WAAU;0BACrD6J;;YAIFrJ,wCACC,qBAACsJ;gBAAI9J,WAAU;0BACb,cAAA,sBAAC8J;oBAAI9J,WAAU;;sCACb,sBAAC8J;4BAAI9J,WAAU;;8CACb,qBAAC+J;oCAAG/J,WAAU;8CAAsD;;8CACpE,qBAACgK;oCACCC,SAAS,IAAMxJ,0BAA0B;oCACzCT,WAAU;8CAEV,cAAA,qBAACoM,kBAAS;wCAACpM,WAAU;;;;;sCAGzB,qBAAC8J;4BAAI9J,WAAU;sCACb,cAAA,qBAAC6M,8BAAqB;gCACpBrF,gBAAgBhH;gCAChBsM,WAAW/E;gCACXgF,SAAS9E;gCACTjI,WAAU;;;;;;0BAQpB,qBAACgK;gBACCgD,KAAK3J;gBACL4G,SAAS9C;gBACTnH,WAAU;gBACViN,cAAW;0BAEX,cAAA,qBAACC,sBAAa;oBAAClN,WAAU;;;;;AAIjC"}