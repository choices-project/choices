1597273e4510e9d475de54023d5e39e7
/**
 * Profile Store - Zustand Implementation
 * 
 * Comprehensive profile state management with Zustand integration
 * Handles profile data, preferences, settings, and real-time updates
 * 
 * Created: December 19, 2024
 * Status: âœ… INTEGRATED
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    profileSelectors: function() {
        return profileSelectors;
    },
    profileStoreDebug: function() {
        return profileStoreDebug;
    },
    profileStoreSubscriptions: function() {
        return profileStoreSubscriptions;
    },
    profileStoreUtils: function() {
        return profileStoreUtils;
    },
    useProfile: function() {
        return useProfile;
    },
    useProfileActions: function() {
        return useProfileActions;
    },
    useProfileDisplay: function() {
        return useProfileDisplay;
    },
    useProfileError: function() {
        return useProfileError;
    },
    useProfileLoading: function() {
        return useProfileLoading;
    },
    useProfileStats: function() {
        return useProfileStats;
    },
    useProfileStore: function() {
        return useProfileStore;
    },
    useProfileValidation: function() {
        return useProfileValidation;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _immer = require("zustand/middleware/immer");
const _logger = require("../utils/logger");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useProfileStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((0, _immer.immer)((set, get)=>({
        // Initial state
        profile: null,
        userProfile: null,
        isProfileLoaded: false,
        isProfileComplete: false,
        profileCompleteness: 0,
        missingFields: [],
        isLoading: false,
        isProfileLoading: false,
        isUpdating: false,
        isUploadingAvatar: false,
        isExporting: false,
        error: null,
        validationErrors: {},
        validationWarnings: {},
        preferences: null,
        privacySettings: null,
        // Base store actions
        setLoading: (loading)=>set((state)=>{
                state.isLoading = loading;
            }),
        setError: (error)=>set((state)=>{
                state.error = error;
            }),
        clearError: ()=>set((state)=>{
                state.error = null;
            }),
        // Profile data actions
        setProfile: (profile)=>set((state)=>{
                state.profile = profile;
                state.isProfileLoaded = !!profile;
                if (profile) {
                    state.updateProfileCompleteness();
                }
            }),
        setUserProfile: (userProfile)=>set((state)=>{
                state.userProfile = userProfile;
                if (userProfile) {
                    state.preferences = userProfile.preferences || null;
                    state.privacySettings = userProfile.privacy_settings || null;
                    state.updateProfileCompleteness();
                }
            }),
        // Profile update action
        updateProfile: async (updates)=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                // Import profile service dynamically to avoid circular dependencies
                const { updateProfile: updateProfileService } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfileService(updates);
                if (result.success && result.data) {
                    set((state)=>{
                        state.profile = result.data;
                        state.isUpdating = false;
                        state.updateProfileCompleteness();
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to update profile";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update profile";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Preferences update
        updatePreferences: async (preferences)=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { updateProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfile({
                    preferences
                });
                if (result.success) {
                    set((state)=>{
                        if (state.preferences) {
                            state.preferences = {
                                ...state.preferences,
                                ...preferences
                            };
                        } else {
                            state.preferences = preferences;
                        }
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to update preferences";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update preferences";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Privacy settings update
        updatePrivacySettings: async (settings)=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { updateProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfile({
                    privacy_settings: settings
                });
                if (result.success) {
                    set((state)=>{
                        if (state.privacySettings) {
                            state.privacySettings = {
                                ...state.privacySettings,
                                ...settings
                            };
                        } else {
                            state.privacySettings = settings;
                        }
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to update privacy settings";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update privacy settings";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Avatar actions
        updateAvatar: async (file)=>{
            set((state)=>{
                state.isUploadingAvatar = true;
                state.error = null;
            });
            try {
                const { updateProfileAvatar } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await updateProfileAvatar(file);
                set((state)=>{
                    state.isUploadingAvatar = false;
                });
                if (result.success && result.avatar_url) {
                    set((state)=>{
                        if (state.profile) {
                            state.profile.avatar_url = result.avatar_url;
                        }
                        if (state.userProfile) {
                            state.userProfile.avatar_url = result.avatar_url;
                        }
                    });
                }
                return result;
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to update avatar";
                    state.isUploadingAvatar = false;
                });
                return {
                    success: false,
                    error: error instanceof Error ? error.message : "Failed to update avatar"
                };
            }
        },
        removeAvatar: async ()=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { updateProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const currentState = get();
                const result = await updateProfile({
                    display_name: currentState.profile?.display_name
                });
                if (result.success) {
                    set((state)=>{
                        if (state.profile) {
                            state.profile.avatar_url = undefined;
                        }
                        if (state.userProfile) {
                            state.userProfile.avatar_url = undefined;
                        }
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to remove avatar";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to remove avatar";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Profile management
        loadProfile: async ()=>{
            set((state)=>{
                state.isProfileLoading = true;
                state.error = null;
            });
            try {
                const { getCurrentProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await getCurrentProfile();
                if (result.success && result.data) {
                    set((state)=>{
                        state.profile = result.data;
                        state.isProfileLoaded = true;
                        state.isProfileLoading = false;
                        state.updateProfileCompleteness();
                    });
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to load profile";
                        state.isProfileLoading = false;
                    });
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to load profile";
                    state.isProfileLoading = false;
                });
            }
        },
        refreshProfile: async ()=>{
            await get().loadProfile();
        },
        exportProfile: async ()=>{
            set((state)=>{
                state.isExporting = true;
                state.error = null;
            });
            try {
                const { exportUserData } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await exportUserData();
                set((state)=>{
                    state.isExporting = false;
                });
                return result;
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to export profile";
                    state.isExporting = false;
                });
                return null;
            }
        },
        deleteProfile: async ()=>{
            set((state)=>{
                state.isUpdating = true;
                state.error = null;
            });
            try {
                const { deleteProfile } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../features/profile/lib/profile-service")));
                const result = await deleteProfile();
                if (result.success) {
                    set((state)=>{
                        state.profile = null;
                        state.userProfile = null;
                        state.isProfileLoaded = false;
                        state.isProfileComplete = false;
                        state.profileCompleteness = 0;
                        state.missingFields = [];
                        state.isUpdating = false;
                    });
                    return true;
                } else {
                    set((state)=>{
                        state.error = result.error || "Failed to delete profile";
                        state.isUpdating = false;
                    });
                    return false;
                }
            } catch (error) {
                set((state)=>{
                    state.error = error instanceof Error ? error.message : "Failed to delete profile";
                    state.isUpdating = false;
                });
                return false;
            }
        },
        // Validation
        validateProfile: (data)=>{
            // Basic validation logic
            const errors = [];
            const warnings = [];
            if (data.display_name && data.display_name.length < 2) {
                errors.push("Display name must be at least 2 characters");
            }
            if (data.bio && data.bio.length > 500) {
                warnings.push("Bio is quite long, consider shortening it");
            }
            return {
                isValid: errors.length === 0,
                errors,
                warnings
            };
        },
        setValidationErrors: (errors)=>set((state)=>{
                state.validationErrors = errors;
            }),
        setValidationWarnings: (warnings)=>set((state)=>{
                state.validationWarnings = warnings;
            }),
        clearValidation: ()=>set((state)=>{
                state.validationErrors = {};
                state.validationWarnings = {};
            }),
        // Loading states
        setProfileLoading: (loading)=>set((state)=>{
                state.isProfileLoading = loading;
            }),
        setUpdating: (updating)=>set((state)=>{
                state.isUpdating = updating;
            }),
        setUploadingAvatar: (uploading)=>set((state)=>{
                state.isUploadingAvatar = uploading;
            }),
        setExporting: (exporting)=>set((state)=>{
                state.isExporting = exporting;
            }),
        // Profile completeness
        updateProfileCompleteness: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            if (!profile) {
                set((state)=>{
                    state.isProfileComplete = false;
                    state.profileCompleteness = 0;
                    state.missingFields = [];
                });
                return;
            }
            const requiredFields = [
                "display_name",
                "username",
                "email"
            ];
            const missingFields = [];
            requiredFields.forEach((field)=>{
                if (!profile[field] || typeof profile[field] === "string" && profile[field].trim().length === 0) {
                    missingFields.push(field.replace("_", " "));
                }
            });
            const isComplete = missingFields.length === 0;
            const percentage = Math.round((requiredFields.length - missingFields.length) / requiredFields.length * 100);
            set((state)=>{
                state.isProfileComplete = isComplete;
                state.profileCompleteness = percentage;
                state.missingFields = missingFields;
            });
        },
        getProfileCompleteness: ()=>{
            const state = get();
            return {
                isComplete: state.isProfileComplete,
                percentage: state.profileCompleteness,
                missingFields: state.missingFields
            };
        },
        // Profile display helpers
        getDisplayName: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            if (!profile) return "User";
            return profile.display_name || profile.username || profile.email?.split("@")[0] || "User";
        },
        getInitials: ()=>{
            const state = get();
            const displayName = state.getDisplayName();
            return displayName.split(" ").map((word)=>word.charAt(0)).join("").toUpperCase().slice(0, 2);
        },
        getTrustTierDisplay: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            if (!profile) return "Unknown";
            const tierNames = {
                "T0": "New User",
                "T1": "Verified User",
                "T2": "Trusted User",
                "T3": "VIP User"
            };
            return tierNames[profile.trust_tier] || "Unknown";
        },
        isAdmin: ()=>{
            const state = get();
            const profile = state.profile || state.userProfile;
            return profile?.is_admin || false;
        },
        // Reset and cleanup
        resetProfile: ()=>set((state)=>{
                state.profile = null;
                state.userProfile = null;
                state.isProfileLoaded = false;
                state.isProfileComplete = false;
                state.profileCompleteness = 0;
                state.missingFields = [];
                state.preferences = null;
                state.privacySettings = null;
                state.validationErrors = {};
                state.validationWarnings = {};
            }),
        clearProfile: ()=>{
            get().resetProfile();
        }
    })), {
    name: "profile-store",
    partialize: (state)=>({
            profile: state.profile,
            userProfile: state.userProfile,
            preferences: state.preferences,
            privacySettings: state.privacySettings,
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness
        })
}), {
    name: "profile-store"
}));
const profileSelectors = {
    // Basic profile data
    profile: (state)=>state.profile,
    userProfile: (state)=>state.userProfile,
    // Profile state
    isProfileLoaded: (state)=>state.isProfileLoaded,
    isProfileComplete: (state)=>state.isProfileComplete,
    profileCompleteness: (state)=>state.profileCompleteness,
    missingFields: (state)=>state.missingFields,
    // Loading states
    isLoading: (state)=>state.isProfileLoading || state.isUpdating,
    isUpdating: (state)=>state.isUpdating,
    isUploadingAvatar: (state)=>state.isUploadingAvatar,
    isExporting: (state)=>state.isExporting,
    // Error states
    hasError: (state)=>!!state.error,
    error: (state)=>state.error,
    // Profile display
    displayName: (state)=>state.getDisplayName(),
    initials: (state)=>state.getInitials(),
    trustTierDisplay: (state)=>state.getTrustTierDisplay(),
    isAdmin: (state)=>state.isAdmin(),
    // Preferences and settings
    preferences: (state)=>state.preferences,
    privacySettings: (state)=>state.privacySettings,
    // Validation
    validationErrors: (state)=>state.validationErrors,
    validationWarnings: (state)=>state.validationWarnings,
    hasValidationErrors: (state)=>Object.keys(state.validationErrors).length > 0,
    hasValidationWarnings: (state)=>Object.keys(state.validationWarnings).length > 0
};
const useProfile = ()=>useProfileStore((state)=>({
            profile: state.profile,
            userProfile: state.userProfile,
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness,
            missingFields: state.missingFields
        }));
const useProfileLoading = ()=>useProfileStore((state)=>({
            isLoading: state.isProfileLoading,
            isUpdating: state.isUpdating,
            isUploadingAvatar: state.isUploadingAvatar,
            isExporting: state.isExporting
        }));
const useProfileError = ()=>useProfileStore((state)=>({
            error: state.error,
            hasError: !!state.error
        }));
const useProfileDisplay = ()=>useProfileStore((state)=>({
            displayName: state.getDisplayName(),
            initials: state.getInitials(),
            trustTierDisplay: state.getTrustTierDisplay(),
            isAdmin: state.isAdmin()
        }));
const useProfileValidation = ()=>useProfileStore((state)=>({
            validationErrors: state.validationErrors,
            validationWarnings: state.validationWarnings,
            hasValidationErrors: Object.keys(state.validationErrors).length > 0,
            hasValidationWarnings: Object.keys(state.validationWarnings).length > 0
        }));
const useProfileActions = ()=>useProfileStore((state)=>({
            updateProfile: state.updateProfile,
            updatePreferences: state.updatePreferences,
            updatePrivacySettings: state.updatePrivacySettings,
            updateAvatar: state.updateAvatar,
            removeAvatar: state.removeAvatar,
            loadProfile: state.loadProfile,
            refreshProfile: state.refreshProfile,
            exportProfile: state.exportProfile,
            deleteProfile: state.deleteProfile,
            validateProfile: state.validateProfile,
            setValidationErrors: state.setValidationErrors,
            clearValidation: state.clearValidation
        }));
const useProfileStats = ()=>useProfileStore((state)=>({
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness,
            missingFields: state.missingFields,
            hasPreferences: !!state.preferences,
            hasPrivacySettings: !!state.privacySettings
        }));
const profileStoreUtils = {
    // Initialize profile store
    initialize: ()=>{
        _logger.logger.info("Profile store initialized");
    },
    // Reset profile store
    reset: ()=>{
        useProfileStore.getState().resetProfile();
        _logger.logger.info("Profile store reset");
    },
    // Get profile completeness
    getCompleteness: ()=>{
        return useProfileStore.getState().getProfileCompleteness();
    },
    // Validate profile data
    validate: (data)=>{
        return useProfileStore.getState().validateProfile(data);
    },
    // Get profile display info
    getDisplayInfo: ()=>{
        const state = useProfileStore.getState();
        return {
            displayName: state.getDisplayName(),
            initials: state.getInitials(),
            trustTier: state.getTrustTierDisplay(),
            isAdmin: state.isAdmin()
        };
    }
};
const profileStoreSubscriptions = {
    // Subscribe to profile changes
    onProfileChange: (callback)=>{
        return useProfileStore.subscribe((state, prevState)=>{
            if (state.profile !== prevState.profile) {
                callback(state.profile);
            }
        });
    },
    // Subscribe to profile completeness changes
    onCompletenessChange: (callback)=>{
        return useProfileStore.subscribe((state, prevState)=>{
            const current = state.getProfileCompleteness();
            const previous = prevState.getProfileCompleteness();
            if (current !== previous) {
                callback(current);
            }
        });
    },
    // Subscribe to loading state changes
    onLoadingChange: (callback)=>{
        return useProfileStore.subscribe((state, prevState)=>{
            const current = state.isProfileLoading || state.isUpdating;
            const previous = prevState.isProfileLoading || prevState.isUpdating;
            if (current !== previous) {
                callback(current);
            }
        });
    }
};
const profileStoreDebug = {
    // Log current state
    logState: ()=>{
        const state = useProfileStore.getState();
        _logger.logger.debug("Profile Store State", {
            profile: state.profile,
            isProfileLoaded: state.isProfileLoaded,
            isProfileComplete: state.isProfileComplete,
            profileCompleteness: state.profileCompleteness,
            isLoading: state.isProfileLoading,
            isUpdating: state.isUpdating,
            error: state.error
        });
    },
    // Reset store
    reset: ()=>{
        profileStoreUtils.reset();
    },
    // Clear all data
    clearAll: ()=>{
        useProfileStore.getState().clearProfile();
        _logger.logger.info("Profile store cleared");
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL3Byb2ZpbGVTdG9yZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb2ZpbGUgU3RvcmUgLSBadXN0YW5kIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIENvbXByZWhlbnNpdmUgcHJvZmlsZSBzdGF0ZSBtYW5hZ2VtZW50IHdpdGggWnVzdGFuZCBpbnRlZ3JhdGlvblxuICogSGFuZGxlcyBwcm9maWxlIGRhdGEsIHByZWZlcmVuY2VzLCBzZXR0aW5ncywgYW5kIHJlYWwtdGltZSB1cGRhdGVzXG4gKiBcbiAqIENyZWF0ZWQ6IERlY2VtYmVyIDE5LCAyMDI0XG4gKiBTdGF0dXM6IOKchSBJTlRFR1JBVEVEXG4gKi9cblxuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnenVzdGFuZCc7XG5pbXBvcnQgeyBkZXZ0b29scyB9IGZyb20gJ3p1c3RhbmQvbWlkZGxld2FyZSc7XG5pbXBvcnQgeyBwZXJzaXN0IH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IGltbWVyIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlL2ltbWVyJztcblxuaW1wb3J0IHR5cGUgeyBcbiAgUHJvZmlsZVVzZXIsIFxuICBVc2VyUHJvZmlsZSwgXG4gIFByb2ZpbGVVcGRhdGVEYXRhLCBcbiAgUHJvZmlsZVByZWZlcmVuY2VzLCBcbiAgUHJpdmFjeVNldHRpbmdzLFxuICBQcm9maWxlVmFsaWRhdGlvblJlc3VsdCxcbiAgQXZhdGFyVXBsb2FkUmVzdWx0LFxuICBQcm9maWxlRXhwb3J0RGF0YVxufSBmcm9tICdAL2ZlYXR1cmVzL3Byb2ZpbGUvdHlwZXMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC9saWIvdXRpbHMvbG9nZ2VyJztcblxuaW1wb3J0IHR5cGUgeyBCYXNlU3RvcmUgfSBmcm9tICcuL3R5cGVzJztcblxuXG4vLyBMb2NhbCB0eXBlIGRlZmluaXRpb25cbmludGVyZmFjZSBQcm9maWxlQ29tcGxldGVuZXNzIHtcbiAgaXNDb21wbGV0ZTogYm9vbGVhbjtcbiAgcGVyY2VudGFnZTogbnVtYmVyO1xuICBtaXNzaW5nRmllbGRzOiBzdHJpbmdbXTtcbn1cblxuLy8gUHJvZmlsZSBzdG9yZSBzdGF0ZSBpbnRlcmZhY2VcbnR5cGUgUHJvZmlsZVN0b3JlID0ge1xuICAvLyBQcm9maWxlIGRhdGFcbiAgcHJvZmlsZTogUHJvZmlsZVVzZXIgfCBudWxsO1xuICB1c2VyUHJvZmlsZTogVXNlclByb2ZpbGUgfCBudWxsO1xuICBcbiAgLy8gUHJvZmlsZSBzdGF0ZVxuICBpc1Byb2ZpbGVMb2FkZWQ6IGJvb2xlYW47XG4gIGlzUHJvZmlsZUNvbXBsZXRlOiBib29sZWFuO1xuICBwcm9maWxlQ29tcGxldGVuZXNzOiBudW1iZXI7XG4gIG1pc3NpbmdGaWVsZHM6IHN0cmluZ1tdO1xuICBcbiAgLy8gTG9hZGluZyBzdGF0ZXNcbiAgaXNQcm9maWxlTG9hZGluZzogYm9vbGVhbjtcbiAgaXNVcGRhdGluZzogYm9vbGVhbjtcbiAgaXNVcGxvYWRpbmdBdmF0YXI6IGJvb2xlYW47XG4gIGlzRXhwb3J0aW5nOiBib29sZWFuO1xuICBcbiAgLy8gVmFsaWRhdGlvbiBzdGF0ZVxuICB2YWxpZGF0aW9uRXJyb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT47XG4gIHZhbGlkYXRpb25XYXJuaW5nczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+O1xuICBcbiAgLy8gUHJvZmlsZSBwcmVmZXJlbmNlcyBhbmQgc2V0dGluZ3NcbiAgcHJlZmVyZW5jZXM6IFByb2ZpbGVQcmVmZXJlbmNlcyB8IG51bGw7XG4gIHByaXZhY3lTZXR0aW5nczogUHJpdmFjeVNldHRpbmdzIHwgbnVsbDtcbiAgXG4gIC8vIFByb2ZpbGUgYWN0aW9uc1xuICBzZXRQcm9maWxlOiAocHJvZmlsZTogUHJvZmlsZVVzZXIgfCBudWxsKSA9PiB2b2lkO1xuICBzZXRVc2VyUHJvZmlsZTogKHVzZXJQcm9maWxlOiBVc2VyUHJvZmlsZSB8IG51bGwpID0+IHZvaWQ7XG4gIHVwZGF0ZVByb2ZpbGU6ICh1cGRhdGVzOiBQcm9maWxlVXBkYXRlRGF0YSkgPT4gUHJvbWlzZTxib29sZWFuPjtcbiAgdXBkYXRlUHJlZmVyZW5jZXM6IChwcmVmZXJlbmNlczogUGFydGlhbDxQcm9maWxlUHJlZmVyZW5jZXM+KSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICB1cGRhdGVQcml2YWN5U2V0dGluZ3M6IChzZXR0aW5nczogUGFydGlhbDxQcml2YWN5U2V0dGluZ3M+KSA9PiBQcm9taXNlPGJvb2xlYW4+O1xuICBcbiAgLy8gQXZhdGFyIGFjdGlvbnNcbiAgdXBkYXRlQXZhdGFyOiAoZmlsZTogRmlsZSkgPT4gUHJvbWlzZTxBdmF0YXJVcGxvYWRSZXN1bHQ+O1xuICByZW1vdmVBdmF0YXI6ICgpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIFxuICAvLyBQcm9maWxlIG1hbmFnZW1lbnRcbiAgbG9hZFByb2ZpbGU6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHJlZnJlc2hQcm9maWxlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBleHBvcnRQcm9maWxlOiAoKSA9PiBQcm9taXNlPFByb2ZpbGVFeHBvcnREYXRhIHwgbnVsbD47XG4gIGRlbGV0ZVByb2ZpbGU6ICgpID0+IFByb21pc2U8Ym9vbGVhbj47XG4gIFxuICAvLyBWYWxpZGF0aW9uXG4gIHZhbGlkYXRlUHJvZmlsZTogKGRhdGE6IFByb2ZpbGVVcGRhdGVEYXRhKSA9PiBQcm9maWxlVmFsaWRhdGlvblJlc3VsdDtcbiAgc2V0VmFsaWRhdGlvbkVycm9yczogKGVycm9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+KSA9PiB2b2lkO1xuICBzZXRWYWxpZGF0aW9uV2FybmluZ3M6ICh3YXJuaW5nczogUmVjb3JkPHN0cmluZywgc3RyaW5nW10+KSA9PiB2b2lkO1xuICBjbGVhclZhbGlkYXRpb246ICgpID0+IHZvaWQ7XG4gIFxuICAvLyBMb2FkaW5nIHN0YXRlc1xuICBzZXRQcm9maWxlTG9hZGluZzogKGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldFVwZGF0aW5nOiAodXBkYXRpbmc6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHNldFVwbG9hZGluZ0F2YXRhcjogKHVwbG9hZGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0RXhwb3J0aW5nOiAoZXhwb3J0aW5nOiBib29sZWFuKSA9PiB2b2lkO1xuICBcbiAgLy8gUHJvZmlsZSBjb21wbGV0ZW5lc3NcbiAgdXBkYXRlUHJvZmlsZUNvbXBsZXRlbmVzczogKCkgPT4gdm9pZDtcbiAgZ2V0UHJvZmlsZUNvbXBsZXRlbmVzczogKCkgPT4gUHJvZmlsZUNvbXBsZXRlbmVzcztcbiAgXG4gIC8vIFByb2ZpbGUgZGlzcGxheSBoZWxwZXJzXG4gIGdldERpc3BsYXlOYW1lOiAoKSA9PiBzdHJpbmc7XG4gIGdldEluaXRpYWxzOiAoKSA9PiBzdHJpbmc7XG4gIGdldFRydXN0VGllckRpc3BsYXk6ICgpID0+IHN0cmluZztcbiAgaXNBZG1pbjogKCkgPT4gYm9vbGVhbjtcbiAgXG4gIC8vIFJlc2V0IGFuZCBjbGVhbnVwXG4gIHJlc2V0UHJvZmlsZTogKCkgPT4gdm9pZDtcbiAgY2xlYXJQcm9maWxlOiAoKSA9PiB2b2lkO1xufSAmIEJhc2VTdG9yZVxuXG4vLyBDcmVhdGUgcHJvZmlsZSBzdG9yZSB3aXRoIG1pZGRsZXdhcmVcbmV4cG9ydCBjb25zdCB1c2VQcm9maWxlU3RvcmUgPSBjcmVhdGU8UHJvZmlsZVN0b3JlPigpKFxuICBkZXZ0b29scyhcbiAgICBwZXJzaXN0KFxuICAgICAgaW1tZXIoKHNldCwgZ2V0KSA9PiAoe1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIHByb2ZpbGU6IG51bGwsXG4gICAgICAgIHVzZXJQcm9maWxlOiBudWxsLFxuICAgICAgICBpc1Byb2ZpbGVMb2FkZWQ6IGZhbHNlLFxuICAgICAgICBpc1Byb2ZpbGVDb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIHByb2ZpbGVDb21wbGV0ZW5lc3M6IDAsXG4gICAgICAgIG1pc3NpbmdGaWVsZHM6IFtdLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBpc1Byb2ZpbGVMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgaXNVcGRhdGluZzogZmFsc2UsXG4gICAgICAgIGlzVXBsb2FkaW5nQXZhdGFyOiBmYWxzZSxcbiAgICAgICAgaXNFeHBvcnRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yczoge30sXG4gICAgICAgIHZhbGlkYXRpb25XYXJuaW5nczoge30sXG4gICAgICAgIHByZWZlcmVuY2VzOiBudWxsLFxuICAgICAgICBwcml2YWN5U2V0dGluZ3M6IG51bGwsXG4gICAgICAgIFxuICAgICAgICAvLyBCYXNlIHN0b3JlIGFjdGlvbnNcbiAgICAgICAgc2V0TG9hZGluZzogKGxvYWRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBsb2FkaW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldEVycm9yOiAoZXJyb3IpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGNsZWFyRXJyb3I6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gUHJvZmlsZSBkYXRhIGFjdGlvbnNcbiAgICAgICAgc2V0UHJvZmlsZTogKHByb2ZpbGUpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5wcm9maWxlID0gcHJvZmlsZTtcbiAgICAgICAgICBzdGF0ZS5pc1Byb2ZpbGVMb2FkZWQgPSAhIXByb2ZpbGU7XG4gICAgICAgICAgaWYgKHByb2ZpbGUpIHtcbiAgICAgICAgICAgIHN0YXRlLnVwZGF0ZVByb2ZpbGVDb21wbGV0ZW5lc3MoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgc2V0VXNlclByb2ZpbGU6ICh1c2VyUHJvZmlsZSkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLnVzZXJQcm9maWxlID0gdXNlclByb2ZpbGU7XG4gICAgICAgICAgaWYgKHVzZXJQcm9maWxlKSB7XG4gICAgICAgICAgICBzdGF0ZS5wcmVmZXJlbmNlcyA9IHVzZXJQcm9maWxlLnByZWZlcmVuY2VzIGFzIFByb2ZpbGVQcmVmZXJlbmNlcyB8fCBudWxsO1xuICAgICAgICAgICAgc3RhdGUucHJpdmFjeVNldHRpbmdzID0gdXNlclByb2ZpbGUucHJpdmFjeV9zZXR0aW5ncyBhcyBQcml2YWN5U2V0dGluZ3MgfHwgbnVsbDtcbiAgICAgICAgICAgIHN0YXRlLnVwZGF0ZVByb2ZpbGVDb21wbGV0ZW5lc3MoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gUHJvZmlsZSB1cGRhdGUgYWN0aW9uXG4gICAgICAgIHVwZGF0ZVByb2ZpbGU6IGFzeW5jICh1cGRhdGVzKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEltcG9ydCBwcm9maWxlIHNlcnZpY2UgZHluYW1pY2FsbHkgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXG4gICAgICAgICAgICBjb25zdCB7IHVwZGF0ZVByb2ZpbGU6IHVwZGF0ZVByb2ZpbGVTZXJ2aWNlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvZmVhdHVyZXMvcHJvZmlsZS9saWIvcHJvZmlsZS1zZXJ2aWNlJyk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlU2VydmljZSh1cGRhdGVzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5kYXRhKSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlID0gcmVzdWx0LmRhdGEgYXMgUHJvZmlsZVVzZXI7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHN0YXRlLnVwZGF0ZVByb2ZpbGVDb21wbGV0ZW5lc3MoKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUnO1xuICAgICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZSc7XG4gICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByZWZlcmVuY2VzIHVwZGF0ZVxuICAgICAgICB1cGRhdGVQcmVmZXJlbmNlczogYXN5bmMgKHByZWZlcmVuY2VzKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXBkYXRlUHJvZmlsZSB9ID0gYXdhaXQgaW1wb3J0KCdAL2ZlYXR1cmVzL3Byb2ZpbGUvbGliL3Byb2ZpbGUtc2VydmljZScpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlUHJvZmlsZSh7IHByZWZlcmVuY2VzIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wcmVmZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgc3RhdGUucHJlZmVyZW5jZXMgPSB7IC4uLnN0YXRlLnByZWZlcmVuY2VzLCAuLi5wcmVmZXJlbmNlcyB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5wcmVmZXJlbmNlcyA9IHByZWZlcmVuY2VzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IHJlc3VsdC5lcnJvciB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBwcmVmZXJlbmNlcyc7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIHVwZGF0ZSBwcmVmZXJlbmNlcyc7XG4gICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByaXZhY3kgc2V0dGluZ3MgdXBkYXRlXG4gICAgICAgIHVwZGF0ZVByaXZhY3lTZXR0aW5nczogYXN5bmMgKHNldHRpbmdzKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXBkYXRlUHJvZmlsZSB9ID0gYXdhaXQgaW1wb3J0KCdAL2ZlYXR1cmVzL3Byb2ZpbGUvbGliL3Byb2ZpbGUtc2VydmljZScpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBkYXRlUHJvZmlsZSh7IHByaXZhY3lfc2V0dGluZ3M6IHNldHRpbmdzIGFzIFByaXZhY3lTZXR0aW5ncyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUucHJpdmFjeVNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5wcml2YWN5U2V0dGluZ3MgPSB7IC4uLnN0YXRlLnByaXZhY3lTZXR0aW5ncywgLi4uc2V0dGluZ3MgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc3RhdGUucHJpdmFjeVNldHRpbmdzID0gc2V0dGluZ3MgYXMgUHJpdmFjeVNldHRpbmdzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IHJlc3VsdC5lcnJvciB8fCAnRmFpbGVkIHRvIHVwZGF0ZSBwcml2YWN5IHNldHRpbmdzJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIHByaXZhY3kgc2V0dGluZ3MnO1xuICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBBdmF0YXIgYWN0aW9uc1xuICAgICAgICB1cGRhdGVBdmF0YXI6IGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IHVwZGF0ZVByb2ZpbGVBdmF0YXIgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwZGF0ZVByb2ZpbGVBdmF0YXIoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmF2YXRhcl91cmwpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlLmF2YXRhcl91cmwgPSByZXN1bHQuYXZhdGFyX3VybDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnVzZXJQcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZS5hdmF0YXJfdXJsID0gcmVzdWx0LmF2YXRhcl91cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byB1cGRhdGUgYXZhdGFyJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gdXBkYXRlIGF2YXRhcidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmVtb3ZlQXZhdGFyOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgdXBkYXRlUHJvZmlsZSB9ID0gYXdhaXQgaW1wb3J0KCdAL2ZlYXR1cmVzL3Byb2ZpbGUvbGliL3Byb2ZpbGUtc2VydmljZScpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlKHsgZGlzcGxheV9uYW1lOiBjdXJyZW50U3RhdGUucHJvZmlsZT8uZGlzcGxheV9uYW1lIH0gYXMgUHJvZmlsZVVwZGF0ZURhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wcm9maWxlKSB7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlLmF2YXRhcl91cmwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS51c2VyUHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgc3RhdGUudXNlclByb2ZpbGUuYXZhdGFyX3VybCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byByZW1vdmUgYXZhdGFyJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gcmVtb3ZlIGF2YXRhcic7XG4gICAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2ZpbGUgbWFuYWdlbWVudFxuICAgICAgICBsb2FkUHJvZmlsZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGdldEN1cnJlbnRQcm9maWxlIH0gPSBhd2FpdCBpbXBvcnQoJ0AvZmVhdHVyZXMvcHJvZmlsZS9saWIvcHJvZmlsZS1zZXJ2aWNlJyk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRDdXJyZW50UHJvZmlsZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LmRhdGEpIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLnByb2ZpbGUgPSByZXN1bHQuZGF0YSBhcyBQcm9maWxlVXNlcjtcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1Byb2ZpbGVMb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS51cGRhdGVQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gcmVzdWx0LmVycm9yIHx8ICdGYWlsZWQgdG8gbG9hZCBwcm9maWxlJztcbiAgICAgICAgICAgICAgICBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGxvYWQgcHJvZmlsZSc7XG4gICAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJlZnJlc2hQcm9maWxlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgZ2V0KCkubG9hZFByb2ZpbGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIGV4cG9ydFByb2ZpbGU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICBzdGF0ZS5pc0V4cG9ydGluZyA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5lcnJvciA9IG51bGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgZXhwb3J0VXNlckRhdGEgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4cG9ydFVzZXJEYXRhKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGV4cG9ydCBwcm9maWxlJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNFeHBvcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZGVsZXRlUHJvZmlsZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzVXBkYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB7IGRlbGV0ZVByb2ZpbGUgfSA9IGF3YWl0IGltcG9ydCgnQC9mZWF0dXJlcy9wcm9maWxlL2xpYi9wcm9maWxlLXNlcnZpY2UnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRlbGV0ZVByb2ZpbGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNQcm9maWxlTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNQcm9maWxlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5wcm9maWxlQ29tcGxldGVuZXNzID0gMDtcbiAgICAgICAgICAgICAgICBzdGF0ZS5taXNzaW5nRmllbGRzID0gW107XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSByZXN1bHQuZXJyb3IgfHwgJ0ZhaWxlZCB0byBkZWxldGUgcHJvZmlsZSc7XG4gICAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGRlbGV0ZSBwcm9maWxlJztcbiAgICAgICAgICAgICAgc3RhdGUuaXNVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgLy8gVmFsaWRhdGlvblxuICAgICAgICB2YWxpZGF0ZVByb2ZpbGU6IChkYXRhKSA9PiB7XG4gICAgICAgICAgLy8gQmFzaWMgdmFsaWRhdGlvbiBsb2dpY1xuICAgICAgICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF0YS5kaXNwbGF5X25hbWUgJiYgZGF0YS5kaXNwbGF5X25hbWUubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goJ0Rpc3BsYXkgbmFtZSBtdXN0IGJlIGF0IGxlYXN0IDIgY2hhcmFjdGVycycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZGF0YS5iaW8gJiYgZGF0YS5iaW8ubGVuZ3RoID4gNTAwKSB7XG4gICAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdCaW8gaXMgcXVpdGUgbG9uZywgY29uc2lkZXIgc2hvcnRlbmluZyBpdCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgICAgIGVycm9ycyxcbiAgICAgICAgICAgIHdhcm5pbmdzXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHNldFZhbGlkYXRpb25FcnJvcnM6IChlcnJvcnMpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS52YWxpZGF0aW9uRXJyb3JzID0gZXJyb3JzO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFZhbGlkYXRpb25XYXJuaW5nczogKHdhcm5pbmdzKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUudmFsaWRhdGlvbldhcm5pbmdzID0gd2FybmluZ3M7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgY2xlYXJWYWxpZGF0aW9uOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUudmFsaWRhdGlvbkVycm9ycyA9IHt9O1xuICAgICAgICAgIHN0YXRlLnZhbGlkYXRpb25XYXJuaW5ncyA9IHt9O1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIExvYWRpbmcgc3RhdGVzXG4gICAgICAgIHNldFByb2ZpbGVMb2FkaW5nOiAobG9hZGluZykgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgPSBsb2FkaW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHNldFVwZGF0aW5nOiAodXBkYXRpbmcpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5pc1VwZGF0aW5nID0gdXBkYXRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgc2V0VXBsb2FkaW5nQXZhdGFyOiAodXBsb2FkaW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIgPSB1cGxvYWRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgc2V0RXhwb3J0aW5nOiAoZXhwb3J0aW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNFeHBvcnRpbmcgPSBleHBvcnRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gUHJvZmlsZSBjb21wbGV0ZW5lc3NcbiAgICAgICAgdXBkYXRlUHJvZmlsZUNvbXBsZXRlbmVzczogKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHN0YXRlLnByb2ZpbGUgfHwgc3RhdGUudXNlclByb2ZpbGU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFwcm9maWxlKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUNvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MgPSAwO1xuICAgICAgICAgICAgICBzdGF0ZS5taXNzaW5nRmllbGRzID0gW107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ2Rpc3BsYXlfbmFtZScsICd1c2VybmFtZScsICdlbWFpbCddO1xuICAgICAgICAgIGNvbnN0IG1pc3NpbmdGaWVsZHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgXG4gICAgICAgICAgcmVxdWlyZWRGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICBpZiAoIXByb2ZpbGVbZmllbGQgYXMga2V5b2YgdHlwZW9mIHByb2ZpbGVdIHx8IFxuICAgICAgICAgICAgICAgICh0eXBlb2YgcHJvZmlsZVtmaWVsZCBhcyBrZXlvZiB0eXBlb2YgcHJvZmlsZV0gPT09ICdzdHJpbmcnICYmIFxuICAgICAgICAgICAgICAgICAocHJvZmlsZVtmaWVsZCBhcyBrZXlvZiB0eXBlb2YgcHJvZmlsZV0gYXMgc3RyaW5nKS50cmltKCkubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICBtaXNzaW5nRmllbGRzLnB1c2goZmllbGQucmVwbGFjZSgnXycsICcgJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGlzQ29tcGxldGUgPSBtaXNzaW5nRmllbGRzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgoKHJlcXVpcmVkRmllbGRzLmxlbmd0aCAtIG1pc3NpbmdGaWVsZHMubGVuZ3RoKSAvIHJlcXVpcmVkRmllbGRzLmxlbmd0aCkgKiAxMDApO1xuICAgICAgICAgIFxuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzUHJvZmlsZUNvbXBsZXRlID0gaXNDb21wbGV0ZTtcbiAgICAgICAgICAgIHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MgPSBwZXJjZW50YWdlO1xuICAgICAgICAgICAgc3RhdGUubWlzc2luZ0ZpZWxkcyA9IG1pc3NpbmdGaWVsZHM7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBnZXRQcm9maWxlQ29tcGxldGVuZXNzOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gICAgICAgICAgICBwZXJjZW50YWdlOiBzdGF0ZS5wcm9maWxlQ29tcGxldGVuZXNzLFxuICAgICAgICAgICAgbWlzc2luZ0ZpZWxkczogc3RhdGUubWlzc2luZ0ZpZWxkc1xuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBQcm9maWxlIGRpc3BsYXkgaGVscGVyc1xuICAgICAgICBnZXREaXNwbGF5TmFtZTogKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gZ2V0KCk7XG4gICAgICAgICAgY29uc3QgcHJvZmlsZSA9IHN0YXRlLnByb2ZpbGUgfHwgc3RhdGUudXNlclByb2ZpbGU7XG4gICAgICAgICAgaWYgKCFwcm9maWxlKSByZXR1cm4gJ1VzZXInO1xuICAgICAgICAgIHJldHVybiBwcm9maWxlLmRpc3BsYXlfbmFtZSB8fCBwcm9maWxlLnVzZXJuYW1lIHx8IHByb2ZpbGUuZW1haWw/LnNwbGl0KCdAJylbMF0gfHwgJ1VzZXInO1xuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgZ2V0SW5pdGlhbHM6ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZSA9IGdldCgpO1xuICAgICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gc3RhdGUuZ2V0RGlzcGxheU5hbWUoKTtcbiAgICAgICAgICByZXR1cm4gZGlzcGxheU5hbWVcbiAgICAgICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkpXG4gICAgICAgICAgICAuam9pbignJylcbiAgICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAuc2xpY2UoMCwgMik7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBnZXRUcnVzdFRpZXJEaXNwbGF5OiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gc3RhdGUucHJvZmlsZSB8fCBzdGF0ZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICBpZiAoIXByb2ZpbGUpIHJldHVybiAnVW5rbm93bic7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdGllck5hbWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICAgJ1QwJzogJ05ldyBVc2VyJyxcbiAgICAgICAgICAgICdUMSc6ICdWZXJpZmllZCBVc2VyJyxcbiAgICAgICAgICAgICdUMic6ICdUcnVzdGVkIFVzZXInLFxuICAgICAgICAgICAgJ1QzJzogJ1ZJUCBVc2VyJyxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiB0aWVyTmFtZXNbcHJvZmlsZS50cnVzdF90aWVyXSB8fCAnVW5rbm93bic7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBpc0FkbWluOiAoKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBnZXQoKTtcbiAgICAgICAgICBjb25zdCBwcm9maWxlID0gc3RhdGUucHJvZmlsZSB8fCBzdGF0ZS51c2VyUHJvZmlsZTtcbiAgICAgICAgICByZXR1cm4gcHJvZmlsZT8uaXNfYWRtaW4gfHwgZmFsc2U7XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBSZXNldCBhbmQgY2xlYW51cFxuICAgICAgICByZXNldFByb2ZpbGU6ICgpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5wcm9maWxlID0gbnVsbDtcbiAgICAgICAgICBzdGF0ZS51c2VyUHJvZmlsZSA9IG51bGw7XG4gICAgICAgICAgc3RhdGUuaXNQcm9maWxlTG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgc3RhdGUuaXNQcm9maWxlQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICBzdGF0ZS5wcm9maWxlQ29tcGxldGVuZXNzID0gMDtcbiAgICAgICAgICBzdGF0ZS5taXNzaW5nRmllbGRzID0gW107XG4gICAgICAgICAgc3RhdGUucHJlZmVyZW5jZXMgPSBudWxsO1xuICAgICAgICAgIHN0YXRlLnByaXZhY3lTZXR0aW5ncyA9IG51bGw7XG4gICAgICAgICAgc3RhdGUudmFsaWRhdGlvbkVycm9ycyA9IHt9O1xuICAgICAgICAgIHN0YXRlLnZhbGlkYXRpb25XYXJuaW5ncyA9IHt9O1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIGNsZWFyUHJvZmlsZTogKCkgPT4ge1xuICAgICAgICAgIGdldCgpLnJlc2V0UHJvZmlsZSgpO1xuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdwcm9maWxlLXN0b3JlJyxcbiAgICAgICAgcGFydGlhbGl6ZTogKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHByb2ZpbGU6IHN0YXRlLnByb2ZpbGUsXG4gICAgICAgICAgdXNlclByb2ZpbGU6IHN0YXRlLnVzZXJQcm9maWxlLFxuICAgICAgICAgIHByZWZlcmVuY2VzOiBzdGF0ZS5wcmVmZXJlbmNlcyxcbiAgICAgICAgICBwcml2YWN5U2V0dGluZ3M6IHN0YXRlLnByaXZhY3lTZXR0aW5ncyxcbiAgICAgICAgICBpc1Byb2ZpbGVMb2FkZWQ6IHN0YXRlLmlzUHJvZmlsZUxvYWRlZCxcbiAgICAgICAgICBpc1Byb2ZpbGVDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gICAgICAgICAgcHJvZmlsZUNvbXBsZXRlbmVzczogc3RhdGUucHJvZmlsZUNvbXBsZXRlbmVzc1xuICAgICAgICB9KVxuICAgICAgfVxuICAgICksXG4gICAge1xuICAgICAgbmFtZTogJ3Byb2ZpbGUtc3RvcmUnXG4gICAgfVxuICApXG4pO1xuXG4vLyBQcm9maWxlIHN0b3JlIHNlbGVjdG9ycyBmb3IgY29tbW9uIHVzZSBjYXNlc1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVTZWxlY3RvcnMgPSB7XG4gIC8vIEJhc2ljIHByb2ZpbGUgZGF0YVxuICBwcm9maWxlOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUucHJvZmlsZSxcbiAgdXNlclByb2ZpbGU6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS51c2VyUHJvZmlsZSxcbiAgXG4gIC8vIFByb2ZpbGUgc3RhdGVcbiAgaXNQcm9maWxlTG9hZGVkOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUuaXNQcm9maWxlTG9hZGVkLFxuICBpc1Byb2ZpbGVDb21wbGV0ZTogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzUHJvZmlsZUNvbXBsZXRlLFxuICBwcm9maWxlQ29tcGxldGVuZXNzOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUucHJvZmlsZUNvbXBsZXRlbmVzcyxcbiAgbWlzc2luZ0ZpZWxkczogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLm1pc3NpbmdGaWVsZHMsXG4gIFxuICAvLyBMb2FkaW5nIHN0YXRlc1xuICBpc0xvYWRpbmc6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nIHx8IHN0YXRlLmlzVXBkYXRpbmcsXG4gIGlzVXBkYXRpbmc6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5pc1VwZGF0aW5nLFxuICBpc1VwbG9hZGluZ0F2YXRhcjogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzVXBsb2FkaW5nQXZhdGFyLFxuICBpc0V4cG9ydGluZzogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzRXhwb3J0aW5nLFxuICBcbiAgLy8gRXJyb3Igc3RhdGVzXG4gIGhhc0Vycm9yOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gISFzdGF0ZS5lcnJvcixcbiAgZXJyb3I6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5lcnJvcixcbiAgXG4gIC8vIFByb2ZpbGUgZGlzcGxheVxuICBkaXNwbGF5TmFtZTogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmdldERpc3BsYXlOYW1lKCksXG4gIGluaXRpYWxzOiAoc3RhdGU6IFByb2ZpbGVTdG9yZSkgPT4gc3RhdGUuZ2V0SW5pdGlhbHMoKSxcbiAgdHJ1c3RUaWVyRGlzcGxheTogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmdldFRydXN0VGllckRpc3BsYXkoKSxcbiAgaXNBZG1pbjogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLmlzQWRtaW4oKSxcbiAgXG4gIC8vIFByZWZlcmVuY2VzIGFuZCBzZXR0aW5nc1xuICBwcmVmZXJlbmNlczogKHN0YXRlOiBQcm9maWxlU3RvcmUpID0+IHN0YXRlLnByZWZlcmVuY2VzLFxuICBwcml2YWN5U2V0dGluZ3M6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS5wcml2YWN5U2V0dGluZ3MsXG4gIFxuICAvLyBWYWxpZGF0aW9uXG4gIHZhbGlkYXRpb25FcnJvcnM6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS52YWxpZGF0aW9uRXJyb3JzLFxuICB2YWxpZGF0aW9uV2FybmluZ3M6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBzdGF0ZS52YWxpZGF0aW9uV2FybmluZ3MsXG4gIGhhc1ZhbGlkYXRpb25FcnJvcnM6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBPYmplY3Qua2V5cyhzdGF0ZS52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwLFxuICBoYXNWYWxpZGF0aW9uV2FybmluZ3M6IChzdGF0ZTogUHJvZmlsZVN0b3JlKSA9PiBPYmplY3Qua2V5cyhzdGF0ZS52YWxpZGF0aW9uV2FybmluZ3MpLmxlbmd0aCA+IDBcbn07XG5cbi8vIFByb2ZpbGUgc3RvcmUgaG9va3MgZm9yIGNvbW1vbiBwYXR0ZXJuc1xuZXhwb3J0IGNvbnN0IHVzZVByb2ZpbGUgPSAoKSA9PiB1c2VQcm9maWxlU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBwcm9maWxlOiBzdGF0ZS5wcm9maWxlLFxuICB1c2VyUHJvZmlsZTogc3RhdGUudXNlclByb2ZpbGUsXG4gIGlzUHJvZmlsZUxvYWRlZDogc3RhdGUuaXNQcm9maWxlTG9hZGVkLFxuICBpc1Byb2ZpbGVDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gIHByb2ZpbGVDb21wbGV0ZW5lc3M6IHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MsXG4gIG1pc3NpbmdGaWVsZHM6IHN0YXRlLm1pc3NpbmdGaWVsZHNcbn0pKTtcblxuZXhwb3J0IGNvbnN0IHVzZVByb2ZpbGVMb2FkaW5nID0gKCkgPT4gdXNlUHJvZmlsZVN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgaXNMb2FkaW5nOiBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nLFxuICBpc1VwZGF0aW5nOiBzdGF0ZS5pc1VwZGF0aW5nLFxuICBpc1VwbG9hZGluZ0F2YXRhcjogc3RhdGUuaXNVcGxvYWRpbmdBdmF0YXIsXG4gIGlzRXhwb3J0aW5nOiBzdGF0ZS5pc0V4cG9ydGluZ1xufSkpO1xuXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZUVycm9yID0gKCkgPT4gdXNlUHJvZmlsZVN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgZXJyb3I6IHN0YXRlLmVycm9yLFxuICBoYXNFcnJvcjogISFzdGF0ZS5lcnJvclxufSkpO1xuXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZURpc3BsYXkgPSAoKSA9PiB1c2VQcm9maWxlU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBkaXNwbGF5TmFtZTogc3RhdGUuZ2V0RGlzcGxheU5hbWUoKSxcbiAgaW5pdGlhbHM6IHN0YXRlLmdldEluaXRpYWxzKCksXG4gIHRydXN0VGllckRpc3BsYXk6IHN0YXRlLmdldFRydXN0VGllckRpc3BsYXkoKSxcbiAgaXNBZG1pbjogc3RhdGUuaXNBZG1pbigpXG59KSk7XG5cbmV4cG9ydCBjb25zdCB1c2VQcm9maWxlVmFsaWRhdGlvbiA9ICgpID0+IHVzZVByb2ZpbGVTdG9yZSgoc3RhdGUpID0+ICh7XG4gIHZhbGlkYXRpb25FcnJvcnM6IHN0YXRlLnZhbGlkYXRpb25FcnJvcnMsXG4gIHZhbGlkYXRpb25XYXJuaW5nczogc3RhdGUudmFsaWRhdGlvbldhcm5pbmdzLFxuICBoYXNWYWxpZGF0aW9uRXJyb3JzOiBPYmplY3Qua2V5cyhzdGF0ZS52YWxpZGF0aW9uRXJyb3JzKS5sZW5ndGggPiAwLFxuICBoYXNWYWxpZGF0aW9uV2FybmluZ3M6IE9iamVjdC5rZXlzKHN0YXRlLnZhbGlkYXRpb25XYXJuaW5ncykubGVuZ3RoID4gMFxufSkpO1xuXG5leHBvcnQgY29uc3QgdXNlUHJvZmlsZUFjdGlvbnMgPSAoKSA9PiB1c2VQcm9maWxlU3RvcmUoKHN0YXRlKSA9PiAoe1xuICB1cGRhdGVQcm9maWxlOiBzdGF0ZS51cGRhdGVQcm9maWxlLFxuICB1cGRhdGVQcmVmZXJlbmNlczogc3RhdGUudXBkYXRlUHJlZmVyZW5jZXMsXG4gIHVwZGF0ZVByaXZhY3lTZXR0aW5nczogc3RhdGUudXBkYXRlUHJpdmFjeVNldHRpbmdzLFxuICB1cGRhdGVBdmF0YXI6IHN0YXRlLnVwZGF0ZUF2YXRhcixcbiAgcmVtb3ZlQXZhdGFyOiBzdGF0ZS5yZW1vdmVBdmF0YXIsXG4gIGxvYWRQcm9maWxlOiBzdGF0ZS5sb2FkUHJvZmlsZSxcbiAgcmVmcmVzaFByb2ZpbGU6IHN0YXRlLnJlZnJlc2hQcm9maWxlLFxuICBleHBvcnRQcm9maWxlOiBzdGF0ZS5leHBvcnRQcm9maWxlLFxuICBkZWxldGVQcm9maWxlOiBzdGF0ZS5kZWxldGVQcm9maWxlLFxuICB2YWxpZGF0ZVByb2ZpbGU6IHN0YXRlLnZhbGlkYXRlUHJvZmlsZSxcbiAgc2V0VmFsaWRhdGlvbkVycm9yczogc3RhdGUuc2V0VmFsaWRhdGlvbkVycm9ycyxcbiAgY2xlYXJWYWxpZGF0aW9uOiBzdGF0ZS5jbGVhclZhbGlkYXRpb25cbn0pKTtcblxuZXhwb3J0IGNvbnN0IHVzZVByb2ZpbGVTdGF0cyA9ICgpID0+IHVzZVByb2ZpbGVTdG9yZSgoc3RhdGUpID0+ICh7XG4gIGlzUHJvZmlsZUxvYWRlZDogc3RhdGUuaXNQcm9maWxlTG9hZGVkLFxuICBpc1Byb2ZpbGVDb21wbGV0ZTogc3RhdGUuaXNQcm9maWxlQ29tcGxldGUsXG4gIHByb2ZpbGVDb21wbGV0ZW5lc3M6IHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MsXG4gIG1pc3NpbmdGaWVsZHM6IHN0YXRlLm1pc3NpbmdGaWVsZHMsXG4gIGhhc1ByZWZlcmVuY2VzOiAhIXN0YXRlLnByZWZlcmVuY2VzLFxuICBoYXNQcml2YWN5U2V0dGluZ3M6ICEhc3RhdGUucHJpdmFjeVNldHRpbmdzXG59KSk7XG5cbi8vIFByb2ZpbGUgc3RvcmUgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgcHJvZmlsZVN0b3JlVXRpbHMgPSB7XG4gIC8vIEluaXRpYWxpemUgcHJvZmlsZSBzdG9yZVxuICBpbml0aWFsaXplOiAoKSA9PiB7XG4gICAgbG9nZ2VyLmluZm8oJ1Byb2ZpbGUgc3RvcmUgaW5pdGlhbGl6ZWQnKTtcbiAgfSxcbiAgXG4gIC8vIFJlc2V0IHByb2ZpbGUgc3RvcmVcbiAgcmVzZXQ6ICgpID0+IHtcbiAgICB1c2VQcm9maWxlU3RvcmUuZ2V0U3RhdGUoKS5yZXNldFByb2ZpbGUoKTtcbiAgICBsb2dnZXIuaW5mbygnUHJvZmlsZSBzdG9yZSByZXNldCcpO1xuICB9LFxuICBcbiAgLy8gR2V0IHByb2ZpbGUgY29tcGxldGVuZXNzXG4gIGdldENvbXBsZXRlbmVzczogKCkgPT4ge1xuICAgIHJldHVybiB1c2VQcm9maWxlU3RvcmUuZ2V0U3RhdGUoKS5nZXRQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gIH0sXG4gIFxuICAvLyBWYWxpZGF0ZSBwcm9maWxlIGRhdGFcbiAgdmFsaWRhdGU6IChkYXRhOiBQcm9maWxlVXBkYXRlRGF0YSkgPT4ge1xuICAgIHJldHVybiB1c2VQcm9maWxlU3RvcmUuZ2V0U3RhdGUoKS52YWxpZGF0ZVByb2ZpbGUoZGF0YSk7XG4gIH0sXG4gIFxuICAvLyBHZXQgcHJvZmlsZSBkaXNwbGF5IGluZm9cbiAgZ2V0RGlzcGxheUluZm86ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVByb2ZpbGVTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwbGF5TmFtZTogc3RhdGUuZ2V0RGlzcGxheU5hbWUoKSxcbiAgICAgIGluaXRpYWxzOiBzdGF0ZS5nZXRJbml0aWFscygpLFxuICAgICAgdHJ1c3RUaWVyOiBzdGF0ZS5nZXRUcnVzdFRpZXJEaXNwbGF5KCksXG4gICAgICBpc0FkbWluOiBzdGF0ZS5pc0FkbWluKClcbiAgICB9O1xuICB9XG59O1xuXG4vLyBQcm9maWxlIHN0b3JlIHN1YnNjcmlwdGlvbnNcbmV4cG9ydCBjb25zdCBwcm9maWxlU3RvcmVTdWJzY3JpcHRpb25zID0ge1xuICAvLyBTdWJzY3JpYmUgdG8gcHJvZmlsZSBjaGFuZ2VzXG4gIG9uUHJvZmlsZUNoYW5nZTogKGNhbGxiYWNrOiAocHJvZmlsZTogUHJvZmlsZVVzZXIgfCBudWxsKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV0dXJuIHVzZVByb2ZpbGVTdG9yZS5zdWJzY3JpYmUoXG4gICAgICAoc3RhdGUsIHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBpZiAoc3RhdGUucHJvZmlsZSAhPT0gcHJldlN0YXRlLnByb2ZpbGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhzdGF0ZS5wcm9maWxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH0sXG4gIFxuICAvLyBTdWJzY3JpYmUgdG8gcHJvZmlsZSBjb21wbGV0ZW5lc3MgY2hhbmdlc1xuICBvbkNvbXBsZXRlbmVzc0NoYW5nZTogKGNhbGxiYWNrOiAoY29tcGxldGVuZXNzOiBQcm9maWxlQ29tcGxldGVuZXNzKSA9PiB2b2lkKSA9PiB7XG4gICAgcmV0dXJuIHVzZVByb2ZpbGVTdG9yZS5zdWJzY3JpYmUoXG4gICAgICAoc3RhdGUsIHByZXZTdGF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gc3RhdGUuZ2V0UHJvZmlsZUNvbXBsZXRlbmVzcygpO1xuICAgICAgICBjb25zdCBwcmV2aW91cyA9IHByZXZTdGF0ZS5nZXRQcm9maWxlQ29tcGxldGVuZXNzKCk7XG4gICAgICAgIGlmIChjdXJyZW50ICE9PSBwcmV2aW91cykge1xuICAgICAgICAgIGNhbGxiYWNrKGN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfSxcbiAgXG4gIC8vIFN1YnNjcmliZSB0byBsb2FkaW5nIHN0YXRlIGNoYW5nZXNcbiAgb25Mb2FkaW5nQ2hhbmdlOiAoY2FsbGJhY2s6IChpc0xvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlUHJvZmlsZVN0b3JlLnN1YnNjcmliZShcbiAgICAgIChzdGF0ZSwgcHJldlN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBzdGF0ZS5pc1Byb2ZpbGVMb2FkaW5nIHx8IHN0YXRlLmlzVXBkYXRpbmc7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzID0gcHJldlN0YXRlLmlzUHJvZmlsZUxvYWRpbmcgfHwgcHJldlN0YXRlLmlzVXBkYXRpbmc7XG4gICAgICAgIGlmIChjdXJyZW50ICE9PSBwcmV2aW91cykge1xuICAgICAgICAgIGNhbGxiYWNrKGN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxufTtcblxuLy8gUHJvZmlsZSBzdG9yZSBkZWJ1Z2dpbmdcbmV4cG9ydCBjb25zdCBwcm9maWxlU3RvcmVEZWJ1ZyA9IHtcbiAgLy8gTG9nIGN1cnJlbnQgc3RhdGVcbiAgbG9nU3RhdGU6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZVByb2ZpbGVTdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGxvZ2dlci5kZWJ1ZygnUHJvZmlsZSBTdG9yZSBTdGF0ZScsIHtcbiAgICAgIHByb2ZpbGU6IHN0YXRlLnByb2ZpbGUsXG4gICAgICBpc1Byb2ZpbGVMb2FkZWQ6IHN0YXRlLmlzUHJvZmlsZUxvYWRlZCxcbiAgICAgIGlzUHJvZmlsZUNvbXBsZXRlOiBzdGF0ZS5pc1Byb2ZpbGVDb21wbGV0ZSxcbiAgICAgIHByb2ZpbGVDb21wbGV0ZW5lc3M6IHN0YXRlLnByb2ZpbGVDb21wbGV0ZW5lc3MsXG4gICAgICBpc0xvYWRpbmc6IHN0YXRlLmlzUHJvZmlsZUxvYWRpbmcsXG4gICAgICBpc1VwZGF0aW5nOiBzdGF0ZS5pc1VwZGF0aW5nLFxuICAgICAgZXJyb3I6IHN0YXRlLmVycm9yXG4gICAgfSk7XG4gIH0sXG4gIFxuICAvLyBSZXNldCBzdG9yZVxuICByZXNldDogKCkgPT4ge1xuICAgIHByb2ZpbGVTdG9yZVV0aWxzLnJlc2V0KCk7XG4gIH0sXG4gIFxuICAvLyBDbGVhciBhbGwgZGF0YVxuICBjbGVhckFsbDogKCkgPT4ge1xuICAgIHVzZVByb2ZpbGVTdG9yZS5nZXRTdGF0ZSgpLmNsZWFyUHJvZmlsZSgpO1xuICAgIGxvZ2dlci5pbmZvKCdQcm9maWxlIHN0b3JlIGNsZWFyZWQnKTtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJwcm9maWxlU2VsZWN0b3JzIiwicHJvZmlsZVN0b3JlRGVidWciLCJwcm9maWxlU3RvcmVTdWJzY3JpcHRpb25zIiwicHJvZmlsZVN0b3JlVXRpbHMiLCJ1c2VQcm9maWxlIiwidXNlUHJvZmlsZUFjdGlvbnMiLCJ1c2VQcm9maWxlRGlzcGxheSIsInVzZVByb2ZpbGVFcnJvciIsInVzZVByb2ZpbGVMb2FkaW5nIiwidXNlUHJvZmlsZVN0YXRzIiwidXNlUHJvZmlsZVN0b3JlIiwidXNlUHJvZmlsZVZhbGlkYXRpb24iLCJjcmVhdGUiLCJkZXZ0b29scyIsInBlcnNpc3QiLCJpbW1lciIsInNldCIsImdldCIsInByb2ZpbGUiLCJ1c2VyUHJvZmlsZSIsImlzUHJvZmlsZUxvYWRlZCIsImlzUHJvZmlsZUNvbXBsZXRlIiwicHJvZmlsZUNvbXBsZXRlbmVzcyIsIm1pc3NpbmdGaWVsZHMiLCJpc0xvYWRpbmciLCJpc1Byb2ZpbGVMb2FkaW5nIiwiaXNVcGRhdGluZyIsImlzVXBsb2FkaW5nQXZhdGFyIiwiaXNFeHBvcnRpbmciLCJlcnJvciIsInZhbGlkYXRpb25FcnJvcnMiLCJ2YWxpZGF0aW9uV2FybmluZ3MiLCJwcmVmZXJlbmNlcyIsInByaXZhY3lTZXR0aW5ncyIsInNldExvYWRpbmciLCJsb2FkaW5nIiwic3RhdGUiLCJzZXRFcnJvciIsImNsZWFyRXJyb3IiLCJzZXRQcm9maWxlIiwidXBkYXRlUHJvZmlsZUNvbXBsZXRlbmVzcyIsInNldFVzZXJQcm9maWxlIiwicHJpdmFjeV9zZXR0aW5ncyIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGVzIiwidXBkYXRlUHJvZmlsZVNlcnZpY2UiLCJyZXN1bHQiLCJzdWNjZXNzIiwiZGF0YSIsIkVycm9yIiwibWVzc2FnZSIsInVwZGF0ZVByZWZlcmVuY2VzIiwidXBkYXRlUHJpdmFjeVNldHRpbmdzIiwic2V0dGluZ3MiLCJ1cGRhdGVBdmF0YXIiLCJmaWxlIiwidXBkYXRlUHJvZmlsZUF2YXRhciIsImF2YXRhcl91cmwiLCJyZW1vdmVBdmF0YXIiLCJjdXJyZW50U3RhdGUiLCJkaXNwbGF5X25hbWUiLCJ1bmRlZmluZWQiLCJsb2FkUHJvZmlsZSIsImdldEN1cnJlbnRQcm9maWxlIiwicmVmcmVzaFByb2ZpbGUiLCJleHBvcnRQcm9maWxlIiwiZXhwb3J0VXNlckRhdGEiLCJkZWxldGVQcm9maWxlIiwidmFsaWRhdGVQcm9maWxlIiwiZXJyb3JzIiwid2FybmluZ3MiLCJsZW5ndGgiLCJwdXNoIiwiYmlvIiwiaXNWYWxpZCIsInNldFZhbGlkYXRpb25FcnJvcnMiLCJzZXRWYWxpZGF0aW9uV2FybmluZ3MiLCJjbGVhclZhbGlkYXRpb24iLCJzZXRQcm9maWxlTG9hZGluZyIsInNldFVwZGF0aW5nIiwidXBkYXRpbmciLCJzZXRVcGxvYWRpbmdBdmF0YXIiLCJ1cGxvYWRpbmciLCJzZXRFeHBvcnRpbmciLCJleHBvcnRpbmciLCJyZXF1aXJlZEZpZWxkcyIsImZvckVhY2giLCJmaWVsZCIsInRyaW0iLCJyZXBsYWNlIiwiaXNDb21wbGV0ZSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJnZXRQcm9maWxlQ29tcGxldGVuZXNzIiwiZ2V0RGlzcGxheU5hbWUiLCJ1c2VybmFtZSIsImVtYWlsIiwic3BsaXQiLCJnZXRJbml0aWFscyIsImRpc3BsYXlOYW1lIiwibWFwIiwid29yZCIsImNoYXJBdCIsImpvaW4iLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZ2V0VHJ1c3RUaWVyRGlzcGxheSIsInRpZXJOYW1lcyIsInRydXN0X3RpZXIiLCJpc0FkbWluIiwiaXNfYWRtaW4iLCJyZXNldFByb2ZpbGUiLCJjbGVhclByb2ZpbGUiLCJuYW1lIiwicGFydGlhbGl6ZSIsImhhc0Vycm9yIiwiaW5pdGlhbHMiLCJ0cnVzdFRpZXJEaXNwbGF5IiwiaGFzVmFsaWRhdGlvbkVycm9ycyIsIk9iamVjdCIsImtleXMiLCJoYXNWYWxpZGF0aW9uV2FybmluZ3MiLCJoYXNQcmVmZXJlbmNlcyIsImhhc1ByaXZhY3lTZXR0aW5ncyIsImluaXRpYWxpemUiLCJsb2dnZXIiLCJpbmZvIiwicmVzZXQiLCJnZXRTdGF0ZSIsImdldENvbXBsZXRlbmVzcyIsInZhbGlkYXRlIiwiZ2V0RGlzcGxheUluZm8iLCJ0cnVzdFRpZXIiLCJvblByb2ZpbGVDaGFuZ2UiLCJjYWxsYmFjayIsInN1YnNjcmliZSIsInByZXZTdGF0ZSIsIm9uQ29tcGxldGVuZXNzQ2hhbmdlIiwiY3VycmVudCIsInByZXZpb3VzIiwib25Mb2FkaW5nQ2hhbmdlIiwibG9nU3RhdGUiLCJkZWJ1ZyIsImNsZWFyQWxsIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQzs7Ozs7Ozs7Ozs7SUFnbUJZQSxnQkFBZ0I7ZUFBaEJBOztJQThLQUMsaUJBQWlCO2VBQWpCQTs7SUF4Q0FDLHlCQUF5QjtlQUF6QkE7O0lBbkNBQyxpQkFBaUI7ZUFBakJBOztJQTVEQUMsVUFBVTtlQUFWQTs7SUFtQ0FDLGlCQUFpQjtlQUFqQkE7O0lBZEFDLGlCQUFpQjtlQUFqQkE7O0lBTEFDLGVBQWU7ZUFBZkE7O0lBUEFDLGlCQUFpQjtlQUFqQkE7O0lBeUNBQyxlQUFlO2VBQWZBOztJQXJsQkFDLGVBQWU7ZUFBZkE7O0lBK2pCQUMsb0JBQW9CO2VBQXBCQTs7O3lCQWpxQlU7NEJBQ0U7dUJBRUg7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