30014f7b2213d534d545b266ab76632c
/**
 * Debug Supabase Mock Test
 * 
 * This test is to debug why the Supabase mock is not working
 */ "use strict";
jest.mock("@/utils/supabase/server", ()=>({
        getSupabaseServerClient: jest.fn(()=>Promise.resolve(mockSupabaseClient))
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock the Supabase server client
const mockSupabaseClient = {
    from: jest.fn().mockReturnValue({
        select: jest.fn().mockReturnValue({
            eq: jest.fn().mockReturnValue({
                limit: jest.fn().mockResolvedValue({
                    data: [
                        {
                            id: "test-poll",
                            title: "Test Poll"
                        }
                    ],
                    error: null
                })
            })
        })
    })
};
(0, _globals.describe)("Debug Supabase Mock", ()=>{
    (0, _globals.beforeEach)(()=>{
        jest.clearAllMocks();
    });
    (0, _globals.it)("should mock getSupabaseServerClient correctly", async ()=>{
        const { getSupabaseServerClient } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../../utils/supabase/server")));
        const client = await getSupabaseServerClient();
        console.log("Mock client:", client);
        console.log("Mock client type:", typeof client);
        console.log("Mock client from:", typeof client.from);
        (0, _globals.expect)(client).toBeDefined();
        (0, _globals.expect)(client.from).toBeDefined();
        (0, _globals.expect)(typeof client.from).toBe("function");
    });
    (0, _globals.it)("should be able to call mock methods", async ()=>{
        const { getSupabaseServerClient } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../../../utils/supabase/server")));
        const client = await getSupabaseServerClient();
        console.log("Client from function:", client.from);
        console.log("Client from call result:", client.from("polls"));
        // This should work if the mock is applied correctly
        const fromResult = client.from("polls");
        console.log("From result:", fromResult);
        if (fromResult) {
            const selectResult = fromResult.select();
            console.log("Select result:", selectResult);
            const result = await selectResult.eq("status", "active").limit(10);
            console.log("Mock result:", result);
            (0, _globals.expect)(result).toBeDefined();
            (0, _globals.expect)(result.data).toBeDefined();
        } else {
            throw new Error("client.from() returned undefined");
        }
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvYXBpL2RlYnVnLXN1cGFiYXNlLW1vY2sudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERlYnVnIFN1cGFiYXNlIE1vY2sgVGVzdFxuICogXG4gKiBUaGlzIHRlc3QgaXMgdG8gZGVidWcgd2h5IHRoZSBTdXBhYmFzZSBtb2NrIGlzIG5vdCB3b3JraW5nXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuLy8gTW9jayB0aGUgU3VwYWJhc2Ugc2VydmVyIGNsaWVudFxuY29uc3QgbW9ja1N1cGFiYXNlQ2xpZW50ID0ge1xuICBmcm9tOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgZXE6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBsaW1pdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICBkYXRhOiBbeyBpZDogJ3Rlc3QtcG9sbCcsIHRpdGxlOiAnVGVzdCBQb2xsJyB9XSxcbiAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgfSksXG4gICAgICB9KSxcbiAgICB9KSxcbiAgfSksXG59O1xuXG5qZXN0Lm1vY2soJ0AvdXRpbHMvc3VwYWJhc2Uvc2VydmVyJywgKCkgPT4gKHtcbiAgZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQ6IGplc3QuZm4oKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG1vY2tTdXBhYmFzZUNsaWVudCkpLFxufSkpO1xuXG5kZXNjcmliZSgnRGVidWcgU3VwYWJhc2UgTW9jaycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbW9jayBnZXRTdXBhYmFzZVNlcnZlckNsaWVudCBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRTdXBhYmFzZVNlcnZlckNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL3NlcnZlcicpO1xuICAgIFxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ01vY2sgY2xpZW50OicsIGNsaWVudCk7XG4gICAgY29uc29sZS5sb2coJ01vY2sgY2xpZW50IHR5cGU6JywgdHlwZW9mIGNsaWVudCk7XG4gICAgY29uc29sZS5sb2coJ01vY2sgY2xpZW50IGZyb206JywgdHlwZW9mIGNsaWVudC5mcm9tKTtcbiAgICBcbiAgICBleHBlY3QoY2xpZW50KS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdChjbGllbnQuZnJvbSkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QodHlwZW9mIGNsaWVudC5mcm9tKS50b0JlKCdmdW5jdGlvbicpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gY2FsbCBtb2NrIG1ldGhvZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyBnZXRTdXBhYmFzZVNlcnZlckNsaWVudCB9ID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL3NlcnZlcicpO1xuICAgIFxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0NsaWVudCBmcm9tIGZ1bmN0aW9uOicsIGNsaWVudC5mcm9tKTtcbiAgICBjb25zb2xlLmxvZygnQ2xpZW50IGZyb20gY2FsbCByZXN1bHQ6JywgY2xpZW50LmZyb20oJ3BvbGxzJykpO1xuICAgIFxuICAgIC8vIFRoaXMgc2hvdWxkIHdvcmsgaWYgdGhlIG1vY2sgaXMgYXBwbGllZCBjb3JyZWN0bHlcbiAgICBjb25zdCBmcm9tUmVzdWx0ID0gY2xpZW50LmZyb20oJ3BvbGxzJyk7XG4gICAgY29uc29sZS5sb2coJ0Zyb20gcmVzdWx0OicsIGZyb21SZXN1bHQpO1xuICAgIFxuICAgIGlmIChmcm9tUmVzdWx0KSB7XG4gICAgICBjb25zdCBzZWxlY3RSZXN1bHQgPSBmcm9tUmVzdWx0LnNlbGVjdCgpO1xuICAgICAgY29uc29sZS5sb2coJ1NlbGVjdCByZXN1bHQ6Jywgc2VsZWN0UmVzdWx0KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VsZWN0UmVzdWx0LmVxKCdzdGF0dXMnLCAnYWN0aXZlJykubGltaXQoMTApO1xuICAgICAgY29uc29sZS5sb2coJ01vY2sgcmVzdWx0OicsIHJlc3VsdCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmRhdGEpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY2xpZW50LmZyb20oKSByZXR1cm5lZCB1bmRlZmluZWQnKTtcbiAgICB9XG4gIH0pO1xufSk7XG4iXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJnZXRTdXBhYmFzZVNlcnZlckNsaWVudCIsImZuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJtb2NrU3VwYWJhc2VDbGllbnQiLCJmcm9tIiwibW9ja1JldHVyblZhbHVlIiwic2VsZWN0IiwiZXEiLCJsaW1pdCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsImlkIiwidGl0bGUiLCJlcnJvciIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsImNsaWVudCIsImNvbnNvbGUiLCJsb2ciLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJmcm9tUmVzdWx0Iiwic2VsZWN0UmVzdWx0IiwicmVzdWx0IiwiRXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0NBSUM7QUFrQkRBLEtBQUtDLElBQUksQ0FBQywyQkFBMkIsSUFBTyxDQUFBO1FBQzFDQyx5QkFBeUJGLEtBQUtHLEVBQUUsQ0FBQyxJQUFNQyxRQUFRQyxPQUFPLENBQUNDO0lBQ3pELENBQUE7Ozs7eUJBbEJpRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWpELGtDQUFrQztBQUNsQyxNQUFNQSxxQkFBcUI7SUFDekJDLE1BQU1QLEtBQUtHLEVBQUUsR0FBR0ssZUFBZSxDQUFDO1FBQzlCQyxRQUFRVCxLQUFLRyxFQUFFLEdBQUdLLGVBQWUsQ0FBQztZQUNoQ0UsSUFBSVYsS0FBS0csRUFBRSxHQUFHSyxlQUFlLENBQUM7Z0JBQzVCRyxPQUFPWCxLQUFLRyxFQUFFLEdBQUdTLGlCQUFpQixDQUFDO29CQUNqQ0MsTUFBTTt3QkFBQzs0QkFBRUMsSUFBSTs0QkFBYUMsT0FBTzt3QkFBWTtxQkFBRTtvQkFDL0NDLE9BQU87Z0JBQ1Q7WUFDRjtRQUNGO0lBQ0Y7QUFDRjtBQU1BQyxJQUFBQSxpQkFBUSxFQUFDLHVCQUF1QjtJQUM5QkMsSUFBQUEsbUJBQVUsRUFBQztRQUNUbEIsS0FBS21CLGFBQWE7SUFDcEI7SUFFQUMsSUFBQUEsV0FBRSxFQUFDLGlEQUFpRDtRQUNsRCxNQUFNLEVBQUVsQix1QkFBdUIsRUFBRSxHQUFHLE1BQU0sbUVBQUEsUUFBTztRQUVqRCxNQUFNbUIsU0FBUyxNQUFNbkI7UUFFckJvQixRQUFRQyxHQUFHLENBQUMsZ0JBQWdCRjtRQUM1QkMsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQixPQUFPRjtRQUN4Q0MsUUFBUUMsR0FBRyxDQUFDLHFCQUFxQixPQUFPRixPQUFPZCxJQUFJO1FBRW5EaUIsSUFBQUEsZUFBTSxFQUFDSCxRQUFRSSxXQUFXO1FBQzFCRCxJQUFBQSxlQUFNLEVBQUNILE9BQU9kLElBQUksRUFBRWtCLFdBQVc7UUFDL0JELElBQUFBLGVBQU0sRUFBQyxPQUFPSCxPQUFPZCxJQUFJLEVBQUVtQixJQUFJLENBQUM7SUFDbEM7SUFFQU4sSUFBQUEsV0FBRSxFQUFDLHVDQUF1QztRQUN4QyxNQUFNLEVBQUVsQix1QkFBdUIsRUFBRSxHQUFHLE1BQU0sbUVBQUEsUUFBTztRQUVqRCxNQUFNbUIsU0FBUyxNQUFNbkI7UUFFckJvQixRQUFRQyxHQUFHLENBQUMseUJBQXlCRixPQUFPZCxJQUFJO1FBQ2hEZSxRQUFRQyxHQUFHLENBQUMsNEJBQTRCRixPQUFPZCxJQUFJLENBQUM7UUFFcEQsb0RBQW9EO1FBQ3BELE1BQU1vQixhQUFhTixPQUFPZCxJQUFJLENBQUM7UUFDL0JlLFFBQVFDLEdBQUcsQ0FBQyxnQkFBZ0JJO1FBRTVCLElBQUlBLFlBQVk7WUFDZCxNQUFNQyxlQUFlRCxXQUFXbEIsTUFBTTtZQUN0Q2EsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQks7WUFFOUIsTUFBTUMsU0FBUyxNQUFNRCxhQUFhbEIsRUFBRSxDQUFDLFVBQVUsVUFBVUMsS0FBSyxDQUFDO1lBQy9EVyxRQUFRQyxHQUFHLENBQUMsZ0JBQWdCTTtZQUU1QkwsSUFBQUEsZUFBTSxFQUFDSyxRQUFRSixXQUFXO1lBQzFCRCxJQUFBQSxlQUFNLEVBQUNLLE9BQU9oQixJQUFJLEVBQUVZLFdBQVc7UUFDakMsT0FBTztZQUNMLE1BQU0sSUFBSUssTUFBTTtRQUNsQjtJQUNGO0FBQ0YifQ==