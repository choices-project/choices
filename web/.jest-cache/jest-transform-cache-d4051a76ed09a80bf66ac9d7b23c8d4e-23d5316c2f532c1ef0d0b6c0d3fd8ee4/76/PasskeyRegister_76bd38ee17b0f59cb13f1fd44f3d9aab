eb3e9112ae3c5c11cf1907968ce42fd7
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    PasskeyRegister: function() {
        return PasskeyRegister;
    },
    default: function() {
        return _default;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _Fingerprint = require("lucide-react/dist/esm/icons/Fingerprint");
const _Loader2 = require("lucide-react/dist/esm/icons/Loader2");
const _CheckCircle = require("lucide-react/dist/esm/icons/CheckCircle");
const _AlertCircle = require("lucide-react/dist/esm/icons/AlertCircle");
const _Eye = require("lucide-react/dist/esm/icons/Eye");
const _EyeOff = require("lucide-react/dist/esm/icons/EyeOff");
const _Shield = require("lucide-react/dist/esm/icons/Shield");
const _Smartphone = require("lucide-react/dist/esm/icons/Smartphone");
const _Laptop = require("lucide-react/dist/esm/icons/Laptop");
const _react = /*#__PURE__*/ _interop_require_wildcard(require("react"));
const _alert = require("../../../components/ui/alert");
const _button = require("../../../components/ui/button");
const _card = require("../../../components/ui/card");
const _input = require("../../../components/ui/input");
const _label = require("../../../components/ui/label");
const _objects = require("../../../lib/utils/objects");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
function PasskeyRegister({ onSuccess, onError, className }) {
    const [isRegistering, setIsRegistering] = (0, _react.useState)(false);
    const [error, setError] = (0, _react.useState)(null);
    const [success, setSuccess] = (0, _react.useState)(false);
    const [showAdvanced, setShowAdvanced] = (0, _react.useState)(false);
    const [username, setUsername] = (0, _react.useState)("");
    const [displayName, setDisplayName] = (0, _react.useState)("");
    const isWebAuthnSupported = ()=>{
        return typeof window !== "undefined" && window.PublicKeyCredential && typeof window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable === "function";
    };
    const checkPlatformAuthenticator = async ()=>{
        if (!isWebAuthnSupported()) return false;
        try {
            return await window.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();
        } catch (err) {
            if (process.env.NODE_ENV === "development") {
                console.error("Error checking platform authenticator:", err);
            }
            return false;
        }
    };
    const handleRegister = async ()=>{
        if (!isWebAuthnSupported()) {
            setError("WebAuthn is not supported in this browser");
            onError?.("WebAuthn is not supported in this browser");
            return;
        }
        setIsRegistering(true);
        setError(null);
        setSuccess(false);
        try {
            // Check if platform authenticator is available
            const hasPlatformAuth = await checkPlatformAuthenticator();
            // Start WebAuthn registration
            const response = await fetch("/api/v1/auth/webauthn/register/options", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    username: username || undefined,
                    displayName: displayName || undefined
                })
            });
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.error || "Failed to start registration");
            }
            const credentialOptions = await response.json();
            // Create credential
            const credential = await navigator.credentials.create({
                publicKey: (0, _objects.withOptional)(credentialOptions, {
                    authenticatorSelection: (0, _objects.withOptional)(credentialOptions.authenticatorSelection, {
                        userVerification: "required",
                        authenticatorAttachment: hasPlatformAuth ? "platform" : "cross-platform"
                    })
                })
            });
            if (!credential) {
                throw new Error("Failed to create credential");
            }
            // Complete registration
            const completeResponse = await fetch("/api/v1/auth/webauthn/register/verify", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    id: credential.id,
                    rawId: Array.from(new Uint8Array(credential.rawId)),
                    response: {
                        attestationObject: Array.from(new Uint8Array(credential.response.attestationObject)),
                        clientDataJSON: Array.from(new Uint8Array(credential.response.clientDataJSON))
                    },
                    type: credential.type
                })
            });
            if (!completeResponse.ok) {
                const errorData = await completeResponse.json();
                throw new Error(errorData.error || "Failed to complete registration");
            }
            const result = await completeResponse.json();
            setSuccess(true);
            onSuccess?.(result);
        } catch (err) {
            const errorMessage = err instanceof Error ? err.message : "Registration failed";
            setError(errorMessage);
            onError?.(errorMessage);
        } finally{
            setIsRegistering(false);
        }
    };
    const getAuthenticatorIcon = ()=>{
        if (typeof window === "undefined") return /*#__PURE__*/ (0, _jsxruntime.jsx)(_Shield.Shield, {
            className: "h-6 w-6"
        });
        // Check if we're on a mobile device
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        return isMobile ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_Smartphone.Smartphone, {
            className: "h-6 w-6"
        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_Laptop.Laptop, {
            className: "h-6 w-6"
        });
    };
    if (!isWebAuthnSupported()) {
        return /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.Card, {
            className: className,
            children: /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardHeader, {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardTitle, {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_AlertCircle.AlertCircle, {
                                className: "h-5 w-5 text-red-500"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                children: "WebAuthn Not Supported"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardDescription, {
                        children: "Your browser does not support WebAuthn. Please use a modern browser or try a different authentication method."
                    })
                ]
            })
        });
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.Card, {
        className: className,
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardHeader, {
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)(_card.CardTitle, {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_Fingerprint.Fingerprint, {
                                className: "h-5 w-5 text-blue-600"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                children: "Register Passkey"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardDescription, {
                        children: "Create a secure passkey using your device's biometric authentication or security key"
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)(_card.CardContent, {
                className: "space-y-4",
                children: success ? /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "text-center space-y-4",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_CheckCircle.CheckCircle, {
                            className: "h-12 w-12 text-green-500 mx-auto"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                    className: "text-lg font-semibold text-green-700",
                                    children: "Registration Successful!"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    className: "text-gray-600",
                                    children: "Your passkey has been created and you can now use it to sign in."
                                })
                            ]
                        })
                    ]
                }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "space-y-4",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)(_button.Button, {
                                    variant: "ghost",
                                    size: "sm",
                                    onClick: ()=>setShowAdvanced(!showAdvanced),
                                    className: "flex items-center space-x-2",
                                    children: [
                                        showAdvanced ? /*#__PURE__*/ (0, _jsxruntime.jsx)(_EyeOff.EyeOff, {
                                            className: "h-4 w-4"
                                        }) : /*#__PURE__*/ (0, _jsxruntime.jsx)(_Eye.Eye, {
                                            className: "h-4 w-4"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                            children: [
                                                showAdvanced ? "Hide" : "Show",
                                                " Advanced Options"
                                            ]
                                        })
                                    ]
                                }),
                                showAdvanced && /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "space-y-4 p-4 bg-gray-50 rounded-lg",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_label.Label, {
                                                    htmlFor: "username",
                                                    children: "Username (Optional)"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_input.Input, {
                                                    id: "username",
                                                    value: username,
                                                    onChange: (e)=>setUsername(e.target.value),
                                                    placeholder: "Enter a username",
                                                    className: "mt-1"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: "text-xs text-gray-500 mt-1",
                                                    children: "Leave empty for usernameless authentication"
                                                })
                                            ]
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                            children: [
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_label.Label, {
                                                    htmlFor: "displayName",
                                                    children: "Display Name (Optional)"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_input.Input, {
                                                    id: "displayName",
                                                    value: displayName,
                                                    onChange: (e)=>setDisplayName(e.target.value),
                                                    placeholder: "Enter a display name",
                                                    className: "mt-1"
                                                }),
                                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                                    className: "text-xs text-gray-500 mt-1",
                                                    children: "This will be shown when you sign in"
                                                })
                                            ]
                                        })
                                    ]
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "flex items-center space-x-3 p-3 bg-blue-50 rounded-lg",
                            children: [
                                getAuthenticatorIcon(),
                                /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                    className: "flex-1",
                                    children: [
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-sm font-medium text-blue-900",
                                            children: "Device Authentication"
                                        }),
                                        /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                            className: "text-xs text-blue-700",
                                            children: "Your device will prompt you to use biometric authentication or enter your device passcode"
                                        })
                                    ]
                                })
                            ]
                        }),
                        error && /*#__PURE__*/ (0, _jsxruntime.jsxs)(_alert.Alert, {
                            variant: "destructive",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_AlertCircle.AlertCircle, {
                                    className: "h-4 w-4"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)(_alert.AlertDescription, {
                                    children: error
                                })
                            ]
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_button.Button, {
                            "data-testid": "webauthn-register",
                            onClick: handleRegister,
                            disabled: isRegistering,
                            className: "w-full",
                            size: "lg",
                            children: isRegistering ? /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Loader2.Loader2, {
                                        className: "h-4 w-4 mr-2 animate-spin"
                                    }),
                                    "Creating Passkey..."
                                ]
                            }) : /*#__PURE__*/ (0, _jsxruntime.jsxs)(_jsxruntime.Fragment, {
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Fingerprint.Fingerprint, {
                                        className: "h-4 w-4 mr-2"
                                    }),
                                    "Create Passkey"
                                ]
                            })
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                            className: "text-xs text-gray-500 space-y-1",
                            children: [
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    children: "• Your passkey is stored securely on your device"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    children: "• No passwords are transmitted or stored"
                                }),
                                /*#__PURE__*/ (0, _jsxruntime.jsx)("p", {
                                    children: "• Works with Touch ID, Face ID, Windows Hello, and security keys"
                                })
                            ]
                        })
                    ]
                })
            })
        ]
    });
}
const _default = PasskeyRegister;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9hdXRoL2NvbXBvbmVudHMvUGFzc2tleVJlZ2lzdGVyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IFxuICBGaW5nZXJwcmludCwgXG4gIExvYWRlcjIsIFxuICBDaGVja0NpcmNsZSwgXG4gIEFsZXJ0Q2lyY2xlLCBcbiAgRXllLCBcbiAgRXllT2ZmLFxuICBTaGllbGQsXG4gIFNtYXJ0cGhvbmUsXG4gIExhcHRvcFxufSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBBbGVydCwgQWxlcnREZXNjcmlwdGlvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9hbGVydCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdAL2NvbXBvbmVudHMvdWkvYnV0dG9uJztcbmltcG9ydCB7IENhcmQsIENhcmRDb250ZW50LCBDYXJkRGVzY3JpcHRpb24sIENhcmRIZWFkZXIsIENhcmRUaXRsZSB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9jYXJkJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2lucHV0JztcbmltcG9ydCB7IExhYmVsIH0gZnJvbSAnQC9jb21wb25lbnRzL3VpL2xhYmVsJztcbmltcG9ydCB7IHdpdGhPcHRpb25hbCB9IGZyb20gJ0AvbGliL3V0aWxzL29iamVjdHMnO1xuXG5pbnRlcmZhY2UgUGFzc2tleVJlZ2lzdGVyUHJvcHMge1xuICBvblN1Y2Nlc3M/OiAoY3JlZGVudGlhbDogdW5rbm93bikgPT4gdm9pZDtcbiAgb25FcnJvcj86IChlcnJvcjogc3RyaW5nKSA9PiB2b2lkO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBQYXNza2V5UmVnaXN0ZXIoe1xuICBvblN1Y2Nlc3MsXG4gIG9uRXJyb3IsXG4gIGNsYXNzTmFtZVxufTogUGFzc2tleVJlZ2lzdGVyUHJvcHMpIHtcbiAgY29uc3QgW2lzUmVnaXN0ZXJpbmcsIHNldElzUmVnaXN0ZXJpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbc3VjY2Vzcywgc2V0U3VjY2Vzc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93QWR2YW5jZWQsIHNldFNob3dBZHZhbmNlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZGlzcGxheU5hbWUsIHNldERpc3BsYXlOYW1lXSA9IHVzZVN0YXRlKCcnKTtcblxuICBjb25zdCBpc1dlYkF1dGhuU3VwcG9ydGVkID0gKCkgPT4ge1xuICAgIHJldHVybiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBcbiAgICAgICAgICAgd2luZG93LlB1YmxpY0tleUNyZWRlbnRpYWwgJiYgXG4gICAgICAgICAgIHR5cGVvZiB3aW5kb3cuUHVibGljS2V5Q3JlZGVudGlhbC5pc1VzZXJWZXJpZnlpbmdQbGF0Zm9ybUF1dGhlbnRpY2F0b3JBdmFpbGFibGUgPT09ICdmdW5jdGlvbic7XG4gIH07XG5cbiAgY29uc3QgY2hlY2tQbGF0Zm9ybUF1dGhlbnRpY2F0b3IgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpc1dlYkF1dGhuU3VwcG9ydGVkKCkpIHJldHVybiBmYWxzZTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHdpbmRvdy5QdWJsaWNLZXlDcmVkZW50aWFsLmlzVXNlclZlcmlmeWluZ1BsYXRmb3JtQXV0aGVudGljYXRvckF2YWlsYWJsZSgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHBsYXRmb3JtIGF1dGhlbnRpY2F0b3I6JywgZXJyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmVnaXN0ZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCFpc1dlYkF1dGhuU3VwcG9ydGVkKCkpIHtcbiAgICAgIHNldEVycm9yKCdXZWJBdXRobiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpO1xuICAgICAgb25FcnJvcj8uKCdXZWJBdXRobiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldElzUmVnaXN0ZXJpbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgc2V0U3VjY2VzcyhmYWxzZSk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgcGxhdGZvcm0gYXV0aGVudGljYXRvciBpcyBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGhhc1BsYXRmb3JtQXV0aCA9IGF3YWl0IGNoZWNrUGxhdGZvcm1BdXRoZW50aWNhdG9yKCk7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IFdlYkF1dGhuIHJlZ2lzdHJhdGlvblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS92MS9hdXRoL3dlYmF1dGhuL3JlZ2lzdGVyL29wdGlvbnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEuZXJyb3IgfHwgJ0ZhaWxlZCB0byBzdGFydCByZWdpc3RyYXRpb24nKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY3JlZGVudGlhbE9wdGlvbnMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICAgIC8vIENyZWF0ZSBjcmVkZW50aWFsXG4gICAgICBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgbmF2aWdhdG9yLmNyZWRlbnRpYWxzLmNyZWF0ZSh7XG4gICAgICAgIHB1YmxpY0tleTogd2l0aE9wdGlvbmFsKGNyZWRlbnRpYWxPcHRpb25zLCB7XG4gICAgICAgICAgYXV0aGVudGljYXRvclNlbGVjdGlvbjogd2l0aE9wdGlvbmFsKGNyZWRlbnRpYWxPcHRpb25zLmF1dGhlbnRpY2F0b3JTZWxlY3Rpb24sIHtcbiAgICAgICAgICAgIHVzZXJWZXJpZmljYXRpb246ICdyZXF1aXJlZCcsXG4gICAgICAgICAgICBhdXRoZW50aWNhdG9yQXR0YWNobWVudDogaGFzUGxhdGZvcm1BdXRoID8gJ3BsYXRmb3JtJyA6ICdjcm9zcy1wbGF0Zm9ybSdcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSkgYXMgUHVibGljS2V5Q3JlZGVudGlhbDtcblxuICAgICAgaWYgKCFjcmVkZW50aWFsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBjcmVkZW50aWFsJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbXBsZXRlIHJlZ2lzdHJhdGlvblxuICAgICAgY29uc3QgY29tcGxldGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3YxL2F1dGgvd2ViYXV0aG4vcmVnaXN0ZXIvdmVyaWZ5Jywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBpZDogY3JlZGVudGlhbC5pZCxcbiAgICAgICAgICByYXdJZDogQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShjcmVkZW50aWFsLnJhd0lkKSksXG4gICAgICAgICAgcmVzcG9uc2U6IHtcbiAgICAgICAgICAgIGF0dGVzdGF0aW9uT2JqZWN0OiBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KChjcmVkZW50aWFsLnJlc3BvbnNlIGFzIEF1dGhlbnRpY2F0b3JBdHRlc3RhdGlvblJlc3BvbnNlKS5hdHRlc3RhdGlvbk9iamVjdCkpLFxuICAgICAgICAgICAgY2xpZW50RGF0YUpTT046IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoY3JlZGVudGlhbC5yZXNwb25zZS5jbGllbnREYXRhSlNPTikpXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0eXBlOiBjcmVkZW50aWFsLnR5cGVcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFjb21wbGV0ZVJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IGNvbXBsZXRlUmVzcG9uc2UuanNvbigpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8ICdGYWlsZWQgdG8gY29tcGxldGUgcmVnaXN0cmF0aW9uJyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbXBsZXRlUmVzcG9uc2UuanNvbigpO1xuICAgICAgc2V0U3VjY2Vzcyh0cnVlKTtcbiAgICAgIG9uU3VjY2Vzcz8uKHJlc3VsdCk7XG5cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnUmVnaXN0cmF0aW9uIGZhaWxlZCc7XG4gICAgICBzZXRFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgb25FcnJvcj8uKGVycm9yTWVzc2FnZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzUmVnaXN0ZXJpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBnZXRBdXRoZW50aWNhdG9ySWNvbiA9ICgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiA8U2hpZWxkIGNsYXNzTmFtZT1cImgtNiB3LTZcIiAvPjtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiBhIG1vYmlsZSBkZXZpY2VcbiAgICBjb25zdCBpc01vYmlsZSA9IC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBcbiAgICByZXR1cm4gaXNNb2JpbGUgPyA8U21hcnRwaG9uZSBjbGFzc05hbWU9XCJoLTYgdy02XCIgLz4gOiA8TGFwdG9wIGNsYXNzTmFtZT1cImgtNiB3LTZcIiAvPjtcbiAgfTtcblxuICBpZiAoIWlzV2ViQXV0aG5TdXBwb3J0ZWQoKSkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2FyZCBjbGFzc05hbWU9e2NsYXNzTmFtZX0+XG4gICAgICAgIDxDYXJkSGVhZGVyPlxuICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwiaC01IHctNSB0ZXh0LXJlZC01MDBcIiAvPlxuICAgICAgICAgICAgPHNwYW4+V2ViQXV0aG4gTm90IFN1cHBvcnRlZDwvc3Bhbj5cbiAgICAgICAgICA8L0NhcmRUaXRsZT5cbiAgICAgICAgICA8Q2FyZERlc2NyaXB0aW9uPlxuICAgICAgICAgICAgWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgV2ViQXV0aG4uIFBsZWFzZSB1c2UgYSBtb2Rlcm4gYnJvd3NlciBvciB0cnkgYSBkaWZmZXJlbnQgYXV0aGVudGljYXRpb24gbWV0aG9kLlxuICAgICAgICAgIDwvQ2FyZERlc2NyaXB0aW9uPlxuICAgICAgICA8L0NhcmRIZWFkZXI+XG4gICAgICA8L0NhcmQ+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPENhcmQgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgPENhcmRIZWFkZXI+XG4gICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgPEZpbmdlcnByaW50IGNsYXNzTmFtZT1cImgtNSB3LTUgdGV4dC1ibHVlLTYwMFwiIC8+XG4gICAgICAgICAgPHNwYW4+UmVnaXN0ZXIgUGFzc2tleTwvc3Bhbj5cbiAgICAgICAgPC9DYXJkVGl0bGU+XG4gICAgICAgIDxDYXJkRGVzY3JpcHRpb24+XG4gICAgICAgICAgQ3JlYXRlIGEgc2VjdXJlIHBhc3NrZXkgdXNpbmcgeW91ciBkZXZpY2UmYXBvcztzIGJpb21ldHJpYyBhdXRoZW50aWNhdGlvbiBvciBzZWN1cml0eSBrZXlcbiAgICAgICAgPC9DYXJkRGVzY3JpcHRpb24+XG4gICAgICA8L0NhcmRIZWFkZXI+XG5cbiAgICAgIDxDYXJkQ29udGVudCBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAge3N1Y2Nlc3MgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIDxDaGVja0NpcmNsZSBjbGFzc05hbWU9XCJoLTEyIHctMTIgdGV4dC1ncmVlbi01MDAgbXgtYXV0b1wiIC8+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JlZW4tNzAwXCI+UmVnaXN0cmF0aW9uIFN1Y2Nlc3NmdWwhPC9oMz5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgIFlvdXIgcGFzc2tleSBoYXMgYmVlbiBjcmVhdGVkIGFuZCB5b3UgY2FuIG5vdyB1c2UgaXQgdG8gc2lnbiBpbi5cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHsvKiBBZHZhbmNlZCBPcHRpb25zICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgICAgIHZhcmlhbnQ9XCJnaG9zdFwiXG4gICAgICAgICAgICAgICAgc2l6ZT1cInNtXCJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWR2YW5jZWQoIXNob3dBZHZhbmNlZCl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtzaG93QWR2YW5jZWQgPyA8RXllT2ZmIGNsYXNzTmFtZT1cImgtNCB3LTRcIiAvPiA6IDxFeWUgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+fVxuICAgICAgICAgICAgICAgIDxzcGFuPntzaG93QWR2YW5jZWQgPyAnSGlkZScgOiAnU2hvdyd9IEFkdmFuY2VkIE9wdGlvbnM8L3NwYW4+XG4gICAgICAgICAgICAgIDwvQnV0dG9uPlxuXG4gICAgICAgICAgICAgIHtzaG93QWR2YW5jZWQgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00IHAtNCBiZy1ncmF5LTUwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPVwidXNlcm5hbWVcIj5Vc2VybmFtZSAoT3B0aW9uYWwpPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgaWQ9XCJ1c2VybmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3VzZXJuYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0VXNlcm5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgYSB1c2VybmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXQtMVwiXG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMCBtdC0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgTGVhdmUgZW1wdHkgZm9yIHVzZXJuYW1lbGVzcyBhdXRoZW50aWNhdGlvblxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPExhYmVsIGh0bWxGb3I9XCJkaXNwbGF5TmFtZVwiPkRpc3BsYXkgTmFtZSAoT3B0aW9uYWwpPC9MYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgPElucHV0XG4gICAgICAgICAgICAgICAgICAgICAgaWQ9XCJkaXNwbGF5TmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2Rpc3BsYXlOYW1lfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RGlzcGxheU5hbWUoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgYSBkaXNwbGF5IG5hbWVcIlxuICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTFcIlxuICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgIFRoaXMgd2lsbCBiZSBzaG93biB3aGVuIHlvdSBzaWduIGluXG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBEZXZpY2UgSW5mb3JtYXRpb24gKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBwLTMgYmctYmx1ZS01MCByb3VuZGVkLWxnXCI+XG4gICAgICAgICAgICAgIHtnZXRBdXRoZW50aWNhdG9ySWNvbigpfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ibHVlLTkwMFwiPkRldmljZSBBdXRoZW50aWNhdGlvbjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtYmx1ZS03MDBcIj5cbiAgICAgICAgICAgICAgICAgIFlvdXIgZGV2aWNlIHdpbGwgcHJvbXB0IHlvdSB0byB1c2UgYmlvbWV0cmljIGF1dGhlbnRpY2F0aW9uIG9yIGVudGVyIHlvdXIgZGV2aWNlIHBhc3Njb2RlXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogRXJyb3IgRGlzcGxheSAqL31cbiAgICAgICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgICAgIDxBbGVydCB2YXJpYW50PVwiZGVzdHJ1Y3RpdmVcIj5cbiAgICAgICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwiaC00IHctNFwiIC8+XG4gICAgICAgICAgICAgICAgPEFsZXJ0RGVzY3JpcHRpb24+e2Vycm9yfTwvQWxlcnREZXNjcmlwdGlvbj5cbiAgICAgICAgICAgICAgPC9BbGVydD5cbiAgICAgICAgICAgICl9XG5cbiAgICAgICAgICAgIHsvKiBSZWdpc3RlciBCdXR0b24gKi99XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIGRhdGEtdGVzdGlkPVwid2ViYXV0aG4tcmVnaXN0ZXJcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSZWdpc3Rlcn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUmVnaXN0ZXJpbmd9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbFwiXG4gICAgICAgICAgICAgIHNpemU9XCJsZ1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtpc1JlZ2lzdGVyaW5nID8gKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTQgdy00IG1yLTIgYW5pbWF0ZS1zcGluXCIgLz5cbiAgICAgICAgICAgICAgICAgIENyZWF0aW5nIFBhc3NrZXkuLi5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgPEZpbmdlcnByaW50IGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMlwiIC8+XG4gICAgICAgICAgICAgICAgICBDcmVhdGUgUGFzc2tleVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9CdXR0b24+XG5cbiAgICAgICAgICAgIHsvKiBTZWN1cml0eSBJbmZvcm1hdGlvbiAqL31cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIHNwYWNlLXktMVwiPlxuICAgICAgICAgICAgICA8cD7igKIgWW91ciBwYXNza2V5IGlzIHN0b3JlZCBzZWN1cmVseSBvbiB5b3VyIGRldmljZTwvcD5cbiAgICAgICAgICAgICAgPHA+4oCiIE5vIHBhc3N3b3JkcyBhcmUgdHJhbnNtaXR0ZWQgb3Igc3RvcmVkPC9wPlxuICAgICAgICAgICAgICA8cD7igKIgV29ya3Mgd2l0aCBUb3VjaCBJRCwgRmFjZSBJRCwgV2luZG93cyBIZWxsbywgYW5kIHNlY3VyaXR5IGtleXM8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgIDwvQ2FyZENvbnRlbnQ+XG4gICAgPC9DYXJkPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBQYXNza2V5UmVnaXN0ZXI7XG4iXSwibmFtZXMiOlsiUGFzc2tleVJlZ2lzdGVyIiwib25TdWNjZXNzIiwib25FcnJvciIsImNsYXNzTmFtZSIsImlzUmVnaXN0ZXJpbmciLCJzZXRJc1JlZ2lzdGVyaW5nIiwidXNlU3RhdGUiLCJlcnJvciIsInNldEVycm9yIiwic3VjY2VzcyIsInNldFN1Y2Nlc3MiLCJzaG93QWR2YW5jZWQiLCJzZXRTaG93QWR2YW5jZWQiLCJ1c2VybmFtZSIsInNldFVzZXJuYW1lIiwiZGlzcGxheU5hbWUiLCJzZXREaXNwbGF5TmFtZSIsImlzV2ViQXV0aG5TdXBwb3J0ZWQiLCJ3aW5kb3ciLCJQdWJsaWNLZXlDcmVkZW50aWFsIiwiaXNVc2VyVmVyaWZ5aW5nUGxhdGZvcm1BdXRoZW50aWNhdG9yQXZhaWxhYmxlIiwiY2hlY2tQbGF0Zm9ybUF1dGhlbnRpY2F0b3IiLCJlcnIiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjb25zb2xlIiwiaGFuZGxlUmVnaXN0ZXIiLCJoYXNQbGF0Zm9ybUF1dGgiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiRXJyb3IiLCJjcmVkZW50aWFsT3B0aW9ucyIsImNyZWRlbnRpYWwiLCJuYXZpZ2F0b3IiLCJjcmVkZW50aWFscyIsImNyZWF0ZSIsInB1YmxpY0tleSIsIndpdGhPcHRpb25hbCIsImF1dGhlbnRpY2F0b3JTZWxlY3Rpb24iLCJ1c2VyVmVyaWZpY2F0aW9uIiwiYXV0aGVudGljYXRvckF0dGFjaG1lbnQiLCJjb21wbGV0ZVJlc3BvbnNlIiwiaWQiLCJyYXdJZCIsIkFycmF5IiwiZnJvbSIsIlVpbnQ4QXJyYXkiLCJhdHRlc3RhdGlvbk9iamVjdCIsImNsaWVudERhdGFKU09OIiwidHlwZSIsInJlc3VsdCIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJnZXRBdXRoZW50aWNhdG9ySWNvbiIsIlNoaWVsZCIsImlzTW9iaWxlIiwidGVzdCIsInVzZXJBZ2VudCIsIlNtYXJ0cGhvbmUiLCJMYXB0b3AiLCJDYXJkIiwiQ2FyZEhlYWRlciIsIkNhcmRUaXRsZSIsIkFsZXJ0Q2lyY2xlIiwic3BhbiIsIkNhcmREZXNjcmlwdGlvbiIsIkZpbmdlcnByaW50IiwiQ2FyZENvbnRlbnQiLCJkaXYiLCJDaGVja0NpcmNsZSIsImgzIiwicCIsIkJ1dHRvbiIsInZhcmlhbnQiLCJzaXplIiwib25DbGljayIsIkV5ZU9mZiIsIkV5ZSIsIkxhYmVsIiwiaHRtbEZvciIsIklucHV0IiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiLCJwbGFjZWhvbGRlciIsIkFsZXJ0IiwiQWxlcnREZXNjcmlwdGlvbiIsImRhdGEtdGVzdGlkIiwiZGlzYWJsZWQiLCJMb2FkZXIyIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0lBNEJnQkEsZUFBZTtlQUFmQTs7SUFzUWhC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