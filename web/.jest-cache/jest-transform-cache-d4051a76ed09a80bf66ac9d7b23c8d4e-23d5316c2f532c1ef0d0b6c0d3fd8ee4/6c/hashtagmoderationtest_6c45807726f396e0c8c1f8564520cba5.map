{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/features/hashtags/hashtag-moderation.test.ts"],"sourcesContent":["/**\n * Hashtag Moderation Tests\n * \n * Comprehensive test suite for the hashtag moderation system\n * \n * Created: October 11, 2025\n * Status: âœ… ACTIVE\n */\n\n// Mock the Supabase client\nconst mockSupabase = {\n  from: jest.fn(() => ({\n    select: jest.fn(() => ({\n      eq: jest.fn(() => ({\n        single: jest.fn(() => Promise.resolve({ data: null, error: null }))\n      }))\n    })),\n    insert: jest.fn(() => ({\n      select: jest.fn(() => ({\n        single: jest.fn(() => Promise.resolve({ data: null, error: null }))\n      }))\n    })),\n    upsert: jest.fn(() => ({\n      select: jest.fn(() => ({\n        single: jest.fn(() => Promise.resolve({ data: null, error: null }))\n      }))\n    })),\n    update: jest.fn(() => ({\n      eq: jest.fn(() => Promise.resolve({ data: null, error: null }))\n    }))\n  })),\n  auth: {\n    getUser: jest.fn(() => Promise.resolve({ data: { user: { id: 'test-user' } }, error: null }))\n  }\n};\n\n// Mock the Supabase client\njest.mock('@/utils/supabase/server', () => ({\n  getSupabaseServerClient: jest.fn(() => Promise.resolve(mockSupabase))\n}));\n\n// Mock logger\njest.mock('@/lib/utils/logger', () => ({\n  logger: {\n    info: jest.fn(),\n    error: jest.fn(),\n    warn: jest.fn(),\n    debug: jest.fn()\n  }\n}));\n\ndescribe('Hashtag Moderation System', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n\n  describe('Moderation Constants', () => {\n    it('should have proper moderation constants', () => {\n      const MODERATION_CONSTANTS = {\n        SPAM_THRESHOLD: 0.8,\n        INAPPROPRIATE_THRESHOLD: 0.7,\n        MISLEADING_THRESHOLD: 0.6,\n        DUPLICATE_THRESHOLD: 0.9,\n        MAX_FLAGS_PER_HASHTAG: 10,\n        FLAG_COOLDOWN_HOURS: 24,\n        AUTO_APPROVE_HOURS: 72,\n        HUMAN_REVIEW_THRESHOLD: 0.5,\n        SPAM_KEYWORDS: [\n          'buy', 'sell', 'promo', 'discount', 'offer', 'deal',\n          'click', 'link', 'free', 'win', 'prize', 'money'\n        ],\n        INAPPROPRIATE_KEYWORDS: [\n          'hate', 'violence', 'explicit', 'nsfw', 'adult',\n          'illegal', 'harmful', 'dangerous'\n        ],\n        MISLEADING_PATTERNS: [\n          /fake/i, /scam/i, /fraud/i, /lie/i, /false/i\n        ]\n      };\n\n      expect(MODERATION_CONSTANTS.SPAM_THRESHOLD).toBe(0.8);\n      expect(MODERATION_CONSTANTS.INAPPROPRIATE_THRESHOLD).toBe(0.7);\n      expect(MODERATION_CONSTANTS.SPAM_KEYWORDS).toContain('buy');\n      expect(MODERATION_CONSTANTS.INAPPROPRIATE_KEYWORDS).toContain('hate');\n      expect(MODERATION_CONSTANTS.MISLEADING_PATTERNS).toHaveLength(5);\n    });\n  });\n\n  describe('Auto-Moderation Scoring', () => {\n    it('should calculate low score for clean hashtag', () => {\n      const calculateScore = (hashtagName: string): number => {\n        let score = 0;\n        const name = hashtagName.toLowerCase();\n        \n        // Spam keywords\n        const spamKeywords = ['buy', 'sell', 'promo', 'discount', 'offer', 'deal'];\n        const spamMatches = spamKeywords.filter(keyword => name.includes(keyword));\n        score += spamMatches.length * 0.3;\n\n        // Inappropriate keywords\n        const inappropriateKeywords = ['hate', 'violence', 'explicit', 'nsfw'];\n        const inappropriateMatches = inappropriateKeywords.filter(keyword => name.includes(keyword));\n        score += inappropriateMatches.length * 0.4;\n\n        // Misleading patterns\n        const misleadingPatterns = [/fake/i, /scam/i, /fraud/i, /lie/i, /false/i];\n        const misleadingMatches = misleadingPatterns.filter(pattern => pattern.test(name));\n        score += misleadingMatches.length * 0.2;\n\n        // Special characters\n        const specialCharCount = (name.match(/[^a-z0-9]/g) || []).length;\n        if (specialCharCount > name.length * 0.3) {\n          score += 0.2;\n        }\n\n        // Repetitive characters\n        const repetitivePattern = /(.)\\1{2,}/;\n        if (repetitivePattern.test(name)) {\n          score += 0.3;\n        }\n\n        return Math.min(score, 1.0);\n      };\n\n      // Test clean hashtag\n      expect(calculateScore('climate-change')).toBeLessThan(0.5);\n      \n      // Test spam hashtag\n      expect(calculateScore('buy-now-discount-promo')).toBeGreaterThan(0.7);\n      \n      // Test inappropriate hashtag\n      expect(calculateScore('hate-speech')).toBeGreaterThan(0.3);\n      \n      // Test misleading hashtag\n      expect(calculateScore('fake-news')).toBeGreaterThan(0.1);\n      \n      // Test repetitive hashtag\n      expect(calculateScore('aaaaa')).toBeGreaterThanOrEqual(0.3);\n    });\n  });\n\n  describe('String Similarity', () => {\n    it('should calculate string similarity correctly', () => {\n      const calculateSimilarity = (str1: string, str2: string): number => {\n        const longer = str1.length > str2.length ? str1 : str2;\n        const _shorter = str1.length > str2.length ? str2 : str1;\n        \n        if (longer.length === 0) return 1.0;\n        \n        // Simple Levenshtein distance calculation\n        const matrix = Array(str2.length + 1).fill(null).map(() => Array(str1.length + 1).fill(null));\n        \n        for (let i = 0; i <= str1.length; i++) matrix[0][i] = i;\n        for (let j = 0; j <= str2.length; j++) matrix[j][0] = j;\n        \n        for (let j = 1; j <= str2.length; j++) {\n          for (let i = 1; i <= str1.length; i++) {\n            const indicator = str1[i - 1] === str2[j - 1] ? 0 : 1;\n            matrix[j][i] = Math.min(\n              matrix[j][i - 1] + 1,\n              matrix[j - 1][i] + 1,\n              matrix[j - 1][i - 1] + indicator\n            );\n          }\n        }\n        \n        const editDistance = matrix[str2.length][str1.length];\n        return (longer.length - editDistance) / longer.length;\n      };\n\n      // Test identical strings\n      expect(calculateSimilarity('climate', 'climate')).toBe(1.0);\n      \n      // Test similar strings\n      expect(calculateSimilarity('climate', 'climte')).toBeGreaterThan(0.8);\n      \n      // Test different strings\n      expect(calculateSimilarity('climate', 'weather')).toBeLessThan(0.5);\n      \n      // Test empty strings\n      expect(calculateSimilarity('', '')).toBe(1.0);\n      expect(calculateSimilarity('climate', '')).toBe(0.0);\n    });\n  });\n\n  describe('Moderation Types', () => {\n    it('should validate moderation status types', () => {\n      const validStatuses = ['approved', 'pending', 'rejected', 'flagged'];\n      const validFlagTypes = ['inappropriate', 'spam', 'misleading', 'duplicate', 'other'];\n      const validFlagStatuses = ['pending', 'resolved', 'dismissed'];\n\n      expect(validStatuses).toContain('approved');\n      expect(validStatuses).toContain('pending');\n      expect(validStatuses).toContain('rejected');\n      expect(validStatuses).toContain('flagged');\n\n      expect(validFlagTypes).toContain('inappropriate');\n      expect(validFlagTypes).toContain('spam');\n      expect(validFlagTypes).toContain('misleading');\n      expect(validFlagTypes).toContain('duplicate');\n      expect(validFlagTypes).toContain('other');\n\n      expect(validFlagStatuses).toContain('pending');\n      expect(validFlagStatuses).toContain('resolved');\n      expect(validFlagStatuses).toContain('dismissed');\n    });\n\n    it('should validate moderation data structure', () => {\n      const mockModeration = {\n        hashtag_id: 'test-hashtag',\n        status: 'pending' as const,\n        moderated_at: '2025-10-11T00:00:00Z',\n        flags: [],\n        auto_moderation_score: 0.5,\n        human_review_required: false\n      };\n\n      expect(mockModeration.hashtag_id).toBe('test-hashtag');\n      expect(mockModeration.status).toBe('pending');\n      expect(mockModeration.auto_moderation_score).toBe(0.5);\n      expect(mockModeration.human_review_required).toBe(false);\n    });\n\n    it('should validate flag data structure', () => {\n      const mockFlag = {\n        id: 'flag-1',\n        hashtag_id: 'test-hashtag',\n        user_id: 'test-user',\n        flag_type: 'inappropriate' as const,\n        reason: 'Test flag',\n        created_at: '2025-10-11T00:00:00Z',\n        status: 'pending' as const\n      };\n\n      expect(mockFlag.id).toBe('flag-1');\n      expect(mockFlag.flag_type).toBe('inappropriate');\n      expect(mockFlag.status).toBe('pending');\n    });\n  });\n\n  describe('API Endpoints', () => {\n    it('should validate API endpoint structure', () => {\n      const apiEndpoints = {\n        flag: '/api/hashtags/flag',\n        moderate: '/api/hashtags/moderate',\n        queue: '/api/hashtags/moderation/queue',\n        status: '/api/hashtags/[id]/moderation'\n      };\n\n      expect(apiEndpoints.flag).toBe('/api/hashtags/flag');\n      expect(apiEndpoints.moderate).toBe('/api/hashtags/moderate');\n      expect(apiEndpoints.queue).toBe('/api/hashtags/moderation/queue');\n      expect(apiEndpoints.status).toBe('/api/hashtags/[id]/moderation');\n    });\n  });\n\n  describe('Component Props', () => {\n    it('should validate React component props structure', () => {\n      const mockHashtagModerationProps = {\n        hashtagId: 'test-hashtag',\n        hashtag: {\n          id: 'test-hashtag',\n          name: 'test-hashtag',\n          description: 'Test description'\n        },\n        showUserActions: true,\n        showAdminActions: false,\n        onModerationUpdate: (moderation: any) => {\n          console.log('Moderation updated:', moderation);\n        },\n        className: 'test-class'\n      };\n\n      expect(mockHashtagModerationProps.hashtagId).toBe('test-hashtag');\n      expect(mockHashtagModerationProps.showUserActions).toBe(true);\n      expect(mockHashtagModerationProps.showAdminActions).toBe(false);\n      expect(typeof mockHashtagModerationProps.onModerationUpdate).toBe('function');\n    });\n  });\n\n  describe('Moderation Statistics', () => {\n    it('should validate moderation statistics structure', () => {\n      const mockStats = {\n        total_hashtags: 100,\n        pending_review: 5,\n        approved: 80,\n        rejected: 10,\n        flagged: 3,\n        auto_approved: 75,\n        human_reviewed: 90,\n        flag_count: 15,\n        top_flag_types: [\n          { type: 'inappropriate', count: 8 },\n          { type: 'spam', count: 4 },\n          { type: 'misleading', count: 2 },\n          { type: 'duplicate', count: 1 }\n        ]\n      };\n\n      expect(mockStats.total_hashtags).toBeGreaterThan(0);\n      expect(mockStats.approved + mockStats.rejected + mockStats.flagged).toBeLessThanOrEqual(mockStats.total_hashtags);\n      expect(mockStats.top_flag_types).toHaveLength(4);\n      expect(mockStats.top_flag_types[0].type).toBe('inappropriate');\n      expect(mockStats.top_flag_types[0].count).toBe(8);\n    });\n  });\n\n  describe('Integration Tests', () => {\n    it('should handle complete moderation workflow', () => {\n      // Test the moderation workflow steps\n      const workflow = {\n        step1: 'User flags hashtag',\n        step2: 'Auto-moderation analyzes content',\n        step3: 'Admin reviews flagged content',\n        step4: 'Admin approves or rejects',\n        step5: 'Statistics are updated'\n      };\n\n      expect(workflow.step1).toBe('User flags hashtag');\n      expect(workflow.step2).toBe('Auto-moderation analyzes content');\n      expect(workflow.step3).toBe('Admin reviews flagged content');\n      expect(workflow.step4).toBe('Admin approves or rejects');\n      expect(workflow.step5).toBe('Statistics are updated');\n    });\n  });\n});"],"names":["jest","mock","getSupabaseServerClient","fn","Promise","resolve","mockSupabase","logger","info","error","warn","debug","from","select","eq","single","data","insert","upsert","update","auth","getUser","user","id","describe","beforeEach","clearAllMocks","afterEach","restoreAllMocks","it","MODERATION_CONSTANTS","SPAM_THRESHOLD","INAPPROPRIATE_THRESHOLD","MISLEADING_THRESHOLD","DUPLICATE_THRESHOLD","MAX_FLAGS_PER_HASHTAG","FLAG_COOLDOWN_HOURS","AUTO_APPROVE_HOURS","HUMAN_REVIEW_THRESHOLD","SPAM_KEYWORDS","INAPPROPRIATE_KEYWORDS","MISLEADING_PATTERNS","expect","toBe","toContain","toHaveLength","calculateScore","hashtagName","score","name","toLowerCase","spamKeywords","spamMatches","filter","keyword","includes","length","inappropriateKeywords","inappropriateMatches","misleadingPatterns","misleadingMatches","pattern","test","specialCharCount","match","repetitivePattern","Math","min","toBeLessThan","toBeGreaterThan","toBeGreaterThanOrEqual","calculateSimilarity","str1","str2","longer","_shorter","matrix","Array","fill","map","i","j","indicator","editDistance","validStatuses","validFlagTypes","validFlagStatuses","mockModeration","hashtag_id","status","moderated_at","flags","auto_moderation_score","human_review_required","mockFlag","user_id","flag_type","reason","created_at","apiEndpoints","flag","moderate","queue","mockHashtagModerationProps","hashtagId","hashtag","description","showUserActions","showAdminActions","onModerationUpdate","moderation","console","log","className","mockStats","total_hashtags","pending_review","approved","rejected","flagged","auto_approved","human_reviewed","flag_count","top_flag_types","type","count","toBeLessThanOrEqual","workflow","step1","step2","step3","step4","step5"],"mappings":"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"}