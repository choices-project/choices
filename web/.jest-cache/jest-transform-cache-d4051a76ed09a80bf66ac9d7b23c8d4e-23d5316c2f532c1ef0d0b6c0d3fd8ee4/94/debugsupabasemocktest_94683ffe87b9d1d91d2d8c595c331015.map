{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/api/debug-supabase-mock.test.ts"],"sourcesContent":["/**\n * Debug Supabase Mock Test\n * \n * This test is to debug why the Supabase mock is not working\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\n\n// Mock the Supabase server client\nconst mockSupabaseClient = {\n  from: jest.fn(() => ({\n    select: jest.fn(() => ({\n      eq: jest.fn(() => ({\n        limit: jest.fn().mockResolvedValue({\n          data: [{ id: 'test-poll', title: 'Test Poll' }],\n          error: null,\n        }),\n      })),\n    })),\n  })),\n};\n\njest.mock('@/utils/supabase/server', () => ({\n  getSupabaseServerClient: jest.fn(() => Promise.resolve(mockSupabaseClient)),\n}));\n\ndescribe('Debug Supabase Mock', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should mock getSupabaseServerClient correctly', async () => {\n    const { getSupabaseServerClient } = await import('@/utils/supabase/server');\n    \n    const client = await getSupabaseServerClient();\n    \n    console.log('Mock client:', client);\n    console.log('Mock client type:', typeof client);\n    console.log('Mock client from:', typeof client.from);\n    \n    expect(client).toBeDefined();\n    expect(client.from).toBeDefined();\n    expect(typeof client.from).toBe('function');\n  });\n\n  it('should be able to call mock methods', async () => {\n    const { getSupabaseServerClient } = await import('@/utils/supabase/server');\n    \n    const client = await getSupabaseServerClient();\n    \n    // This should work if the mock is applied correctly\n    const result = await client.from('polls').select().eq('status', 'active').limit(10);\n    \n    console.log('Mock result:', result);\n    \n    expect(result).toBeDefined();\n    expect(result.data).toBeDefined();\n  });\n});\n"],"names":["jest","mock","getSupabaseServerClient","fn","Promise","resolve","mockSupabaseClient","from","select","eq","limit","mockResolvedValue","data","id","title","error","describe","beforeEach","clearAllMocks","it","client","console","log","expect","toBeDefined","toBe","result"],"mappings":"AAAA;;;;CAIC;AAkBDA,KAAKC,IAAI,CAAC,2BAA2B,IAAO,CAAA;QAC1CC,yBAAyBF,KAAKG,EAAE,CAAC,IAAMC,QAAQC,OAAO,CAACC;IACzD,CAAA;;;;yBAlBiD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEjD,kCAAkC;AAClC,MAAMA,qBAAqB;IACzBC,MAAMP,KAAKG,EAAE,CAAC,IAAO,CAAA;YACnBK,QAAQR,KAAKG,EAAE,CAAC,IAAO,CAAA;oBACrBM,IAAIT,KAAKG,EAAE,CAAC,IAAO,CAAA;4BACjBO,OAAOV,KAAKG,EAAE,GAAGQ,iBAAiB,CAAC;gCACjCC,MAAM;oCAAC;wCAAEC,IAAI;wCAAaC,OAAO;oCAAY;iCAAE;gCAC/CC,OAAO;4BACT;wBACF,CAAA;gBACF,CAAA;QACF,CAAA;AACF;AAMAC,IAAAA,iBAAQ,EAAC,uBAAuB;IAC9BC,IAAAA,mBAAU,EAAC;QACTjB,KAAKkB,aAAa;IACpB;IAEAC,IAAAA,WAAE,EAAC,iDAAiD;QAClD,MAAM,EAAEjB,uBAAuB,EAAE,GAAG,MAAM,mEAAA,QAAO;QAEjD,MAAMkB,SAAS,MAAMlB;QAErBmB,QAAQC,GAAG,CAAC,gBAAgBF;QAC5BC,QAAQC,GAAG,CAAC,qBAAqB,OAAOF;QACxCC,QAAQC,GAAG,CAAC,qBAAqB,OAAOF,OAAOb,IAAI;QAEnDgB,IAAAA,eAAM,EAACH,QAAQI,WAAW;QAC1BD,IAAAA,eAAM,EAACH,OAAOb,IAAI,EAAEiB,WAAW;QAC/BD,IAAAA,eAAM,EAAC,OAAOH,OAAOb,IAAI,EAAEkB,IAAI,CAAC;IAClC;IAEAN,IAAAA,WAAE,EAAC,uCAAuC;QACxC,MAAM,EAAEjB,uBAAuB,EAAE,GAAG,MAAM,mEAAA,QAAO;QAEjD,MAAMkB,SAAS,MAAMlB;QAErB,oDAAoD;QACpD,MAAMwB,SAAS,MAAMN,OAAOb,IAAI,CAAC,SAASC,MAAM,GAAGC,EAAE,CAAC,UAAU,UAAUC,KAAK,CAAC;QAEhFW,QAAQC,GAAG,CAAC,gBAAgBI;QAE5BH,IAAAA,eAAM,EAACG,QAAQF,WAAW;QAC1BD,IAAAA,eAAM,EAACG,OAAOd,IAAI,EAAEY,WAAW;IACjC;AACF"}