{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/irv/irv-calculator.test.ts"],"sourcesContent":["/**\n * IRV Calculator Unit Tests\n * \n * Comprehensive unit tests for the Instant Runoff Voting calculator\n * using golden test cases and edge case scenarios\n * \n * Created: January 15, 2025\n * Updated: January 15, 2025\n */\n\nimport { describe, it, expect, beforeEach, afterEach, jest } from '@jest/globals';\nimport { IRVCalculator } from '@/lib/vote/irv-calculator';\nimport type { UserRanking } from '@/lib/vote/irv-calculator';\nimport { goldenTestCases, runGoldenTestCase, runAllGoldenTests } from './golden-cases';\n\n// Import V2 test setup\nimport { getMS } from '../../setup';\n// when not used in this test file\n\n// Define Candidate type locally since it's not exported from the calculator\ntype Candidate = {\n  id: string;\n  name: string;\n  party: string;\n}\n\n// Mock the logger\njest.mock('@/lib/utils/logger', () => ({\n  devLog: jest.fn()\n}));\n\ndescribe('IRV Calculator', () => {\n  let calculator: IRVCalculator;\n  let mockCandidates: Candidate[];\n  let mockRankings: UserRanking[];\n\n  beforeEach(() => {\n    mockCandidates = [\n      { id: 'A', name: 'Alice Johnson', party: 'Democrat' },\n      { id: 'B', name: 'Bob Smith', party: 'Republican' },\n      { id: 'C', name: 'Carol Davis', party: 'Independent' }\n    ];\n\n    mockRankings = [\n      {\n        pollId: 'test-poll',\n        userId: 'user-1',\n        ranking: ['A', 'B', 'C'],\n        createdAt: new Date()\n      },\n      {\n        pollId: 'test-poll',\n        userId: 'user-2',\n        ranking: ['B', 'A', 'C'],\n        createdAt: new Date()\n      },\n      {\n        pollId: 'test-poll',\n        userId: 'user-3',\n        ranking: ['C', 'A', 'B'],\n        createdAt: new Date()\n      }\n    ];\n\n    calculator = new IRVCalculator('test-poll', mockCandidates);\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Constructor and Initialization', () => {\n    it('should initialize with correct poll ID and candidates', () => {\n      expect(calculator.pollId).toBe('test-poll');\n      // The candidates property is a Map, so we need to check the Map contents\n      expect(calculator.candidates).toBeInstanceOf(Map);\n      expect(calculator.candidates.size).toBe(3);\n      expect(calculator.candidates.get('A')).toEqual(mockCandidates[0]);\n      expect(calculator.candidates.get('B')).toEqual(mockCandidates[1]);\n      expect(calculator.candidates.get('C')).toEqual(mockCandidates[2]);\n    });\n\n    it('should handle empty candidates array', () => {\n      const emptyCalculator = new IRVCalculator('test-poll', []);\n      expect(emptyCalculator.candidates).toBeInstanceOf(Map);\n      expect(emptyCalculator.candidates.size).toBe(0);\n    });\n\n    it('should handle candidates with write-ins', () => {\n      const candidatesWithWriteIns = [\n        ...mockCandidates,\n        { id: 'WRITE_IN_1', name: 'Write-in Candidate', isWriteIn: true }\n      ];\n      \n      const writeInCalculator = new IRVCalculator('test-poll', candidatesWithWriteIns);\n      expect(writeInCalculator.candidates).toBeInstanceOf(Map);\n      expect(writeInCalculator.candidates.size).toBe(4);\n      expect(writeInCalculator.candidates.get('WRITE_IN_1')).toEqual(candidatesWithWriteIns[3]);\n    });\n\n    it('should handle withdrawn candidates', () => {\n      const candidatesWithWithdrawn = [\n        ...mockCandidates,\n        { id: 'D', name: 'Withdrawn Candidate', isWithdrawn: true }\n      ];\n      \n      const withdrawnCalculator = new IRVCalculator('test-poll', candidatesWithWithdrawn);\n      expect(withdrawnCalculator.candidates).toBeInstanceOf(Map);\n      expect(withdrawnCalculator.candidates.size).toBe(4);\n      expect(withdrawnCalculator.candidates.get('D')).toEqual(candidatesWithWithdrawn[3]);\n    });\n  });\n\n  describe('Basic IRV Calculation', () => {\n    it('should calculate simple majority winner', () => {\n      const simpleRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-3',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(simpleRankings);\n      \n      expect(results.winner).toBe('A');\n      expect(results.totalVotes).toBe(3);\n      expect(results.rounds).toHaveLength(1);\n      const firstRound = results.rounds[0];\n      if (firstRound) {\n        expect(firstRound.votes).toEqual({ A: 2, B: 1, C: 0 });\n      }\n    });\n\n    it('should handle instant runoff elimination', () => {\n      const runoffRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['A', 'C', 'B'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-3',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-4',\n          ranking: ['B', 'C', 'A'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-5',\n          ranking: ['C', 'A', 'B'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(runoffRankings);\n      \n      expect(results.totalVotes).toBe(5);\n      expect(results.rounds.length).toBeGreaterThan(1);\n    });\n\n    it('should handle empty rankings', () => {\n      const results = calculator.calculateResults([]);\n      \n      expect(results.totalVotes).toBe(0);\n      expect(results.rounds).toHaveLength(0);\n      expect(results.winner).toBeNull();\n    });\n  });\n\n  describe('Golden Test Cases', () => {\n    it('should pass all golden test cases', () => {\n      const testResults = runAllGoldenTests();\n      \n      expect(testResults.totalTests).toBe(8);\n      expect(testResults.passedTests).toBe(8);\n      expect(testResults.failedTests).toBe(0);\n      \n      testResults.results.forEach(result => {\n        expect(result.passed).toBe(true);\n        expect(result.errors).toHaveLength(0);\n      });\n    });\n\n    it('should pass simple majority winner test case', () => {\n      const testCase = goldenTestCases[0]; // Simple majority winner\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Golden test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('A');\n    });\n\n    it('should pass tie-breaking scenario test case', () => {\n      const testCase = goldenTestCases[1]; // Tie-breaking scenario\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Tie-breaking test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('C');\n    });\n\n    it('should pass exhausted ballots test case', () => {\n      const testCase = goldenTestCases[2]; // Exhausted ballots\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Exhausted ballots test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('B');\n    });\n\n    it('should pass write-in candidates test case', () => {\n      const testCase = goldenTestCases[3]; // Write-in candidates\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Write-in candidates test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('B');\n    });\n\n    it('should pass fully exhausted ballots test case', () => {\n      const testCase = goldenTestCases[4]; // Fully exhausted ballots\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Fully exhausted ballots test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('B');\n    });\n\n    it('should pass withdrawn candidates test case', () => {\n      const testCase = goldenTestCases[5]; // Withdrawn candidates\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Withdrawn candidates test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('A');\n    });\n\n    it('should pass tie storm test case', () => {\n      const testCase = goldenTestCases[6]; // Tie storm\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('Tie storm test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('A');\n    });\n\n    it('should pass all same first choice test case', () => {\n      const testCase = goldenTestCases[7]; // All same first choice\n      const result = runGoldenTestCase(testCase);\n      \n      if (!result.passed) {\n        logger.info('All same first choice test case errors:', result.errors);\n        logger.info('Actual results:', JSON.stringify(result.actualResults, null, 2));\n        logger.info('Expected results:', JSON.stringify(result.expectedResults, null, 2));\n      }\n      \n      expect(result.passed).toBe(true);\n      expect(result.errors).toHaveLength(0);\n      expect(result.actualResults.winner).toBe('A');\n    });\n  });\n\n  describe('Edge Cases', () => {\n    it('should handle single candidate', () => {\n      const singleCandidate = [{ id: 'A', name: 'Only Candidate' }];\n      const singleCalculator = new IRVCalculator('test-poll', singleCandidate);\n      \n      const rankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = singleCalculator.calculateResults(rankings);\n      \n      expect(results.winner).toBe('A');\n      expect(results.totalVotes).toBe(1);\n      expect(results.rounds).toHaveLength(1);\n    });\n\n    it('should handle two candidates', () => {\n      const twoCandidates = [\n        { id: 'A', name: 'Candidate A' },\n        { id: 'B', name: 'Candidate B' }\n      ];\n      const twoCalculator = new IRVCalculator('test-poll', twoCandidates);\n      \n      const rankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = twoCalculator.calculateResults(rankings);\n      \n      expect(results.totalVotes).toBe(2);\n      expect(results.rounds).toHaveLength(1);\n    });\n\n    it('should handle all candidates tied', () => {\n      const rankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'C', 'A'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-3',\n          ranking: ['C', 'A', 'B'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(rankings);\n      \n      expect(results.totalVotes).toBe(3);\n      expect(results.rounds.length).toBeGreaterThan(1);\n      expect(results.winner).toBeDefined();\n    });\n\n    it('should handle rankings with missing candidates', () => {\n      const incompleteRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B'], // Missing C\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(incompleteRankings);\n      \n      expect(results.totalVotes).toBe(2);\n      expect(results.winner).toBeDefined();\n    });\n\n    it('should handle rankings with extra candidates', () => {\n      const extraRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C', 'D'], // Extra candidate D\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(extraRankings);\n      \n      expect(results.totalVotes).toBe(2);\n      expect(results.winner).toBeDefined();\n    });\n\n    it('should handle duplicate rankings', () => {\n      const duplicateRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'A', 'B'], // Duplicate A\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(duplicateRankings);\n      \n      expect(results.totalVotes).toBe(2);\n      expect(results.winner).toBeDefined();\n    });\n  });\n\n  describe('Performance Tests', () => {\n    it('should handle large number of votes efficiently', () => {\n      const largeRankings: UserRanking[] = [];\n      \n      // Generate 1000 votes\n      for (let i = 0; i < 1000; i++) {\n        const ranking = ['A', 'B', 'C'].sort(() => Math.random() - 0.5);\n        largeRankings.push({\n          pollId: 'test-poll',\n          userId: `user-${i}`,\n          ranking,\n          createdAt: new Date()\n        });\n      }\n\n      const startTime = Date.now();\n      const results = calculator.calculateResults(largeRankings);\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n      \n      expect(results.totalVotes).toBe(1000);\n      expect(duration).toBeLessThan(1000); // Should complete in under 1 second\n    });\n\n    it('should handle large number of candidates efficiently', () => {\n      const manyCandidates: Candidate[] = Array.from({ length: 20 }, (_, i) => ({\n        id: `candidate-${i}`,\n        name: `Candidate ${i}`,\n        party: 'Independent'\n      }));\n      \n      const manyCalculator = new IRVCalculator('test-poll', manyCandidates);\n      \n      const rankings: UserRanking[] = Array.from({ length: 100 }, (_, i) => ({\n        pollId: 'test-poll',\n        userId: `user-${i}`,\n        ranking: manyCandidates.map(c => c.id).sort(() => Math.random() - 0.5),\n        createdAt: new Date()\n      }));\n\n      const startTime = Date.now();\n      const results = manyCalculator.calculateResults(rankings);\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n      \n      expect(results.totalVotes).toBe(100);\n      expect(duration).toBeLessThan(2000); // Should complete in under 2 seconds\n    });\n  });\n\n  describe('Deterministic Tie-Breaking', () => {\n    it('should produce consistent results for identical inputs', () => {\n      const rankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-3',\n          ranking: ['C', 'A', 'B'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results1 = calculator.calculateResults(rankings);\n      const results2 = calculator.calculateResults(rankings);\n      \n      expect(results1.winner).toBe(results2.winner);\n      expect(results1.rounds).toEqual(results2.rounds);\n    });\n\n    it('should use poll-seeded hashing for tie-breaking', () => {\n      const tiedRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        }\n      ];\n\n      const calculator1 = new IRVCalculator('poll-1', mockCandidates);\n      const calculator2 = new IRVCalculator('poll-2', mockCandidates);\n      \n      const results1 = calculator1.calculateResults(tiedRankings);\n      const results2 = calculator2.calculateResults(tiedRankings);\n      \n      // Results should be deterministic but may differ between polls\n      expect(results1.winner).toBeDefined();\n      expect(results2.winner).toBeDefined();\n    });\n  });\n\n  describe('Metadata and Audit Trail', () => {\n    it('should include comprehensive metadata', () => {\n      const results = calculator.calculateResults(mockRankings);\n      \n      expect(results.metadata).toBeDefined();\n      expect(typeof results.metadata?.calculationTime).toBe('number');\n      expect(results.metadata?.calculationTime).toBeGreaterThanOrEqual(0);\n      expect(results.metadata?.tieBreaksUsed).toBeGreaterThanOrEqual(0);\n      expect(Array.isArray(results.metadata?.edgeCasesHandled)).toBe(true);\n    });\n\n    it('should track tie breaks used', () => {\n      const tiedRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['A', 'B', 'C'],\n          createdAt: new Date()\n        },\n        {\n          pollId: 'test-poll',\n          userId: 'user-2',\n          ranking: ['B', 'A', 'C'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(tiedRankings);\n      \n      expect(results.metadata?.tieBreaksUsed).toBeGreaterThanOrEqual(0);\n    });\n\n    it('should track edge cases handled', () => {\n      const results = calculator.calculateResults(mockRankings);\n      \n      expect(results.metadata?.edgeCasesHandled).toBeDefined();\n      expect(Array.isArray(results.metadata?.edgeCasesHandled)).toBe(true);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle malformed rankings gracefully', () => {\n      const malformedRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: null as any,\n          createdAt: new Date()\n        }\n      ];\n\n      // The calculator should handle malformed data gracefully, not throw\n      const results = calculator.calculateResults(malformedRankings);\n      expect(results.totalVotes).toBe(0);\n      expect(results.winner).toBeNull();\n    });\n\n    it('should handle rankings with invalid candidate IDs', () => {\n      const invalidRankings: UserRanking[] = [\n        {\n          pollId: 'test-poll',\n          userId: 'user-1',\n          ranking: ['INVALID_ID'],\n          createdAt: new Date()\n        }\n      ];\n\n      const results = calculator.calculateResults(invalidRankings);\n      \n      // Invalid candidate IDs should be treated as write-ins, resulting in 1 valid vote\n      expect(results.totalVotes).toBe(1);\n      expect(results.winner).toBe('INVALID_ID');\n    });\n  });\n});\n"],"names":["jest","mock","devLog","fn","describe","calculator","mockCandidates","mockRankings","beforeEach","id","name","party","pollId","userId","ranking","createdAt","Date","IRVCalculator","afterEach","clearAllMocks","it","expect","toBe","candidates","toBeInstanceOf","Map","size","get","toEqual","emptyCalculator","candidatesWithWriteIns","isWriteIn","writeInCalculator","candidatesWithWithdrawn","isWithdrawn","withdrawnCalculator","simpleRankings","results","calculateResults","winner","totalVotes","rounds","toHaveLength","firstRound","votes","A","B","C","runoffRankings","length","toBeGreaterThan","toBeNull","testResults","runAllGoldenTests","totalTests","passedTests","failedTests","forEach","result","passed","errors","testCase","goldenTestCases","runGoldenTestCase","logger","info","JSON","stringify","actualResults","expectedResults","singleCandidate","singleCalculator","rankings","twoCandidates","twoCalculator","toBeDefined","incompleteRankings","extraRankings","duplicateRankings","largeRankings","i","sort","Math","random","push","startTime","now","endTime","duration","toBeLessThan","manyCandidates","Array","from","_","manyCalculator","map","c","results1","results2","tiedRankings","calculator1","calculator2","metadata","calculationTime","toBeGreaterThanOrEqual","tieBreaksUsed","isArray","edgeCasesHandled","malformedRankings","invalidRankings"],"mappings":"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"}