443a974589303bb8d8b39d5691a35227
/**
 * useSocialSharing Hook Tests
 * 
 * Comprehensive tests for the social sharing hook functionality
 * including platform-specific sharing, native sharing, and analytics tracking.
 * 
 * Created: January 23, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _react = require("@testing-library/react");
const _useSocialSharing = require("../../../../hooks/useSocialSharing");
// Mock fetch for API calls
global.fetch = jest.fn();
// Mock navigator.share
Object.defineProperty(navigator, 'share', {
    value: jest.fn(),
    writable: true
});
// Mock window.open
Object.defineProperty(window, 'open', {
    value: jest.fn(),
    writable: true
});
describe('useSocialSharing', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
        global.fetch.mockResolvedValue({
            ok: true,
            json: ()=>Promise.resolve({
                    success: true
                })
        });
    });
    describe('Platform-specific sharing', ()=>{
        it('should share to Twitter', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                description: 'Check out this poll!',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll',
                placement: 'feed'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('twitter', sharingOptions);
                expect(response.success).toBe(true);
                expect(response.platform).toBe('twitter');
            });
            expect(window.open).toHaveBeenCalledWith(expect.stringContaining('twitter.com/intent/tweet'), '_blank', 'width=600,height=400');
        });
        it('should share to Facebook', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('facebook', sharingOptions);
                expect(response.success).toBe(true);
                expect(response.platform).toBe('facebook');
            });
            expect(window.open).toHaveBeenCalledWith(expect.stringContaining('facebook.com/sharer'), '_blank', 'width=600,height=400');
        });
        it('should share to LinkedIn', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('linkedin', sharingOptions);
                expect(response.success).toBe(true);
                expect(response.platform).toBe('linkedin');
            });
            expect(window.open).toHaveBeenCalledWith(expect.stringContaining('linkedin.com/sharing'), '_blank', 'width=600,height=400');
        });
        it('should share via email', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                description: 'Check out this poll!',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('email', sharingOptions);
                expect(response.success).toBe(true);
                expect(response.platform).toBe('email');
            });
            expect(window.open).toHaveBeenCalledWith(expect.stringContaining('mailto:'), '_blank', 'width=600,height=400');
        });
        it('should handle unsupported platform', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('unsupported', sharingOptions);
                expect(response.success).toBe(false);
                expect(response.error).toContain('Unsupported platform');
            });
        });
    });
    describe('Native sharing', ()=>{
        it('should use native sharing when available', async ()=>{
            const mockShare = jest.fn().mockResolvedValue(undefined);
            Object.defineProperty(navigator, 'share', {
                value: mockShare,
                writable: true
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                description: 'Check out this poll!',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareNative(sharingOptions);
                expect(response.success).toBe(true);
                expect(response.platform).toBe('native');
            });
            expect(mockShare).toHaveBeenCalledWith({
                title: 'Test Poll',
                text: 'Check out this poll!',
                url: 'https://choices.app/polls/123'
            });
        });
        it('should handle native sharing rejection', async ()=>{
            const mockShare = jest.fn().mockRejectedValue(new Error('User cancelled'));
            Object.defineProperty(navigator, 'share', {
                value: mockShare,
                writable: true
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareNative(sharingOptions);
                expect(response.success).toBe(false);
                expect(response.error).toContain('User cancelled');
            });
        });
        it('should handle missing native sharing', async ()=>{
            Object.defineProperty(navigator, 'share', {
                value: undefined,
                writable: true
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareNative(sharingOptions);
                expect(response.success).toBe(false);
                expect(response.error).toContain('Native sharing not supported');
            });
        });
    });
    describe('Clipboard sharing', ()=>{
        it('should copy to clipboard', async ()=>{
            const mockWriteText = jest.fn().mockResolvedValue(undefined);
            Object.defineProperty(navigator, 'clipboard', {
                value: {
                    writeText: mockWriteText
                },
                writable: true
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.copyToClipboard(sharingOptions);
                expect(response.success).toBe(true);
                expect(response.platform).toBe('clipboard');
            });
            expect(mockWriteText).toHaveBeenCalledWith('https://choices.app/polls/123');
        });
        it('should handle clipboard errors', async ()=>{
            const mockWriteText = jest.fn().mockRejectedValue(new Error('Clipboard access denied'));
            Object.defineProperty(navigator, 'clipboard', {
                value: {
                    writeText: mockWriteText
                },
                writable: true
            });
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.copyToClipboard(sharingOptions);
                expect(response.success).toBe(false);
                expect(response.error).toContain('Clipboard access denied');
            });
        });
    });
    describe('Analytics tracking', ()=>{
        it('should track share events', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll',
                placement: 'feed'
            };
            await (0, _react.act)(async ()=>{
                await result.current.shareToPlatform('twitter', sharingOptions);
            });
            expect(global.fetch).toHaveBeenCalledWith('/api/share', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    platform: 'twitter',
                    poll_id: '123',
                    placement: 'feed',
                    content_type: 'poll'
                })
            });
        });
        it('should handle analytics errors gracefully', async ()=>{
            global.fetch.mockRejectedValue(new Error('Network error'));
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('twitter', sharingOptions);
                // Should still succeed even if analytics fails
                expect(response.success).toBe(true);
            });
        });
    });
    describe('Error handling', ()=>{
        it('should clear errors', ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            (0, _react.act)(()=>{
                result.current.clearError();
            });
            expect(result.current.shareError).toBe(null);
        });
        it('should handle sharing when disabled', async ()=>{
            // Mock feature flag as disabled
            jest.doMock('@/lib/core/feature-flags', ()=>({
                    isFeatureEnabled: jest.fn(()=>false)
                }));
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            await (0, _react.act)(async ()=>{
                const response = await result.current.shareToPlatform('twitter', sharingOptions);
                expect(response.success).toBe(false);
                expect(response.error).toContain('Social sharing is disabled');
            });
        });
    });
    describe('Loading states', ()=>{
        it('should track loading state during sharing', async ()=>{
            const { result } = (0, _react.renderHook)(()=>(0, _useSocialSharing.useSocialSharing)());
            expect(result.current.isSharing).toBe(false);
            const sharingOptions = {
                title: 'Test Poll',
                url: 'https://choices.app/polls/123',
                pollId: '123',
                contentType: 'poll'
            };
            // Start sharing and check loading state
            let sharePromise;
            await (0, _react.act)(async ()=>{
                sharePromise = result.current.shareToPlatform('twitter', sharingOptions);
                // Check loading state during sharing
                expect(result.current.isSharing).toBe(true);
            });
            await (0, _react.act)(async ()=>{
                await sharePromise;
            });
            // Check loading state after sharing
            expect(result.current.isSharing).toBe(false);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvaG9va3MvdXNlU29jaWFsU2hhcmluZy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogdXNlU29jaWFsU2hhcmluZyBIb29rIFRlc3RzXG4gKiBcbiAqIENvbXByZWhlbnNpdmUgdGVzdHMgZm9yIHRoZSBzb2NpYWwgc2hhcmluZyBob29rIGZ1bmN0aW9uYWxpdHlcbiAqIGluY2x1ZGluZyBwbGF0Zm9ybS1zcGVjaWZpYyBzaGFyaW5nLCBuYXRpdmUgc2hhcmluZywgYW5kIGFuYWx5dGljcyB0cmFja2luZy5cbiAqIFxuICogQ3JlYXRlZDogSmFudWFyeSAyMywgMjAyNVxuICogU3RhdHVzOiDinIUgQUNUSVZFXG4gKi9cblxuaW1wb3J0IHsgcmVuZGVySG9vaywgYWN0IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgeyB1c2VTb2NpYWxTaGFyaW5nIH0gZnJvbSAnQC9ob29rcy91c2VTb2NpYWxTaGFyaW5nJztcblxuLy8gTW9jayBmZXRjaCBmb3IgQVBJIGNhbGxzXG5nbG9iYWwuZmV0Y2ggPSBqZXN0LmZuKCk7XG5cbi8vIE1vY2sgbmF2aWdhdG9yLnNoYXJlXG5PYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnc2hhcmUnLCB7XG4gIHZhbHVlOiBqZXN0LmZuKCksXG4gIHdyaXRhYmxlOiB0cnVlLFxufSk7XG5cbi8vIE1vY2sgd2luZG93Lm9wZW5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdvcGVuJywge1xuICB2YWx1ZTogamVzdC5mbigpLFxuICB3cml0YWJsZTogdHJ1ZSxcbn0pO1xuXG5kZXNjcmliZSgndXNlU29jaWFsU2hhcmluZycsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgKGdsb2JhbC5mZXRjaCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGxhdGZvcm0tc3BlY2lmaWMgc2hhcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNoYXJlIHRvIFR3aXR0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VTb2NpYWxTaGFyaW5nKCkpO1xuICAgICAgXG4gICAgICBjb25zdCBzaGFyaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBvbGwnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0NoZWNrIG91dCB0aGlzIHBvbGwhJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jaG9pY2VzLmFwcC9wb2xscy8xMjMnLFxuICAgICAgICBwb2xsSWQ6ICcxMjMnLFxuICAgICAgICBjb250ZW50VHlwZTogJ3BvbGwnIGFzIGNvbnN0LFxuICAgICAgICBwbGFjZW1lbnQ6ICdmZWVkJ1xuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5zaGFyZVRvUGxhdGZvcm0oJ3R3aXR0ZXInLCBzaGFyaW5nT3B0aW9ucyk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2UucGxhdGZvcm0pLnRvQmUoJ3R3aXR0ZXInKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3Qod2luZG93Lm9wZW4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nQ29udGFpbmluZygndHdpdHRlci5jb20vaW50ZW50L3R3ZWV0JyksXG4gICAgICAgICdfYmxhbmsnLFxuICAgICAgICAnd2lkdGg9NjAwLGhlaWdodD00MDAnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaGFyZSB0byBGYWNlYm9vaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNvY2lhbFNoYXJpbmcoKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNoYXJpbmdPcHRpb25zID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2hvaWNlcy5hcHAvcG9sbHMvMTIzJyxcbiAgICAgICAgcG9sbElkOiAnMTIzJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdwb2xsJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5zaGFyZVRvUGxhdGZvcm0oJ2ZhY2Vib29rJywgc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnBsYXRmb3JtKS50b0JlKCdmYWNlYm9vaycpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh3aW5kb3cub3BlbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdmYWNlYm9vay5jb20vc2hhcmVyJyksXG4gICAgICAgICdfYmxhbmsnLFxuICAgICAgICAnd2lkdGg9NjAwLGhlaWdodD00MDAnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzaGFyZSB0byBMaW5rZWRJbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNvY2lhbFNoYXJpbmcoKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNoYXJpbmdPcHRpb25zID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2hvaWNlcy5hcHAvcG9sbHMvMTIzJyxcbiAgICAgICAgcG9sbElkOiAnMTIzJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdwb2xsJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5zaGFyZVRvUGxhdGZvcm0oJ2xpbmtlZGluJywgc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnBsYXRmb3JtKS50b0JlKCdsaW5rZWRpbicpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh3aW5kb3cub3BlbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdsaW5rZWRpbi5jb20vc2hhcmluZycpLFxuICAgICAgICAnX2JsYW5rJyxcbiAgICAgICAgJ3dpZHRoPTYwMCxoZWlnaHQ9NDAwJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc2hhcmUgdmlhIGVtYWlsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU29jaWFsU2hhcmluZygpKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2hhcmluZ09wdGlvbnMgPSB7XG4gICAgICAgIHRpdGxlOiAnVGVzdCBQb2xsJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDaGVjayBvdXQgdGhpcyBwb2xsIScsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2hvaWNlcy5hcHAvcG9sbHMvMTIzJyxcbiAgICAgICAgcG9sbElkOiAnMTIzJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdwb2xsJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5zaGFyZVRvUGxhdGZvcm0oJ2VtYWlsJywgc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnBsYXRmb3JtKS50b0JlKCdlbWFpbCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdCh3aW5kb3cub3BlbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdtYWlsdG86JyksXG4gICAgICAgICdfYmxhbmsnLFxuICAgICAgICAnd2lkdGg9NjAwLGhlaWdodD00MDAnXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5zdXBwb3J0ZWQgcGxhdGZvcm0nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VTb2NpYWxTaGFyaW5nKCkpO1xuICAgICAgXG4gICAgICBjb25zdCBzaGFyaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBvbGwnLFxuICAgICAgICB1cmw6ICdodHRwczovL2Nob2ljZXMuYXBwL3BvbGxzLzEyMycsXG4gICAgICAgIHBvbGxJZDogJzEyMycsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAncG9sbCcgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2hhcmVUb1BsYXRmb3JtKCd1bnN1cHBvcnRlZCcgYXMgYW55LCBzaGFyaW5nT3B0aW9ucyk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmVycm9yKS50b0NvbnRhaW4oJ1Vuc3VwcG9ydGVkIHBsYXRmb3JtJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ05hdGl2ZSBzaGFyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdXNlIG5hdGl2ZSBzaGFyaW5nIHdoZW4gYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1NoYXJlID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnc2hhcmUnLCB7XG4gICAgICAgIHZhbHVlOiBtb2NrU2hhcmUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNvY2lhbFNoYXJpbmcoKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNoYXJpbmdPcHRpb25zID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hlY2sgb3V0IHRoaXMgcG9sbCEnLFxuICAgICAgICB1cmw6ICdodHRwczovL2Nob2ljZXMuYXBwL3BvbGxzLzEyMycsXG4gICAgICAgIHBvbGxJZDogJzEyMycsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAncG9sbCcgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2hhcmVOYXRpdmUoc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnBsYXRmb3JtKS50b0JlKCduYXRpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1NoYXJlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiAnVGVzdCBQb2xsJyxcbiAgICAgICAgdGV4dDogJ0NoZWNrIG91dCB0aGlzIHBvbGwhJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jaG9pY2VzLmFwcC9wb2xscy8xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5hdGl2ZSBzaGFyaW5nIHJlamVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tTaGFyZSA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1VzZXIgY2FuY2VsbGVkJykpO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3NoYXJlJywge1xuICAgICAgICB2YWx1ZTogbW9ja1NoYXJlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VTb2NpYWxTaGFyaW5nKCkpO1xuICAgICAgXG4gICAgICBjb25zdCBzaGFyaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBvbGwnLFxuICAgICAgICB1cmw6ICdodHRwczovL2Nob2ljZXMuYXBwL3BvbGxzLzEyMycsXG4gICAgICAgIHBvbGxJZDogJzEyMycsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAncG9sbCcgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2hhcmVOYXRpdmUoc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKCdVc2VyIGNhbmNlbGxlZCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIG5hdGl2ZSBzaGFyaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ3NoYXJlJywge1xuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VTb2NpYWxTaGFyaW5nKCkpO1xuICAgICAgXG4gICAgICBjb25zdCBzaGFyaW5nT3B0aW9ucyA9IHtcbiAgICAgICAgdGl0bGU6ICdUZXN0IFBvbGwnLFxuICAgICAgICB1cmw6ICdodHRwczovL2Nob2ljZXMuYXBwL3BvbGxzLzEyMycsXG4gICAgICAgIHBvbGxJZDogJzEyMycsXG4gICAgICAgIGNvbnRlbnRUeXBlOiAncG9sbCcgYXMgY29uc3RcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LmN1cnJlbnQuc2hhcmVOYXRpdmUoc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKCdOYXRpdmUgc2hhcmluZyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NsaXBib2FyZCBzaGFyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY29weSB0byBjbGlwYm9hcmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrV3JpdGVUZXh0ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnY2xpcGJvYXJkJywge1xuICAgICAgICB2YWx1ZTogeyB3cml0ZVRleHQ6IG1vY2tXcml0ZVRleHQgfSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU29jaWFsU2hhcmluZygpKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2hhcmluZ09wdGlvbnMgPSB7XG4gICAgICAgIHRpdGxlOiAnVGVzdCBQb2xsJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jaG9pY2VzLmFwcC9wb2xscy8xMjMnLFxuICAgICAgICBwb2xsSWQ6ICcxMjMnLFxuICAgICAgICBjb250ZW50VHlwZTogJ3BvbGwnIGFzIGNvbnN0XG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LmNvcHlUb0NsaXBib2FyZChzaGFyaW5nT3B0aW9ucyk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2UucGxhdGZvcm0pLnRvQmUoJ2NsaXBib2FyZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChtb2NrV3JpdGVUZXh0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaHR0cHM6Ly9jaG9pY2VzLmFwcC9wb2xscy8xMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNsaXBib2FyZCBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrV3JpdGVUZXh0ID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQ2xpcGJvYXJkIGFjY2VzcyBkZW5pZWQnKSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnY2xpcGJvYXJkJywge1xuICAgICAgICB2YWx1ZTogeyB3cml0ZVRleHQ6IG1vY2tXcml0ZVRleHQgfSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU29jaWFsU2hhcmluZygpKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2hhcmluZ09wdGlvbnMgPSB7XG4gICAgICAgIHRpdGxlOiAnVGVzdCBQb2xsJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jaG9pY2VzLmFwcC9wb2xscy8xMjMnLFxuICAgICAgICBwb2xsSWQ6ICcxMjMnLFxuICAgICAgICBjb250ZW50VHlwZTogJ3BvbGwnIGFzIGNvbnN0XG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LmNvcHlUb0NsaXBib2FyZChzaGFyaW5nT3B0aW9ucyk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmVycm9yKS50b0NvbnRhaW4oJ0NsaXBib2FyZCBhY2Nlc3MgZGVuaWVkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0FuYWx5dGljcyB0cmFja2luZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHRyYWNrIHNoYXJlIGV2ZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNvY2lhbFNoYXJpbmcoKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNoYXJpbmdPcHRpb25zID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2hvaWNlcy5hcHAvcG9sbHMvMTIzJyxcbiAgICAgICAgcG9sbElkOiAnMTIzJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdwb2xsJyBhcyBjb25zdCxcbiAgICAgICAgcGxhY2VtZW50OiAnZmVlZCdcbiAgICAgIH07XG5cbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IHJlc3VsdC5jdXJyZW50LnNoYXJlVG9QbGF0Zm9ybSgndHdpdHRlcicsIHNoYXJpbmdPcHRpb25zKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoZ2xvYmFsLmZldGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9zaGFyZScsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcGxhdGZvcm06ICd0d2l0dGVyJyxcbiAgICAgICAgICBwb2xsX2lkOiAnMTIzJyxcbiAgICAgICAgICBwbGFjZW1lbnQ6ICdmZWVkJyxcbiAgICAgICAgICBjb250ZW50X3R5cGU6ICdwb2xsJyxcbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGFuYWx5dGljcyBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIChnbG9iYWwuZmV0Y2ggYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNvY2lhbFNoYXJpbmcoKSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNoYXJpbmdPcHRpb25zID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2hvaWNlcy5hcHAvcG9sbHMvMTIzJyxcbiAgICAgICAgcG9sbElkOiAnMTIzJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdwb2xsJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXN1bHQuY3VycmVudC5zaGFyZVRvUGxhdGZvcm0oJ3R3aXR0ZXInLCBzaGFyaW5nT3B0aW9ucyk7XG4gICAgICAgIC8vIFNob3VsZCBzdGlsbCBzdWNjZWVkIGV2ZW4gaWYgYW5hbHl0aWNzIGZhaWxzXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBoYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNsZWFyIGVycm9ycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZVNvY2lhbFNoYXJpbmcoKSk7XG4gICAgICBcbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIHJlc3VsdC5jdXJyZW50LmNsZWFyRXJyb3IoKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuc2hhcmVFcnJvcikudG9CZShudWxsKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNoYXJpbmcgd2hlbiBkaXNhYmxlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZmVhdHVyZSBmbGFnIGFzIGRpc2FibGVkXG4gICAgICBqZXN0LmRvTW9jaygnQC9saWIvY29yZS9mZWF0dXJlLWZsYWdzJywgKCkgPT4gKHtcbiAgICAgICAgaXNGZWF0dXJlRW5hYmxlZDogamVzdC5mbigoKSA9PiBmYWxzZSlcbiAgICAgIH0pKTtcblxuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU29jaWFsU2hhcmluZygpKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2hhcmluZ09wdGlvbnMgPSB7XG4gICAgICAgIHRpdGxlOiAnVGVzdCBQb2xsJyxcbiAgICAgICAgdXJsOiAnaHR0cHM6Ly9jaG9pY2VzLmFwcC9wb2xscy8xMjMnLFxuICAgICAgICBwb2xsSWQ6ICcxMjMnLFxuICAgICAgICBjb250ZW50VHlwZTogJ3BvbGwnIGFzIGNvbnN0XG4gICAgICB9O1xuXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlc3VsdC5jdXJyZW50LnNoYXJlVG9QbGF0Zm9ybSgndHdpdHRlcicsIHNoYXJpbmdPcHRpb25zKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgICBleHBlY3QocmVzcG9uc2UuZXJyb3IpLnRvQ29udGFpbignU29jaWFsIHNoYXJpbmcgaXMgZGlzYWJsZWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnTG9hZGluZyBzdGF0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0cmFjayBsb2FkaW5nIHN0YXRlIGR1cmluZyBzaGFyaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlU29jaWFsU2hhcmluZygpKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdC5jdXJyZW50LmlzU2hhcmluZykudG9CZShmYWxzZSk7XG5cbiAgICAgIGNvbnN0IHNoYXJpbmdPcHRpb25zID0ge1xuICAgICAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgICAgIHVybDogJ2h0dHBzOi8vY2hvaWNlcy5hcHAvcG9sbHMvMTIzJyxcbiAgICAgICAgcG9sbElkOiAnMTIzJyxcbiAgICAgICAgY29udGVudFR5cGU6ICdwb2xsJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgLy8gU3RhcnQgc2hhcmluZyBhbmQgY2hlY2sgbG9hZGluZyBzdGF0ZVxuICAgICAgbGV0IHNoYXJlUHJvbWlzZTogUHJvbWlzZTxhbnk+O1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgc2hhcmVQcm9taXNlID0gcmVzdWx0LmN1cnJlbnQuc2hhcmVUb1BsYXRmb3JtKCd0d2l0dGVyJywgc2hhcmluZ09wdGlvbnMpO1xuICAgICAgICAvLyBDaGVjayBsb2FkaW5nIHN0YXRlIGR1cmluZyBzaGFyaW5nXG4gICAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1NoYXJpbmcpLnRvQmUodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgc2hhcmVQcm9taXNlITtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayBsb2FkaW5nIHN0YXRlIGFmdGVyIHNoYXJpbmdcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc1NoYXJpbmcpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImdsb2JhbCIsImZldGNoIiwiamVzdCIsImZuIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJuYXZpZ2F0b3IiLCJ2YWx1ZSIsIndyaXRhYmxlIiwid2luZG93IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIm1vY2tSZXNvbHZlZFZhbHVlIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzdWNjZXNzIiwiaXQiLCJyZXN1bHQiLCJyZW5kZXJIb29rIiwidXNlU29jaWFsU2hhcmluZyIsInNoYXJpbmdPcHRpb25zIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVybCIsInBvbGxJZCIsImNvbnRlbnRUeXBlIiwicGxhY2VtZW50IiwiYWN0IiwicmVzcG9uc2UiLCJjdXJyZW50Iiwic2hhcmVUb1BsYXRmb3JtIiwiZXhwZWN0IiwidG9CZSIsInBsYXRmb3JtIiwib3BlbiIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic3RyaW5nQ29udGFpbmluZyIsImVycm9yIiwidG9Db250YWluIiwibW9ja1NoYXJlIiwidW5kZWZpbmVkIiwic2hhcmVOYXRpdmUiLCJ0ZXh0IiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsIm1vY2tXcml0ZVRleHQiLCJ3cml0ZVRleHQiLCJjb3B5VG9DbGlwYm9hcmQiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwb2xsX2lkIiwiY29udGVudF90eXBlIiwiY2xlYXJFcnJvciIsInNoYXJlRXJyb3IiLCJkb01vY2siLCJpc0ZlYXR1cmVFbmFibGVkIiwiaXNTaGFyaW5nIiwic2hhcmVQcm9taXNlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQzs7Ozt1QkFFK0I7a0NBQ0M7QUFFakMsMkJBQTJCO0FBQzNCQSxPQUFPQyxLQUFLLEdBQUdDLEtBQUtDLEVBQUU7QUFFdEIsdUJBQXVCO0FBQ3ZCQyxPQUFPQyxjQUFjLENBQUNDLFdBQVcsU0FBUztJQUN4Q0MsT0FBT0wsS0FBS0MsRUFBRTtJQUNkSyxVQUFVO0FBQ1o7QUFFQSxtQkFBbUI7QUFDbkJKLE9BQU9DLGNBQWMsQ0FBQ0ksUUFBUSxRQUFRO0lBQ3BDRixPQUFPTCxLQUFLQyxFQUFFO0lBQ2RLLFVBQVU7QUFDWjtBQUVBRSxTQUFTLG9CQUFvQjtJQUMzQkMsV0FBVztRQUNUVCxLQUFLVSxhQUFhO1FBQ2pCWixPQUFPQyxLQUFLLENBQWVZLGlCQUFpQixDQUFDO1lBQzVDQyxJQUFJO1lBQ0pDLE1BQU0sSUFBTUMsUUFBUUMsT0FBTyxDQUFDO29CQUFFQyxTQUFTO2dCQUFLO1FBQzlDO0lBQ0Y7SUFFQVIsU0FBUyw2QkFBNkI7UUFDcENTLEdBQUcsMkJBQTJCO1lBQzVCLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUdDLElBQUFBLGlCQUFVLEVBQUMsSUFBTUMsSUFBQUEsa0NBQWdCO1lBRXBELE1BQU1DLGlCQUFpQjtnQkFDckJDLE9B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