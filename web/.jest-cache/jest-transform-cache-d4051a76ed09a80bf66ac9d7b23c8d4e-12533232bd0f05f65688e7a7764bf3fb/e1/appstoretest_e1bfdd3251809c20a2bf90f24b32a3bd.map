{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/stores/app-store.test.ts"],"sourcesContent":["/**\n * App Store Tests\n * \n * Tests the actual appStore functionality from the codebase\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\n\n// Mock the dependencies\njest.mock('@/lib/utils/objects', () => ({\n  withOptional: (obj: any) => obj,\n}));\n\njest.mock('zustand/middleware', () => ({\n  devtools: (fn: any) => fn,\n  persist: (fn: any) => fn,\n}));\n\njest.mock('zustand/middleware/immer', () => ({\n  immer: (fn: any) => fn,\n}));\n\n// Mock the store types\njest.mock('@/lib/stores/types', () => ({\n  BaseStore: {},\n  FeatureFlag: {},\n}));\n\ndescribe('App Store Functionality', () => {\n  beforeEach(() => {\n    // Clear any existing state\n    jest.clearAllMocks();\n  });\n\n  it('should test app store state management', () => {\n    // Test basic app store state structure\n    const mockAppStore = {\n      theme: 'light' as const,\n      sidebarCollapsed: false,\n      isMobile: false,\n      isTablet: false,\n      isDesktop: true,\n      screenSize: 'lg' as const,\n      orientation: 'landscape' as const,\n      features: {},\n      settings: {\n        animations: true,\n        haptics: true,\n        sound: true,\n        autoSave: true,\n        language: 'en',\n        timezone: 'UTC',\n        compactMode: false,\n        showTooltips: true,\n        enableAnalytics: true,\n        enableCrashReporting: true,\n      },\n      currentRoute: '/',\n      previousRoute: '',\n      breadcrumbs: [],\n      isInitializing: false,\n      isUpdating: false,\n    };\n\n    expect(mockAppStore.theme).toBe('light');\n    expect(mockAppStore.sidebarCollapsed).toBe(false);\n    expect(mockAppStore.isMobile).toBe(false);\n    expect(mockAppStore.isDesktop).toBe(true);\n    expect(mockAppStore.screenSize).toBe('lg');\n    expect(mockAppStore.orientation).toBe('landscape');\n  });\n\n  it('should test theme management', () => {\n    // Test theme state management\n    const themeStates = {\n      light: 'light' as const,\n      dark: 'dark' as const,\n      system: 'system' as const,\n    };\n\n    expect(themeStates.light).toBe('light');\n    expect(themeStates.dark).toBe('dark');\n    expect(themeStates.system).toBe('system');\n  });\n\n  it('should test sidebar state management', () => {\n    // Test sidebar state management\n    const sidebarStates = {\n      collapsed: true,\n      width: 250,\n      pinned: false,\n      activeSection: 'dashboard',\n    };\n\n    expect(sidebarStates.collapsed).toBe(true);\n    expect(sidebarStates.width).toBe(250);\n    expect(sidebarStates.pinned).toBe(false);\n    expect(sidebarStates.activeSection).toBe('dashboard');\n  });\n\n  it('should test mobile detection', () => {\n    // Test mobile detection logic\n    const deviceStates = {\n      isMobile: true,\n      isTablet: false,\n      isDesktop: false,\n      screenSize: 'sm' as const,\n      orientation: 'portrait' as const,\n    };\n\n    expect(deviceStates.isMobile).toBe(true);\n    expect(deviceStates.isTablet).toBe(false);\n    expect(deviceStates.isDesktop).toBe(false);\n    expect(deviceStates.screenSize).toBe('sm');\n    expect(deviceStates.orientation).toBe('portrait');\n  });\n\n  it('should test feature flags', () => {\n    // Test feature flags structure\n    const featureFlags = {\n      pwa: true,\n      analytics: true,\n      notifications: true,\n      hashtags: true,\n      civics: true,\n    };\n\n    expect(featureFlags.pwa).toBe(true);\n    expect(featureFlags.analytics).toBe(true);\n    expect(featureFlags.notifications).toBe(true);\n    expect(featureFlags.hashtags).toBe(true);\n    expect(featureFlags.civics).toBe(true);\n  });\n\n  it('should test app settings', () => {\n    // Test app settings structure\n    const settings = {\n      animations: true,\n      haptics: true,\n      sound: true,\n      autoSave: true,\n      language: 'en',\n      timezone: 'UTC',\n      compactMode: false,\n      showTooltips: true,\n      enableAnalytics: true,\n      enableCrashReporting: true,\n    };\n\n    expect(settings.animations).toBe(true);\n    expect(settings.haptics).toBe(true);\n    expect(settings.sound).toBe(true);\n    expect(settings.autoSave).toBe(true);\n    expect(settings.language).toBe('en');\n    expect(settings.timezone).toBe('UTC');\n    expect(settings.compactMode).toBe(false);\n    expect(settings.showTooltips).toBe(true);\n    expect(settings.enableAnalytics).toBe(true);\n    expect(settings.enableCrashReporting).toBe(true);\n  });\n\n  it('should test navigation state', () => {\n    // Test navigation state structure\n    const navigationState = {\n      currentRoute: '/dashboard',\n      previousRoute: '/',\n      breadcrumbs: [\n        { label: 'Home', href: '/', icon: 'home' },\n        { label: 'Dashboard', href: '/dashboard', icon: 'dashboard' },\n      ],\n    };\n\n    expect(navigationState.currentRoute).toBe('/dashboard');\n    expect(navigationState.previousRoute).toBe('/');\n    expect(navigationState.breadcrumbs).toHaveLength(2);\n    expect(navigationState.breadcrumbs[0]?.label).toBe('Home');\n    expect(navigationState.breadcrumbs[1]?.label).toBe('Dashboard');\n  });\n\n  it('should test loading states', () => {\n    // Test loading states\n    const loadingStates = {\n      isInitializing: false,\n      isUpdating: false,\n    };\n\n    expect(loadingStates.isInitializing).toBe(false);\n    expect(loadingStates.isUpdating).toBe(false);\n  });\n\n  it('should test modal state management', () => {\n    // Test modal state structure\n    const modalState = {\n      activeModal: 'settings',\n      modalData: { userId: '123' },\n      modalStack: [\n        { id: 'settings', data: { userId: '123' } },\n        { id: 'confirm', data: { action: 'delete' } },\n      ],\n    };\n\n    expect(modalState.activeModal).toBe('settings');\n    expect(modalState.modalData.userId).toBe('123');\n    expect(modalState.modalStack).toHaveLength(2);\n    expect(modalState.modalStack[0]?.id).toBe('settings');\n    expect(modalState.modalStack[1]?.id).toBe('confirm');\n  });\n});\n"],"names":["jest","mock","withOptional","obj","devtools","fn","persist","immer","BaseStore","FeatureFlag","describe","beforeEach","clearAllMocks","it","mockAppStore","theme","sidebarCollapsed","isMobile","isTablet","isDesktop","screenSize","orientation","features","settings","animations","haptics","sound","autoSave","language","timezone","compactMode","showTooltips","enableAnalytics","enableCrashReporting","currentRoute","previousRoute","breadcrumbs","isInitializing","isUpdating","expect","toBe","themeStates","light","dark","system","sidebarStates","collapsed","width","pinned","activeSection","deviceStates","featureFlags","pwa","analytics","notifications","hashtags","civics","navigationState","label","href","icon","toHaveLength","loadingStates","modalState","activeModal","modalData","userId","modalStack","id","data","action"],"mappings":"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"}