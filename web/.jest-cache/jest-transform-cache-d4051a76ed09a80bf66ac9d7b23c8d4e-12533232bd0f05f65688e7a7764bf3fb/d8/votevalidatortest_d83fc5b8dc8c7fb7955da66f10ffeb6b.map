{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/vote/vote-validator.test.ts"],"sourcesContent":["/**\n * VoteValidator Unit Tests\n * \n * Comprehensive unit tests for vote validation functionality\n * \n * Created: January 15, 2025\n * Updated: January 15, 2025\n */\n\nimport { describe, it, expect, beforeEach, afterEach, jest } from '@jest/globals';\nimport { VoteValidator } from '@/lib/vote/validator';\nimport type { \n  VoteData, \n  PollData, \n  VoteValidation \n} from '@/lib/vote/types';\n\n// Mock the logger\njest.mock('@/lib/utils/logger', () => ({\n  devLog: jest.fn()\n}));\n\n// Import V2 test setup\nimport { getMS } from '../../setup';\nconst mockSetup = getMS();\nconst { when, client: mockSupabaseClient } = mockSetup;\n\njest.mock('@/utils/supabase/server', () => ({\n  getSupabaseServerClient: jest.fn(() => mockSupabaseClient)\n}));\n\ndescribe('VoteValidator', () => {\n  let validator: VoteValidator;\n  let mockPoll: PollData;\n  let mockVoteData: VoteData;\n\n  beforeEach(() => {\n    // Reset all mocks before each test\n    jest.clearAllMocks();\n    validator = new VoteValidator();\n    \n    mockPoll = {\n      id: 'test-poll-123',\n      title: 'Test Poll',\n      description: 'A test poll for unit testing',\n      votingMethod: 'single',\n      options: [\n        { id: 'option-1', text: 'Option 1' },\n        { id: 'option-2', text: 'Option 2' },\n        { id: 'option-3', text: 'Option 3' }\n      ],\n      status: 'active',\n      startTime: new Date('2025-01-01T00:00:00Z'),\n      endTime: new Date('2025-12-31T23:59:59Z'),\n      createdBy: 'admin-user',\n      createdAt: new Date('2025-01-01T00:00:00Z'),\n      updatedAt: new Date('2025-01-01T00:00:00Z'),\n      votingConfig: {\n        allowMultipleVotes: false,\n        maxChoices: 1,\n        requireVerification: false,\n        quadraticCredits: 100,\n        rangeMin: 0,\n        rangeMax: 10\n      }\n    };\n\n    mockVoteData = {\n      id: 'vote-123',\n      pollId: 'test-poll-123',\n      userId: 'user-1',\n      choice: 0,\n      privacyLevel: 'public',\n      timestamp: new Date(),\n      auditReceipt: 'audit-123'\n    };\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Basic Validation', () => {\n    it('should validate valid vote data', async () => {\n      console.log('Testing vote validation...');\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      console.log('Validation result:', validation);\n      \n      expect(validation.valid).toBe(true);\n      expect(validation.requiresAuthentication).toBe(true);\n      expect(validation.requiresTokens).toBe(false);\n    });\n\n    it('should reject null vote data', async () => {\n      const validation = await validator.validateVote(null as any, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Vote data must be an object');\n    });\n\n    it('should reject undefined vote data', async () => {\n      const validation = await validator.validateVote(undefined as any, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Vote data must be an object');\n    });\n\n    it('should reject non-object vote data', async () => {\n      const validation = await validator.validateVote('invalid' as any, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Vote data must be an object');\n    });\n\n    it('should reject null poll data', async () => {\n      const validation = await validator.validateVote(mockVoteData, null as any, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Poll data is required');\n    });\n\n    it('should reject poll data without id', async () => {\n      const invalidPoll = Object.assign({}, mockPoll, { id: '' });\n      const validation = await validator.validateVote(mockVoteData, invalidPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Invalid poll data');\n    });\n\n    it('should reject poll data without voting method', async () => {\n      const invalidPoll = Object.assign({}, mockPoll, { votingMethod: undefined as any });\n      const validation = await validator.validateVote(mockVoteData, invalidPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Invalid poll data');\n    });\n  });\n\n  describe('Business Rules Validation', () => {\n    it('should reject vote for inactive poll', async () => {\n      const inactivePoll = Object.assign({}, mockPoll, { status: 'closed' as const });\n      const validation = await validator.validateVote(mockVoteData, inactivePoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Poll is not active');\n    });\n\n    it('should reject vote for draft poll', async () => {\n      const draftPoll = Object.assign({}, mockPoll, { status: 'draft' as const });\n      const validation = await validator.validateVote(mockVoteData, draftPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Poll is not active');\n    });\n\n    it('should reject vote for expired poll', async () => {\n      const expiredPoll = Object.assign({}, mockPoll, { \n        endTime: new Date('2024-12-31T23:59:59Z') // Past date\n      });\n      const validation = await validator.validateVote(mockVoteData, expiredPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Poll has ended');\n    });\n\n    it('should accept vote for poll without end time', async () => {\n      const { endTime, ...noEndTimePoll } = mockPoll;\n      const validation = await validator.validateVote(mockVoteData, noEndTimePoll, 'user-1');\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should reject vote for locked poll', async () => {\n      const lockedPoll = Object.assign({}, mockPoll, { \n        lockedAt: new Date('2025-01-01T12:00:00Z') \n      });\n      const validation = await validator.validateVote(mockVoteData, lockedPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Poll is locked');\n    });\n  });\n\n  describe('Single Choice Validation', () => {\n    it('should validate valid single choice vote', async () => {\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should reject vote with missing choice', async () => {\n      const { choice, ...invalidVote } = mockVoteData;\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Choice is required for single choice voting');\n    });\n\n    it('should reject vote with null choice', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { choice: null as any });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Choice is required for single choice voting');\n    });\n\n    it('should reject vote with non-integer choice', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { choice: 1.5 as any });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Choice must be a valid integer');\n    });\n\n    it('should reject vote with negative choice', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { choice: -1 });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Choice must be between 0 and 2');\n    });\n\n    it('should reject vote with choice exceeding options', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { choice: 5 });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Choice must be between 0 and 2');\n    });\n  });\n\n  describe('Approval Voting Validation', () => {\n    beforeEach(() => {\n      mockPoll.votingMethod = 'approval';\n      mockPoll.votingConfig = {\n        ...mockPoll.votingConfig,\n        maxChoices: 3, // Allow multiple approvals\n        allowMultipleVotes: true\n      };\n      const { choice, ...approvalVoteData } = mockVoteData;\n      mockVoteData = Object.assign({}, approvalVoteData, {\n        approvals: [0, 1]\n      });\n    });\n\n    it('should validate valid approval vote', async () => {\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should reject vote with missing approvals', async () => {\n      const { approvals, ...invalidVote } = mockVoteData;\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Approvals array is required for approval voting');\n    });\n\n    it('should reject vote with empty approvals', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { approvals: [] });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('At least one option must be approved');\n    });\n\n    it('should reject vote with non-array approvals', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { approvals: 'invalid' as any });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Approvals array is required for approval voting');\n    });\n\n    it('should reject vote with invalid approval indices', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { approvals: [0, 5] });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Approval index must be between 0 and 2');\n    });\n\n    it('should reject vote with duplicate approvals', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { approvals: [0, 0] });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Duplicate approvals are not allowed');\n    });\n\n    it('should respect max choices limit', async () => {\n      const limitedPoll = Object.assign({}, mockPoll, { votingConfig: Object.assign({}, mockPoll.votingConfig, { maxChoices: 1 }) });\n      const invalidVote = Object.assign({}, mockVoteData, { approvals: [0, 1] });\n      const validation = await validator.validateVote(invalidVote, limitedPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Maximum 1 approvals allowed');\n    });\n  });\n\n  describe('Ranked Choice Validation', () => {\n    beforeEach(() => {\n      mockPoll.votingMethod = 'ranked';\n      const { choice, approvals, ...rankedVoteData } = mockVoteData;\n      mockVoteData = Object.assign({}, rankedVoteData, {\n        rankings: [0, 1, 2]\n      });\n    });\n\n    it('should validate valid ranked vote', async () => {\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should reject vote with missing rankings', async () => {\n      const { rankings, ...invalidVote } = mockVoteData;\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Rankings array is required for ranked choice voting');\n    });\n\n    it('should reject vote with incomplete rankings', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { rankings: [0, 1] });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('All options must be ranked');\n    });\n\n    it('should reject vote with invalid ranking indices', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { rankings: [0, 1, 5] });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Ranking index must be between 0 and 2');\n    });\n\n    it('should reject vote with duplicate rankings', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { rankings: [0, 0, 1] });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Duplicate rankings are not allowed');\n    });\n  });\n\n  describe('Quadratic Voting Validation', () => {\n    beforeEach(() => {\n      mockPoll.votingMethod = 'quadratic';\n      const { choice, approvals, rankings, ...quadraticVoteData } = mockVoteData;\n      mockVoteData = Object.assign({}, quadraticVoteData, {\n        allocations: {\n          '0': 5,\n          '1': 3\n        }\n      });\n    });\n\n    it('should validate valid quadratic vote', async () => {\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should reject vote with missing allocations', async () => {\n      const { allocations, ...invalidVote } = mockVoteData;\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Allocations object is required for quadratic voting');\n    });\n\n    it('should reject vote with negative allocations', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        allocations: { '0': -5 } \n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('All allocations must be non-negative integers');\n    });\n\n    it('should reject vote with non-integer allocations', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        allocations: { '0': 5.5 } \n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('All allocations must be non-negative integers');\n    });\n\n    it('should reject vote exceeding credit limit', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        allocations: { '0': 11 } // 11^2 = 121 > 100\n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toContain('exceeds available credits');\n    });\n\n    it('should reject vote with no allocations', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        allocations: { '0': 0, '1': 0, '2': 0 } \n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('At least one option must receive votes');\n    });\n  });\n\n  describe('Range Voting Validation', () => {\n    beforeEach(() => {\n      mockPoll.votingMethod = 'range';\n      const { choice, approvals, rankings, allocations, ...rangeVoteData } = mockVoteData;\n      mockVoteData = Object.assign({}, rangeVoteData, {\n        ratings: {\n          '0': 8,\n          '1': 6,\n          '2': 4\n        }\n      });\n    });\n\n    it('should validate valid range vote', async () => {\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should reject vote with missing ratings', async () => {\n      const { ratings, ...invalidVote } = mockVoteData;\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Ratings object is required for range voting');\n    });\n\n    it('should reject vote with ratings outside range', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        ratings: { '0': 15 } \n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Rating must be between 0 and 10');\n    });\n\n    it('should reject vote with incomplete ratings', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        ratings: { '0': 8, '1': 6 } \n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('All options must be rated');\n    });\n\n    it('should reject vote with all minimum ratings', async () => {\n      const invalidVote = Object.assign({}, mockVoteData, { \n        ratings: { '0': 0, '1': 0, '2': 0 } \n      });\n      const validation = await validator.validateVote(invalidVote, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('At least one option must have a rating above the minimum');\n    });\n  });\n\n  describe('Security Validation', () => {\n    it('should require authentication when verification is required', async () => {\n      const verifiedPoll = Object.assign({}, mockPoll, { \n        votingConfig: Object.assign({}, mockPoll.votingConfig, { requireVerification: true }) \n      });\n      const validation = await validator.validateVote(mockVoteData, verifiedPoll);\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Authentication required for this poll');\n    });\n\n    it('should accept vote when verification is not required', async () => {\n      const validation = await validator.validateVote(mockVoteData, mockPoll);\n      \n      expect(validation.isValid).toBe(true);\n    });\n\n    it('should check trust tier requirements', async () => {\n      const highTrustPoll = Object.assign({}, mockPoll, { \n        votingConfig: Object.assign({}, mockPoll.votingConfig, { \n          minTrustTier: 'T2',\n          allowMultipleVotes: true // Allow multiple votes to avoid existing vote check\n        })\n      });\n      \n      // Mock no existing vote (user can vote)\n      when().table('votes').op('select').eq('poll_id', 'test-poll-123').eq('user_id', 'user-1').returnsList([]);\n      \n      // Mock getUserTrustTier to return T1 (insufficient)\n      when().table('user_profiles').op('select').select('trust_tier').eq('user_id', 'user-1').returnsSingle({ trust_tier: 'T1' });\n      \n      const validation = await validator.validateVote(mockVoteData, highTrustPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Insufficient trust tier for this poll');\n    });\n\n    it('should accept vote with sufficient trust tier', async () => {\n      const highTrustPoll = Object.assign({}, mockPoll, { \n        votingConfig: Object.assign({}, mockPoll.votingConfig, { \n          minTrustTier: 'T1',\n          allowMultipleVotes: true // Allow multiple votes to avoid existing vote check\n        })\n      });\n      \n      // Mock getUserTrustTier to return T2 (sufficient)\n      when().table('user_profiles').op('select').select('trust_tier').eq('user_id', 'user-1').returnsSingle({ trust_tier: 'T2' });\n      \n      const validation = await validator.validateVote(mockVoteData, highTrustPoll, 'user-1');\n      \n      // The validation should pass since T2 >= T1\n      expect(validation.isValid).toBe(true);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle validation errors gracefully', async () => {\n      // Mock a method to throw an error\n      const originalValidateBasicVoteData = (validator as any).validateBasicVoteData;\n      (validator as any).validateBasicVoteData = jest.fn().mockImplementation(() => {\n        throw new Error('Validation error');\n      });\n\n      const validation = await validator.validateVote(mockVoteData, mockPoll, 'user-1');\n      \n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Validation error');\n\n      // Restore original method\n      (validator as any).validateBasicVoteData = originalValidateBasicVoteData;\n    });\n\n    it('should handle database errors gracefully', async () => {\n      // Create a new validator instance to avoid interference with other tests\n      const testValidator = new VoteValidator();\n      \n      // Mock the getUserTrustTier method to return T0 (default fallback)\n      const originalGetUserTrustTier = (testValidator as any).getUserTrustTier;\n      const mockGetUserTrustTier = jest.fn() as jest.MockedFunction<() => Promise<string>>;\n      mockGetUserTrustTier.mockResolvedValue('T0');\n      (testValidator as any).getUserTrustTier = mockGetUserTrustTier;\n\n      const highTrustPoll = Object.assign({}, mockPoll, { \n        votingConfig: Object.assign({}, mockPoll.votingConfig, { \n          minTrustTier: 'T1',\n          allowMultipleVotes: true // Allow multiple votes to avoid existing vote check\n        })\n      });\n      \n      const validation = await testValidator.validateVote(mockVoteData, highTrustPoll, 'user-1');\n      \n      // Should fall back to default trust tier (T0) and fail\n      expect(validation.isValid).toBe(false);\n      expect(validation.error).toBe('Insufficient trust tier for this poll');\n      \n      // Restore original method\n      (testValidator as any).getUserTrustTier = originalGetUserTrustTier;\n    });\n  });\n});\n"],"names":["jest","mock","devLog","fn","mockSetup","getMS","when","client","mockSupabaseClient","getSupabaseServerClient","describe","validator","mockPoll","mockVoteData","beforeEach","clearAllMocks","VoteValidator","id","title","description","votingMethod","options","text","status","startTime","Date","endTime","createdBy","createdAt","updatedAt","votingConfig","allowMultipleVotes","maxChoices","requireVerification","quadraticCredits","rangeMin","rangeMax","pollId","userId","choice","privacyLevel","timestamp","auditReceipt","afterEach","it","console","log","validation","validateVote","expect","valid","toBe","requiresAuthentication","requiresTokens","isValid","error","undefined","invalidPoll","Object","assign","inactivePoll","draftPoll","expiredPoll","noEndTimePoll","lockedPoll","lockedAt","invalidVote","approvalVoteData","approvals","limitedPoll","rankedVoteData","rankings","quadraticVoteData","allocations","toContain","rangeVoteData","ratings","verifiedPoll","highTrustPoll","minTrustTier","table","op","eq","returnsList","select","returnsSingle","trust_tier","originalValidateBasicVoteData","validateBasicVoteData","mockImplementation","Error","testValidator","originalGetUserTrustTier","getUserTrustTier","mockGetUserTrustTier","mockResolvedValue"],"mappings":"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"}