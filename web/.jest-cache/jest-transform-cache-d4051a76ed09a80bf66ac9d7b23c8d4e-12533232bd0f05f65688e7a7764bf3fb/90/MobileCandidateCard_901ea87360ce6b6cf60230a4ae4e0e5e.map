{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/features/civics/components/MobileCandidateCard.tsx"],"sourcesContent":["/**\n * Mobile-Optimized Candidate Card Component\n * \n * Specialized mobile-first candidate card with enhanced touch interactions\n * Features:\n * - Mobile-first responsive design\n * - Enhanced touch gestures\n * - Optimized for small screens\n * - Better performance on mobile\n * - Accessibility support\n */\n\n'use client';\n\nimport { \n  PhoneIcon, \n  EnvelopeIcon, \n  GlobeAltIcon,\n  ShareIcon,\n  HeartIcon,\n  UserPlusIcon,\n  XMarkIcon,\n  CheckCircleIcon,\n  ClockIcon,\n  SparklesIcon\n} from '@heroicons/react/24/outline';\nimport { \n  HeartIcon as HeartSolidIcon,\n  UserPlusIcon as UserPlusSolidIcon\n} from '@heroicons/react/24/solid';\nimport Image from 'next/image';\nimport React, { useState, useRef, useCallback } from 'react';\n\n// Import types from the pipeline\nimport ProgressiveDisclosure from '@/features/civics/components/ProgressiveDisclosure';\nimport TouchInteractions from '@/features/civics/components/TouchInteractions';\nimport type { SuperiorRepresentativeData } from '../lib/types/superior-types';\n\ninterface MobileCandidateCardProps {\n  representative: SuperiorRepresentativeData;\n  onLike?: (id: string) => void;\n  onShare?: (id: string) => void;\n  onFollow?: (id: string) => void;\n  onContact?: (id: string, type: string) => void;\n  isLiked?: boolean;\n  isFollowing?: boolean;\n  className?: string;\n  showEngagement?: boolean;\n  enableHaptics?: boolean;\n}\n\nexport default function MobileCandidateCard({\n  representative,\n  onLike,\n  onShare,\n  onFollow,\n  onContact,\n  isLiked = false,\n  isFollowing = false,\n  className = '',\n  showEngagement = true,\n  enableHaptics = true\n}: MobileCandidateCardProps) {\n  \n  // State management\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [activePhotoIndex, setActivePhotoIndex] = useState(0);\n  const [isLikedState, setIsLikedState] = useState(isLiked);\n  const [isFollowingState, setIsFollowingState] = useState(isFollowing);\n  const [showPhotoModal, setShowPhotoModal] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Refs\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  // Get primary photo with fallback\n  const primaryPhoto = representative.enhancedPhotos?.[0];\n  \n  \n  // Get social media with most followers\n  const topSocialMedia = representative.enhancedSocialMedia\n    ?.sort((a, b) => (b.followersCount || 0) - (a.followersCount || 0))\n    ?.slice(0, 2) || []; // Show fewer on mobile\n  \n  // Get recent activity\n  const recentActivity = representative.enhancedActivity?.slice(0, 2) || []; // Show fewer on mobile\n\n  // Haptic feedback\n  const triggerHaptic = useCallback((type: 'light' | 'medium' | 'heavy' = 'light') => {\n    if (enableHaptics && 'vibrate' in navigator) {\n      const patterns = {\n        light: [10],\n        medium: [20],\n        heavy: [30]\n      };\n      navigator.vibrate(patterns[type]);\n    }\n  }, [enableHaptics]);\n\n  // Enhanced interaction handlers\n  const handleLike = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      triggerHaptic('light');\n      setIsLikedState(!isLikedState);\n      await onLike?.(representative.id || '');\n    } catch (error) {\n      console.error('Failed to update like status:', error);\n      setError('Failed to update like status');\n      setIsLikedState(isLikedState); // Revert on error\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isLikedState, onLike, representative.id, triggerHaptic]);\n\n  const handleShare = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      triggerHaptic('medium');\n      await onShare?.(representative.id || '');\n      \n      // Native sharing if available\n      if (navigator.share) {\n        await navigator.share({\n          title: `${representative.name} - ${representative.office}`,\n          text: `Learn more about ${representative.name}, ${representative.office} from ${representative.state}`,\n          url: window.location.href\n        });\n      }\n    } catch (error) {\n      console.error('Failed to share:', error);\n      setError('Failed to share');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [onShare, representative.id, representative.name, representative.office, representative.state, triggerHaptic]);\n\n  const handleFollow = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      triggerHaptic('medium');\n      setIsFollowingState(!isFollowingState);\n      await onFollow?.(representative.id || '');\n    } catch (error) {\n      console.error('Failed to update follow status:', error);\n      setError('Failed to update follow status');\n      setIsFollowingState(isFollowingState); // Revert on error\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isFollowingState, onFollow, representative.id, triggerHaptic]);\n\n  const handleContact = useCallback((type: string) => {\n    try {\n      triggerHaptic('light');\n      onContact?.(representative.id || '', type);\n    } catch (error) {\n      console.error('Failed to initiate contact:', error);\n      setError('Failed to initiate contact');\n    }\n  }, [onContact, representative.id, triggerHaptic]);\n\n  const handlePhotoClick = useCallback(() => {\n    if (primaryPhoto) {\n      triggerHaptic('light');\n      setShowPhotoModal(true);\n    }\n  }, [primaryPhoto, triggerHaptic]);\n\n  // Touch gesture handlers\n  const handleSwipeLeft = useCallback(() => {\n    if (representative.enhancedPhotos && representative.enhancedPhotos.length > 1) {\n      triggerHaptic('light');\n      setActivePhotoIndex(prev => \n        prev < (representative.enhancedPhotos?.length || 1) - 1 ? prev + 1 : 0\n      );\n    }\n  }, [representative.enhancedPhotos, triggerHaptic]);\n\n  const handleSwipeRight = useCallback(() => {\n    if (representative.enhancedPhotos && representative.enhancedPhotos.length > 1) {\n      triggerHaptic('light');\n      setActivePhotoIndex(prev => \n        prev > 0 ? prev - 1 : (representative.enhancedPhotos?.length || 1) - 1\n      );\n    }\n  }, [representative.enhancedPhotos, triggerHaptic]);\n\n  const handleSwipeUp = useCallback(() => {\n    triggerHaptic('light');\n    setIsExpanded(true);\n  }, [triggerHaptic]);\n\n  const handleSwipeDown = useCallback(() => {\n    triggerHaptic('light');\n    setIsExpanded(false);\n  }, [triggerHaptic]);\n\n  const handleLongPress = useCallback(() => {\n    triggerHaptic('heavy');\n    setShowPhotoModal(true);\n  }, [triggerHaptic]);\n\n  // Utility functions\n  const getPartyColor = useCallback((party?: string) => {\n    const partyColors: Record<string, string> = {\n      'Republican': 'text-red-600 bg-red-50 border-red-200',\n      'Democrat': 'text-blue-600 bg-blue-50 border-blue-200',\n      'Democratic': 'text-blue-600 bg-blue-50 border-blue-200',\n      'Independent': 'text-gray-600 bg-gray-50 border-gray-200',\n      'Green': 'text-green-600 bg-green-50 border-green-200',\n      'Libertarian': 'text-yellow-600 bg-yellow-50 border-yellow-200'\n    };\n    \n    return partyColors[party || ''] || 'text-gray-600 bg-gray-50 border-gray-200';\n  }, []);\n\n  const getQualityScoreColor = useCallback((score: number) => {\n    if (score >= 80) return 'text-green-600 bg-green-50';\n    if (score >= 60) return 'text-yellow-600 bg-yellow-50';\n    return 'text-red-600 bg-red-50';\n  }, []);\n\n  const getLevelIcon = useCallback((level: string) => {\n    switch (level) {\n      case 'federal': return 'üèõÔ∏è';\n      case 'state': return 'üèõÔ∏è';\n      case 'local': return 'üè¢';\n      default: return 'üë§';\n    }\n  }, []);\n\n  return (\n    <TouchInteractions\n      onSwipeLeft={handleSwipeLeft}\n      onSwipeRight={handleSwipeRight}\n      onSwipeUp={handleSwipeUp}\n      onSwipeDown={handleSwipeDown}\n      onLongPress={handleLongPress}\n      swipeThreshold={30}\n      longPressDelay={400}\n      className=\"w-full\"\n    >\n      <div \n        ref={cardRef}\n        className={`bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-xl ${className}`}\n        role=\"article\"\n        aria-label={`Mobile candidate card for ${representative.name}`}\n      >\n        {/* Error message */}\n        {error && (\n          <div className=\"bg-red-50 border-l-4 border-red-400 p-3\">\n            <div className=\"flex\">\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Header with photo and basic info */}\n        <div className=\"relative\">\n          {/* Photo */}\n          <div \n            className=\"relative h-48 w-full bg-gray-100 cursor-pointer group\"\n            onClick={handlePhotoClick}\n            role=\"button\"\n            tabIndex={0}\n            aria-label=\"Click to view full size photo\"\n            onKeyDown={(e) => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                handlePhotoClick();\n              }\n            }}\n          >\n            {primaryPhoto ? (\n              <Image\n                src={primaryPhoto.url}\n                alt={`${representative.name} official photo`}\n                fill\n                className=\"object-cover transition-transform duration-200 group-hover:scale-105\"\n                sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\n                priority\n                onError={() => setError('Failed to load photo')}\n              />\n            ) : (\n              <div className=\"flex items-center justify-center h-full bg-gradient-to-br from-blue-500 to-purple-600\">\n                <span className=\"text-4xl font-bold text-white\">\n                  {representative.name.split(' ').map(n => n[0]).join('')}\n                </span>\n              </div>\n            )}\n            \n            {/* Photo indicators - smaller on mobile */}\n            {representative.enhancedPhotos && representative.enhancedPhotos.length > 1 && (\n              <div className=\"absolute bottom-3 left-3 flex space-x-1\">\n                {representative.enhancedPhotos.map((_, index) => (\n                  <button\n                    key={index}\n                    className={`w-1.5 h-1.5 rounded-full transition-colors ${\n                      index === activePhotoIndex ? 'bg-white' : 'bg-white/50'\n                    }`}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setActivePhotoIndex(index);\n                    }}\n                    aria-label={`View photo ${index + 1}`}\n                  />\n                ))}\n              </div>\n            )}\n\n            {/* Quality score badge - smaller on mobile */}\n            <div className={`absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium ${getQualityScoreColor(representative.dataQuality?.overallConfidence || 0)}`}>\n              <div className=\"flex items-center space-x-1\">\n                <CheckCircleIcon className=\"w-3 h-3\" />\n                <span>{representative.dataQuality?.overallConfidence || 0}%</span>\n              </div>\n            </div>\n\n            {/* Level indicator - smaller on mobile */}\n            <div className=\"absolute top-3 left-3 bg-white/90 backdrop-blur-sm rounded-full px-2 py-1 text-xs font-medium text-gray-700\">\n              <span className=\"mr-1\">{getLevelIcon(representative.level)}</span>\n              {representative.level.toUpperCase()}\n            </div>\n          </div>\n\n          {/* Basic info - compact for mobile */}\n          <div className=\"p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex-1 min-w-0\">\n                <h2 className=\"text-xl font-bold text-gray-900 mb-1 truncate\">\n                  {representative.name}\n                </h2>\n                <p className=\"text-base text-gray-600 mb-1 truncate\">\n                  {representative.office}\n                </p>\n                <p className=\"text-sm text-gray-500 mb-3 truncate\">\n                  {representative.state}\n                  {representative.district && ` ‚Ä¢ District ${representative.district}`}\n                </p>\n                \n                {/* Party badge - smaller on mobile */}\n                {representative.party && (\n                  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${getPartyColor(representative.party)}`}>\n                    {representative.party}\n                  </span>\n                )}\n              </div>\n\n              {/* Action buttons - vertical stack for mobile */}\n              {showEngagement && (\n                <div className=\"flex flex-col space-y-2 ml-3\">\n                <button\n                  onClick={handleLike}\n                  disabled={isLoading}\n                  className={`p-2 rounded-full transition-colors ${\n                    isLikedState \n                      ? 'text-red-500 bg-red-50' \n                      : 'text-gray-400 hover:text-red-500 hover:bg-red-50'\n                  } ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n                  aria-label={isLikedState ? 'Unlike' : 'Like'}\n                >\n                  {isLikedState ? (\n                    <HeartSolidIcon className=\"w-5 h-5\" />\n                  ) : (\n                    <HeartIcon className=\"w-5 h-5\" />\n                  )}\n                </button>\n                \n                <button\n                  onClick={handleShare}\n                  disabled={isLoading}\n                  className=\"p-2 rounded-full text-gray-400 hover:text-blue-500 hover:bg-blue-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                  aria-label=\"Share\"\n                >\n                  <ShareIcon className=\"w-5 h-5\" />\n                </button>\n                \n                <button\n                  onClick={handleFollow}\n                  disabled={isLoading}\n                  className={`p-2 rounded-full transition-colors ${\n                    isFollowingState \n                      ? 'text-blue-500 bg-blue-50' \n                      : 'text-gray-400 hover:text-blue-500 hover:bg-blue-50'\n                  } ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n                  aria-label={isFollowingState ? 'Unfollow' : 'Follow'}\n                >\n                  {isFollowingState ? (\n                    <UserPlusSolidIcon className=\"w-5 h-5\" />\n                  ) : (\n                    <UserPlusIcon className=\"w-5 h-5\" />\n                  )}\n                </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Progressive disclosure for mobile */}\n        <ProgressiveDisclosure\n          isExpanded={isExpanded}\n          onToggle={setIsExpanded}\n          trigger={\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium text-gray-600\">\n                {isExpanded ? 'Show Less' : 'Show More'}\n              </span>\n              <SparklesIcon className=\"w-4 h-4 text-gray-400\" />\n            </div>\n          }\n          className=\"border-t border-gray-200\"\n          contentClassName=\"p-4\"\n        >\n          {/* Contact information - mobile optimized */}\n          {representative.enhancedContacts && representative.enhancedContacts.length > 0 && (\n            <div className=\"mb-4\">\n              <h3 className=\"text-base font-semibold text-gray-900 mb-3\">Contact</h3>\n              <div className=\"space-y-2\">\n                {representative.enhancedContacts.slice(0, 2).map((contact, index) => (\n                  <div key={index} className=\"flex items-center space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      {contact.type === 'email' && <EnvelopeIcon className=\"w-4 h-4 text-gray-400\" />}\n                      {contact.type === 'phone' && <PhoneIcon className=\"w-4 h-4 text-gray-400\" />}\n                      {contact.type === 'website' && <GlobeAltIcon className=\"w-4 h-4 text-gray-400\" />}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm text-gray-900 truncate\">{contact.value}</p>\n                      {contact.isVerified && (\n                        <div className=\"flex items-center space-x-1 mt-1\">\n                          <CheckCircleIcon className=\"w-3 h-3 text-green-500\" />\n                          <span className=\"text-xs text-green-600\">Verified</span>\n                        </div>\n                      )}\n                    </div>\n                    <button\n                      onClick={() => handleContact(contact.type)}\n                      className=\"text-blue-500 hover:text-blue-700 text-sm font-medium\"\n                    >\n                      {contact.type === 'email' && 'Email'}\n                      {contact.type === 'phone' && 'Call'}\n                      {contact.type === 'website' && 'Visit'}\n                    </button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Social media - mobile optimized */}\n          {topSocialMedia.length > 0 && (\n            <div className=\"mb-4\">\n              <h3 className=\"text-base font-semibold text-gray-900 mb-3\">Social Media</h3>\n              <div className=\"space-y-2\">\n                {topSocialMedia.map((social, index) => (\n                  <div key={index} className=\"flex items-center space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-xs font-medium text-gray-600\">\n                          {social.platform?.[0]?.toUpperCase() || '?'}\n                        </span>\n                      </div>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-900 truncate\">@{social.handle}</p>\n                      <p className=\"text-xs text-gray-500\">\n                        {(social.followersCount || 0).toLocaleString()} followers\n                        {social.verified && (\n                          <span className=\"ml-1 text-green-600\">‚úì</span>\n                        )}\n                      </p>\n                    </div>\n                    <a\n                      href={social.url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-500 hover:text-blue-700 text-sm font-medium\"\n                    >\n                      Follow\n                    </a>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Recent activity - mobile optimized */}\n          {recentActivity.length > 0 && (\n            <div>\n              <h3 className=\"text-base font-semibold text-gray-900 mb-3\">Recent Activity</h3>\n              <div className=\"space-y-2\">\n                {recentActivity.map((activity, index) => (\n                  <div key={index} className=\"flex items-start space-x-3\">\n                    <div className=\"flex-shrink-0\">\n                      <div className=\"w-2 h-2 bg-blue-500 rounded-full mt-2\"></div>\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      {activity.url ? (\n                        <a \n                          href={activity.url} \n                          target=\"_blank\" \n                          rel=\"noopener noreferrer\"\n                          className=\"text-sm font-medium text-blue-600 hover:text-blue-800 hover:underline truncate block\"\n                        >\n                          {activity.title}\n                        </a>\n                      ) : (\n                        <p className=\"text-sm font-medium text-gray-900 truncate\">{activity.title}</p>\n                      )}\n                      {activity.description && (\n                        <p className=\"text-xs text-gray-500 mt-1 line-clamp-2\">{activity.description}</p>\n                      )}\n                      <p className=\"text-xs text-gray-400 mt-1\">\n                        <ClockIcon className=\"w-3 h-3 inline mr-1\" />\n                        {new Date(activity.date).toLocaleDateString()}\n                        {activity.source && (\n                          <span className=\"ml-2 text-gray-500\">‚Ä¢ {activity.source}</span>\n                        )}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </ProgressiveDisclosure>\n\n        {/* Photo modal - mobile optimized */}\n        {showPhotoModal && primaryPhoto && (\n          <div \n            className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n            onClick={() => setShowPhotoModal(false)}\n          >\n            <div className=\"relative max-w-full max-h-full\">\n              <button\n                onClick={() => setShowPhotoModal(false)}\n                className=\"absolute top-4 right-4 z-10 p-2 bg-white rounded-full shadow-lg hover:bg-gray-50 transition-colors\"\n                aria-label=\"Close photo modal\"\n              >\n                <XMarkIcon className=\"w-6 h-6 text-gray-600\" />\n              </button>\n              \n              <Image\n                src={primaryPhoto.url}\n                alt={`${representative.name} official photo`}\n                width={400}\n                height={300}\n                className=\"rounded-lg max-w-full max-h-full object-contain\"\n                sizes=\"(max-width: 768px) 100vw, 80vw\"\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    </TouchInteractions>\n  );\n}\n"],"names":["MobileCandidateCard","representative","onLike","onShare","onFollow","onContact","isLiked","isFollowing","className","showEngagement","enableHaptics","isExpanded","setIsExpanded","useState","activePhotoIndex","setActivePhotoIndex","isLikedState","setIsLikedState","isFollowingState","setIsFollowingState","showPhotoModal","setShowPhotoModal","isLoading","setIsLoading","error","setError","cardRef","useRef","primaryPhoto","enhancedPhotos","topSocialMedia","enhancedSocialMedia","sort","a","b","followersCount","slice","recentActivity","enhancedActivity","triggerHaptic","useCallback","type","navigator","patterns","light","medium","heavy","vibrate","handleLike","id","console","handleShare","share","title","name","office","text","state","url","window","location","href","handleFollow","handleContact","handlePhotoClick","handleSwipeLeft","length","prev","handleSwipeRight","handleSwipeUp","handleSwipeDown","handleLongPress","getPartyColor","party","partyColors","getQualityScoreColor","score","getLevelIcon","level","TouchInteractions","onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","onLongPress","swipeThreshold","longPressDelay","div","ref","role","aria-label","p","onClick","tabIndex","onKeyDown","e","key","preventDefault","Image","src","alt","fill","sizes","priority","onError","span","split","map","n","join","_","index","button","stopPropagation","dataQuality","overallConfidence","CheckCircleIcon","toUpperCase","h2","district","disabled","HeartSolidIcon","HeartIcon","ShareIcon","UserPlusSolidIcon","UserPlusIcon","ProgressiveDisclosure","onToggle","trigger","SparklesIcon","contentClassName","enhancedContacts","h3","contact","EnvelopeIcon","PhoneIcon","GlobeAltIcon","value","isVerified","social","platform","handle","toLocaleString","verified","target","rel","activity","description","ClockIcon","Date","date","toLocaleDateString","source","XMarkIcon","width","height"],"mappings":"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"}