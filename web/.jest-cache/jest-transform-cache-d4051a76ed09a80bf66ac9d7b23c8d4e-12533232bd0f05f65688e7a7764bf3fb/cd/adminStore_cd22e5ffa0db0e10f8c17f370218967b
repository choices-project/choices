01272a3c8e7d31a0a3fd484ca709bbb2
/**
 * Admin Store - Zustand Implementation
 * 
 * Admin-specific business logic and data management.
 * UI state (sidebar, notifications, navigation) moved to global stores.
 * 
 * Created: October 10, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get adminStoreDebug () {
        return adminStoreDebug;
    },
    get adminStoreSubscriptions () {
        return adminStoreSubscriptions;
    },
    get adminStoreUtils () {
        return adminStoreUtils;
    },
    get useActivityFeed () {
        return useActivityFeed;
    },
    get useActivityItems () {
        return useActivityItems;
    },
    get useAdminActions () {
        return useAdminActions;
    },
    get useAdminActiveTab () {
        return useAdminActiveTab;
    },
    get useAdminDashboardActions () {
        return useAdminDashboardActions;
    },
    get useAdminDashboardStats () {
        return useAdminDashboardStats;
    },
    get useAdminError () {
        return useAdminError;
    },
    get useAdminIsReimportRunning () {
        return useAdminIsReimportRunning;
    },
    get useAdminIsSavingSettings () {
        return useAdminIsSavingSettings;
    },
    get useAdminLoading () {
        return useAdminLoading;
    },
    get useAdminNotifications () {
        return useAdminNotifications;
    },
    get useAdminReimportActions () {
        return useAdminReimportActions;
    },
    get useAdminReimportLogs () {
        return useAdminReimportLogs;
    },
    get useAdminReimportProgress () {
        return useAdminReimportProgress;
    },
    get useAdminSettingsTab () {
        return useAdminSettingsTab;
    },
    get useAdminStats () {
        return useAdminStats;
    },
    get useAdminStore () {
        return useAdminStore;
    },
    get useAdminSystemSettings () {
        return useAdminSystemSettings;
    },
    get useAdminSystemSettingsActions () {
        return useAdminSystemSettingsActions;
    },
    get useAdminUserActions () {
        return useAdminUserActions;
    },
    get useAdminUserFilters () {
        return useAdminUserFilters;
    },
    get useAdminUsers () {
        return useAdminUsers;
    },
    get useGeneratedPolls () {
        return useGeneratedPolls;
    },
    get useRecentActivity () {
        return useRecentActivity;
    },
    get useSystemMetrics () {
        return useSystemMetrics;
    },
    get useTrendingTopics () {
        return useTrendingTopics;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _logger = require("../utils/logger");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useAdminStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((set, get)=>({
        // Initial state
        trendingTopics: [],
        generatedPolls: [],
        systemMetrics: null,
        activityItems: [],
        activityFeed: [],
        users: [],
        userFilters: {
            searchTerm: '',
            roleFilter: 'all',
            statusFilter: 'all',
            selectedUsers: new Set(),
            showBulkActions: false
        },
        activeTab: 'overview',
        dashboardStats: null,
        systemSettings: null,
        settingsTab: 'general',
        isSavingSettings: false,
        reimportProgress: {
            totalStates: 0,
            processedStates: 0,
            successfulStates: 0,
            failedStates: 0,
            totalRepresentatives: 0,
            federalRepresentatives: 0,
            stateRepresentatives: 0,
            errors: [],
            stateResults: []
        },
        reimportLogs: [],
        isReimportRunning: false,
        isLoading: false,
        error: null,
        adminNotifications: [],
        // Data loading actions
        loadUsers: async ()=>{
            const { setLoading, setError } = get();
            try {
                setLoading(true);
                setError(null);
                // Fetch users directly from database
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                const { data: users, error } = await supabase.from('user_profiles').select(`
                user_id,
                email,
                display_name,
                role,
                status,
                created_at,
                last_login
              `).order('created_at', {
                    ascending: false
                });
                if (error) {
                    throw new Error(`Failed to fetch users: ${error.message}`);
                }
                // Transform data to match AdminUser interface
                const adminUsers = users?.map((user)=>({
                        id: user.user_id,
                        email: user.email,
                        name: user.display_name ?? 'Unknown User',
                        role: user.role ?? 'user',
                        status: user.status ?? 'active',
                        created_at: user.created_at,
                        last_login: user.last_login
                    })) ?? [];
                set({
                    users: adminUsers
                });
                _logger.logger.info('Users loaded successfully', {
                    userCount: adminUsers.length
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                setError(errorMessage);
                _logger.logger.error('Failed to load users:', error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setLoading(false);
            }
        },
        loadDashboardStats: async ()=>{
            const { setLoading, setError } = get();
            try {
                setLoading(true);
                setError(null);
                // Fetch dashboard stats directly from database
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                // Get total users count
                const { count: totalUsers, error: usersError } = await supabase.from('user_profiles').select('*', {
                    count: 'exact',
                    head: true
                });
                if (usersError) {
                    throw new Error(`Failed to fetch user count: ${usersError.message}`);
                }
                // Get active polls count
                const { count: activePolls, error: pollsError } = await supabase.from('polls').select('*', {
                    count: 'exact',
                    head: true
                }).eq('status', 'active');
                if (pollsError) {
                    throw new Error(`Failed to fetch polls count: ${pollsError.message}`);
                }
                // Get total votes count
                const { count: totalVotes, error: votesError } = await supabase.from('votes').select('*', {
                    count: 'exact',
                    head: true
                });
                if (votesError) {
                    throw new Error(`Failed to fetch votes count: ${votesError.message}`);
                }
                // Determine system health based on recent activity
                const { data: recentActivity } = await supabase.from('analytics_events').select('created_at').gte('created_at', new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString()).limit(1);
                const systemHealth = recentActivity && recentActivity.length > 0 ? 'healthy' : 'warning';
                const stats = {
                    totalUsers: totalUsers ?? 0,
                    activePolls: activePolls ?? 0,
                    totalVotes: totalVotes ?? 0,
                    systemHealth: systemHealth
                };
                set({
                    dashboardStats: stats
                });
                _logger.logger.info('Dashboard stats loaded successfully', {
                    totalUsers: stats.totalUsers,
                    activePolls: stats.activePolls,
                    totalVotes: stats.totalVotes,
                    systemHealth: stats.systemHealth
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                setError(errorMessage);
                _logger.logger.error('Failed to load dashboard stats:', error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setLoading(false);
            }
        },
        loadSystemSettings: async ()=>{
            const { setLoading, setError } = get();
            try {
                setLoading(true);
                setError(null);
                // Fetch system settings from database
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                const { data: settingsData, error } = await supabase.from('system_settings').select('*').single();
                if (error && error.code !== 'PGRST116') {
                    throw new Error(`Failed to fetch system settings: ${error.message}`);
                }
                // Use default settings if none exist in database
                const defaultSettings = {
                    general: {
                        siteName: 'Choices Platform',
                        siteDescription: 'A modern voting platform for democratic decision making',
                        maintenanceMode: false,
                        allowRegistration: true,
                        requireEmailVerification: true
                    },
                    performance: {
                        enableCaching: true,
                        cacheTTL: 3600,
                        enableCompression: true,
                        maxFileSize: 10485760
                    },
                    security: {
                        enableRateLimiting: true,
                        maxRequestsPerMinute: 100,
                        enableCSP: true,
                        enableHSTS: true
                    },
                    notifications: {
                        enableEmailNotifications: true,
                        enablePushNotifications: false,
                        notificationFrequency: 'immediate'
                    }
                };
                const settings = settingsData?.settings ?? defaultSettings;
                set({
                    systemSettings: settings
                });
                _logger.logger.info('System settings loaded successfully');
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                setError(errorMessage);
                _logger.logger.error('Failed to load system settings:', error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setLoading(false);
            }
        },
        // User management actions
        setUserFilters: (filters)=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        ...filters
                    }
                })),
        selectUser: (userId)=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: new Set([
                            ...state.userFilters.selectedUsers,
                            userId
                        ])
                    }
                })),
        deselectUser: (userId)=>set((state)=>{
                const newSelected = new Set(state.userFilters.selectedUsers);
                newSelected.delete(userId);
                return {
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: newSelected
                    }
                };
            }),
        selectAllUsers: ()=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: new Set(state.users.map((user)=>user.id))
                    }
                })),
        deselectAllUsers: ()=>set((state)=>({
                    userFilters: {
                        ...state.userFilters,
                        selectedUsers: new Set()
                    }
                })),
        updateUserRole: async (userId, role)=>{
            try {
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                const { error } = await supabase.from('user_profiles').update({
                    role
                }).eq('user_id', userId);
                if (error) {
                    throw new Error(`Failed to update user role: ${error.message}`);
                }
                // Update local state
                set((state)=>({
                        users: state.users.map((user)=>user.id === userId ? {
                                ...user,
                                role: role
                            } : user)
                    }));
                _logger.logger.info('User role updated successfully', {
                    userId,
                    role
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                set({
                    error: errorMessage
                });
                _logger.logger.error('Failed to update user role:', error instanceof Error ? error : new Error(errorMessage));
            }
        },
        updateUserStatus: async (userId, status)=>{
            try {
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                const { error } = await supabase.from('user_profiles').update({
                    status
                }).eq('user_id', userId);
                if (error) {
                    throw new Error(`Failed to update user status: ${error.message}`);
                }
                // Update local state
                set((state)=>({
                        users: state.users.map((user)=>user.id === userId ? {
                                ...user,
                                status: status
                            } : user)
                    }));
                _logger.logger.info('User status updated successfully', {
                    userId,
                    status
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                set({
                    error: errorMessage
                });
                _logger.logger.error('Failed to update user status:', error instanceof Error ? error : new Error(errorMessage));
            }
        },
        deleteUser: async (userId)=>{
            try {
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                const { error } = await supabase.from('user_profiles').delete().eq('user_id', userId);
                if (error) {
                    throw new Error(`Failed to delete user: ${error.message}`);
                }
                // Update local state
                set((state)=>({
                        users: state.users.filter((user)=>user.id !== userId)
                    }));
                _logger.logger.info('User deleted successfully', {
                    userId
                });
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                set({
                    error: errorMessage
                });
                _logger.logger.error('Failed to delete user:', error instanceof Error ? error : new Error(errorMessage));
            }
        },
        // Dashboard actions
        setActiveTab: (tab)=>set({
                activeTab: tab
            }),
        // System settings actions
        setSystemSettings: (settings)=>set({
                systemSettings: settings
            }),
        updateSystemSetting: (section, key, value)=>set((state)=>{
                if (!state.systemSettings) return state;
                return {
                    systemSettings: {
                        ...state.systemSettings,
                        [section]: {
                            ...state.systemSettings[section],
                            [key]: value
                        }
                    }
                };
            }),
        setSettingsTab: (tab)=>set({
                settingsTab: tab
            }),
        saveSystemSettings: async ()=>{
            const { setIsSavingSettings, setError } = get();
            try {
                setIsSavingSettings(true);
                setError(null);
                const { systemSettings } = get();
                if (!systemSettings) {
                    throw new Error('No settings to save');
                }
                const supabase = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("../../utils/supabase/client"))).then((m)=>m.getSupabaseClient());
                if (!supabase) {
                    throw new Error('Database connection not available');
                }
                const { error } = await supabase.from('system_settings').upsert({
                    settings: systemSettings
                });
                if (error) {
                    throw new Error(`Failed to save system settings: ${error.message}`);
                }
                _logger.logger.info('System settings saved successfully');
            } catch (error) {
                const errorMessage = error instanceof Error ? error.message : 'Unknown error';
                setError(errorMessage);
                _logger.logger.error('Failed to save system settings:', error instanceof Error ? error : new Error(errorMessage));
            } finally{
                setIsSavingSettings(false);
            }
        },
        // Reimport actions
        setReimportProgress: (progress)=>set((state)=>({
                    reimportProgress: {
                        ...state.reimportProgress,
                        ...progress
                    }
                })),
        addReimportLog: (message)=>set((state)=>({
                    reimportLogs: [
                        ...state.reimportLogs,
                        message
                    ]
                })),
        clearReimportLogs: ()=>set({
                reimportLogs: []
            }),
        setIsReimportRunning: (running)=>set({
                isReimportRunning: running
            }),
        startReimport: async ()=>{
            const { setIsReimportRunning, addReimportLog, setReimportProgress } = get();
            try {
                setIsReimportRunning(true);
                addReimportLog('Starting reimport process...');
                // Reset progress
                setReimportProgress({
                    totalStates: 0,
                    processedStates: 0,
                    successfulStates: 0,
                    failedStates: 0,
                    totalRepresentatives: 0,
                    federalRepresentatives: 0,
                    stateRepresentatives: 0,
                    errors: [],
                    stateResults: []
                });
                // Implementation would go here
                addReimportLog('Reimport process completed');
            } catch (error) {
                addReimportLog(`Reimport failed: ${error instanceof Error ? error.message : 'Unknown error'}`);
            } finally{
                setIsReimportRunning(false);
            }
        },
        // Activity and notifications
        addActivityItem: (item)=>set((state)=>({
                    activityItems: [
                        item,
                        ...state.activityItems.slice(0, 99)
                    ] // Keep last 100 items
                })),
        clearActivityItems: ()=>set({
                activityItems: []
            }),
        addAdminNotification: (notification)=>set((state)=>({
                    adminNotifications: [
                        notification,
                        ...state.adminNotifications
                    ]
                })),
        clearAdminNotifications: ()=>set({
                adminNotifications: []
            }),
        markNotificationAsRead: (id)=>set((state)=>({
                    adminNotifications: state.adminNotifications.map((notification)=>notification.id === id ? {
                            ...notification,
                            read: true
                        } : notification)
                })),
        // Utility actions
        setLoading: (loading)=>set({
                isLoading: loading
            }),
        setUpdating: (updating)=>set({
                isSavingSettings: updating
            }),
        setError: (error)=>set({
                error
            }),
        clearError: ()=>set({
                error: null
            }),
        setIsSavingSettings: (saving)=>set({
                isSavingSettings: saving
            }),
        refreshData: async ()=>{
            const { loadUsers, loadDashboardStats, loadSystemSettings } = get();
            await Promise.all([
                loadUsers(),
                loadDashboardStats(),
                loadSystemSettings()
            ]);
        },
        syncData: async ()=>{
            const { refreshData } = get();
            await refreshData();
        }
    }), {
    name: 'admin-store',
    partialize: (state)=>({
            activeTab: state.activeTab,
            settingsTab: state.settingsTab,
            userFilters: state.userFilters
        })
}), {
    name: 'admin-store'
}));
const useTrendingTopics = ()=>useAdminStore((state)=>state.trendingTopics);
const useGeneratedPolls = ()=>useAdminStore((state)=>state.generatedPolls);
const useSystemMetrics = ()=>useAdminStore((state)=>state.systemMetrics);
const useActivityItems = ()=>useAdminStore((state)=>state.activityItems);
const useActivityFeed = ()=>useAdminStore((state)=>state.activityFeed);
const useAdminNotifications = ()=>useAdminStore((state)=>state.adminNotifications);
const useAdminLoading = ()=>useAdminStore((state)=>state.isLoading);
const useAdminError = ()=>useAdminStore((state)=>state.error);
const useAdminUsers = ()=>useAdminStore((state)=>state.users);
const useAdminUserFilters = ()=>useAdminStore((state)=>state.userFilters);
const useAdminUserActions = ()=>useAdminStore((state)=>({
            setUserFilters: state.setUserFilters,
            selectUser: state.selectUser,
            deselectUser: state.deselectUser,
            selectAllUsers: state.selectAllUsers,
            deselectAllUsers: state.deselectAllUsers,
            updateUserRole: state.updateUserRole,
            updateUserStatus: state.updateUserStatus,
            deleteUser: state.deleteUser
        }));
const useAdminActiveTab = ()=>useAdminStore((state)=>state.activeTab);
const useAdminDashboardStats = ()=>useAdminStore((state)=>state.dashboardStats);
const useAdminDashboardActions = ()=>useAdminStore((state)=>({
            setActiveTab: state.setActiveTab,
            loadDashboardStats: state.loadDashboardStats
        }));
const useAdminSystemSettings = ()=>useAdminStore((state)=>state.systemSettings);
const useAdminSettingsTab = ()=>useAdminStore((state)=>state.settingsTab);
const useAdminIsSavingSettings = ()=>useAdminStore((state)=>state.isSavingSettings);
const useAdminSystemSettingsActions = ()=>useAdminStore((state)=>({
            setSystemSettings: state.setSystemSettings,
            updateSystemSetting: state.updateSystemSetting,
            setSettingsTab: state.setSettingsTab,
            saveSystemSettings: state.saveSystemSettings,
            loadSystemSettings: state.loadSystemSettings
        }));
const useAdminReimportProgress = ()=>useAdminStore((state)=>state.reimportProgress);
const useAdminReimportLogs = ()=>useAdminStore((state)=>state.reimportLogs);
const useAdminIsReimportRunning = ()=>useAdminStore((state)=>state.isReimportRunning);
const useAdminReimportActions = ()=>useAdminStore((state)=>({
            setReimportProgress: state.setReimportProgress,
            addReimportLog: state.addReimportLog,
            clearReimportLogs: state.clearReimportLogs,
            setIsReimportRunning: state.setIsReimportRunning,
            startReimport: state.startReimport
        }));
const useAdminActions = ()=>useAdminStore((state)=>({
            loadUsers: state.loadUsers,
            loadDashboardStats: state.loadDashboardStats,
            loadSystemSettings: state.loadSystemSettings,
            addActivityItem: state.addActivityItem,
            clearActivityItems: state.clearActivityItems,
            addAdminNotification: state.addAdminNotification,
            clearAdminNotifications: state.clearAdminNotifications,
            markNotificationAsRead: state.markNotificationAsRead,
            setLoading: state.setLoading,
            setUpdating: state.setUpdating,
            setError: state.setError,
            clearError: state.clearError,
            refreshData: state.refreshData,
            syncData: state.syncData
        }));
const useAdminStats = ()=>useAdminStore((state)=>({
            totalUsers: state.users.length,
            totalNotifications: state.adminNotifications.length,
            unreadNotifications: state.adminNotifications.filter((n)=>!n.read).length,
            totalActivity: state.activityItems.length
        }));
const useRecentActivity = ()=>useAdminStore((state)=>state.activityItems.slice(0, 10));
const adminStoreUtils = {
    getAdminStats: ()=>{
        const state = useAdminStore.getState();
        return {
            totalUsers: state.users.length,
            totalNotifications: state.adminNotifications.length,
            unreadNotifications: state.adminNotifications.filter((n)=>!n.read).length,
            totalActivity: state.activityItems.length
        };
    },
    getDataSummary: ()=>{
        const state = useAdminStore.getState();
        return {
            users: state.users.length,
            trendingTopics: state.trendingTopics.length,
            generatedPolls: state.generatedPolls.length,
            activityItems: state.activityItems.length,
            notifications: state.adminNotifications.length
        };
    }
};
const adminStoreSubscriptions = {
    subscribeToUsers: (callback)=>{
        return useAdminStore.subscribe((state)=>{
            callback(state.users);
        });
    },
    subscribeToDashboardStats: (callback)=>{
        return useAdminStore.subscribe((state)=>{
            callback(state.dashboardStats);
        });
    },
    subscribeToNotifications: (callback)=>{
        return useAdminStore.subscribe((state)=>{
            callback(state.adminNotifications);
        });
    }
};
const adminStoreDebug = {
    logState: ()=>{
        const state = useAdminStore.getState();
        _logger.logger.info('Admin store state:', state);
    },
    logStats: ()=>{
        const stats = adminStoreUtils.getAdminStats();
        _logger.logger.info('Admin statistics:', stats);
    },
    logDataSummary: ()=>{
        const summary = adminStoreUtils.getDataSummary();
        _logger.logger.info('Admin data summary:', summary);
    },
    reset: ()=>{
        useAdminStore.getState().clearActivityItems();
        useAdminStore.getState().clearAdminNotifications();
    // Admin store reset
    }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL2FkbWluU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZG1pbiBTdG9yZSAtIFp1c3RhbmQgSW1wbGVtZW50YXRpb25cbiAqIFxuICogQWRtaW4tc3BlY2lmaWMgYnVzaW5lc3MgbG9naWMgYW5kIGRhdGEgbWFuYWdlbWVudC5cbiAqIFVJIHN0YXRlIChzaWRlYmFyLCBub3RpZmljYXRpb25zLCBuYXZpZ2F0aW9uKSBtb3ZlZCB0byBnbG9iYWwgc3RvcmVzLlxuICogXG4gKiBDcmVhdGVkOiBPY3RvYmVyIDEwLCAyMDI1XG4gKiBTdGF0dXM6IOKchSBBQ1RJVkVcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IGRldnRvb2xzIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IHBlcnNpc3QgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFkbWluTm90aWZpY2F0aW9uLFxuICBUcmVuZGluZ1RvcGljLFxuICBHZW5lcmF0ZWRQb2xsLFxuICBTeXN0ZW1NZXRyaWNzLFxuICBBY3Rpdml0eUl0ZW0sXG4gIEFkbWluVXNlcixcbn0gZnJvbSAnQC9mZWF0dXJlcy9hZG1pbi90eXBlcyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2xpYi91dGlscy9sb2dnZXInO1xuXG4vLyBBZG1pbiBzdG9yZSBzdGF0ZSBpbnRlcmZhY2UgKGJ1c2luZXNzIGxvZ2ljIG9ubHkpXG5pbnRlcmZhY2UgQWRtaW5TdG9yZSB7XG4gIC8vIEFkbWluLXNwZWNpZmljIGRhdGFcbiAgdHJlbmRpbmdUb3BpY3M6IFRyZW5kaW5nVG9waWNbXTtcbiAgZ2VuZXJhdGVkUG9sbHM6IEdlbmVyYXRlZFBvbGxbXTtcbiAgc3lzdGVtTWV0cmljczogU3lzdGVtTWV0cmljcyB8IG51bGw7XG4gIGFjdGl2aXR5SXRlbXM6IEFjdGl2aXR5SXRlbVtdO1xuICBhY3Rpdml0eUZlZWQ6IEFjdGl2aXR5SXRlbVtdO1xuICBcbiAgLy8gVXNlciBtYW5hZ2VtZW50IGRhdGFcbiAgdXNlcnM6IEFkbWluVXNlcltdO1xuICB1c2VyRmlsdGVyczoge1xuICAgIHNlYXJjaFRlcm06IHN0cmluZztcbiAgICByb2xlRmlsdGVyOiAnYWxsJyB8ICdhZG1pbicgfCAnbW9kZXJhdG9yJyB8ICd1c2VyJztcbiAgICBzdGF0dXNGaWx0ZXI6ICdhbGwnIHwgJ2FjdGl2ZScgfCAnaW5hY3RpdmUnIHwgJ3N1c3BlbmRlZCc7XG4gICAgc2VsZWN0ZWRVc2VyczogU2V0PHN0cmluZz47XG4gICAgc2hvd0J1bGtBY3Rpb25zOiBib29sZWFuO1xuICB9O1xuICBcbiAgLy8gRGFzaGJvYXJkIHN0YXRlXG4gIGFjdGl2ZVRhYjogJ292ZXJ2aWV3JyB8ICd1c2VycycgfCAnYW5hbHl0aWNzJyB8ICdzZXR0aW5ncycgfCAnYXVkaXQnO1xuICBkYXNoYm9hcmRTdGF0czoge1xuICAgIHRvdGFsVXNlcnM6IG51bWJlcjtcbiAgICBhY3RpdmVQb2xsczogbnVtYmVyO1xuICAgIHRvdGFsVm90ZXM6IG51bWJlcjtcbiAgICBzeXN0ZW1IZWFsdGg6ICdoZWFsdGh5JyB8ICd3YXJuaW5nJyB8ICdjcml0aWNhbCc7XG4gIH0gfCBudWxsO1xuICBcbiAgLy8gU3lzdGVtIHNldHRpbmdzIHN0YXRlXG4gIHN5c3RlbVNldHRpbmdzOiB7XG4gICAgZ2VuZXJhbDoge1xuICAgICAgc2l0ZU5hbWU6IHN0cmluZztcbiAgICAgIHNpdGVEZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgICAgbWFpbnRlbmFuY2VNb2RlOiBib29sZWFuO1xuICAgICAgYWxsb3dSZWdpc3RyYXRpb246IGJvb2xlYW47XG4gICAgICByZXF1aXJlRW1haWxWZXJpZmljYXRpb246IGJvb2xlYW47XG4gICAgfTtcbiAgICBwZXJmb3JtYW5jZToge1xuICAgICAgZW5hYmxlQ2FjaGluZzogYm9vbGVhbjtcbiAgICAgIGNhY2hlVFRMOiBudW1iZXI7XG4gICAgICBlbmFibGVDb21wcmVzc2lvbjogYm9vbGVhbjtcbiAgICAgIG1heEZpbGVTaXplOiBudW1iZXI7XG4gICAgfTtcbiAgICBzZWN1cml0eToge1xuICAgICAgZW5hYmxlUmF0ZUxpbWl0aW5nOiBib29sZWFuO1xuICAgICAgbWF4UmVxdWVzdHNQZXJNaW51dGU6IG51bWJlcjtcbiAgICAgIGVuYWJsZUNTUDogYm9vbGVhbjtcbiAgICAgIGVuYWJsZUhTVFM6IGJvb2xlYW47XG4gICAgfTtcbiAgICBub3RpZmljYXRpb25zOiB7XG4gICAgICBlbmFibGVFbWFpbE5vdGlmaWNhdGlvbnM6IGJvb2xlYW47XG4gICAgICBlbmFibGVQdXNoTm90aWZpY2F0aW9uczogYm9vbGVhbjtcbiAgICAgIG5vdGlmaWNhdGlvbkZyZXF1ZW5jeTogJ2ltbWVkaWF0ZScgfCAnZGFpbHknIHwgJ3dlZWtseSc7XG4gICAgfTtcbiAgfSB8IG51bGw7XG4gIHNldHRpbmdzVGFiOiAnZ2VuZXJhbCcgfCAncGVyZm9ybWFuY2UnIHwgJ3NlY3VyaXR5JyB8ICdub3RpZmljYXRpb25zJztcbiAgaXNTYXZpbmdTZXR0aW5nczogYm9vbGVhbjtcbiAgXG4gIC8vIFJlaW1wb3J0IHN0YXRlXG4gIHJlaW1wb3J0UHJvZ3Jlc3M6IHtcbiAgICB0b3RhbFN0YXRlczogbnVtYmVyO1xuICAgIHByb2Nlc3NlZFN0YXRlczogbnVtYmVyO1xuICAgIHN1Y2Nlc3NmdWxTdGF0ZXM6IG51bWJlcjtcbiAgICBmYWlsZWRTdGF0ZXM6IG51bWJlcjtcbiAgICB0b3RhbFJlcHJlc2VudGF0aXZlczogbnVtYmVyO1xuICAgIGZlZGVyYWxSZXByZXNlbnRhdGl2ZXM6IG51bWJlcjtcbiAgICBzdGF0ZVJlcHJlc2VudGF0aXZlczogbnVtYmVyO1xuICAgIGVycm9yczogc3RyaW5nW107XG4gICAgc3RhdGVSZXN1bHRzOiBBcnJheTx7XG4gICAgICBzdGF0ZTogc3RyaW5nO1xuICAgICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICAgIHJlcHJlc2VudGF0aXZlczogbnVtYmVyO1xuICAgICAgZHVyYXRpb24/OiBzdHJpbmc7XG4gICAgICBlcnJvcj86IHN0cmluZztcbiAgICB9PjtcbiAgfTtcbiAgcmVpbXBvcnRMb2dzOiBzdHJpbmdbXTtcbiAgaXNSZWltcG9ydFJ1bm5pbmc6IGJvb2xlYW47XG4gIFxuICAvLyBMb2FkaW5nIGFuZCBlcnJvciBzdGF0ZXNcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogc3RyaW5nIHwgbnVsbDtcbiAgXG4gIC8vIEFkbWluIG5vdGlmaWNhdGlvbnNcbiAgYWRtaW5Ob3RpZmljYXRpb25zOiBBZG1pbk5vdGlmaWNhdGlvbltdO1xuICBcbiAgLy8gQWN0aW9uc1xuICAvLyBEYXRhIGxvYWRpbmcgYWN0aW9uc1xuICBsb2FkVXNlcnM6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIGxvYWREYXNoYm9hcmRTdGF0czogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgbG9hZFN5c3RlbVNldHRpbmdzOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgLy8gVXNlciBtYW5hZ2VtZW50IGFjdGlvbnNcbiAgc2V0VXNlckZpbHRlcnM6IChmaWx0ZXJzOiBQYXJ0aWFsPEFkbWluU3RvcmVbJ3VzZXJGaWx0ZXJzJ10+KSA9PiB2b2lkO1xuICBzZWxlY3RVc2VyOiAodXNlcklkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGRlc2VsZWN0VXNlcjogKHVzZXJJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzZWxlY3RBbGxVc2VyczogKCkgPT4gdm9pZDtcbiAgZGVzZWxlY3RBbGxVc2VyczogKCkgPT4gdm9pZDtcbiAgdXBkYXRlVXNlclJvbGU6ICh1c2VySWQ6IHN0cmluZywgcm9sZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICB1cGRhdGVVc2VyU3RhdHVzOiAodXNlcklkOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+O1xuICBkZWxldGVVc2VyOiAodXNlcklkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBEYXNoYm9hcmQgYWN0aW9uc1xuICBzZXRBY3RpdmVUYWI6ICh0YWI6IEFkbWluU3RvcmVbJ2FjdGl2ZVRhYiddKSA9PiB2b2lkO1xuICBcbiAgLy8gU3lzdGVtIHNldHRpbmdzIGFjdGlvbnNcbiAgc2V0U3lzdGVtU2V0dGluZ3M6IChzZXR0aW5nczogQWRtaW5TdG9yZVsnc3lzdGVtU2V0dGluZ3MnXSkgPT4gdm9pZDtcbiAgdXBkYXRlU3lzdGVtU2V0dGluZzogKHNlY3Rpb246IGtleW9mIE5vbk51bGxhYmxlPEFkbWluU3RvcmVbJ3N5c3RlbVNldHRpbmdzJ10+LCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQ7XG4gIHNldFNldHRpbmdzVGFiOiAodGFiOiBBZG1pblN0b3JlWydzZXR0aW5nc1RhYiddKSA9PiB2b2lkO1xuICBzYXZlU3lzdGVtU2V0dGluZ3M6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIFxuICAvLyBSZWltcG9ydCBhY3Rpb25zXG4gIHNldFJlaW1wb3J0UHJvZ3Jlc3M6IChwcm9ncmVzczogUGFydGlhbDxBZG1pblN0b3JlWydyZWltcG9ydFByb2dyZXNzJ10+KSA9PiB2b2lkO1xuICBhZGRSZWltcG9ydExvZzogKG1lc3NhZ2U6IHN0cmluZykgPT4gdm9pZDtcbiAgY2xlYXJSZWltcG9ydExvZ3M6ICgpID0+IHZvaWQ7XG4gIHNldElzUmVpbXBvcnRSdW5uaW5nOiAocnVubmluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc3RhcnRSZWltcG9ydDogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG4gIC8vIEFjdGl2aXR5IGFuZCBub3RpZmljYXRpb25zXG4gIGFkZEFjdGl2aXR5SXRlbTogKGl0ZW06IEFjdGl2aXR5SXRlbSkgPT4gdm9pZDtcbiAgY2xlYXJBY3Rpdml0eUl0ZW1zOiAoKSA9PiB2b2lkO1xuICBhZGRBZG1pbk5vdGlmaWNhdGlvbjogKG5vdGlmaWNhdGlvbjogQWRtaW5Ob3RpZmljYXRpb24pID0+IHZvaWQ7XG4gIGNsZWFyQWRtaW5Ob3RpZmljYXRpb25zOiAoKSA9PiB2b2lkO1xuICBtYXJrTm90aWZpY2F0aW9uQXNSZWFkOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgXG4gIC8vIFV0aWxpdHkgYWN0aW9uc1xuICBzZXRMb2FkaW5nOiAobG9hZGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0VXBkYXRpbmc6ICh1cGRhdGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0RXJyb3I6IChlcnJvcjogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgY2xlYXJFcnJvcjogKCkgPT4gdm9pZDtcbiAgc2V0SXNTYXZpbmdTZXR0aW5nczogKHNhdmluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgcmVmcmVzaERhdGE6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHN5bmNEYXRhOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vLyBDcmVhdGUgdGhlIGFkbWluIHN0b3JlXG5leHBvcnQgY29uc3QgdXNlQWRtaW5TdG9yZSA9IGNyZWF0ZTxBZG1pblN0b3JlPigpKFxuICBkZXZ0b29scyhcbiAgICBwZXJzaXN0KFxuICAgICAgKHNldCwgZ2V0KSA9PiAoe1xuICAgICAgICAvLyBJbml0aWFsIHN0YXRlXG4gICAgICAgIHRyZW5kaW5nVG9waWNzOiBbXSxcbiAgICAgICAgZ2VuZXJhdGVkUG9sbHM6IFtdLFxuICAgICAgICBzeXN0ZW1NZXRyaWNzOiBudWxsLFxuICAgICAgICBhY3Rpdml0eUl0ZW1zOiBbXSxcbiAgICAgICAgYWN0aXZpdHlGZWVkOiBbXSxcbiAgICAgICAgdXNlcnM6IFtdLFxuICAgICAgICB1c2VyRmlsdGVyczoge1xuICAgICAgICAgIHNlYXJjaFRlcm06ICcnLFxuICAgICAgICAgIHJvbGVGaWx0ZXI6ICdhbGwnLFxuICAgICAgICAgIHN0YXR1c0ZpbHRlcjogJ2FsbCcsXG4gICAgICAgICAgc2VsZWN0ZWRVc2VyczogbmV3IFNldCgpLFxuICAgICAgICAgIHNob3dCdWxrQWN0aW9uczogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgIGFjdGl2ZVRhYjogJ292ZXJ2aWV3JyxcbiAgICAgICAgZGFzaGJvYXJkU3RhdHM6IG51bGwsXG4gICAgICAgIHN5c3RlbVNldHRpbmdzOiBudWxsLFxuICAgICAgICBzZXR0aW5nc1RhYjogJ2dlbmVyYWwnLFxuICAgICAgICBpc1NhdmluZ1NldHRpbmdzOiBmYWxzZSxcbiAgICAgICAgcmVpbXBvcnRQcm9ncmVzczoge1xuICAgICAgICAgIHRvdGFsU3RhdGVzOiAwLFxuICAgICAgICAgIHByb2Nlc3NlZFN0YXRlczogMCxcbiAgICAgICAgICBzdWNjZXNzZnVsU3RhdGVzOiAwLFxuICAgICAgICAgIGZhaWxlZFN0YXRlczogMCxcbiAgICAgICAgICB0b3RhbFJlcHJlc2VudGF0aXZlczogMCxcbiAgICAgICAgICBmZWRlcmFsUmVwcmVzZW50YXRpdmVzOiAwLFxuICAgICAgICAgIHN0YXRlUmVwcmVzZW50YXRpdmVzOiAwLFxuICAgICAgICAgIGVycm9yczogW10sXG4gICAgICAgICAgc3RhdGVSZXN1bHRzOiBbXSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVpbXBvcnRMb2dzOiBbXSxcbiAgICAgICAgaXNSZWltcG9ydFJ1bm5pbmc6IGZhbHNlLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgYWRtaW5Ob3RpZmljYXRpb25zOiBbXSxcblxuICAgICAgICAvLyBEYXRhIGxvYWRpbmcgYWN0aW9uc1xuICAgICAgICBsb2FkVXNlcnM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHNldExvYWRpbmcsIHNldEVycm9yIH0gPSBnZXQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGZXRjaCB1c2VycyBkaXJlY3RseSBmcm9tIGRhdGFiYXNlXG4gICAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGltcG9ydCgnQC91dGlscy9zdXBhYmFzZS9jbGllbnQnKS50aGVuKG0gPT4gbS5nZXRTdXBhYmFzZUNsaWVudCgpKTtcbiAgICAgICAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiB1c2VycywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcbiAgICAgICAgICAgICAgLnNlbGVjdChgXG4gICAgICAgICAgICAgICAgdXNlcl9pZCxcbiAgICAgICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgICAgICBkaXNwbGF5X25hbWUsXG4gICAgICAgICAgICAgICAgcm9sZSxcbiAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdCxcbiAgICAgICAgICAgICAgICBsYXN0X2xvZ2luXG4gICAgICAgICAgICAgIGApXG4gICAgICAgICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHVzZXJzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBkYXRhIHRvIG1hdGNoIEFkbWluVXNlciBpbnRlcmZhY2VcbiAgICAgICAgICAgIGNvbnN0IGFkbWluVXNlcnM6IEFkbWluVXNlcltdID0gdXNlcnM/Lm1hcCh1c2VyID0+ICh7XG4gICAgICAgICAgICAgIGlkOiB1c2VyLnVzZXJfaWQsXG4gICAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgICBuYW1lOiB1c2VyLmRpc3BsYXlfbmFtZSA/PyAnVW5rbm93biBVc2VyJyxcbiAgICAgICAgICAgICAgcm9sZTogKHVzZXIucm9sZSBhcyAnYWRtaW4nIHwgJ21vZGVyYXRvcicgfCAndXNlcicpID8/ICd1c2VyJyxcbiAgICAgICAgICAgICAgc3RhdHVzOiAodXNlci5zdGF0dXMgYXMgJ2FjdGl2ZScgfCAnaW5hY3RpdmUnIHwgJ3N1c3BlbmRlZCcpID8/ICdhY3RpdmUnLFxuICAgICAgICAgICAgICBjcmVhdGVkX2F0OiB1c2VyLmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICAgIGxhc3RfbG9naW46IHVzZXIubGFzdF9sb2dpblxuICAgICAgICAgICAgfSkpID8/IFtdO1xuXG4gICAgICAgICAgICBzZXQoeyB1c2VyczogYWRtaW5Vc2VycyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ1VzZXJzIGxvYWRlZCBzdWNjZXNzZnVsbHknLCB7XG4gICAgICAgICAgICAgIHVzZXJDb3VudDogYWRtaW5Vc2Vycy5sZW5ndGhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHVzZXJzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgbG9hZERhc2hib2FyZFN0YXRzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXRMb2FkaW5nLCBzZXRFcnJvciB9ID0gZ2V0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmV0Y2ggZGFzaGJvYXJkIHN0YXRzIGRpcmVjdGx5IGZyb20gZGF0YWJhc2VcbiAgICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL2NsaWVudCcpLnRoZW4obSA9PiBtLmdldFN1cGFiYXNlQ2xpZW50KCkpO1xuICAgICAgICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdG90YWwgdXNlcnMgY291bnRcbiAgICAgICAgICAgIGNvbnN0IHsgY291bnQ6IHRvdGFsVXNlcnMsIGVycm9yOiB1c2Vyc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgndXNlcl9wcm9maWxlcycpXG4gICAgICAgICAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICBpZiAodXNlcnNFcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCB1c2VyIGNvdW50OiAke3VzZXJzRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IGFjdGl2ZSBwb2xscyBjb3VudFxuICAgICAgICAgICAgY29uc3QgeyBjb3VudDogYWN0aXZlUG9sbHMsIGVycm9yOiBwb2xsc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgncG9sbHMnKVxuICAgICAgICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KVxuICAgICAgICAgICAgICAuZXEoJ3N0YXR1cycsICdhY3RpdmUnKTtcblxuICAgICAgICAgICAgaWYgKHBvbGxzRXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggcG9sbHMgY291bnQ6ICR7cG9sbHNFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdG90YWwgdm90ZXMgY291bnRcbiAgICAgICAgICAgIGNvbnN0IHsgY291bnQ6IHRvdGFsVm90ZXMsIGVycm9yOiB2b3Rlc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgndm90ZXMnKVxuICAgICAgICAgICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcblxuICAgICAgICAgICAgaWYgKHZvdGVzRXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggdm90ZXMgY291bnQ6ICR7dm90ZXNFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgc3lzdGVtIGhlYWx0aCBiYXNlZCBvbiByZWNlbnQgYWN0aXZpdHlcbiAgICAgICAgICAgIGNvbnN0IHsgZGF0YTogcmVjZW50QWN0aXZpdHkgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCdhbmFseXRpY3NfZXZlbnRzJylcbiAgICAgICAgICAgICAgLnNlbGVjdCgnY3JlYXRlZF9hdCcpXG4gICAgICAgICAgICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMjQgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSlcbiAgICAgICAgICAgICAgLmxpbWl0KDEpO1xuXG4gICAgICAgICAgICBjb25zdCBzeXN0ZW1IZWFsdGggPSByZWNlbnRBY3Rpdml0eSAmJiByZWNlbnRBY3Rpdml0eS5sZW5ndGggPiAwID8gJ2hlYWx0aHknIDogJ3dhcm5pbmcnO1xuXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgICAgICAgICAgdG90YWxVc2VyczogdG90YWxVc2VycyA/PyAwLFxuICAgICAgICAgICAgICBhY3RpdmVQb2xsczogYWN0aXZlUG9sbHMgPz8gMCxcbiAgICAgICAgICAgICAgdG90YWxWb3RlczogdG90YWxWb3RlcyA/PyAwLFxuICAgICAgICAgICAgICBzeXN0ZW1IZWFsdGg6IHN5c3RlbUhlYWx0aCBhcyAnaGVhbHRoeScgfCAnd2FybmluZycgfCAnY3JpdGljYWwnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzZXQoeyBkYXNoYm9hcmRTdGF0czogc3RhdHMgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdEYXNoYm9hcmQgc3RhdHMgbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgICAgICAgdG90YWxVc2Vyczogc3RhdHMudG90YWxVc2VycyxcbiAgICAgICAgICAgICAgYWN0aXZlUG9sbHM6IHN0YXRzLmFjdGl2ZVBvbGxzLFxuICAgICAgICAgICAgICB0b3RhbFZvdGVzOiBzdGF0cy50b3RhbFZvdGVzLFxuICAgICAgICAgICAgICBzeXN0ZW1IZWFsdGg6IHN0YXRzLnN5c3RlbUhlYWx0aFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGxvYWQgZGFzaGJvYXJkIHN0YXRzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgbG9hZFN5c3RlbVNldHRpbmdzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBzZXRMb2FkaW5nLCBzZXRFcnJvciB9ID0gZ2V0KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmV0Y2ggc3lzdGVtIHNldHRpbmdzIGZyb20gZGF0YWJhc2VcbiAgICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL2NsaWVudCcpLnRoZW4obSA9PiBtLmdldFN1cGFiYXNlQ2xpZW50KCkpO1xuICAgICAgICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IHNldHRpbmdzRGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCdzeXN0ZW1fc2V0dGluZ3MnKVxuICAgICAgICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2JykgeyAvLyBQR1JTVDExNiA9IG5vIHJvd3MgcmV0dXJuZWRcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggc3lzdGVtIHNldHRpbmdzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVzZSBkZWZhdWx0IHNldHRpbmdzIGlmIG5vbmUgZXhpc3QgaW4gZGF0YWJhc2VcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgZ2VuZXJhbDoge1xuICAgICAgICAgICAgICAgIHNpdGVOYW1lOiAnQ2hvaWNlcyBQbGF0Zm9ybScsXG4gICAgICAgICAgICAgICAgc2l0ZURlc2NyaXB0aW9uOiAnQSBtb2Rlcm4gdm90aW5nIHBsYXRmb3JtIGZvciBkZW1vY3JhdGljIGRlY2lzaW9uIG1ha2luZycsXG4gICAgICAgICAgICAgICAgbWFpbnRlbmFuY2VNb2RlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbGxvd1JlZ2lzdHJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXF1aXJlRW1haWxWZXJpZmljYXRpb246IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlQ2FjaGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjYWNoZVRUTDogMzYwMCxcbiAgICAgICAgICAgICAgICBlbmFibGVDb21wcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBtYXhGaWxlU2l6ZTogMTA0ODU3NjAsIC8vIDEwTUJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgc2VjdXJpdHk6IHtcbiAgICAgICAgICAgICAgICBlbmFibGVSYXRlTGltaXRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgbWF4UmVxdWVzdHNQZXJNaW51dGU6IDEwMCxcbiAgICAgICAgICAgICAgICBlbmFibGVDU1A6IHRydWUsXG4gICAgICAgICAgICAgICAgZW5hYmxlSFNUUzogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbm90aWZpY2F0aW9uczoge1xuICAgICAgICAgICAgICAgIGVuYWJsZUVtYWlsTm90aWZpY2F0aW9uczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbmFibGVQdXNoTm90aWZpY2F0aW9uczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRnJlcXVlbmN5OiAnaW1tZWRpYXRlJyBhcyBjb25zdCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gc2V0dGluZ3NEYXRhPy5zZXR0aW5ncyA/PyBkZWZhdWx0U2V0dGluZ3M7XG4gICAgICAgICAgICBzZXQoeyBzeXN0ZW1TZXR0aW5nczogc2V0dGluZ3MgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdTeXN0ZW0gc2V0dGluZ3MgbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIHN5c3RlbSBzZXR0aW5nczonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZXIgbWFuYWdlbWVudCBhY3Rpb25zXG4gICAgICAgIHNldFVzZXJGaWx0ZXJzOiAoZmlsdGVycykgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICB1c2VyRmlsdGVyczogeyAuLi5zdGF0ZS51c2VyRmlsdGVycywgLi4uZmlsdGVycyB9XG4gICAgICAgIH0pKSxcblxuICAgICAgICBzZWxlY3RVc2VyOiAodXNlcklkKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHVzZXJGaWx0ZXJzOiB7XG4gICAgICAgICAgICAuLi5zdGF0ZS51c2VyRmlsdGVycyxcbiAgICAgICAgICAgIHNlbGVjdGVkVXNlcnM6IG5ldyBTZXQoWy4uLnN0YXRlLnVzZXJGaWx0ZXJzLnNlbGVjdGVkVXNlcnMsIHVzZXJJZF0pXG4gICAgICAgICAgfVxuICAgICAgICB9KSksXG5cbiAgICAgICAgZGVzZWxlY3RVc2VyOiAodXNlcklkKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgY29uc3QgbmV3U2VsZWN0ZWQgPSBuZXcgU2V0KHN0YXRlLnVzZXJGaWx0ZXJzLnNlbGVjdGVkVXNlcnMpO1xuICAgICAgICAgIG5ld1NlbGVjdGVkLmRlbGV0ZSh1c2VySWQpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1c2VyRmlsdGVyczoge1xuICAgICAgICAgICAgICAuLi5zdGF0ZS51c2VyRmlsdGVycyxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRVc2VyczogbmV3U2VsZWN0ZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KSxcblxuICAgICAgICBzZWxlY3RBbGxVc2VyczogKCkgPT4gc2V0KChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICB1c2VyRmlsdGVyczoge1xuICAgICAgICAgICAgLi4uc3RhdGUudXNlckZpbHRlcnMsXG4gICAgICAgICAgICBzZWxlY3RlZFVzZXJzOiBuZXcgU2V0KHN0YXRlLnVzZXJzLm1hcCh1c2VyID0+IHVzZXIuaWQpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSkpLFxuXG4gICAgICAgIGRlc2VsZWN0QWxsVXNlcnM6ICgpID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgdXNlckZpbHRlcnM6IHtcbiAgICAgICAgICAgIC4uLnN0YXRlLnVzZXJGaWx0ZXJzLFxuICAgICAgICAgICAgc2VsZWN0ZWRVc2VyczogbmV3IFNldCgpXG4gICAgICAgICAgfVxuICAgICAgICB9KSksXG5cbiAgICAgICAgdXBkYXRlVXNlclJvbGU6IGFzeW5jICh1c2VySWQsIHJvbGUpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBpbXBvcnQoJ0AvdXRpbHMvc3VwYWJhc2UvY2xpZW50JykudGhlbihtID0+IG0uZ2V0U3VwYWJhc2VDbGllbnQoKSk7XG4gICAgICAgICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcbiAgICAgICAgICAgICAgLnVwZGF0ZSh7IHJvbGUgfSlcbiAgICAgICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKTtcblxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIHJvbGU6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgICAgICB1c2Vyczogc3RhdGUudXNlcnMubWFwKHVzZXIgPT4gXG4gICAgICAgICAgICAgICAgdXNlci5pZCA9PT0gdXNlcklkID8geyAuLi51c2VyLCByb2xlOiByb2xlIGFzICdhZG1pbicgfCAnbW9kZXJhdG9yJyB8ICd1c2VyJyB9IDogdXNlclxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIHJvbGUgdXBkYXRlZCBzdWNjZXNzZnVsbHknLCB7IHVzZXJJZCwgcm9sZSB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcic7XG4gICAgICAgICAgICBzZXQoeyBlcnJvcjogZXJyb3JNZXNzYWdlIH0pO1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gdXBkYXRlIHVzZXIgcm9sZTonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVVzZXJTdGF0dXM6IGFzeW5jICh1c2VySWQsIHN0YXR1cykgPT4ge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGF3YWl0IGltcG9ydCgnQC91dGlscy9zdXBhYmFzZS9jbGllbnQnKS50aGVuKG0gPT4gbS5nZXRTdXBhYmFzZUNsaWVudCgpKTtcbiAgICAgICAgICAgIGlmICghc3VwYWJhc2UpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgICAgLmZyb20oJ3VzZXJfcHJvZmlsZXMnKVxuICAgICAgICAgICAgICAudXBkYXRlKHsgc3RhdHVzIH0pXG4gICAgICAgICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byB1cGRhdGUgdXNlciBzdGF0dXM6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBkYXRlIGxvY2FsIHN0YXRlXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgICAgICB1c2Vyczogc3RhdGUudXNlcnMubWFwKHVzZXIgPT4gXG4gICAgICAgICAgICAgICAgdXNlci5pZCA9PT0gdXNlcklkID8geyAuLi51c2VyLCBzdGF0dXM6IHN0YXR1cyBhcyAnYWN0aXZlJyB8ICdpbmFjdGl2ZScgfCAnc3VzcGVuZGVkJyB9IDogdXNlclxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIHN0YXR1cyB1cGRhdGVkIHN1Y2Nlc3NmdWxseScsIHsgdXNlcklkLCBzdGF0dXMgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICAgICAgc2V0KHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHVwZGF0ZSB1c2VyIHN0YXR1czonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRlbGV0ZVVzZXI6IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3VwYWJhc2UgPSBhd2FpdCBpbXBvcnQoJ0AvdXRpbHMvc3VwYWJhc2UvY2xpZW50JykudGhlbihtID0+IG0uZ2V0U3VwYWJhc2VDbGllbnQoKSk7XG4gICAgICAgICAgICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBub3QgYXZhaWxhYmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAgIC5mcm9tKCd1c2VyX3Byb2ZpbGVzJylcbiAgICAgICAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCk7XG5cbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBkZWxldGUgdXNlcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgbG9jYWwgc3RhdGVcbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgICAgIHVzZXJzOiBzdGF0ZS51c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLmlkICE9PSB1c2VySWQpXG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdVc2VyIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5JywgeyB1c2VySWQgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICAgICAgc2V0KHsgZXJyb3I6IGVycm9yTWVzc2FnZSB9KTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSB1c2VyOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gRGFzaGJvYXJkIGFjdGlvbnNcbiAgICAgICAgc2V0QWN0aXZlVGFiOiAodGFiKSA9PiBzZXQoeyBhY3RpdmVUYWI6IHRhYiB9KSxcblxuICAgICAgICAvLyBTeXN0ZW0gc2V0dGluZ3MgYWN0aW9uc1xuICAgICAgICBzZXRTeXN0ZW1TZXR0aW5nczogKHNldHRpbmdzKSA9PiBzZXQoeyBzeXN0ZW1TZXR0aW5nczogc2V0dGluZ3MgfSksXG4gICAgICAgIFxuICAgICAgICB1cGRhdGVTeXN0ZW1TZXR0aW5nOiAoc2VjdGlvbiwga2V5LCB2YWx1ZSkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIGlmICghc3RhdGUuc3lzdGVtU2V0dGluZ3MpIHJldHVybiBzdGF0ZTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3lzdGVtU2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgLi4uc3RhdGUuc3lzdGVtU2V0dGluZ3MsXG4gICAgICAgICAgICAgIFtzZWN0aW9uXToge1xuICAgICAgICAgICAgICAgIC4uLnN0YXRlLnN5c3RlbVNldHRpbmdzW3NlY3Rpb25dLFxuICAgICAgICAgICAgICAgIFtrZXldOiB2YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBzZXRTZXR0aW5nc1RhYjogKHRhYikgPT4gc2V0KHsgc2V0dGluZ3NUYWI6IHRhYiB9KSxcblxuICAgICAgICBzYXZlU3lzdGVtU2V0dGluZ3M6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHNldElzU2F2aW5nU2V0dGluZ3MsIHNldEVycm9yIH0gPSBnZXQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0SXNTYXZpbmdTZXR0aW5ncyh0cnVlKTtcbiAgICAgICAgICAgIHNldEVycm9yKG51bGwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB7IHN5c3RlbVNldHRpbmdzIH0gPSBnZXQoKTtcbiAgICAgICAgICAgIGlmICghc3lzdGVtU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBzZXR0aW5ncyB0byBzYXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHN1cGFiYXNlID0gYXdhaXQgaW1wb3J0KCdAL3V0aWxzL3N1cGFiYXNlL2NsaWVudCcpLnRoZW4obSA9PiBtLmdldFN1cGFiYXNlQ2xpZW50KCkpO1xuICAgICAgICAgICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGNvbm5lY3Rpb24gbm90IGF2YWlsYWJsZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgICAgICAuZnJvbSgnc3lzdGVtX3NldHRpbmdzJylcbiAgICAgICAgICAgICAgLnVwc2VydCh7IHNldHRpbmdzOiBzeXN0ZW1TZXR0aW5ncyB9KTtcblxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHNhdmUgc3lzdGVtIHNldHRpbmdzOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKCdTeXN0ZW0gc2V0dGluZ3Mgc2F2ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgICAgICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNhdmUgc3lzdGVtIHNldHRpbmdzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvciA6IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0SXNTYXZpbmdTZXR0aW5ncyhmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIFJlaW1wb3J0IGFjdGlvbnNcbiAgICAgICAgc2V0UmVpbXBvcnRQcm9ncmVzczogKHByb2dyZXNzKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHJlaW1wb3J0UHJvZ3Jlc3M6IHsgLi4uc3RhdGUucmVpbXBvcnRQcm9ncmVzcywgLi4ucHJvZ3Jlc3MgfVxuICAgICAgICB9KSksXG5cbiAgICAgICAgYWRkUmVpbXBvcnRMb2c6IChtZXNzYWdlKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIHJlaW1wb3J0TG9nczogWy4uLnN0YXRlLnJlaW1wb3J0TG9ncywgbWVzc2FnZV1cbiAgICAgICAgfSkpLFxuXG4gICAgICAgIGNsZWFyUmVpbXBvcnRMb2dzOiAoKSA9PiBzZXQoeyByZWltcG9ydExvZ3M6IFtdIH0pLFxuXG4gICAgICAgIHNldElzUmVpbXBvcnRSdW5uaW5nOiAocnVubmluZykgPT4gc2V0KHsgaXNSZWltcG9ydFJ1bm5pbmc6IHJ1bm5pbmcgfSksXG5cbiAgICAgICAgc3RhcnRSZWltcG9ydDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgc2V0SXNSZWltcG9ydFJ1bm5pbmcsIGFkZFJlaW1wb3J0TG9nLCBzZXRSZWltcG9ydFByb2dyZXNzIH0gPSBnZXQoKTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2V0SXNSZWltcG9ydFJ1bm5pbmcodHJ1ZSk7XG4gICAgICAgICAgICBhZGRSZWltcG9ydExvZygnU3RhcnRpbmcgcmVpbXBvcnQgcHJvY2Vzcy4uLicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCBwcm9ncmVzc1xuICAgICAgICAgICAgc2V0UmVpbXBvcnRQcm9ncmVzcyh7XG4gICAgICAgICAgICAgIHRvdGFsU3RhdGVzOiAwLFxuICAgICAgICAgICAgICBwcm9jZXNzZWRTdGF0ZXM6IDAsXG4gICAgICAgICAgICAgIHN1Y2Nlc3NmdWxTdGF0ZXM6IDAsXG4gICAgICAgICAgICAgIGZhaWxlZFN0YXRlczogMCxcbiAgICAgICAgICAgICAgdG90YWxSZXByZXNlbnRhdGl2ZXM6IDAsXG4gICAgICAgICAgICAgIGZlZGVyYWxSZXByZXNlbnRhdGl2ZXM6IDAsXG4gICAgICAgICAgICAgIHN0YXRlUmVwcmVzZW50YXRpdmVzOiAwLFxuICAgICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgICBzdGF0ZVJlc3VsdHM6IFtdLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEltcGxlbWVudGF0aW9uIHdvdWxkIGdvIGhlcmVcbiAgICAgICAgICAgIGFkZFJlaW1wb3J0TG9nKCdSZWltcG9ydCBwcm9jZXNzIGNvbXBsZXRlZCcpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBhZGRSZWltcG9ydExvZyhgUmVpbXBvcnQgZmFpbGVkOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApO1xuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzZXRJc1JlaW1wb3J0UnVubmluZyhmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEFjdGl2aXR5IGFuZCBub3RpZmljYXRpb25zXG4gICAgICAgIGFkZEFjdGl2aXR5SXRlbTogKGl0ZW0pID0+IHNldCgoc3RhdGUpID0+ICh7XG4gICAgICAgICAgYWN0aXZpdHlJdGVtczogW2l0ZW0sIC4uLnN0YXRlLmFjdGl2aXR5SXRlbXMuc2xpY2UoMCwgOTkpXSAvLyBLZWVwIGxhc3QgMTAwIGl0ZW1zXG4gICAgICAgIH0pKSxcblxuICAgICAgICBjbGVhckFjdGl2aXR5SXRlbXM6ICgpID0+IHNldCh7IGFjdGl2aXR5SXRlbXM6IFtdIH0pLFxuXG4gICAgICAgIGFkZEFkbWluTm90aWZpY2F0aW9uOiAobm90aWZpY2F0aW9uKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIGFkbWluTm90aWZpY2F0aW9uczogW25vdGlmaWNhdGlvbiwgLi4uc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zXVxuICAgICAgICB9KSksXG5cbiAgICAgICAgY2xlYXJBZG1pbk5vdGlmaWNhdGlvbnM6ICgpID0+IHNldCh7IGFkbWluTm90aWZpY2F0aW9uczogW10gfSksXG5cbiAgICAgICAgbWFya05vdGlmaWNhdGlvbkFzUmVhZDogKGlkKSA9PiBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgICAgIGFkbWluTm90aWZpY2F0aW9uczogc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zLm1hcChub3RpZmljYXRpb24gPT5cbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5pZCA9PT0gaWQgPyB7IC4uLm5vdGlmaWNhdGlvbiwgcmVhZDogdHJ1ZSB9IDogbm90aWZpY2F0aW9uXG4gICAgICAgICAgKVxuICAgICAgICB9KSksXG5cbiAgICAgICAgLy8gVXRpbGl0eSBhY3Rpb25zXG4gICAgICAgIHNldExvYWRpbmc6IChsb2FkaW5nKSA9PiBzZXQoeyBpc0xvYWRpbmc6IGxvYWRpbmcgfSksXG4gICAgICAgIHNldFVwZGF0aW5nOiAodXBkYXRpbmcpID0+IHNldCh7IGlzU2F2aW5nU2V0dGluZ3M6IHVwZGF0aW5nIH0pLFxuICAgICAgICBzZXRFcnJvcjogKGVycm9yKSA9PiBzZXQoeyBlcnJvciB9KSxcbiAgICAgICAgY2xlYXJFcnJvcjogKCkgPT4gc2V0KHsgZXJyb3I6IG51bGwgfSksXG4gICAgICAgIHNldElzU2F2aW5nU2V0dGluZ3M6IChzYXZpbmcpID0+IHNldCh7IGlzU2F2aW5nU2V0dGluZ3M6IHNhdmluZyB9KSxcblxuICAgICAgICByZWZyZXNoRGF0YTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbG9hZFVzZXJzLCBsb2FkRGFzaGJvYXJkU3RhdHMsIGxvYWRTeXN0ZW1TZXR0aW5ncyB9ID0gZ2V0KCk7XG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgbG9hZFVzZXJzKCksXG4gICAgICAgICAgICBsb2FkRGFzaGJvYXJkU3RhdHMoKSxcbiAgICAgICAgICAgIGxvYWRTeXN0ZW1TZXR0aW5ncygpXG4gICAgICAgICAgXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3luY0RhdGE6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHJlZnJlc2hEYXRhIH0gPSBnZXQoKTtcbiAgICAgICAgICBhd2FpdCByZWZyZXNoRGF0YSgpO1xuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdhZG1pbi1zdG9yZScsXG4gICAgICAgIHBhcnRpYWxpemU6IChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBhY3RpdmVUYWI6IHN0YXRlLmFjdGl2ZVRhYixcbiAgICAgICAgICBzZXR0aW5nc1RhYjogc3RhdGUuc2V0dGluZ3NUYWIsXG4gICAgICAgICAgdXNlckZpbHRlcnM6IHN0YXRlLnVzZXJGaWx0ZXJzLFxuICAgICAgICB9KSxcbiAgICAgIH1cbiAgICApLFxuICAgIHtcbiAgICAgIG5hbWU6ICdhZG1pbi1zdG9yZScsXG4gICAgfVxuICApXG4pO1xuXG4vLyBFeHBvcnQgaW5kaXZpZHVhbCBzZWxlY3RvcnMgZm9yIGJldHRlciBwZXJmb3JtYW5jZVxuZXhwb3J0IGNvbnN0IHVzZVRyZW5kaW5nVG9waWNzID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLnRyZW5kaW5nVG9waWNzKTtcbmV4cG9ydCBjb25zdCB1c2VHZW5lcmF0ZWRQb2xscyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5nZW5lcmF0ZWRQb2xscyk7XG5leHBvcnQgY29uc3QgdXNlU3lzdGVtTWV0cmljcyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5zeXN0ZW1NZXRyaWNzKTtcbmV4cG9ydCBjb25zdCB1c2VBY3Rpdml0eUl0ZW1zID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLmFjdGl2aXR5SXRlbXMpO1xuZXhwb3J0IGNvbnN0IHVzZUFjdGl2aXR5RmVlZCA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5hY3Rpdml0eUZlZWQpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluTm90aWZpY2F0aW9ucyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5hZG1pbk5vdGlmaWNhdGlvbnMpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluTG9hZGluZyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5pc0xvYWRpbmcpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluRXJyb3IgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuZXJyb3IpO1xuXG4vLyBVc2VyIG1hbmFnZW1lbnQgc2VsZWN0b3JzXG5leHBvcnQgY29uc3QgdXNlQWRtaW5Vc2VycyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS51c2Vycyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5Vc2VyRmlsdGVycyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS51c2VyRmlsdGVycyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5Vc2VyQWN0aW9ucyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBzZXRVc2VyRmlsdGVyczogc3RhdGUuc2V0VXNlckZpbHRlcnMsXG4gIHNlbGVjdFVzZXI6IHN0YXRlLnNlbGVjdFVzZXIsXG4gIGRlc2VsZWN0VXNlcjogc3RhdGUuZGVzZWxlY3RVc2VyLFxuICBzZWxlY3RBbGxVc2Vyczogc3RhdGUuc2VsZWN0QWxsVXNlcnMsXG4gIGRlc2VsZWN0QWxsVXNlcnM6IHN0YXRlLmRlc2VsZWN0QWxsVXNlcnMsXG4gIHVwZGF0ZVVzZXJSb2xlOiBzdGF0ZS51cGRhdGVVc2VyUm9sZSxcbiAgdXBkYXRlVXNlclN0YXR1czogc3RhdGUudXBkYXRlVXNlclN0YXR1cyxcbiAgZGVsZXRlVXNlcjogc3RhdGUuZGVsZXRlVXNlcixcbn0pKTtcblxuLy8gRGFzaGJvYXJkIHNlbGVjdG9yc1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluQWN0aXZlVGFiID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLmFjdGl2ZVRhYik7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5EYXNoYm9hcmRTdGF0cyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5kYXNoYm9hcmRTdGF0cyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5EYXNoYm9hcmRBY3Rpb25zID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+ICh7XG4gIHNldEFjdGl2ZVRhYjogc3RhdGUuc2V0QWN0aXZlVGFiLFxuICBsb2FkRGFzaGJvYXJkU3RhdHM6IHN0YXRlLmxvYWREYXNoYm9hcmRTdGF0cyxcbn0pKTtcblxuLy8gU3lzdGVtIHNldHRpbmdzIHNlbGVjdG9yc1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluU3lzdGVtU2V0dGluZ3MgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuc3lzdGVtU2V0dGluZ3MpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluU2V0dGluZ3NUYWIgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUuc2V0dGluZ3NUYWIpO1xuZXhwb3J0IGNvbnN0IHVzZUFkbWluSXNTYXZpbmdTZXR0aW5ncyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiBzdGF0ZS5pc1NhdmluZ1NldHRpbmdzKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pblN5c3RlbVNldHRpbmdzQWN0aW9ucyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBzZXRTeXN0ZW1TZXR0aW5nczogc3RhdGUuc2V0U3lzdGVtU2V0dGluZ3MsXG4gIHVwZGF0ZVN5c3RlbVNldHRpbmc6IHN0YXRlLnVwZGF0ZVN5c3RlbVNldHRpbmcsXG4gIHNldFNldHRpbmdzVGFiOiBzdGF0ZS5zZXRTZXR0aW5nc1RhYixcbiAgc2F2ZVN5c3RlbVNldHRpbmdzOiBzdGF0ZS5zYXZlU3lzdGVtU2V0dGluZ3MsXG4gIGxvYWRTeXN0ZW1TZXR0aW5nczogc3RhdGUubG9hZFN5c3RlbVNldHRpbmdzLFxufSkpO1xuXG4vLyBSZWltcG9ydCBzZWxlY3RvcnNcbmV4cG9ydCBjb25zdCB1c2VBZG1pblJlaW1wb3J0UHJvZ3Jlc3MgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUucmVpbXBvcnRQcm9ncmVzcyk7XG5leHBvcnQgY29uc3QgdXNlQWRtaW5SZWltcG9ydExvZ3MgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gc3RhdGUucmVpbXBvcnRMb2dzKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pbklzUmVpbXBvcnRSdW5uaW5nID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+IHN0YXRlLmlzUmVpbXBvcnRSdW5uaW5nKTtcbmV4cG9ydCBjb25zdCB1c2VBZG1pblJlaW1wb3J0QWN0aW9ucyA9ICgpID0+IHVzZUFkbWluU3RvcmUoKHN0YXRlKSA9PiAoe1xuICBzZXRSZWltcG9ydFByb2dyZXNzOiBzdGF0ZS5zZXRSZWltcG9ydFByb2dyZXNzLFxuICBhZGRSZWltcG9ydExvZzogc3RhdGUuYWRkUmVpbXBvcnRMb2csXG4gIGNsZWFyUmVpbXBvcnRMb2dzOiBzdGF0ZS5jbGVhclJlaW1wb3J0TG9ncyxcbiAgc2V0SXNSZWltcG9ydFJ1bm5pbmc6IHN0YXRlLnNldElzUmVpbXBvcnRSdW5uaW5nLFxuICBzdGFydFJlaW1wb3J0OiBzdGF0ZS5zdGFydFJlaW1wb3J0LFxufSkpO1xuXG4vLyBHZW5lcmFsIGFkbWluIGFjdGlvbnNcbmV4cG9ydCBjb25zdCB1c2VBZG1pbkFjdGlvbnMgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gKHtcbiAgbG9hZFVzZXJzOiBzdGF0ZS5sb2FkVXNlcnMsXG4gIGxvYWREYXNoYm9hcmRTdGF0czogc3RhdGUubG9hZERhc2hib2FyZFN0YXRzLFxuICBsb2FkU3lzdGVtU2V0dGluZ3M6IHN0YXRlLmxvYWRTeXN0ZW1TZXR0aW5ncyxcbiAgYWRkQWN0aXZpdHlJdGVtOiBzdGF0ZS5hZGRBY3Rpdml0eUl0ZW0sXG4gIGNsZWFyQWN0aXZpdHlJdGVtczogc3RhdGUuY2xlYXJBY3Rpdml0eUl0ZW1zLFxuICBhZGRBZG1pbk5vdGlmaWNhdGlvbjogc3RhdGUuYWRkQWRtaW5Ob3RpZmljYXRpb24sXG4gIGNsZWFyQWRtaW5Ob3RpZmljYXRpb25zOiBzdGF0ZS5jbGVhckFkbWluTm90aWZpY2F0aW9ucyxcbiAgbWFya05vdGlmaWNhdGlvbkFzUmVhZDogc3RhdGUubWFya05vdGlmaWNhdGlvbkFzUmVhZCxcbiAgc2V0TG9hZGluZzogc3RhdGUuc2V0TG9hZGluZyxcbiAgc2V0VXBkYXRpbmc6IHN0YXRlLnNldFVwZGF0aW5nLFxuICBzZXRFcnJvcjogc3RhdGUuc2V0RXJyb3IsXG4gIGNsZWFyRXJyb3I6IHN0YXRlLmNsZWFyRXJyb3IsXG4gIHJlZnJlc2hEYXRhOiBzdGF0ZS5yZWZyZXNoRGF0YSxcbiAgc3luY0RhdGE6IHN0YXRlLnN5bmNEYXRhLFxufSkpO1xuXG4vLyBBZG1pbiBzdG9yZSB1dGlsaXRpZXNcbmV4cG9ydCBjb25zdCB1c2VBZG1pblN0YXRzID0gKCkgPT4gdXNlQWRtaW5TdG9yZSgoc3RhdGUpID0+ICh7XG4gIHRvdGFsVXNlcnM6IHN0YXRlLnVzZXJzLmxlbmd0aCxcbiAgdG90YWxOb3RpZmljYXRpb25zOiBzdGF0ZS5hZG1pbk5vdGlmaWNhdGlvbnMubGVuZ3RoLFxuICB1bnJlYWROb3RpZmljYXRpb25zOiBzdGF0ZS5hZG1pbk5vdGlmaWNhdGlvbnMuZmlsdGVyKG4gPT4gIW4ucmVhZCkubGVuZ3RoLFxuICB0b3RhbEFjdGl2aXR5OiBzdGF0ZS5hY3Rpdml0eUl0ZW1zLmxlbmd0aCxcbn0pKTtcblxuLy8gUmVjZW50IGFjdGl2aXR5IHNlbGVjdG9yXG5leHBvcnQgY29uc3QgdXNlUmVjZW50QWN0aXZpdHkgPSAoKSA9PiB1c2VBZG1pblN0b3JlKChzdGF0ZSkgPT4gXG4gIHN0YXRlLmFjdGl2aXR5SXRlbXMuc2xpY2UoMCwgMTApXG4pO1xuXG4vLyBBZG1pbiBzdG9yZSB1dGlsaXRpZXNcbmV4cG9ydCBjb25zdCBhZG1pblN0b3JlVXRpbHMgPSB7XG4gIGdldEFkbWluU3RhdHM6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZUFkbWluU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxVc2Vyczogc3RhdGUudXNlcnMubGVuZ3RoLFxuICAgICAgdG90YWxOb3RpZmljYXRpb25zOiBzdGF0ZS5hZG1pbk5vdGlmaWNhdGlvbnMubGVuZ3RoLFxuICAgICAgdW5yZWFkTm90aWZpY2F0aW9uczogc3RhdGUuYWRtaW5Ob3RpZmljYXRpb25zLmZpbHRlcihuID0+ICFuLnJlYWQpLmxlbmd0aCxcbiAgICAgIHRvdGFsQWN0aXZpdHk6IHN0YXRlLmFjdGl2aXR5SXRlbXMubGVuZ3RoLFxuICAgIH07XG4gIH0sXG5cbiAgZ2V0RGF0YVN1bW1hcnk6ICgpID0+IHtcbiAgICBjb25zdCBzdGF0ZSA9IHVzZUFkbWluU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlcnM6IHN0YXRlLnVzZXJzLmxlbmd0aCxcbiAgICAgIHRyZW5kaW5nVG9waWNzOiBzdGF0ZS50cmVuZGluZ1RvcGljcy5sZW5ndGgsXG4gICAgICBnZW5lcmF0ZWRQb2xsczogc3RhdGUuZ2VuZXJhdGVkUG9sbHMubGVuZ3RoLFxuICAgICAgYWN0aXZpdHlJdGVtczogc3RhdGUuYWN0aXZpdHlJdGVtcy5sZW5ndGgsXG4gICAgICBub3RpZmljYXRpb25zOiBzdGF0ZS5hZG1pbk5vdGlmaWNhdGlvbnMubGVuZ3RoLFxuICAgIH07XG4gIH0sXG59O1xuXG4vLyBBZG1pbiBzdG9yZSBzdWJzY3JpcHRpb25zXG5leHBvcnQgY29uc3QgYWRtaW5TdG9yZVN1YnNjcmlwdGlvbnMgPSB7XG4gIHN1YnNjcmliZVRvVXNlcnM6IChjYWxsYmFjazogKHVzZXJzOiBBZG1pblVzZXJbXSkgPT4gdm9pZCkgPT4ge1xuICAgIHJldHVybiB1c2VBZG1pblN0b3JlLnN1YnNjcmliZSgoc3RhdGUpID0+IHtcbiAgICAgIGNhbGxiYWNrKHN0YXRlLnVzZXJzKTtcbiAgICB9KTtcbiAgfSxcblxuICBzdWJzY3JpYmVUb0Rhc2hib2FyZFN0YXRzOiAoY2FsbGJhY2s6IChzdGF0czogQWRtaW5TdG9yZVsnZGFzaGJvYXJkU3RhdHMnXSkgPT4gdm9pZCkgPT4ge1xuICAgIHJldHVybiB1c2VBZG1pblN0b3JlLnN1YnNjcmliZSgoc3RhdGUpID0+IHtcbiAgICAgIGNhbGxiYWNrKHN0YXRlLmRhc2hib2FyZFN0YXRzKTtcbiAgICB9KTtcbiAgfSxcblxuICBzdWJzY3JpYmVUb05vdGlmaWNhdGlvbnM6IChjYWxsYmFjazogKG5vdGlmaWNhdGlvbnM6IEFkbWluTm90aWZpY2F0aW9uW10pID0+IHZvaWQpID0+IHtcbiAgICByZXR1cm4gdXNlQWRtaW5TdG9yZS5zdWJzY3JpYmUoKHN0YXRlKSA9PiB7XG4gICAgICBjYWxsYmFjayhzdGF0ZS5hZG1pbk5vdGlmaWNhdGlvbnMpO1xuICAgIH0pO1xuICB9LFxufTtcblxuLy8gQWRtaW4gc3RvcmUgZGVidWcgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgYWRtaW5TdG9yZURlYnVnID0ge1xuICBsb2dTdGF0ZTogKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gdXNlQWRtaW5TdG9yZS5nZXRTdGF0ZSgpO1xuICAgIGxvZ2dlci5pbmZvKCdBZG1pbiBzdG9yZSBzdGF0ZTonLCBzdGF0ZSk7XG4gIH0sXG4gIFxuICBsb2dTdGF0czogKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRzID0gYWRtaW5TdG9yZVV0aWxzLmdldEFkbWluU3RhdHMoKTtcbiAgICBsb2dnZXIuaW5mbygnQWRtaW4gc3RhdGlzdGljczonLCBzdGF0cyk7XG4gIH0sXG4gIFxuICBsb2dEYXRhU3VtbWFyeTogKCkgPT4ge1xuICAgIGNvbnN0IHN1bW1hcnkgPSBhZG1pblN0b3JlVXRpbHMuZ2V0RGF0YVN1bW1hcnkoKTtcbiAgICBsb2dnZXIuaW5mbygnQWRtaW4gZGF0YSBzdW1tYXJ5OicsIHN1bW1hcnkpO1xuICB9LFxuICBcbiAgcmVzZXQ6ICgpID0+IHtcbiAgICB1c2VBZG1pblN0b3JlLmdldFN0YXRlKCkuY2xlYXJBY3Rpdml0eUl0ZW1zKCk7XG4gICAgdXNlQWRtaW5TdG9yZS5nZXRTdGF0ZSgpLmNsZWFyQWRtaW5Ob3RpZmljYXRpb25zKCk7XG4gICAgLy8gQWRtaW4gc3RvcmUgcmVzZXRcbiAgfVxufTsiXSwibmFtZXMiOlsiYWRtaW5TdG9yZURlYnVnIiwiYWRtaW5TdG9yZVN1YnNjcmlwdGlvbnMiLCJhZG1pblN0b3JlVXRpbHMiLCJ1c2VBY3Rpdml0eUZlZWQiLCJ1c2VBY3Rpdml0eUl0ZW1zIiwidXNlQWRtaW5BY3Rpb25zIiwidXNlQWRtaW5BY3RpdmVUYWIiLCJ1c2VBZG1pbkRhc2hib2FyZEFjdGlvbnMiLCJ1c2VBZG1pbkRhc2hib2FyZFN0YXRzIiwidXNlQWRtaW5FcnJvciIsInVzZUFkbWluSXNSZWltcG9ydFJ1bm5pbmciLCJ1c2VBZG1pbklzU2F2aW5nU2V0dGluZ3MiLCJ1c2VBZG1pbkxvYWRpbmciLCJ1c2VBZG1pbk5vdGlmaWNhdGlvbnMiLCJ1c2VBZG1pblJlaW1wb3J0QWN0aW9ucyIsInVzZUFkbWluUmVpbXBvcnRMb2dzIiwidXNlQWRtaW5SZWltcG9ydFByb2dyZXNzIiwidXNlQWRtaW5TZXR0aW5nc1RhYiIsInVzZUFkbWluU3RhdHMiLCJ1c2VBZG1pblN0b3JlIiwidXNlQWRtaW5TeXN0ZW1TZXR0aW5ncyIsInVzZUFkbWluU3lzdGVtU2V0dGluZ3NBY3Rpb25zIiwidXNlQWRtaW5Vc2VyQWN0aW9ucyIsInVzZUFkbWluVXNlckZpbHRlcnMiLCJ1c2VBZG1pblVzZXJzIiwidXNlR2VuZXJhdGVkUG9sbHMiLCJ1c2VSZWNlbnRBY3Rpdml0eSIsInVzZVN5c3RlbU1ldHJpY3MiLCJ1c2VUcmVuZGluZ1RvcGljcyIsImNyZWF0ZSIsImRldnRvb2xzIiwicGVyc2lzdCIsInNldCIsImdldCIsInRyZW5kaW5nVG9waWNzIiwiZ2VuZXJhdGVkUG9sbHMiLCJzeXN0ZW1NZXRyaWNzIiwiYWN0aXZpdHlJdGVtcyIsImFjdGl2aXR5RmVlZCIsInVzZXJzIiwidXNlckZpbHRlcnMiLCJzZWFyY2hUZXJtIiwicm9sZUZpbHRlciIsInN0YXR1c0ZpbHRlciIsInNlbGVjdGVkVXNlcnMiLCJTZXQiLCJzaG93QnVsa0FjdGlvbnMiLCJhY3RpdmVUYWIiLCJkYXNoYm9hcmRTdGF0cyIsInN5c3RlbVNldHRpbmdzIiwic2V0dGluZ3NUYWIiLCJpc1NhdmluZ1NldHRpbmdzIiwicmVpbXBvcnRQcm9ncmVzcyIsInRvdGFsU3RhdGVzIiwicHJvY2Vzc2VkU3RhdGVzIiwic3VjY2Vzc2Z1bFN0YXRlcyIsImZhaWxlZFN0YXRlcyIsInRvdGFsUmVwcmVzZW50YXRpdmVzIiwiZmVkZXJhbFJlcHJlc2VudGF0aXZlcyIsInN0YXRlUmVwcmVzZW50YXRpdmVzIiwiZXJyb3JzIiwic3RhdGVSZXN1bHRzIiwicmVpbXBvcnRMb2dzIiwiaXNSZWltcG9ydFJ1bm5pbmciLCJpc0xvYWRpbmciLCJlcnJvciIsImFkbWluTm90aWZpY2F0aW9ucyIsImxvYWRVc2VycyIsInNldExvYWRpbmciLCJzZXRFcnJvciIsInN1cGFiYXNlIiwidGhlbiIsIm0iLCJnZXRTdXBhYmFzZUNsaWVudCIsIkVycm9yIiwiZGF0YSIsImZyb20iLCJzZWxlY3QiLCJvcmRlciIsImFzY2VuZGluZyIsIm1lc3NhZ2UiLCJhZG1pblVzZXJzIiwibWFwIiwidXNlciIsImlkIiwidXNlcl9pZCIsImVtYWlsIiwibmFtZSIsImRpc3BsYXlfbmFtZSIsInJvbGUiLCJzdGF0dXMiLCJjcmVhdGVkX2F0IiwibGFzdF9sb2dpbiIsImxvZ2dlciIsImluZm8iLCJ1c2VyQ291bnQiLCJsZW5ndGgiLCJlcnJvck1lc3NhZ2UiLCJsb2FkRGFzaGJvYXJkU3RhdHMiLCJjb3VudCIsInRvdGFsVXNlcnMiLCJ1c2Vyc0Vycm9yIiwiaGVhZCIsImFjdGl2ZVBvbGxzIiwicG9sbHNFcnJvciIsImVxIiwidG90YWxWb3RlcyIsInZvdGVzRXJyb3IiLCJyZWNlbnRBY3Rpdml0eSIsImd0ZSIsIkRhdGUiLCJub3ciLCJ0b0lTT1N0cmluZyIsImxpbWl0Iiwic3lzdGVtSGVhbHRoIiwic3RhdHMiLCJsb2FkU3lzdGVtU2V0dGluZ3MiLCJzZXR0aW5nc0RhdGEiLCJzaW5nbGUiLCJjb2RlIiwiZGVmYXVsdFNldHRpbmdzIiwiZ2VuZXJhbCIsInNpdGVOYW1lIiwic2l0ZURlc2NyaXB0aW9uIiwibWFpbnRlbmFuY2VNb2RlIiwiYWxsb3dSZWdpc3RyYXRpb24iLCJyZXF1aXJlRW1haWxWZXJpZmljYXRpb24iLCJwZXJmb3JtYW5jZSIsImVuYWJsZUNhY2hpbmciLCJjYWNoZVRUTCIsImVuYWJsZUNvbXByZXNzaW9uIiwibWF4RmlsZVNpemUiLCJzZWN1cml0eSIsImVuYWJsZVJhdGVMaW1pdGluZyIsIm1heFJlcXVlc3RzUGVyTWludXRlIiwiZW5hYmxlQ1NQIiwiZW5hYmxlSFNUUyIsIm5vdGlmaWNhdGlvbnMiLCJlbmFibGVFbWFpbE5vdGlmaWNhdGlvbnMiLCJlbmFibGVQdXNoTm90aWZpY2F0aW9ucyIsIm5vdGlmaWNhdGlvbkZyZXF1ZW5jeSIsInNldHRpbmdzIiwic2V0VXNlckZpbHRlcnMiLCJmaWx0ZXJzIiwic3RhdGUiLCJzZWxlY3RVc2VyIiwidXNlcklkIiwiZGVzZWxlY3RVc2VyIiwibmV3U2VsZWN0ZWQiLCJkZWxldGUiLCJzZWxlY3RBbGxVc2VycyIsImRlc2VsZWN0QWxsVXNlcnMiLCJ1cGRhdGVVc2VyUm9sZSIsInVwZGF0ZSIsInVwZGF0ZVVzZXJTdGF0dXMiLCJkZWxldGVVc2VyIiwiZmlsdGVyIiwic2V0QWN0aXZlVGFiIiwidGFiIiwic2V0U3lzdGVtU2V0dGluZ3MiLCJ1cGRhdGVTeXN0ZW1TZXR0aW5nIiwic2VjdGlvbiIsImtleSIsInZhbHVlIiwic2V0U2V0dGluZ3NUYWIiLCJzYXZlU3lzdGVtU2V0dGluZ3MiLCJzZXRJc1NhdmluZ1NldHRpbmdzIiwidXBzZXJ0Iiwic2V0UmVpbXBvcnRQcm9ncmVzcyIsInByb2dyZXNzIiwiYWRkUmVpbXBvcnRMb2ciLCJjbGVhclJlaW1wb3J0TG9ncyIsInNldElzUmVpbXBvcnRSdW5uaW5nIiwicnVubmluZyIsInN0YXJ0UmVpbXBvcnQiLCJhZGRBY3Rpdml0eUl0ZW0iLCJpdGVtIiwic2xpY2UiLCJjbGVhckFjdGl2aXR5SXRlbXMiLCJhZGRBZG1pbk5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbiIsImNsZWFyQWRtaW5Ob3RpZmljYXRpb25zIiwibWFya05vdGlmaWNhdGlvbkFzUmVhZCIsInJlYWQiLCJsb2FkaW5nIiwic2V0VXBkYXRpbmciLCJ1cGRhdGluZyIsImNsZWFyRXJyb3IiLCJzYXZpbmciLCJyZWZyZXNoRGF0YSIsIlByb21pc2UiLCJhbGwiLCJzeW5jRGF0YSIsInBhcnRpYWxpemUiLCJ0b3RhbE5vdGlmaWNhdGlvbnMiLCJ1bnJlYWROb3RpZmljYXRpb25zIiwibiIsInRvdGFsQWN0aXZpdHkiLCJnZXRBZG1pblN0YXRzIiwiZ2V0U3RhdGUiLCJnZXREYXRhU3VtbWFyeSIsInN1YnNjcmliZVRvVXNlcnMiLCJjYWxsYmFjayIsInN1YnNjcmliZSIsInN1YnNjcmliZVRvRGFzaGJvYXJkU3RhdHMiLCJzdWJzY3JpYmVUb05vdGlmaWNhdGlvbnMiLCJsb2dTdGF0ZSIsImxvZ1N0YXRzIiwibG9nRGF0YVN1bW1hcnkiLCJzdW1tYXJ5IiwicmVzZXQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztDQVFDOzs7Ozs7Ozs7OztRQWd5QllBO2VBQUFBOztRQXJCQUM7ZUFBQUE7O1FBeEJBQztlQUFBQTs7UUFuRkFDO2VBQUFBOztRQURBQztlQUFBQTs7UUFxREFDO2VBQUFBOztRQWhDQUM7ZUFBQUE7O1FBRUFDO2VBQUFBOztRQURBQztlQUFBQTs7UUFsQkFDO2VBQUFBOztRQXVDQUM7ZUFBQUE7O1FBWkFDO2VBQUFBOztRQTVCQUM7ZUFBQUE7O1FBREFDO2VBQUFBOztRQTBDQUM7ZUFBQUE7O1FBRkFDO2VBQUFBOztRQURBQztlQUFBQTs7UUFYQUM7ZUFBQUE7O1FBeUNBQztlQUFBQTs7UUE5a0JBQztlQUFBQTs7UUFvaUJBQztlQUFBQTs7UUFHQUM7ZUFBQUE7O1FBdkJBQztlQUFBQTs7UUFEQUM7ZUFBQUE7O1FBREFDO2VBQUFBOztRQVRBQztlQUFBQTs7UUFpRkFDO2VBQUFBOztRQWhGQUM7ZUFBQUE7O1FBRkFDO2VBQUFBOzs7eUJBMXBCVTs0QkFDRTt3QkFXRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMEloQixNQUFNVCxnQkFBZ0JVLElBQUFBLGVBQU0sSUFDakNDLElBQUFBLG9CQUFRLEVBQ05DLElBQUFBLG1CQUFPLEVBQ0wsQ0FBQ0MsS0FBS0MsTUFBUyxDQUFBO1FBQ2IsZ0JBQWdCO1FBQ2hCQyxnQkFBZ0IsRUFBRTtRQUNsQkMsZ0JBQWdCLEVBQUU7UUFDbEJDLGVBQWU7UUFDZkMsZUFBZSxFQUFFO1FBQ2pCQyxjQUFjLEVBQUU7UUFDaEJDLE9BQU8sRUFBRTtRQUNUQyxhQUFhO1lBQ1hDLFlBQVk7WUFDWkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLGVBQWUsSUFBSUM7WUFDbkJDLGlCQUFpQjtRQUNuQjtRQUNBQyxXQUFXO1FBQ1hDLGdCQUFnQjtRQUNoQkMsZ0JBQWdCO1FBQ2hCQyxhQUFhO1FBQ2JDLGtCQUFrQjtRQUNsQkMsa0JBQWtCO1lBQ2hCQyxhQUFhO1lBQ2JDLGlCQUFpQjtZQUNqQkMsa0JBQWtCO1lBQ2xCQyxjQUFjO1lBQ2RDLHNCQUFzQjtZQUN0QkMsd0JBQXdCO1lBQ3hCQyxzQkFBc0I7WUFDdEJDLFFBQVEsRUFBRTtZQUNWQyxjQUFjLEVBQUU7UUFDbEI7UUFDQUMsY0FBYyxFQUFFO1FBQ2hCQyxtQkFBbUI7UUFDbkJDLFdBQVc7UUFDWEMsT0FBTztRQUNQQyxvQkFBb0IsRUFBRTtRQUV0Qix1QkFBdUI7UUFDdkJDLFdBQVc7WUFDVCxNQUFNLEVBQUVDLFVBQVUsRUFBRUMsUUFBUSxFQUFFLEdBQUdwQztZQUVqQyxJQUFJO2dCQUNGbUMsV0FBVztnQkFDWEMsU0FBUztnQkFFVCxxQ0FBcUM7Z0JBQ3JDLE1BQU1DLFdBQVcsTUFBTSxtRUFBQSxRQUFPLGlDQUEyQkMsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxpQkFBaUI7Z0JBQ3RGLElBQUksQ0FBQ0gsVUFBVTtvQkFDYixNQUFNLElBQUlJLE1BQU07Z0JBQ2xCO2dCQUVBLE1BQU0sRUFBRUMsTUFBTXBDLEtBQUssRUFBRTBCLEtBQUssRUFBRSxHQUFHLE1BQU1LLFNBQ2xDTSxJQUFJLENBQUMsaUJBQ0xDLE1BQU0sQ0FBQyxDQUFDOzs7Ozs7OztjQVFULENBQUMsRUFDQUMsS0FBSyxDQUFDLGNBQWM7b0JBQUVDLFdBQVc7Z0JBQU07Z0JBRTFDLElBQUlkLE9BQU87b0JBQ1QsTUFBTSxJQUFJUyxNQUFNLENBQUMsdUJBQXVCLEVBQUVULE1BQU1lLE9BQU8sRUFBRTtnQkFDM0Q7Z0JBRUEsOENBQThDO2dCQUM5QyxNQUFNQyxhQUEwQjFDLE9BQU8yQyxJQUFJQyxDQUFBQSxPQUFTLENBQUE7d0JBQ2xEQyxJQUFJRCxLQUFLRSxPQUFPO3dCQUNoQkMsT0FBT0gsS0FBS0csS0FBSzt3QkFDakJDLE1BQU1KLEtBQUtLLFlBQVksSUFBSTt3QkFDM0JDLE1BQU0sQUFBQ04sS0FBS00sSUFBSSxJQUF1Qzt3QkFDdkRDLFFBQVEsQUFBQ1AsS0FBS08sTUFBTSxJQUE0Qzt3QkFDaEVDLFlBQVlSLEtBQUtRLFVBQVU7d0JBQzNCQyxZQUFZVCxLQUFLUyxVQUFVO29CQUM3QixDQUFBLE1BQU8sRUFBRTtnQkFFVDVELElBQUk7b0JBQUVPLE9BQU8wQztnQkFBVztnQkFFeEJZLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLDZCQUE2QjtvQkFDdkNDLFdBQVdkLFdBQVdlLE1BQU07Z0JBQzlCO1lBQ0YsRUFBRSxPQUFPL0IsT0FBTztnQkFDZCxNQUFNZ0MsZUFBZWhDLGlCQUFpQlMsUUFBUVQsTUFBTWUsT0FBTyxHQUFHO2dCQUM5RFgsU0FBUzRCO2dCQUNUSixjQUFNLENBQUM1QixLQUFLLENBQUMseUJBQXlCQSxpQkFBaUJTLFFBQVFULFFBQVEsSUFBSVMsTUFBTXVCO1lBQ25GLFNBQVU7Z0JBQ1I3QixXQUFXO1lBQ2I7UUFDRjtRQUVBOEIsb0JBQW9CO1lBQ2xCLE1BQU0sRUFBRTlCLFVBQVUsRUFBRUMsUUFBUSxFQUFFLEdBQUdwQztZQUVqQyxJQUFJO2dCQUNGbUMsV0FBVztnQkFDWEMsU0FBUztnQkFFVCwrQ0FBK0M7Z0JBQy9DLE1BQU1DLFdBQVcsTUFBTSxtRUFBQSxRQUFPLGlDQUEyQkMsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxpQkFBaUI7Z0JBQ3RGLElBQUksQ0FBQ0gsVUFBVTtvQkFDYixNQUFNLElBQUlJLE1BQU07Z0JBQ2xCO2dCQUVBLHdCQUF3QjtnQkFDeEIsTUFBTSxFQUFFeUIsT0FBT0MsVUFBVSxFQUFFbkMsT0FBT29DLFVBQVUsRUFBRSxHQUFHLE1BQU0vQixTQUNwRE0sSUFBSSxDQUFDLGlCQUNMQyxNQUFNLENBQUMsS0FBSztvQkFBRXNCLE9BQU87b0JBQVNHLE1BQU07Z0JBQUs7Z0JBRTVDLElBQUlELFlBQVk7b0JBQ2QsTUFBTSxJQUFJM0IsTUFBTSxDQUFDLDRCQUE0QixFQUFFMkIsV0FBV3JCLE9BQU8sRUFBRTtnQkFDckU7Z0JBRUEseUJBQXlCO2dCQUN6QixNQUFNLEVBQUVtQixPQUFPSSxXQUFXLEVBQUV0QyxPQUFPdUMsVUFBVSxFQUFFLEdBQUcsTUFBTWxDLFNBQ3JETSxJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLEtBQUs7b0JBQUVzQixPQUFPO29CQUFTRyxNQUFNO2dCQUFLLEdBQ3pDRyxFQUFFLENBQUMsVUFBVTtnQkFFaEIsSUFBSUQsWUFBWTtvQkFDZCxNQUFNLElBQUk5QixNQUFNLENBQUMsNkJBQTZCLEVBQUU4QixXQUFXeEIsT0FBTyxFQUFFO2dCQUN0RTtnQkFFQSx3QkFBd0I7Z0JBQ3hCLE1BQU0sRUFBRW1CLE9BQU9PLFVBQVUsRUFBRXpDLE9BQU8wQyxVQUFVLEVBQUUsR0FBRyxNQUFNckMsU0FDcERNLElBQUksQ0FBQyxTQUNMQyxNQUFNLENBQUMsS0FBSztvQkFBRXNCLE9BQU87b0JBQVNHLE1BQU07Z0JBQUs7Z0JBRTVDLElBQUlLLFlBQVk7b0JBQ2QsTUFBTSxJQUFJakMsTUFBTSxDQUFDLDZCQUE2QixFQUFFaUMsV0FBVzNCLE9BQU8sRUFBRTtnQkFDdEU7Z0JBRUEsbURBQW1EO2dCQUNuRCxNQUFNLEVBQUVMLE1BQU1pQyxjQUFjLEVBQUUsR0FBRyxNQUFNdEMsU0FDcENNLElBQUksQ0FBQyxvQkFDTEMsTUFBTSxDQUFDLGNBQ1BnQyxHQUFHLENBQUMsY0FBYyxJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLEtBQUssS0FBSyxLQUFLLEtBQUssTUFBTUMsV0FBVyxJQUN4RUMsS0FBSyxDQUFDO2dCQUVULE1BQU1DLGVBQWVOLGtCQUFrQkEsZUFBZVosTUFBTSxHQUFHLElBQUksWUFBWTtnQkFFL0UsTUFBTW1CLFFBQVE7b0JBQ1pmLFlBQVlBLGNBQWM7b0JBQzFCRyxhQUFhQSxlQUFlO29CQUM1QkcsWUFBWUEsY0FBYztvQkFDMUJRLGNBQWNBO2dCQUNoQjtnQkFFQWxGLElBQUk7b0JBQUVnQixnQkFBZ0JtRTtnQkFBTTtnQkFFNUJ0QixjQUFNLENBQUNDLElBQUksQ0FBQyx1Q0FBdUM7b0JBQ2pETSxZQUFZZSxNQUFNZixVQUFVO29CQUM1QkcsYUFBYVksTUFBTVosV0FBVztvQkFDOUJHLFlBQVlTLE1BQU1ULFVBQVU7b0JBQzVCUSxjQUFjQyxNQUFNRCxZQUFZO2dCQUNsQztZQUNGLEVBQUUsT0FBT2pELE9BQU87Z0JBQ2QsTUFBTWdDLGVBQWVoQyxpQkFBaUJTLFFBQVFULE1BQU1lLE9BQU8sR0FBRztnQkFDOURYLFNBQVM0QjtnQkFDVEosY0FBTSxDQUFDNUIsS0FBSyxDQUFDLG1DQUFtQ0EsaUJBQWlCUyxRQUFRVCxRQUFRLElBQUlTLE1BQU11QjtZQUM3RixTQUFVO2dCQUNSN0IsV0FBVztZQUNiO1FBQ0Y7UUFFQWdELG9CQUFvQjtZQUNsQixNQUFNLEVBQUVoRCxVQUFVLEVBQUVDLFFBQVEsRUFBRSxHQUFHcEM7WUFFakMsSUFBSTtnQkFDRm1DLFdBQVc7Z0JBQ1hDLFNBQVM7Z0JBRVQsc0NBQXNDO2dCQUN0QyxNQUFNQyxXQUFXLE1BQU0sbUVBQUEsUUFBTyxpQ0FBMkJDLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsaUJBQWlCO2dCQUN0RixJQUFJLENBQUNILFVBQVU7b0JBQ2IsTUFBTSxJQUFJSSxNQUFNO2dCQUNsQjtnQkFFQSxNQUFNLEVBQUVDLE1BQU0wQyxZQUFZLEVBQUVwRCxLQUFLLEVBQUUsR0FBRyxNQUFNSyxTQUN6Q00sSUFBSSxDQUFDLG1CQUNMQyxNQUFNLENBQUMsS0FDUHlDLE1BQU07Z0JBRVQsSUFBSXJELFNBQVNBLE1BQU1zRCxJQUFJLEtBQUssWUFBWTtvQkFDdEMsTUFBTSxJQUFJN0MsTUFBTSxDQUFDLGlDQUFpQyxFQUFFVCxNQUFNZSxPQUFPLEVBQUU7Z0JBQ3JFO2dCQUVBLGlEQUFpRDtnQkFDakQsTUFBTXdDLGtCQUFrQjtvQkFDdEJDLFNBQVM7d0JBQ1BDLFVBQVU7d0JBQ1ZDLGlCQUFpQjt3QkFDakJDLGlCQUFpQjt3QkFDakJDLG1CQUFtQjt3QkFDbkJDLDBCQUEwQjtvQkFDNUI7b0JBQ0FDLGFBQWE7d0JBQ1hDLGVBQWU7d0JBQ2ZDLFVBQVU7d0JBQ1ZDLG1CQUFtQjt3QkFDbkJDLGFBQWE7b0JBQ2Y7b0JBQ0FDLFVBQVU7d0JBQ1JDLG9CQUFvQjt3QkFDcEJDLHNCQUFzQjt3QkFDdEJDLFdBQVc7d0JBQ1hDLFlBQVk7b0JBQ2Q7b0JBQ0FDLGVBQWU7d0JBQ2JDLDBCQUEwQjt3QkFDMUJDLHlCQUF5Qjt3QkFDekJDLHVCQUF1QjtvQkFDekI7Z0JBQ0Y7Z0JBRUEsTUFBTUMsV0FBV3hCLGNBQWN3QixZQUFZckI7Z0JBQzNDeEYsSUFBSTtvQkFBRWlCLGdCQUFnQjRGO2dCQUFTO2dCQUUvQmhELGNBQU0sQ0FBQ0MsSUFBSSxDQUFDO1lBQ2QsRUFBRSxPQUFPN0IsT0FBTztnQkFDZCxNQUFNZ0MsZUFBZWhDLGlCQUFpQlMsUUFBUVQsTUFBTWUsT0FBTyxHQUFHO2dCQUM5RFgsU0FBUzRCO2dCQUNUSixjQUFNLENBQUM1QixLQUFLLENBQUMsbUNBQW1DQSxpQkFBaUJTLFFBQVFULFFBQVEsSUFBSVMsTUFBTXVCO1lBQzdGLFNBQVU7Z0JBQ1I3QixXQUFXO1lBQ2I7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQjBFLGdCQUFnQixDQUFDQyxVQUFZL0csSUFBSSxDQUFDZ0gsUUFBVyxDQUFBO29CQUMzQ3hHLGFBQWE7d0JBQUUsR0FBR3dHLE1BQU14RyxXQUFXO3dCQUFFLEdBQUd1RyxPQUFPO29CQUFDO2dCQUNsRCxDQUFBO1FBRUFFLFlBQVksQ0FBQ0MsU0FBV2xILElBQUksQ0FBQ2dILFFBQVcsQ0FBQTtvQkFDdEN4RyxhQUFhO3dCQUNYLEdBQUd3RyxNQUFNeEcsV0FBVzt3QkFDcEJJLGVBQWUsSUFBSUMsSUFBSTsrQkFBSW1HLE1BQU14RyxXQUFXLENBQUNJLGFBQWE7NEJBQUVzRzt5QkFBTztvQkFDckU7Z0JBQ0YsQ0FBQTtRQUVBQyxjQUFjLENBQUNELFNBQVdsSCxJQUFJLENBQUNnSDtnQkFDN0IsTUFBTUksY0FBYyxJQUFJdkcsSUFBSW1HLE1BQU14RyxXQUFXLENBQUNJLGFBQWE7Z0JBQzNEd0csWUFBWUMsTUFBTSxDQUFDSDtnQkFDbkIsT0FBTztvQkFDTDFHLGFBQWE7d0JBQ1gsR0FBR3dHLE1BQU14RyxXQUFXO3dCQUNwQkksZUFBZXdHO29CQUNqQjtnQkFDRjtZQUNGO1FBRUFFLGdCQUFnQixJQUFNdEgsSUFBSSxDQUFDZ0gsUUFBVyxDQUFBO29CQUNwQ3hHLGFBQWE7d0JBQ1gsR0FBR3dHLE1BQU14RyxXQUFXO3dCQUNwQkksZUFBZSxJQUFJQyxJQUFJbUcsTUFBTXpHLEtBQUssQ0FBQzJDLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBS0MsRUFBRTtvQkFDeEQ7Z0JBQ0YsQ0FBQTtRQUVBbUUsa0JBQWtCLElBQU12SCxJQUFJLENBQUNnSCxRQUFXLENBQUE7b0JBQ3RDeEcsYUFBYTt3QkFDWCxHQUFHd0csTUFBTXhHLFdBQVc7d0JBQ3BCSSxlQUFlLElBQUlDO29CQUNyQjtnQkFDRixDQUFBO1FBRUEyRyxnQkFBZ0IsT0FBT04sUUFBUXpEO1lBQzdCLElBQUk7Z0JBQ0YsTUFBTW5CLFdBQVcsTUFBTSxtRUFBQSxRQUFPLGlDQUEyQkMsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxpQkFBaUI7Z0JBQ3RGLElBQUksQ0FBQ0gsVUFBVTtvQkFDYixNQUFNLElBQUlJLE1BQU07Z0JBQ2xCO2dCQUVBLE1BQU0sRUFBRVQsS0FBSyxFQUFFLEdBQUcsTUFBTUssU0FDckJNLElBQUksQ0FBQyxpQkFDTDZFLE1BQU0sQ0FBQztvQkFBRWhFO2dCQUFLLEdBQ2RnQixFQUFFLENBQUMsV0FBV3lDO2dCQUVqQixJQUFJakYsT0FBTztvQkFDVCxNQUFNLElBQUlTLE1BQU0sQ0FBQyw0QkFBNEIsRUFBRVQsTUFBTWUsT0FBTyxFQUFFO2dCQUNoRTtnQkFFQSxxQkFBcUI7Z0JBQ3JCaEQsSUFBSSxDQUFDZ0gsUUFBVyxDQUFBO3dCQUNkekcsT0FBT3lHLE1BQU16RyxLQUFLLENBQUMyQyxHQUFHLENBQUNDLENBQUFBLE9BQ3JCQSxLQUFLQyxFQUFFLEtBQUs4RCxTQUFTO2dDQUFFLEdBQUcvRCxJQUFJO2dDQUFFTSxNQUFNQTs0QkFBdUMsSUFBSU47b0JBRXJGLENBQUE7Z0JBRUFVLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLGtDQUFrQztvQkFBRW9EO29CQUFRekQ7Z0JBQUs7WUFDL0QsRUFBRSxPQUFPeEIsT0FBTztnQkFDZCxNQUFNZ0MsZUFBZWhDLGlCQUFpQlMsUUFBUVQsTUFBTWUsT0FBTyxHQUFHO2dCQUM5RGhELElBQUk7b0JBQUVpQyxPQUFPZ0M7Z0JBQWE7Z0JBQzFCSixjQUFNLENBQUM1QixLQUFLLENBQUMsK0JBQStCQSxpQkFBaUJTLFFBQVFULFFBQVEsSUFBSVMsTUFBTXVCO1lBQ3pGO1FBQ0Y7UUFFQXlELGtCQUFrQixPQUFPUixRQUFReEQ7WUFDL0IsSUFBSTtnQkFDRixNQUFNcEIsV0FBVyxNQUFNLG1FQUFBLFFBQU8saUNBQTJCQyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLGlCQUFpQjtnQkFDdEYsSUFBSSxDQUFDSCxVQUFVO29CQUNiLE1BQU0sSUFBSUksTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTSxFQUFFVCxLQUFLLEVBQUUsR0FBRyxNQUFNSyxTQUNyQk0sSUFBSSxDQUFDLGlCQUNMNkUsTUFBTSxDQUFDO29CQUFFL0Q7Z0JBQU8sR0FDaEJlLEVBQUUsQ0FBQyxXQUFXeUM7Z0JBRWpCLElBQUlqRixPQUFPO29CQUNULE1BQU0sSUFBSVMsTUFBTSxDQUFDLDhCQUE4QixFQUFFVCxNQUFNZSxPQUFPLEVBQUU7Z0JBQ2xFO2dCQUVBLHFCQUFxQjtnQkFDckJoRCxJQUFJLENBQUNnSCxRQUFXLENBQUE7d0JBQ2R6RyxPQUFPeUcsTUFBTXpHLEtBQUssQ0FBQzJDLEdBQUcsQ0FBQ0MsQ0FBQUEsT0FDckJBLEtBQUtDLEVBQUUsS0FBSzhELFNBQVM7Z0NBQUUsR0FBRy9ELElBQUk7Z0NBQUVPLFFBQVFBOzRCQUE4QyxJQUFJUDtvQkFFOUYsQ0FBQTtnQkFFQVUsY0FBTSxDQUFDQyxJQUFJLENBQUMsb0NBQW9DO29CQUFFb0Q7b0JBQVF4RDtnQkFBTztZQUNuRSxFQUFFLE9BQU96QixPQUFPO2dCQUNkLE1BQU1nQyxlQUFlaEMsaUJBQWlCUyxRQUFRVCxNQUFNZSxPQUFPLEdBQUc7Z0JBQzlEaEQsSUFBSTtvQkFBRWlDLE9BQU9nQztnQkFBYTtnQkFDMUJKLGNBQU0sQ0FBQzVCLEtBQUssQ0FBQyxpQ0FBaUNBLGlCQUFpQlMsUUFBUVQsUUFBUSxJQUFJUyxNQUFNdUI7WUFDM0Y7UUFDRjtRQUVBMEQsWUFBWSxPQUFPVDtZQUNqQixJQUFJO2dCQUNGLE1BQU01RSxXQUFXLE1BQU0sbUVBQUEsUUFBTyxpQ0FBMkJDLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsaUJBQWlCO2dCQUN0RixJQUFJLENBQUNILFVBQVU7b0JBQ2IsTUFBTSxJQUFJSSxNQUFNO2dCQUNsQjtnQkFFQSxNQUFNLEVBQUVULEtBQUssRUFBRSxHQUFHLE1BQU1LLFNBQ3JCTSxJQUFJLENBQUMsaUJBQ0x5RSxNQUFNLEdBQ041QyxFQUFFLENBQUMsV0FBV3lDO2dCQUVqQixJQUFJakYsT0FBTztvQkFDVCxNQUFNLElBQUlTLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRVQsTUFBTWUsT0FBTyxFQUFFO2dCQUMzRDtnQkFFQSxxQkFBcUI7Z0JBQ3JCaEQsSUFBSSxDQUFDZ0gsUUFBVyxDQUFBO3dCQUNkekcsT0FBT3lHLE1BQU16RyxLQUFLLENBQUNxSCxNQUFNLENBQUN6RSxDQUFBQSxPQUFRQSxLQUFLQyxFQUFFLEtBQUs4RDtvQkFDaEQsQ0FBQTtnQkFFQXJELGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLDZCQUE2QjtvQkFBRW9EO2dCQUFPO1lBQ3BELEVBQUUsT0FBT2pGLE9BQU87Z0JBQ2QsTUFBTWdDLGVBQWVoQyxpQkFBaUJTLFFBQVFULE1BQU1lLE9BQU8sR0FBRztnQkFDOURoRCxJQUFJO29CQUFFaUMsT0FBT2dDO2dCQUFhO2dCQUMxQkosY0FBTSxDQUFDNUIsS0FBSyxDQUFDLDBCQUEwQkEsaUJBQWlCUyxRQUFRVCxRQUFRLElBQUlTLE1BQU11QjtZQUNwRjtRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCNEQsY0FBYyxDQUFDQyxNQUFROUgsSUFBSTtnQkFBRWUsV0FBVytHO1lBQUk7UUFFNUMsMEJBQTBCO1FBQzFCQyxtQkFBbUIsQ0FBQ2xCLFdBQWE3RyxJQUFJO2dCQUFFaUIsZ0JBQWdCNEY7WUFBUztRQUVoRW1CLHFCQUFxQixDQUFDQyxTQUFTQyxLQUFLQyxRQUFVbkksSUFBSSxDQUFDZ0g7Z0JBQ2pELElBQUksQ0FBQ0EsTUFBTS9GLGNBQWMsRUFBRSxPQUFPK0Y7Z0JBRWxDLE9BQU87b0JBQ0wvRixnQkFBZ0I7d0JBQ2QsR0FBRytGLE1BQU0vRixjQUFjO3dCQUN2QixDQUFDZ0gsUUFBUSxFQUFFOzRCQUNULEdBQUdqQixNQUFNL0YsY0FBYyxDQUFDZ0gsUUFBUTs0QkFDaEMsQ0FBQ0MsSUFBSSxFQUFFQzt3QkFDVDtvQkFDRjtnQkFDRjtZQUNGO1FBRUFDLGdCQUFnQixDQUFDTixNQUFROUgsSUFBSTtnQkFBRWtCLGFBQWE0RztZQUFJO1FBRWhETyxvQkFBb0I7WUFDbEIsTUFBTSxFQUFFQyxtQkFBbUIsRUFBRWpHLFFBQVEsRUFBRSxHQUFHcEM7WUFFMUMsSUFBSTtnQkFDRnFJLG9CQUFvQjtnQkFDcEJqRyxTQUFTO2dCQUVULE1BQU0sRUFBRXBCLGNBQWMsRUFBRSxHQUFHaEI7Z0JBQzNCLElBQUksQ0FBQ2dCLGdCQUFnQjtvQkFDbkIsTUFBTSxJQUFJeUIsTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTUosV0FBVyxNQUFNLG1FQUFBLFFBQU8saUNBQTJCQyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLGlCQUFpQjtnQkFDdEYsSUFBSSxDQUFDSCxVQUFVO29CQUNiLE1BQU0sSUFBSUksTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTSxFQUFFVCxLQUFLLEVBQUUsR0FBRyxNQUFNSyxTQUNyQk0sSUFBSSxDQUFDLG1CQUNMMkYsTUFBTSxDQUFDO29CQUFFMUIsVUFBVTVGO2dCQUFlO2dCQUVyQyxJQUFJZ0IsT0FBTztvQkFDVCxNQUFNLElBQUlTLE1BQU0sQ0FBQyxnQ0FBZ0MsRUFBRVQsTUFBTWUsT0FBTyxFQUFFO2dCQUNwRTtnQkFFQWEsY0FBTSxDQUFDQyxJQUFJLENBQUM7WUFDZCxFQUFFLE9BQU83QixPQUFPO2dCQUNkLE1BQU1nQyxlQUFlaEMsaUJBQWlCUyxRQUFRVCxNQUFNZSxPQUFPLEdBQUc7Z0JBQzlEWCxTQUFTNEI7Z0JBQ1RKLGNBQU0sQ0FBQzVCLEtBQUssQ0FBQyxtQ0FBbUNBLGlCQUFpQlMsUUFBUVQsUUFBUSxJQUFJUyxNQUFNdUI7WUFDN0YsU0FBVTtnQkFDUnFFLG9CQUFvQjtZQUN0QjtRQUNGO1FBRUEsbUJBQW1CO1FBQ25CRSxxQkFBcUIsQ0FBQ0MsV0FBYXpJLElBQUksQ0FBQ2dILFFBQVcsQ0FBQTtvQkFDakQ1RixrQkFBa0I7d0JBQUUsR0FBRzRGLE1BQU01RixnQkFBZ0I7d0JBQUUsR0FBR3FILFFBQVE7b0JBQUM7Z0JBQzdELENBQUE7UUFFQUMsZ0JBQWdCLENBQUMxRixVQUFZaEQsSUFBSSxDQUFDZ0gsUUFBVyxDQUFBO29CQUMzQ2xGLGNBQWM7MkJBQUlrRixNQUFNbEYsWUFBWTt3QkFBRWtCO3FCQUFRO2dCQUNoRCxDQUFBO1FBRUEyRixtQkFBbUIsSUFBTTNJLElBQUk7Z0JBQUU4QixjQUFjLEVBQUU7WUFBQztRQUVoRDhHLHNCQUFzQixDQUFDQyxVQUFZN0ksSUFBSTtnQkFBRStCLG1CQUFtQjhHO1lBQVE7UUFFcEVDLGVBQWU7WUFDYixNQUFNLEVBQUVGLG9CQUFvQixFQUFFRixjQUFjLEVBQUVGLG1CQUFtQixFQUFFLEdBQUd2STtZQUV0RSxJQUFJO2dCQUNGMkkscUJBQXFCO2dCQUNyQkYsZUFBZTtnQkFFZixpQkFBaUI7Z0JBQ2pCRixvQkFBb0I7b0JBQ2xCbkgsYUFBYTtvQkFDYkMsaUJBQWlCO29CQUNqQkMsa0JBQWtCO29CQUNsQkMsY0FBYztvQkFDZEMsc0JBQXNCO29CQUN0QkMsd0JBQXdCO29CQUN4QkMsc0JBQXNCO29CQUN0QkMsUUFBUSxFQUFFO29CQUNWQyxjQUFjLEVBQUU7Z0JBQ2xCO2dCQUVBLCtCQUErQjtnQkFDL0I2RyxlQUFlO1lBQ2pCLEVBQUUsT0FBT3pHLE9BQU87Z0JBQ2R5RyxlQUFlLENBQUMsaUJBQWlCLEVBQUV6RyxpQkFBaUJTLFFBQVFULE1BQU1lLE9BQU8sR0FBRyxpQkFBaUI7WUFDL0YsU0FBVTtnQkFDUjRGLHFCQUFxQjtZQUN2QjtRQUNGO1FBRUEsNkJBQTZCO1FBQzdCRyxpQkFBaUIsQ0FBQ0MsT0FBU2hKLElBQUksQ0FBQ2dILFFBQVcsQ0FBQTtvQkFDekMzRyxlQUFlO3dCQUFDMkk7MkJBQVNoQyxNQUFNM0csYUFBYSxDQUFDNEksS0FBSyxDQUFDLEdBQUc7cUJBQUksQ0FBQyxzQkFBc0I7Z0JBQ25GLENBQUE7UUFFQUMsb0JBQW9CLElBQU1sSixJQUFJO2dCQUFFSyxlQUFlLEVBQUU7WUFBQztRQUVsRDhJLHNCQUFzQixDQUFDQyxlQUFpQnBKLElBQUksQ0FBQ2dILFFBQVcsQ0FBQTtvQkFDdEQ5RSxvQkFBb0I7d0JBQUNrSDsyQkFBaUJwQyxNQUFNOUUsa0JBQWtCO3FCQUFDO2dCQUNqRSxDQUFBO1FBRUFtSCx5QkFBeUIsSUFBTXJKLElBQUk7Z0JBQUVrQyxvQkFBb0IsRUFBRTtZQUFDO1FBRTVEb0gsd0JBQXdCLENBQUNsRyxLQUFPcEQsSUFBSSxDQUFDZ0gsUUFBVyxDQUFBO29CQUM5QzlFLG9CQUFvQjhFLE1BQU05RSxrQkFBa0IsQ0FBQ2dCLEdBQUcsQ0FBQ2tHLENBQUFBLGVBQy9DQSxhQUFhaEcsRUFBRSxLQUFLQSxLQUFLOzRCQUFFLEdBQUdnRyxZQUFZOzRCQUFFRyxNQUFNO3dCQUFLLElBQUlIO2dCQUUvRCxDQUFBO1FBRUEsa0JBQWtCO1FBQ2xCaEgsWUFBWSxDQUFDb0gsVUFBWXhKLElBQUk7Z0JBQUVnQyxXQUFXd0g7WUFBUTtRQUNsREMsYUFBYSxDQUFDQyxXQUFhMUosSUFBSTtnQkFBRW1CLGtCQUFrQnVJO1lBQVM7UUFDNURySCxVQUFVLENBQUNKLFFBQVVqQyxJQUFJO2dCQUFFaUM7WUFBTTtRQUNqQzBILFlBQVksSUFBTTNKLElBQUk7Z0JBQUVpQyxPQUFPO1lBQUs7UUFDcENxRyxxQkFBcUIsQ0FBQ3NCLFNBQVc1SixJQUFJO2dCQUFFbUIsa0JBQWtCeUk7WUFBTztRQUVoRUMsYUFBYTtZQUNYLE1BQU0sRUFBRTFILFNBQVMsRUFBRStCLGtCQUFrQixFQUFFa0Isa0JBQWtCLEVBQUUsR0FBR25GO1lBQzlELE1BQU02SixRQUFRQyxHQUFHLENBQUM7Z0JBQ2hCNUg7Z0JBQ0ErQjtnQkFDQWtCO2FBQ0Q7UUFDSDtRQUVBNEUsVUFBVTtZQUNSLE1BQU0sRUFBRUgsV0FBVyxFQUFFLEdBQUc1SjtZQUN4QixNQUFNNEo7UUFDUjtJQUNGLENBQUEsR0FDQTtJQUNFdEcsTUFBTTtJQUNOMEcsWUFBWSxDQUFDakQsUUFBVyxDQUFBO1lBQ3RCakcsV0FBV2lHLE1BQU1qRyxTQUFTO1lBQzFCRyxhQUFhOEYsTUFBTTlGLFdBQVc7WUFDOUJWLGFBQWF3RyxNQUFNeEcsV0FBVztRQUNoQyxDQUFBO0FBQ0YsSUFFRjtJQUNFK0MsTUFBTTtBQUNSO0FBS0csTUFBTTNELG9CQUFvQixJQUFNVCxjQUFjLENBQUM2SCxRQUFVQSxNQUFNOUcsY0FBYztBQUM3RSxNQUFNVCxvQkFBb0IsSUFBTU4sY0FBYyxDQUFDNkgsUUFBVUEsTUFBTTdHLGNBQWM7QUFDN0UsTUFBTVIsbUJBQW1CLElBQU1SLGNBQWMsQ0FBQzZILFFBQVVBLE1BQU01RyxhQUFhO0FBQzNFLE1BQU1oQyxtQkFBbUIsSUFBTWUsY0FBYyxDQUFDNkgsUUFBVUEsTUFBTTNHLGFBQWE7QUFDM0UsTUFBTWxDLGtCQUFrQixJQUFNZ0IsY0FBYyxDQUFDNkgsUUFBVUEsTUFBTTFHLFlBQVk7QUFDekUsTUFBTXpCLHdCQUF3QixJQUFNTSxjQUFjLENBQUM2SCxRQUFVQSxNQUFNOUUsa0JBQWtCO0FBQ3JGLE1BQU10RCxrQkFBa0IsSUFBTU8sY0FBYyxDQUFDNkgsUUFBVUEsTUFBTWhGLFNBQVM7QUFDdEUsTUFBTXZELGdCQUFnQixJQUFNVSxjQUFjLENBQUM2SCxRQUFVQSxNQUFNL0UsS0FBSztBQUdoRSxNQUFNekMsZ0JBQWdCLElBQU1MLGNBQWMsQ0FBQzZILFFBQVVBLE1BQU16RyxLQUFLO0FBQ2hFLE1BQU1oQixzQkFBc0IsSUFBTUosY0FBYyxDQUFDNkgsUUFBVUEsTUFBTXhHLFdBQVc7QUFDNUUsTUFBTWxCLHNCQUFzQixJQUFNSCxjQUFjLENBQUM2SCxRQUFXLENBQUE7WUFDakVGLGdCQUFnQkUsTUFBTUYsY0FBYztZQUNwQ0csWUFBWUQsTUFBTUMsVUFBVTtZQUM1QkUsY0FBY0gsTUFBTUcsWUFBWTtZQUNoQ0csZ0JBQWdCTixNQUFNTSxjQUFjO1lBQ3BDQyxrQkFBa0JQLE1BQU1PLGdCQUFnQjtZQUN4Q0MsZ0JBQWdCUixNQUFNUSxjQUFjO1lBQ3BDRSxrQkFBa0JWLE1BQU1VLGdCQUFnQjtZQUN4Q0MsWUFBWVgsTUFBTVcsVUFBVTtRQUM5QixDQUFBO0FBR08sTUFBTXJKLG9CQUFvQixJQUFNYSxjQUFjLENBQUM2SCxRQUFVQSxNQUFNakcsU0FBUztBQUN4RSxNQUFNdkMseUJBQXlCLElBQU1XLGNBQWMsQ0FBQzZILFFBQVVBLE1BQU1oRyxjQUFjO0FBQ2xGLE1BQU16QywyQkFBMkIsSUFBTVksY0FBYyxDQUFDNkgsUUFBVyxDQUFBO1lBQ3RFYSxjQUFjYixNQUFNYSxZQUFZO1lBQ2hDM0Qsb0JBQW9COEMsTUFBTTlDLGtCQUFrQjtRQUM5QyxDQUFBO0FBR08sTUFBTTlFLHlCQUF5QixJQUFNRCxjQUFjLENBQUM2SCxRQUFVQSxNQUFNL0YsY0FBYztBQUNsRixNQUFNaEMsc0JBQXNCLElBQU1FLGNBQWMsQ0FBQzZILFFBQVVBLE1BQU05RixXQUFXO0FBQzVFLE1BQU12QywyQkFBMkIsSUFBTVEsY0FBYyxDQUFDNkgsUUFBVUEsTUFBTTdGLGdCQUFnQjtBQUN0RixNQUFNOUIsZ0NBQWdDLElBQU1GLGNBQWMsQ0FBQzZILFFBQVcsQ0FBQTtZQUMzRWUsbUJBQW1CZixNQUFNZSxpQkFBaUI7WUFDMUNDLHFCQUFxQmhCLE1BQU1nQixtQkFBbUI7WUFDOUNJLGdCQUFnQnBCLE1BQU1vQixjQUFjO1lBQ3BDQyxvQkFBb0JyQixNQUFNcUIsa0JBQWtCO1lBQzVDakQsb0JBQW9CNEIsTUFBTTVCLGtCQUFrQjtRQUM5QyxDQUFBO0FBR08sTUFBTXBHLDJCQUEyQixJQUFNRyxjQUFjLENBQUM2SCxRQUFVQSxNQUFNNUYsZ0JBQWdCO0FBQ3RGLE1BQU1yQyx1QkFBdUIsSUFBTUksY0FBYyxDQUFDNkgsUUFBVUEsTUFBTWxGLFlBQVk7QUFDOUUsTUFBTXBELDRCQUE0QixJQUFNUyxjQUFjLENBQUM2SCxRQUFVQSxNQUFNakYsaUJBQWlCO0FBQ3hGLE1BQU1qRCwwQkFBMEIsSUFBTUssY0FBYyxDQUFDNkgsUUFBVyxDQUFBO1lBQ3JFd0IscUJBQXFCeEIsTUFBTXdCLG1CQUFtQjtZQUM5Q0UsZ0JBQWdCMUIsTUFBTTBCLGNBQWM7WUFDcENDLG1CQUFtQjNCLE1BQU0yQixpQkFBaUI7WUFDMUNDLHNCQUFzQjVCLE1BQU00QixvQkFBb0I7WUFDaERFLGVBQWU5QixNQUFNOEIsYUFBYTtRQUNwQyxDQUFBO0FBR08sTUFBTXpLLGtCQUFrQixJQUFNYyxjQUFjLENBQUM2SCxRQUFXLENBQUE7WUFDN0Q3RSxXQUFXNkUsTUFBTTdFLFNBQVM7WUFDMUIrQixvQkFBb0I4QyxNQUFNOUMsa0JBQWtCO1lBQzVDa0Isb0JBQW9CNEIsTUFBTTVCLGtCQUFrQjtZQUM1QzJELGlCQUFpQi9CLE1BQU0rQixlQUFlO1lBQ3RDRyxvQkFBb0JsQyxNQUFNa0Msa0JBQWtCO1lBQzVDQyxzQkFBc0JuQyxNQUFNbUMsb0JBQW9CO1lBQ2hERSx5QkFBeUJyQyxNQUFNcUMsdUJBQXVCO1lBQ3REQyx3QkFBd0J0QyxNQUFNc0Msc0JBQXNCO1lBQ3BEbEgsWUFBWTRFLE1BQU01RSxVQUFVO1lBQzVCcUgsYUFBYXpDLE1BQU15QyxXQUFXO1lBQzlCcEgsVUFBVTJFLE1BQU0zRSxRQUFRO1lBQ3hCc0gsWUFBWTNDLE1BQU0yQyxVQUFVO1lBQzVCRSxhQUFhN0MsTUFBTTZDLFdBQVc7WUFDOUJHLFVBQVVoRCxNQUFNZ0QsUUFBUTtRQUMxQixDQUFBO0FBR08sTUFBTTlLLGdCQUFnQixJQUFNQyxjQUFjLENBQUM2SCxRQUFXLENBQUE7WUFDM0Q1QyxZQUFZNEMsTUFBTXpHLEtBQUssQ0FBQ3lELE1BQU07WUFDOUJrRyxvQkFBb0JsRCxNQUFNOUUsa0JBQWtCLENBQUM4QixNQUFNO1lBQ25EbUcscUJBQXFCbkQsTUFBTTlFLGtCQUFrQixDQUFDMEYsTUFBTSxDQUFDd0MsQ0FBQUEsSUFBSyxDQUFDQSxFQUFFYixJQUFJLEVBQUV2RixNQUFNO1lBQ3pFcUcsZUFBZXJELE1BQU0zRyxhQUFhLENBQUMyRCxNQUFNO1FBQzNDLENBQUE7QUFHTyxNQUFNdEUsb0JBQW9CLElBQU1QLGNBQWMsQ0FBQzZILFFBQ3BEQSxNQUFNM0csYUFBYSxDQUFDNEksS0FBSyxDQUFDLEdBQUc7QUFJeEIsTUFBTS9LLGtCQUFrQjtJQUM3Qm9NLGVBQWU7UUFDYixNQUFNdEQsUUFBUTdILGNBQWNvTCxRQUFRO1FBQ3BDLE9BQU87WUFDTG5HLFlBQVk0QyxNQUFNekcsS0FBSyxDQUFDeUQsTUFBTTtZQUM5QmtHLG9CQUFvQmxELE1BQU05RSxrQkFBa0IsQ0FBQzhCLE1BQU07WUFDbkRtRyxxQkFBcUJuRCxNQUFNOUUsa0JBQWtCLENBQUMwRixNQUFNLENBQUN3QyxDQUFBQSxJQUFLLENBQUNBLEVBQUViLElBQUksRUFBRXZGLE1BQU07WUFDekVxRyxlQUFlckQsTUFBTTNHLGFBQWEsQ0FBQzJELE1BQU07UUFDM0M7SUFDRjtJQUVBd0csZ0JBQWdCO1FBQ2QsTUFBTXhELFFBQVE3SCxjQUFjb0wsUUFBUTtRQUNwQyxPQUFPO1lBQ0xoSyxPQUFPeUcsTUFBTXpHLEtBQUssQ0FBQ3lELE1BQU07WUFDekI5RCxnQkFBZ0I4RyxNQUFNOUcsY0FBYyxDQUFDOEQsTUFBTTtZQUMzQzdELGdCQUFnQjZHLE1BQU03RyxjQUFjLENBQUM2RCxNQUFNO1lBQzNDM0QsZUFBZTJHLE1BQU0zRyxhQUFhLENBQUMyRCxNQUFNO1lBQ3pDeUMsZUFBZU8sTUFBTTlFLGtCQUFrQixDQUFDOEIsTUFBTTtRQUNoRDtJQUNGO0FBQ0Y7QUFHTyxNQUFNL0YsMEJBQTBCO0lBQ3JDd00sa0JBQWtCLENBQUNDO1FBQ2pCLE9BQU92TCxjQUFjd0wsU0FBUyxDQUFDLENBQUMzRDtZQUM5QjBELFNBQVMxRCxNQUFNekcsS0FBSztRQUN0QjtJQUNGO0lBRUFxSywyQkFBMkIsQ0FBQ0Y7UUFDMUIsT0FBT3ZMLGNBQWN3TCxTQUFTLENBQUMsQ0FBQzNEO1lBQzlCMEQsU0FBUzFELE1BQU1oRyxjQUFjO1FBQy9CO0lBQ0Y7SUFFQTZKLDBCQUEwQixDQUFDSDtRQUN6QixPQUFPdkwsY0FBY3dMLFNBQVMsQ0FBQyxDQUFDM0Q7WUFDOUIwRCxTQUFTMUQsTUFBTTlFLGtCQUFrQjtRQUNuQztJQUNGO0FBQ0Y7QUFHTyxNQUFNbEUsa0JBQWtCO0lBQzdCOE0sVUFBVTtRQUNSLE1BQU05RCxRQUFRN0gsY0FBY29MLFFBQVE7UUFDcEMxRyxjQUFNLENBQUNDLElBQUksQ0FBQyxzQkFBc0JrRDtJQUNwQztJQUVBK0QsVUFBVTtRQUNSLE1BQU01RixRQUFRakgsZ0JBQWdCb00sYUFBYTtRQUMzQ3pHLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLHFCQUFxQnFCO0lBQ25DO0lBRUE2RixnQkFBZ0I7UUFDZCxNQUFNQyxVQUFVL00sZ0JBQWdCc00sY0FBYztRQUM5QzNHLGNBQU0sQ0FBQ0MsSUFBSSxDQUFDLHVCQUF1Qm1IO0lBQ3JDO0lBRUFDLE9BQU87UUFDTC9MLGNBQWNvTCxRQUFRLEdBQUdyQixrQkFBa0I7UUFDM0MvSixjQUFjb0wsUUFBUSxHQUFHbEIsdUJBQXVCO0lBQ2hELG9CQUFvQjtJQUN0QjtBQUNGIn0=