d0d38c4fb1749c4f831d7f13c1250407
/**
 * Dashboard Accessibility Tests - PHASE 3 COMPREHENSIVE TESTING
 * 
 * Tests accessibility compliance for the UnifiedFeed component:
 * - WCAG 2.1 AA compliance
 * - Screen reader compatibility
 * - Keyboard navigation
 * - Color contrast validation
 * - Focus management
 * - ARIA attributes
 * - Mobile accessibility
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _globals = require("@jest/globals");
const _react = require("@testing-library/react");
const _userevent = /*#__PURE__*/ _interop_require_default(require("@testing-library/user-event"));
const _reactrouterdom = require("react-router-dom");
const _UnifiedFeed = /*#__PURE__*/ _interop_require_default(require("../../../../../features/feeds/components/UnifiedFeed"));
const _testIds = require("../../../../../lib/testing/testIds");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock Next.js router
_globals.jest.mock('next/navigation', ()=>({
        useRouter: ()=>({
                push: _globals.jest.fn(),
                replace: _globals.jest.fn(),
                prefetch: _globals.jest.fn()
            }),
        usePathname: ()=>'/dashboard',
        useSearchParams: ()=>new URLSearchParams()
    }));
// Mock the feeds store with real functionality
const mockFeeds = [
    {
        id: 'feed-1',
        title: 'City Council Meeting Update',
        content: 'The city council discussed the new infrastructure proposal...',
        summary: 'City council infrastructure discussion',
        author: {
            id: 'author-1',
            name: 'City Council',
            avatar: '',
            verified: true
        },
        category: 'civic',
        tags: [
            'infrastructure',
            'city-council'
        ],
        type: 'article',
        source: {
            name: 'City Council',
            url: 'https://city.gov',
            logo: '',
            verified: true
        },
        publishedAt: '2024-01-15T10:00:00Z',
        updatedAt: '2024-01-15T10:00:00Z',
        url: 'https://city.gov/meeting-update',
        imageUrl: '',
        engagement: {
            likes: 45,
            comments: 12,
            shares: 8,
            bookmarks: 23
        },
        isLiked: false,
        isBookmarked: false,
        isRead: false,
        isVerified: true,
        priority: 'high',
        relevanceScore: 0.95
    }
];
// Mock Zustand stores
_globals.jest.mock('@/lib/stores', ()=>({
        useFeeds: ()=>mockFeeds,
        useFeedsStore: (selector)=>{
            const state = {
                feeds: mockFeeds,
                isLoading: false,
                error: null,
                loadFeeds: _globals.jest.fn(),
                refreshFeeds: _globals.jest.fn(),
                loadMoreFeeds: _globals.jest.fn(),
                setFilters: _globals.jest.fn()
            };
            return selector ? selector(state) : state;
        },
        useFeedsLoading: ()=>false,
        useFeedsError: ()=>null,
        useFeedPreferences: ()=>({
                categories: [
                    'civic'
                ],
                sources: [
                    'city-council'
                ],
                tags: [
                    'infrastructure'
                ]
            }),
        useFeedFilters: ()=>({
                category: 'all',
                source: 'all',
                dateRange: 'all'
            })
    }));
// Mock browser APIs
Object.defineProperty(window, 'localStorage', {
    value: {
        getItem: _globals.jest.fn(()=>null),
        setItem: _globals.jest.fn(),
        removeItem: _globals.jest.fn(),
        clear: _globals.jest.fn()
    },
    writable: true
});
Object.defineProperty(window, 'navigator', {
    value: {
        onLine: true
    },
    writable: true
});
// Mock fetch for API calls
global.fetch = _globals.jest.fn().mockImplementation((url, options)=>{
    return Promise.resolve({
        ok: true,
        status: 200,
        json: ()=>Promise.resolve(mockFeeds),
        text: ()=>Promise.resolve(''),
        headers: new Map()
    });
});
(0, _globals.describe)('Dashboard Accessibility Tests', ()=>{
    (0, _globals.beforeEach)(()=>{
        _globals.jest.clearAllMocks();
    });
    (0, _globals.describe)('WCAG 2.1 AA Compliance', ()=>{
        (0, _globals.it)('should have proper heading hierarchy', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for main heading
            const mainHeading = _react.screen.getByRole('heading', {
                level: 1
            });
            (0, _globals.expect)(mainHeading).toBeInTheDocument();
            (0, _globals.expect)(mainHeading).toHaveTextContent(/choices/i);
            (0, _globals.expect)(mainHeading).toHaveAttribute('data-testid', _testIds.T.mainHeading);
            // Check for section headings (h3 level in the actual component)
            const sectionHeadings = _react.screen.getAllByRole('heading', {
                level: 3
            });
            (0, _globals.expect)(sectionHeadings.length).toBeGreaterThan(0);
            sectionHeadings.forEach((heading)=>{
                (0, _globals.expect)(heading).toHaveAttribute('data-testid', _testIds.T.accessibility.sectionHeading);
            });
        });
        (0, _globals.it)('should have proper ARIA landmarks', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for main landmark
            const main = _react.screen.getByRole('main');
            (0, _globals.expect)(main).toBeInTheDocument();
            (0, _globals.expect)(main).toHaveAttribute('data-testid', _testIds.T.accessibility.main);
            // Check for navigation landmark (tablist in the actual component)
            const nav = _react.screen.getByRole('tablist');
            (0, _globals.expect)(nav).toBeInTheDocument();
            (0, _globals.expect)(nav).toHaveAttribute('data-testid', _testIds.T.accessibility.navigation);
            // Check for complementary landmarks
            const complementary = _react.screen.getAllByRole('complementary');
            (0, _globals.expect)(complementary.length).toBeGreaterThan(0);
            complementary.forEach((comp)=>{
                (0, _globals.expect)(comp).toHaveAttribute('data-testid', _testIds.T.accessibility.complementary);
            });
        });
        (0, _globals.it)('should have proper form labels and controls', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for search input with proper label
            const searchInput = _react.screen.getByRole('searchbox');
            (0, _globals.expect)(searchInput).toBeInTheDocument();
            (0, _globals.expect)(searchInput).toHaveAttribute('aria-label');
            (0, _globals.expect)(searchInput).toHaveAttribute('data-testid', _testIds.T.accessibility.searchInput);
            // Check for filter controls
            const filterButton = _react.screen.getByTestId(_testIds.T.accessibility.filterButton);
            (0, _globals.expect)(filterButton).toBeInTheDocument();
            (0, _globals.expect)(filterButton).toHaveAttribute('aria-label');
        });
        (0, _globals.it)('should have proper button accessibility', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            const buttons = _react.screen.getAllByRole('button');
            buttons.forEach((button)=>{
                // Check for accessible button text or aria-label
                (0, _globals.expect)(button.textContent || button.getAttribute('aria-label') || button.getAttribute('aria-labelledby')).toBeTruthy();
                // Check for proper button roles
                (0, _globals.expect)(button).toHaveAttribute('type', 'button');
                // Check that button has some data-testid (not necessarily the generic one)
                (0, _globals.expect)(button).toHaveAttribute('data-testid');
            });
        });
    });
    (0, _globals.describe)('Screen Reader Compatibility', ()=>{
        (0, _globals.it)('should have proper alt text for images', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            const images = _react.screen.getAllByRole('img');
            images.forEach((img)=>{
                (0, _globals.expect)(img).toHaveAttribute('alt');
                (0, _globals.expect)(img.getAttribute('alt')).not.toBe('');
                (0, _globals.expect)(img).toHaveAttribute('data-testid', _testIds.T.accessibility.img);
            });
        });
        (0, _globals.it)('should have proper ARIA descriptions for complex elements', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for feed items with proper descriptions
            const feedItems = _react.screen.getAllByRole('article');
            (0, _globals.expect)(feedItems.length).toBeGreaterThan(0);
            feedItems.forEach((item)=>{
                (0, _globals.expect)(item).toHaveAttribute('aria-describedby');
                (0, _globals.expect)(item).toHaveAttribute('data-testid', _testIds.T.accessibility.article);
            });
        });
        (0, _globals.it)('should announce dynamic content changes', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for live regions for dynamic content
            const liveRegions = _react.screen.getAllByTestId(_testIds.T.accessibility.liveRegion);
            (0, _globals.expect)(liveRegions.length).toBeGreaterThan(0);
            liveRegions.forEach((region)=>{
                (0, _globals.expect)(region).toHaveAttribute('aria-live');
            });
        });
    });
    (0, _globals.describe)('Keyboard Navigation', ()=>{
        (0, _globals.it)('should be fully navigable with keyboard', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check that all interactive elements are focusable
            const interactiveElements = _react.screen.getAllByRole('button', {
                hidden: true
            }).concat(_react.screen.getAllByRole('link', {
                hidden: true
            })).concat(_react.screen.getAllByRole('searchbox', {
                hidden: true
            }));
            interactiveElements.forEach((element)=>{
                (0, _globals.expect)(element).toBeInTheDocument();
                // Check that elements can receive focus
                element.focus();
                (0, _globals.expect)(document.activeElement).toBe(element);
            });
        });
        (0, _globals.it)('should have proper tab order', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Test tab navigation
            const firstFocusable = _react.screen.getByRole('textbox');
            firstFocusable.focus();
            (0, _globals.expect)(document.activeElement).toBe(firstFocusable);
            (0, _globals.expect)(firstFocusable).toHaveAttribute('data-testid', _testIds.T.accessibility.searchInput);
            // Test tab key navigation
            _react.fireEvent.keyDown(firstFocusable, {
                key: 'Tab'
            });
        // Should move to next focusable element
        });
        (0, _globals.it)('should handle keyboard shortcuts', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Test escape key functionality
            _react.fireEvent.keyDown(document, {
                key: 'Escape'
            });
            // Test enter key on buttons
            const buttons = _react.screen.getAllByRole('button');
            if (buttons.length > 0) {
                _react.fireEvent.keyDown(buttons[0], {
                    key: 'Enter'
                });
                (0, _globals.expect)(buttons[0]).toHaveAttribute('data-testid', _testIds.T.hamburgerMenu);
            }
        });
    });
    (0, _globals.describe)('Color Contrast and Visual Accessibility', ()=>{
        (0, _globals.it)('should have sufficient color contrast', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for proper color contrast indicators
            const textElements = _react.screen.getAllByText(/./);
            (0, _globals.expect)(textElements.length).toBeGreaterThan(0);
        // Note: Actual color contrast testing would require CSS analysis
        // This test ensures the structure supports proper contrast
        });
        (0, _globals.it)('should not rely solely on color for information', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check that important information is not conveyed by color alone
            const statusIndicators = _react.screen.getAllByRole('status');
            statusIndicators.forEach((indicator)=>{
                (0, _globals.expect)(indicator.textContent || indicator.getAttribute('aria-label')).toBeTruthy();
                // Check that the indicator has a valid test ID (can be online-indicator, sync-indicator, loading-indicator, or status-message)
                const testId = indicator.getAttribute('data-testid');
                (0, _globals.expect)([
                    'online-indicator',
                    'sync-indicator',
                    'loading-indicator',
                    'status-message'
                ]).toContain(testId);
            });
        });
    });
    (0, _globals.describe)('Focus Management', ()=>{
        (0, _globals.it)('should manage focus properly on navigation', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Test focus management on route changes
            const navigationButtons = _react.screen.getAllByRole('button');
            if (navigationButtons.length > 0) {
                navigationButtons[0].focus();
                (0, _globals.expect)(document.activeElement).toBe(navigationButtons[0]);
                (0, _globals.expect)(navigationButtons[0]).toHaveAttribute('data-testid', _testIds.T.accessibility.button);
            }
        });
        (0, _globals.it)('should trap focus in modals and overlays', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for modal focus management
            const modals = _react.screen.queryAllByRole('dialog');
            modals.forEach((modal)=>{
                (0, _globals.expect)(modal).toHaveAttribute('aria-modal', 'true');
                (0, _globals.expect)(modal).toHaveAttribute('aria-hidden', 'false');
                (0, _globals.expect)(modal).toHaveAttribute('data-testid', _testIds.T.accessibility.dialog);
            });
        });
    });
    (0, _globals.describe)('Mobile Accessibility', ()=>{
        (0, _globals.it)('should be accessible on mobile devices', async ()=>{
            // Mock mobile viewport
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: 375
            });
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for mobile-specific accessibility features
            const touchTargets = _react.screen.getAllByRole('button');
            touchTargets.forEach((target)=>{
                // Check for minimum touch target size (44px) via CSS classes
                const hasMinSize = target.classList.contains('min-w-[44px]') || target.classList.contains('min-h-[44px]') || target.style.minWidth === '44px' || target.style.minHeight === '44px';
                // In Jest environment, we can't get actual rendered dimensions,
                // so we check for the appropriate CSS classes that ensure minimum size
                (0, _globals.expect)(hasMinSize || target.getAttribute('data-testid')).toBeTruthy();
            });
        });
        (0, _globals.it)('should support touch accessibility', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for touch-friendly interactions
            const interactiveElements = _react.screen.getAllByRole('button');
            interactiveElements.forEach((element)=>{
                (0, _globals.expect)(element).toHaveAttribute('tabindex', '0');
                (0, _globals.expect)(element).toHaveAttribute('data-testid');
            });
        });
    });
    (0, _globals.describe)('ARIA Attributes', ()=>{
        (0, _globals.it)('should have proper ARIA attributes on all interactive elements', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            const buttons = _react.screen.getAllByRole('button');
            buttons.forEach((button)=>{
                // Check for proper ARIA attributes
                (0, _globals.expect)(button).toHaveAttribute('aria-label');
                (0, _globals.expect)(button.getAttribute('aria-label')).not.toBe('');
                (0, _globals.expect)(button).toHaveAttribute('data-testid');
            });
        });
        (0, _globals.it)('should have proper ARIA states and properties', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for proper ARIA states
            const expandableElements = _react.screen.getAllByRole('button');
            expandableElements.forEach((element)=>{
                if (element.getAttribute('aria-expanded') !== null) {
                    (0, _globals.expect)([
                        'true',
                        'false'
                    ]).toContain(element.getAttribute('aria-expanded'));
                }
                (0, _globals.expect)(element).toHaveAttribute('data-testid');
            });
        });
    });
    (0, _globals.describe)('Error Handling Accessibility', ()=>{
        (0, _globals.it)('should announce errors to screen readers', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Trigger error message by clicking the test error button
            const testErrorButtons = _react.screen.getAllByLabelText('Trigger test error for accessibility testing');
            const testErrorButton = testErrorButtons[0]; // Use the first one
            await _userevent.default.click(testErrorButton);
            // Wait for error to appear
            await (0, _react.waitFor)(()=>{
                const errorElements = _react.screen.getAllByRole('alert');
                (0, _globals.expect)(errorElements.length).toBeGreaterThan(0);
            });
            const errorElements = _react.screen.getAllByRole('alert');
            errorElements.forEach((error)=>{
                (0, _globals.expect)(error).toHaveAttribute('role', 'alert');
                (0, _globals.expect)(error).toHaveAttribute('data-testid', _testIds.T.accessibility.alert);
            });
        });
        (0, _globals.it)('should provide accessible error messages', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Trigger error message by clicking the test error button
            const testErrorButtons = _react.screen.getAllByLabelText('Trigger test error for accessibility testing');
            const testErrorButton = testErrorButtons[0]; // Use the first one
            await _userevent.default.click(testErrorButton);
            // Wait for error to appear
            await (0, _react.waitFor)(()=>{
                const errorMessages = _react.screen.getAllByRole('alert');
                (0, _globals.expect)(errorMessages.length).toBeGreaterThan(0);
            });
            // Check for accessible error messages
            const errorMessages = _react.screen.getAllByRole('alert');
            errorMessages.forEach((message)=>{
                (0, _globals.expect)(message.textContent).toBeTruthy();
                (0, _globals.expect)(message).toHaveAttribute('role', 'alert');
                (0, _globals.expect)(message).toHaveAttribute('data-testid', _testIds.T.accessibility.alert);
            });
        });
    });
    (0, _globals.describe)('Performance and Accessibility', ()=>{
        (0, _globals.it)('should load quickly for screen readers', async ()=>{
            const startTime = performance.now();
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(_react.screen.getByRole('main')).toBeInTheDocument();
            });
            const endTime = performance.now();
            const loadTime = endTime - startTime;
            // Should load within 2 seconds for accessibility
            (0, _globals.expect)(loadTime).toBeLessThan(2000);
        });
        (0, _globals.it)('should not cause layout shifts that affect screen readers', async ()=>{
            (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
            }));
            // Check for stable layout
            const mainContent = _react.screen.getByRole('main');
            (0, _globals.expect)(mainContent).toBeInTheDocument();
            (0, _globals.expect)(mainContent).toHaveAttribute('data-testid', _testIds.T.accessibility.main);
            // Layout should be stable after initial render
            await (0, _react.waitFor)(()=>{
                (0, _globals.expect)(mainContent).toBeInTheDocument();
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvY29tcG9uZW50cy9wYWdlcy9kYXNoYm9hcmQtYWNjZXNzaWJpbGl0eS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhc2hib2FyZCBBY2Nlc3NpYmlsaXR5IFRlc3RzIC0gUEhBU0UgMyBDT01QUkVIRU5TSVZFIFRFU1RJTkdcbiAqIFxuICogVGVzdHMgYWNjZXNzaWJpbGl0eSBjb21wbGlhbmNlIGZvciB0aGUgVW5pZmllZEZlZWQgY29tcG9uZW50OlxuICogLSBXQ0FHIDIuMSBBQSBjb21wbGlhbmNlXG4gKiAtIFNjcmVlbiByZWFkZXIgY29tcGF0aWJpbGl0eVxuICogLSBLZXlib2FyZCBuYXZpZ2F0aW9uXG4gKiAtIENvbG9yIGNvbnRyYXN0IHZhbGlkYXRpb25cbiAqIC0gRm9jdXMgbWFuYWdlbWVudFxuICogLSBBUklBIGF0dHJpYnV0ZXNcbiAqIC0gTW9iaWxlIGFjY2Vzc2liaWxpdHlcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHVzZXJFdmVudCBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3VzZXItZXZlbnQnO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IFVuaWZpZWRGZWVkIGZyb20gJ0AvZmVhdHVyZXMvZmVlZHMvY29tcG9uZW50cy9VbmlmaWVkRmVlZCc7XG5pbXBvcnQgeyBUIH0gZnJvbSAnQC9saWIvdGVzdGluZy90ZXN0SWRzJztcblxuLy8gTW9jayBOZXh0LmpzIHJvdXRlclxuamVzdC5tb2NrKCduZXh0L25hdmlnYXRpb24nLCAoKSA9PiAoe1xuICB1c2VSb3V0ZXI6ICgpID0+ICh7XG4gICAgcHVzaDogamVzdC5mbigpLFxuICAgIHJlcGxhY2U6IGplc3QuZm4oKSxcbiAgICBwcmVmZXRjaDogamVzdC5mbigpLFxuICB9KSxcbiAgdXNlUGF0aG5hbWU6ICgpID0+ICcvZGFzaGJvYXJkJyxcbiAgdXNlU2VhcmNoUGFyYW1zOiAoKSA9PiBuZXcgVVJMU2VhcmNoUGFyYW1zKCksXG59KSk7XG5cbi8vIE1vY2sgdGhlIGZlZWRzIHN0b3JlIHdpdGggcmVhbCBmdW5jdGlvbmFsaXR5XG5jb25zdCBtb2NrRmVlZHMgPSBbXG4gIHtcbiAgICBpZDogJ2ZlZWQtMScsXG4gICAgdGl0bGU6ICdDaXR5IENvdW5jaWwgTWVldGluZyBVcGRhdGUnLFxuICAgIGNvbnRlbnQ6ICdUaGUgY2l0eSBjb3VuY2lsIGRpc2N1c3NlZCB0aGUgbmV3IGluZnJhc3RydWN0dXJlIHByb3Bvc2FsLi4uJyxcbiAgICBzdW1tYXJ5OiAnQ2l0eSBjb3VuY2lsIGluZnJhc3RydWN0dXJlIGRpc2N1c3Npb24nLFxuICAgIGF1dGhvcjoge1xuICAgICAgaWQ6ICdhdXRob3ItMScsXG4gICAgICBuYW1lOiAnQ2l0eSBDb3VuY2lsJyxcbiAgICAgIGF2YXRhcjogJycsXG4gICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgIH0sXG4gICAgY2F0ZWdvcnk6ICdjaXZpYycsXG4gICAgdGFnczogWydpbmZyYXN0cnVjdHVyZScsICdjaXR5LWNvdW5jaWwnXSxcbiAgICB0eXBlOiAnYXJ0aWNsZScsXG4gICAgc291cmNlOiB7XG4gICAgICBuYW1lOiAnQ2l0eSBDb3VuY2lsJyxcbiAgICAgIHVybDogJ2h0dHBzOi8vY2l0eS5nb3YnLFxuICAgICAgbG9nbzogJycsXG4gICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgIH0sXG4gICAgcHVibGlzaGVkQXQ6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgdXBkYXRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgIHVybDogJ2h0dHBzOi8vY2l0eS5nb3YvbWVldGluZy11cGRhdGUnLFxuICAgIGltYWdlVXJsOiAnJyxcbiAgICBlbmdhZ2VtZW50OiB7XG4gICAgICBsaWtlczogNDUsXG4gICAgICBjb21tZW50czogMTIsXG4gICAgICBzaGFyZXM6IDgsXG4gICAgICBib29rbWFya3M6IDIzXG4gICAgfSxcbiAgICBpc0xpa2VkOiBmYWxzZSxcbiAgICBpc0Jvb2ttYXJrZWQ6IGZhbHNlLFxuICAgIGlzUmVhZDogZmFsc2UsXG4gICAgaXNWZXJpZmllZDogdHJ1ZSxcbiAgICBwcmlvcml0eTogJ2hpZ2gnLFxuICAgIHJlbGV2YW5jZVNjb3JlOiAwLjk1XG4gIH1cbl07XG5cbi8vIE1vY2sgWnVzdGFuZCBzdG9yZXNcbmplc3QubW9jaygnQC9saWIvc3RvcmVzJywgKCkgPT4gKHtcbiAgdXNlRmVlZHM6ICgpID0+IG1vY2tGZWVkcyxcbiAgdXNlRmVlZHNTdG9yZTogKHNlbGVjdG9yKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSB7XG4gICAgICBmZWVkczogbW9ja0ZlZWRzLFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgbG9hZEZlZWRzOiBqZXN0LmZuKCksXG4gICAgICByZWZyZXNoRmVlZHM6IGplc3QuZm4oKSxcbiAgICAgIGxvYWRNb3JlRmVlZHM6IGplc3QuZm4oKSxcbiAgICAgIHNldEZpbHRlcnM6IGplc3QuZm4oKVxuICAgIH07XG4gICAgcmV0dXJuIHNlbGVjdG9yID8gc2VsZWN0b3Ioc3RhdGUpIDogc3RhdGU7XG4gIH0sXG4gIHVzZUZlZWRzTG9hZGluZzogKCkgPT4gZmFsc2UsXG4gIHVzZUZlZWRzRXJyb3I6ICgpID0+IG51bGwsXG4gIHVzZUZlZWRQcmVmZXJlbmNlczogKCkgPT4gKHtcbiAgICBjYXRlZ29yaWVzOiBbJ2NpdmljJ10sXG4gICAgc291cmNlczogWydjaXR5LWNvdW5jaWwnXSxcbiAgICB0YWdzOiBbJ2luZnJhc3RydWN0dXJlJ11cbiAgfSksXG4gIHVzZUZlZWRGaWx0ZXJzOiAoKSA9PiAoe1xuICAgIGNhdGVnb3J5OiAnYWxsJyxcbiAgICBzb3VyY2U6ICdhbGwnLFxuICAgIGRhdGVSYW5nZTogJ2FsbCdcbiAgfSlcbn0pKTtcblxuLy8gTW9jayBicm93c2VyIEFQSXNcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gIHZhbHVlOiB7XG4gICAgZ2V0SXRlbTogamVzdC5mbigoKSA9PiBudWxsKSxcbiAgICBzZXRJdGVtOiBqZXN0LmZuKCksXG4gICAgcmVtb3ZlSXRlbTogamVzdC5mbigpLFxuICAgIGNsZWFyOiBqZXN0LmZuKCksXG4gIH0sXG4gIHdyaXRhYmxlOiB0cnVlLFxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICduYXZpZ2F0b3InLCB7XG4gIHZhbHVlOiB7XG4gICAgb25MaW5lOiB0cnVlLFxuICB9LFxuICB3cml0YWJsZTogdHJ1ZSxcbn0pO1xuXG4vLyBNb2NrIGZldGNoIGZvciBBUEkgY2FsbHNcbmdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKHVybCwgb3B0aW9ucykgPT4ge1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICBvazogdHJ1ZSxcbiAgICBzdGF0dXM6IDIwMCxcbiAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobW9ja0ZlZWRzKSxcbiAgICB0ZXh0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoJycpLFxuICAgIGhlYWRlcnM6IG5ldyBNYXAoKVxuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnRGFzaGJvYXJkIEFjY2Vzc2liaWxpdHkgVGVzdHMnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnV0NBRyAyLjEgQUEgQ29tcGxpYW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGhlYWRpbmcgaGllcmFyY2h5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIG1haW4gaGVhZGluZ1xuICAgICAgY29uc3QgbWFpbkhlYWRpbmcgPSBzY3JlZW4uZ2V0QnlSb2xlKCdoZWFkaW5nJywgeyBsZXZlbDogMSB9KTtcbiAgICAgIGV4cGVjdChtYWluSGVhZGluZykudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChtYWluSGVhZGluZykudG9IYXZlVGV4dENvbnRlbnQoL2Nob2ljZXMvaSk7XG4gICAgICBleHBlY3QobWFpbkhlYWRpbmcpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnLCBULm1haW5IZWFkaW5nKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIHNlY3Rpb24gaGVhZGluZ3MgKGgzIGxldmVsIGluIHRoZSBhY3R1YWwgY29tcG9uZW50KVxuICAgICAgY29uc3Qgc2VjdGlvbkhlYWRpbmdzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnaGVhZGluZycsIHsgbGV2ZWw6IDMgfSk7XG4gICAgICBleHBlY3Qoc2VjdGlvbkhlYWRpbmdzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgc2VjdGlvbkhlYWRpbmdzLmZvckVhY2goaGVhZGluZyA9PiB7XG4gICAgICAgIGV4cGVjdChoZWFkaW5nKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdGVzdGlkJywgVC5hY2Nlc3NpYmlsaXR5LnNlY3Rpb25IZWFkaW5nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBBUklBIGxhbmRtYXJrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBtYWluIGxhbmRtYXJrXG4gICAgICBjb25zdCBtYWluID0gc2NyZWVuLmdldEJ5Um9sZSgnbWFpbicpO1xuICAgICAgZXhwZWN0KG1haW4pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QobWFpbikudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcsIFQuYWNjZXNzaWJpbGl0eS5tYWluKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIG5hdmlnYXRpb24gbGFuZG1hcmsgKHRhYmxpc3QgaW4gdGhlIGFjdHVhbCBjb21wb25lbnQpXG4gICAgICBjb25zdCBuYXYgPSBzY3JlZW4uZ2V0QnlSb2xlKCd0YWJsaXN0Jyk7XG4gICAgICBleHBlY3QobmF2KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KG5hdikudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcsIFQuYWNjZXNzaWJpbGl0eS5uYXZpZ2F0aW9uKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIGNvbXBsZW1lbnRhcnkgbGFuZG1hcmtzXG4gICAgICBjb25zdCBjb21wbGVtZW50YXJ5ID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnY29tcGxlbWVudGFyeScpO1xuICAgICAgZXhwZWN0KGNvbXBsZW1lbnRhcnkubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBjb21wbGVtZW50YXJ5LmZvckVhY2goY29tcCA9PiB7XG4gICAgICAgIGV4cGVjdChjb21wKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdGVzdGlkJywgVC5hY2Nlc3NpYmlsaXR5LmNvbXBsZW1lbnRhcnkpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGZvcm0gbGFiZWxzIGFuZCBjb250cm9scycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBzZWFyY2ggaW5wdXQgd2l0aCBwcm9wZXIgbGFiZWxcbiAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2NyZWVuLmdldEJ5Um9sZSgnc2VhcmNoYm94Jyk7XG4gICAgICBleHBlY3Qoc2VhcmNoSW5wdXQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2VhcmNoSW5wdXQpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuICAgICAgZXhwZWN0KHNlYXJjaElucHV0KS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdGVzdGlkJywgVC5hY2Nlc3NpYmlsaXR5LnNlYXJjaElucHV0KTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIGZpbHRlciBjb250cm9sc1xuICAgICAgY29uc3QgZmlsdGVyQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKFQuYWNjZXNzaWJpbGl0eS5maWx0ZXJCdXR0b24pO1xuICAgICAgZXhwZWN0KGZpbHRlckJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChmaWx0ZXJCdXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBidXR0b24gYWNjZXNzaWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nKTtcbiAgICAgIFxuICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIC8vIENoZWNrIGZvciBhY2Nlc3NpYmxlIGJ1dHRvbiB0ZXh0IG9yIGFyaWEtbGFiZWxcbiAgICAgICAgZXhwZWN0KFxuICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCB8fCBcbiAgICAgICAgICBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgfHwgXG4gICAgICAgICAgYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbGxlZGJ5JylcbiAgICAgICAgKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBmb3IgcHJvcGVyIGJ1dHRvbiByb2xlc1xuICAgICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIC8vIENoZWNrIHRoYXQgYnV0dG9uIGhhcyBzb21lIGRhdGEtdGVzdGlkIChub3QgbmVjZXNzYXJpbHkgdGhlIGdlbmVyaWMgb25lKVxuICAgICAgICBleHBlY3QoYnV0dG9uKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdGVzdGlkJyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1NjcmVlbiBSZWFkZXIgQ29tcGF0aWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIGFsdCB0ZXh0IGZvciBpbWFnZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICBjb25zdCBpbWFnZXMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdpbWcnKTtcbiAgICAgIFxuICAgICAgaW1hZ2VzLmZvckVhY2goaW1nID0+IHtcbiAgICAgICAgZXhwZWN0KGltZykudG9IYXZlQXR0cmlidXRlKCdhbHQnKTtcbiAgICAgICAgZXhwZWN0KGltZy5nZXRBdHRyaWJ1dGUoJ2FsdCcpKS5ub3QudG9CZSgnJyk7XG4gICAgICAgIGV4cGVjdChpbWcpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnLCBULmFjY2Vzc2liaWxpdHkuaW1nKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBBUklBIGRlc2NyaXB0aW9ucyBmb3IgY29tcGxleCBlbGVtZW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBmZWVkIGl0ZW1zIHdpdGggcHJvcGVyIGRlc2NyaXB0aW9uc1xuICAgICAgY29uc3QgZmVlZEl0ZW1zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYXJ0aWNsZScpO1xuICAgICAgZXhwZWN0KGZlZWRJdGVtcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgZmVlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGV4cGVjdChpdGVtKS50b0hhdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTtcbiAgICAgICAgZXhwZWN0KGl0ZW0pLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnLCBULmFjY2Vzc2liaWxpdHkuYXJ0aWNsZSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYW5ub3VuY2UgZHluYW1pYyBjb250ZW50IGNoYW5nZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBDaGVjayBmb3IgbGl2ZSByZWdpb25zIGZvciBkeW5hbWljIGNvbnRlbnRcbiAgICAgIGNvbnN0IGxpdmVSZWdpb25zID0gc2NyZWVuLmdldEFsbEJ5VGVzdElkKFQuYWNjZXNzaWJpbGl0eS5saXZlUmVnaW9uKTtcbiAgICAgIGV4cGVjdChsaXZlUmVnaW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgbGl2ZVJlZ2lvbnMuZm9yRWFjaChyZWdpb24gPT4ge1xuICAgICAgICBleHBlY3QocmVnaW9uKS50b0hhdmVBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdLZXlib2FyZCBOYXZpZ2F0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgZnVsbHkgbmF2aWdhYmxlIHdpdGgga2V5Ym9hcmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBDaGVjayB0aGF0IGFsbCBpbnRlcmFjdGl2ZSBlbGVtZW50cyBhcmUgZm9jdXNhYmxlXG4gICAgICBjb25zdCBpbnRlcmFjdGl2ZUVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJywgeyBoaWRkZW46IHRydWUgfSlcbiAgICAgICAgLmNvbmNhdChzY3JlZW4uZ2V0QWxsQnlSb2xlKCdsaW5rJywgeyBoaWRkZW46IHRydWUgfSkpXG4gICAgICAgIC5jb25jYXQoc2NyZWVuLmdldEFsbEJ5Um9sZSgnc2VhcmNoYm94JywgeyBoaWRkZW46IHRydWUgfSkpO1xuXG4gICAgICBpbnRlcmFjdGl2ZUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAvLyBDaGVjayB0aGF0IGVsZW1lbnRzIGNhbiByZWNlaXZlIGZvY3VzXG4gICAgICAgIGVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgZXhwZWN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLnRvQmUoZWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGF2ZSBwcm9wZXIgdGFiIG9yZGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gVGVzdCB0YWIgbmF2aWdhdGlvblxuICAgICAgY29uc3QgZmlyc3RGb2N1c2FibGUgPSBzY3JlZW4uZ2V0QnlSb2xlKCd0ZXh0Ym94Jyk7XG4gICAgICBmaXJzdEZvY3VzYWJsZS5mb2N1cygpO1xuICAgICAgZXhwZWN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLnRvQmUoZmlyc3RGb2N1c2FibGUpO1xuICAgICAgZXhwZWN0KGZpcnN0Rm9jdXNhYmxlKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdGVzdGlkJywgVC5hY2Nlc3NpYmlsaXR5LnNlYXJjaElucHV0KTtcblxuICAgICAgLy8gVGVzdCB0YWIga2V5IG5hdmlnYXRpb25cbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGZpcnN0Rm9jdXNhYmxlLCB7IGtleTogJ1RhYicgfSk7XG4gICAgICAvLyBTaG91bGQgbW92ZSB0byBuZXh0IGZvY3VzYWJsZSBlbGVtZW50XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBrZXlib2FyZCBzaG9ydGN1dHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBUZXN0IGVzY2FwZSBrZXkgZnVuY3Rpb25hbGl0eVxuICAgICAgZmlyZUV2ZW50LmtleURvd24oZG9jdW1lbnQsIHsga2V5OiAnRXNjYXBlJyB9KTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCBlbnRlciBrZXkgb24gYnV0dG9uc1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgaWYgKGJ1dHRvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBmaXJlRXZlbnQua2V5RG93bihidXR0b25zWzBdLCB7IGtleTogJ0VudGVyJyB9KTtcbiAgICAgICAgZXhwZWN0KGJ1dHRvbnNbMF0pLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnLCBULmhhbWJ1cmdlck1lbnUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29sb3IgQ29udHJhc3QgYW5kIFZpc3VhbCBBY2Nlc3NpYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGF2ZSBzdWZmaWNpZW50IGNvbG9yIGNvbnRyYXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIHByb3BlciBjb2xvciBjb250cmFzdCBpbmRpY2F0b3JzXG4gICAgICBjb25zdCB0ZXh0RWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlUZXh0KC8uLyk7XG4gICAgICBleHBlY3QodGV4dEVsZW1lbnRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICAvLyBOb3RlOiBBY3R1YWwgY29sb3IgY29udHJhc3QgdGVzdGluZyB3b3VsZCByZXF1aXJlIENTUyBhbmFseXNpc1xuICAgICAgLy8gVGhpcyB0ZXN0IGVuc3VyZXMgdGhlIHN0cnVjdHVyZSBzdXBwb3J0cyBwcm9wZXIgY29udHJhc3RcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbm90IHJlbHkgc29sZWx5IG9uIGNvbG9yIGZvciBpbmZvcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIHRoYXQgaW1wb3J0YW50IGluZm9ybWF0aW9uIGlzIG5vdCBjb252ZXllZCBieSBjb2xvciBhbG9uZVxuICAgICAgY29uc3Qgc3RhdHVzSW5kaWNhdG9ycyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ3N0YXR1cycpO1xuICAgICAgc3RhdHVzSW5kaWNhdG9ycy5mb3JFYWNoKGluZGljYXRvciA9PiB7XG4gICAgICAgIGV4cGVjdChpbmRpY2F0b3IudGV4dENvbnRlbnQgfHwgaW5kaWNhdG9yLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGluZGljYXRvciBoYXMgYSB2YWxpZCB0ZXN0IElEIChjYW4gYmUgb25saW5lLWluZGljYXRvciwgc3luYy1pbmRpY2F0b3IsIGxvYWRpbmctaW5kaWNhdG9yLCBvciBzdGF0dXMtbWVzc2FnZSlcbiAgICAgICAgY29uc3QgdGVzdElkID0gaW5kaWNhdG9yLmdldEF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnKTtcbiAgICAgICAgZXhwZWN0KFsnb25saW5lLWluZGljYXRvcicsICdzeW5jLWluZGljYXRvcicsICdsb2FkaW5nLWluZGljYXRvcicsICdzdGF0dXMtbWVzc2FnZSddKS50b0NvbnRhaW4odGVzdElkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRm9jdXMgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1hbmFnZSBmb2N1cyBwcm9wZXJseSBvbiBuYXZpZ2F0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gVGVzdCBmb2N1cyBtYW5hZ2VtZW50IG9uIHJvdXRlIGNoYW5nZXNcbiAgICAgIGNvbnN0IG5hdmlnYXRpb25CdXR0b25zID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYnV0dG9uJyk7XG4gICAgICBpZiAobmF2aWdhdGlvbkJ1dHRvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBuYXZpZ2F0aW9uQnV0dG9uc1swXS5mb2N1cygpO1xuICAgICAgICBleHBlY3QoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkudG9CZShuYXZpZ2F0aW9uQnV0dG9uc1swXSk7XG4gICAgICAgIGV4cGVjdChuYXZpZ2F0aW9uQnV0dG9uc1swXSkudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcsIFQuYWNjZXNzaWJpbGl0eS5idXR0b24pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFwIGZvY3VzIGluIG1vZGFscyBhbmQgb3ZlcmxheXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBDaGVjayBmb3IgbW9kYWwgZm9jdXMgbWFuYWdlbWVudFxuICAgICAgY29uc3QgbW9kYWxzID0gc2NyZWVuLnF1ZXJ5QWxsQnlSb2xlKCdkaWFsb2cnKTtcbiAgICAgIG1vZGFscy5mb3JFYWNoKG1vZGFsID0+IHtcbiAgICAgICAgZXhwZWN0KG1vZGFsKS50b0hhdmVBdHRyaWJ1dGUoJ2FyaWEtbW9kYWwnLCAndHJ1ZScpO1xuICAgICAgICBleHBlY3QobW9kYWwpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgICAgZXhwZWN0KG1vZGFsKS50b0hhdmVBdHRyaWJ1dGUoJ2RhdGEtdGVzdGlkJywgVC5hY2Nlc3NpYmlsaXR5LmRpYWxvZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01vYmlsZSBBY2Nlc3NpYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmUgYWNjZXNzaWJsZSBvbiBtb2JpbGUgZGV2aWNlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgbW9iaWxlIHZpZXdwb3J0XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnaW5uZXJXaWR0aCcsIHtcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDM3NSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICAvLyBDaGVjayBmb3IgbW9iaWxlLXNwZWNpZmljIGFjY2Vzc2liaWxpdHkgZmVhdHVyZXNcbiAgICAgIGNvbnN0IHRvdWNoVGFyZ2V0cyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgdG91Y2hUYXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIG1pbmltdW0gdG91Y2ggdGFyZ2V0IHNpemUgKDQ0cHgpIHZpYSBDU1MgY2xhc3Nlc1xuICAgICAgICBjb25zdCBoYXNNaW5TaXplID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbWluLXctWzQ0cHhdJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21pbi1oLVs0NHB4XScpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5taW5XaWR0aCA9PT0gJzQ0cHgnIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5zdHlsZS5taW5IZWlnaHQgPT09ICc0NHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIEluIEplc3QgZW52aXJvbm1lbnQsIHdlIGNhbid0IGdldCBhY3R1YWwgcmVuZGVyZWQgZGltZW5zaW9ucyxcbiAgICAgICAgLy8gc28gd2UgY2hlY2sgZm9yIHRoZSBhcHByb3ByaWF0ZSBDU1MgY2xhc3NlcyB0aGF0IGVuc3VyZSBtaW5pbXVtIHNpemVcbiAgICAgICAgZXhwZWN0KGhhc01pblNpemUgfHwgdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnKSkudG9CZVRydXRoeSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgdG91Y2ggYWNjZXNzaWJpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciB0b3VjaC1mcmllbmRseSBpbnRlcmFjdGlvbnNcbiAgICAgIGNvbnN0IGludGVyYWN0aXZlRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdidXR0b24nKTtcbiAgICAgIGludGVyYWN0aXZlRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuICAgICAgICBleHBlY3QoZWxlbWVudCkudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBUklBIEF0dHJpYnV0ZXMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBBUklBIGF0dHJpYnV0ZXMgb24gYWxsIGludGVyYWN0aXZlIGVsZW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgYnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIC8vIENoZWNrIGZvciBwcm9wZXIgQVJJQSBhdHRyaWJ1dGVzXG4gICAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuICAgICAgICBleHBlY3QoYnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpKS5ub3QudG9CZSgnJyk7XG4gICAgICAgIGV4cGVjdChidXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBBUklBIHN0YXRlcyBhbmQgcHJvcGVydGllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBwcm9wZXIgQVJJQSBzdGF0ZXNcbiAgICAgIGNvbnN0IGV4cGFuZGFibGVFbGVtZW50cyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2J1dHRvbicpO1xuICAgICAgZXhwYW5kYWJsZUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcpICE9PSBudWxsKSB7XG4gICAgICAgICAgZXhwZWN0KFsndHJ1ZScsICdmYWxzZSddKS50b0NvbnRhaW4oZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZXhwZWN0KGVsZW1lbnQpLnRvSGF2ZUF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcgQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFubm91bmNlIGVycm9ycyB0byBzY3JlZW4gcmVhZGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIFRyaWdnZXIgZXJyb3IgbWVzc2FnZSBieSBjbGlja2luZyB0aGUgdGVzdCBlcnJvciBidXR0b25cbiAgICAgIGNvbnN0IHRlc3RFcnJvckJ1dHRvbnMgPSBzY3JlZW4uZ2V0QWxsQnlMYWJlbFRleHQoJ1RyaWdnZXIgdGVzdCBlcnJvciBmb3IgYWNjZXNzaWJpbGl0eSB0ZXN0aW5nJyk7XG4gICAgICBjb25zdCB0ZXN0RXJyb3JCdXR0b24gPSB0ZXN0RXJyb3JCdXR0b25zWzBdOyAvLyBVc2UgdGhlIGZpcnN0IG9uZVxuICAgICAgYXdhaXQgdXNlckV2ZW50LmNsaWNrKHRlc3RFcnJvckJ1dHRvbik7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGVycm9yIHRvIGFwcGVhclxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudHMgPSBzY3JlZW4uZ2V0QWxsQnlSb2xlKCdhbGVydCcpO1xuICAgICAgICBleHBlY3QoZXJyb3JFbGVtZW50cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBlcnJvckVsZW1lbnRzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYWxlcnQnKTtcbiAgICAgIGVycm9yRWxlbWVudHMuZm9yRWFjaChlcnJvciA9PiB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9IYXZlQXR0cmlidXRlKCdyb2xlJywgJ2FsZXJ0Jyk7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcsIFQuYWNjZXNzaWJpbGl0eS5hbGVydCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcHJvdmlkZSBhY2Nlc3NpYmxlIGVycm9yIG1lc3NhZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgKTtcblxuICAgICAgLy8gVHJpZ2dlciBlcnJvciBtZXNzYWdlIGJ5IGNsaWNraW5nIHRoZSB0ZXN0IGVycm9yIGJ1dHRvblxuICAgICAgY29uc3QgdGVzdEVycm9yQnV0dG9ucyA9IHNjcmVlbi5nZXRBbGxCeUxhYmVsVGV4dCgnVHJpZ2dlciB0ZXN0IGVycm9yIGZvciBhY2Nlc3NpYmlsaXR5IHRlc3RpbmcnKTtcbiAgICAgIGNvbnN0IHRlc3RFcnJvckJ1dHRvbiA9IHRlc3RFcnJvckJ1dHRvbnNbMF07IC8vIFVzZSB0aGUgZmlyc3Qgb25lXG4gICAgICBhd2FpdCB1c2VyRXZlbnQuY2xpY2sodGVzdEVycm9yQnV0dG9uKTtcblxuICAgICAgLy8gV2FpdCBmb3IgZXJyb3IgdG8gYXBwZWFyXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoJ2FsZXJ0Jyk7XG4gICAgICAgIGV4cGVjdChlcnJvck1lc3NhZ2VzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBhY2Nlc3NpYmxlIGVycm9yIG1lc3NhZ2VzXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2VzID0gc2NyZWVuLmdldEFsbEJ5Um9sZSgnYWxlcnQnKTtcbiAgICAgIGVycm9yTWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcbiAgICAgICAgZXhwZWN0KG1lc3NhZ2UudGV4dENvbnRlbnQpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvSGF2ZUF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xuICAgICAgICBleHBlY3QobWVzc2FnZSkudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcsIFQuYWNjZXNzaWJpbGl0eS5hbGVydCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIGFuZCBBY2Nlc3NpYmlsaXR5JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbG9hZCBxdWlja2x5IGZvciBzY3JlZW4gcmVhZGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoJ21haW4nKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBjb25zdCBsb2FkVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBsb2FkIHdpdGhpbiAyIHNlY29uZHMgZm9yIGFjY2Vzc2liaWxpdHlcbiAgICAgIGV4cGVjdChsb2FkVGltZSkudG9CZUxlc3NUaGFuKDIwMDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBub3QgY2F1c2UgbGF5b3V0IHNoaWZ0cyB0aGF0IGFmZmVjdCBzY3JlZW4gcmVhZGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIGZvciBzdGFibGUgbGF5b3V0XG4gICAgICBjb25zdCBtYWluQ29udGVudCA9IHNjcmVlbi5nZXRCeVJvbGUoJ21haW4nKTtcbiAgICAgIGV4cGVjdChtYWluQ29udGVudCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChtYWluQ29udGVudCkudG9IYXZlQXR0cmlidXRlKCdkYXRhLXRlc3RpZCcsIFQuYWNjZXNzaWJpbGl0eS5tYWluKTtcbiAgICAgIFxuICAgICAgLy8gTGF5b3V0IHNob3VsZCBiZSBzdGFibGUgYWZ0ZXIgaW5pdGlhbCByZW5kZXJcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobWFpbkNvbnRlbnQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuXG5cbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZVJvdXRlciIsInB1c2giLCJmbiIsInJlcGxhY2UiLCJwcmVmZXRjaCIsInVzZVBhdGhuYW1lIiwidXNlU2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwibW9ja0ZlZWRzIiwiaWQiLCJ0aXRsZSIsImNvbnRlbnQiLCJzdW1tYXJ5IiwiYXV0aG9yIiwibmFtZSIsImF2YXRhciIsInZlcmlmaWVkIiwiY2F0ZWdvcnkiLCJ0YWdzIiwidHlwZSIsInNvdXJjZSIsInVybCIsImxvZ28iLCJwdWJsaXNoZWRBdCIsInVwZGF0ZWRBdCIsImltYWdlVXJsIiwiZW5nYWdlbWVudCIsImxpa2VzIiwiY29tbWVudHMiLCJzaGFyZXMiLCJib29rbWFya3MiLCJpc0xpa2VkIiwiaXNCb29rbWFya2VkIiwiaXNSZWFkIiwiaXNWZXJpZmllZCIsInByaW9yaXR5IiwicmVsZXZhbmNlU2NvcmUiLCJ1c2VGZWVkcyIsInVzZUZlZWRzU3RvcmUiLCJzZWxlY3RvciIsInN0YXRlIiwiZmVlZHMiLCJpc0xvYWRpbmciLCJlcnJvciIsImxvYWRGZWVkcyIsInJlZnJlc2hGZWVkcyIsImxvYWRNb3JlRmVlZHMiLCJzZXRGaWx0ZXJzIiwidXNlRmVlZHNMb2FkaW5nIiwidXNlRmVlZHNFcnJvciIsInVzZUZlZWRQcmVmZXJlbmNlcyIsImNhdGVnb3JpZXMiLCJzb3VyY2VzIiwidXNlRmVlZEZpbHRlcnMiLCJkYXRlUmFuZ2UiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInZhbHVlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJ3cml0YWJsZSIsIm9uTGluZSIsImdsb2JhbCIsImZldGNoIiwibW9ja0ltcGxlbWVudGF0aW9uIiwib3B0aW9ucyIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJzdGF0dXMiLCJqc29uIiwidGV4dCIsImhlYWRlcnMiLCJNYXAiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJyZW5kZXIiLCJCcm93c2VyUm91dGVyIiwiVW5pZmllZEZlZWQiLCJtYWluSGVhZGluZyIsInNjcmVlbiIsImdldEJ5Um9sZSIsImxldmVsIiwiZXhwZWN0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJ0b0hhdmVUZXh0Q29udGVudCIsInRvSGF2ZUF0dHJpYnV0ZSIsIlQiLCJzZWN0aW9uSGVhZGluZ3MiLCJnZXRBbGxCeVJvbGUiLCJsZW5ndGgiLCJ0b0JlR3JlYXRlclRoYW4iLCJmb3JFYWNoIiwiaGVhZGluZyIsImFjY2Vzc2liaWxpdHkiLCJzZWN0aW9uSGVhZGluZyIsIm1haW4iLCJuYXYiLCJuYXZpZ2F0aW9uIiwiY29tcGxlbWVudGFyeSIsImNvbXAiLCJzZWFyY2hJbnB1dCIsImZpbHRlckJ1dHRvbiIsImdldEJ5VGVzdElkIiwiYnV0dG9ucyIsImJ1dHRvbiIsInRleHRDb250ZW50IiwiZ2V0QXR0cmlidXRlIiwidG9CZVRydXRoeSIsImltYWdlcyIsImltZyIsIm5vdCIsInRvQmUiLCJmZWVkSXRlbXMiLCJpdGVtIiwiYXJ0aWNsZSIsImxpdmVSZWdpb25zIiwiZ2V0QWxsQnlUZXN0SWQiLCJsaXZlUmVnaW9uIiwicmVnaW9uIiwiaW50ZXJhY3RpdmVFbGVtZW50cyIsImhpZGRlbiIsImNvbmNhdCIsImVsZW1lbnQiLCJmb2N1cyIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsImZpcnN0Rm9jdXNhYmxlIiwiZmlyZUV2ZW50Iiwia2V5RG93biIsImtleSIsImhhbWJ1cmdlck1lbnUiLCJ0ZXh0RWxlbWVudHMiLCJnZXRBbGxCeVRleHQiLCJzdGF0dXNJbmRpY2F0b3JzIiwiaW5kaWNhdG9yIiwidGVzdElkIiwidG9Db250YWluIiwibmF2aWdhdGlvbkJ1dHRvbnMiLCJtb2RhbHMiLCJxdWVyeUFsbEJ5Um9sZSIsIm1vZGFsIiwiZGlhbG9nIiwiY29uZmlndXJhYmxlIiwidG91Y2hUYXJnZXRzIiwidGFyZ2V0IiwiaGFzTWluU2l6ZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwic3R5bGUiLCJtaW5XaWR0aCIsIm1pbkhlaWdodCIsImV4cGFuZGFibGVFbGVtZW50cyIsInRlc3RFcnJvckJ1dHRvbnMiLCJnZXRBbGxCeUxhYmVsVGV4dCIsInRlc3RFcnJvckJ1dHRvbiIsInVzZXJFdmVudCIsImNsaWNrIiwid2FpdEZvciIsImVycm9yRWxlbWVudHMiLCJhbGVydCIsImVycm9yTWVzc2FnZXMiLCJtZXNzYWdlIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJlbmRUaW1lIiwibG9hZFRpbWUiLCJ0b0Jl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