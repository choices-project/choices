{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/utils/supabase/client.ts"],"sourcesContent":["'use client'\nimport { createClient as createSupabaseClient } from '@supabase/supabase-js'\nimport type { SupabaseClient } from '@supabase/supabase-js'\n\n// Import the fully aligned database schema types from Supabase\nimport type { Database } from '../../types/database'\n\n// Re-export the Database type for use in other modules\nexport type { Database }\n\nlet client: SupabaseClient<Database> | undefined\n\nexport async function getSupabaseBrowserClient(): Promise<SupabaseClient<Database>> {\n  if (typeof window === 'undefined') {\n    throw new Error('getSupabaseBrowserClient can only be used in client-side code')\n  }\n  \n  if (!client) {\n    const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL']\n    const supabaseKey = process.env['NEXT_PUBLIC_SUPABASE_ANON_KEY']\n    \n    if (!supabaseUrl || !supabaseKey) {\n      throw new Error('Missing Supabase environment variables')\n    }\n    \n    // Use dynamic import to avoid SSR issues\n    const { createBrowserClient } = await import('@supabase/ssr')\n    client = createBrowserClient<Database>(\n      supabaseUrl,\n      supabaseKey,\n    )\n  }\n  return client\n}\n\n// Export types for use in other modules\nexport type DatabaseTypes = Database\nexport type UserProfile = Database['public']['Tables']['user_profiles']['Row']\nexport type Poll = Database['public']['Tables']['polls']['Row']\nexport type Vote = Database['public']['Tables']['votes']['Row']\n// Note: Other table types are not available in the real schema as those tables are empty\n\n// Create Supabase client\nexport const createClient = (): SupabaseClient<Database> => {\n  const supabaseUrl = process.env['NEXT_PUBLIC_SUPABASE_URL']!\n  const supabaseKey = process.env['NEXT_PUBLIC_SUPABASE_ANON_KEY']!\n  \n  return createSupabaseClient<Database>(supabaseUrl, supabaseKey)\n}\n\n// Alias for compatibility\nexport const getSupabaseClient = createClient\n"],"names":["createClient","getSupabaseBrowserClient","getSupabaseClient","client","window","Error","supabaseUrl","process","env","supabaseKey","createBrowserClient","createSupabaseClient"],"mappings":"AAAA;;;;;;;;;;;;QA2CaA;eAAAA;;QA/BSC;eAAAA;;QAuCTC;eAAAA;;;4BAlDwC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASrD,IAAIC;AAEG,eAAeF;IACpB,IAAI,OAAOG,WAAW,aAAa;QACjC,MAAM,IAAIC,MAAM;IAClB;IAEA,IAAI,CAACF,QAAQ;QACX,MAAMG,cAAcC,QAAQC,GAAG,CAAC,2BAA2B;QAC3D,MAAMC,cAAcF,QAAQC,GAAG,CAAC,gCAAgC;QAEhE,IAAI,CAACF,eAAe,CAACG,aAAa;YAChC,MAAM,IAAIJ,MAAM;QAClB;QAEA,yCAAyC;QACzC,MAAM,EAAEK,mBAAmB,EAAE,GAAG,MAAM,mEAAA,QAAO;QAC7CP,SAASO,oBACPJ,aACAG;IAEJ;IACA,OAAON;AACT;AAUO,MAAMH,eAAe;IAC1B,MAAMM,cAAcC,QAAQC,GAAG,CAAC,2BAA2B;IAC3D,MAAMC,cAAcF,QAAQC,GAAG,CAAC,gCAAgC;IAEhE,OAAOG,IAAAA,wBAAoB,EAAWL,aAAaG;AACrD;AAGO,MAAMP,oBAAoBF"}