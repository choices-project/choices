1346e353e535f31532f498cf3467b738
/**
 * UnifiedFeed Component Tests
 * 
 * Comprehensive testing for the UnifiedFeed component using the Real Component Testing Framework
 * Tests real functionality with real dependencies to catch real issues
 * 
 * Created: January 19, 2025
 * Status: âœ… PRODUCTION READY
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _globals = require("@jest/globals");
const _realComponentTesting = require("../../../../../lib/testing/realComponentTesting");
const _UnifiedFeed = require("../../../../../features/feeds/components/UnifiedFeed");
const _feedsStore = require("../../../../../lib/stores/feedsStore");
const _useHashtags = require("../../../../../features/hashtags/hooks/useHashtags");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock the stores
_globals.jest.mock('@/lib/stores/feedsStore');
_globals.jest.mock('@/features/hashtags/hooks/useHashtags');
const mockUseFeeds = _feedsStore.useFeeds;
const mockUseHashtags = _useHashtags.useHashtags;
// Mock data
const mockFeedData = [
    {
        id: '1',
        type: 'poll',
        title: 'Test Poll',
        description: 'This is a test poll',
        hashtags: [
            'politics',
            'election'
        ],
        created_at: '2025-01-19T10:00:00Z',
        author: 'Test User',
        engagement: {
            likes: 10,
            shares: 5,
            comments: 3
        }
    },
    {
        id: '2',
        type: 'post',
        title: 'Test Post',
        description: 'This is a test post',
        hashtags: [
            'news',
            'update'
        ],
        created_at: '2025-01-19T09:00:00Z',
        author: 'Test User 2',
        engagement: {
            likes: 15,
            shares: 8,
            comments: 12
        }
    }
];
const mockHashtagData = [
    {
        id: '1',
        name: 'politics',
        display_name: 'Politics',
        usage_count: 100,
        follower_count: 50,
        is_trending: true,
        trend_score: 0.8,
        created_at: '2025-01-19T10:00:00Z',
        updated_at: '2025-01-19T10:00:00Z',
        is_verified: false,
        is_featured: false
    },
    {
        id: '2',
        name: 'election',
        display_name: 'Election',
        usage_count: 75,
        follower_count: 30,
        is_trending: false,
        trend_score: 0.3,
        created_at: '2025-01-19T09:00:00Z',
        updated_at: '2025-01-19T09:00:00Z',
        is_verified: false,
        is_featured: false
    }
];
describe('UnifiedFeed Component - Real Component Testing', ()=>{
    let realComponentTester;
    beforeEach(()=>{
        // Initialize real component tester
        realComponentTester = new _realComponentTesting.RealComponentTester({
            useRealDependencies: true,
            testRealInteractions: true,
            testRealBusinessLogic: true,
            testRealErrorHandling: true,
            testRealAccessibility: true,
            testRealPerformance: true
        });
        // Mock store implementations
        mockUseFeeds.mockReturnValue({
            feeds: mockFeedData,
            loading: false,
            error: null,
            refreshFeeds: _globals.jest.fn(),
            likeFeed: _globals.jest.fn(),
            shareFeed: _globals.jest.fn(),
            commentFeed: _globals.jest.fn(),
            bookmarkFeed: _globals.jest.fn()
        });
        mockUseHashtags.mockReturnValue({
            hashtags: mockHashtagData,
            loading: false,
            error: null,
            searchHashtags: _globals.jest.fn(),
            followHashtag: _globals.jest.fn(),
            unfollowHashtag: _globals.jest.fn(),
            getTrendingHashtags: _globals.jest.fn()
        });
    });
    afterEach(()=>{
        _globals.jest.clearAllMocks();
    });
    describe('Real Component Rendering', ()=>{
        it('should render UnifiedFeed with all essential elements', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealRendering(component, [
                'Unified Feed',
                'Personalized content with hashtag-polls integration',
                'Online',
                'Dark mode toggle',
                'Advanced filters toggle',
                'Refresh button'
            ]);
            expect(result.passed).toBe(true);
            expect(result.errors).toHaveLength(0);
        });
        it('should render feed items correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealRendering(component, [
                'Test Poll',
                'This is a test poll',
                'politics',
                'election',
                'Test Post',
                'This is a test post',
                'news',
                'update'
            ]);
            expect(result.passed).toBe(true);
        });
        it('should render within acceptable performance time', async ()=>{
            const startTime = performance.now();
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            (0, _react1.render)(component);
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            // Test that real component renders within acceptable time
            expect(renderTime).toBeLessThan(2000); // 2s threshold
        });
    });
    describe('Real Component Interactions', ()=>{
        it('should handle dark mode toggle correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealInteractions(component, [
                {
                    action: async ()=>{
                        const darkModeButton = _react1.screen.getByLabelText(/switch to dark mode/i);
                        _react1.fireEvent.click(darkModeButton);
                    },
                    description: 'Toggle dark mode',
                    expectedResult: async ()=>{
                        await (0, _react1.waitFor)(()=>{
                            expect(_react1.screen.getByLabelText(/switch to light mode/i)).toBeInTheDocument();
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should handle advanced filters toggle correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealInteractions(component, [
                {
                    action: async ()=>{
                        const filtersButton = _react1.screen.getByLabelText(/toggle advanced filters/i);
                        _react1.fireEvent.click(filtersButton);
                    },
                    description: 'Toggle advanced filters',
                    expectedResult: async ()=>{
                        await (0, _react1.waitFor)(()=>{
                            expect(_react1.screen.getByText(/advanced filters/i)).toBeInTheDocument();
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should handle feed item interactions correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealInteractions(component, [
                {
                    action: async ()=>{
                        const likeButton = _react1.screen.getByLabelText(/like test poll/i);
                        _react1.fireEvent.click(likeButton);
                    },
                    description: 'Like a feed item',
                    expectedResult: async ()=>{
                        await (0, _react1.waitFor)(()=>{
                            expect(mockUseFeeds().likeFeed).toHaveBeenCalledWith('1');
                        });
                    }
                },
                {
                    action: async ()=>{
                        const shareButton = _react1.screen.getByLabelText(/share test poll/i);
                        _react1.fireEvent.click(shareButton);
                    },
                    description: 'Share a feed item',
                    expectedResult: async ()=>{
                        await (0, _react1.waitFor)(()=>{
                            expect(mockUseFeeds().shareFeed).toHaveBeenCalledWith('1');
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should handle hashtag interactions correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealInteractions(component, [
                {
                    action: async ()=>{
                        const hashtagButton = _react1.screen.getByText('politics');
                        _react1.fireEvent.click(hashtagButton);
                    },
                    description: 'Click on hashtag',
                    expectedResult: async ()=>{
                        await (0, _react1.waitFor)(()=>{
                            expect(mockUseHashtags().followHashtag).toHaveBeenCalledWith('1');
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
    });
    describe('Real Component State Management', ()=>{
        it('should manage loading states correctly', async ()=>{
            mockUseFeeds.mockReturnValue({
                ...mockUseFeeds(),
                loading: true
            });
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealStateManagement(component, [
                {
                    description: 'Show loading state',
                    action: async ()=>{
                        (0, _react1.render)(component);
                    },
                    expectedState: async ()=>{
                        expect(_react1.screen.getByText(/loading/i)).toBeInTheDocument();
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should manage error states correctly', async ()=>{
            mockUseFeeds.mockReturnValue({
                ...mockUseFeeds(),
                error: 'Failed to load feeds'
            });
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealStateManagement(component, [
                {
                    description: 'Show error state',
                    action: async ()=>{
                        (0, _react1.render)(component);
                    },
                    expectedState: async ()=>{
                        expect(_react1.screen.getByText(/failed to load feeds/i)).toBeInTheDocument();
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should manage personalization score correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealStateManagement(component, [
                {
                    description: 'Update personalization score',
                    action: async ()=>{
                        const likeButton = _react1.screen.getByLabelText(/like test poll/i);
                        _react1.fireEvent.click(likeButton);
                    },
                    expectedState: async ()=>{
                        await (0, _react1.waitFor)(()=>{
                            expect(_react1.screen.getByText(/personalized/i)).toBeInTheDocument();
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
    });
    describe('Real Component Accessibility', ()=>{
        it('should have proper ARIA labels and roles', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealAccessibility(component, [
                {
                    description: 'Check main feed role',
                    test: async ()=>{
                        const feed = _react1.screen.getByRole('main');
                        expect(feed).toHaveAttribute('aria-label', 'Unified Feed');
                    }
                },
                {
                    description: 'Check button accessibility',
                    test: async ()=>{
                        const darkModeButton = _react1.screen.getByLabelText(/switch to dark mode/i);
                        expect(darkModeButton).toHaveAttribute('aria-label');
                    }
                },
                {
                    description: 'Check feed item accessibility',
                    test: async ()=>{
                        const likeButton = _react1.screen.getByLabelText(/like test poll/i);
                        expect(likeButton).toHaveAttribute('aria-label');
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should support keyboard navigation', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealAccessibility(component, [
                {
                    description: 'Keyboard navigation works',
                    test: async ()=>{
                        const darkModeButton = _react1.screen.getByLabelText(/switch to dark mode/i);
                        darkModeButton.focus();
                        expect(document.activeElement).toBe(darkModeButton);
                        _react1.fireEvent.keyDown(darkModeButton, {
                            key: 'Enter'
                        });
                    // Should toggle dark mode
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should announce changes to screen readers', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealAccessibility(component, [
                {
                    description: 'Screen reader announcements',
                    test: async ()=>{
                        const refreshButton = _react1.screen.getByLabelText(/refresh feed/i);
                        _react1.fireEvent.click(refreshButton);
                        // Should have aria-live region for announcements
                        const liveRegion = _react1.screen.getByRole('status');
                        expect(liveRegion).toBeInTheDocument();
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
    });
    describe('Real Component Performance', ()=>{
        it('should handle large datasets efficiently', async ()=>{
            const largeFeedData = Array.from({
                length: 100
            }, (_, i)=>({
                    id: `${i}`,
                    type: 'poll',
                    title: `Test Poll ${i}`,
                    description: `This is test poll ${i}`,
                    hashtags: [
                        'politics',
                        'election'
                    ],
                    created_at: '2025-01-19T10:00:00Z',
                    author: `Test User ${i}`,
                    engagement: {
                        likes: Math.floor(Math.random() * 100),
                        shares: Math.floor(Math.random() * 50),
                        comments: Math.floor(Math.random() * 30)
                    }
                }));
            mockUseFeeds.mockReturnValue({
                ...mockUseFeeds(),
                feeds: largeFeedData
            });
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealPerformance(component, [
                {
                    description: 'Render large dataset efficiently',
                    test: async ()=>{
                        const startTime = performance.now();
                        (0, _react1.render)(component);
                        const endTime = performance.now();
                        const renderTime = endTime - startTime;
                        expect(renderTime).toBeLessThan(5000); // 5s threshold for 100 items
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should handle rapid interactions without performance degradation', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealPerformance(component, [
                {
                    description: 'Rapid interactions performance',
                    test: async ()=>{
                        const startTime = performance.now();
                        // Simulate rapid interactions
                        for(let i = 0; i < 10; i++){
                            const likeButton = _react1.screen.getByLabelText(/like test poll/i);
                            _react1.fireEvent.click(likeButton);
                            await (0, _react1.act)(async ()=>{
                                await new Promise((resolve)=>setTimeout(resolve, 10));
                            });
                        }
                        const endTime = performance.now();
                        const totalTime = endTime - startTime;
                        expect(totalTime).toBeLessThan(1000); // 1s threshold for 10 interactions
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
    });
    describe('Real Component Error Handling', ()=>{
        it('should handle network errors gracefully', async ()=>{
            mockUseFeeds.mockReturnValue({
                ...mockUseFeeds(),
                error: 'Network error',
                refreshFeeds: _globals.jest.fn().mockRejectedValue(new Error('Network error'))
            });
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealErrorHandling(component, [
                {
                    description: 'Handle network errors',
                    test: async ()=>{
                        expect(_react1.screen.getByText(/network error/i)).toBeInTheDocument();
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should handle missing data gracefully', async ()=>{
            mockUseFeeds.mockReturnValue({
                ...mockUseFeeds(),
                feeds: []
            });
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealErrorHandling(component, [
                {
                    description: 'Handle empty feeds',
                    test: async ()=>{
                        expect(_react1.screen.getByText(/no feeds available/i)).toBeInTheDocument();
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should recover from errors when retrying', async ()=>{
            const mockRefreshFeeds = _globals.jest.fn().mockRejectedValueOnce(new Error('Network error')).mockResolvedValueOnce(undefined);
            mockUseFeeds.mockReturnValue({
                ...mockUseFeeds(),
                error: 'Network error',
                refreshFeeds: mockRefreshFeeds
            });
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealErrorHandling(component, [
                {
                    description: 'Retry after error',
                    test: async ()=>{
                        const retryButton = _react1.screen.getByLabelText(/retry/i);
                        _react1.fireEvent.click(retryButton);
                        await (0, _react1.waitFor)(()=>{
                            expect(mockRefreshFeeds).toHaveBeenCalledTimes(2);
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
    });
    describe('Real Component Business Logic', ()=>{
        it('should calculate personalization score correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealBusinessLogic(component, [
                {
                    description: 'Personalization score calculation',
                    test: async ()=>{
                        // Simulate user interactions that should increase personalization score
                        const likeButton = _react1.screen.getByLabelText(/like test poll/i);
                        _react1.fireEvent.click(likeButton);
                        await (0, _react1.waitFor)(()=>{
                            expect(_react1.screen.getByText(/personalized/i)).toBeInTheDocument();
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should filter content based on hashtags correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealBusinessLogic(component, [
                {
                    description: 'Hashtag filtering',
                    test: async ()=>{
                        const hashtagFilter = _react1.screen.getByText('politics');
                        _react1.fireEvent.click(hashtagFilter);
                        await (0, _react1.waitFor)(()=>{
                            // Should show only items with politics hashtag
                            expect(_react1.screen.getByText('Test Poll')).toBeInTheDocument();
                            expect(_react1.screen.queryByText('Test Post')).not.toBeInTheDocument();
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
        it('should handle infinite scroll correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.UnifiedFeed, {});
            const result = await realComponentTester.testRealBusinessLogic(component, [
                {
                    description: 'Infinite scroll functionality',
                    test: async ()=>{
                        // Simulate scrolling to bottom
                        const feed = _react1.screen.getByRole('main');
                        _react1.fireEvent.scroll(feed, {
                            target: {
                                scrollTop: 1000
                            }
                        });
                        await (0, _react1.waitFor)(()=>{
                            // Should trigger load more
                            expect(mockUseFeeds().refreshFeeds).toHaveBeenCalled();
                        });
                    }
                }
            ]);
            expect(result.passed).toBe(true);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvZmVhdHVyZXMvZmVlZHMvVW5pZmllZEZlZWQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmlmaWVkRmVlZCBDb21wb25lbnQgVGVzdHNcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0aW5nIGZvciB0aGUgVW5pZmllZEZlZWQgY29tcG9uZW50IHVzaW5nIHRoZSBSZWFsIENvbXBvbmVudCBUZXN0aW5nIEZyYW1ld29ya1xuICogVGVzdHMgcmVhbCBmdW5jdGlvbmFsaXR5IHdpdGggcmVhbCBkZXBlbmRlbmNpZXMgdG8gY2F0Y2ggcmVhbCBpc3N1ZXNcbiAqIFxuICogQ3JlYXRlZDogSmFudWFyeSAxOSwgMjAyNVxuICogU3RhdHVzOiDinIUgUFJPRFVDVElPTiBSRUFEWVxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IFJlYWxDb21wb25lbnRUZXN0ZXIsIHJlYWxDb21wb25lbnRIZWxwZXJzIH0gZnJvbSAnQC9saWIvdGVzdGluZy9yZWFsQ29tcG9uZW50VGVzdGluZyc7XG5pbXBvcnQgeyBVbmlmaWVkRmVlZCB9IGZyb20gJ0AvZmVhdHVyZXMvZmVlZHMvY29tcG9uZW50cy9VbmlmaWVkRmVlZCc7XG5pbXBvcnQgeyB1c2VGZWVkcyB9IGZyb20gJ0AvbGliL3N0b3Jlcy9mZWVkc1N0b3JlJztcbmltcG9ydCB7IHVzZUhhc2h0YWdzIH0gZnJvbSAnQC9mZWF0dXJlcy9oYXNodGFncy9ob29rcy91c2VIYXNodGFncyc7XG5cbi8vIE1vY2sgdGhlIHN0b3Jlc1xuamVzdC5tb2NrKCdAL2xpYi9zdG9yZXMvZmVlZHNTdG9yZScpO1xuamVzdC5tb2NrKCdAL2ZlYXR1cmVzL2hhc2h0YWdzL2hvb2tzL3VzZUhhc2h0YWdzJyk7XG5cbmNvbnN0IG1vY2tVc2VGZWVkcyA9IHVzZUZlZWRzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZUZlZWRzPjtcbmNvbnN0IG1vY2tVc2VIYXNodGFncyA9IHVzZUhhc2h0YWdzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZUhhc2h0YWdzPjtcblxuLy8gTW9jayBkYXRhXG5jb25zdCBtb2NrRmVlZERhdGEgPSBbXG4gIHtcbiAgICBpZDogJzEnLFxuICAgIHR5cGU6ICdwb2xsJyxcbiAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgZGVzY3JpcHRpb246ICdUaGlzIGlzIGEgdGVzdCBwb2xsJyxcbiAgICBoYXNodGFnczogWydwb2xpdGljcycsICdlbGVjdGlvbiddLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTE5VDEwOjAwOjAwWicsXG4gICAgYXV0aG9yOiAnVGVzdCBVc2VyJyxcbiAgICBlbmdhZ2VtZW50OiB7XG4gICAgICBsaWtlczogMTAsXG4gICAgICBzaGFyZXM6IDUsXG4gICAgICBjb21tZW50czogM1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGlkOiAnMicsXG4gICAgdHlwZTogJ3Bvc3QnLFxuICAgIHRpdGxlOiAnVGVzdCBQb3N0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1RoaXMgaXMgYSB0ZXN0IHBvc3QnLFxuICAgIGhhc2h0YWdzOiBbJ25ld3MnLCAndXBkYXRlJ10sXG4gICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMTlUMDk6MDA6MDBaJyxcbiAgICBhdXRob3I6ICdUZXN0IFVzZXIgMicsXG4gICAgZW5nYWdlbWVudDoge1xuICAgICAgbGlrZXM6IDE1LFxuICAgICAgc2hhcmVzOiA4LFxuICAgICAgY29tbWVudHM6IDEyXG4gICAgfVxuICB9XG5dO1xuXG5jb25zdCBtb2NrSGFzaHRhZ0RhdGEgPSBbXG4gIHtcbiAgICBpZDogJzEnLFxuICAgIG5hbWU6ICdwb2xpdGljcycsXG4gICAgZGlzcGxheV9uYW1lOiAnUG9saXRpY3MnLFxuICAgIHVzYWdlX2NvdW50OiAxMDAsXG4gICAgZm9sbG93ZXJfY291bnQ6IDUwLFxuICAgIGlzX3RyZW5kaW5nOiB0cnVlLFxuICAgIHRyZW5kX3Njb3JlOiAwLjgsXG4gICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMTlUMTA6MDA6MDBaJyxcbiAgICB1cGRhdGVkX2F0OiAnMjAyNS0wMS0xOVQxMDowMDowMFonLFxuICAgIGlzX3ZlcmlmaWVkOiBmYWxzZSxcbiAgICBpc19mZWF0dXJlZDogZmFsc2VcbiAgfSxcbiAge1xuICAgIGlkOiAnMicsXG4gICAgbmFtZTogJ2VsZWN0aW9uJyxcbiAgICBkaXNwbGF5X25hbWU6ICdFbGVjdGlvbicsXG4gICAgdXNhZ2VfY291bnQ6IDc1LFxuICAgIGZvbGxvd2VyX2NvdW50OiAzMCxcbiAgICBpc190cmVuZGluZzogZmFsc2UsXG4gICAgdHJlbmRfc2NvcmU6IDAuMyxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0xOVQwOTowMDowMFonLFxuICAgIHVwZGF0ZWRfYXQ6ICcyMDI1LTAxLTE5VDA5OjAwOjAwWicsXG4gICAgaXNfdmVyaWZpZWQ6IGZhbHNlLFxuICAgIGlzX2ZlYXR1cmVkOiBmYWxzZVxuICB9XG5dO1xuXG5kZXNjcmliZSgnVW5pZmllZEZlZWQgQ29tcG9uZW50IC0gUmVhbCBDb21wb25lbnQgVGVzdGluZycsICgpID0+IHtcbiAgbGV0IHJlYWxDb21wb25lbnRUZXN0ZXI6IFJlYWxDb21wb25lbnRUZXN0ZXI7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8gSW5pdGlhbGl6ZSByZWFsIGNvbXBvbmVudCB0ZXN0ZXJcbiAgICByZWFsQ29tcG9uZW50VGVzdGVyID0gbmV3IFJlYWxDb21wb25lbnRUZXN0ZXIoe1xuICAgICAgdXNlUmVhbERlcGVuZGVuY2llczogdHJ1ZSxcbiAgICAgIHRlc3RSZWFsSW50ZXJhY3Rpb25zOiB0cnVlLFxuICAgICAgdGVzdFJlYWxCdXNpbmVzc0xvZ2ljOiB0cnVlLFxuICAgICAgdGVzdFJlYWxFcnJvckhhbmRsaW5nOiB0cnVlLFxuICAgICAgdGVzdFJlYWxBY2Nlc3NpYmlsaXR5OiB0cnVlLFxuICAgICAgdGVzdFJlYWxQZXJmb3JtYW5jZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgLy8gTW9jayBzdG9yZSBpbXBsZW1lbnRhdGlvbnNcbiAgICBtb2NrVXNlRmVlZHMubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGZlZWRzOiBtb2NrRmVlZERhdGEsXG4gICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgcmVmcmVzaEZlZWRzOiBqZXN0LmZuKCksXG4gICAgICBsaWtlRmVlZDogamVzdC5mbigpLFxuICAgICAgc2hhcmVGZWVkOiBqZXN0LmZuKCksXG4gICAgICBjb21tZW50RmVlZDogamVzdC5mbigpLFxuICAgICAgYm9va21hcmtGZWVkOiBqZXN0LmZuKClcbiAgICB9KTtcblxuICAgIG1vY2tVc2VIYXNodGFncy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgaGFzaHRhZ3M6IG1vY2tIYXNodGFnRGF0YSxcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6IG51bGwsXG4gICAgICBzZWFyY2hIYXNodGFnczogamVzdC5mbigpLFxuICAgICAgZm9sbG93SGFzaHRhZzogamVzdC5mbigpLFxuICAgICAgdW5mb2xsb3dIYXNodGFnOiBqZXN0LmZuKCksXG4gICAgICBnZXRUcmVuZGluZ0hhc2h0YWdzOiBqZXN0LmZuKClcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IFJlbmRlcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBVbmlmaWVkRmVlZCB3aXRoIGFsbCBlc3NlbnRpYWwgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxSZW5kZXJpbmcoY29tcG9uZW50LCBbXG4gICAgICAgICdVbmlmaWVkIEZlZWQnLFxuICAgICAgICAnUGVyc29uYWxpemVkIGNvbnRlbnQgd2l0aCBoYXNodGFnLXBvbGxzIGludGVncmF0aW9uJyxcbiAgICAgICAgJ09ubGluZScsXG4gICAgICAgICdEYXJrIG1vZGUgdG9nZ2xlJyxcbiAgICAgICAgJ0FkdmFuY2VkIGZpbHRlcnMgdG9nZ2xlJyxcbiAgICAgICAgJ1JlZnJlc2ggYnV0dG9uJ1xuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucGFzc2VkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcnMpLnRvSGF2ZUxlbmd0aCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIGZlZWQgaXRlbXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFsQ29tcG9uZW50VGVzdGVyLnRlc3RSZWFsUmVuZGVyaW5nKGNvbXBvbmVudCwgW1xuICAgICAgICAnVGVzdCBQb2xsJyxcbiAgICAgICAgJ1RoaXMgaXMgYSB0ZXN0IHBvbGwnLFxuICAgICAgICAncG9saXRpY3MnLFxuICAgICAgICAnZWxlY3Rpb24nLFxuICAgICAgICAnVGVzdCBQb3N0JyxcbiAgICAgICAgJ1RoaXMgaXMgYSB0ZXN0IHBvc3QnLFxuICAgICAgICAnbmV3cycsXG4gICAgICAgICd1cGRhdGUnXG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciB3aXRoaW4gYWNjZXB0YWJsZSBwZXJmb3JtYW5jZSB0aW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIHJlbmRlcihjb21wb25lbnQpO1xuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBjb25zdCByZW5kZXJUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCB0aGF0IHJlYWwgY29tcG9uZW50IHJlbmRlcnMgd2l0aGluIGFjY2VwdGFibGUgdGltZVxuICAgICAgZXhwZWN0KHJlbmRlclRpbWUpLnRvQmVMZXNzVGhhbigyMDAwKTsgLy8gMnMgdGhyZXNob2xkXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIENvbXBvbmVudCBJbnRlcmFjdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZGFyayBtb2RlIHRvZ2dsZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxJbnRlcmFjdGlvbnMoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhcmtNb2RlQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zd2l0Y2ggdG8gZGFyayBtb2RlL2kpO1xuICAgICAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGRhcmtNb2RlQnV0dG9uKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVG9nZ2xlIGRhcmsgbW9kZScsXG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQ6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zd2l0Y2ggdG8gbGlnaHQgbW9kZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucGFzc2VkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYWR2YW5jZWQgZmlsdGVycyB0b2dnbGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFsQ29tcG9uZW50VGVzdGVyLnRlc3RSZWFsSW50ZXJhY3Rpb25zKGNvbXBvbmVudCwgW1xuICAgICAgICB7XG4gICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJzQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC90b2dnbGUgYWR2YW5jZWQgZmlsdGVycy9pKTtcbiAgICAgICAgICAgIGZpcmVFdmVudC5jbGljayhmaWx0ZXJzQnV0dG9uKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVG9nZ2xlIGFkdmFuY2VkIGZpbHRlcnMnLFxuICAgICAgICAgIGV4cGVjdGVkUmVzdWx0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2FkdmFuY2VkIGZpbHRlcnMvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGZlZWQgaXRlbSBpbnRlcmFjdGlvbnMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFsQ29tcG9uZW50VGVzdGVyLnRlc3RSZWFsSW50ZXJhY3Rpb25zKGNvbXBvbmVudCwgW1xuICAgICAgICB7XG4gICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9saWtlIHRlc3QgcG9sbC9pKTtcbiAgICAgICAgICAgIGZpcmVFdmVudC5jbGljayhsaWtlQnV0dG9uKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTGlrZSBhIGZlZWQgaXRlbScsXG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQ6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBleHBlY3QobW9ja1VzZUZlZWRzKCkubGlrZUZlZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcxJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zaGFyZSB0ZXN0IHBvbGwvaSk7XG4gICAgICAgICAgICBmaXJlRXZlbnQuY2xpY2soc2hhcmVCdXR0b24pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdTaGFyZSBhIGZlZWQgaXRlbScsXG4gICAgICAgICAgZXhwZWN0ZWRSZXN1bHQ6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBleHBlY3QobW9ja1VzZUZlZWRzKCkuc2hhcmVGZWVkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnMScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBoYXNodGFnIGludGVyYWN0aW9ucyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxJbnRlcmFjdGlvbnMoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhc2h0YWdCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdwb2xpdGljcycpO1xuICAgICAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGhhc2h0YWdCdXR0b24pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDbGljayBvbiBoYXNodGFnJyxcbiAgICAgICAgICBleHBlY3RlZFJlc3VsdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICAgIGV4cGVjdChtb2NrVXNlSGFzaHRhZ3MoKS5mb2xsb3dIYXNodGFnKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnMScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIENvbXBvbmVudCBTdGF0ZSBNYW5hZ2VtZW50JywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWFuYWdlIGxvYWRpbmcgc3RhdGVzIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tVc2VGZWVkcy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAuLi5tb2NrVXNlRmVlZHMoKSxcbiAgICAgICAgbG9hZGluZzogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbFN0YXRlTWFuYWdlbWVudChjb21wb25lbnQsIFtcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdyBsb2FkaW5nIHN0YXRlJyxcbiAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlcihjb21wb25lbnQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXhwZWN0ZWRTdGF0ZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2xvYWRpbmcvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1hbmFnZSBlcnJvciBzdGF0ZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VzZUZlZWRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLm1vY2tVc2VGZWVkcygpLFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBsb2FkIGZlZWRzJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbFN0YXRlTWFuYWdlbWVudChjb21wb25lbnQsIFtcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnU2hvdyBlcnJvciBzdGF0ZScsXG4gICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXIoY29tcG9uZW50KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGV4cGVjdGVkU3RhdGU6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9mYWlsZWQgdG8gbG9hZCBmZWVkcy9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgbWFuYWdlIHBlcnNvbmFsaXphdGlvbiBzY29yZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxTdGF0ZU1hbmFnZW1lbnQoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1VwZGF0ZSBwZXJzb25hbGl6YXRpb24gc2NvcmUnLFxuICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbGlrZSB0ZXN0IHBvbGwvaSk7XG4gICAgICAgICAgICBmaXJlRXZlbnQuY2xpY2sobGlrZUJ1dHRvbik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBleHBlY3RlZFN0YXRlOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3BlcnNvbmFsaXplZC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucGFzc2VkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUmVhbCBDb21wb25lbnQgQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgcHJvcGVyIEFSSUEgbGFiZWxzIGFuZCByb2xlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbEFjY2Vzc2liaWxpdHkoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoZWNrIG1haW4gZmVlZCByb2xlJyxcbiAgICAgICAgICB0ZXN0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmZWVkID0gc2NyZWVuLmdldEJ5Um9sZSgnbWFpbicpO1xuICAgICAgICAgICAgZXhwZWN0KGZlZWQpLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdVbmlmaWVkIEZlZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NoZWNrIGJ1dHRvbiBhY2Nlc3NpYmlsaXR5JyxcbiAgICAgICAgICB0ZXN0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXJrTW9kZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvc3dpdGNoIHRvIGRhcmsgbW9kZS9pKTtcbiAgICAgICAgICAgIGV4cGVjdChkYXJrTW9kZUJ1dHRvbikudG9IYXZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDaGVjayBmZWVkIGl0ZW0gYWNjZXNzaWJpbGl0eScsXG4gICAgICAgICAgdGVzdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvbGlrZSB0ZXN0IHBvbGwvaSk7XG4gICAgICAgICAgICBleHBlY3QobGlrZUJ1dHRvbikudG9IYXZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQga2V5Ym9hcmQgbmF2aWdhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbEFjY2Vzc2liaWxpdHkoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0tleWJvYXJkIG5hdmlnYXRpb24gd29ya3MnLFxuICAgICAgICAgIHRlc3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRhcmtNb2RlQnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zd2l0Y2ggdG8gZGFyayBtb2RlL2kpO1xuICAgICAgICAgICAgZGFya01vZGVCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgIGV4cGVjdChkb2N1bWVudC5hY3RpdmVFbGVtZW50KS50b0JlKGRhcmtNb2RlQnV0dG9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmlyZUV2ZW50LmtleURvd24oZGFya01vZGVCdXR0b24sIHsga2V5OiAnRW50ZXInIH0pO1xuICAgICAgICAgICAgLy8gU2hvdWxkIHRvZ2dsZSBkYXJrIG1vZGVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYW5ub3VuY2UgY2hhbmdlcyB0byBzY3JlZW4gcmVhZGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbEFjY2Vzc2liaWxpdHkoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NjcmVlbiByZWFkZXIgYW5ub3VuY2VtZW50cycsXG4gICAgICAgICAgdGVzdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvcmVmcmVzaCBmZWVkL2kpO1xuICAgICAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHJlZnJlc2hCdXR0b24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG91bGQgaGF2ZSBhcmlhLWxpdmUgcmVnaW9uIGZvciBhbm5vdW5jZW1lbnRzXG4gICAgICAgICAgICBjb25zdCBsaXZlUmVnaW9uID0gc2NyZWVuLmdldEJ5Um9sZSgnc3RhdHVzJyk7XG4gICAgICAgICAgICBleHBlY3QobGl2ZVJlZ2lvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IFBlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGxhcmdlIGRhdGFzZXRzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VGZWVkRGF0YSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgaWQ6IGAke2l9YCxcbiAgICAgICAgdHlwZTogJ3BvbGwnLFxuICAgICAgICB0aXRsZTogYFRlc3QgUG9sbCAke2l9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBUaGlzIGlzIHRlc3QgcG9sbCAke2l9YCxcbiAgICAgICAgaGFzaHRhZ3M6IFsncG9saXRpY3MnLCAnZWxlY3Rpb24nXSxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjUtMDEtMTlUMTA6MDA6MDBaJyxcbiAgICAgICAgYXV0aG9yOiBgVGVzdCBVc2VyICR7aX1gLFxuICAgICAgICBlbmdhZ2VtZW50OiB7XG4gICAgICAgICAgbGlrZXM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCksXG4gICAgICAgICAgc2hhcmVzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1MCksXG4gICAgICAgICAgY29tbWVudHM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMwKVxuICAgICAgICB9XG4gICAgICB9KSk7XG5cbiAgICAgIG1vY2tVc2VGZWVkcy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAuLi5tb2NrVXNlRmVlZHMoKSxcbiAgICAgICAgZmVlZHM6IGxhcmdlRmVlZERhdGFcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxQZXJmb3JtYW5jZShjb21wb25lbnQsIFtcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmVuZGVyIGxhcmdlIGRhdGFzZXQgZWZmaWNpZW50bHknLFxuICAgICAgICAgIHRlc3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgcmVuZGVyKGNvbXBvbmVudCk7XG4gICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJUaW1lID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlbmRlclRpbWUpLnRvQmVMZXNzVGhhbig1MDAwKTsgLy8gNXMgdGhyZXNob2xkIGZvciAxMDAgaXRlbXNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHJhcGlkIGludGVyYWN0aW9ucyB3aXRob3V0IHBlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFsQ29tcG9uZW50VGVzdGVyLnRlc3RSZWFsUGVyZm9ybWFuY2UoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1JhcGlkIGludGVyYWN0aW9ucyBwZXJmb3JtYW5jZScsXG4gICAgICAgICAgdGVzdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHJhcGlkIGludGVyYWN0aW9uc1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2xpa2UgdGVzdCBwb2xsL2kpO1xuICAgICAgICAgICAgICBmaXJlRXZlbnQuY2xpY2sobGlrZUJ1dHRvbik7XG4gICAgICAgICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgICAgICBjb25zdCB0b3RhbFRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QodG90YWxUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIDFzIHRocmVzaG9sZCBmb3IgMTAgaW50ZXJhY3Rpb25zXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIENvbXBvbmVudCBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VzZUZlZWRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLm1vY2tVc2VGZWVkcygpLFxuICAgICAgICBlcnJvcjogJ05ldHdvcmsgZXJyb3InLFxuICAgICAgICByZWZyZXNoRmVlZHM6IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ05ldHdvcmsgZXJyb3InKSlcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxFcnJvckhhbmRsaW5nKGNvbXBvbmVudCwgW1xuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICdIYW5kbGUgbmV0d29yayBlcnJvcnMnLFxuICAgICAgICAgIHRlc3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9uZXR3b3JrIGVycm9yL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucGFzc2VkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBkYXRhIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVXNlRmVlZHMubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgLi4ubW9ja1VzZUZlZWRzKCksXG4gICAgICAgIGZlZWRzOiBbXVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbEVycm9ySGFuZGxpbmcoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0hhbmRsZSBlbXB0eSBmZWVkcycsXG4gICAgICAgICAgdGVzdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL25vIGZlZWRzIGF2YWlsYWJsZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVjb3ZlciBmcm9tIGVycm9ycyB3aGVuIHJldHJ5aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1JlZnJlc2hGZWVkcyA9IGplc3QuZm4oKVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignTmV0d29yayBlcnJvcicpKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHVuZGVmaW5lZCk7XG5cbiAgICAgIG1vY2tVc2VGZWVkcy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAuLi5tb2NrVXNlRmVlZHMoKSxcbiAgICAgICAgZXJyb3I6ICdOZXR3b3JrIGVycm9yJyxcbiAgICAgICAgcmVmcmVzaEZlZWRzOiBtb2NrUmVmcmVzaEZlZWRzXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFsQ29tcG9uZW50VGVzdGVyLnRlc3RSZWFsRXJyb3JIYW5kbGluZyhjb21wb25lbnQsIFtcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmV0cnkgYWZ0ZXIgZXJyb3InLFxuICAgICAgICAgIHRlc3Q6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9yZXRyeS9pKTtcbiAgICAgICAgICAgIGZpcmVFdmVudC5jbGljayhyZXRyeUJ1dHRvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICBleHBlY3QobW9ja1JlZnJlc2hGZWVkcykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5wYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIENvbXBvbmVudCBCdXNpbmVzcyBMb2dpYycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBwZXJzb25hbGl6YXRpb24gc2NvcmUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFsQ29tcG9uZW50VGVzdGVyLnRlc3RSZWFsQnVzaW5lc3NMb2dpYyhjb21wb25lbnQsIFtcbiAgICAgICAge1xuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUGVyc29uYWxpemF0aW9uIHNjb3JlIGNhbGN1bGF0aW9uJyxcbiAgICAgICAgICB0ZXN0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSB1c2VyIGludGVyYWN0aW9ucyB0aGF0IHNob3VsZCBpbmNyZWFzZSBwZXJzb25hbGl6YXRpb24gc2NvcmVcbiAgICAgICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2xpa2UgdGVzdCBwb2xsL2kpO1xuICAgICAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGxpa2VCdXR0b24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3BlcnNvbmFsaXplZC9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucGFzc2VkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgY29udGVudCBiYXNlZCBvbiBoYXNodGFncyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRUZXN0ZXIudGVzdFJlYWxCdXNpbmVzc0xvZ2ljKGNvbXBvbmVudCwgW1xuICAgICAgICB7XG4gICAgICAgICAgZGVzY3JpcHRpb246ICdIYXNodGFnIGZpbHRlcmluZycsXG4gICAgICAgICAgdGVzdDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGFzaHRhZ0ZpbHRlciA9IHNjcmVlbi5nZXRCeVRleHQoJ3BvbGl0aWNzJyk7XG4gICAgICAgICAgICBmaXJlRXZlbnQuY2xpY2soaGFzaHRhZ0ZpbHRlcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICAgICAgICAvLyBTaG91bGQgc2hvdyBvbmx5IGl0ZW1zIHdpdGggcG9saXRpY3MgaGFzaHRhZ1xuICAgICAgICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBQb2xsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgICAgICAgIGV4cGVjdChzY3JlZW4ucXVlcnlCeVRleHQoJ1Rlc3QgUG9zdCcpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQucGFzc2VkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW5maW5pdGUgc2Nyb2xsIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudFRlc3Rlci50ZXN0UmVhbEJ1c2luZXNzTG9naWMoY29tcG9uZW50LCBbXG4gICAgICAgIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ0luZmluaXRlIHNjcm9sbCBmdW5jdGlvbmFsaXR5JyxcbiAgICAgICAgICB0ZXN0OiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaW11bGF0ZSBzY3JvbGxpbmcgdG8gYm90dG9tXG4gICAgICAgICAgICBjb25zdCBmZWVkID0gc2NyZWVuLmdldEJ5Um9sZSgnbWFpbicpO1xuICAgICAgICAgICAgZmlyZUV2ZW50LnNjcm9sbChmZWVkLCB7IHRhcmdldDogeyBzY3JvbGxUb3A6IDEwMDAgfSB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgICAgICAgIC8vIFNob3VsZCB0cmlnZ2VyIGxvYWQgbW9yZVxuICAgICAgICAgICAgICBleHBlY3QobW9ja1VzZUZlZWRzKCkucmVmcmVzaEZlZWRzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIm1vY2tVc2VGZWVkcyIsInVzZUZlZWRzIiwibW9ja1VzZUhhc2h0YWdzIiwidXNlSGFzaHRhZ3MiLCJtb2NrRmVlZERhdGEiLCJpZCIsInR5cGUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaGFzaHRhZ3MiLCJjcmVhdGVkX2F0IiwiYXV0aG9yIiwiZW5nYWdlbWVudCIsImxpa2VzIiwic2hhcmVzIiwiY29tbWVudHMiLCJtb2NrSGFzaHRhZ0RhdGEiLCJuYW1lIiwiZGlzcGxheV9uYW1lIiwidXNhZ2VfY291bnQiLCJmb2xsb3dlcl9jb3VudCIsImlzX3RyZW5kaW5nIiwidHJlbmRfc2NvcmUiLCJ1cGRhdGVkX2F0IiwiaXNfdmVyaWZpZWQiLCJpc19mZWF0dXJlZCIsImRlc2NyaWJlIiwicmVhbENvbXBvbmVudFRlc3RlciIsImJlZm9yZUVhY2giLCJSZWFsQ29tcG9uZW50VGVzdGVyIiwidXNlUmVhbERlcGVuZGVuY2llcyIsInRlc3RSZWFsSW50ZXJhY3Rpb25zIiwidGVzdFJlYWxCdXNpbmVzc0xvZ2ljIiwidGVzdFJlYWxFcnJvckhhbmRsaW5nIiwidGVzdFJlYWxBY2Nlc3NpYmlsaXR5IiwidGVzdFJlYWxQZXJmb3JtYW5jZSIsIm1vY2tSZXR1cm5WYWx1ZSIsImZlZWRzIiwibG9hZGluZyIsImVycm9yIiwicmVmcmVzaEZlZWRzIiwiZm4iLCJsaWtlRmVlZCIsInNoYXJlRmVlZCIsImNvbW1lbnRGZWVkIiwiYm9va21hcmtGZWVkIiwic2VhcmNoSGFzaHRhZ3MiLCJmb2xsb3dIYXNodGFnIiwidW5mb2xsb3dIYXNodGFnIiwiZ2V0VHJlbmRpbmdIYXNodGFncyIsImFmdGVyRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsImNvbXBvbmVudCIsIlVuaWZpZWRGZWVkIiwicmVzdWx0IiwidGVzdFJlYWxSZW5kZXJpbmciLCJleHBlY3QiLCJwYXNzZWQiLCJ0b0JlIiwiZXJyb3JzIiwidG9IYXZlTGVuZ3RoIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJyZW5kZXIiLCJlbmRUaW1lIiwicmVuZGVyVGltZSIsInRvQmVMZXNzVGhhbiIsImFjdGlvbiIsImRhcmtNb2RlQnV0dG9uIiwic2NyZWVuIiwiZ2V0QnlMYWJlbFRleHQiLCJmaXJlRXZlbnQiLCJjbGljayIsImV4cGVjdGVkUmVzdWx0Iiwid2FpdEZvciIsInRvQmVJblRoZURvY3VtZW50IiwiZmlsdGVyc0J1dHRvbiIsImdldEJ5VGV4dCIsImxpa2VCdXR0b24iLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInNoYXJlQnV0dG9uIiwiaGFzaHRhZ0J1dHRvbiIsInRlc3RSZWFsU3RhdGVNYW5hZ2VtZW50IiwiZXhwZWN0ZWRTdGF0ZSIsInRlc3QiLCJmZWVkIiwiZ2V0QnlSb2xlIiwidG9IYXZlQXR0cmlidXRlIiwiZm9jdXMiLCJkb2N1bWVudCIsImFjdGl2ZUVsZW1lbnQiLCJrZXlEb3duIiwia2V5IiwicmVmcmVzaEJ1dHRvbiIsImxpdmVSZWdpb24iLCJsYXJnZUZlZWREYXRhIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiXyIsImkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhY3QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ0b3RhbFRpbWUiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwibW9ja1JlZnJlc2hGZWVkcyIsIm1vY2tSZWplY3RlZFZhbHVlT25jZSIsIm1vY2tSZXNvbHZlZFZhbHVlT25jZSIsInVuZGVmaW5lZCIsInJldHJ5QnV0dG9uIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwiaGFzaHRhZ0ZpbHRlciIsInF1ZXJ5QnlUZXh0Iiwibm90Iiwic2Nyb2xsIiwidGFyZ2V0Iiwic2Nyb2xsVG9wIiwidG9IYXZlQmVlbkNhbGxlZCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0NBUUM7Ozs7OzhEQUVpQjt3QkFDc0M7eUJBQ25DO3NDQUNxQzs2QkFDOUI7NEJBQ0g7NkJBQ0c7Ozs7OztBQUU1QixrQkFBa0I7QUFDbEJBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDO0FBQ1ZELGFBQUksQ0FBQ0MsSUFBSSxDQUFDO0FBRVYsTUFBTUMsZUFBZUMsb0JBQVE7QUFDN0IsTUFBTUMsa0JBQWtCQyx3QkFBVztBQUVuQyxZQUFZO0FBQ1osTUFBTUMsZUFBZTtJQUNuQjtRQUNFQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLFVB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