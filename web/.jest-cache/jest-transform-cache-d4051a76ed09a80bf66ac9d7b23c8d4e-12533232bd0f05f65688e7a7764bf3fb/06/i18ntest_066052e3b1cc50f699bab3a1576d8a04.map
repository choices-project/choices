{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/integration/i18n.test.tsx"],"sourcesContent":["import { describe, it, expect, beforeEach, vi } from 'vitest';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { useI18n } from '@/hooks/useI18n';\nimport { useAppStore } from '@/lib/stores/appStore';\nimport LanguageSelector from '@/components/shared/LanguageSelector';\nimport TranslatedText from '@/components/shared/TranslatedText';\n\n// Mock the i18n module\nvi.mock('@/lib/i18n', () => ({\n  loadTranslations: vi.fn(),\n  t: vi.fn((key: string, replacements?: Record<string, string>) => {\n    const translations: Record<string, Record<string, string>> = {\n      en: {\n        'common.welcome': 'Welcome to Choices!',\n        'common.hello': 'Hello',\n        'common.loading': 'Loading...',\n        'dashboard.title': 'Dashboard',\n        'dashboard.welcome_message': 'Welcome back, {{username}}!'\n      },\n      es: {\n        'common.welcome': '¡Bienvenido a Choices!',\n        'common.hello': 'Hola',\n        'common.loading': 'Cargando...',\n        'dashboard.title': 'Panel de control',\n        'dashboard.welcome_message': '¡Bienvenido de nuevo, {{username}}!'\n      },\n      fr: {\n        'common.welcome': 'Bienvenue sur Choices !',\n        'common.hello': 'Bonjour',\n        'common.loading': 'Chargement...',\n        'dashboard.title': 'Tableau de bord',\n        'dashboard.welcome_message': 'Bon retour, {{username}} !'\n      },\n      de: {\n        'common.welcome': 'Willkommen bei Choices',\n        'common.hello': 'Hallo',\n        'common.loading': 'Laden...',\n        'dashboard.title': 'Dashboard',\n        'dashboard.welcome_message': 'Willkommen zurück, {{username}}!'\n      },\n      it: {\n        'common.welcome': 'Benvenuto in Choices',\n        'common.hello': 'Ciao',\n        'common.loading': 'Caricamento...',\n        'dashboard.title': 'Dashboard',\n        'dashboard.welcome_message': 'Bentornato, {{username}}!'\n      }\n    };\n\n    const currentLang = useAppStore.getState().i18n.currentLanguage;\n    const translation = translations[currentLang]?.[key] || key;\n\n    if (replacements) {\n      return translation.replace(/\\{\\{(\\w+)\\}\\}/g, (match, key) => replacements[key] || match);\n    }\n\n    return translation;\n  })\n}));\n\n// Test component that uses i18n\nfunction TestI18nComponent() {\n  const { t, currentLanguage, setLanguage } = useI18n();\n\n  return (\n    <div>\n      <h1 data-testid=\"welcome\">{t('common.welcome')}</h1>\n      <p data-testid=\"hello\">{t('common.hello')}</p>\n      <p data-testid=\"current-lang\">Current: {currentLanguage}</p>\n      <button \n        data-testid=\"change-to-es\" \n        onClick={() => setLanguage('es')}\n      >\n        Change to Spanish\n      </button>\n      <button \n        data-testid=\"change-to-fr\" \n        onClick={() => setLanguage('fr')}\n      >\n        Change to French\n      </button>\n      <button \n        data-testid=\"change-to-de\" \n        onClick={() => setLanguage('de')}\n      >\n        Change to German\n      </button>\n      <button \n        data-testid=\"change-to-it\" \n        onClick={() => setLanguage('it')}\n      >\n        Change to Italian\n      </button>\n    </div>\n  );\n}\n\ndescribe('Internationalization (i18n) System', () => {\n  beforeEach(() => {\n    // Reset the store to default state\n    useAppStore.setState({\n      i18n: {\n        currentLanguage: 'en',\n        isLoading: false,\n        error: null\n      },\n      settings: {\n        language: 'en',\n        theme: 'system',\n        timezone: 'UTC',\n        notifications: true,\n        analytics: true,\n        privacy: 'standard',\n        accessibility: true,\n        performance: 'auto',\n        haptics: true,\n        sound: true,\n        autoSave: true,\n        compactMode: false,\n        showTooltips: true,\n        enableAnalytics: true,\n        enableCrashReporting: true\n      }\n    });\n  });\n\n  describe('useI18n Hook', () => {\n    it('should provide translation function and language state', () => {\n      render(<TestI18nComponent />);\n      \n      expect(screen.getByTestId('welcome')).toHaveTextContent('Welcome to Choices!');\n      expect(screen.getByTestId('hello')).toHaveTextContent('Hello');\n      expect(screen.getByTestId('current-lang')).toHaveTextContent('Current: en');\n    });\n\n    it('should change language when setLanguage is called', async () => {\n      render(<TestI18nComponent />);\n      \n      // Change to Spanish\n      fireEvent.click(screen.getByTestId('change-to-es'));\n      \n      await waitFor(() => {\n        expect(screen.getByTestId('welcome')).toHaveTextContent('¡Bienvenido a Choices!');\n        expect(screen.getByTestId('hello')).toHaveTextContent('Hola');\n        expect(screen.getByTestId('current-lang')).toHaveTextContent('Current: es');\n      });\n    });\n\n    it('should handle multiple language changes', async () => {\n      render(<TestI18nComponent />);\n      \n      // Change to French\n      fireEvent.click(screen.getByTestId('change-to-fr'));\n      \n      await waitFor(() => {\n        expect(screen.getByTestId('welcome')).toHaveTextContent('Bienvenue sur Choices !');\n        expect(screen.getByTestId('hello')).toHaveTextContent('Bonjour');\n      });\n\n      // Change to German\n      fireEvent.click(screen.getByTestId('change-to-de'));\n      \n      await waitFor(() => {\n        expect(screen.getByTestId('welcome')).toHaveTextContent('Willkommen bei Choices');\n        expect(screen.getByTestId('hello')).toHaveTextContent('Hallo');\n      });\n\n      // Change to Italian\n      fireEvent.click(screen.getByTestId('change-to-it'));\n      \n      await waitFor(() => {\n        expect(screen.getByTestId('welcome')).toHaveTextContent('Benvenuto in Choices');\n        expect(screen.getByTestId('hello')).toHaveTextContent('Ciao');\n      });\n    });\n  });\n\n  describe('LanguageSelector Component', () => {\n    it('should render with current language selected', () => {\n      render(<LanguageSelector />);\n      \n      // Should show current language (English by default)\n      expect(screen.getByRole('combobox')).toHaveValue('en');\n    });\n\n    it('should change language when selection changes', async () => {\n      render(<LanguageSelector />);\n      \n      const selector = screen.getByRole('combobox');\n      \n      // Change to Spanish\n      fireEvent.change(selector, { target: { value: 'es' } });\n      \n      await waitFor(() => {\n        expect(useAppStore.getState().i18n.currentLanguage).toBe('es');\n        expect(useAppStore.getState().settings.language).toBe('es');\n      });\n    });\n  });\n\n  describe('TranslatedText Component', () => {\n    it('should render translated text', () => {\n      render(\n        <TranslatedText \n          textKey=\"common.welcome\" \n          data-testid=\"translated-welcome\"\n        />\n      );\n      \n      expect(screen.getByTestId('translated-welcome')).toHaveTextContent('Welcome to Choices!');\n    });\n\n    it('should render with custom HTML element', () => {\n      render(\n        <TranslatedText \n          textKey=\"common.welcome\" \n          as=\"h1\"\n          data-testid=\"translated-welcome\"\n        />\n      );\n      \n      const element = screen.getByTestId('translated-welcome');\n      expect(element.tagName).toBe('H1');\n      expect(element).toHaveTextContent('Welcome to Choices!');\n    });\n\n    it('should handle replacements in translations', () => {\n      render(\n        <TranslatedText \n          textKey=\"dashboard.welcome_message\" \n          replacements={{ username: 'John' }}\n          data-testid=\"welcome-message\"\n        />\n      );\n      \n      expect(screen.getByTestId('welcome-message')).toHaveTextContent('Welcome back, John!');\n    });\n\n    it('should show loading state when translations are loading', () => {\n      // Set loading state\n      useAppStore.setState({\n        i18n: {\n          currentLanguage: 'en',\n          isLoading: true,\n          error: null\n        }\n      });\n\n      render(\n        <TranslatedText \n          textKey=\"common.welcome\" \n          data-testid=\"translated-welcome\"\n        />\n      );\n      \n      expect(screen.getByTestId('translated-welcome')).toHaveTextContent('Loading translation...');\n    });\n\n    it('should show error state when translations fail to load', () => {\n      // Set error state\n      useAppStore.setState({\n        i18n: {\n          currentLanguage: 'en',\n          isLoading: false,\n          error: 'Failed to load translations'\n        }\n      });\n\n      render(\n        <TranslatedText \n          textKey=\"common.welcome\" \n          data-testid=\"translated-welcome\"\n        />\n      );\n      \n      expect(screen.getByTestId('translated-welcome')).toHaveTextContent('Error: Failed to load translations');\n    });\n  });\n\n  describe('Translation Key Coverage', () => {\n    it('should have translations for all common keys', () => {\n      const commonKeys = [\n        'common.welcome',\n        'common.hello',\n        'common.loading',\n        'common.error',\n        'common.success',\n        'common.cancel',\n        'common.save',\n        'common.delete',\n        'common.edit',\n        'common.create',\n        'common.update',\n        'common.search',\n        'common.filter',\n        'common.sort',\n        'common.back',\n        'common.next',\n        'common.close'\n      ];\n\n      commonKeys.forEach(key => {\n        const { t } = useI18n();\n        const translation = t(key);\n        expect(translation).toBeDefined();\n        expect(translation).not.toBe(key); // Should not return the key itself\n      });\n    });\n\n    it('should have translations for all navigation keys', () => {\n      const navigationKeys = [\n        'navigation.home',\n        'navigation.dashboard',\n        'navigation.polls',\n        'navigation.representatives',\n        'navigation.analytics',\n        'navigation.profile',\n        'navigation.settings',\n        'navigation.admin',\n        'navigation.logout',\n        'navigation.login',\n        'navigation.register'\n      ];\n\n      navigationKeys.forEach(key => {\n        const { t } = useI18n();\n        const translation = t(key);\n        expect(translation).toBeDefined();\n        expect(translation).not.toBe(key);\n      });\n    });\n\n    it('should have translations for all dashboard keys', () => {\n      const dashboardKeys = [\n        'dashboard.title',\n        'dashboard.welcome',\n        'dashboard.recentActivity',\n        'dashboard.quickActions',\n        'dashboard.createPoll',\n        'dashboard.viewPolls',\n        'dashboard.contactRepresentatives',\n        'dashboard.viewAnalytics'\n      ];\n\n      dashboardKeys.forEach(key => {\n        const { t } = useI18n();\n        const translation = t(key);\n        expect(translation).toBeDefined();\n        expect(translation).not.toBe(key);\n      });\n    });\n  });\n\n  describe('Language Persistence', () => {\n    it('should persist language selection in app store', async () => {\n      render(<TestI18nComponent />);\n      \n      // Change language\n      fireEvent.click(screen.getByTestId('change-to-es'));\n      \n      await waitFor(() => {\n        const state = useAppStore.getState();\n        expect(state.i18n.currentLanguage).toBe('es');\n        expect(state.settings.language).toBe('es');\n      });\n    });\n\n    it('should maintain language across component re-renders', async () => {\n      const { rerender } = render(<TestI18nComponent />);\n      \n      // Change language\n      fireEvent.click(screen.getByTestId('change-to-fr'));\n      \n      await waitFor(() => {\n        expect(screen.getByTestId('current-lang')).toHaveTextContent('Current: fr');\n      });\n\n      // Re-render component\n      rerender(<TestI18nComponent />);\n      \n      // Language should be maintained\n      expect(screen.getByTestId('current-lang')).toHaveTextContent('Current: fr');\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle missing translation keys gracefully', () => {\n      const { t } = useI18n();\n      const translation = t('nonexistent.key');\n      expect(translation).toBe('nonexistent.key'); // Should return the key itself\n    });\n\n    it('should handle translation loading errors', () => {\n      useAppStore.setState({\n        i18n: {\n          currentLanguage: 'en',\n          isLoading: false,\n          error: 'Translation loading failed'\n        }\n      });\n\n      render(\n        <TranslatedText \n          textKey=\"common.welcome\" \n          data-testid=\"translated-welcome\"\n        />\n      );\n      \n      expect(screen.getByTestId('translated-welcome')).toHaveTextContent('Error: Translation loading failed');\n    });\n  });\n});\n"],"names":["vi","mock","loadTranslations","fn","t","key","replacements","translations","en","es","fr","de","it","currentLang","useAppStore","getState","i18n","currentLanguage","translation","replace","match","TestI18nComponent","setLanguage","useI18n","div","h1","data-testid","p","button","onClick","describe","beforeEach","setState","isLoading","error","settings","language","theme","timezone","notifications","analytics","privacy","accessibility","performance","haptics","sound","autoSave","compactMode","showTooltips","enableAnalytics","enableCrashReporting","render","expect","screen","getByTestId","toHaveTextContent","fireEvent","click","waitFor","LanguageSelector","getByRole","toHaveValue","selector","change","target","value","toBe","TranslatedText","textKey","as","element","tagName","username","commonKeys","forEach","toBeDefined","not","navigationKeys","dashboardKeys","state","rerender"],"mappings":"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"}