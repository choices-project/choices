855acb49e00c0718ad197f53da4a4866
/**
 * @jest-environment jsdom
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get PerformanceProfiler () {
        return PerformanceProfiler;
    },
    get performanceProfiler () {
        return performanceProfiler;
    }
});
const _logger = require("../../../../lib/utils/logger");
class PerformanceProfiler {
    /**
   * Start profiling a component
   */ startProfiling(componentName) {
        this.isProfiling = true;
        this.startTime = performance.now();
        this.startMemory = performance.memory?.usedJSHeapSize || 0;
        _logger.logger.info(`üîç Starting performance profiling for: ${componentName}`);
    }
    /**
   * Stop profiling and record metrics
   */ stopProfiling(componentName, renderCount = 1) {
        if (!this.isProfiling) {
            throw new Error('Profiling not started. Call startProfiling() first.');
        }
        const endTime = performance.now();
        const endMemory = performance.memory?.usedJSHeapSize || 0;
        const totalRenderTime = endTime - this.startTime;
        const averageRenderTime = totalRenderTime / renderCount;
        const memoryUsed = (endMemory - this.startMemory) / (1024 * 1024);
        const metrics = {
            componentName,
            renderCount,
            totalRenderTime,
            averageRenderTime,
            maxRenderTime: totalRenderTime,
            minRenderTime: totalRenderTime,
            memoryPeak: memoryUsed,
            memoryAverage: memoryUsed,
            reRenderTriggers: this.analyzeReRenderTriggers(componentName),
            performanceBottlenecks: this.analyzeBottlenecks(totalRenderTime, memoryUsed),
            optimizationScore: this.calculateOptimizationScore(totalRenderTime, memoryUsed, renderCount),
            recommendations: this.generateRecommendations(totalRenderTime, memoryUsed, renderCount),
            timestamp: new Date()
        };
        this.metrics.push(metrics);
        this.isProfiling = false;
        _logger.logger.info(`‚úÖ Performance profiling completed for: ${componentName}`);
        _logger.logger.info(`- Render Time: ${totalRenderTime.toFixed(2)}ms`);
        _logger.logger.info(`- Memory Used: ${memoryUsed.toFixed(2)}MB`);
        _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
        return metrics;
    }
    /**
   * Analyze re-render triggers
   */ analyzeReRenderTriggers(componentName) {
        const triggers = [];
        // Analyze actual re-render triggers based on component behavior
        const renderCount = this.metrics.filter((m)=>m.componentName === componentName).length;
        const recentMetrics = this.metrics.filter((m)=>m.componentName === componentName).slice(-3);
        // Check for excessive re-renders
        if (renderCount > 5) {
            triggers.push('Excessive re-renders detected');
        }
        // Check for render time patterns
        if (recentMetrics.length > 1) {
            const avgRenderTime = recentMetrics.reduce((sum, m)=>sum + m.averageRenderTime, 0) / recentMetrics.length;
            if (avgRenderTime > 100) {
                triggers.push('Slow render times');
            }
        }
        // Check for memory patterns
        if (recentMetrics.length > 1) {
            const memoryTrend = recentMetrics.map((m)=>m.memoryPeak);
            const isIncreasing = memoryTrend.every((val, i)=>i === 0 || val >= (memoryTrend[i - 1] || 0));
            if (isIncreasing && (memoryTrend[memoryTrend.length - 1] || 0) > 5) {
                triggers.push('Increasing memory usage pattern');
            }
        }
        // Check for performance degradation
        if (recentMetrics.length > 2) {
            const scores = recentMetrics.map((m)=>m.optimizationScore);
            const isDegrading = scores.every((score, i)=>i === 0 || score <= (scores[i - 1] || 0));
            if (isDegrading && (scores[scores.length - 1] || 0) < 70) {
                triggers.push('Performance degradation detected');
            }
        }
        // Component-specific triggers
        if (componentName.includes('Feed') || componentName.includes('Mobile')) {
            triggers.push('Large component with complex state management');
        }
        if (componentName.includes('Store') || componentName.includes('Zustand')) {
            triggers.push('State management updates');
        }
        return triggers;
    }
    /**
   * Analyze performance bottlenecks
   */ analyzeBottlenecks(renderTime, memoryUsage) {
        const bottlenecks = [];
        if (renderTime > 200) {
            bottlenecks.push('Slow render time (>200ms)');
        }
        if (memoryUsage > 10) {
            bottlenecks.push('High memory usage (>10MB)');
        }
        if (renderTime > 100 && memoryUsage > 5) {
            bottlenecks.push('Combined performance issues');
        }
        return bottlenecks;
    }
    /**
   * Calculate optimization score (0-100)
   */ calculateOptimizationScore(renderTime, memoryUsage, renderCount) {
        let score = 100;
        // Deduct points for slow render times
        if (renderTime > 300) score -= 40;
        else if (renderTime > 200) score -= 30;
        else if (renderTime > 100) score -= 20;
        else if (renderTime > 50) score -= 10;
        // Deduct points for high memory usage
        if (memoryUsage > 20) score -= 40;
        else if (memoryUsage > 10) score -= 30;
        else if (memoryUsage > 5) score -= 20;
        else if (memoryUsage > 2) score -= 10;
        // Deduct points for excessive re-renders
        if (renderCount > 10) score -= 20;
        else if (renderCount > 5) score -= 10;
        return Math.max(0, score);
    }
    /**
   * Generate optimization recommendations
   */ generateRecommendations(renderTime, memoryUsage, renderCount) {
        const recommendations = [];
        if (renderTime > 200) {
            recommendations.push('‚ö° Implement React.memo for expensive components');
            recommendations.push('‚ö° Use useMemo/useCallback for expensive calculations');
            recommendations.push('‚ö° Consider lazy loading for heavy components');
        }
        if (memoryUsage > 10) {
            recommendations.push('üß† Implement proper cleanup in useEffect hooks');
            recommendations.push('üß† Review memory leaks in event listeners');
            recommendations.push('üß† Consider component unmounting strategies');
        }
        if (renderCount > 5) {
            recommendations.push('üîÑ Optimize useEffect dependencies');
            recommendations.push('üîÑ Consider state management optimization');
            recommendations.push('üîÑ Review component re-render patterns');
        }
        if (recommendations.length === 0) {
            recommendations.push('‚úÖ Component is well optimized!');
        }
        return recommendations;
    }
    /**
   * Create component profile
   */ createComponentProfile(name, metrics) {
        const profile = {
            name,
            metrics,
            children: [],
            depth: 0,
            isOptimized: metrics.optimizationScore > 80,
            optimizationPotential: this.calculateOptimizationPotential(metrics.optimizationScore)
        };
        this.profiles.set(name, profile);
        return profile;
    }
    /**
   * Calculate optimization potential
   */ calculateOptimizationPotential(score) {
        if (score < 50) return 'HIGH';
        if (score < 80) return 'MEDIUM';
        return 'LOW';
    }
    /**
   * Generate comprehensive performance analysis
   */ generatePerformanceAnalysis() {
        const allMetrics = this.metrics;
        const totalTests = allMetrics.length;
        if (totalTests === 0) {
            return {
                overallScore: 0,
                criticalIssues: [
                    'No performance data available'
                ],
                optimizationOpportunities: [],
                memoryLeaks: [],
                renderOptimizations: [],
                networkOptimizations: [],
                accessibilityOptimizations: [],
                recommendations: [
                    'Run performance tests to generate analysis'
                ],
                estimatedImprovement: 0
            };
        }
        const averageScore = allMetrics.reduce((sum, m)=>sum + m.optimizationScore, 0) / totalTests;
        const criticalIssues = this.identifyCriticalIssues(allMetrics);
        const optimizationOpportunities = this.identifyOptimizationOpportunities(allMetrics);
        const memoryLeaks = this.identifyMemoryLeaks(allMetrics);
        const renderOptimizations = this.identifyRenderOptimizations(allMetrics);
        const networkOptimizations = this.identifyNetworkOptimizations(allMetrics);
        const accessibilityOptimizations = this.identifyAccessibilityOptimizations(allMetrics);
        const recommendations = this.generateComprehensiveRecommendations(criticalIssues, optimizationOpportunities, memoryLeaks, renderOptimizations, networkOptimizations, accessibilityOptimizations);
        const estimatedImprovement = this.calculateEstimatedImprovement(allMetrics);
        return {
            overallScore: averageScore,
            criticalIssues,
            optimizationOpportunities,
            memoryLeaks,
            renderOptimizations,
            networkOptimizations,
            accessibilityOptimizations,
            recommendations,
            estimatedImprovement
        };
    }
    /**
   * Identify critical performance issues
   */ identifyCriticalIssues(metrics) {
        const issues = [];
        const slowComponents = metrics.filter((m)=>m.averageRenderTime > 200);
        const highMemoryComponents = metrics.filter((m)=>m.memoryPeak > 10);
        const lowScoreComponents = metrics.filter((m)=>m.optimizationScore < 50);
        if (slowComponents.length > 0) {
            issues.push(`üêå ${slowComponents.length} components with slow render times (>200ms)`);
        }
        if (highMemoryComponents.length > 0) {
            issues.push(`üß† ${highMemoryComponents.length} components with high memory usage (>10MB)`);
        }
        if (lowScoreComponents.length > 0) {
            issues.push(`‚ö†Ô∏è ${lowScoreComponents.length} components with poor optimization scores (<50)`);
        }
        return issues;
    }
    /**
   * Identify optimization opportunities
   */ identifyOptimizationOpportunities(metrics) {
        const opportunities = [];
        const mediumScoreComponents = metrics.filter((m)=>m.optimizationScore >= 50 && m.optimizationScore < 80);
        const highRenderCountComponents = metrics.filter((m)=>m.renderCount > 5);
        if (mediumScoreComponents.length > 0) {
            opportunities.push(`üìà ${mediumScoreComponents.length} components with medium optimization potential`);
        }
        if (highRenderCountComponents.length > 0) {
            opportunities.push(`üîÑ ${highRenderCountComponents.length} components with excessive re-renders`);
        }
        return opportunities;
    }
    /**
   * Identify memory leaks
   */ identifyMemoryLeaks(metrics) {
        const leaks = [];
        const highMemoryComponents = metrics.filter((m)=>m.memoryPeak > 10);
        const increasingMemoryComponents = metrics.filter((m)=>m.memoryPeak > m.memoryAverage * 2);
        if (highMemoryComponents.length > 0) {
            leaks.push(`üß† ${highMemoryComponents.length} components with high memory usage`);
        }
        if (increasingMemoryComponents.length > 0) {
            leaks.push(`üìà ${increasingMemoryComponents.length} components with increasing memory usage`);
        }
        return leaks;
    }
    /**
   * Identify render optimizations
   */ identifyRenderOptimizations(metrics) {
        const optimizations = [];
        const slowRenderComponents = metrics.filter((m)=>m.averageRenderTime > 100);
        const highRenderCountComponents = metrics.filter((m)=>m.renderCount > 3);
        if (slowRenderComponents.length > 0) {
            optimizations.push(`‚ö° ${slowRenderComponents.length} components need render optimization`);
        }
        if (highRenderCountComponents.length > 0) {
            optimizations.push(`‚ö° ${highRenderCountComponents.length} components need re-render optimization`);
        }
        return optimizations;
    }
    /**
   * Identify network optimizations
   */ identifyNetworkOptimizations(metrics) {
        const optimizations = [];
        // Analyze network-related performance metrics
        const networkMetrics = metrics.filter((m)=>m.networkTime && m.networkTime > 0);
        const highNetworkTime = metrics.filter((m)=>m.networkTime && m.networkTime > 300);
        const apiMetrics = metrics.filter((m)=>m.apiTime && m.apiTime > 0);
        const highApiTime = metrics.filter((m)=>m.apiTime && m.apiTime > 200);
        // Network performance analysis
        if (networkMetrics.length > 0) {
            const avgNetworkTime = networkMetrics.reduce((sum, m)=>sum + (m.networkTime || 0), 0) / networkMetrics.length;
            if (avgNetworkTime > 200) {
                optimizations.push('üåê High network latency detected - consider CDN implementation');
            }
            if (avgNetworkTime > 500) {
                optimizations.push('üåê Critical network performance issues - optimize API endpoints');
            }
        }
        // API performance analysis
        if (apiMetrics.length > 0) {
            const avgApiTime = apiMetrics.reduce((sum, m)=>sum + (m.apiTime || 0), 0) / apiMetrics.length;
            if (avgApiTime > 150) {
                optimizations.push('üîå API response times are slow - implement caching strategies');
            }
            if (avgApiTime > 300) {
                optimizations.push('üîå Critical API performance issues - optimize database queries');
            }
        }
        // Network optimization recommendations based on patterns
        if (highNetworkTime.length > 0) {
            optimizations.push('üåê Implement request batching for multiple API calls');
            optimizations.push('üåê Add request deduplication to prevent duplicate calls');
        }
        if (highApiTime.length > 0) {
            optimizations.push('üîå Implement API response caching with TTL');
            optimizations.push('üîå Add database query optimization');
        }
        // General network optimizations
        if (networkMetrics.length > 2) {
            optimizations.push('üåê Consider implementing service worker for offline caching');
            optimizations.push('üåê Add request compression for large payloads');
        }
        return optimizations;
    }
    /**
   * Identify accessibility optimizations
   */ identifyAccessibilityOptimizations(metrics) {
        const optimizations = [];
        // Analyze accessibility-related performance metrics
        const accessibilityMetrics = metrics.filter((m)=>m.accessibilityTime && m.accessibilityTime > 0);
        const highAccessibilityTime = metrics.filter((m)=>m.accessibilityTime && m.accessibilityTime > 50);
        const slowComponents = metrics.filter((m)=>m.averageRenderTime > 100);
        const memoryIntensiveComponents = metrics.filter((m)=>m.memoryPeak > 5);
        // Accessibility performance analysis
        if (accessibilityMetrics.length > 0) {
            const avgAccessibilityTime = accessibilityMetrics.reduce((sum, m)=>sum + (m.accessibilityTime || 0), 0) / accessibilityMetrics.length;
            if (avgAccessibilityTime > 30) {
                optimizations.push('‚ôø Screen reader performance is slow - optimize ARIA announcements');
            }
            if (avgAccessibilityTime > 75) {
                optimizations.push('‚ôø Critical accessibility performance issues - review screen reader implementation');
            }
        }
        // Screen reader optimization recommendations
        if (highAccessibilityTime.length > 0) {
            optimizations.push('‚ôø Implement efficient live region management for screen readers');
            optimizations.push('‚ôø Optimize ARIA attribute rendering performance');
            optimizations.push('‚ôø Add debouncing for screen reader announcements');
        }
        // Keyboard navigation optimization
        if (slowComponents.length > 0) {
            optimizations.push('‚ôø Optimize keyboard navigation for slow-rendering components');
            optimizations.push('‚ôø Implement focus management optimization');
            optimizations.push('‚ôø Add keyboard shortcut performance improvements');
        }
        // Memory optimization for accessibility
        if (memoryIntensiveComponents.length > 0) {
            optimizations.push('‚ôø Optimize accessibility features for memory-intensive components');
            optimizations.push('‚ôø Implement efficient accessibility state management');
        }
        // General accessibility optimizations
        if (metrics.length > 2) {
            optimizations.push('‚ôø Consider implementing accessibility performance monitoring');
            optimizations.push('‚ôø Add accessibility feature lazy loading');
            optimizations.push('‚ôø Optimize accessibility testing performance');
        }
        return optimizations;
    }
    /**
   * Generate comprehensive recommendations
   */ generateComprehensiveRecommendations(criticalIssues, optimizationOpportunities, memoryLeaks, renderOptimizations, networkOptimizations, accessibilityOptimizations) {
        const recommendations = [];
        if (criticalIssues.length > 0) {
            recommendations.push('üö® PRIORITY: Address critical performance issues');
            recommendations.push(...criticalIssues);
        }
        if (memoryLeaks.length > 0) {
            recommendations.push('üß† PRIORITY: Fix memory leaks');
            recommendations.push(...memoryLeaks);
        }
        if (renderOptimizations.length > 0) {
            recommendations.push('‚ö° HIGH: Optimize render performance');
            recommendations.push(...renderOptimizations);
        }
        if (optimizationOpportunities.length > 0) {
            recommendations.push('üìà MEDIUM: Implement optimization opportunities');
            recommendations.push(...optimizationOpportunities);
        }
        if (networkOptimizations.length > 0) {
            recommendations.push('üåê MEDIUM: Optimize network performance');
            recommendations.push(...networkOptimizations);
        }
        if (accessibilityOptimizations.length > 0) {
            recommendations.push('‚ôø LOW: Optimize accessibility performance');
            recommendations.push(...accessibilityOptimizations);
        }
        if (recommendations.length === 0) {
            recommendations.push('üéâ Excellent performance! No optimizations needed.');
        }
        return recommendations;
    }
    /**
   * Calculate estimated improvement percentage
   */ calculateEstimatedImprovement(metrics) {
        const averageScore = metrics.reduce((sum, m)=>sum + m.optimizationScore, 0) / metrics.length;
        const maxPossibleScore = 100;
        const improvement = maxPossibleScore - averageScore;
        return Math.max(0, improvement);
    }
    /**
   * Get all component profiles
   */ getComponentProfiles() {
        return Array.from(this.profiles.values());
    }
    /**
   * Get metrics for a specific component
   */ getComponentMetrics(componentName) {
        return this.metrics.find((m)=>m.componentName === componentName);
    }
    /**
   * Get all alerts
   */ getAlerts() {
        return this.alerts;
    }
    /**
   * Clear all profiling data
   */ clear() {
        this.profiles.clear();
        this.metrics = [];
        this.alerts = [];
        this.isProfiling = false;
    }
    /**
   * Record test metrics
   */ recordMetrics(metrics) {
        const fullMetrics = {
            ...metrics,
            timestamp: new Date()
        };
        this.metrics.push(fullMetrics);
        // Check for performance alerts
        this.checkPerformanceAlerts(fullMetrics);
    }
    /**
   * Check for performance alerts
   */ checkPerformanceAlerts(metrics) {
        const alerts = [];
        // Render time alerts
        if (metrics.renderTime && metrics.renderTime > 200) {
            alerts.push(`‚ö†Ô∏è SLOW RENDER: ${metrics.componentName} took ${metrics.renderTime.toFixed(2)}ms (budget: 200ms)`);
        }
        // Memory usage alerts
        if (metrics.memoryPeak > 10) {
            alerts.push(`‚ö†Ô∏è HIGH MEMORY: ${metrics.componentName} used ${metrics.memoryPeak.toFixed(2)}MB (budget: 10MB)`);
        }
        // Performance grade alerts
        if (metrics.performanceGrade === 'D' || metrics.performanceGrade === 'F') {
            alerts.push(`üö® POOR PERFORMANCE: ${metrics.componentName} received grade ${metrics.performanceGrade}`);
        }
        // Network time alerts
        if (metrics.networkTime && metrics.networkTime > 500) {
            alerts.push(`‚ö†Ô∏è SLOW NETWORK: ${metrics.componentName} network took ${metrics.networkTime.toFixed(2)}ms (budget: 500ms)`);
        }
        this.alerts.push(...alerts);
    }
    /**
   * Export profiling data
   */ exportProfilingData() {
        return JSON.stringify({
            profiles: Array.from(this.profiles.entries()),
            metrics: this.metrics,
            analysis: this.generatePerformanceAnalysis(),
            insights: this.getPerformanceInsights(),
            patterns: this.analyzePerformancePatterns()
        }, null, 2);
    }
    /**
   * Get performance insights and recommendations
   */ getPerformanceInsights() {
        const topPerformers = [];
        const needsAttention = [];
        const optimizationOpportunities = [];
        const criticalIssues = [];
        this.metrics.forEach((metric)=>{
            // Use optimizationScore if available, otherwise convert performanceGrade to score
            const score = metric.optimizationScore || this.convertGradeToScore(metric.performanceGrade || 'C');
            if (score >= 90) {
                topPerformers.push(`${metric.componentName}: ${score}/100 (EXCELLENT)`);
            } else if (score >= 70) {
                optimizationOpportunities.push(`${metric.componentName}: ${score}/100 (GOOD - room for improvement)`);
            } else if (score >= 50) {
                needsAttention.push(`${metric.componentName}: ${score}/100 (NEEDS ATTENTION)`);
            } else {
                criticalIssues.push(`${metric.componentName}: ${score}/100 (CRITICAL)`);
            }
        });
        return {
            topPerformers,
            needsAttention,
            optimizationOpportunities,
            criticalIssues
        };
    }
    /**
   * Track component lifecycle events
   */ trackComponentLifecycle(componentName, event, duration) {
        _logger.logger.info(`üîÑ Component Lifecycle: ${componentName} ${event} took ${duration}ms`);
        // Record lifecycle metrics
        this.recordMetrics({
            componentName,
            renderCount: 1,
            totalRenderTime: duration,
            averageRenderTime: duration,
            maxRenderTime: duration,
            minRenderTime: duration,
            memoryPeak: 0,
            memoryAverage: 0,
            reRenderTriggers: [],
            performanceBottlenecks: [],
            optimizationScore: this.calculateOptimizationScore(duration, 0, 1),
            recommendations: [],
            renderTime: duration,
            performanceGrade: this.calculatePerformanceGrade(duration)
        });
    }
    /**
   * Analyze performance patterns across multiple runs
   */ analyzePerformancePatterns() {
        const trendingUp = [];
        const trendingDown = [];
        const stable = [];
        const volatile = [];
        // Group metrics by component
        const componentMetrics = new Map();
        this.metrics.forEach((metric)=>{
            if (!componentMetrics.has(metric.componentName)) {
                componentMetrics.set(metric.componentName, []);
            }
            componentMetrics.get(metric.componentName).push(metric);
        });
        // Analyze patterns for each component
        componentMetrics.forEach((metrics, componentName)=>{
            if (metrics.length < 3) {
                stable.push(`${componentName}: insufficient data`);
                return;
            }
            const renderTimes = metrics.map((m)=>m.averageRenderTime);
            const trend = this.calculateTrend(renderTimes);
            const volatility = this.calculateVolatility(renderTimes);
            if (trend > 0.1) {
                trendingUp.push(`${componentName}: +${(trend * 100).toFixed(1)}% trend`);
            } else if (trend < -0.1) {
                trendingDown.push(`${componentName}: ${(trend * 100).toFixed(1)}% trend`);
            } else if (volatility > 0.3) {
                volatile.push(`${componentName}: ${(volatility * 100).toFixed(1)}% volatility`);
            } else {
                stable.push(`${componentName}: stable performance`);
            }
        });
        return {
            trendingUp,
            trendingDown,
            stable,
            volatile
        };
    }
    /**
   * Calculate trend from array of values
   */ calculateTrend(values) {
        if (values.length < 2) return 0;
        const firstHalf = values.slice(0, Math.floor(values.length / 2));
        const secondHalf = values.slice(Math.floor(values.length / 2));
        const firstAvg = firstHalf.reduce((sum, val)=>sum + val, 0) / firstHalf.length;
        const secondAvg = secondHalf.reduce((sum, val)=>sum + val, 0) / secondHalf.length;
        return (secondAvg - firstAvg) / firstAvg;
    }
    /**
   * Calculate volatility (standard deviation / mean)
   */ calculateVolatility(values) {
        if (values.length < 2) return 0;
        const mean = values.reduce((sum, val)=>sum + val, 0) / values.length;
        const variance = values.reduce((sum, val)=>sum + Math.pow(val - mean, 2), 0) / values.length;
        const stdDev = Math.sqrt(variance);
        return stdDev / mean;
    }
    /**
   * Calculate performance grade based on render time
   */ calculatePerformanceGrade(renderTime) {
        if (renderTime <= 50) return 'A+';
        if (renderTime <= 100) return 'A';
        if (renderTime <= 150) return 'B';
        if (renderTime <= 200) return 'C';
        if (renderTime <= 300) return 'D';
        return 'F';
    }
    /**
   * Convert performance grade to numeric score
   */ convertGradeToScore(grade) {
        switch(grade){
            case 'A+':
                return 95;
            case 'A':
                return 90;
            case 'B':
                return 80;
            case 'C':
                return 70;
            case 'D':
                return 60;
            case 'F':
                return 30;
            default:
                return 50;
        }
    }
    constructor(){
        this.profiles = new Map();
        this.metrics = [];
        this.alerts = [];
        this.isProfiling = false;
        this.startTime = 0;
        this.startMemory = 0;
    }
}
const performanceProfiler = new PerformanceProfiler();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvcGVyZm9ybWFuY2UvcGVyZm9ybWFuY2UtcHJvZmlsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAamVzdC1lbnZpcm9ubWVudCBqc2RvbVxuICovXG5cbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvbGliL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZmlsZXJNZXRyaWNzIHtcbiAgY29tcG9uZW50TmFtZTogc3RyaW5nO1xuICByZW5kZXJDb3VudDogbnVtYmVyO1xuICB0b3RhbFJlbmRlclRpbWU6IG51bWJlcjtcbiAgYXZlcmFnZVJlbmRlclRpbWU6IG51bWJlcjtcbiAgbWF4UmVuZGVyVGltZTogbnVtYmVyO1xuICBtaW5SZW5kZXJUaW1lOiBudW1iZXI7XG4gIG1lbW9yeVBlYWs6IG51bWJlcjtcbiAgbWVtb3J5QXZlcmFnZTogbnVtYmVyO1xuICByZVJlbmRlclRyaWdnZXJzOiBzdHJpbmdbXTtcbiAgcGVyZm9ybWFuY2VCb3R0bGVuZWNrczogc3RyaW5nW107XG4gIG9wdGltaXphdGlvblNjb3JlOiBudW1iZXI7XG4gIHJlY29tbWVuZGF0aW9uczogc3RyaW5nW107XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgdGVzdFN1aXRlPzogc3RyaW5nO1xuICBkdXJhdGlvbj86IG51bWJlcjtcbiAgbWVtb3J5VXNhZ2U/OiBudW1iZXI7XG4gIHJlbmRlclRpbWU/OiBudW1iZXI7XG4gIG5ldHdvcmtUaW1lPzogbnVtYmVyO1xuICBhcGlUaW1lPzogbnVtYmVyO1xuICBhY2Nlc3NpYmlsaXR5VGltZT86IG51bWJlcjtcbiAgcGVyZm9ybWFuY2VHcmFkZT86ICdBKycgfCAnQScgfCAnQicgfCAnQycgfCAnRCcgfCAnRic7XG4gIHN0YXR1cz86ICdQQVNTJyB8ICdGQUlMJztcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFByb2ZpbGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljcztcbiAgY2hpbGRyZW46IENvbXBvbmVudFByb2ZpbGVbXTtcbiAgcGFyZW50PzogQ29tcG9uZW50UHJvZmlsZTtcbiAgZGVwdGg6IG51bWJlcjtcbiAgaXNPcHRpbWl6ZWQ6IGJvb2xlYW47XG4gIG9wdGltaXphdGlvblBvdGVudGlhbDogJ0hJR0gnIHwgJ01FRElVTScgfCAnTE9XJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJmb3JtYW5jZUFuYWx5c2lzIHtcbiAgb3ZlcmFsbFNjb3JlOiBudW1iZXI7XG4gIGNyaXRpY2FsSXNzdWVzOiBzdHJpbmdbXTtcbiAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogc3RyaW5nW107XG4gIG1lbW9yeUxlYWtzOiBzdHJpbmdbXTtcbiAgcmVuZGVyT3B0aW1pemF0aW9uczogc3RyaW5nW107XG4gIG5ldHdvcmtPcHRpbWl6YXRpb25zOiBzdHJpbmdbXTtcbiAgYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnM6IHN0cmluZ1tdO1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xuICBlc3RpbWF0ZWRJbXByb3ZlbWVudDogbnVtYmVyOyAvLyBwZXJjZW50YWdlXG59XG5cbmV4cG9ydCBjbGFzcyBQZXJmb3JtYW5jZVByb2ZpbGVyIHtcbiAgcHJpdmF0ZSBwcm9maWxlczogTWFwPHN0cmluZywgQ29tcG9uZW50UHJvZmlsZT4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgbWV0cmljczogUHJvZmlsZXJNZXRyaWNzW10gPSBbXTtcbiAgcHJpdmF0ZSBhbGVydHM6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgaXNQcm9maWxpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBzdGFydFRpbWU6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgc3RhcnRNZW1vcnk6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHByb2ZpbGluZyBhIGNvbXBvbmVudFxuICAgKi9cbiAgc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5pc1Byb2ZpbGluZyA9IHRydWU7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB0aGlzLnN0YXJ0TWVtb3J5ID0gKHBlcmZvcm1hbmNlIGFzIGFueSkubWVtb3J5Py51c2VkSlNIZWFwU2l6ZSB8fCAwO1xuICAgIFxuICAgIGxvZ2dlci5pbmZvKGDwn5SNIFN0YXJ0aW5nIHBlcmZvcm1hbmNlIHByb2ZpbGluZyBmb3I6ICR7Y29tcG9uZW50TmFtZX1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHByb2ZpbGluZyBhbmQgcmVjb3JkIG1ldHJpY3NcbiAgICovXG4gIHN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZTogc3RyaW5nLCByZW5kZXJDb3VudDogbnVtYmVyID0gMSk6IFByb2ZpbGVyTWV0cmljcyB7XG4gICAgaWYgKCF0aGlzLmlzUHJvZmlsaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2ZpbGluZyBub3Qgc3RhcnRlZC4gQ2FsbCBzdGFydFByb2ZpbGluZygpIGZpcnN0LicpO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBlbmRNZW1vcnkgPSAocGVyZm9ybWFuY2UgYXMgYW55KS5tZW1vcnk/LnVzZWRKU0hlYXBTaXplIHx8IDA7XG4gICAgXG4gICAgY29uc3QgdG90YWxSZW5kZXJUaW1lID0gZW5kVGltZSAtIHRoaXMuc3RhcnRUaW1lO1xuICAgIGNvbnN0IGF2ZXJhZ2VSZW5kZXJUaW1lID0gdG90YWxSZW5kZXJUaW1lIC8gcmVuZGVyQ291bnQ7XG4gICAgY29uc3QgbWVtb3J5VXNlZCA9IChlbmRNZW1vcnkgLSB0aGlzLnN0YXJ0TWVtb3J5KSAvICgxMDI0ICogMTAyNCk7XG4gICAgXG4gICAgY29uc3QgbWV0cmljczogUHJvZmlsZXJNZXRyaWNzID0ge1xuICAgICAgY29tcG9uZW50TmFtZSxcbiAgICAgIHJlbmRlckNvdW50LFxuICAgICAgdG90YWxSZW5kZXJUaW1lLFxuICAgICAgYXZlcmFnZVJlbmRlclRpbWUsXG4gICAgICBtYXhSZW5kZXJUaW1lOiB0b3RhbFJlbmRlclRpbWUsXG4gICAgICBtaW5SZW5kZXJUaW1lOiB0b3RhbFJlbmRlclRpbWUsXG4gICAgICBtZW1vcnlQZWFrOiBtZW1vcnlVc2VkLFxuICAgICAgbWVtb3J5QXZlcmFnZTogbWVtb3J5VXNlZCxcbiAgICAgIHJlUmVuZGVyVHJpZ2dlcnM6IHRoaXMuYW5hbHl6ZVJlUmVuZGVyVHJpZ2dlcnMoY29tcG9uZW50TmFtZSksXG4gICAgICBwZXJmb3JtYW5jZUJvdHRsZW5lY2tzOiB0aGlzLmFuYWx5emVCb3R0bGVuZWNrcyh0b3RhbFJlbmRlclRpbWUsIG1lbW9yeVVzZWQpLFxuICAgICAgb3B0aW1pemF0aW9uU2NvcmU6IHRoaXMuY2FsY3VsYXRlT3B0aW1pemF0aW9uU2NvcmUodG90YWxSZW5kZXJUaW1lLCBtZW1vcnlVc2VkLCByZW5kZXJDb3VudCksXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IHRoaXMuZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnModG90YWxSZW5kZXJUaW1lLCBtZW1vcnlVc2VkLCByZW5kZXJDb3VudCksXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgfTtcblxuICAgIHRoaXMubWV0cmljcy5wdXNoKG1ldHJpY3MpO1xuICAgIHRoaXMuaXNQcm9maWxpbmcgPSBmYWxzZTtcbiAgICBcbiAgICBsb2dnZXIuaW5mbyhg4pyFIFBlcmZvcm1hbmNlIHByb2ZpbGluZyBjb21wbGV0ZWQgZm9yOiAke2NvbXBvbmVudE5hbWV9YCk7XG4gICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIFRpbWU6ICR7dG90YWxSZW5kZXJUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgVXNlZDogJHttZW1vcnlVc2VkLnRvRml4ZWQoMil9TUJgKTtcbiAgICBsb2dnZXIuaW5mbyhgLSBPcHRpbWl6YXRpb24gU2NvcmU6ICR7bWV0cmljcy5vcHRpbWl6YXRpb25TY29yZX0vMTAwYCk7XG4gICAgXG4gICAgcmV0dXJuIG1ldHJpY3M7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSByZS1yZW5kZXIgdHJpZ2dlcnNcbiAgICovXG4gIHByaXZhdGUgYW5hbHl6ZVJlUmVuZGVyVHJpZ2dlcnMoY29tcG9uZW50TmFtZTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHRyaWdnZXJzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIC8vIEFuYWx5emUgYWN0dWFsIHJlLXJlbmRlciB0cmlnZ2VycyBiYXNlZCBvbiBjb21wb25lbnQgYmVoYXZpb3JcbiAgICBjb25zdCByZW5kZXJDb3VudCA9IHRoaXMubWV0cmljcy5maWx0ZXIobSA9PiBtLmNvbXBvbmVudE5hbWUgPT09IGNvbXBvbmVudE5hbWUpLmxlbmd0aDtcbiAgICBjb25zdCByZWNlbnRNZXRyaWNzID0gdGhpcy5tZXRyaWNzLmZpbHRlcihtID0+IG0uY29tcG9uZW50TmFtZSA9PT0gY29tcG9uZW50TmFtZSkuc2xpY2UoLTMpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBleGNlc3NpdmUgcmUtcmVuZGVyc1xuICAgIGlmIChyZW5kZXJDb3VudCA+IDUpIHtcbiAgICAgIHRyaWdnZXJzLnB1c2goJ0V4Y2Vzc2l2ZSByZS1yZW5kZXJzIGRldGVjdGVkJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGZvciByZW5kZXIgdGltZSBwYXR0ZXJuc1xuICAgIGlmIChyZWNlbnRNZXRyaWNzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGF2Z1JlbmRlclRpbWUgPSByZWNlbnRNZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLmF2ZXJhZ2VSZW5kZXJUaW1lLCAwKSAvIHJlY2VudE1ldHJpY3MubGVuZ3RoO1xuICAgICAgaWYgKGF2Z1JlbmRlclRpbWUgPiAxMDApIHtcbiAgICAgICAgdHJpZ2dlcnMucHVzaCgnU2xvdyByZW5kZXIgdGltZXMnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIG1lbW9yeSBwYXR0ZXJuc1xuICAgIGlmIChyZWNlbnRNZXRyaWNzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IG1lbW9yeVRyZW5kID0gcmVjZW50TWV0cmljcy5tYXAobSA9PiBtLm1lbW9yeVBlYWspO1xuICAgICAgY29uc3QgaXNJbmNyZWFzaW5nID0gbWVtb3J5VHJlbmQuZXZlcnkoKHZhbCwgaSkgPT4gaSA9PT0gMCB8fCB2YWwgPj0gKG1lbW9yeVRyZW5kW2kgLSAxXSB8fCAwKSk7XG4gICAgICBpZiAoaXNJbmNyZWFzaW5nICYmIChtZW1vcnlUcmVuZFttZW1vcnlUcmVuZC5sZW5ndGggLSAxXSB8fCAwKSA+IDUpIHtcbiAgICAgICAgdHJpZ2dlcnMucHVzaCgnSW5jcmVhc2luZyBtZW1vcnkgdXNhZ2UgcGF0dGVybicpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBmb3IgcGVyZm9ybWFuY2UgZGVncmFkYXRpb25cbiAgICBpZiAocmVjZW50TWV0cmljcy5sZW5ndGggPiAyKSB7XG4gICAgICBjb25zdCBzY29yZXMgPSByZWNlbnRNZXRyaWNzLm1hcChtID0+IG0ub3B0aW1pemF0aW9uU2NvcmUpO1xuICAgICAgY29uc3QgaXNEZWdyYWRpbmcgPSBzY29yZXMuZXZlcnkoKHNjb3JlLCBpKSA9PiBpID09PSAwIHx8IHNjb3JlIDw9IChzY29yZXNbaSAtIDFdIHx8IDApKTtcbiAgICAgIGlmIChpc0RlZ3JhZGluZyAmJiAoc2NvcmVzW3Njb3Jlcy5sZW5ndGggLSAxXSB8fCAwKSA8IDcwKSB7XG4gICAgICAgIHRyaWdnZXJzLnB1c2goJ1BlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uIGRldGVjdGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENvbXBvbmVudC1zcGVjaWZpYyB0cmlnZ2Vyc1xuICAgIGlmIChjb21wb25lbnROYW1lLmluY2x1ZGVzKCdGZWVkJykgfHwgY29tcG9uZW50TmFtZS5pbmNsdWRlcygnTW9iaWxlJykpIHtcbiAgICAgIHRyaWdnZXJzLnB1c2goJ0xhcmdlIGNvbXBvbmVudCB3aXRoIGNvbXBsZXggc3RhdGUgbWFuYWdlbWVudCcpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY29tcG9uZW50TmFtZS5pbmNsdWRlcygnU3RvcmUnKSB8fCBjb21wb25lbnROYW1lLmluY2x1ZGVzKCdadXN0YW5kJykpIHtcbiAgICAgIHRyaWdnZXJzLnB1c2goJ1N0YXRlIG1hbmFnZW1lbnQgdXBkYXRlcycpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJpZ2dlcnM7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBwZXJmb3JtYW5jZSBib3R0bGVuZWNrc1xuICAgKi9cbiAgcHJpdmF0ZSBhbmFseXplQm90dGxlbmVja3MocmVuZGVyVGltZTogbnVtYmVyLCBtZW1vcnlVc2FnZTogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGJvdHRsZW5lY2tzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGlmIChyZW5kZXJUaW1lID4gMjAwKSB7XG4gICAgICBib3R0bGVuZWNrcy5wdXNoKCdTbG93IHJlbmRlciB0aW1lICg+MjAwbXMpJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChtZW1vcnlVc2FnZSA+IDEwKSB7XG4gICAgICBib3R0bGVuZWNrcy5wdXNoKCdIaWdoIG1lbW9yeSB1c2FnZSAoPjEwTUIpJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZW5kZXJUaW1lID4gMTAwICYmIG1lbW9yeVVzYWdlID4gNSkge1xuICAgICAgYm90dGxlbmVja3MucHVzaCgnQ29tYmluZWQgcGVyZm9ybWFuY2UgaXNzdWVzJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBib3R0bGVuZWNrcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgb3B0aW1pemF0aW9uIHNjb3JlICgwLTEwMClcbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlT3B0aW1pemF0aW9uU2NvcmUocmVuZGVyVGltZTogbnVtYmVyLCBtZW1vcnlVc2FnZTogbnVtYmVyLCByZW5kZXJDb3VudDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgc2NvcmUgPSAxMDA7XG4gICAgXG4gICAgLy8gRGVkdWN0IHBvaW50cyBmb3Igc2xvdyByZW5kZXIgdGltZXNcbiAgICBpZiAocmVuZGVyVGltZSA+IDMwMCkgc2NvcmUgLT0gNDA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDIwMCkgc2NvcmUgLT0gMzA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDEwMCkgc2NvcmUgLT0gMjA7XG4gICAgZWxzZSBpZiAocmVuZGVyVGltZSA+IDUwKSBzY29yZSAtPSAxMDtcbiAgICBcbiAgICAvLyBEZWR1Y3QgcG9pbnRzIGZvciBoaWdoIG1lbW9yeSB1c2FnZVxuICAgIGlmIChtZW1vcnlVc2FnZSA+IDIwKSBzY29yZSAtPSA0MDtcbiAgICBlbHNlIGlmIChtZW1vcnlVc2FnZSA+IDEwKSBzY29yZSAtPSAzMDtcbiAgICBlbHNlIGlmIChtZW1vcnlVc2FnZSA+IDUpIHNjb3JlIC09IDIwO1xuICAgIGVsc2UgaWYgKG1lbW9yeVVzYWdlID4gMikgc2NvcmUgLT0gMTA7XG4gICAgXG4gICAgLy8gRGVkdWN0IHBvaW50cyBmb3IgZXhjZXNzaXZlIHJlLXJlbmRlcnNcbiAgICBpZiAocmVuZGVyQ291bnQgPiAxMCkgc2NvcmUgLT0gMjA7XG4gICAgZWxzZSBpZiAocmVuZGVyQ291bnQgPiA1KSBzY29yZSAtPSAxMDtcbiAgICBcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2NvcmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMocmVuZGVyVGltZTogbnVtYmVyLCBtZW1vcnlVc2FnZTogbnVtYmVyLCByZW5kZXJDb3VudDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBpZiAocmVuZGVyVGltZSA+IDIwMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ+KaoSBJbXBsZW1lbnQgUmVhY3QubWVtbyBmb3IgZXhwZW5zaXZlIGNvbXBvbmVudHMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfimqEgVXNlIHVzZU1lbW8vdXNlQ2FsbGJhY2sgZm9yIGV4cGVuc2l2ZSBjYWxjdWxhdGlvbnMnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfimqEgQ29uc2lkZXIgbGF6eSBsb2FkaW5nIGZvciBoZWF2eSBjb21wb25lbnRzJyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChtZW1vcnlVc2FnZSA+IDEwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+noCBJbXBsZW1lbnQgcHJvcGVyIGNsZWFudXAgaW4gdXNlRWZmZWN0IGhvb2tzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+noCBSZXZpZXcgbWVtb3J5IGxlYWtzIGluIGV2ZW50IGxpc3RlbmVycycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/Cfp6AgQ29uc2lkZXIgY29tcG9uZW50IHVubW91bnRpbmcgc3RyYXRlZ2llcycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAocmVuZGVyQ291bnQgPiA1KSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UhCBPcHRpbWl6ZSB1c2VFZmZlY3QgZGVwZW5kZW5jaWVzJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+UhCBDb25zaWRlciBzdGF0ZSBtYW5hZ2VtZW50IG9wdGltaXphdGlvbicpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/CflIQgUmV2aWV3IGNvbXBvbmVudCByZS1yZW5kZXIgcGF0dGVybnMnKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlY29tbWVuZGF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfinIUgQ29tcG9uZW50IGlzIHdlbGwgb3B0aW1pemVkIScpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBjb21wb25lbnQgcHJvZmlsZVxuICAgKi9cbiAgY3JlYXRlQ29tcG9uZW50UHJvZmlsZShuYW1lOiBzdHJpbmcsIG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljcyk6IENvbXBvbmVudFByb2ZpbGUge1xuICAgIGNvbnN0IHByb2ZpbGU6IENvbXBvbmVudFByb2ZpbGUgPSB7XG4gICAgICBuYW1lLFxuICAgICAgbWV0cmljcyxcbiAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgIGRlcHRoOiAwLFxuICAgICAgaXNPcHRpbWl6ZWQ6IG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUgPiA4MCxcbiAgICAgIG9wdGltaXphdGlvblBvdGVudGlhbDogdGhpcy5jYWxjdWxhdGVPcHRpbWl6YXRpb25Qb3RlbnRpYWwobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSksXG4gICAgfTtcbiAgICBcbiAgICB0aGlzLnByb2ZpbGVzLnNldChuYW1lLCBwcm9maWxlKTtcbiAgICByZXR1cm4gcHJvZmlsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgb3B0aW1pemF0aW9uIHBvdGVudGlhbFxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVPcHRpbWl6YXRpb25Qb3RlbnRpYWwoc2NvcmU6IG51bWJlcik6ICdISUdIJyB8ICdNRURJVU0nIHwgJ0xPVycge1xuICAgIGlmIChzY29yZSA8IDUwKSByZXR1cm4gJ0hJR0gnO1xuICAgIGlmIChzY29yZSA8IDgwKSByZXR1cm4gJ01FRElVTSc7XG4gICAgcmV0dXJuICdMT1cnO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICovXG4gIGdlbmVyYXRlUGVyZm9ybWFuY2VBbmFseXNpcygpOiBQZXJmb3JtYW5jZUFuYWx5c2lzIHtcbiAgICBjb25zdCBhbGxNZXRyaWNzID0gdGhpcy5tZXRyaWNzO1xuICAgIGNvbnN0IHRvdGFsVGVzdHMgPSBhbGxNZXRyaWNzLmxlbmd0aDtcbiAgICBcbiAgICBpZiAodG90YWxUZXN0cyA9PT0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3ZlcmFsbFNjb3JlOiAwLFxuICAgICAgICBjcml0aWNhbElzc3VlczogWydObyBwZXJmb3JtYW5jZSBkYXRhIGF2YWlsYWJsZSddLFxuICAgICAgICBvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzOiBbXSxcbiAgICAgICAgbWVtb3J5TGVha3M6IFtdLFxuICAgICAgICByZW5kZXJPcHRpbWl6YXRpb25zOiBbXSxcbiAgICAgICAgbmV0d29ya09wdGltaXphdGlvbnM6IFtdLFxuICAgICAgICBhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9uczogW10sXG4gICAgICAgIHJlY29tbWVuZGF0aW9uczogWydSdW4gcGVyZm9ybWFuY2UgdGVzdHMgdG8gZ2VuZXJhdGUgYW5hbHlzaXMnXSxcbiAgICAgICAgZXN0aW1hdGVkSW1wcm92ZW1lbnQ6IDAsXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBhdmVyYWdlU2NvcmUgPSBhbGxNZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyBtLm9wdGltaXphdGlvblNjb3JlLCAwKSAvIHRvdGFsVGVzdHM7XG4gICAgY29uc3QgY3JpdGljYWxJc3N1ZXMgPSB0aGlzLmlkZW50aWZ5Q3JpdGljYWxJc3N1ZXMoYWxsTWV0cmljcyk7XG4gICAgY29uc3Qgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyA9IHRoaXMuaWRlbnRpZnlPcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzKGFsbE1ldHJpY3MpO1xuICAgIGNvbnN0IG1lbW9yeUxlYWtzID0gdGhpcy5pZGVudGlmeU1lbW9yeUxlYWtzKGFsbE1ldHJpY3MpO1xuICAgIGNvbnN0IHJlbmRlck9wdGltaXphdGlvbnMgPSB0aGlzLmlkZW50aWZ5UmVuZGVyT3B0aW1pemF0aW9ucyhhbGxNZXRyaWNzKTtcbiAgICBjb25zdCBuZXR3b3JrT3B0aW1pemF0aW9ucyA9IHRoaXMuaWRlbnRpZnlOZXR3b3JrT3B0aW1pemF0aW9ucyhhbGxNZXRyaWNzKTtcbiAgICBjb25zdCBhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyA9IHRoaXMuaWRlbnRpZnlBY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyhhbGxNZXRyaWNzKTtcbiAgICBcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB0aGlzLmdlbmVyYXRlQ29tcHJlaGVuc2l2ZVJlY29tbWVuZGF0aW9ucyhcbiAgICAgIGNyaXRpY2FsSXNzdWVzLFxuICAgICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyxcbiAgICAgIG1lbW9yeUxlYWtzLFxuICAgICAgcmVuZGVyT3B0aW1pemF0aW9ucyxcbiAgICAgIG5ldHdvcmtPcHRpbWl6YXRpb25zLFxuICAgICAgYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnNcbiAgICApO1xuICAgIFxuICAgIGNvbnN0IGVzdGltYXRlZEltcHJvdmVtZW50ID0gdGhpcy5jYWxjdWxhdGVFc3RpbWF0ZWRJbXByb3ZlbWVudChhbGxNZXRyaWNzKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcmFsbFNjb3JlOiBhdmVyYWdlU2NvcmUsXG4gICAgICBjcml0aWNhbElzc3VlcyxcbiAgICAgIG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMsXG4gICAgICBtZW1vcnlMZWFrcyxcbiAgICAgIHJlbmRlck9wdGltaXphdGlvbnMsXG4gICAgICBuZXR3b3JrT3B0aW1pemF0aW9ucyxcbiAgICAgIGFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zLFxuICAgICAgcmVjb21tZW5kYXRpb25zLFxuICAgICAgZXN0aW1hdGVkSW1wcm92ZW1lbnQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZGVudGlmeSBjcml0aWNhbCBwZXJmb3JtYW5jZSBpc3N1ZXNcbiAgICovXG4gIHByaXZhdGUgaWRlbnRpZnlDcml0aWNhbElzc3VlcyhtZXRyaWNzOiBQcm9maWxlck1ldHJpY3NbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBpc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgY29uc3Qgc2xvd0NvbXBvbmVudHMgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0uYXZlcmFnZVJlbmRlclRpbWUgPiAyMDApO1xuICAgIGNvbnN0IGhpZ2hNZW1vcnlDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLm1lbW9yeVBlYWsgPiAxMCk7XG4gICAgY29uc3QgbG93U2NvcmVDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLm9wdGltaXphdGlvblNjb3JlIDwgNTApO1xuICAgIFxuICAgIGlmIChzbG93Q29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBpc3N1ZXMucHVzaChg8J+QjCAke3Nsb3dDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyB3aXRoIHNsb3cgcmVuZGVyIHRpbWVzICg+MjAwbXMpYCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChoaWdoTWVtb3J5Q29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBpc3N1ZXMucHVzaChg8J+noCAke2hpZ2hNZW1vcnlDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyB3aXRoIGhpZ2ggbWVtb3J5IHVzYWdlICg+MTBNQilgKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGxvd1Njb3JlQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBpc3N1ZXMucHVzaChg4pqg77iPICR7bG93U2NvcmVDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyB3aXRoIHBvb3Igb3B0aW1pemF0aW9uIHNjb3JlcyAoPDUwKWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaXNzdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIElkZW50aWZ5IG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzXG4gICAqL1xuICBwcml2YXRlIGlkZW50aWZ5T3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyhtZXRyaWNzOiBQcm9maWxlck1ldHJpY3NbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBvcHBvcnR1bml0aWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGNvbnN0IG1lZGl1bVNjb3JlQ29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5vcHRpbWl6YXRpb25TY29yZSA+PSA1MCAmJiBtLm9wdGltaXphdGlvblNjb3JlIDwgODApO1xuICAgIGNvbnN0IGhpZ2hSZW5kZXJDb3VudENvbXBvbmVudHMgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ucmVuZGVyQ291bnQgPiA1KTtcbiAgICBcbiAgICBpZiAobWVkaXVtU2NvcmVDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wcG9ydHVuaXRpZXMucHVzaChg8J+TiCAke21lZGl1bVNjb3JlQ29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgd2l0aCBtZWRpdW0gb3B0aW1pemF0aW9uIHBvdGVudGlhbGApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaGlnaFJlbmRlckNvdW50Q29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBvcHBvcnR1bml0aWVzLnB1c2goYPCflIQgJHtoaWdoUmVuZGVyQ291bnRDb21wb25lbnRzLmxlbmd0aH0gY29tcG9uZW50cyB3aXRoIGV4Y2Vzc2l2ZSByZS1yZW5kZXJzYCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBvcHBvcnR1bml0aWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIElkZW50aWZ5IG1lbW9yeSBsZWFrc1xuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmeU1lbW9yeUxlYWtzKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljc1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxlYWtzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIGNvbnN0IGhpZ2hNZW1vcnlDb21wb25lbnRzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLm1lbW9yeVBlYWsgPiAxMCk7XG4gICAgY29uc3QgaW5jcmVhc2luZ01lbW9yeUNvbXBvbmVudHMgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ubWVtb3J5UGVhayA+IG0ubWVtb3J5QXZlcmFnZSAqIDIpO1xuICAgIFxuICAgIGlmIChoaWdoTWVtb3J5Q29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBsZWFrcy5wdXNoKGDwn6egICR7aGlnaE1lbW9yeUNvbXBvbmVudHMubGVuZ3RofSBjb21wb25lbnRzIHdpdGggaGlnaCBtZW1vcnkgdXNhZ2VgKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGluY3JlYXNpbmdNZW1vcnlDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxlYWtzLnB1c2goYPCfk4ggJHtpbmNyZWFzaW5nTWVtb3J5Q29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgd2l0aCBpbmNyZWFzaW5nIG1lbW9yeSB1c2FnZWApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGVha3M7XG4gIH1cblxuICAvKipcbiAgICogSWRlbnRpZnkgcmVuZGVyIG9wdGltaXphdGlvbnNcbiAgICovXG4gIHByaXZhdGUgaWRlbnRpZnlSZW5kZXJPcHRpbWl6YXRpb25zKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljc1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG9wdGltaXphdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgY29uc3Qgc2xvd1JlbmRlckNvbXBvbmVudHMgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0uYXZlcmFnZVJlbmRlclRpbWUgPiAxMDApO1xuICAgIGNvbnN0IGhpZ2hSZW5kZXJDb3VudENvbXBvbmVudHMgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ucmVuZGVyQ291bnQgPiAzKTtcbiAgICBcbiAgICBpZiAoc2xvd1JlbmRlckNvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKGDimqEgJHtzbG93UmVuZGVyQ29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgbmVlZCByZW5kZXIgb3B0aW1pemF0aW9uYCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChoaWdoUmVuZGVyQ291bnRDb21wb25lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaChg4pqhICR7aGlnaFJlbmRlckNvdW50Q29tcG9uZW50cy5sZW5ndGh9IGNvbXBvbmVudHMgbmVlZCByZS1yZW5kZXIgb3B0aW1pemF0aW9uYCk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBvcHRpbWl6YXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIElkZW50aWZ5IG5ldHdvcmsgb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmeU5ldHdvcmtPcHRpbWl6YXRpb25zKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljc1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG9wdGltaXphdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQW5hbHl6ZSBuZXR3b3JrLXJlbGF0ZWQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgIGNvbnN0IG5ldHdvcmtNZXRyaWNzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLm5ldHdvcmtUaW1lICYmIG0ubmV0d29ya1RpbWUgPiAwKTtcbiAgICBjb25zdCBoaWdoTmV0d29ya1RpbWUgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0ubmV0d29ya1RpbWUgJiYgbS5uZXR3b3JrVGltZSA+IDMwMCk7XG4gICAgY29uc3QgYXBpTWV0cmljcyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5hcGlUaW1lICYmIG0uYXBpVGltZSA+IDApO1xuICAgIGNvbnN0IGhpZ2hBcGlUaW1lID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmFwaVRpbWUgJiYgbS5hcGlUaW1lID4gMjAwKTtcbiAgICBcbiAgICAvLyBOZXR3b3JrIHBlcmZvcm1hbmNlIGFuYWx5c2lzXG4gICAgaWYgKG5ldHdvcmtNZXRyaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGF2Z05ldHdvcmtUaW1lID0gbmV0d29ya01ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIChtLm5ldHdvcmtUaW1lIHx8IDApLCAwKSAvIG5ldHdvcmtNZXRyaWNzLmxlbmd0aDtcbiAgICAgIGlmIChhdmdOZXR3b3JrVGltZSA+IDIwMCkge1xuICAgICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ/CfjJAgSGlnaCBuZXR3b3JrIGxhdGVuY3kgZGV0ZWN0ZWQgLSBjb25zaWRlciBDRE4gaW1wbGVtZW50YXRpb24nKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdmdOZXR3b3JrVGltZSA+IDUwMCkge1xuICAgICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ/CfjJAgQ3JpdGljYWwgbmV0d29yayBwZXJmb3JtYW5jZSBpc3N1ZXMgLSBvcHRpbWl6ZSBBUEkgZW5kcG9pbnRzJyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFQSSBwZXJmb3JtYW5jZSBhbmFseXNpc1xuICAgIGlmIChhcGlNZXRyaWNzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGF2Z0FwaVRpbWUgPSBhcGlNZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyAobS5hcGlUaW1lIHx8IDApLCAwKSAvIGFwaU1ldHJpY3MubGVuZ3RoO1xuICAgICAgaWYgKGF2Z0FwaVRpbWUgPiAxNTApIHtcbiAgICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn5SMIEFQSSByZXNwb25zZSB0aW1lcyBhcmUgc2xvdyAtIGltcGxlbWVudCBjYWNoaW5nIHN0cmF0ZWdpZXMnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdmdBcGlUaW1lID4gMzAwKSB7XG4gICAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn8J+UjCBDcml0aWNhbCBBUEkgcGVyZm9ybWFuY2UgaXNzdWVzIC0gb3B0aW1pemUgZGF0YWJhc2UgcXVlcmllcycpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBOZXR3b3JrIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gcGF0dGVybnNcbiAgICBpZiAoaGlnaE5ldHdvcmtUaW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn8J+MkCBJbXBsZW1lbnQgcmVxdWVzdCBiYXRjaGluZyBmb3IgbXVsdGlwbGUgQVBJIGNhbGxzJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ/CfjJAgQWRkIHJlcXVlc3QgZGVkdXBsaWNhdGlvbiB0byBwcmV2ZW50IGR1cGxpY2F0ZSBjYWxscycpO1xuICAgIH1cbiAgICBcbiAgICBpZiAoaGlnaEFwaVRpbWUubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn5SMIEltcGxlbWVudCBBUEkgcmVzcG9uc2UgY2FjaGluZyB3aXRoIFRUTCcpO1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn5SMIEFkZCBkYXRhYmFzZSBxdWVyeSBvcHRpbWl6YXRpb24nKTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2VuZXJhbCBuZXR3b3JrIG9wdGltaXphdGlvbnNcbiAgICBpZiAobmV0d29ya01ldHJpY3MubGVuZ3RoID4gMikge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfwn4yQIENvbnNpZGVyIGltcGxlbWVudGluZyBzZXJ2aWNlIHdvcmtlciBmb3Igb2ZmbGluZSBjYWNoaW5nJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ/CfjJAgQWRkIHJlcXVlc3QgY29tcHJlc3Npb24gZm9yIGxhcmdlIHBheWxvYWRzJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBvcHRpbWl6YXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIElkZW50aWZ5IGFjY2Vzc2liaWxpdHkgb3B0aW1pemF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBpZGVudGlmeUFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zKG1ldHJpY3M6IFByb2ZpbGVyTWV0cmljc1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG9wdGltaXphdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gQW5hbHl6ZSBhY2Nlc3NpYmlsaXR5LXJlbGF0ZWQgcGVyZm9ybWFuY2UgbWV0cmljc1xuICAgIGNvbnN0IGFjY2Vzc2liaWxpdHlNZXRyaWNzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmFjY2Vzc2liaWxpdHlUaW1lICYmIG0uYWNjZXNzaWJpbGl0eVRpbWUgPiAwKTtcbiAgICBjb25zdCBoaWdoQWNjZXNzaWJpbGl0eVRpbWUgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0uYWNjZXNzaWJpbGl0eVRpbWUgJiYgbS5hY2Nlc3NpYmlsaXR5VGltZSA+IDUwKTtcbiAgICBjb25zdCBzbG93Q29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5hdmVyYWdlUmVuZGVyVGltZSA+IDEwMCk7XG4gICAgY29uc3QgbWVtb3J5SW50ZW5zaXZlQ29tcG9uZW50cyA9IG1ldHJpY3MuZmlsdGVyKG0gPT4gbS5tZW1vcnlQZWFrID4gNSk7XG4gICAgXG4gICAgLy8gQWNjZXNzaWJpbGl0eSBwZXJmb3JtYW5jZSBhbmFseXNpc1xuICAgIGlmIChhY2Nlc3NpYmlsaXR5TWV0cmljcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBhdmdBY2Nlc3NpYmlsaXR5VGltZSA9IGFjY2Vzc2liaWxpdHlNZXRyaWNzLnJlZHVjZSgoc3VtLCBtKSA9PiBzdW0gKyAobS5hY2Nlc3NpYmlsaXR5VGltZSB8fCAwKSwgMCkgLyBhY2Nlc3NpYmlsaXR5TWV0cmljcy5sZW5ndGg7XG4gICAgICBpZiAoYXZnQWNjZXNzaWJpbGl0eVRpbWUgPiAzMCkge1xuICAgICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBTY3JlZW4gcmVhZGVyIHBlcmZvcm1hbmNlIGlzIHNsb3cgLSBvcHRpbWl6ZSBBUklBIGFubm91bmNlbWVudHMnKTtcbiAgICAgIH1cbiAgICAgIGlmIChhdmdBY2Nlc3NpYmlsaXR5VGltZSA+IDc1KSB7XG4gICAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IENyaXRpY2FsIGFjY2Vzc2liaWxpdHkgcGVyZm9ybWFuY2UgaXNzdWVzIC0gcmV2aWV3IHNjcmVlbiByZWFkZXIgaW1wbGVtZW50YXRpb24nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2NyZWVuIHJlYWRlciBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKGhpZ2hBY2Nlc3NpYmlsaXR5VGltZS5sZW5ndGggPiAwKSB7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBJbXBsZW1lbnQgZWZmaWNpZW50IGxpdmUgcmVnaW9uIG1hbmFnZW1lbnQgZm9yIHNjcmVlbiByZWFkZXJzJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBPcHRpbWl6ZSBBUklBIGF0dHJpYnV0ZSByZW5kZXJpbmcgcGVyZm9ybWFuY2UnKTtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IEFkZCBkZWJvdW5jaW5nIGZvciBzY3JlZW4gcmVhZGVyIGFubm91bmNlbWVudHMnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gS2V5Ym9hcmQgbmF2aWdhdGlvbiBvcHRpbWl6YXRpb25cbiAgICBpZiAoc2xvd0NvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gT3B0aW1pemUga2V5Ym9hcmQgbmF2aWdhdGlvbiBmb3Igc2xvdy1yZW5kZXJpbmcgY29tcG9uZW50cycpO1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gSW1wbGVtZW50IGZvY3VzIG1hbmFnZW1lbnQgb3B0aW1pemF0aW9uJyk7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBBZGQga2V5Ym9hcmQgc2hvcnRjdXQgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRzJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIE1lbW9yeSBvcHRpbWl6YXRpb24gZm9yIGFjY2Vzc2liaWxpdHlcbiAgICBpZiAobWVtb3J5SW50ZW5zaXZlQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBvcHRpbWl6YXRpb25zLnB1c2goJ+KZvyBPcHRpbWl6ZSBhY2Nlc3NpYmlsaXR5IGZlYXR1cmVzIGZvciBtZW1vcnktaW50ZW5zaXZlIGNvbXBvbmVudHMnKTtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IEltcGxlbWVudCBlZmZpY2llbnQgYWNjZXNzaWJpbGl0eSBzdGF0ZSBtYW5hZ2VtZW50Jyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYWwgYWNjZXNzaWJpbGl0eSBvcHRpbWl6YXRpb25zXG4gICAgaWYgKG1ldHJpY3MubGVuZ3RoID4gMikge1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gQ29uc2lkZXIgaW1wbGVtZW50aW5nIGFjY2Vzc2liaWxpdHkgcGVyZm9ybWFuY2UgbW9uaXRvcmluZycpO1xuICAgICAgb3B0aW1pemF0aW9ucy5wdXNoKCfimb8gQWRkIGFjY2Vzc2liaWxpdHkgZmVhdHVyZSBsYXp5IGxvYWRpbmcnKTtcbiAgICAgIG9wdGltaXphdGlvbnMucHVzaCgn4pm/IE9wdGltaXplIGFjY2Vzc2liaWxpdHkgdGVzdGluZyBwZXJmb3JtYW5jZScpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gb3B0aW1pemF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBjb21wcmVoZW5zaXZlIHJlY29tbWVuZGF0aW9uc1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvbXByZWhlbnNpdmVSZWNvbW1lbmRhdGlvbnMoXG4gICAgY3JpdGljYWxJc3N1ZXM6IHN0cmluZ1tdLFxuICAgIG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXM6IHN0cmluZ1tdLFxuICAgIG1lbW9yeUxlYWtzOiBzdHJpbmdbXSxcbiAgICByZW5kZXJPcHRpbWl6YXRpb25zOiBzdHJpbmdbXSxcbiAgICBuZXR3b3JrT3B0aW1pemF0aW9uczogc3RyaW5nW10sXG4gICAgYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnM6IHN0cmluZ1tdXG4gICk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgaWYgKGNyaXRpY2FsSXNzdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfwn5qoIFBSSU9SSVRZOiBBZGRyZXNzIGNyaXRpY2FsIHBlcmZvcm1hbmNlIGlzc3VlcycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goLi4uY3JpdGljYWxJc3N1ZXMpO1xuICAgIH1cbiAgICBcbiAgICBpZiAobWVtb3J5TGVha3MubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ/Cfp6AgUFJJT1JJVFk6IEZpeCBtZW1vcnkgbGVha3MnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLm1lbW9yeUxlYWtzKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlbmRlck9wdGltaXphdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ+KaoSBISUdIOiBPcHRpbWl6ZSByZW5kZXIgcGVyZm9ybWFuY2UnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLnJlbmRlck9wdGltaXphdGlvbnMpO1xuICAgIH1cbiAgICBcbiAgICBpZiAob3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+TiCBNRURJVU06IEltcGxlbWVudCBvcHRpbWl6YXRpb24gb3Bwb3J0dW5pdGllcycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goLi4ub3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChuZXR3b3JrT3B0aW1pemF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+MkCBNRURJVU06IE9wdGltaXplIG5ldHdvcmsgcGVyZm9ybWFuY2UnKTtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLm5ldHdvcmtPcHRpbWl6YXRpb25zKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCfimb8gTE9XOiBPcHRpbWl6ZSBhY2Nlc3NpYmlsaXR5IHBlcmZvcm1hbmNlJyk7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5hY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyk7XG4gICAgfVxuICAgIFxuICAgIGlmIChyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCgn8J+OiSBFeGNlbGxlbnQgcGVyZm9ybWFuY2UhIE5vIG9wdGltaXphdGlvbnMgbmVlZGVkLicpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBlc3RpbWF0ZWQgaW1wcm92ZW1lbnQgcGVyY2VudGFnZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVFc3RpbWF0ZWRJbXByb3ZlbWVudChtZXRyaWNzOiBQcm9maWxlck1ldHJpY3NbXSk6IG51bWJlciB7XG4gICAgY29uc3QgYXZlcmFnZVNjb3JlID0gbWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5vcHRpbWl6YXRpb25TY29yZSwgMCkgLyBtZXRyaWNzLmxlbmd0aDtcbiAgICBjb25zdCBtYXhQb3NzaWJsZVNjb3JlID0gMTAwO1xuICAgIGNvbnN0IGltcHJvdmVtZW50ID0gbWF4UG9zc2libGVTY29yZSAtIGF2ZXJhZ2VTY29yZTtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgaW1wcm92ZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgY29tcG9uZW50IHByb2ZpbGVzXG4gICAqL1xuICBnZXRDb21wb25lbnRQcm9maWxlcygpOiBDb21wb25lbnRQcm9maWxlW10ge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvZmlsZXMudmFsdWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBtZXRyaWNzIGZvciBhIHNwZWNpZmljIGNvbXBvbmVudFxuICAgKi9cbiAgZ2V0Q29tcG9uZW50TWV0cmljcyhjb21wb25lbnROYW1lOiBzdHJpbmcpOiBQcm9maWxlck1ldHJpY3MgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLm1ldHJpY3MuZmluZChtID0+IG0uY29tcG9uZW50TmFtZSA9PT0gY29tcG9uZW50TmFtZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBhbGVydHNcbiAgICovXG4gIGdldEFsZXJ0cygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuYWxlcnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBwcm9maWxpbmcgZGF0YVxuICAgKi9cbiAgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5wcm9maWxlcy5jbGVhcigpO1xuICAgIHRoaXMubWV0cmljcyA9IFtdO1xuICAgIHRoaXMuYWxlcnRzID0gW107XG4gICAgdGhpcy5pc1Byb2ZpbGluZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCB0ZXN0IG1ldHJpY3NcbiAgICovXG4gIHJlY29yZE1ldHJpY3MobWV0cmljczogT21pdDxQcm9maWxlck1ldHJpY3MsICd0aW1lc3RhbXAnPik6IHZvaWQge1xuICAgIGNvbnN0IGZ1bGxNZXRyaWNzOiBQcm9maWxlck1ldHJpY3MgPSB7XG4gICAgICAuLi5tZXRyaWNzLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIH07XG4gICAgXG4gICAgdGhpcy5tZXRyaWNzLnB1c2goZnVsbE1ldHJpY3MpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBwZXJmb3JtYW5jZSBhbGVydHNcbiAgICB0aGlzLmNoZWNrUGVyZm9ybWFuY2VBbGVydHMoZnVsbE1ldHJpY3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGZvciBwZXJmb3JtYW5jZSBhbGVydHNcbiAgICovXG4gIHByaXZhdGUgY2hlY2tQZXJmb3JtYW5jZUFsZXJ0cyhtZXRyaWNzOiBQcm9maWxlck1ldHJpY3MpOiB2b2lkIHtcbiAgICBjb25zdCBhbGVydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBSZW5kZXIgdGltZSBhbGVydHNcbiAgICBpZiAobWV0cmljcy5yZW5kZXJUaW1lICYmIG1ldHJpY3MucmVuZGVyVGltZSA+IDIwMCkge1xuICAgICAgYWxlcnRzLnB1c2goYOKaoO+4jyBTTE9XIFJFTkRFUjogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9IHRvb2sgJHttZXRyaWNzLnJlbmRlclRpbWUudG9GaXhlZCgyKX1tcyAoYnVkZ2V0OiAyMDBtcylgKTtcbiAgICB9XG5cbiAgICAvLyBNZW1vcnkgdXNhZ2UgYWxlcnRzXG4gICAgaWYgKG1ldHJpY3MubWVtb3J5UGVhayA+IDEwKSB7XG4gICAgICBhbGVydHMucHVzaChg4pqg77iPIEhJR0ggTUVNT1JZOiAke21ldHJpY3MuY29tcG9uZW50TmFtZX0gdXNlZCAke21ldHJpY3MubWVtb3J5UGVhay50b0ZpeGVkKDIpfU1CIChidWRnZXQ6IDEwTUIpYCk7XG4gICAgfVxuXG4gICAgLy8gUGVyZm9ybWFuY2UgZ3JhZGUgYWxlcnRzXG4gICAgaWYgKG1ldHJpY3MucGVyZm9ybWFuY2VHcmFkZSA9PT0gJ0QnIHx8IG1ldHJpY3MucGVyZm9ybWFuY2VHcmFkZSA9PT0gJ0YnKSB7XG4gICAgICBhbGVydHMucHVzaChg8J+aqCBQT09SIFBFUkZPUk1BTkNFOiAke21ldHJpY3MuY29tcG9uZW50TmFtZX0gcmVjZWl2ZWQgZ3JhZGUgJHttZXRyaWNzLnBlcmZvcm1hbmNlR3JhZGV9YCk7XG4gICAgfVxuXG4gICAgLy8gTmV0d29yayB0aW1lIGFsZXJ0c1xuICAgIGlmIChtZXRyaWNzLm5ldHdvcmtUaW1lICYmIG1ldHJpY3MubmV0d29ya1RpbWUgPiA1MDApIHtcbiAgICAgIGFsZXJ0cy5wdXNoKGDimqDvuI8gU0xPVyBORVRXT1JLOiAke21ldHJpY3MuY29tcG9uZW50TmFtZX0gbmV0d29yayB0b29rICR7bWV0cmljcy5uZXR3b3JrVGltZS50b0ZpeGVkKDIpfW1zIChidWRnZXQ6IDUwMG1zKWApO1xuICAgIH1cblxuICAgIHRoaXMuYWxlcnRzLnB1c2goLi4uYWxlcnRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBvcnQgcHJvZmlsaW5nIGRhdGFcbiAgICovXG4gIGV4cG9ydFByb2ZpbGluZ0RhdGEoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgcHJvZmlsZXM6IEFycmF5LmZyb20odGhpcy5wcm9maWxlcy5lbnRyaWVzKCkpLFxuICAgICAgbWV0cmljczogdGhpcy5tZXRyaWNzLFxuICAgICAgYW5hbHlzaXM6IHRoaXMuZ2VuZXJhdGVQZXJmb3JtYW5jZUFuYWx5c2lzKCksXG4gICAgICBpbnNpZ2h0czogdGhpcy5nZXRQZXJmb3JtYW5jZUluc2lnaHRzKCksXG4gICAgICBwYXR0ZXJuczogdGhpcy5hbmFseXplUGVyZm9ybWFuY2VQYXR0ZXJucygpLFxuICAgIH0sIG51bGwsIDIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwZXJmb3JtYW5jZSBpbnNpZ2h0cyBhbmQgcmVjb21tZW5kYXRpb25zXG4gICAqL1xuICBnZXRQZXJmb3JtYW5jZUluc2lnaHRzKCk6IHtcbiAgICB0b3BQZXJmb3JtZXJzOiBzdHJpbmdbXTtcbiAgICBuZWVkc0F0dGVudGlvbjogc3RyaW5nW107XG4gICAgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllczogc3RyaW5nW107XG4gICAgY3JpdGljYWxJc3N1ZXM6IHN0cmluZ1tdO1xuICB9IHtcbiAgICBjb25zdCB0b3BQZXJmb3JtZXJzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG5lZWRzQXR0ZW50aW9uOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgY3JpdGljYWxJc3N1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgdGhpcy5tZXRyaWNzLmZvckVhY2gobWV0cmljID0+IHtcbiAgICAgIC8vIFVzZSBvcHRpbWl6YXRpb25TY29yZSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBjb252ZXJ0IHBlcmZvcm1hbmNlR3JhZGUgdG8gc2NvcmVcbiAgICAgIGNvbnN0IHNjb3JlID0gbWV0cmljLm9wdGltaXphdGlvblNjb3JlIHx8IHRoaXMuY29udmVydEdyYWRlVG9TY29yZShtZXRyaWMucGVyZm9ybWFuY2VHcmFkZSB8fCAnQycpO1xuICAgICAgXG4gICAgICBpZiAoc2NvcmUgPj0gOTApIHtcbiAgICAgICAgdG9wUGVyZm9ybWVycy5wdXNoKGAke21ldHJpYy5jb21wb25lbnROYW1lfTogJHtzY29yZX0vMTAwIChFWENFTExFTlQpYCk7XG4gICAgICB9IGVsc2UgaWYgKHNjb3JlID49IDcwKSB7XG4gICAgICAgIG9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMucHVzaChgJHttZXRyaWMuY29tcG9uZW50TmFtZX06ICR7c2NvcmV9LzEwMCAoR09PRCAtIHJvb20gZm9yIGltcHJvdmVtZW50KWApO1xuICAgICAgfSBlbHNlIGlmIChzY29yZSA+PSA1MCkge1xuICAgICAgICBuZWVkc0F0dGVudGlvbi5wdXNoKGAke21ldHJpYy5jb21wb25lbnROYW1lfTogJHtzY29yZX0vMTAwIChORUVEUyBBVFRFTlRJT04pYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjcml0aWNhbElzc3Vlcy5wdXNoKGAke21ldHJpYy5jb21wb25lbnROYW1lfTogJHtzY29yZX0vMTAwIChDUklUSUNBTClgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4geyB0b3BQZXJmb3JtZXJzLCBuZWVkc0F0dGVudGlvbiwgb3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcywgY3JpdGljYWxJc3N1ZXMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFjayBjb21wb25lbnQgbGlmZWN5Y2xlIGV2ZW50c1xuICAgKi9cbiAgdHJhY2tDb21wb25lbnRMaWZlY3ljbGUoY29tcG9uZW50TmFtZTogc3RyaW5nLCBldmVudDogJ21vdW50JyB8ICd1cGRhdGUnIHwgJ3VubW91bnQnLCBkdXJhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgbG9nZ2VyLmluZm8oYPCflIQgQ29tcG9uZW50IExpZmVjeWNsZTogJHtjb21wb25lbnROYW1lfSAke2V2ZW50fSB0b29rICR7ZHVyYXRpb259bXNgKTtcbiAgICBcbiAgICAvLyBSZWNvcmQgbGlmZWN5Y2xlIG1ldHJpY3NcbiAgICB0aGlzLnJlY29yZE1ldHJpY3Moe1xuICAgICAgY29tcG9uZW50TmFtZSxcbiAgICAgIHJlbmRlckNvdW50OiAxLFxuICAgICAgdG90YWxSZW5kZXJUaW1lOiBkdXJhdGlvbixcbiAgICAgIGF2ZXJhZ2VSZW5kZXJUaW1lOiBkdXJhdGlvbixcbiAgICAgIG1heFJlbmRlclRpbWU6IGR1cmF0aW9uLFxuICAgICAgbWluUmVuZGVyVGltZTogZHVyYXRpb24sXG4gICAgICBtZW1vcnlQZWFrOiAwLFxuICAgICAgbWVtb3J5QXZlcmFnZTogMCxcbiAgICAgIHJlUmVuZGVyVHJpZ2dlcnM6IFtdLFxuICAgICAgcGVyZm9ybWFuY2VCb3R0bGVuZWNrczogW10sXG4gICAgICBvcHRpbWl6YXRpb25TY29yZTogdGhpcy5jYWxjdWxhdGVPcHRpbWl6YXRpb25TY29yZShkdXJhdGlvbiwgMCwgMSksXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgICAgcmVuZGVyVGltZTogZHVyYXRpb24sXG4gICAgICBwZXJmb3JtYW5jZUdyYWRlOiB0aGlzLmNhbGN1bGF0ZVBlcmZvcm1hbmNlR3JhZGUoZHVyYXRpb24pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSBwZXJmb3JtYW5jZSBwYXR0ZXJucyBhY3Jvc3MgbXVsdGlwbGUgcnVuc1xuICAgKi9cbiAgYW5hbHl6ZVBlcmZvcm1hbmNlUGF0dGVybnMoKToge1xuICAgIHRyZW5kaW5nVXA6IHN0cmluZ1tdO1xuICAgIHRyZW5kaW5nRG93bjogc3RyaW5nW107XG4gICAgc3RhYmxlOiBzdHJpbmdbXTtcbiAgICB2b2xhdGlsZTogc3RyaW5nW107XG4gIH0ge1xuICAgIGNvbnN0IHRyZW5kaW5nVXA6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdHJlbmRpbmdEb3duOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN0YWJsZTogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2b2xhdGlsZTogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEdyb3VwIG1ldHJpY3MgYnkgY29tcG9uZW50XG4gICAgY29uc3QgY29tcG9uZW50TWV0cmljcyA9IG5ldyBNYXA8c3RyaW5nLCBQcm9maWxlck1ldHJpY3NbXT4oKTtcbiAgICB0aGlzLm1ldHJpY3MuZm9yRWFjaChtZXRyaWMgPT4ge1xuICAgICAgaWYgKCFjb21wb25lbnRNZXRyaWNzLmhhcyhtZXRyaWMuY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgY29tcG9uZW50TWV0cmljcy5zZXQobWV0cmljLmNvbXBvbmVudE5hbWUsIFtdKTtcbiAgICAgIH1cbiAgICAgIGNvbXBvbmVudE1ldHJpY3MuZ2V0KG1ldHJpYy5jb21wb25lbnROYW1lKSEucHVzaChtZXRyaWMpO1xuICAgIH0pO1xuXG4gICAgLy8gQW5hbHl6ZSBwYXR0ZXJucyBmb3IgZWFjaCBjb21wb25lbnRcbiAgICBjb21wb25lbnRNZXRyaWNzLmZvckVhY2goKG1ldHJpY3MsIGNvbXBvbmVudE5hbWUpID0+IHtcbiAgICAgIGlmIChtZXRyaWNzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgc3RhYmxlLnB1c2goYCR7Y29tcG9uZW50TmFtZX06IGluc3VmZmljaWVudCBkYXRhYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVuZGVyVGltZXMgPSBtZXRyaWNzLm1hcChtID0+IG0uYXZlcmFnZVJlbmRlclRpbWUpO1xuICAgICAgY29uc3QgdHJlbmQgPSB0aGlzLmNhbGN1bGF0ZVRyZW5kKHJlbmRlclRpbWVzKTtcbiAgICAgIGNvbnN0IHZvbGF0aWxpdHkgPSB0aGlzLmNhbGN1bGF0ZVZvbGF0aWxpdHkocmVuZGVyVGltZXMpO1xuXG4gICAgICBpZiAodHJlbmQgPiAwLjEpIHtcbiAgICAgICAgdHJlbmRpbmdVcC5wdXNoKGAke2NvbXBvbmVudE5hbWV9OiArJHsodHJlbmQgKiAxMDApLnRvRml4ZWQoMSl9JSB0cmVuZGApO1xuICAgICAgfSBlbHNlIGlmICh0cmVuZCA8IC0wLjEpIHtcbiAgICAgICAgdHJlbmRpbmdEb3duLnB1c2goYCR7Y29tcG9uZW50TmFtZX06ICR7KHRyZW5kICogMTAwKS50b0ZpeGVkKDEpfSUgdHJlbmRgKTtcbiAgICAgIH0gZWxzZSBpZiAodm9sYXRpbGl0eSA+IDAuMykge1xuICAgICAgICB2b2xhdGlsZS5wdXNoKGAke2NvbXBvbmVudE5hbWV9OiAkeyh2b2xhdGlsaXR5ICogMTAwKS50b0ZpeGVkKDEpfSUgdm9sYXRpbGl0eWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhYmxlLnB1c2goYCR7Y29tcG9uZW50TmFtZX06IHN0YWJsZSBwZXJmb3JtYW5jZWApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHsgdHJlbmRpbmdVcCwgdHJlbmRpbmdEb3duLCBzdGFibGUsIHZvbGF0aWxlIH07XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRyZW5kIGZyb20gYXJyYXkgb2YgdmFsdWVzXG4gICAqL1xuICBwcml2YXRlIGNhbGN1bGF0ZVRyZW5kKHZhbHVlczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoIDwgMikgcmV0dXJuIDA7XG4gICAgXG4gICAgY29uc3QgZmlyc3RIYWxmID0gdmFsdWVzLnNsaWNlKDAsIE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIDIpKTtcbiAgICBjb25zdCBzZWNvbmRIYWxmID0gdmFsdWVzLnNsaWNlKE1hdGguZmxvb3IodmFsdWVzLmxlbmd0aCAvIDIpKTtcbiAgICBcbiAgICBjb25zdCBmaXJzdEF2ZyA9IGZpcnN0SGFsZi5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwsIDApIC8gZmlyc3RIYWxmLmxlbmd0aDtcbiAgICBjb25zdCBzZWNvbmRBdmcgPSBzZWNvbmRIYWxmLnJlZHVjZSgoc3VtLCB2YWwpID0+IHN1bSArIHZhbCwgMCkgLyBzZWNvbmRIYWxmLmxlbmd0aDtcbiAgICBcbiAgICByZXR1cm4gKHNlY29uZEF2ZyAtIGZpcnN0QXZnKSAvIGZpcnN0QXZnO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB2b2xhdGlsaXR5IChzdGFuZGFyZCBkZXZpYXRpb24gLyBtZWFuKVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVWb2xhdGlsaXR5KHZhbHVlczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgIGlmICh2YWx1ZXMubGVuZ3RoIDwgMikgcmV0dXJuIDA7XG4gICAgXG4gICAgY29uc3QgbWVhbiA9IHZhbHVlcy5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyB2YWwsIDApIC8gdmFsdWVzLmxlbmd0aDtcbiAgICBjb25zdCB2YXJpYW5jZSA9IHZhbHVlcy5yZWR1Y2UoKHN1bSwgdmFsKSA9PiBzdW0gKyBNYXRoLnBvdyh2YWwgLSBtZWFuLCAyKSwgMCkgLyB2YWx1ZXMubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZERldiA9IE1hdGguc3FydCh2YXJpYW5jZSk7XG4gICAgXG4gICAgcmV0dXJuIHN0ZERldiAvIG1lYW47XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHBlcmZvcm1hbmNlIGdyYWRlIGJhc2VkIG9uIHJlbmRlciB0aW1lXG4gICAqL1xuICBjYWxjdWxhdGVQZXJmb3JtYW5jZUdyYWRlKHJlbmRlclRpbWU6IG51bWJlcik6ICdBKycgfCAnQScgfCAnQicgfCAnQycgfCAnRCcgfCAnRicge1xuICAgIGlmIChyZW5kZXJUaW1lIDw9IDUwKSByZXR1cm4gJ0ErJztcbiAgICBpZiAocmVuZGVyVGltZSA8PSAxMDApIHJldHVybiAnQSc7XG4gICAgaWYgKHJlbmRlclRpbWUgPD0gMTUwKSByZXR1cm4gJ0InO1xuICAgIGlmIChyZW5kZXJUaW1lIDw9IDIwMCkgcmV0dXJuICdDJztcbiAgICBpZiAocmVuZGVyVGltZSA8PSAzMDApIHJldHVybiAnRCc7XG4gICAgcmV0dXJuICdGJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHBlcmZvcm1hbmNlIGdyYWRlIHRvIG51bWVyaWMgc2NvcmVcbiAgICovXG4gIHByaXZhdGUgY29udmVydEdyYWRlVG9TY29yZShncmFkZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKGdyYWRlKSB7XG4gICAgICBjYXNlICdBKyc6IHJldHVybiA5NTtcbiAgICAgIGNhc2UgJ0EnOiByZXR1cm4gOTA7XG4gICAgICBjYXNlICdCJzogcmV0dXJuIDgwO1xuICAgICAgY2FzZSAnQyc6IHJldHVybiA3MDtcbiAgICAgIGNhc2UgJ0QnOiByZXR1cm4gNjA7XG4gICAgICBjYXNlICdGJzogcmV0dXJuIDMwO1xuICAgICAgZGVmYXVsdDogcmV0dXJuIDUwO1xuICAgIH1cbiAgfVxufVxuXG4vLyBHbG9iYWwgcGVyZm9ybWFuY2UgcHJvZmlsZXIgaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBwZXJmb3JtYW5jZVByb2ZpbGVyID0gbmV3IFBlcmZvcm1hbmNlUHJvZmlsZXIoKTtcblxuXG5cbiJdLCJuYW1lcyI6WyJQZXJmb3JtYW5jZVByb2ZpbGVyIiwicGVyZm9ybWFuY2VQcm9maWxlciIsInN0YXJ0UHJvZmlsaW5nIiwiY29tcG9uZW50TmFtZSIsImlzUHJvZmlsaW5nIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdGFydE1lbW9yeSIsIm1lbW9yeSIsInVzZWRKU0hlYXBTaXplIiwibG9nZ2VyIiwiaW5mbyIsInN0b3BQcm9maWxpbmciLCJyZW5kZXJDb3VudCIsIkVycm9yIiwiZW5kVGltZSIsImVuZE1lbW9yeSIsInRvdGFsUmVuZGVyVGltZSIsImF2ZXJhZ2VSZW5kZXJUaW1lIiwibWVtb3J5VXNlZCIsIm1ldHJpY3MiLCJtYXhSZW5kZXJUaW1lIiwibWluUmVuZGVyVGltZSIsIm1lbW9yeVBlYWsiLCJtZW1vcnlBdmVyYWdlIiwicmVSZW5kZXJUcmlnZ2VycyIsImFuYWx5emVSZVJlbmRlclRyaWdnZXJzIiwicGVyZm9ybWFuY2VCb3R0bGVuZWNrcyIsImFuYWx5emVCb3R0bGVuZWNrcyIsIm9wdGltaXphdGlvblNjb3JlIiwiY2FsY3VsYXRlT3B0aW1pemF0aW9uU2NvcmUiLCJyZWNvbW1lbmRhdGlvbnMiLCJnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyIsInRpbWVzdGFtcCIsIkRhdGUiLCJwdXNoIiwidG9GaXhlZCIsInRyaWdnZXJzIiwiZmlsdGVyIiwibSIsImxlbmd0aCIsInJlY2VudE1ldHJpY3MiLCJzbGljZSIsImF2Z1JlbmRlclRpbWUiLCJyZWR1Y2UiLCJzdW0iLCJtZW1vcnlUcmVuZCIsIm1hcCIsImlzSW5jcmVhc2luZyIsImV2ZXJ5IiwidmFsIiwiaSIsInNjb3JlcyIsImlzRGVncmFkaW5nIiwic2NvcmUiLCJpbmNsdWRlcyIsInJlbmRlclRpbWUiLCJtZW1vcnlVc2FnZSIsImJvdHRsZW5lY2tzIiwiTWF0aCIsIm1heCIsImNyZWF0ZUNvbXBvbmVudFByb2ZpbGUiLCJuYW1lIiwicHJvZmlsZSIsImNoaWxkcmVuIiwiZGVwdGgiLCJpc09wdGltaXplZCIsIm9wdGltaXphdGlvblBvdGVudGlhbCIsImNhbGN1bGF0ZU9wdGltaXphdGlvblBvdGVudGlhbCIsInByb2ZpbGVzIiwic2V0IiwiZ2VuZXJhdGVQZXJmb3JtYW5jZUFuYWx5c2lzIiwiYWxsTWV0cmljcyIsInRvdGFsVGVzdHMiLCJvdmVyYWxsU2NvcmUiLCJjcml0aWNhbElzc3VlcyIsIm9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMiLCJtZW1vcnlMZWFrcyIsInJlbmRlck9wdGltaXphdGlvbnMiLCJuZXR3b3JrT3B0aW1pemF0aW9ucyIsImFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zIiwiZXN0aW1hdGVkSW1wcm92ZW1lbnQiLCJhdmVyYWdlU2NvcmUiLCJpZGVudGlmeUNyaXRpY2FsSXNzdWVzIiwiaWRlbnRpZnlPcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzIiwiaWRlbnRpZnlNZW1vcnlMZWFrcyIsImlkZW50aWZ5UmVuZGVyT3B0aW1pemF0aW9ucyIsImlkZW50aWZ5TmV0d29ya09wdGltaXphdGlvbnMiLCJpZGVudGlmeUFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zIiwiZ2VuZXJhdGVDb21wcmVoZW5zaXZlUmVjb21tZW5kYXRpb25zIiwiY2FsY3VsYXRlRXN0aW1hdGVkSW1wcm92ZW1lbnQiLCJpc3N1ZXMiLCJzbG93Q29tcG9uZW50cyIsImhpZ2hNZW1vcnlDb21wb25lbnRzIiwibG93U2NvcmVDb21wb25lbnRzIiwib3Bwb3J0dW5pdGllcyIsIm1lZGl1bVNjb3JlQ29tcG9uZW50cyIsImhpZ2hSZW5kZXJDb3VudENvbXBvbmVudHMiLCJsZWFrcyIsImluY3JlYXNpbmdNZW1vcnlDb21wb25lbnRzIiwib3B0aW1pemF0aW9ucyIsInNsb3dSZW5kZXJDb21wb25lbnRzIiwibmV0d29ya01ldHJpY3MiLCJuZXR3b3JrVGltZSIsImhpZ2hOZXR3b3JrVGltZSIsImFwaU1ldHJpY3MiLCJhcGlUaW1lIiwiaGlnaEFwaVRpbWUiLCJhdmdOZXR3b3JrVGltZSIsImF2Z0FwaVRpbWUiLCJhY2Nlc3NpYmlsaXR5TWV0cmljcyIsImFjY2Vzc2liaWxpdHlUaW1lIiwiaGlnaEFjY2Vzc2liaWxpdHlUaW1lIiwibWVtb3J5SW50ZW5zaXZlQ29tcG9uZW50cyIsImF2Z0FjY2Vzc2liaWxpdHlUaW1lIiwibWF4UG9zc2libGVTY29yZSIsImltcHJvdmVtZW50IiwiZ2V0Q29tcG9uZW50UHJvZmlsZXMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJnZXRDb21wb25lbnRNZXRyaWNzIiwiZmluZCIsImdldEFsZXJ0cyIsImFsZXJ0cyIsImNsZWFyIiwicmVjb3JkTWV0cmljcyIsImZ1bGxNZXRyaWNzIiwiY2hlY2tQZXJmb3JtYW5jZUFsZXJ0cyIsInBlcmZvcm1hbmNlR3JhZGUiLCJleHBvcnRQcm9maWxpbmdEYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImVudHJpZXMiLCJhbmFseXNpcyIsImluc2lnaHRzIiwiZ2V0UGVyZm9ybWFuY2VJbnNpZ2h0cyIsInBhdHRlcm5zIiwiYW5hbHl6ZVBlcmZvcm1hbmNlUGF0dGVybnMiLCJ0b3BQZXJmb3JtZXJzIiwibmVlZHNBdHRlbnRpb24iLCJmb3JFYWNoIiwibWV0cmljIiwiY29udmVydEdyYWRlVG9TY29yZSIsInRyYWNrQ29tcG9uZW50TGlmZWN5Y2xlIiwiZXZlbnQiLCJkdXJhdGlvbiIsImNhbGN1bGF0ZVBlcmZvcm1hbmNlR3JhZGUiLCJ0cmVuZGluZ1VwIiwidHJlbmRpbmdEb3duIiwic3RhYmxlIiwidm9sYXRpbGUiLCJjb21wb25lbnRNZXRyaWNzIiwiTWFwIiwiaGFzIiwiZ2V0IiwicmVuZGVyVGltZXMiLCJ0cmVuZCIsImNhbGN1bGF0ZVRyZW5kIiwidm9sYXRpbGl0eSIsImNhbGN1bGF0ZVZvbGF0aWxpdHkiLCJmaXJzdEhhbGYiLCJmbG9vciIsInNlY29uZEhhbGYiLCJmaXJzdEF2ZyIsInNlY29uZEF2ZyIsIm1lYW4iLCJ2YXJpYW5jZSIsInBvdyIsInN0ZERldiIsInNxcnQiLCJncmFkZSJdLCJtYXBwaW5ncyI6IkFBQUE7O0NBRUM7Ozs7Ozs7Ozs7O1FBb0RZQTtlQUFBQTs7UUFvd0JBQztlQUFBQTs7O3dCQXR6QlU7QUFrRGhC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