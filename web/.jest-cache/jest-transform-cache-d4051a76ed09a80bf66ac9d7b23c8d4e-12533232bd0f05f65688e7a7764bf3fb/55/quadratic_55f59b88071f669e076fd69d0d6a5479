a7f2faa733787caa6a0b813c3b8d48b4
/**
 * Quadratic Voting Strategy
 * 
 * Implements quadratic voting where voters allocate tokens across options.
 * The cost of votes increases quadratically with the number of votes allocated to an option.
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "QuadraticStrategy", {
    enumerable: true,
    get: function() {
        return QuadraticStrategy;
    }
});
const _logger = require("../../utils/logger");
class QuadraticStrategy {
    getVotingMethod() {
        return 'quadratic';
    }
    async validateVote(request, poll) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const voteData = request.voteData;
            // Validate allocations object exists
            if (!voteData.allocations || typeof voteData.allocations !== 'object') {
                return {
                    valid: false,
                    isValid: false,
                    error: 'Quadratic voting requires allocations',
                    errors: [
                        'Quadratic voting requires allocations'
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            // Validate allocations are numbers
            const allocations = voteData.allocations;
            let totalTokens = 0;
            for (const [optionId, tokens] of Object.entries(allocations)){
                if (typeof tokens !== 'number' || tokens < 0) {
                    return {
                        valid: false,
                        isValid: false,
                        error: 'Allocations must be non-negative numbers',
                        errors: [
                            'Allocations must be non-negative numbers'
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                // Check if option exists (handle both option IDs and indices)
                const optionIndex = parseInt(optionId, 10);
                const optionExists = !isNaN(optionIndex) && optionIndex >= 0 && optionIndex < poll.options.length;
                const optionExistsById = poll.options.some((option)=>option.id === optionId);
                if (!optionExists && !optionExistsById) {
                    return {
                        valid: false,
                        isValid: false,
                        error: 'Invalid option selected',
                        errors: [
                            'Invalid option selected'
                        ],
                        requiresAuthentication: false,
                        requiresTokens: false
                    };
                }
                totalTokens += tokens;
            }
            // Check token budget
            const maxTokens = poll.votingConfig?.quadraticCredits || 100;
            if (totalTokens > maxTokens) {
                return {
                    valid: false,
                    isValid: false,
                    error: `Exceeds maximum token budget of ${maxTokens}`,
                    errors: [
                        `Exceeds maximum token budget of ${maxTokens}`
                    ],
                    requiresAuthentication: false,
                    requiresTokens: false
                };
            }
            (0, _logger.devLog)('Quadratic vote validated successfully', {
                pollId: request.pollId,
                allocations: voteData.allocations,
                totalTokens,
                userId: request.userId
            });
            return {
                valid: true,
                isValid: true,
                requiresAuthentication: false,
                requiresTokens: false
            };
        } catch (error) {
            (0, _logger.devLog)('Quadratic vote validation error:', {
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                valid: false,
                isValid: false,
                error: 'Quadratic vote validation failed',
                errors: [
                    'Quadratic vote validation failed'
                ],
                requiresAuthentication: false,
                requiresTokens: false
            };
        }
    }
    async processVote(request, poll) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const voteData = request.voteData;
            // Create vote data for storage
            const voteRecord = {
                id: `vote_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                pollId: request.pollId,
                userId: request.userId,
                allocations: voteData.allocations,
                privacyLevel: 'standard',
                auditReceipt: `audit_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
                timestamp: new Date(),
                ipAddress: request.ipAddress,
                userAgent: request.userAgent
            };
            (0, _logger.devLog)('Quadratic vote processed successfully', {
                pollId: request.pollId,
                userId: request.userId,
                allocations: voteData.allocations,
                voteId: voteRecord.id
            });
            return {
                success: true,
                voteId: voteRecord.id,
                message: 'Vote recorded successfully',
                pollId: request.pollId
            };
        } catch (error) {
            (0, _logger.devLog)('Quadratic vote processing error:', {
                error: error instanceof Error ? error.message : String(error)
            });
            return {
                success: false,
                error: 'Failed to process quadratic vote',
                message: 'Failed to process quadratic vote',
                pollId: request.pollId
            };
        }
    }
    async calculateResults(poll, votes) {
        await Promise.resolve(); // Satisfy require-await rule
        try {
            const startTime = Date.now();
            // Initialize tracking objects
            const totalScores = {};
            const optionVotes = {};
            const optionPercentages = {};
            // Initialize all options with zero scores
            poll.options.forEach((option)=>{
                totalScores[option.id] = 0;
                optionVotes[option.id] = 0;
                optionPercentages[option.id] = 0;
            });
            // Process each vote
            votes.forEach((vote)=>{
                if (vote.voteData?.allocations) {
                    Object.entries(vote.voteData.allocations).forEach(([optionId, tokens])=>{
                        if (typeof tokens === 'number' && tokens > 0) {
                            totalScores[optionId] = (totalScores[optionId] || 0) + tokens;
                            optionVotes[optionId] = (optionVotes[optionId] || 0) + 1;
                        }
                    });
                }
            });
            const totalVotes = votes?.length || 0;
            // Calculate percentages
            if (totalVotes > 0) {
                Object.keys(optionVotes).forEach((optionId)=>{
                    const votes = optionVotes[optionId] || 0;
                    optionPercentages[optionId] = votes / totalVotes * 100;
                });
            }
            // Find winner (highest total score)
            let winner;
            let winnerVotes = 0;
            let winnerPercentage = 0;
            if (totalVotes > 0) {
                Object.entries(totalScores).forEach(([optionId, score])=>{
                    if (score > winnerVotes) {
                        winner = optionId;
                        winnerVotes = score;
                        winnerPercentage = optionPercentages[optionId] || 0;
                    }
                });
            }
            const results = {
                winner,
                winnerVotes,
                winnerPercentage,
                optionVotes,
                optionPercentages,
                abstentions: 0,
                abstentionPercentage: 0
            };
            (0, _logger.devLog)('Quadratic results calculated', {
                pollId: poll.id,
                totalVotes,
                winner,
                winnerVotes,
                winnerPercentage,
                calculationTime: Date.now() - startTime
            });
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes,
                participationRate: totalVotes / 100,
                results,
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: Date.now() - startTime,
                    method: 'quadratic'
                }
            };
        } catch (error) {
            (0, _logger.devLog)('Quadratic results calculation error:', {
                error: error instanceof Error ? error.message : String(error)
            });
            // Return empty results on error
            return {
                pollId: poll.id,
                votingMethod: poll.votingMethod,
                totalVotes: 0,
                participationRate: 0,
                results: {
                    winner: undefined,
                    winnerVotes: 0,
                    winnerPercentage: 0,
                    optionVotes: {},
                    optionPercentages: {},
                    abstentions: 0,
                    abstentionPercentage: 0
                },
                calculatedAt: new Date().toISOString(),
                metadata: {
                    calculationTime: 0,
                    error: error instanceof Error ? error.message : 'Unknown error'
                }
            };
        }
    }
    getConfiguration() {
        return {
            method: 'quadratic',
            description: 'Voters allocate tokens across options with quadratic cost',
            allowsMultipleSelections: true,
            requiresRanking: false,
            maxSelections: 'token budget',
            costFunction: 'quadratic'
        };
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvdm90ZS9zdHJhdGVnaWVzL3F1YWRyYXRpYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFF1YWRyYXRpYyBWb3RpbmcgU3RyYXRlZ3lcbiAqIFxuICogSW1wbGVtZW50cyBxdWFkcmF0aWMgdm90aW5nIHdoZXJlIHZvdGVycyBhbGxvY2F0ZSB0b2tlbnMgYWNyb3NzIG9wdGlvbnMuXG4gKiBUaGUgY29zdCBvZiB2b3RlcyBpbmNyZWFzZXMgcXVhZHJhdGljYWxseSB3aXRoIHRoZSBudW1iZXIgb2Ygdm90ZXMgYWxsb2NhdGVkIHRvIGFuIG9wdGlvbi5cbiAqIFxuICogQ3JlYXRlZDogU2VwdGVtYmVyIDE1LCAyMDI1XG4gKiBVcGRhdGVkOiBTZXB0ZW1iZXIgMTUsIDIwMjVcbiAqL1xuXG5pbXBvcnQgeyBkZXZMb2cgfSBmcm9tICdAL2xpYi91dGlscy9sb2dnZXInO1xuXG5pbXBvcnQgdHlwZSB7IFxuICBWb3RpbmdTdHJhdGVneSwgXG4gIFZvdGVSZXF1ZXN0LCBcbiAgVm90ZVJlc3BvbnNlLCBcbiAgVm90ZVZhbGlkYXRpb24sIFxuICBQb2xsRGF0YSwgXG4gIFZvdGVEYXRhLCBcbiAgUmVzdWx0c0RhdGEsXG4gIFZvdGluZ01ldGhvZCxcbiAgUG9sbFJlc3VsdHNcbn0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUXVhZHJhdGljU3RyYXRlZ3kgaW1wbGVtZW50cyBWb3RpbmdTdHJhdGVneSB7XG4gIFxuICBnZXRWb3RpbmdNZXRob2QoKTogVm90aW5nTWV0aG9kIHtcbiAgICByZXR1cm4gJ3F1YWRyYXRpYyc7XG4gIH1cblxuICBhc3luYyB2YWxpZGF0ZVZvdGUocmVxdWVzdDogVm90ZVJlcXVlc3QsIHBvbGw6IFBvbGxEYXRhKTogUHJvbWlzZTxWb3RlVmFsaWRhdGlvbj4ge1xuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyBTYXRpc2Z5IHJlcXVpcmUtYXdhaXQgcnVsZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHJlcXVlc3Qudm90ZURhdGE7XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbG9jYXRpb25zIG9iamVjdCBleGlzdHNcbiAgICAgIGlmICghdm90ZURhdGEuYWxsb2NhdGlvbnMgfHwgdHlwZW9mIHZvdGVEYXRhLmFsbG9jYXRpb25zICE9PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1F1YWRyYXRpYyB2b3RpbmcgcmVxdWlyZXMgYWxsb2NhdGlvbnMnLFxuICAgICAgICAgIGVycm9yczogWydRdWFkcmF0aWMgdm90aW5nIHJlcXVpcmVzIGFsbG9jYXRpb25zJ10sXG4gICAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIGFsbG9jYXRpb25zIGFyZSBudW1iZXJzXG4gICAgICBjb25zdCBhbGxvY2F0aW9ucyA9IHZvdGVEYXRhLmFsbG9jYXRpb25zO1xuICAgICAgbGV0IHRvdGFsVG9rZW5zID0gMDtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBbb3B0aW9uSWQsIHRva2Vuc10gb2YgT2JqZWN0LmVudHJpZXMoYWxsb2NhdGlvbnMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdG9rZW5zICE9PSAnbnVtYmVyJyB8fCB0b2tlbnMgPCAwKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdBbGxvY2F0aW9ucyBtdXN0IGJlIG5vbi1uZWdhdGl2ZSBudW1iZXJzJyxcbiAgICAgICAgICAgIGVycm9yczogWydBbGxvY2F0aW9ucyBtdXN0IGJlIG5vbi1uZWdhdGl2ZSBudW1iZXJzJ10sXG4gICAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIG9wdGlvbiBleGlzdHMgKGhhbmRsZSBib3RoIG9wdGlvbiBJRHMgYW5kIGluZGljZXMpXG4gICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcGFyc2VJbnQob3B0aW9uSWQsIDEwKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uRXhpc3RzID0gIWlzTmFOKG9wdGlvbkluZGV4KSAmJiBvcHRpb25JbmRleCA+PSAwICYmIG9wdGlvbkluZGV4IDwgcG9sbC5vcHRpb25zLmxlbmd0aDtcbiAgICAgICAgY29uc3Qgb3B0aW9uRXhpc3RzQnlJZCA9IHBvbGwub3B0aW9ucy5zb21lKG9wdGlvbiA9PiBvcHRpb24uaWQgPT09IG9wdGlvbklkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghb3B0aW9uRXhpc3RzICYmICFvcHRpb25FeGlzdHNCeUlkKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIG9wdGlvbiBzZWxlY3RlZCcsXG4gICAgICAgICAgICBlcnJvcnM6IFsnSW52YWxpZCBvcHRpb24gc2VsZWN0ZWQnXSxcbiAgICAgICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICAgICAgcmVxdWlyZXNUb2tlbnM6IGZhbHNlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdG90YWxUb2tlbnMgKz0gdG9rZW5zO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayB0b2tlbiBidWRnZXRcbiAgICAgIGNvbnN0IG1heFRva2VucyA9IHBvbGwudm90aW5nQ29uZmlnPy5xdWFkcmF0aWNDcmVkaXRzIHx8IDEwMDtcbiAgICAgIGlmICh0b3RhbFRva2VucyA+IG1heFRva2Vucykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogYEV4Y2VlZHMgbWF4aW11bSB0b2tlbiBidWRnZXQgb2YgJHttYXhUb2tlbnN9YCxcbiAgICAgICAgICBlcnJvcnM6IFtgRXhjZWVkcyBtYXhpbXVtIHRva2VuIGJ1ZGdldCBvZiAke21heFRva2Vuc31gXSxcbiAgICAgICAgICByZXF1aXJlc0F1dGhlbnRpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZGV2TG9nKCdRdWFkcmF0aWMgdm90ZSB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5Jywge1xuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkLFxuICAgICAgICBhbGxvY2F0aW9uczogdm90ZURhdGEuYWxsb2NhdGlvbnMsXG4gICAgICAgIHRvdGFsVG9rZW5zLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgIHJlcXVpcmVzQXV0aGVudGljYXRpb246IGZhbHNlLFxuICAgICAgICByZXF1aXJlc1Rva2VuczogZmFsc2VcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGV2TG9nKCdRdWFkcmF0aWMgdm90ZSB2YWxpZGF0aW9uIGVycm9yOicsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnUXVhZHJhdGljIHZvdGUgdmFsaWRhdGlvbiBmYWlsZWQnLFxuICAgICAgICBlcnJvcnM6IFsnUXVhZHJhdGljIHZvdGUgdmFsaWRhdGlvbiBmYWlsZWQnXSxcbiAgICAgICAgcmVxdWlyZXNBdXRoZW50aWNhdGlvbjogZmFsc2UsXG4gICAgICAgIHJlcXVpcmVzVG9rZW5zOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwcm9jZXNzVm90ZShyZXF1ZXN0OiBWb3RlUmVxdWVzdCwgcG9sbDogUG9sbERhdGEpOiBQcm9taXNlPFZvdGVSZXNwb25zZT4ge1xuICAgIGF3YWl0IFByb21pc2UucmVzb2x2ZSgpOyAvLyBTYXRpc2Z5IHJlcXVpcmUtYXdhaXQgcnVsZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB2b3RlRGF0YSA9IHJlcXVlc3Qudm90ZURhdGE7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSB2b3RlIGRhdGEgZm9yIHN0b3JhZ2VcbiAgICAgIGNvbnN0IHZvdGVSZWNvcmQ6IFZvdGVEYXRhID0ge1xuICAgICAgICBpZDogYHZvdGVfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgICBwb2xsSWQ6IHJlcXVlc3QucG9sbElkLFxuICAgICAgICB1c2VySWQ6IHJlcXVlc3QudXNlcklkLFxuICAgICAgICBhbGxvY2F0aW9uczogdm90ZURhdGEuYWxsb2NhdGlvbnMsXG4gICAgICAgIHByaXZhY3lMZXZlbDogJ3N0YW5kYXJkJyxcbiAgICAgICAgYXVkaXRSZWNlaXB0OiBgYXVkaXRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIGlwQWRkcmVzczogcmVxdWVzdC5pcEFkZHJlc3MsXG4gICAgICAgIHVzZXJBZ2VudDogcmVxdWVzdC51c2VyQWdlbnRcbiAgICAgIH07XG5cbiAgICAgIGRldkxvZygnUXVhZHJhdGljIHZvdGUgcHJvY2Vzc2VkIHN1Y2Nlc3NmdWxseScsIHtcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZCxcbiAgICAgICAgdXNlcklkOiByZXF1ZXN0LnVzZXJJZCxcbiAgICAgICAgYWxsb2NhdGlvbnM6IHZvdGVEYXRhLmFsbG9jYXRpb25zLFxuICAgICAgICB2b3RlSWQ6IHZvdGVSZWNvcmQuaWRcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB2b3RlSWQ6IHZvdGVSZWNvcmQuaWQsXG4gICAgICAgIG1lc3NhZ2U6ICdWb3RlIHJlY29yZGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgIHBvbGxJZDogcmVxdWVzdC5wb2xsSWRcbiAgICAgIH07XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZGV2TG9nKCdRdWFkcmF0aWMgdm90ZSBwcm9jZXNzaW5nIGVycm9yOicsIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBwcm9jZXNzIHF1YWRyYXRpYyB2b3RlJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBwcm9jZXNzIHF1YWRyYXRpYyB2b3RlJyxcbiAgICAgICAgcG9sbElkOiByZXF1ZXN0LnBvbGxJZFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjYWxjdWxhdGVSZXN1bHRzKHBvbGw6IFBvbGxEYXRhLCB2b3RlczogVm90ZURhdGFbXSk6IFByb21pc2U8UmVzdWx0c0RhdGE+IHtcbiAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTsgLy8gU2F0aXNmeSByZXF1aXJlLWF3YWl0IHJ1bGVcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgLy8gSW5pdGlhbGl6ZSB0cmFja2luZyBvYmplY3RzXG4gICAgICBjb25zdCB0b3RhbFNjb3JlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgICAgY29uc3Qgb3B0aW9uVm90ZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICAgIGNvbnN0IG9wdGlvblBlcmNlbnRhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG5cbiAgICAgIC8vIEluaXRpYWxpemUgYWxsIG9wdGlvbnMgd2l0aCB6ZXJvIHNjb3Jlc1xuICAgICAgcG9sbC5vcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgdG90YWxTY29yZXNbb3B0aW9uLmlkXSA9IDA7XG4gICAgICAgIG9wdGlvblZvdGVzW29wdGlvbi5pZF0gPSAwO1xuICAgICAgICBvcHRpb25QZXJjZW50YWdlc1tvcHRpb24uaWRdID0gMDtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcm9jZXNzIGVhY2ggdm90ZVxuICAgICAgdm90ZXMuZm9yRWFjaCh2b3RlID0+IHtcbiAgICAgICAgaWYgKHZvdGUudm90ZURhdGE/LmFsbG9jYXRpb25zKSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXModm90ZS52b3RlRGF0YS5hbGxvY2F0aW9ucykuZm9yRWFjaCgoW29wdGlvbklkLCB0b2tlbnNdKSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRva2VucyA9PT0gJ251bWJlcicgJiYgdG9rZW5zID4gMCkge1xuICAgICAgICAgICAgICB0b3RhbFNjb3Jlc1tvcHRpb25JZF0gPSAodG90YWxTY29yZXNbb3B0aW9uSWRdIHx8IDApICsgdG9rZW5zO1xuICAgICAgICAgICAgICBvcHRpb25Wb3Rlc1tvcHRpb25JZF0gPSAob3B0aW9uVm90ZXNbb3B0aW9uSWRdIHx8IDApICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHRvdGFsVm90ZXMgPSB2b3Rlcz8ubGVuZ3RoIHx8IDA7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBwZXJjZW50YWdlc1xuICAgICAgaWYgKHRvdGFsVm90ZXMgPiAwKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKG9wdGlvblZvdGVzKS5mb3JFYWNoKG9wdGlvbklkID0+IHtcbiAgICAgICAgICBjb25zdCB2b3RlcyA9IG9wdGlvblZvdGVzW29wdGlvbklkXSB8fCAwO1xuICAgICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzW29wdGlvbklkXSA9ICh2b3RlcyAvIHRvdGFsVm90ZXMpICogMTAwO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCB3aW5uZXIgKGhpZ2hlc3QgdG90YWwgc2NvcmUpXG4gICAgICBsZXQgd2lubmVyOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICBsZXQgd2lubmVyVm90ZXMgPSAwO1xuICAgICAgbGV0IHdpbm5lclBlcmNlbnRhZ2UgPSAwO1xuXG4gICAgICBpZiAodG90YWxWb3RlcyA+IDApIHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModG90YWxTY29yZXMpLmZvckVhY2goKFtvcHRpb25JZCwgc2NvcmVdKSA9PiB7XG4gICAgICAgICAgaWYgKHNjb3JlID4gd2lubmVyVm90ZXMpIHtcbiAgICAgICAgICAgIHdpbm5lciA9IG9wdGlvbklkO1xuICAgICAgICAgICAgd2lubmVyVm90ZXMgPSBzY29yZTtcbiAgICAgICAgICAgIHdpbm5lclBlcmNlbnRhZ2UgPSBvcHRpb25QZXJjZW50YWdlc1tvcHRpb25JZF0gfHwgMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHRzOiBQb2xsUmVzdWx0cyA9IHtcbiAgICAgICAgd2lubmVyLFxuICAgICAgICB3aW5uZXJWb3RlcyxcbiAgICAgICAgd2lubmVyUGVyY2VudGFnZSxcbiAgICAgICAgb3B0aW9uVm90ZXMsXG4gICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzLFxuICAgICAgICBhYnN0ZW50aW9uczogMCxcbiAgICAgICAgYWJzdGVudGlvblBlcmNlbnRhZ2U6IDBcbiAgICAgIH07XG5cbiAgICAgIGRldkxvZygnUXVhZHJhdGljIHJlc3VsdHMgY2FsY3VsYXRlZCcsIHtcbiAgICAgICAgcG9sbElkOiBwb2xsLmlkLFxuICAgICAgICB0b3RhbFZvdGVzLFxuICAgICAgICB3aW5uZXIsXG4gICAgICAgIHdpbm5lclZvdGVzLFxuICAgICAgICB3aW5uZXJQZXJjZW50YWdlLFxuICAgICAgICBjYWxjdWxhdGlvblRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWVcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb2xsSWQ6IHBvbGwuaWQsXG4gICAgICAgIHZvdGluZ01ldGhvZDogcG9sbC52b3RpbmdNZXRob2QsXG4gICAgICAgIHRvdGFsVm90ZXMsXG4gICAgICAgIHBhcnRpY2lwYXRpb25SYXRlOiB0b3RhbFZvdGVzIC8gMTAwLCAvLyBNb2NrIHBhcnRpY2lwYXRpb24gcmF0ZVxuICAgICAgICByZXN1bHRzLFxuICAgICAgICBjYWxjdWxhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBjYWxjdWxhdGlvblRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXG4gICAgICAgICAgbWV0aG9kOiAncXVhZHJhdGljJ1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGRldkxvZygnUXVhZHJhdGljIHJlc3VsdHMgY2FsY3VsYXRpb24gZXJyb3I6JywgeyBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpIH0pO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gZW1wdHkgcmVzdWx0cyBvbiBlcnJvclxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9sbElkOiBwb2xsLmlkLFxuICAgICAgICB2b3RpbmdNZXRob2Q6IHBvbGwudm90aW5nTWV0aG9kLFxuICAgICAgICB0b3RhbFZvdGVzOiAwLFxuICAgICAgICBwYXJ0aWNpcGF0aW9uUmF0ZTogMCxcbiAgICAgICAgcmVzdWx0czoge1xuICAgICAgICAgIHdpbm5lcjogdW5kZWZpbmVkLFxuICAgICAgICAgIHdpbm5lclZvdGVzOiAwLFxuICAgICAgICAgIHdpbm5lclBlcmNlbnRhZ2U6IDAsXG4gICAgICAgICAgb3B0aW9uVm90ZXM6IHt9LFxuICAgICAgICAgIG9wdGlvblBlcmNlbnRhZ2VzOiB7fSxcbiAgICAgICAgICBhYnN0ZW50aW9uczogMCxcbiAgICAgICAgICBhYnN0ZW50aW9uUGVyY2VudGFnZTogMFxuICAgICAgICB9LFxuICAgICAgICBjYWxjdWxhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBjYWxjdWxhdGlvblRpbWU6IDAsXG4gICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29uZmlndXJhdGlvbigpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogJ3F1YWRyYXRpYycsXG4gICAgICBkZXNjcmlwdGlvbjogJ1ZvdGVycyBhbGxvY2F0ZSB0b2tlbnMgYWNyb3NzIG9wdGlvbnMgd2l0aCBxdWFkcmF0aWMgY29zdCcsXG4gICAgICBhbGxvd3NNdWx0aXBsZVNlbGVjdGlvbnM6IHRydWUsXG4gICAgICByZXF1aXJlc1Jhbmtpbmc6IGZhbHNlLFxuICAgICAgbWF4U2VsZWN0aW9uczogJ3Rva2VuIGJ1ZGdldCcsXG4gICAgICBjb3N0RnVuY3Rpb246ICdxdWFkcmF0aWMnXG4gICAgfTtcbiAgfVxufSJdLCJuYW1lcyI6WyJRdWFkcmF0aWNTdHJhdGVneSIsImdldFZvdGluZ01ldGhvZCIsInZhbGlkYXRlVm90ZSIsInJlcXVlc3QiLCJwb2xsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ2b3RlRGF0YSIsImFsbG9jYXRpb25zIiwidmFsaWQiLCJpc1ZhbGlkIiwiZXJyb3IiLCJlcnJvcnMiLCJyZXF1aXJlc0F1dGhlbnRpY2F0aW9uIiwicmVxdWlyZXNUb2tlbnMiLCJ0b3RhbFRva2VucyIsIm9wdGlvbklkIiwidG9rZW5zIiwiT2JqZWN0IiwiZW50cmllcyIsIm9wdGlvbkluZGV4IiwicGFyc2VJbnQiLCJvcHRpb25FeGlzdHMiLCJpc05hTiIsIm9wdGlvbnMiLCJsZW5ndGgiLCJvcHRpb25FeGlzdHNCeUlkIiwic29tZSIsIm9wdGlvbiIsImlkIiwibWF4VG9rZW5zIiwidm90aW5nQ29uZmlnIiwicXVhZHJhdGljQ3JlZGl0cyIsImRldkxvZyIsInBvbGxJZCIsInVzZXJJZCIsIkVycm9yIiwibWVzc2FnZSIsIlN0cmluZyIsInByb2Nlc3NWb3RlIiwidm90ZVJlY29yZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJwcml2YWN5TGV2ZWwiLCJhdWRpdFJlY2VpcHQiLCJ0aW1lc3RhbXAiLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJ2b3RlSWQiLCJzdWNjZXNzIiwiY2FsY3VsYXRlUmVzdWx0cyIsInZvdGVzIiwic3RhcnRUaW1lIiwidG90YWxTY29yZXMiLCJvcHRpb25Wb3RlcyIsIm9wdGlvblBlcmNlbnRhZ2VzIiwiZm9yRWFjaCIsInZvdGUiLCJ0b3RhbFZvdGVzIiwia2V5cyIsIndpbm5lciIsIndpbm5lclZvdGVzIiwid2lubmVyUGVyY2VudGFnZSIsInNjb3JlIiwicmVzdWx0cyIsImFic3RlbnRpb25zIiwiYWJzdGVudGlvblBlcmNlbnRhZ2UiLCJjYWxjdWxhdGlvblRpbWUiLCJ2b3RpbmdNZXRob2QiLCJwYXJ0aWNpcGF0aW9uUmF0ZSIsImNhbGN1bGF0ZWRBdCIsInRvSVNPU3RyaW5nIiwibWV0YWRhdGEiLCJtZXRob2QiLCJ1bmRlZmluZWQiLCJnZXRDb25maWd1cmF0aW9uIiwiZGVzY3JpcHRpb24iLCJhbGxvd3NNdWx0aXBsZVNlbGVjdGlvbnMiLCJyZXF1aXJlc1JhbmtpbmciLCJtYXhTZWxlY3Rpb25zIiwiY29zdEZ1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQzs7OzsrQkFnQllBOzs7ZUFBQUE7Ozt3QkFkVTtBQWNoQixNQUFNQTtJQUVYQyxrQkFBZ0M7UUFDOUIsT0FBTztJQUNUO0lBRUEsTUFBTUMsYUFBYUMsT0FBb0IsRUFBRUMsSUFBYyxFQUEyQjtRQUNoRixNQUFNQyxRQUFRQyxPQUFPLElBQUksNkJBQTZCO1FBQ3RELElBQUk7WUFDRixNQUFNQyxXQUFXSixRQUFRSSxRQUFRO1lBRWpDLHFDQUFxQztZQUNyQyxJQUFJLENBQUNBLFNBQVNDLFdBQVcsSUFBSSxPQUFPRCxTQUFTQyxXQUFXLEtBQUssVUFBVTtnQkFDckUsT0FBTztvQkFDTEMsT0FBTztvQkFDUEMsU0FBUztvQkFDVEMsT0FBTztvQkFDUEMsUUFBUTt3QkFBQztxQkFBd0M7b0JBQ2pEQyx3QkFBd0I7b0JBQ3hCQyxnQkFBZ0I7Z0JBQ2xCO1lBQ0Y7WUFFQSxtQ0FBbUM7WUFDbkMsTUFBTU4sY0FBY0QsU0FBU0MsV0FBVztZQUN4QyxJQUFJTyxjQUFjO1lBRWxCLEtBQUssTUFBTSxDQUFDQyxVQUFVQyxPQUFPLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ1gsYUFBYztnQkFDNUQsSUFBSSxPQUFPUyxXQUFXLFlBQVlBLFNBQVMsR0FBRztvQkFDNUMsT0FBTzt3QkFDTFIsT0FBTzt3QkFDUEMsU0FBUzt3QkFDVEMsT0FBTzt3QkFDUEMsUUFBUTs0QkFBQzt5QkFBMkM7d0JBQ3BEQyx3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