18be11a81b40f5fe9f2d5ae9a9acb7d4
/**
 * @jest-environment jsdom
 */ "use strict";
// Mock the SSR-safe utility
jest.mock('@/lib/utils/ssr-safe', ()=>({
        safeWindow: jest.fn(()=>null)
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = require("@testing-library/react");
const _MultipleChoiceVoting = /*#__PURE__*/ _interop_require_default(require("../../../../features/voting/components/MultipleChoiceVoting"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
const mockOptions = [
    {
        id: '1',
        text: 'Option 1',
        description: 'First option'
    },
    {
        id: '2',
        text: 'Option 2',
        description: 'Second option'
    },
    {
        id: '3',
        text: 'Option 3',
        description: 'Third option'
    }
];
const defaultProps = {
    pollId: 'test-poll-123',
    title: 'Test Multiple Choice Poll',
    description: 'Choose all options you support',
    options: mockOptions,
    onVote: jest.fn(),
    isVoting: false,
    hasVoted: false,
    maxSelections: 2
};
describe('MultipleChoiceVoting', ()=>{
    beforeEach(()=>{
        jest.clearAllMocks();
    });
    it('renders poll title and description', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        expect(_react.screen.getByText('Test Multiple Choice Poll')).toBeInTheDocument();
        expect(_react.screen.getByText('Choose all options you support')).toBeInTheDocument();
    });
    it('renders all poll options', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        expect(_react.screen.getByText('Option 1')).toBeInTheDocument();
        expect(_react.screen.getByText('Option 2')).toBeInTheDocument();
        expect(_react.screen.getByText('Option 3')).toBeInTheDocument();
    });
    it('allows selecting multiple options', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        const option2 = _react.screen.getByTestId('option-2-checkbox');
        _react.fireEvent.click(option1);
        _react.fireEvent.click(option2);
        // Both options should be selected
        expect(option1).toHaveClass('border-green-500');
        expect(option2).toHaveClass('border-green-500');
    });
    it('allows deselecting options', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        // Select then deselect
        _react.fireEvent.click(option1);
        expect(option1).toHaveClass('border-green-500');
        _react.fireEvent.click(option1);
        expect(option1).not.toHaveClass('border-green-500');
    });
    it('enforces maximum selections limit', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps,
            maxSelections: 2
        }));
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        const option2 = _react.screen.getByTestId('option-2-checkbox');
        const option3 = _react.screen.getByTestId('option-3-checkbox');
        // Select first two options
        _react.fireEvent.click(option1);
        _react.fireEvent.click(option2);
        // Try to select third option (should be blocked)
        _react.fireEvent.click(option3);
        expect(_react.screen.getByText('You can select up to 2 options')).toBeInTheDocument();
        expect(option3).not.toHaveClass('border-green-500');
    });
    it('shows selection summary', async ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps,
            maxSelections: undefined
        }));
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        const option2 = _react.screen.getByTestId('option-2-checkbox');
        _react.fireEvent.click(option1);
        _react.fireEvent.click(option2);
        // Check that options are selected by verifying the styling
        expect(option1).toHaveClass('border-green-500');
        expect(option2).toHaveClass('border-green-500');
        // Check for selection summary
        await (0, _react.waitFor)(()=>{
            expect(_react.screen.getByText(/Selected 2 options:/)).toBeInTheDocument();
        });
    });
    it('submits vote with selected options', async ()=>{
        const mockOnVote = jest.fn().mockResolvedValue({
            ok: true
        });
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps,
            onVote: mockOnVote
        }));
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        const option2 = _react.screen.getByTestId('option-2-checkbox');
        const submitButton = _react.screen.getByTestId('submit-vote-button');
        _react.fireEvent.click(option1);
        _react.fireEvent.click(option2);
        _react.fireEvent.click(submitButton);
        await (0, _react.waitFor)(()=>{
            expect(mockOnVote).toHaveBeenCalledWith([
                0,
                1
            ]);
        });
    });
    it('prevents submission with no selections', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        const submitButton = _react.screen.getByTestId('submit-vote-button');
        expect(submitButton).toBeDisabled();
    });
    it('prevents clicking submit button when no selections', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        const submitButton = _react.screen.getByTestId('submit-vote-button');
        // Button should be disabled when no options are selected
        expect(submitButton).toBeDisabled();
        // Select an option
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        _react.fireEvent.click(option1);
        // Button should now be enabled
        expect(submitButton).not.toBeDisabled();
        // Deselect the option
        _react.fireEvent.click(option1);
        // Button should be disabled again
        expect(submitButton).toBeDisabled();
    });
    it('displays voted state correctly', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps,
            hasVoted: true
        }));
        expect(_react.screen.getByTestId('vote-confirmation')).toBeInTheDocument();
        expect(_react.screen.getByText('Vote submitted successfully!')).toBeInTheDocument();
    });
    it('displays user\'s previous vote', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps,
            userVote: [
                0,
                2
            ]
        }));
        const option1 = _react.screen.getByTestId('option-1-checkbox');
        const option3 = _react.screen.getByTestId('option-3-checkbox');
        expect(option1).toHaveClass('border-green-500');
        expect(option3).toHaveClass('border-green-500');
    });
    it('shows voting method badge', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        expect(_react.screen.getByText('ðŸŽ¯ Multiple Choice Voting')).toBeInTheDocument();
        expect(_react.screen.getByText(/Select all options you support/)).toBeInTheDocument();
    });
    it('shows explanation when info button is clicked', ()=>{
        (0, _react.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_MultipleChoiceVoting.default, {
            ...defaultProps
        }));
        const infoButton = _react.screen.getByText('How it works');
        _react.fireEvent.click(infoButton);
        expect(_react.screen.getByText('How Multiple Choice Voting Works')).toBeInTheDocument();
        expect(_react.screen.getByText('Select multiple options:')).toBeInTheDocument();
        expect(_react.screen.getByText('Choose all options you support')).toBeInTheDocument();
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvZmVhdHVyZXMvdm90aW5nL011bHRpcGxlQ2hvaWNlVm90aW5nLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIGZpcmVFdmVudCwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnXG5pbXBvcnQgTXVsdGlwbGVDaG9pY2VWb3RpbmcgZnJvbSAnLi4vLi4vLi4vLi4vZmVhdHVyZXMvdm90aW5nL2NvbXBvbmVudHMvTXVsdGlwbGVDaG9pY2VWb3RpbmcnXG5cbi8vIE1vY2sgdGhlIFNTUi1zYWZlIHV0aWxpdHlcbmplc3QubW9jaygnQC9saWIvdXRpbHMvc3NyLXNhZmUnLCAoKSA9PiAoe1xuICBzYWZlV2luZG93OiBqZXN0LmZuKCgpID0+IG51bGwpXG59KSlcblxuY29uc3QgbW9ja09wdGlvbnMgPSBbXG4gIHsgaWQ6ICcxJywgdGV4dDogJ09wdGlvbiAxJywgZGVzY3JpcHRpb246ICdGaXJzdCBvcHRpb24nIH0sXG4gIHsgaWQ6ICcyJywgdGV4dDogJ09wdGlvbiAyJywgZGVzY3JpcHRpb246ICdTZWNvbmQgb3B0aW9uJyB9LFxuICB7IGlkOiAnMycsIHRleHQ6ICdPcHRpb24gMycsIGRlc2NyaXB0aW9uOiAnVGhpcmQgb3B0aW9uJyB9XG5dXG5cbmNvbnN0IGRlZmF1bHRQcm9wcyA9IHtcbiAgcG9sbElkOiAndGVzdC1wb2xsLTEyMycsXG4gIHRpdGxlOiAnVGVzdCBNdWx0aXBsZSBDaG9pY2UgUG9sbCcsXG4gIGRlc2NyaXB0aW9uOiAnQ2hvb3NlIGFsbCBvcHRpb25zIHlvdSBzdXBwb3J0JyxcbiAgb3B0aW9uczogbW9ja09wdGlvbnMsXG4gIG9uVm90ZTogamVzdC5mbigpLFxuICBpc1ZvdGluZzogZmFsc2UsXG4gIGhhc1ZvdGVkOiBmYWxzZSxcbiAgbWF4U2VsZWN0aW9uczogMlxufVxuXG5kZXNjcmliZSgnTXVsdGlwbGVDaG9pY2VWb3RpbmcnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gIH0pXG5cbiAgaXQoJ3JlbmRlcnMgcG9sbCB0aXRsZSBhbmQgZGVzY3JpcHRpb24nLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNdWx0aXBsZUNob2ljZVZvdGluZyB7Li4uZGVmYXVsdFByb3BzfSAvPilcbiAgICBcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBNdWx0aXBsZSBDaG9pY2UgUG9sbCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ0Nob29zZSBhbGwgb3B0aW9ucyB5b3Ugc3VwcG9ydCcpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ3JlbmRlcnMgYWxsIHBvbGwgb3B0aW9ucycsICgpID0+IHtcbiAgICByZW5kZXIoPE11bHRpcGxlQ2hvaWNlVm90aW5nIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuICAgIFxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdPcHRpb24gMScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoJ09wdGlvbiAyJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnT3B0aW9uIDMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxuXG4gIGl0KCdhbGxvd3Mgc2VsZWN0aW5nIG11bHRpcGxlIG9wdGlvbnMnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNdWx0aXBsZUNob2ljZVZvdGluZyB7Li4uZGVmYXVsdFByb3BzfSAvPilcbiAgICBcbiAgICBjb25zdCBvcHRpb24xID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvcHRpb24tMS1jaGVja2JveCcpXG4gICAgY29uc3Qgb3B0aW9uMiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3B0aW9uLTItY2hlY2tib3gnKVxuICAgIFxuICAgIGZpcmVFdmVudC5jbGljayhvcHRpb24xKVxuICAgIGZpcmVFdmVudC5jbGljayhvcHRpb24yKVxuICAgIFxuICAgIC8vIEJvdGggb3B0aW9ucyBzaG91bGQgYmUgc2VsZWN0ZWRcbiAgICBleHBlY3Qob3B0aW9uMSkudG9IYXZlQ2xhc3MoJ2JvcmRlci1ncmVlbi01MDAnKVxuICAgIGV4cGVjdChvcHRpb24yKS50b0hhdmVDbGFzcygnYm9yZGVyLWdyZWVuLTUwMCcpXG4gIH0pXG5cbiAgaXQoJ2FsbG93cyBkZXNlbGVjdGluZyBvcHRpb25zJywgKCkgPT4ge1xuICAgIHJlbmRlcig8TXVsdGlwbGVDaG9pY2VWb3Rpbmcgey4uLmRlZmF1bHRQcm9wc30gLz4pXG4gICAgXG4gICAgY29uc3Qgb3B0aW9uMSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3B0aW9uLTEtY2hlY2tib3gnKVxuICAgIFxuICAgIC8vIFNlbGVjdCB0aGVuIGRlc2VsZWN0XG4gICAgZmlyZUV2ZW50LmNsaWNrKG9wdGlvbjEpXG4gICAgZXhwZWN0KG9wdGlvbjEpLnRvSGF2ZUNsYXNzKCdib3JkZXItZ3JlZW4tNTAwJylcbiAgICBcbiAgICBmaXJlRXZlbnQuY2xpY2sob3B0aW9uMSlcbiAgICBleHBlY3Qob3B0aW9uMSkubm90LnRvSGF2ZUNsYXNzKCdib3JkZXItZ3JlZW4tNTAwJylcbiAgfSlcblxuICBpdCgnZW5mb3JjZXMgbWF4aW11bSBzZWxlY3Rpb25zIGxpbWl0JywgKCkgPT4ge1xuICAgIHJlbmRlcig8TXVsdGlwbGVDaG9pY2VWb3Rpbmcgey4uLmRlZmF1bHRQcm9wc30gbWF4U2VsZWN0aW9ucz17Mn0gLz4pXG4gICAgXG4gICAgY29uc3Qgb3B0aW9uMSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3B0aW9uLTEtY2hlY2tib3gnKVxuICAgIGNvbnN0IG9wdGlvbjIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ29wdGlvbi0yLWNoZWNrYm94JylcbiAgICBjb25zdCBvcHRpb24zID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvcHRpb24tMy1jaGVja2JveCcpXG4gICAgXG4gICAgLy8gU2VsZWN0IGZpcnN0IHR3byBvcHRpb25zXG4gICAgZmlyZUV2ZW50LmNsaWNrKG9wdGlvbjEpXG4gICAgZmlyZUV2ZW50LmNsaWNrKG9wdGlvbjIpXG4gICAgXG4gICAgLy8gVHJ5IHRvIHNlbGVjdCB0aGlyZCBvcHRpb24gKHNob3VsZCBiZSBibG9ja2VkKVxuICAgIGZpcmVFdmVudC5jbGljayhvcHRpb24zKVxuICAgIFxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdZb3UgY2FuIHNlbGVjdCB1cCB0byAyIG9wdGlvbnMnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChvcHRpb24zKS5ub3QudG9IYXZlQ2xhc3MoJ2JvcmRlci1ncmVlbi01MDAnKVxuICB9KVxuXG4gIGl0KCdzaG93cyBzZWxlY3Rpb24gc3VtbWFyeScsIGFzeW5jICgpID0+IHtcbiAgICByZW5kZXIoPE11bHRpcGxlQ2hvaWNlVm90aW5nIHsuLi5kZWZhdWx0UHJvcHN9IG1heFNlbGVjdGlvbnM9e3VuZGVmaW5lZH0gLz4pXG4gICAgXG4gICAgY29uc3Qgb3B0aW9uMSA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3B0aW9uLTEtY2hlY2tib3gnKVxuICAgIGNvbnN0IG9wdGlvbjIgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ29wdGlvbi0yLWNoZWNrYm94JylcbiAgICBcbiAgICBmaXJlRXZlbnQuY2xpY2sob3B0aW9uMSlcbiAgICBmaXJlRXZlbnQuY2xpY2sob3B0aW9uMilcbiAgICBcbiAgICAvLyBDaGVjayB0aGF0IG9wdGlvbnMgYXJlIHNlbGVjdGVkIGJ5IHZlcmlmeWluZyB0aGUgc3R5bGluZ1xuICAgIGV4cGVjdChvcHRpb24xKS50b0hhdmVDbGFzcygnYm9yZGVyLWdyZWVuLTUwMCcpXG4gICAgZXhwZWN0KG9wdGlvbjIpLnRvSGF2ZUNsYXNzKCdib3JkZXItZ3JlZW4tNTAwJylcbiAgICBcbiAgICAvLyBDaGVjayBmb3Igc2VsZWN0aW9uIHN1bW1hcnlcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9TZWxlY3RlZCAyIG9wdGlvbnM6LykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICB9KVxuICB9KVxuXG4gIGl0KCdzdWJtaXRzIHZvdGUgd2l0aCBzZWxlY3RlZCBvcHRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tPblZvdGUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBvazogdHJ1ZSB9KVxuICAgIHJlbmRlcig8TXVsdGlwbGVDaG9pY2VWb3Rpbmcgey4uLmRlZmF1bHRQcm9wc30gb25Wb3RlPXttb2NrT25Wb3RlfSAvPilcbiAgICBcbiAgICBjb25zdCBvcHRpb24xID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvcHRpb24tMS1jaGVja2JveCcpXG4gICAgY29uc3Qgb3B0aW9uMiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3B0aW9uLTItY2hlY2tib3gnKVxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc3VibWl0LXZvdGUtYnV0dG9uJylcbiAgICBcbiAgICBmaXJlRXZlbnQuY2xpY2sob3B0aW9uMSlcbiAgICBmaXJlRXZlbnQuY2xpY2sob3B0aW9uMilcbiAgICBmaXJlRXZlbnQuY2xpY2soc3VibWl0QnV0dG9uKVxuICAgIFxuICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgZXhwZWN0KG1vY2tPblZvdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFswLCAxXSlcbiAgICB9KVxuICB9KVxuXG4gIGl0KCdwcmV2ZW50cyBzdWJtaXNzaW9uIHdpdGggbm8gc2VsZWN0aW9ucycsICgpID0+IHtcbiAgICByZW5kZXIoPE11bHRpcGxlQ2hvaWNlVm90aW5nIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuICAgIFxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc3VibWl0LXZvdGUtYnV0dG9uJylcbiAgICBleHBlY3Qoc3VibWl0QnV0dG9uKS50b0JlRGlzYWJsZWQoKVxuICB9KVxuXG4gIGl0KCdwcmV2ZW50cyBjbGlja2luZyBzdWJtaXQgYnV0dG9uIHdoZW4gbm8gc2VsZWN0aW9ucycsICgpID0+IHtcbiAgICByZW5kZXIoPE11bHRpcGxlQ2hvaWNlVm90aW5nIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuICAgIFxuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnc3VibWl0LXZvdGUtYnV0dG9uJylcbiAgICBcbiAgICAvLyBCdXR0b24gc2hvdWxkIGJlIGRpc2FibGVkIHdoZW4gbm8gb3B0aW9ucyBhcmUgc2VsZWN0ZWRcbiAgICBleHBlY3Qoc3VibWl0QnV0dG9uKS50b0JlRGlzYWJsZWQoKVxuICAgIFxuICAgIC8vIFNlbGVjdCBhbiBvcHRpb25cbiAgICBjb25zdCBvcHRpb24xID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvcHRpb24tMS1jaGVja2JveCcpXG4gICAgZmlyZUV2ZW50LmNsaWNrKG9wdGlvbjEpXG4gICAgXG4gICAgLy8gQnV0dG9uIHNob3VsZCBub3cgYmUgZW5hYmxlZFxuICAgIGV4cGVjdChzdWJtaXRCdXR0b24pLm5vdC50b0JlRGlzYWJsZWQoKVxuICAgIFxuICAgIC8vIERlc2VsZWN0IHRoZSBvcHRpb25cbiAgICBmaXJlRXZlbnQuY2xpY2sob3B0aW9uMSlcbiAgICBcbiAgICAvLyBCdXR0b24gc2hvdWxkIGJlIGRpc2FibGVkIGFnYWluXG4gICAgZXhwZWN0KHN1Ym1pdEJ1dHRvbikudG9CZURpc2FibGVkKClcbiAgfSlcblxuICBpdCgnZGlzcGxheXMgdm90ZWQgc3RhdGUgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIHJlbmRlcig8TXVsdGlwbGVDaG9pY2VWb3Rpbmcgey4uLmRlZmF1bHRQcm9wc30gaGFzVm90ZWQ9e3RydWV9IC8+KVxuICAgIFxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3ZvdGUtY29uZmlybWF0aW9uJykpLnRvQmVJblRoZURvY3VtZW50KClcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVm90ZSBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5IScpKS50b0JlSW5UaGVEb2N1bWVudCgpXG4gIH0pXG5cbiAgaXQoJ2Rpc3BsYXlzIHVzZXJcXCdzIHByZXZpb3VzIHZvdGUnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNdWx0aXBsZUNob2ljZVZvdGluZyB7Li4uZGVmYXVsdFByb3BzfSB1c2VyVm90ZT17WzAsIDJdfSAvPilcbiAgICBcbiAgICBjb25zdCBvcHRpb24xID0gc2NyZWVuLmdldEJ5VGVzdElkKCdvcHRpb24tMS1jaGVja2JveCcpXG4gICAgY29uc3Qgb3B0aW9uMyA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnb3B0aW9uLTMtY2hlY2tib3gnKVxuICAgIFxuICAgIGV4cGVjdChvcHRpb24xKS50b0hhdmVDbGFzcygnYm9yZGVyLWdyZWVuLTUwMCcpXG4gICAgZXhwZWN0KG9wdGlvbjMpLnRvSGF2ZUNsYXNzKCdib3JkZXItZ3JlZW4tNTAwJylcbiAgfSlcblxuICBpdCgnc2hvd3Mgdm90aW5nIG1ldGhvZCBiYWRnZScsICgpID0+IHtcbiAgICByZW5kZXIoPE11bHRpcGxlQ2hvaWNlVm90aW5nIHsuLi5kZWZhdWx0UHJvcHN9IC8+KVxuICAgIFxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn46vIE11bHRpcGxlIENob2ljZSBWb3RpbmcnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9TZWxlY3QgYWxsIG9wdGlvbnMgeW91IHN1cHBvcnQvKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxuXG4gIGl0KCdzaG93cyBleHBsYW5hdGlvbiB3aGVuIGluZm8gYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgcmVuZGVyKDxNdWx0aXBsZUNob2ljZVZvdGluZyB7Li4uZGVmYXVsdFByb3BzfSAvPilcbiAgICBcbiAgICBjb25zdCBpbmZvQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnSG93IGl0IHdvcmtzJylcbiAgICBmaXJlRXZlbnQuY2xpY2soaW5mb0J1dHRvbilcbiAgICBcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnSG93IE11bHRpcGxlIENob2ljZSBWb3RpbmcgV29ya3MnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdTZWxlY3QgbXVsdGlwbGUgb3B0aW9uczonKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdDaG9vc2UgYWxsIG9wdGlvbnMgeW91IHN1cHBvcnQnKSkudG9CZUluVGhlRG9jdW1lbnQoKVxuICB9KVxufSlcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInNhZmVXaW5kb3ciLCJmbiIsIm1vY2tPcHRpb25zIiwiaWQiLCJ0ZXh0IiwiZGVzY3JpcHRpb24iLCJkZWZhdWx0UHJvcHMiLCJwb2xsSWQiLCJ0aXRsZSIsIm9wdGlvbnMiLCJvblZvdGUiLCJpc1ZvdGluZyIsImhhc1ZvdGVkIiwibWF4U2VsZWN0aW9ucyIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlbmRlciIsIk11bHRpcGxlQ2hvaWNlVm90aW5nIiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlUZXh0IiwidG9CZUluVGhlRG9jdW1lbnQiLCJvcHRpb24xIiwiZ2V0QnlUZXN0SWQiLCJvcHRpb24yIiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ0b0hhdmVDbGFzcyIsIm5vdCIsIm9wdGlvbjMiLCJ1bmRlZmluZWQiLCJ3YWl0Rm9yIiwibW9ja09uVm90ZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwib2siLCJzdWJtaXRCdXR0b24iLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0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