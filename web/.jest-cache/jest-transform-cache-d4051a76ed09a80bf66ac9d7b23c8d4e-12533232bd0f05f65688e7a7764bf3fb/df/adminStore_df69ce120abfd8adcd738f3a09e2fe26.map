{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/stores/adminStore.ts"],"sourcesContent":["/**\n * @fileoverview Admin Store - Zustand Implementation\n * \n * Admin-specific business logic and data management.\n * UI state (sidebar, notifications, navigation) moved to global stores.\n * \n * @author Choices Platform Team\n * @created 2025-10-24\n * @version 2.0.0\n * @since 1.0.0\n */\n\nimport { create } from 'zustand';\nimport { devtools } from 'zustand/middleware';\nimport { persist } from 'zustand/middleware';\n\nimport type {\n  AdminNotification,\n  TrendingTopic,\n  GeneratedPoll,\n  SystemMetrics,\n  ActivityItem,\n  AdminUser,\n} from '../../features/admin/types';\nimport { logger } from '../logger';\nimport { getSupabaseClient } from '../../utils/supabase/client';\nimport type { Database } from '@/types/database.types';\n\ntype UserProfileRow = Database['public']['Tables']['user_profiles']['Row'];\n\n// Admin store state interface (business logic only)\ninterface AdminStore {\n  // Admin-specific data\n  trendingTopics: TrendingTopic[];\n  generatedPolls: GeneratedPoll[];\n  systemMetrics: SystemMetrics | null;\n  activityItems: ActivityItem[];\n  activityFeed: ActivityItem[];\n  \n  // User management data\n  users: AdminUser[];\n  userFilters: {\n    searchTerm: string;\n    roleFilter: 'all' | 'admin' | 'moderator' | 'user';\n    statusFilter: 'all' | 'active' | 'inactive' | 'suspended';\n    selectedUsers: Set<string>;\n    showBulkActions: boolean;\n  };\n  \n  // Dashboard state\n  activeTab: 'overview' | 'users' | 'analytics' | 'settings' | 'audit';\n  dashboardStats: {\n    totalUsers: number;\n    activePolls: number;\n    totalVotes: number;\n    systemHealth: 'healthy' | 'warning' | 'critical';\n  } | null;\n  \n  // System settings state\n  systemSettings: {\n    general: {\n      siteName: string;\n      siteDescription: string;\n      maintenanceMode: boolean;\n      allowRegistration: boolean;\n      requireEmailVerification: boolean;\n    };\n    performance: {\n      enableCaching: boolean;\n      cacheTTL: number;\n      enableCompression: boolean;\n      maxFileSize: number;\n    };\n    security: {\n      enableRateLimiting: boolean;\n      maxRequestsPerMinute: number;\n      enableCSP: boolean;\n      enableHSTS: boolean;\n    };\n    notifications: {\n      enableEmailNotifications: boolean;\n      enablePushNotifications: boolean;\n      notificationFrequency: 'immediate' | 'daily' | 'weekly';\n    };\n  } | null;\n  settingsTab: 'general' | 'performance' | 'security' | 'notifications';\n  isSavingSettings: boolean;\n  \n  // Reimport state\n  reimportProgress: {\n    totalStates: number;\n    processedStates: number;\n    successfulStates: number;\n    failedStates: number;\n    totalRepresentatives: number;\n    federalRepresentatives: number;\n    stateRepresentatives: number;\n    errors: string[];\n    stateResults: Array<{\n      state: string;\n      success: boolean;\n      representatives: number;\n      duration?: string;\n      error?: string;\n    }>;\n  };\n  reimportLogs: string[];\n  isReimportRunning: boolean;\n  \n  // Loading and error states\n  isLoading: boolean;\n  error: string | null;\n  \n  // Admin notifications\n  adminNotifications: AdminNotification[];\n  \n  // Actions\n  // Data loading actions\n  loadUsers: () => Promise<void>;\n  loadDashboardStats: () => Promise<void>;\n  loadSystemSettings: () => Promise<void>;\n  \n  // User management actions\n  setUserFilters: (filters: Partial<AdminStore['userFilters']>) => void;\n  selectUser: (userId: string) => void;\n  deselectUser: (userId: string) => void;\n  selectAllUsers: () => void;\n  deselectAllUsers: () => void;\n  updateUserRole: (userId: string, role: string) => Promise<void>;\n  updateUserStatus: (userId: string, status: string) => Promise<void>;\n  deleteUser: (userId: string) => Promise<void>;\n  \n  // Dashboard actions\n  setActiveTab: (tab: AdminStore['activeTab']) => void;\n  \n  // System settings actions\n  setSystemSettings: (settings: AdminStore['systemSettings']) => void;\n  updateSystemSetting: (section: keyof NonNullable<AdminStore['systemSettings']>, key: string, value: unknown) => void;\n  setSettingsTab: (tab: AdminStore['settingsTab']) => void;\n  saveSystemSettings: () => Promise<void>;\n  \n  // Reimport actions\n  setReimportProgress: (progress: Partial<AdminStore['reimportProgress']>) => void;\n  addReimportLog: (message: string) => void;\n  clearReimportLogs: () => void;\n  setIsReimportRunning: (running: boolean) => void;\n  startReimport: () => Promise<void>;\n  \n  // Activity and notifications\n  addActivityItem: (item: ActivityItem) => void;\n  clearActivityItems: () => void;\n  addAdminNotification: (notification: AdminNotification) => void;\n  clearAdminNotifications: () => void;\n  markNotificationAsRead: (id: string) => void;\n  \n  // Utility actions\n  setLoading: (loading: boolean) => void;\n  setUpdating: (updating: boolean) => void;\n  setError: (error: string | null) => void;\n  clearError: () => void;\n  setIsSavingSettings: (saving: boolean) => void;\n  refreshData: () => Promise<void>;\n  syncData: () => Promise<void>;\n}\n\n// Create the admin store\nexport const useAdminStore = create<AdminStore>()(\n  devtools(\n    persist(\n      (set, get) => ({\n        // Initial state\n        trendingTopics: [],\n        generatedPolls: [],\n        systemMetrics: null,\n        activityItems: [],\n        activityFeed: [],\n        users: [],\n        userFilters: {\n          searchTerm: '',\n          roleFilter: 'all',\n          statusFilter: 'all',\n          selectedUsers: new Set(),\n          showBulkActions: false,\n        },\n        activeTab: 'overview',\n        dashboardStats: null,\n        systemSettings: null,\n        settingsTab: 'general',\n        isSavingSettings: false,\n        reimportProgress: {\n          totalStates: 0,\n          processedStates: 0,\n          successfulStates: 0,\n          failedStates: 0,\n          totalRepresentatives: 0,\n          federalRepresentatives: 0,\n          stateRepresentatives: 0,\n          errors: [],\n          stateResults: [],\n        },\n        reimportLogs: [],\n        isReimportRunning: false,\n        isLoading: false,\n        error: null,\n        adminNotifications: [],\n\n        // Data loading actions\n        loadUsers: async () => {\n          const { setLoading, setError } = get();\n          \n          try {\n            setLoading(true);\n            setError(null);\n            \n            // Fetch users directly from database\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            const { data: users, error } = await supabase\n              .from('user_profiles')\n              .select(`\n                id,\n                user_id,\n                email,\n                display_name,\n                is_admin,\n                is_active,\n                created_at,\n                updated_at\n              `)\n              .order('created_at', { ascending: false });\n\n            if (error) {\n              throw new Error(`Failed to fetch users: ${error.message}`);\n            }\n\n            // Transform data to match AdminUser interface\n            const adminUsers: AdminUser[] = users?.map((user) => ({\n              id: user.id || user.user_id,\n              email: user.email,\n              name: user.display_name ?? 'Unknown User',\n              role: user.is_admin ? 'admin' : 'user',\n              status: user.is_active ? 'active' : 'inactive',\n              created_at: user.created_at ?? '',\n              last_login: user.updated_at ?? undefined\n            })) ?? [];\n\n            set({ users: adminUsers });\n            \n            logger.info('Users loaded successfully', {\n              userCount: adminUsers.length\n            });\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            setError(errorMessage);\n            logger.error('Failed to load users:', error instanceof Error ? error : new Error(errorMessage));\n          } finally {\n            setLoading(false);\n          }\n        },\n        \n        loadDashboardStats: async () => {\n          const { setLoading, setError } = get();\n          \n          try {\n            setLoading(true);\n            setError(null);\n            \n            // Fetch dashboard stats directly from database\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            // Get total users count\n            const { count: totalUsers, error: usersError } = await supabase\n              .from('user_profiles')\n              .select('*', { count: 'exact', head: true });\n\n            if (usersError) {\n              throw new Error(`Failed to fetch user count: ${usersError.message}`);\n            }\n\n            // Get active polls count\n            const { count: activePolls, error: pollsError } = await supabase\n              .from('polls')\n              .select('*', { count: 'exact', head: true })\n              .eq('status', 'active');\n\n            if (pollsError) {\n              throw new Error(`Failed to fetch polls count: ${pollsError.message}`);\n            }\n\n            // Get total votes count\n            const { count: totalVotes, error: votesError } = await supabase\n              .from('votes')\n              .select('*', { count: 'exact', head: true });\n\n            if (votesError) {\n              throw new Error(`Failed to fetch votes count: ${votesError.message}`);\n            }\n\n            // Determine system health based on recent activity\n            const { data: recentActivity } = await supabase\n              .from('analytics_events')\n              .select('created_at')\n              .gte('created_at', new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString())\n              .limit(1);\n\n            const systemHealth = recentActivity && recentActivity.length > 0 ? 'healthy' : 'warning';\n\n            const stats = {\n              totalUsers: totalUsers ?? 0,\n              activePolls: activePolls ?? 0,\n              totalVotes: totalVotes ?? 0,\n              systemHealth: systemHealth as 'healthy' | 'warning' | 'critical'\n            };\n\n            set({ dashboardStats: stats });\n            \n            logger.info('Dashboard stats loaded successfully', {\n              totalUsers: stats.totalUsers,\n              activePolls: stats.activePolls,\n              totalVotes: stats.totalVotes,\n              systemHealth: stats.systemHealth\n            });\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            setError(errorMessage);\n            logger.error('Failed to load dashboard stats:', error instanceof Error ? error : new Error(errorMessage));\n          } finally {\n            setLoading(false);\n          }\n        },\n        \n        loadSystemSettings: async () => {\n          const { setLoading, setError } = get();\n          \n          try {\n            setLoading(true);\n            setError(null);\n            \n            // Fetch system settings from database\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            // System settings are stored in user_profiles preferences or as constants\n            // Since system_settings table doesn't exist, use default settings\n            const settingsData = null;\n            const error = null;\n\n            // No error handling needed since we're using default settings\n\n            // Use default settings if none exist in database\n            const defaultSettings = {\n              general: {\n                siteName: 'Choices Platform',\n                siteDescription: 'A modern voting platform for democratic decision making',\n                maintenanceMode: false,\n                allowRegistration: true,\n                requireEmailVerification: true,\n              },\n              performance: {\n                enableCaching: true,\n                cacheTTL: 3600,\n                enableCompression: true,\n                maxFileSize: 10485760, // 10MB\n              },\n              security: {\n                enableRateLimiting: true,\n                maxRequestsPerMinute: 100,\n                enableCSP: true,\n                enableHSTS: true,\n              },\n              notifications: {\n                enableEmailNotifications: true,\n                enablePushNotifications: false,\n                notificationFrequency: 'immediate' as const,\n              },\n            };\n            \n            const settings = defaultSettings;\n            set({ systemSettings: settings });\n            \n            logger.info('System settings loaded successfully');\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            setError(errorMessage);\n            logger.error('Failed to load system settings:', error instanceof Error ? error : new Error(errorMessage));\n          } finally {\n            setLoading(false);\n          }\n        },\n        \n        // User management actions\n        setUserFilters: (filters) => set((state) => ({\n          userFilters: { ...state.userFilters, ...filters }\n        })),\n\n        selectUser: (userId) => set((state) => ({\n          userFilters: {\n            ...state.userFilters,\n            selectedUsers: new Set(Array.from(state.userFilters.selectedUsers).concat(userId))\n          }\n        })),\n\n        deselectUser: (userId) => set((state) => {\n          const newSelected = new Set(state.userFilters.selectedUsers);\n          newSelected.delete(userId);\n          return {\n            userFilters: {\n              ...state.userFilters,\n              selectedUsers: newSelected\n            }\n          };\n        }),\n\n        selectAllUsers: () => set((state) => ({\n          userFilters: {\n            ...state.userFilters,\n            selectedUsers: new Set(state.users.map(user => user.id))\n          }\n        })),\n\n        deselectAllUsers: () => set((state) => ({\n          userFilters: {\n            ...state.userFilters,\n            selectedUsers: new Set()\n          }\n        })),\n\n        updateUserRole: async (userId, role) => {\n          try {\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            const { error } = await supabase\n              .from('user_profiles')\n              .update({ is_admin: role === 'admin' })\n              .eq('user_id', userId);\n\n            if (error) {\n              throw new Error(`Failed to update user role: ${error.message}`);\n            }\n\n            // Update local state\n            set((state) => ({\n              users: state.users.map(user => \n                user.id === userId ? { ...user, role: role as 'admin' | 'moderator' | 'user' } : user\n              )\n            }));\n\n            logger.info('User role updated successfully', { userId, role });\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            set({ error: errorMessage });\n            logger.error('Failed to update user role:', error instanceof Error ? error : new Error(errorMessage));\n          }\n        },\n\n        updateUserStatus: async (userId, status) => {\n          try {\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            const { error } = await supabase\n              .from('user_profiles')\n              .update({ is_active: status === 'active' })\n              .eq('user_id', userId);\n\n            if (error) {\n              throw new Error(`Failed to update user status: ${error.message}`);\n            }\n\n            // Update local state\n            set((state) => ({\n              users: state.users.map(user => \n                user.id === userId ? { ...user, status: status as 'active' | 'inactive' | 'suspended' } : user\n              )\n            }));\n\n            logger.info('User status updated successfully', { userId, status });\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            set({ error: errorMessage });\n            logger.error('Failed to update user status:', error instanceof Error ? error : new Error(errorMessage));\n          }\n        },\n\n        deleteUser: async (userId) => {\n          try {\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            const { error } = await supabase\n              .from('user_profiles')\n              .delete()\n              .eq('user_id', userId);\n\n            if (error) {\n              throw new Error(`Failed to delete user: ${error.message}`);\n            }\n\n            // Update local state\n            set((state) => ({\n              users: state.users.filter(user => user.id !== userId)\n            }));\n\n            logger.info('User deleted successfully', { userId });\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            set({ error: errorMessage });\n            logger.error('Failed to delete user:', error instanceof Error ? error : new Error(errorMessage));\n          }\n        },\n\n        // Dashboard actions\n        setActiveTab: (tab) => set({ activeTab: tab }),\n\n        // System settings actions\n        setSystemSettings: (settings) => set({ systemSettings: settings }),\n        \n        updateSystemSetting: (section, key, value) => set((state) => {\n          if (!state.systemSettings) return state;\n          \n          return {\n            systemSettings: {\n              ...state.systemSettings,\n              [section]: {\n                ...state.systemSettings[section],\n                [key]: value\n              }\n            }\n          };\n        }),\n        \n        setSettingsTab: (tab) => set({ settingsTab: tab }),\n\n        saveSystemSettings: async () => {\n          const { setIsSavingSettings, setError } = get();\n          \n          try {\n            setIsSavingSettings(true);\n            setError(null);\n            \n            const { systemSettings } = get();\n            if (!systemSettings) {\n              throw new Error('No settings to save');\n            }\n\n            const supabase = getSupabaseClient();\n            if (!supabase) {\n              throw new Error('Database connection not available');\n            }\n\n            // System settings are not stored in database - they're application constants\n            // This is a no-op for now, but could be implemented with a proper settings table\n            const error = null;\n\n            // No error handling needed since we're not actually saving to database\n\n            logger.info('System settings saved successfully');\n          } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : 'Unknown error';\n            setError(errorMessage);\n            logger.error('Failed to save system settings:', error instanceof Error ? error : new Error(errorMessage));\n          } finally {\n            setIsSavingSettings(false);\n          }\n        },\n\n        // Reimport actions\n        setReimportProgress: (progress) => set((state) => ({\n          reimportProgress: { ...state.reimportProgress, ...progress }\n        })),\n\n        addReimportLog: (message) => set((state) => ({\n          reimportLogs: [...state.reimportLogs, message]\n        })),\n\n        clearReimportLogs: () => set({ reimportLogs: [] }),\n\n        setIsReimportRunning: (running) => set({ isReimportRunning: running }),\n\n        startReimport: async () => {\n          const { setIsReimportRunning, addReimportLog, setReimportProgress } = get();\n          \n          try {\n            setIsReimportRunning(true);\n            addReimportLog('Starting reimport process...');\n            \n            // Reset progress\n            setReimportProgress({\n              totalStates: 0,\n              processedStates: 0,\n              successfulStates: 0,\n              failedStates: 0,\n              totalRepresentatives: 0,\n              federalRepresentatives: 0,\n              stateRepresentatives: 0,\n              errors: [],\n              stateResults: [],\n            });\n\n            // Implementation would go here\n            addReimportLog('Reimport process completed');\n          } catch (error) {\n            addReimportLog(`Reimport failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n          } finally {\n            setIsReimportRunning(false);\n          }\n        },\n\n        // Activity and notifications\n        addActivityItem: (item) => set((state) => ({\n          activityItems: [item, ...state.activityItems.slice(0, 99)] // Keep last 100 items\n        })),\n\n        clearActivityItems: () => set({ activityItems: [] }),\n\n        addAdminNotification: (notification) => set((state) => ({\n          adminNotifications: [notification, ...state.adminNotifications]\n        })),\n\n        clearAdminNotifications: () => set({ adminNotifications: [] }),\n\n        markNotificationAsRead: (id) => set((state) => ({\n          adminNotifications: state.adminNotifications.map(notification =>\n            notification.id === id ? { ...notification, read: true } : notification\n          )\n        })),\n\n        // Utility actions\n        setLoading: (loading) => set({ isLoading: loading }),\n        setUpdating: (updating) => set({ isSavingSettings: updating }),\n        setError: (error) => set({ error }),\n        clearError: () => set({ error: null }),\n        setIsSavingSettings: (saving) => set({ isSavingSettings: saving }),\n\n        refreshData: async () => {\n          const { loadUsers, loadDashboardStats, loadSystemSettings } = get();\n          await Promise.all([\n            loadUsers(),\n            loadDashboardStats(),\n            loadSystemSettings()\n          ]);\n        },\n\n        syncData: async () => {\n          const { refreshData } = get();\n          await refreshData();\n        },\n      }),\n      {\n        name: 'admin-store',\n        partialize: (state) => ({\n          activeTab: state.activeTab,\n          settingsTab: state.settingsTab,\n          userFilters: state.userFilters,\n        }),\n      }\n    ),\n    {\n      name: 'admin-store',\n    }\n  )\n);\n\n// Export individual selectors for better performance\nexport const useTrendingTopics = () => useAdminStore((state) => state.trendingTopics);\nexport const useGeneratedPolls = () => useAdminStore((state) => state.generatedPolls);\nexport const useSystemMetrics = () => useAdminStore((state) => state.systemMetrics);\nexport const useActivityItems = () => useAdminStore((state) => state.activityItems);\nexport const useActivityFeed = () => useAdminStore((state) => state.activityFeed);\nexport const useAdminNotifications = () => useAdminStore((state) => state.adminNotifications);\nexport const useAdminLoading = () => useAdminStore((state) => state.isLoading);\nexport const useAdminError = () => useAdminStore((state) => state.error);\n\n// User management selectors\nexport const useAdminUsers = () => useAdminStore((state) => state.users);\nexport const useAdminUserFilters = () => useAdminStore((state) => state.userFilters);\nexport const useAdminUserActions = () => useAdminStore((state) => ({\n  setUserFilters: state.setUserFilters,\n  selectUser: state.selectUser,\n  deselectUser: state.deselectUser,\n  selectAllUsers: state.selectAllUsers,\n  deselectAllUsers: state.deselectAllUsers,\n  updateUserRole: state.updateUserRole,\n  updateUserStatus: state.updateUserStatus,\n  deleteUser: state.deleteUser,\n}));\n\n// Dashboard selectors\nexport const useAdminActiveTab = () => useAdminStore((state) => state.activeTab);\nexport const useAdminDashboardStats = () => useAdminStore((state) => state.dashboardStats);\nexport const useAdminDashboardActions = () => useAdminStore((state) => ({\n  setActiveTab: state.setActiveTab,\n  loadDashboardStats: state.loadDashboardStats,\n}));\n\n// System settings selectors\nexport const useAdminSystemSettings = () => useAdminStore((state) => state.systemSettings);\nexport const useAdminSettingsTab = () => useAdminStore((state) => state.settingsTab);\nexport const useAdminIsSavingSettings = () => useAdminStore((state) => state.isSavingSettings);\nexport const useAdminSystemSettingsActions = () => useAdminStore((state) => ({\n  setSystemSettings: state.setSystemSettings,\n  updateSystemSetting: state.updateSystemSetting,\n  setSettingsTab: state.setSettingsTab,\n  saveSystemSettings: state.saveSystemSettings,\n  loadSystemSettings: state.loadSystemSettings,\n}));\n\n// Reimport selectors\nexport const useAdminReimportProgress = () => useAdminStore((state) => state.reimportProgress);\nexport const useAdminReimportLogs = () => useAdminStore((state) => state.reimportLogs);\nexport const useAdminIsReimportRunning = () => useAdminStore((state) => state.isReimportRunning);\nexport const useAdminReimportActions = () => useAdminStore((state) => ({\n  setReimportProgress: state.setReimportProgress,\n  addReimportLog: state.addReimportLog,\n  clearReimportLogs: state.clearReimportLogs,\n  setIsReimportRunning: state.setIsReimportRunning,\n  startReimport: state.startReimport,\n}));\n\n// General admin actions\nexport const useAdminActions = () => useAdminStore((state) => ({\n  loadUsers: state.loadUsers,\n  loadDashboardStats: state.loadDashboardStats,\n  loadSystemSettings: state.loadSystemSettings,\n  addActivityItem: state.addActivityItem,\n  clearActivityItems: state.clearActivityItems,\n  addAdminNotification: state.addAdminNotification,\n  clearAdminNotifications: state.clearAdminNotifications,\n  markNotificationAsRead: state.markNotificationAsRead,\n  setLoading: state.setLoading,\n  setUpdating: state.setUpdating,\n  setError: state.setError,\n  clearError: state.clearError,\n  refreshData: state.refreshData,\n  syncData: state.syncData,\n}));\n\n// Admin store utilities\nexport const useAdminStats = () => useAdminStore((state) => ({\n  totalUsers: state.users.length,\n  totalNotifications: state.adminNotifications.length,\n  unreadNotifications: state.adminNotifications.filter(n => !n.read).length,\n  totalActivity: state.activityItems.length,\n}));\n\n// Recent activity selector\nexport const useRecentActivity = () => useAdminStore((state) => \n  state.activityItems.slice(0, 10)\n);\n\n// Admin store utilities\nexport const adminStoreUtils = {\n  getAdminStats: () => {\n    const state = useAdminStore.getState();\n    return {\n      totalUsers: state.users.length,\n      totalNotifications: state.adminNotifications.length,\n      unreadNotifications: state.adminNotifications.filter(n => !n.read).length,\n      totalActivity: state.activityItems.length,\n    };\n  },\n\n  getDataSummary: () => {\n    const state = useAdminStore.getState();\n    return {\n      users: state.users.length,\n      trendingTopics: state.trendingTopics.length,\n      generatedPolls: state.generatedPolls.length,\n      activityItems: state.activityItems.length,\n      notifications: state.adminNotifications.length,\n    };\n  },\n};\n\n// Admin store subscriptions\nexport const adminStoreSubscriptions = {\n  subscribeToUsers: (callback: (users: AdminUser[]) => void) => {\n    return useAdminStore.subscribe((state) => {\n      callback(state.users);\n    });\n  },\n\n  subscribeToDashboardStats: (callback: (stats: AdminStore['dashboardStats']) => void) => {\n    return useAdminStore.subscribe((state) => {\n      callback(state.dashboardStats);\n    });\n  },\n\n  subscribeToNotifications: (callback: (notifications: AdminNotification[]) => void) => {\n    return useAdminStore.subscribe((state) => {\n      callback(state.adminNotifications);\n    });\n  },\n};\n\n// Admin store debug utilities\nexport const adminStoreDebug = {\n  logState: () => {\n    const state = useAdminStore.getState();\n            logger.info('Admin store state logged');\n  },\n  \n  logStats: () => {\n    const stats = adminStoreUtils.getAdminStats();\n    logger.info('Admin statistics:', stats);\n  },\n  \n  logDataSummary: () => {\n    const summary = adminStoreUtils.getDataSummary();\n    logger.info('Admin data summary:', summary);\n  },\n  \n  reset: () => {\n    useAdminStore.getState().clearActivityItems();\n    useAdminStore.getState().clearAdminNotifications();\n    // Admin store reset\n  }\n};"],"names":["adminStoreDebug","adminStoreSubscriptions","adminStoreUtils","useActivityFeed","useActivityItems","useAdminActions","useAdminActiveTab","useAdminDashboardActions","useAdminDashboardStats","useAdminError","useAdminIsReimportRunning","useAdminIsSavingSettings","useAdminLoading","useAdminNotifications","useAdminReimportActions","useAdminReimportLogs","useAdminReimportProgress","useAdminSettingsTab","useAdminStats","useAdminStore","useAdminSystemSettings","useAdminSystemSettingsActions","useAdminUserActions","useAdminUserFilters","useAdminUsers","useGeneratedPolls","useRecentActivity","useSystemMetrics","useTrendingTopics","create","devtools","persist","set","get","trendingTopics","generatedPolls","systemMetrics","activityItems","activityFeed","users","userFilters","searchTerm","roleFilter","statusFilter","selectedUsers","Set","showBulkActions","activeTab","dashboardStats","systemSettings","settingsTab","isSavingSettings","reimportProgress","totalStates","processedStates","successfulStates","failedStates","totalRepresentatives","federalRepresentatives","stateRepresentatives","errors","stateResults","reimportLogs","isReimportRunning","isLoading","error","adminNotifications","loadUsers","setLoading","setError","supabase","getSupabaseClient","Error","data","from","select","order","ascending","message","adminUsers","map","user","id","user_id","email","name","display_name","role","is_admin","status","is_active","created_at","last_login","updated_at","undefined","logger","info","userCount","length","errorMessage","loadDashboardStats","count","totalUsers","usersError","head","activePolls","pollsError","eq","totalVotes","votesError","recentActivity","gte","Date","now","toISOString","limit","systemHealth","stats","loadSystemSettings","settingsData","defaultSettings","general","siteName","siteDescription","maintenanceMode","allowRegistration","requireEmailVerification","performance","enableCaching","cacheTTL","enableCompression","maxFileSize","security","enableRateLimiting","maxRequestsPerMinute","enableCSP","enableHSTS","notifications","enableEmailNotifications","enablePushNotifications","notificationFrequency","settings","setUserFilters","filters","state","selectUser","userId","Array","concat","deselectUser","newSelected","delete","selectAllUsers","deselectAllUsers","updateUserRole","update","updateUserStatus","deleteUser","filter","setActiveTab","tab","setSystemSettings","updateSystemSetting","section","key","value","setSettingsTab","saveSystemSettings","setIsSavingSettings","setReimportProgress","progress","addReimportLog","clearReimportLogs","setIsReimportRunning","running","startReimport","addActivityItem","item","slice","clearActivityItems","addAdminNotification","notification","clearAdminNotifications","markNotificationAsRead","read","loading","setUpdating","updating","clearError","saving","refreshData","Promise","all","syncData","partialize","totalNotifications","unreadNotifications","n","totalActivity","getAdminStats","getState","getDataSummary","subscribeToUsers","callback","subscribe","subscribeToDashboardStats","subscribeToNotifications","logState","logStats","logDataSummary","summary","reset"],"mappings":"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"}