32c8f7d2efb74818590402b972bb479d
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return OfflineSync;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _RefreshCw = require("lucide-react/dist/esm/icons/RefreshCw");
const _CheckCircle = require("lucide-react/dist/esm/icons/CheckCircle");
const _AlertCircle = require("lucide-react/dist/esm/icons/AlertCircle");
const _Clock = require("lucide-react/dist/esm/icons/Clock");
const _react = require("react");
const _usePWA = require("../../../hooks/usePWA");
function OfflineSync({ className = '' }) {
    const pwa = (0, _usePWA.usePWA)();
    const [syncStatus, setSyncStatus] = (0, _react.useState)('idle');
    const [lastSync, setLastSync] = (0, _react.useState)(null);
    const handleSync = async ()=>{
        setSyncStatus('syncing');
        try {
            await pwa.syncOfflineData();
            setSyncStatus('success');
            setLastSync(new Date());
            setTimeout(()=>setSyncStatus('idle'), 3000);
        } catch  {
            setSyncStatus('error');
            setTimeout(()=>setSyncStatus('idle'), 3000);
        }
    };
    if (!pwa.hasOfflineData) {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `bg-blue-50 border border-blue-200 rounded-lg p-4 ${className}`,
        "data-testid": "offline-sync",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between mb-3",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_RefreshCw.RefreshCw, {
                                className: "w-5 h-5 text-blue-600"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                className: "text-sm font-medium text-blue-800",
                                children: "Background Sync"
                            })
                        ]
                    }),
                    lastSync && /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                        className: "text-xs text-blue-600",
                        children: [
                            "Last sync: ",
                            lastSync.toLocaleTimeString()
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "space-y-2",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between p-2 bg-white rounded border",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Clock.Clock, {
                                        className: "w-4 h-4 text-gray-400"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                        className: "text-sm text-gray-700",
                                        children: "3 offline votes pending"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-xs text-gray-500",
                                children: "2 minutes ago"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between p-2 bg-white rounded border",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_Clock.Clock, {
                                        className: "w-4 h-4 text-gray-400"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                        className: "text-sm text-gray-700",
                                        children: "1 comment pending"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-xs text-gray-500",
                                children: "5 minutes ago"
                            })
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: handleSync,
                disabled: syncStatus === 'syncing',
                className: "w-full mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",
                children: syncStatus === 'syncing' ? 'Syncing...' : 'Sync Now'
            }),
            syncStatus === 'success' && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "mt-2 p-2 bg-green-100 rounded border",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center space-x-2 text-green-800",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_CheckCircle.CheckCircle, {
                            className: "w-4 h-4"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "text-sm",
                            children: "Sync completed successfully"
                        })
                    ]
                })
            }),
            syncStatus === 'error' && /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "mt-2 p-2 bg-red-100 rounded border",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center space-x-2 text-red-800",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_AlertCircle.AlertCircle, {
                            className: "w-4 h-4"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "text-sm",
                            children: "Sync failed. Please try again."
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9wd2EvY29tcG9uZW50cy9PZmZsaW5lU3luYy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IFJlZnJlc2hDdywgQ2hlY2tDaXJjbGUsIEFsZXJ0Q2lyY2xlLCBDbG9jayB9IGZyb20gJ2x1Y2lkZS1yZWFjdCdcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5cbmltcG9ydCB7IHVzZVBXQSB9IGZyb20gJ0AvaG9va3MvdXNlUFdBJ1xuXG5pbnRlcmZhY2UgT2ZmbGluZVN5bmNQcm9wcyB7XG4gIGNsYXNzTmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBPZmZsaW5lU3luYyh7IGNsYXNzTmFtZSA9ICcnIH06IE9mZmxpbmVTeW5jUHJvcHMpIHtcbiAgY29uc3QgcHdhID0gdXNlUFdBKClcbiAgY29uc3QgW3N5bmNTdGF0dXMsIHNldFN5bmNTdGF0dXNdID0gdXNlU3RhdGU8J2lkbGUnIHwgJ3N5bmNpbmcnIHwgJ3N1Y2Nlc3MnIHwgJ2Vycm9yJz4oJ2lkbGUnKVxuICBjb25zdCBbbGFzdFN5bmMsIHNldExhc3RTeW5jXSA9IHVzZVN0YXRlPERhdGUgfCBudWxsPihudWxsKVxuXG4gIGNvbnN0IGhhbmRsZVN5bmMgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0U3luY1N0YXR1cygnc3luY2luZycpXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHB3YS5zeW5jT2ZmbGluZURhdGEoKVxuICAgICAgc2V0U3luY1N0YXR1cygnc3VjY2VzcycpXG4gICAgICBzZXRMYXN0U3luYyhuZXcgRGF0ZSgpKVxuICAgICAgc2V0VGltZW91dCgoKSA9PiBzZXRTeW5jU3RhdHVzKCdpZGxlJyksIDMwMDApXG4gICAgfSBjYXRjaCB7XG4gICAgICBzZXRTeW5jU3RhdHVzKCdlcnJvcicpXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHNldFN5bmNTdGF0dXMoJ2lkbGUnKSwgMzAwMClcbiAgICB9XG4gIH1cblxuICBpZiAoIXB3YS5oYXNPZmZsaW5lRGF0YSkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgYmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHJvdW5kZWQtbGcgcC00ICR7Y2xhc3NOYW1lfWB9IGRhdGEtdGVzdGlkPVwib2ZmbGluZS1zeW5jXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi0zXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCI+XG4gICAgICAgICAgPFJlZnJlc2hDdyBjbGFzc05hbWU9XCJ3LTUgaC01IHRleHQtYmx1ZS02MDBcIiAvPlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDBcIj5CYWNrZ3JvdW5kIFN5bmM8L2gzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2xhc3RTeW5jICYmIChcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgIExhc3Qgc3luYzoge2xhc3RTeW5jLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTIgYmctd2hpdGUgcm91bmRlZCBib3JkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPENsb2NrIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj4zIG9mZmxpbmUgdm90ZXMgcGVuZGluZzwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj4yIG1pbnV0ZXMgYWdvPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTIgYmctd2hpdGUgcm91bmRlZCBib3JkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgPENsb2NrIGNsYXNzTmFtZT1cInctNCBoLTQgdGV4dC1ncmF5LTQwMFwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS03MDBcIj4xIGNvbW1lbnQgcGVuZGluZzwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj41IG1pbnV0ZXMgYWdvPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8YnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9e2hhbmRsZVN5bmN9XG4gICAgICAgIGRpc2FibGVkPXtzeW5jU3RhdHVzID09PSAnc3luY2luZyd9XG4gICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBtdC0zIHB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQtbGcgaG92ZXI6YmctYmx1ZS03MDAgZGlzYWJsZWQ6b3BhY2l0eS01MCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICA+XG4gICAgICAgIHtzeW5jU3RhdHVzID09PSAnc3luY2luZycgPyAnU3luY2luZy4uLicgOiAnU3luYyBOb3cnfVxuICAgICAgPC9idXR0b24+XG5cbiAgICAgIHtzeW5jU3RhdHVzID09PSAnc3VjY2VzcycgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcC0yIGJnLWdyZWVuLTEwMCByb3VuZGVkIGJvcmRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHRleHQtZ3JlZW4tODAwXCI+XG4gICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+U3luYyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIHtzeW5jU3RhdHVzID09PSAnZXJyb3InICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIHAtMiBiZy1yZWQtMTAwIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgdGV4dC1yZWQtODAwXCI+XG4gICAgICAgICAgICA8QWxlcnRDaXJjbGUgY2xhc3NOYW1lPVwidy00IGgtNFwiIC8+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+U3luYyBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJPZmZsaW5lU3luYyIsImNsYXNzTmFtZSIsInB3YSIsInVzZVBXQSIsInN5bmNTdGF0dXMiLCJzZXRTeW5jU3RhdHVzIiwidXNlU3RhdGUiLCJsYXN0U3luYyIsInNldExhc3RTeW5jIiwiaGFuZGxlU3luYyIsInN5bmNPZmZsaW5lRGF0YSIsIkRhdGUiLCJzZXRUaW1lb3V0IiwiaGFzT2ZmbGluZURhdGEiLCJkaXYiLCJkYXRhLXRlc3RpZCIsIlJlZnJlc2hDdyIsImgzIiwic3BhbiIsInRvTG9jYWxlVGltZVN0cmluZyIsIkNsb2NrIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwiQ2hlY2tDaXJjbGUiLCJBbGVydENpcmNsZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OytCQVdBOzs7ZUFBd0JBOzs7Ozs7Ozt1QkFSQzt3QkFFRjtBQU1SLFNBQVNBLFlBQVksRUFBRUMsWUFBWSxFQUFFLEVBQW9CO0lBQ3RFLE1BQU1DLE1BQU1DLElBQUFBLGNBQU07SUFDbEIsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdDLElBQUFBLGVBQVEsRUFBMkM7SUFDdkYsTUFBTSxDQUFDQyxVQUFVQyxZQUFZLEdBQUdGLElBQUFBLGVBQVEsRUFBYztJQUV0RCxNQUFNRyxhQUFhO1FBQ2pCSixjQUFjO1FBQ2QsSUFBSTtZQUNGLE1BQU1ILElBQUlRLGVBQWU7WUFDekJMLGNBQWM7WUFDZEcsWUFBWSxJQUFJRztZQUNoQkMsV0FBVyxJQUFNUCxjQUFjLFNBQVM7UUFDMUMsRUFBRSxPQUFNO1lBQ05BLGNBQWM7WUFDZE8sV0FBVyxJQUFNUCxjQUFjLFNBQVM7UUFDMUM7SUFDRjtJQUVBLElBQUksQ0FBQ0gsSUFBSVcsY0FBYyxFQUFFO1FBQ3ZCLE9BQU87SUFDVDtJQUVBLHFCQUNFLHNCQUFDQztRQUFJYixXQUFXLENBQUMsaURBQWlELEVBQUVBLFdBQVc7UUFBRWMsZUFBWTs7MEJBQzNGLHNCQUFDRDtnQkFBSWIsV0FBVTs7a0NBQ2Isc0JBQUNhO3dCQUFJYixXQUFVOzswQ0FDYixxQkFBQ2Usb0JBQVM7Z0NBQUNmLFdBQVU7OzBDQUNyQixxQkFBQ2dCO2dDQUFHaEIsV0FBVTswQ0FBb0M7Ozs7b0JBRW5ETSwwQkFDQyxzQkFBQ1c7d0JBQUtqQixXQUFVOzs0QkFBd0I7NEJBQzFCTSxTQUFTWSxrQkFBa0I7Ozs7OzBCQUs3QyxzQkFBQ0w7Z0JBQUliLFdBQVU7O2tDQUNiLHNCQUFDYTt3QkFBSWIsV0FBVTs7MENBQ2Isc0JBQUNhO2dDQUFJYixXQUFVOztrREFDYixxQkFBQ21CLFlBQUs7d0NBQUNuQixXQUFVOztrREFDakIscUJBQUNpQjt3Q0FBS2pCLFdBQVU7a0RBQXdCOzs7OzBDQUUxQyxxQkFBQ2lCO2dDQUFLakIsV0FBVTswQ0FBd0I7Ozs7a0NBRzFDLHNCQUFDYTt3QkFBSWIsV0FBVTs7MENBQ2Isc0JBQUNhO2dDQUFJYixXQUFVOztrREFDYixxQkFBQ21CLFlBQUs7d0NBQUNuQixXQUFVOztrREFDakIscUJBQUNpQjt3Q0FBS2pCLFdBQVU7a0RBQXdCOzs7OzBDQUUxQyxxQkFBQ2lCO2dDQUFLakIsV0FBVTswQ0FBd0I7Ozs7OzswQkFJNUMscUJBQUNvQjtnQkFDQ0MsU0FBU2I7Z0JBQ1RjLFVBQVVuQixlQUFlO2dCQUN6QkgsV0FBVTswQkFFVEcsZUFBZSxZQUFZLGVBQWU7O1lBRzVDQSxlQUFlLDJCQUNkLHFCQUFDVTtnQkFBSWIsV0FBVTswQkFDYixjQUFBLHNCQUFDYTtvQkFBSWIsV0FBVTs7c0NBQ2IscUJBQUN1Qix3QkFBVzs0QkFBQ3ZCLFdBQVU7O3NDQUN2QixxQkFBQ2lCOzRCQUFLakIsV0FBVTtzQ0FBVTs7Ozs7WUFLL0JHLGVBQWUseUJBQ2QscUJBQUNVO2dCQUFJYixXQUFVOzBCQUNiLGNBQUEsc0JBQUNhO29CQUFJYixXQUFVOztzQ0FDYixxQkFBQ3dCLHdCQUFXOzRCQUFDeEIsV0FBVTs7c0NBQ3ZCLHFCQUFDaUI7NEJBQUtqQixXQUFVO3NDQUFVOzs7Ozs7O0FBTXRDIn0=