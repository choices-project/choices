{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/utils/cors.ts"],"sourcesContent":["/**\n * CORS Utility\n * \n * CORS configuration and utilities\n * \n * Created: October 26, 2025\n * Status: ACTIVE\n */\n\nexport interface CorsOptions {\n  origin?: string | string[] | boolean;\n  methods?: string[];\n  allowedHeaders?: string[];\n  credentials?: boolean;\n  maxAge?: number;\n}\n\n/**\n * Default CORS options\n */\nexport const defaultCorsOptions: CorsOptions = {\n  origin: true,\n  methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\n  allowedHeaders: ['Content-Type', 'Authorization', 'X-CSRF-Token'],\n  credentials: true,\n  maxAge: 86400\n};\n\n/**\n * Create CORS headers\n */\nexport function createCorsHeaders(options: CorsOptions = defaultCorsOptions): Record<string, string> {\n  const headers: Record<string, string> = {};\n  \n  if (options.origin) {\n    if (Array.isArray(options.origin)) {\n      headers['Access-Control-Allow-Origin'] = options.origin.join(', ');\n    } else if (typeof options.origin === 'string') {\n      headers['Access-Control-Allow-Origin'] = options.origin;\n    } else {\n      headers['Access-Control-Allow-Origin'] = '*';\n    }\n  }\n  \n  if (options.methods) {\n    headers['Access-Control-Allow-Methods'] = options.methods.join(', ');\n  }\n  \n  if (options.allowedHeaders) {\n    headers['Access-Control-Allow-Headers'] = options.allowedHeaders.join(', ');\n  }\n  \n  if (options.credentials) {\n    headers['Access-Control-Allow-Credentials'] = 'true';\n  }\n  \n  if (options.maxAge) {\n    headers['Access-Control-Max-Age'] = options.maxAge.toString();\n  }\n  \n  return headers;\n}\n\n/**\n * Handle CORS preflight request\n */\nexport function handleCorsPreflight(options: CorsOptions = defaultCorsOptions): Response {\n  return new Response(null, {\n    status: 200,\n    headers: createCorsHeaders(options)\n  });\n}\n\nexport default {\n  defaultCorsOptions,\n  createCorsHeaders,\n  handleCorsPreflight\n};"],"names":["createCorsHeaders","defaultCorsOptions","handleCorsPreflight","origin","methods","allowedHeaders","credentials","maxAge","options","headers","Array","isArray","join","toString","Response","status"],"mappings":"AAAA;;;;;;;CAOC;;;;;;;;;;;QAwBeA;eAAAA;;QA0ChB;eAAA;;QArDaC;eAAAA;;QA8CGC;eAAAA;;;AA9CT,MAAMD,qBAAkC;IAC7CE,QAAQ;IACRC,SAAS;QAAC;QAAO;QAAQ;QAAO;QAAU;KAAU;IACpDC,gBAAgB;QAAC;QAAgB;QAAiB;KAAe;IACjEC,aAAa;IACbC,QAAQ;AACV;AAKO,SAASP,kBAAkBQ,UAAuBP,kBAAkB;IACzE,MAAMQ,UAAkC,CAAC;IAEzC,IAAID,QAAQL,MAAM,EAAE;QAClB,IAAIO,MAAMC,OAAO,CAACH,QAAQL,MAAM,GAAG;YACjCM,OAAO,CAAC,8BAA8B,GAAGD,QAAQL,MAAM,CAACS,IAAI,CAAC;QAC/D,OAAO,IAAI,OAAOJ,QAAQL,MAAM,KAAK,UAAU;YAC7CM,OAAO,CAAC,8BAA8B,GAAGD,QAAQL,MAAM;QACzD,OAAO;YACLM,OAAO,CAAC,8BAA8B,GAAG;QAC3C;IACF;IAEA,IAAID,QAAQJ,OAAO,EAAE;QACnBK,OAAO,CAAC,+BAA+B,GAAGD,QAAQJ,OAAO,CAACQ,IAAI,CAAC;IACjE;IAEA,IAAIJ,QAAQH,cAAc,EAAE;QAC1BI,OAAO,CAAC,+BAA+B,GAAGD,QAAQH,cAAc,CAACO,IAAI,CAAC;IACxE;IAEA,IAAIJ,QAAQF,WAAW,EAAE;QACvBG,OAAO,CAAC,mCAAmC,GAAG;IAChD;IAEA,IAAID,QAAQD,MAAM,EAAE;QAClBE,OAAO,CAAC,yBAAyB,GAAGD,QAAQD,MAAM,CAACM,QAAQ;IAC7D;IAEA,OAAOJ;AACT;AAKO,SAASP,oBAAoBM,UAAuBP,kBAAkB;IAC3E,OAAO,IAAIa,SAAS,MAAM;QACxBC,QAAQ;QACRN,SAAST,kBAAkBQ;IAC7B;AACF;MAEA,WAAe;IACbP;IACAD;IACAE;AACF"}