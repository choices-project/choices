{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/lib/utils/logger-comprehensive.test.ts"],"sourcesContent":["/**\n * @jest-environment node\n */\n\n// Set NODE_ENV to development before importing logger\nprocess.env.NODE_ENV = 'development';\n\n// Clear module cache to ensure fresh import\njest.resetModules();\n\nimport { logger } from '@/lib/utils/logger';\nimport type { Database } from '@/types/database';\n\n// Mock console methods\nconst mockConsole = {\n  log: jest.fn(),\n  error: jest.fn(),\n  warn: jest.fn(),\n  info: jest.fn(),\n  debug: jest.fn(),\n};\n\n// Replace console with mock\nObject.assign(console, mockConsole);\n\ndescribe('Logger Utility - Comprehensive Testing', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    \n    // Force logger to be in development mode for all tests\n    logger.isDevelopment = true;\n    logger.level = 0; // DEBUG level\n  });\n\n  describe('Basic Logging', () => {\n    it('should log info messages', () => {\n      logger.info('Test info message');\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Test info message/));\n    });\n\n    it('should log error messages', () => {\n      logger.error('Test error message');\n      \n      expect(mockConsole.error).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] ERROR: Test error message/));\n    });\n\n    it('should log warning messages', () => {\n      logger.warn('Test warning message');\n      \n      expect(mockConsole.warn).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] WARN: Test warning message/));\n    });\n\n    it('should log debug messages', () => {\n      logger.debug('Test debug message');\n      \n      expect(mockConsole.debug).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] DEBUG: Test debug message/));\n    });\n  });\n\n  describe('Structured Logging', () => {\n    it('should log with metadata', () => {\n      const metadata = {\n        userId: 'user-123',\n        action: 'login',\n        timestamp: new Date().toISOString(),\n      };\n      \n      logger.info('User action', metadata);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: User action/));\n    });\n\n    it('should log with error objects', () => {\n      const error = new Error('Test error');\n      const context = {\n        userId: 'user-123',\n        action: 'database-query',\n      };\n      \n      logger.error('Database error', error, context);\n      \n      expect(mockConsole.error).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] ERROR: Database error/));\n    });\n\n    it('should log with performance metrics', () => {\n      const metrics = {\n        duration: 150,\n        memoryUsage: 25.5,\n        cpuUsage: 12.3,\n      };\n      \n      logger.info('Performance metrics', metrics);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Performance metrics/));\n    });\n  });\n\n  describe('Log Levels', () => {\n    it('should respect log level configuration', () => {\n      // Test different log levels\n      logger.debug('Debug message');\n      logger.info('Info message');\n      logger.warn('Warning message');\n      logger.error('Error message');\n      \n      expect(mockConsole.debug).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] DEBUG: Debug message/));\n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Info message/));\n      expect(mockConsole.warn).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] WARN: Warning message/));\n      expect(mockConsole.error).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] ERROR: Error message/));\n    });\n\n    it('should handle log level filtering', () => {\n      // Temporarily change logger level to INFO (filter out DEBUG)\n      const originalLevel = logger.level;\n      logger.level = 1; // INFO level\n      \n      // Clear previous calls\n      jest.clearAllMocks();\n      \n      // Debug logs should be filtered, info logs should pass\n      logger.debug('Debug message');\n      logger.info('Info message');\n      \n      expect(mockConsole.debug).not.toHaveBeenCalled();\n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Info message/));\n      \n      // Restore original level\n      logger.level = originalLevel;\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle circular references in objects', () => {\n      const circularObj: any = { name: 'test' };\n      circularObj.self = circularObj;\n      \n      logger.info('Circular object', circularObj);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Circular object/));\n    });\n\n    it('should handle undefined values', () => {\n      logger.info('Undefined value', undefined);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Undefined value/));\n    });\n\n    it('should handle null values', () => {\n      logger.info('Null value', null);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Null value/));\n    });\n\n    it('should handle large objects', () => {\n      const largeObj = {\n        data: Array.from({ length: 1000 }, (_, i) => ({ id: i, value: `item-${i}` })),\n        metadata: {\n          count: 1000,\n          timestamp: new Date().toISOString(),\n        },\n      };\n      \n      logger.info('Large object', largeObj);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Large object/));\n    });\n  });\n\n  describe('Performance', () => {\n    it('should log within performance budget', () => {\n      const startTime = performance.now();\n      \n      for (let i = 0; i < 100; i++) {\n        logger.info(`Message ${i}`);\n      }\n      \n      const endTime = performance.now();\n      const duration = endTime - startTime;\n      \n      expect(duration).toBeLessThan(100); // Should complete within 100ms\n    });\n\n    it('should not block execution', async () => {\n      const startTime = performance.now();\n      \n      // Log multiple messages asynchronously\n      const promises = Array.from({ length: 10 }, (_, i) => \n        Promise.resolve().then(() => logger.info(`Async message ${i}`))\n      );\n      \n      await Promise.all(promises);\n      \n      const endTime = performance.now();\n      const duration = endTime - startTime;\n      \n      expect(duration).toBeLessThan(50); // Should complete within 50ms\n    });\n  });\n\n  describe('Security', () => {\n    it('should sanitize sensitive data', () => {\n      const sensitiveData = {\n        password: 'secret123',\n        token: 'bearer-token',\n        apiKey: 'api-key-123',\n        email: 'user@example.com',\n        normalData: 'safe data',\n      };\n      \n      logger.info('User data', sensitiveData);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: User data/));\n    });\n\n    it('should handle SQL injection attempts', () => {\n      const maliciousInput = \"'; DROP TABLE users; --\";\n      \n      logger.info('User input', { input: maliciousInput });\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: User input/));\n    });\n\n    it('should handle XSS attempts', () => {\n      const maliciousInput = '<script>alert(\"xss\")</script>';\n      \n      logger.info('User input', { input: maliciousInput });\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: User input/));\n    });\n  });\n\n  describe('Context and Tracing', () => {\n    it('should include request context', () => {\n      const requestContext = {\n        requestId: 'req-123',\n        userId: 'user-123',\n        ip: '192.168.1.1',\n        userAgent: 'Mozilla/5.0...',\n      };\n      \n      logger.info('Request processed', requestContext);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Request processed/));\n    });\n\n    it('should include error stack traces', () => {\n      const error = new Error('Test error');\n      error.stack = 'Error: Test error\\n    at test.js:1:1';\n      \n      logger.error('Error occurred', error);\n      \n      expect(mockConsole.error).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] ERROR: Error occurred/));\n    });\n\n    it('should include timing information', () => {\n      const timing = {\n        startTime: Date.now() - 1000,\n        endTime: Date.now(),\n        duration: 1000,\n      };\n      \n      logger.info('Operation completed', timing);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Operation completed/));\n    });\n  });\n\n  describe('Log Formatting', () => {\n    it('should format timestamps correctly', () => {\n      const timestamp = new Date('2023-01-01T00:00:00Z');\n      \n      logger.info('Timestamped message', { timestamp });\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Timestamped message/));\n    });\n\n    it('should format objects with proper indentation', () => {\n      const complexObj = {\n        level1: {\n          level2: {\n            level3: 'value',\n            array: [1, 2, 3],\n          },\n        },\n      };\n      \n      logger.info('Complex object', complexObj);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Complex object/));\n    });\n\n    it('should handle special characters', () => {\n      const specialChars = {\n        unicode: 'ðŸš€',\n        emoji: 'ðŸ˜€',\n        symbols: '!@#$%^&*()',\n        quotes: '\"double\" and \\'single\\'',\n      };\n      \n      logger.info('Special characters', specialChars);\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Special characters/));\n    });\n  });\n\n  describe('Memory Management', () => {\n    it('should not cause memory leaks', () => {\n      const initialMemory = process.memoryUsage().heapUsed;\n      \n      // Log many messages\n      for (let i = 0; i < 1000; i++) {\n        logger.info(`Message ${i}`, { data: `data-${i}` });\n      }\n      \n      const finalMemory = process.memoryUsage().heapUsed;\n      const memoryIncrease = finalMemory - initialMemory;\n      \n      // Memory increase should be reasonable\n      expect(memoryIncrease).toBeLessThan(10 * 1024 * 1024); // Less than 10MB\n    });\n\n    it('should handle large log messages', () => {\n      const largeMessage = 'x'.repeat(10000);\n      \n      logger.info('Large message', { message: largeMessage });\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Large message/));\n    });\n  });\n\n  describe('Async Logging', () => {\n    it('should handle async operations', async () => {\n      const asyncOperation = async () => {\n        await new Promise(resolve => setTimeout(resolve, 10));\n        return 'async result';\n      };\n      \n      logger.info('Starting async operation');\n      const result = await asyncOperation();\n      logger.info('Async operation completed', { result });\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Starting async operation/));\n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Async operation completed/));\n    });\n\n    it('should handle promise rejections', async () => {\n      const failingOperation = async () => {\n        throw new Error('Async error');\n      };\n      \n      logger.info('Starting failing operation');\n      \n      try {\n        await failingOperation();\n      } catch (error) {\n        logger.error('Async operation failed', error);\n      }\n      \n      expect(mockConsole.info).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] INFO: Starting failing operation/));\n      expect(mockConsole.error).toHaveBeenCalledWith(expect.stringMatching(/\\[.*\\] ERROR: Async operation failed/));\n    });\n  });\n\n  describe('Log Aggregation', () => {\n    it('should aggregate related log messages', () => {\n      const sessionId = 'session-123';\n      \n      logger.info('Session started', { sessionId });\n      logger.info('User action', { sessionId, action: 'login' });\n      logger.info('User action', { sessionId, action: 'navigate' });\n      logger.info('Session ended', { sessionId });\n      \n      expect(mockConsole.info).toHaveBeenCalledTimes(4);\n    });\n\n    it('should handle log batching', () => {\n      const messages = [\n        { level: 'info', message: 'Message 1' },\n        { level: 'info', message: 'Message 2' },\n        { level: 'warn', message: 'Warning 1' },\n      ];\n      \n      messages.forEach(msg => {\n        if (msg.level === 'info') {\n          logger.info(msg.message);\n        } else if (msg.level === 'warn') {\n          logger.warn(msg.message);\n        }\n      });\n      \n      expect(mockConsole.info).toHaveBeenCalledTimes(2);\n      expect(mockConsole.warn).toHaveBeenCalledTimes(1);\n    });\n  });\n});\n\n"],"names":["process","env","NODE_ENV","jest","resetModules","mockConsole","log","fn","error","warn","info","debug","Object","assign","console","describe","beforeEach","clearAllMocks","logger","isDevelopment","level","it","expect","toHaveBeenCalledWith","stringMatching","metadata","userId","action","timestamp","Date","toISOString","Error","context","metrics","duration","memoryUsage","cpuUsage","originalLevel","not","toHaveBeenCalled","circularObj","name","self","undefined","largeObj","data","Array","from","length","_","i","id","value","count","startTime","performance","now","endTime","toBeLessThan","promises","Promise","resolve","then","all","sensitiveData","password","token","apiKey","email","normalData","maliciousInput","input","requestContext","requestId","ip","userAgent","stack","timing","complexObj","level1","level2","level3","array","specialChars","unicode","emoji","symbols","quotes","initialMemory","heapUsed","finalMemory","memoryIncrease","largeMessage","repeat","message","asyncOperation","setTimeout","result","failingOperation","sessionId","toHaveBeenCalledTimes","messages","forEach","msg"],"mappings":"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"}