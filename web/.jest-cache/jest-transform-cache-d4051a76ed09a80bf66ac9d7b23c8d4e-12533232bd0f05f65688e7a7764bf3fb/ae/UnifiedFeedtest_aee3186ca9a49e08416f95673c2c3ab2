15a7be3acd2e6bc979891ae9adc65b37
/**
 * UnifiedFeed Component Tests
 * 
 * Comprehensive testing for the UnifiedFeed component using the Real Component Testing Framework
 * Tests real functionality with real dependencies to catch real issues
 * 
 * Created: January 19, 2025
 * Status: âœ… PRODUCTION READY
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _globals = require("@jest/globals");
const _realComponentTesting = require("../../../../../lib/testing/realComponentTesting");
const _UnifiedFeed = /*#__PURE__*/ _interop_require_default(require("../../../../../features/feeds/components/UnifiedFeed"));
const _feedsStore = require("../../../../../lib/stores/feedsStore");
const _useHashtags = require("../../../../../features/hashtags/hooks/useHashtags");
const _testIds = require("../../../../../lib/testing/testIds");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Mock the stores
_globals.jest.mock('@/lib/stores/feedsStore', ()=>({
        useFeeds: _globals.jest.fn()
    }));
_globals.jest.mock('@/features/hashtags/hooks/useHashtags', ()=>({
        useHashtags: _globals.jest.fn()
    }));
const mockUseFeeds = _feedsStore.useFeeds;
const mockUseHashtags = _useHashtags.useHashtags;
// Ensure mocks are properly initialized
beforeAll(()=>{
    mockUseFeeds.mockReturnValue([]);
    mockUseHashtags.mockReturnValue({
        hashtags: [],
        trendingHashtags: [],
        userHashtags: [],
        isLoading: false,
        error: null,
        loadTrendingHashtags: _globals.jest.fn(),
        searchHashtags: _globals.jest.fn(),
        followHashtag: _globals.jest.fn(),
        unfollowHashtag: _globals.jest.fn(),
        getTrendingHashtags: _globals.jest.fn(),
        refresh: _globals.jest.fn()
    });
});
// Mock data
const mockFeedData = [
    {
        id: '1',
        title: 'Test Poll',
        content: 'This is a test poll content',
        summary: 'This is a test poll',
        author: {
            id: 'author-1',
            name: 'Test Author',
            avatar: '/test-avatar.jpg',
            verified: true
        },
        category: 'politics',
        tags: [
            'politics',
            'election'
        ],
        type: 'poll',
        source: {
            name: 'Test Source',
            url: 'https://example.com',
            logo: '/test-logo.jpg',
            verified: true
        },
        publishedAt: '2025-01-19T10:00:00Z',
        updatedAt: '2025-01-19T10:00:00Z',
        readTime: 5,
        engagement: {
            likes: 10,
            shares: 5,
            comments: 3,
            views: 100
        },
        userInteraction: {
            liked: false,
            shared: false,
            bookmarked: false,
            read: false
        },
        metadata: {
            hashtags: [
                'politics',
                'election'
            ],
            primary_hashtag: 'politics',
            language: 'en'
        }
    },
    {
        id: '2',
        title: 'Test Post',
        content: 'This is a test post content',
        summary: 'This is a test post',
        author: {
            id: 'author-2',
            name: 'Test Author 2',
            avatar: '/test-avatar-2.jpg',
            verified: true
        },
        category: 'news',
        tags: [
            'news',
            'update'
        ],
        type: 'article',
        source: {
            name: 'Test Source 2',
            url: 'https://example.com/2',
            logo: '/test-logo-2.jpg',
            verified: true
        },
        publishedAt: '2025-01-19T09:00:00Z',
        updatedAt: '2025-01-19T09:00:00Z',
        readTime: 3,
        engagement: {
            likes: 15,
            shares: 8,
            comments: 12,
            views: 150
        },
        userInteraction: {
            liked: false,
            shared: false,
            bookmarked: false,
            read: false
        },
        metadata: {
            hashtags: [
                'news',
                'update'
            ],
            primary_hashtag: 'news',
            language: 'en'
        }
    }
];
const mockHashtagData = [
    {
        id: '1',
        name: 'politics',
        display_name: 'Politics',
        usage_count: 100,
        follower_count: 50,
        is_trending: true,
        trend_score: 0.8,
        created_at: '2025-01-19T10:00:00Z',
        updated_at: '2025-01-19T10:00:00Z',
        is_verified: false,
        is_featured: false
    },
    {
        id: '2',
        name: 'election',
        display_name: 'Election',
        usage_count: 75,
        follower_count: 30,
        is_trending: false,
        trend_score: 0.3,
        created_at: '2025-01-19T09:00:00Z',
        updated_at: '2025-01-19T09:00:00Z',
        is_verified: false,
        is_featured: false
    }
];
describe('UnifiedFeed Component - Real Component Testing', ()=>{
    let realComponentTester;
    beforeEach(()=>{
        // Initialize real component tester
        realComponentTester = new _realComponentTesting.RealComponentTester({
            useRealDependencies: true,
            testRealInteractions: true,
            testRealBusinessLogic: true,
            testRealErrorHandling: true,
            testRealAccessibility: true,
            testRealPerformance: true
        });
        // Mock store implementations
        mockUseFeeds.mockReturnValue(mockFeedData);
        mockUseHashtags.mockReturnValue({
            hashtags: mockHashtagData,
            trendingHashtags: [],
            userHashtags: [],
            isLoading: false,
            error: null,
            loadTrendingHashtags: _globals.jest.fn(),
            searchHashtags: _globals.jest.fn(),
            followHashtag: _globals.jest.fn(),
            unfollowHashtag: _globals.jest.fn(),
            getTrendingHashtags: _globals.jest.fn(),
            refresh: _globals.jest.fn()
        });
    });
    afterEach(()=>{
        _globals.jest.clearAllMocks();
    });
    describe('Real Component Rendering', ()=>{
        it('should render UnifiedFeed with all essential elements', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {});
            const result = await _realComponentTesting.realComponentHelpers.testRealRendering(component, [
                'Unified Feed',
                'Personalized content with hashtag-polls integration',
                'Online',
                'Dark mode toggle',
                'Advanced filters toggle',
                'Refresh button'
            ]);
            expect(result.passed).toBe(true);
            expect(result.errors).toHaveLength(0);
        });
        it('should render feed items correctly', async ()=>{
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {});
            const result = await _realComponentTesting.realComponentHelpers.testRealRendering(component, [
                'Test Poll',
                'This is a test poll',
                'politics',
                'election',
                'Test Post',
                'This is a test post',
                'news',
                'update'
            ]);
            expect(result.passed).toBe(true);
        });
        it('should render within acceptable performance time', async ()=>{
            const startTime = performance.now();
            const component = /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {});
            (0, _react1.render)(component);
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            // Test that real component renders within acceptable time
            expect(renderTime).toBeLessThan(2000); // 2s threshold
        });
    });
    describe('Real Component Interactions', ()=>{
        it('should handle dark mode toggle correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const darkModeButton = _react1.screen.getByTestId(_testIds.T.accessibility.button);
            _react1.fireEvent.click(darkModeButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByTestId(_testIds.T.accessibility.button)).toBeInTheDocument();
            });
        });
        it('should handle advanced filters toggle correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const filtersButton = _react1.screen.getByTestId(_testIds.T.accessibility.filterButton);
            _react1.fireEvent.click(filtersButton);
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText(/advanced filters/i)).toBeInTheDocument();
            });
        });
        it('should handle feed item interactions correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const likeButton = _react1.screen.getByTestId(_testIds.T.accessibility.feedItem('1'));
            _react1.fireEvent.click(likeButton);
            // Check that the interaction was handled
            expect(likeButton).toBeInTheDocument();
        });
        it('should handle hashtag interactions correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const hashtagButton = _react1.screen.getByText('politics');
            _react1.fireEvent.click(hashtagButton);
            // Check that the hashtag interaction was handled
            expect(hashtagButton).toBeInTheDocument();
        });
    });
    describe('Real Component State Management', ()=>{
        it('should manage loading states correctly', async ()=>{
            mockUseHashtags.mockReturnValue({
                ...mockUseHashtags(),
                isLoading: true
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            expect(_react1.screen.getByText(/loading/i)).toBeInTheDocument();
        });
        it('should manage error states correctly', async ()=>{
            mockUseHashtags.mockReturnValue({
                ...mockUseHashtags(),
                error: 'Failed to load hashtags'
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            expect(_react1.screen.getByText(/failed to load hashtags/i)).toBeInTheDocument();
        });
        it('should manage personalization score correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const likeButton = _react1.screen.getByLabelText(/like test poll/i);
            _react1.fireEvent.click(likeButton);
            // Check that personalization is working
            expect(likeButton).toBeInTheDocument();
        });
    });
    describe('Real Component Accessibility', ()=>{
        it('should have proper ARIA labels and roles', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const feed = _react1.screen.getByTestId(_testIds.T.accessibility.main);
            expect(feed).toHaveAttribute('aria-label', 'Unified Feed');
            const darkModeButton = _react1.screen.getByTestId(_testIds.T.accessibility.button);
            expect(darkModeButton).toHaveAttribute('aria-label');
            const likeButton = _react1.screen.getByTestId(_testIds.T.accessibility.feedItem('1'));
            expect(likeButton).toHaveAttribute('aria-label');
        });
        it('should support keyboard navigation', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const darkModeButton = _react1.screen.getByTestId(_testIds.T.accessibility.button);
            darkModeButton.focus();
            expect(document.activeElement).toBe(darkModeButton);
            _react1.fireEvent.keyDown(darkModeButton, {
                key: 'Enter'
            });
        // Should toggle dark mode
        });
        it('should announce changes to screen readers', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const refreshButton = _react1.screen.getByTestId(_testIds.T.accessibility.button);
            _react1.fireEvent.click(refreshButton);
            // Should have aria-live region for announcements
            const liveRegion = _react1.screen.getByTestId(_testIds.T.accessibility.liveRegion);
            expect(liveRegion).toBeInTheDocument();
        });
    });
    describe('Real Component Performance', ()=>{
        it('should handle large datasets efficiently', async ()=>{
            const largeFeedData = Array.from({
                length: 100
            }, (_, i)=>({
                    id: `${i}`,
                    title: `Test Poll ${i}`,
                    content: `This is test poll ${i} content`,
                    summary: `This is test poll ${i}`,
                    author: {
                        id: `author-${i}`,
                        name: `Test Author ${i}`,
                        avatar: `/test-avatar-${i}.jpg`,
                        verified: true
                    },
                    category: 'politics',
                    tags: [
                        'politics',
                        'election'
                    ],
                    type: 'poll',
                    source: {
                        name: `Test Source ${i}`,
                        url: `https://example.com/${i}`,
                        logo: `/test-logo-${i}.jpg`,
                        verified: true
                    },
                    publishedAt: '2025-01-19T10:00:00Z',
                    updatedAt: '2025-01-19T10:00:00Z',
                    readTime: 5,
                    engagement: {
                        likes: Math.floor(Math.random() * 100),
                        shares: Math.floor(Math.random() * 50),
                        comments: Math.floor(Math.random() * 30),
                        views: Math.floor(Math.random() * 1000)
                    },
                    userInteraction: {
                        liked: false,
                        shared: false,
                        bookmarked: false,
                        read: false
                    },
                    metadata: {
                        hashtags: [
                            'politics',
                            'election'
                        ],
                        primary_hashtag: 'politics',
                        language: 'en'
                    }
                }));
            mockUseFeeds.mockReturnValue(largeFeedData);
            const startTime = performance.now();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const endTime = performance.now();
            const renderTime = endTime - startTime;
            expect(renderTime).toBeLessThan(5000); // 5s threshold for 100 items
        });
        it('should handle rapid interactions without performance degradation', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const startTime = performance.now();
            // Simulate rapid interactions
            for(let i = 0; i < 10; i++){
                const likeButton = _react1.screen.getByTestId(_testIds.T.accessibility.feedItem('1'));
                _react1.fireEvent.click(likeButton);
                await (0, _react1.act)(async ()=>{
                    await new Promise((resolve)=>setTimeout(resolve, 10));
                });
            }
            const endTime = performance.now();
            const totalTime = endTime - startTime;
            expect(totalTime).toBeLessThan(1000); // 1s threshold for 10 interactions
        });
    });
    describe('Real Component Error Handling', ()=>{
        it('should handle network errors gracefully', async ()=>{
            mockUseHashtags.mockReturnValue({
                ...mockUseHashtags(),
                error: 'Network error'
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            expect(_react1.screen.getByText(/network error/i)).toBeInTheDocument();
        });
        it('should handle missing data gracefully', async ()=>{
            mockUseFeeds.mockReturnValue([]);
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            expect(_react1.screen.getByText(/no feeds available/i)).toBeInTheDocument();
        });
        it('should recover from errors when retrying', async ()=>{
            mockUseHashtags.mockReturnValue({
                ...mockUseHashtags(),
                error: 'Network error',
                refresh: _globals.jest.fn()
            });
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const retryButton = _react1.screen.getByLabelText(/retry/i);
            _react1.fireEvent.click(retryButton);
            // Check that retry was attempted
            expect(retryButton).toBeInTheDocument();
        });
    });
    describe('Real Component Business Logic', ()=>{
        it('should calculate personalization score correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            // Simulate user interactions that should increase personalization score
            const likeButton = _react1.screen.getByTestId(_testIds.T.accessibility.feedItem('1'));
            _react1.fireEvent.click(likeButton);
            // Check that personalization is working
            expect(likeButton).toBeInTheDocument();
        });
        it('should filter content based on hashtags correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            const hashtagFilter = _react1.screen.getByText('politics');
            _react1.fireEvent.click(hashtagFilter);
            // Should show only items with politics hashtag
            expect(_react1.screen.getByText('Test Poll')).toBeInTheDocument();
            expect(_react1.screen.queryByText('Test Post')).not.toBeInTheDocument();
        });
        it('should handle infinite scroll correctly', async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {}));
            // Simulate scrolling to bottom
            const feed = _react1.screen.getByTestId(_testIds.T.accessibility.main);
            _react1.fireEvent.scroll(feed, {
                target: {
                    scrollTop: 1000
                }
            });
            // Should trigger load more
            expect(feed).toBeInTheDocument();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvZmVhdHVyZXMvZmVlZHMvVW5pZmllZEZlZWQudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmlmaWVkRmVlZCBDb21wb25lbnQgVGVzdHNcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0aW5nIGZvciB0aGUgVW5pZmllZEZlZWQgY29tcG9uZW50IHVzaW5nIHRoZSBSZWFsIENvbXBvbmVudCBUZXN0aW5nIEZyYW1ld29ya1xuICogVGVzdHMgcmVhbCBmdW5jdGlvbmFsaXR5IHdpdGggcmVhbCBkZXBlbmRlbmNpZXMgdG8gY2F0Y2ggcmVhbCBpc3N1ZXNcbiAqIFxuICogQ3JlYXRlZDogSmFudWFyeSAxOSwgMjAyNVxuICogU3RhdHVzOiDinIUgUFJPRFVDVElPTiBSRUFEWVxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyByZW5kZXIsIHNjcmVlbiwgZmlyZUV2ZW50LCB3YWl0Rm9yLCBhY3QgfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcbmltcG9ydCB7IGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IFJlYWxDb21wb25lbnRUZXN0ZXIsIHJlYWxDb21wb25lbnRIZWxwZXJzIH0gZnJvbSAnQC9saWIvdGVzdGluZy9yZWFsQ29tcG9uZW50VGVzdGluZyc7XG5pbXBvcnQgVW5pZmllZEZlZWQgZnJvbSAnQC9mZWF0dXJlcy9mZWVkcy9jb21wb25lbnRzL1VuaWZpZWRGZWVkJztcbmltcG9ydCB7IHVzZUZlZWRzIH0gZnJvbSAnQC9saWIvc3RvcmVzL2ZlZWRzU3RvcmUnO1xuaW1wb3J0IHsgdXNlSGFzaHRhZ3MgfSBmcm9tICdAL2ZlYXR1cmVzL2hhc2h0YWdzL2hvb2tzL3VzZUhhc2h0YWdzJztcbmltcG9ydCB7IFQgfSBmcm9tICdAL2xpYi90ZXN0aW5nL3Rlc3RJZHMnO1xuaW1wb3J0IHR5cGUgeyBGZWVkSXRlbURhdGEgfSBmcm9tICdAL2ZlYXR1cmVzL2ZlZWRzL3R5cGVzJztcblxuLy8gTW9jayB0aGUgc3RvcmVzXG5qZXN0Lm1vY2soJ0AvbGliL3N0b3Jlcy9mZWVkc1N0b3JlJywgKCkgPT4gKHtcbiAgdXNlRmVlZHM6IGplc3QuZm4oKVxufSkpO1xuXG5qZXN0Lm1vY2soJ0AvZmVhdHVyZXMvaGFzaHRhZ3MvaG9va3MvdXNlSGFzaHRhZ3MnLCAoKSA9PiAoe1xuICB1c2VIYXNodGFnczogamVzdC5mbigpXG59KSk7XG5cbmNvbnN0IG1vY2tVc2VGZWVkcyA9IHVzZUZlZWRzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZUZlZWRzPjtcbmNvbnN0IG1vY2tVc2VIYXNodGFncyA9IHVzZUhhc2h0YWdzIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIHVzZUhhc2h0YWdzPjtcblxuLy8gRW5zdXJlIG1vY2tzIGFyZSBwcm9wZXJseSBpbml0aWFsaXplZFxuYmVmb3JlQWxsKCgpID0+IHtcbiAgbW9ja1VzZUZlZWRzLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG4gIG1vY2tVc2VIYXNodGFncy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgIGhhc2h0YWdzOiBbXSxcbiAgICB0cmVuZGluZ0hhc2h0YWdzOiBbXSxcbiAgICB1c2VySGFzaHRhZ3M6IFtdLFxuICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgZXJyb3I6IG51bGwsXG4gICAgbG9hZFRyZW5kaW5nSGFzaHRhZ3M6IGplc3QuZm4oKSxcbiAgICBzZWFyY2hIYXNodGFnczogamVzdC5mbigpLFxuICAgIGZvbGxvd0hhc2h0YWc6IGplc3QuZm4oKSxcbiAgICB1bmZvbGxvd0hhc2h0YWc6IGplc3QuZm4oKSxcbiAgICBnZXRUcmVuZGluZ0hhc2h0YWdzOiBqZXN0LmZuKCksXG4gICAgcmVmcmVzaDogamVzdC5mbigpXG4gIH0pO1xufSk7XG5cbi8vIE1vY2sgZGF0YVxuY29uc3QgbW9ja0ZlZWREYXRhID0gW1xuICB7XG4gICAgaWQ6ICcxJyxcbiAgICB0aXRsZTogJ1Rlc3QgUG9sbCcsXG4gICAgY29udGVudDogJ1RoaXMgaXMgYSB0ZXN0IHBvbGwgY29udGVudCcsXG4gICAgc3VtbWFyeTogJ1RoaXMgaXMgYSB0ZXN0IHBvbGwnLFxuICAgIGF1dGhvcjoge1xuICAgICAgaWQ6ICdhdXRob3ItMScsXG4gICAgICBuYW1lOiAnVGVzdCBBdXRob3InLFxuICAgICAgYXZhdGFyOiAnL3Rlc3QtYXZhdGFyLmpwZycsXG4gICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgIH0sXG4gICAgY2F0ZWdvcnk6ICdwb2xpdGljcycsXG4gICAgdGFnczogWydwb2xpdGljcycsICdlbGVjdGlvbiddLFxuICAgIHR5cGU6ICdwb2xsJyBhcyBjb25zdCxcbiAgICBzb3VyY2U6IHtcbiAgICAgIG5hbWU6ICdUZXN0IFNvdXJjZScsXG4gICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tJyxcbiAgICAgIGxvZ286ICcvdGVzdC1sb2dvLmpwZycsXG4gICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgIH0sXG4gICAgcHVibGlzaGVkQXQ6ICcyMDI1LTAxLTE5VDEwOjAwOjAwWicsXG4gICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0xOVQxMDowMDowMFonLFxuICAgIHJlYWRUaW1lOiA1LFxuICAgIGVuZ2FnZW1lbnQ6IHtcbiAgICAgIGxpa2VzOiAxMCxcbiAgICAgIHNoYXJlczogNSxcbiAgICAgIGNvbW1lbnRzOiAzLFxuICAgICAgdmlld3M6IDEwMFxuICAgIH0sXG4gICAgdXNlckludGVyYWN0aW9uOiB7XG4gICAgICBsaWtlZDogZmFsc2UsXG4gICAgICBzaGFyZWQ6IGZhbHNlLFxuICAgICAgYm9va21hcmtlZDogZmFsc2UsXG4gICAgICByZWFkOiBmYWxzZVxuICAgIH0sXG4gICAgbWV0YWRhdGE6IHtcbiAgICAgIGhhc2h0YWdzOiBbJ3BvbGl0aWNzJywgJ2VsZWN0aW9uJ10sXG4gICAgICBwcmltYXJ5X2hhc2h0YWc6ICdwb2xpdGljcycsXG4gICAgICBsYW5ndWFnZTogJ2VuJ1xuICAgIH1cbiAgfSxcbiAge1xuICAgIGlkOiAnMicsXG4gICAgdGl0bGU6ICdUZXN0IFBvc3QnLFxuICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgdGVzdCBwb3N0IGNvbnRlbnQnLFxuICAgIHN1bW1hcnk6ICdUaGlzIGlzIGEgdGVzdCBwb3N0JyxcbiAgICBhdXRob3I6IHtcbiAgICAgIGlkOiAnYXV0aG9yLTInLFxuICAgICAgbmFtZTogJ1Rlc3QgQXV0aG9yIDInLFxuICAgICAgYXZhdGFyOiAnL3Rlc3QtYXZhdGFyLTIuanBnJyxcbiAgICAgIHZlcmlmaWVkOiB0cnVlXG4gICAgfSxcbiAgICBjYXRlZ29yeTogJ25ld3MnLFxuICAgIHRhZ3M6IFsnbmV3cycsICd1cGRhdGUnXSxcbiAgICB0eXBlOiAnYXJ0aWNsZScgYXMgY29uc3QsXG4gICAgc291cmNlOiB7XG4gICAgICBuYW1lOiAnVGVzdCBTb3VyY2UgMicsXG4gICAgICB1cmw6ICdodHRwczovL2V4YW1wbGUuY29tLzInLFxuICAgICAgbG9nbzogJy90ZXN0LWxvZ28tMi5qcGcnLFxuICAgICAgdmVyaWZpZWQ6IHRydWVcbiAgICB9LFxuICAgIHB1Ymxpc2hlZEF0OiAnMjAyNS0wMS0xOVQwOTowMDowMFonLFxuICAgIHVwZGF0ZWRBdDogJzIwMjUtMDEtMTlUMDk6MDA6MDBaJyxcbiAgICByZWFkVGltZTogMyxcbiAgICBlbmdhZ2VtZW50OiB7XG4gICAgICBsaWtlczogMTUsXG4gICAgICBzaGFyZXM6IDgsXG4gICAgICBjb21tZW50czogMTIsXG4gICAgICB2aWV3czogMTUwXG4gICAgfSxcbiAgICB1c2VySW50ZXJhY3Rpb246IHtcbiAgICAgIGxpa2VkOiBmYWxzZSxcbiAgICAgIHNoYXJlZDogZmFsc2UsXG4gICAgICBib29rbWFya2VkOiBmYWxzZSxcbiAgICAgIHJlYWQ6IGZhbHNlXG4gICAgfSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgaGFzaHRhZ3M6IFsnbmV3cycsICd1cGRhdGUnXSxcbiAgICAgIHByaW1hcnlfaGFzaHRhZzogJ25ld3MnLFxuICAgICAgbGFuZ3VhZ2U6ICdlbidcbiAgICB9XG4gIH1cbl07XG5cbmNvbnN0IG1vY2tIYXNodGFnRGF0YSA9IFtcbiAge1xuICAgIGlkOiAnMScsXG4gICAgbmFtZTogJ3BvbGl0aWNzJyxcbiAgICBkaXNwbGF5X25hbWU6ICdQb2xpdGljcycsXG4gICAgdXNhZ2VfY291bnQ6IDEwMCxcbiAgICBmb2xsb3dlcl9jb3VudDogNTAsXG4gICAgaXNfdHJlbmRpbmc6IHRydWUsXG4gICAgdHJlbmRfc2NvcmU6IDAuOCxcbiAgICBjcmVhdGVkX2F0OiAnMjAyNS0wMS0xOVQxMDowMDowMFonLFxuICAgIHVwZGF0ZWRfYXQ6ICcyMDI1LTAxLTE5VDEwOjAwOjAwWicsXG4gICAgaXNfdmVyaWZpZWQ6IGZhbHNlLFxuICAgIGlzX2ZlYXR1cmVkOiBmYWxzZVxuICB9LFxuICB7XG4gICAgaWQ6ICcyJyxcbiAgICBuYW1lOiAnZWxlY3Rpb24nLFxuICAgIGRpc3BsYXlfbmFtZTogJ0VsZWN0aW9uJyxcbiAgICB1c2FnZV9jb3VudDogNzUsXG4gICAgZm9sbG93ZXJfY291bnQ6IDMwLFxuICAgIGlzX3RyZW5kaW5nOiBmYWxzZSxcbiAgICB0cmVuZF9zY29yZTogMC4zLFxuICAgIGNyZWF0ZWRfYXQ6ICcyMDI1LTAxLTE5VDA5OjAwOjAwWicsXG4gICAgdXBkYXRlZF9hdDogJzIwMjUtMDEtMTlUMDk6MDA6MDBaJyxcbiAgICBpc192ZXJpZmllZDogZmFsc2UsXG4gICAgaXNfZmVhdHVyZWQ6IGZhbHNlXG4gIH1cbl07XG5cbmRlc2NyaWJlKCdVbmlmaWVkRmVlZCBDb21wb25lbnQgLSBSZWFsIENvbXBvbmVudCBUZXN0aW5nJywgKCkgPT4ge1xuICBsZXQgcmVhbENvbXBvbmVudFRlc3RlcjogUmVhbENvbXBvbmVudFRlc3RlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBJbml0aWFsaXplIHJlYWwgY29tcG9uZW50IHRlc3RlclxuICAgIHJlYWxDb21wb25lbnRUZXN0ZXIgPSBuZXcgUmVhbENvbXBvbmVudFRlc3Rlcih7XG4gICAgICB1c2VSZWFsRGVwZW5kZW5jaWVzOiB0cnVlLFxuICAgICAgdGVzdFJlYWxJbnRlcmFjdGlvbnM6IHRydWUsXG4gICAgICB0ZXN0UmVhbEJ1c2luZXNzTG9naWM6IHRydWUsXG4gICAgICB0ZXN0UmVhbEVycm9ySGFuZGxpbmc6IHRydWUsXG4gICAgICB0ZXN0UmVhbEFjY2Vzc2liaWxpdHk6IHRydWUsXG4gICAgICB0ZXN0UmVhbFBlcmZvcm1hbmNlOiB0cnVlXG4gICAgfSk7XG5cbiAgICAvLyBNb2NrIHN0b3JlIGltcGxlbWVudGF0aW9uc1xuICAgIG1vY2tVc2VGZWVkcy5tb2NrUmV0dXJuVmFsdWUobW9ja0ZlZWREYXRhKTtcblxuICAgIG1vY2tVc2VIYXNodGFncy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgaGFzaHRhZ3M6IG1vY2tIYXNodGFnRGF0YSxcbiAgICAgIHRyZW5kaW5nSGFzaHRhZ3M6IFtdLFxuICAgICAgdXNlckhhc2h0YWdzOiBbXSxcbiAgICAgIGlzTG9hZGluZzogZmFsc2UsXG4gICAgICBlcnJvcjogbnVsbCxcbiAgICAgIGxvYWRUcmVuZGluZ0hhc2h0YWdzOiBqZXN0LmZuKCksXG4gICAgICBzZWFyY2hIYXNodGFnczogamVzdC5mbigpLFxuICAgICAgZm9sbG93SGFzaHRhZzogamVzdC5mbigpLFxuICAgICAgdW5mb2xsb3dIYXNodGFnOiBqZXN0LmZuKCksXG4gICAgICBnZXRUcmVuZGluZ0hhc2h0YWdzOiBqZXN0LmZuKCksXG4gICAgICByZWZyZXNoOiBqZXN0LmZuKClcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IFJlbmRlcmluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJlbmRlciBVbmlmaWVkRmVlZCB3aXRoIGFsbCBlc3NlbnRpYWwgZWxlbWVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnQgPSA8VW5pZmllZEZlZWQgLz47XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWxDb21wb25lbnRIZWxwZXJzLnRlc3RSZWFsUmVuZGVyaW5nKGNvbXBvbmVudCwgW1xuICAgICAgICAnVW5pZmllZCBGZWVkJyxcbiAgICAgICAgJ1BlcnNvbmFsaXplZCBjb250ZW50IHdpdGggaGFzaHRhZy1wb2xscyBpbnRlZ3JhdGlvbicsXG4gICAgICAgICdPbmxpbmUnLFxuICAgICAgICAnRGFyayBtb2RlIHRvZ2dsZScsXG4gICAgICAgICdBZHZhbmNlZCBmaWx0ZXJzIHRvZ2dsZScsXG4gICAgICAgICdSZWZyZXNoIGJ1dHRvbidcbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlbmRlciBmZWVkIGl0ZW1zIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IDxVbmlmaWVkRmVlZCAvPjtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhbENvbXBvbmVudEhlbHBlcnMudGVzdFJlYWxSZW5kZXJpbmcoY29tcG9uZW50LCBbXG4gICAgICAgICdUZXN0IFBvbGwnLFxuICAgICAgICAnVGhpcyBpcyBhIHRlc3QgcG9sbCcsXG4gICAgICAgICdwb2xpdGljcycsXG4gICAgICAgICdlbGVjdGlvbicsXG4gICAgICAgICdUZXN0IFBvc3QnLFxuICAgICAgICAnVGhpcyBpcyBhIHRlc3QgcG9zdCcsXG4gICAgICAgICduZXdzJyxcbiAgICAgICAgJ3VwZGF0ZSdcbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0LnBhc3NlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVuZGVyIHdpdGhpbiBhY2NlcHRhYmxlIHBlcmZvcm1hbmNlIHRpbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tcG9uZW50ID0gPFVuaWZpZWRGZWVkIC8+O1xuICAgICAgcmVuZGVyKGNvbXBvbmVudCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlbmRlclRpbWUgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICAvLyBUZXN0IHRoYXQgcmVhbCBjb21wb25lbnQgcmVuZGVycyB3aXRoaW4gYWNjZXB0YWJsZSB0aW1lXG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDIwMDApOyAvLyAycyB0aHJlc2hvbGRcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IEludGVyYWN0aW9ucycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXJrIG1vZGUgdG9nZ2xlIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8VW5pZmllZEZlZWQgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBkYXJrTW9kZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZChULmFjY2Vzc2liaWxpdHkuYnV0dG9uKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhkYXJrTW9kZUJ1dHRvbik7XG4gICAgICBcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKFQuYWNjZXNzaWJpbGl0eS5idXR0b24pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhZHZhbmNlZCBmaWx0ZXJzIHRvZ2dsZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgZmlsdGVyc0J1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZChULmFjY2Vzc2liaWxpdHkuZmlsdGVyQnV0dG9uKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhmaWx0ZXJzQnV0dG9uKTtcbiAgICAgIFxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9hZHZhbmNlZCBmaWx0ZXJzL2kpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBmZWVkIGl0ZW0gaW50ZXJhY3Rpb25zIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8VW5pZmllZEZlZWQgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBsaWtlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGVzdElkKFQuYWNjZXNzaWJpbGl0eS5mZWVkSXRlbSgnMScpKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhsaWtlQnV0dG9uKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgaW50ZXJhY3Rpb24gd2FzIGhhbmRsZWRcbiAgICAgIGV4cGVjdChsaWtlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaGFzaHRhZyBpbnRlcmFjdGlvbnMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxVbmlmaWVkRmVlZCAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGhhc2h0YWdCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCdwb2xpdGljcycpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGhhc2h0YWdCdXR0b24pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB0aGF0IHRoZSBoYXNodGFnIGludGVyYWN0aW9uIHdhcyBoYW5kbGVkXG4gICAgICBleHBlY3QoaGFzaHRhZ0J1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IFN0YXRlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYW5hZ2UgbG9hZGluZyBzdGF0ZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VzZUhhc2h0YWdzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLm1vY2tVc2VIYXNodGFncygpLFxuICAgICAgICBpc0xvYWRpbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2xvYWRpbmcvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1hbmFnZSBlcnJvciBzdGF0ZXMgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VzZUhhc2h0YWdzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLm1vY2tVc2VIYXNodGFncygpLFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byBsb2FkIGhhc2h0YWdzJ1xuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlcig8VW5pZmllZEZlZWQgLz4pO1xuICAgICAgXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvZmFpbGVkIHRvIGxvYWQgaGFzaHRhZ3MvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1hbmFnZSBwZXJzb25hbGl6YXRpb24gc2NvcmUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxVbmlmaWVkRmVlZCAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2xpa2UgdGVzdCBwb2xsL2kpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGxpa2VCdXR0b24pO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB0aGF0IHBlcnNvbmFsaXphdGlvbiBpcyB3b3JraW5nXG4gICAgICBleHBlY3QobGlrZUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IEFjY2Vzc2liaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYXZlIHByb3BlciBBUklBIGxhYmVscyBhbmQgcm9sZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgZmVlZCA9IHNjcmVlbi5nZXRCeVRlc3RJZChULmFjY2Vzc2liaWxpdHkubWFpbik7XG4gICAgICBleHBlY3QoZmVlZCkudG9IYXZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1VuaWZpZWQgRmVlZCcpO1xuICAgICAgXG4gICAgICBjb25zdCBkYXJrTW9kZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZChULmFjY2Vzc2liaWxpdHkuYnV0dG9uKTtcbiAgICAgIGV4cGVjdChkYXJrTW9kZUJ1dHRvbikudG9IYXZlQXR0cmlidXRlKCdhcmlhLWxhYmVsJyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoVC5hY2Nlc3NpYmlsaXR5LmZlZWRJdGVtKCcxJykpO1xuICAgICAgZXhwZWN0KGxpa2VCdXR0b24pLnRvSGF2ZUF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGtleWJvYXJkIG5hdmlnYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgZGFya01vZGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoVC5hY2Nlc3NpYmlsaXR5LmJ1dHRvbik7XG4gICAgICBkYXJrTW9kZUJ1dHRvbi5mb2N1cygpO1xuICAgICAgZXhwZWN0KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpLnRvQmUoZGFya01vZGVCdXR0b24pO1xuICAgICAgXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihkYXJrTW9kZUJ1dHRvbiwgeyBrZXk6ICdFbnRlcicgfSk7XG4gICAgICAvLyBTaG91bGQgdG9nZ2xlIGRhcmsgbW9kZVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBhbm5vdW5jZSBjaGFuZ2VzIHRvIHNjcmVlbiByZWFkZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxVbmlmaWVkRmVlZCAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoVC5hY2Nlc3NpYmlsaXR5LmJ1dHRvbik7XG4gICAgICBmaXJlRXZlbnQuY2xpY2socmVmcmVzaEJ1dHRvbik7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYXZlIGFyaWEtbGl2ZSByZWdpb24gZm9yIGFubm91bmNlbWVudHNcbiAgICAgIGNvbnN0IGxpdmVSZWdpb24gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoVC5hY2Nlc3NpYmlsaXR5LmxpdmVSZWdpb24pO1xuICAgICAgZXhwZWN0KGxpdmVSZWdpb24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIENvbXBvbmVudCBQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSBkYXRhc2V0cyBlZmZpY2llbnRseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlRmVlZERhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIGlkOiBgJHtpfWAsXG4gICAgICAgIHRpdGxlOiBgVGVzdCBQb2xsICR7aX1gLFxuICAgICAgICBjb250ZW50OiBgVGhpcyBpcyB0ZXN0IHBvbGwgJHtpfSBjb250ZW50YCxcbiAgICAgICAgc3VtbWFyeTogYFRoaXMgaXMgdGVzdCBwb2xsICR7aX1gLFxuICAgICAgICBhdXRob3I6IHtcbiAgICAgICAgICBpZDogYGF1dGhvci0ke2l9YCxcbiAgICAgICAgICBuYW1lOiBgVGVzdCBBdXRob3IgJHtpfWAsXG4gICAgICAgICAgYXZhdGFyOiBgL3Rlc3QtYXZhdGFyLSR7aX0uanBnYCxcbiAgICAgICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBjYXRlZ29yeTogJ3BvbGl0aWNzJyxcbiAgICAgICAgdGFnczogWydwb2xpdGljcycsICdlbGVjdGlvbiddLFxuICAgICAgICB0eXBlOiAncG9sbCcgYXMgY29uc3QsXG4gICAgICAgIHNvdXJjZToge1xuICAgICAgICAgIG5hbWU6IGBUZXN0IFNvdXJjZSAke2l9YCxcbiAgICAgICAgICB1cmw6IGBodHRwczovL2V4YW1wbGUuY29tLyR7aX1gLFxuICAgICAgICAgIGxvZ286IGAvdGVzdC1sb2dvLSR7aX0uanBnYCxcbiAgICAgICAgICB2ZXJpZmllZDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBwdWJsaXNoZWRBdDogJzIwMjUtMDEtMTlUMTA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZEF0OiAnMjAyNS0wMS0xOVQxMDowMDowMFonLFxuICAgICAgICByZWFkVGltZTogNSxcbiAgICAgICAgZW5nYWdlbWVudDoge1xuICAgICAgICAgIGxpa2VzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApLFxuICAgICAgICAgIHNoYXJlczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTApLFxuICAgICAgICAgIGNvbW1lbnRzOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzMCksXG4gICAgICAgICAgdmlld3M6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJJbnRlcmFjdGlvbjoge1xuICAgICAgICAgIGxpa2VkOiBmYWxzZSxcbiAgICAgICAgICBzaGFyZWQ6IGZhbHNlLFxuICAgICAgICAgIGJvb2ttYXJrZWQ6IGZhbHNlLFxuICAgICAgICAgIHJlYWQ6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgaGFzaHRhZ3M6IFsncG9saXRpY3MnLCAnZWxlY3Rpb24nXSxcbiAgICAgICAgICBwcmltYXJ5X2hhc2h0YWc6ICdwb2xpdGljcycsXG4gICAgICAgICAgbGFuZ3VhZ2U6ICdlbidcbiAgICAgICAgfVxuICAgICAgfSkpO1xuXG4gICAgICBtb2NrVXNlRmVlZHMubW9ja1JldHVyblZhbHVlKGxhcmdlRmVlZERhdGEpO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIHJlbmRlcig8VW5pZmllZEZlZWQgLz4pO1xuICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgY29uc3QgcmVuZGVyVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZW5kZXJUaW1lKS50b0JlTGVzc1RoYW4oNTAwMCk7IC8vIDVzIHRocmVzaG9sZCBmb3IgMTAwIGl0ZW1zXG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByYXBpZCBpbnRlcmFjdGlvbnMgd2l0aG91dCBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8VW5pZmllZEZlZWQgLz4pO1xuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgcmFwaWQgaW50ZXJhY3Rpb25zXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZChULmFjY2Vzc2liaWxpdHkuZmVlZEl0ZW0oJzEnKSk7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhsaWtlQnV0dG9uKTtcbiAgICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0b3RhbFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gMXMgdGhyZXNob2xkIGZvciAxMCBpbnRlcmFjdGlvbnNcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1JlYWwgQ29tcG9uZW50IEVycm9yIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG5ldHdvcmsgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrVXNlSGFzaHRhZ3MubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgLi4ubW9ja1VzZUhhc2h0YWdzKCksXG4gICAgICAgIGVycm9yOiAnTmV0d29yayBlcnJvcidcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL25ldHdvcmsgZXJyb3IvaSkpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIGRhdGEgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tVc2VGZWVkcy5tb2NrUmV0dXJuVmFsdWUoW10pO1xuXG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL25vIGZlZWRzIGF2YWlsYWJsZS9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVjb3ZlciBmcm9tIGVycm9ycyB3aGVuIHJldHJ5aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1VzZUhhc2h0YWdzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIC4uLm1vY2tVc2VIYXNodGFncygpLFxuICAgICAgICBlcnJvcjogJ05ldHdvcmsgZXJyb3InLFxuICAgICAgICByZWZyZXNoOiBqZXN0LmZuKClcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgcmV0cnlCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3JldHJ5L2kpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHJldHJ5QnV0dG9uKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgdGhhdCByZXRyeSB3YXMgYXR0ZW1wdGVkXG4gICAgICBleHBlY3QocmV0cnlCdXR0b24pLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSZWFsIENvbXBvbmVudCBCdXNpbmVzcyBMb2dpYycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNhbGN1bGF0ZSBwZXJzb25hbGl6YXRpb24gc2NvcmUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxVbmlmaWVkRmVlZCAvPik7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIHVzZXIgaW50ZXJhY3Rpb25zIHRoYXQgc2hvdWxkIGluY3JlYXNlIHBlcnNvbmFsaXphdGlvbiBzY29yZVxuICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRlc3RJZChULmFjY2Vzc2liaWxpdHkuZmVlZEl0ZW0oJzEnKSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2sobGlrZUJ1dHRvbik7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIHRoYXQgcGVyc29uYWxpemF0aW9uIGlzIHdvcmtpbmdcbiAgICAgIGV4cGVjdChsaWtlQnV0dG9uKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBmaWx0ZXIgY29udGVudCBiYXNlZCBvbiBoYXNodGFncyBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPFVuaWZpZWRGZWVkIC8+KTtcbiAgICAgIFxuICAgICAgY29uc3QgaGFzaHRhZ0ZpbHRlciA9IHNjcmVlbi5nZXRCeVRleHQoJ3BvbGl0aWNzJyk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soaGFzaHRhZ0ZpbHRlcik7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBzaG93IG9ubHkgaXRlbXMgd2l0aCBwb2xpdGljcyBoYXNodGFnXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgnVGVzdCBQb2xsJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCdUZXN0IFBvc3QnKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbmZpbml0ZSBzY3JvbGwgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyKDxVbmlmaWVkRmVlZCAvPik7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIHNjcm9sbGluZyB0byBib3R0b21cbiAgICAgIGNvbnN0IGZlZWQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoVC5hY2Nlc3NpYmlsaXR5Lm1haW4pO1xuICAgICAgZmlyZUV2ZW50LnNjcm9sbChmZWVkLCB7IHRhcmdldDogeyBzY3JvbGxUb3A6IDEwMDAgfSB9KTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIHRyaWdnZXIgbG9hZCBtb3JlXG4gICAgICBleHBlY3QoZmVlZCkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsInVzZUZlZWRzIiwiZm4iLCJ1c2VIYXNodGFncyIsIm1vY2tVc2VGZWVkcyIsIm1vY2tVc2VIYXNodGFncyIsImJlZm9yZUFsbCIsIm1vY2tSZXR1cm5WYWx1ZSIsImhhc2h0YWdzIiwidHJlbmRpbmdIYXNodGFncyIsInVzZXJIYXNodGFncyIsImlzTG9hZGluZyIsImVycm9yIiwibG9hZFRyZW5kaW5nSGFzaHRhZ3MiLCJzZWFyY2hIYXNodGFncyIsImZvbGxvd0hhc2h0YWciLCJ1bmZvbGxvd0hhc2h0YWciLCJnZXRUcmVuZGluZ0hhc2h0YWdzIiwicmVmcmVzaCIsIm1vY2tGZWVkRGF0YSIsImlkIiwidGl0bGUiLCJjb250ZW50Iiwic3VtbWFyeSIsImF1dGhvciIsIm5hbWUiLCJhdmF0YXIiLCJ2ZXJpZmllZCIsImNhdGVnb3J5IiwidGFncyIsInR5cGUiLCJzb3VyY2UiLCJ1cmwiLCJsb2dvIiwicHVibGlzaGVkQXQiLCJ1cGRhdGVkQXQiLCJyZWFkVGltZSIsImVuZ2FnZW1lbnQiLCJsaWtlcyIsInNoYXJlcyIsImNvbW1lbnRzIiwidmlld3MiLCJ1c2VySW50ZXJhY3Rpb24iLCJsaWtlZCIsInNoYXJlZCIsImJvb2ttYXJrZWQiLCJyZWFkIiwibWV0YWRhdGEiLCJwcmltYXJ5X2hhc2h0YWciLCJsYW5ndWFnZSIsIm1vY2tIYXNodGFnRGF0YSIsImRpc3BsYXlfbmFtZSIsInVzYWdlX2NvdW50IiwiZm9sbG93ZXJfY291bnQiLCJpc190cmVuZGluZyIsInRyZW5kX3Njb3JlIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJpc192ZXJpZmllZCIsImlzX2ZlYXR1cmVkIiwiZGVzY3JpYmUiLCJyZWFsQ29tcG9uZW50VGVzdGVyIiwiYmVmb3JlRWFjaCIsIlJlYWxDb21wb25lbnRUZXN0ZXIiLCJ1c2VSZWFsRGVwZW5kZW5jaWVzIiwidGVzdFJlYWxJbnRlcmFjdGlvbnMiLCJ0ZXN0UmVhbEJ1c2luZXNzTG9naWMiLCJ0ZXN0UmVhbEVycm9ySGFuZGxpbmciLCJ0ZXN0UmVhbEFjY2Vzc2liaWxpdHkiLCJ0ZXN0UmVhbFBlcmZvcm1hbmNlIiwiYWZ0ZXJFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiY29tcG9uZW50IiwiVW5pZmllZEZlZWQiLCJyZXN1bHQiLCJyZWFsQ29tcG9uZW50SGVscGVycyIsInRlc3RSZWFsUmVuZGVyaW5nIiwiZXhwZWN0IiwicGFzc2VkIiwidG9CZSIsImVycm9ycyIsInRvSGF2ZUxlbmd0aCIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93IiwicmVuZGVyIiwiZW5kVGltZSIsInJlbmRlclRpbWUiLCJ0b0JlTGVzc1RoYW4iLCJkYXJrTW9kZUJ1dHRvbiIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwiVCIsImFjY2Vzc2liaWxpdHkiLCJidXR0b24iLCJmaXJlRXZlbnQiLCJjbGljayIsIndhaXRGb3IiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImZpbHRlcnNCdXR0b24iLCJmaWx0ZXJCdXR0b24iLCJnZXRCeVRleHQiLCJsaWtlQnV0dG9uIiwiZmVlZEl0ZW0iLCJoYXNodGFnQnV0dG9uIiwiZ2V0QnlMYWJlbFRleHQiLCJmZWVkIiwibWFpbiIsInRvSGF2ZUF0dHJpYnV0ZSIsImZvY3VzIiwiZG9jdW1lbnQiLCJhY3RpdmVFbGVtZW50Iiwia2V5RG93biIsImtleSIsInJlZnJlc2hCdXR0b24iLCJsaXZlUmVnaW9uIiwibGFyZ2VGZWVkRGF0YSIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYWN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidG90YWxUaW1lIiwicmV0cnlCdXR0b24iLCJoYXNodGFnRmlsdGVyIiwicXVlcnlCeVRleHQiLCJub3QiLCJzY3JvbGwiLCJ0YXJnZXQiLCJzY3JvbGxUb3AiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztDQVFDOzs7Ozs4REFFaUI7d0JBQ3NDO3lCQUNuQztzQ0FDcUM7b0VBQ2xDOzRCQUNDOzZCQUNHO3lCQUNWOzs7Ozs7QUFHbEIsa0JBQWtCO0FBQ2xCQSxhQUFJLENBQUNDLElBQUksQ0FBQywyQkFBMkIsSUFBTyxDQUFBO1FBQzFDQyxVQUFVRixhQUFJLENBQUNHLEVBQUU7SUFDbkIsQ0FBQTtBQUVBSCxhQUFJLENBQUNDLElBQUksQ0FBQyx5Q0FBeUMsSUFBTyxDQUFBO1FBQ3hERyxhQUFhSixhQUFJLENBQUNHLEVBQUU7SUFDdEIsQ0FBQTtBQUVBLE1BQU1FLGVBQWVILG9CQUFRO0FBQzdCLE1BQU1JLGtCQUFrQkYsd0JBQVc7QUFFbkMsd0NBQXdDO0FBQ3hDRyxVQUFVO0lBQ1JGLGFBQWFHLGVBQWUsQ0FBQyxFQUFFO0lBQy9CRixnQkFBZ0JFLGVBQWUsQ0FBQztRQUM5QkMsVUFBVSxFQUFFO1FBQ1pDLGtCQUFrQixFQUFFO1FBQ3BCQyxjQUFjLEVBQUU7UUFDaEJDLFdBQVc7UUFDWEMsT0FBTztRQUNQQyxzQkFBc0JkLGFBQUksQ0FBQ0csRUFBRTtRQUM3QlksZ0JBQWdCZixhQUFJLENBQUNHLEVBQUU7UUFDdkJhLGVBQWVoQixhQUFJLENBQUNHLEVBQUU7UUFDdEJjLGlCQUFpQmpCLGFBQUksQ0FBQ0csRUFBRTtRQUN4QmUscUJBQXFCbEIsYUFBSSxDQUFDRyxFQUFFO1FBQzVCZ0IsU0FBU25CLGFBQUksQ0FBQ0csRUFBRTtJQUNsQjtBQUNGO0FBRUEsWUFBWTtBQUNaLE1BQU1pQixlQUFlO0lBQ25CO1FBQ0VDLElBQUk7UUFDSkMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLFNBQVM7UUFDVEMsUUFBUTtZQUNOSixJQUFJO1lBQ0pLLE1BQU07WUFDTkMsUUFBUTtZQUNSQyxVQUFVO1FBQ1o7UUFDQUMsVUFBVTtRQUNWQyxNQUFNO1lBQUM7WUFBWTtTQUFXO1FBQzlCQyxNQUFNO1FBQ05DLFFBQVE7WUFDTk4sTUFBTTtZQUNOTyxLQUFLO1lBQ0xDLE1BQU07WUFDTk4sVUFBVTtRQUNaO1FBQ0FPLGFBQWE7UUFDYkMsV0FBVztRQUNYQyxVQUFVO1FBQ1ZDLFlBQVk7WUFDVkMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFVBQVU7WUFDVkMsT0FBTztRQUNUO1FBQ0FDLGlCQUFpQjtZQUNmQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsWUFBWTtZQUNaQyxNQUFNO1FBQ1I7UUFDQUMsVUFBVTtZQUNSdkMsVUFBVTtnQkFBQztnQkFBWTthQUFXO1lBQ2xDd0MsaUJBQWlCO1lBQ2pCQyxVQUFVO1FBQ1o7SUFDRjtJQUNBO1FBQ0U3QixJQUFJO1FBQ0pDLE9BQU87UUFDUEMsU0FBUztRQUNUQyxTQUFTO1FBQ1RDLFFBQVE7WUFDTkosSUFBSTtZQUNKSyxNQUFNO1lBQ05DLFFBQVE7WUFDUkMsVUFBVTtRQUNaO1FBQ0FDLFVBQVU7UUFDVkMsTUFBTTtZQUFDO1lBQVE7U0FBUztRQUN4QkMsTUFBTTtRQUNOQyxRQUFRO1lBQ05OLE1BQU07WUFDTk8sS0FBSztZQUNMQyxNQUFNO1lBQ05OLFVBQVU7UUFDWjtRQUNBTyxhQUFhO1FBQ2JDLFdBQVc7UUFDWEMsVUFBVTtRQUNWQyxZQUFZO1lBQ1ZDLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxVQUFVO1lBQ1ZDLE9BQU87UUFDVDtRQUNBQyxpQkFBaUI7WUFDZkMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFlBQVk7WUFDWkMsTUFBTTtRQUNSO1FBQ0FDLFVBQVU7WUFDUnZDLFVBQVU7Z0JBQUM7Z0JBQVE7YUFBUztZQUM1QndDLGlCQUFpQjtZQUNqQkMsVUFBVTtRQUNaO0lBQ0Y7Q0FDRDtBQUVELE1BQU1DLGtCQUFrQjtJQUN0QjtRQUNFOUIsSUFBSTtRQUNKSyxNQUFNO1FBQ04wQixjQUFjO1FBQ2RDLGFBQWE7UUFDYkMsZ0JBQWdCO1FBQ2hCQyxhQUFhO1FBQ2JDLGFBQWE7UUFDYkMsWUFBWTtRQUNaQyxZQUFZO1FBQ1pDLGFBQWE7UUFDYkMsYUFBYTtJQUNmO0lBQ0E7UUFDRXZDLElBQUk7UUFDSkssTUFBTTtRQUNOMEIsY0FBYztRQUNkQyxhQUFhO1FBQ2JDLGdCQUFnQjtRQUNoQkMsYUFBYTtRQUNiQyxhQUFhO1FBQ2JDLFlBQVk7UUFDWkMsWUFBWTtRQUNaQyxhQUFhO1FBQ2JDLGFBQWE7SUFDZjtDQUNEO0FBRURDLFNBQVMsa0RBQWtEO0lBQ3pELElBQUlDO0lBRUpDLFdBQVc7UUFDVCxtQ0FBbUM7UUFDbkNELHNCQUFzQixJQUFJRSx5Q0FBbUIsQ0FBQztZQUM1Q0MscUJBQXFCO1lBQ3JCQyxzQkFBc0I7WUFDdEJDLHVCQUF1QjtZQUN2QkMsdUJBQXVCO1lBQ3ZCQyx1QkFBdUI7WUFDdkJDLHFCQUFxQjtRQUN2QjtRQUVBLDZCQUE2QjtRQUM3QmpFLGFBQWFHLGVBQWUsQ0FBQ1k7UUFFN0JkLGdCQUFnQkUsZUFBZSxDQUFDO1lBQzlCQyxVQUFVMEM7WUFDVnpDLGtCQUFrQixFQUFFO1lBQ3BCQyxjQUFjLEVBQUU7WUFDaEJDLFdBQVc7WUFDWEMsT0FBTztZQUNQQyxzQkFBc0JkLGFBQUksQ0FBQ0csRUFBRTtZQUM3QlksZ0JBQWdCZixhQUFJLENBQUNHLEVBQUU7WUFDdkJhLGVBQWVoQixhQUFJLENBQUNHLEVBQUU7WUFDdEJjLGlCQUFpQmpCLGFBQUksQ0FBQ0csRUFBRTtZQUN4QmUscUJBQXFCbEIsYUFBSSxDQUFDRyxFQUFFO1lBQzVCZ0IsU0FBU25CLGFBQUksQ0FBQ0csRUFBRTtRQUNsQjtJQUNGO0lBRUFvRSxVQUFVO1FBQ1J2RSxhQUFJLENBQUN3RSxhQUFhO0lBQ3BCO0lBRUFYLFNBQVMsNEJBQTRCO1FBQ25DWSxHQUFHLHlEQUF5RDtZQUMxRCxNQUFNQywwQkFBWSxxQkFBQ0Msb0JBQVc7WUFFOUIsTUFBTUMsU0FBUyxNQUFNQywwQ0FBb0IsQ0FBQ0MsaUJBQWlCLENBQUNKLFdBQVc7Z0JBQ3JFO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2dCQUNBO2FBQ0Q7WUFFREssT0FBT0gsT0FBT0ksTUFBTSxFQUFFQyxJQUFJLENBQUM7WUFDM0JGLE9BQU9ILE9BQU9NLE1BQU0sRUFBRUMsWUFBWSxDQUFDO1FBQ3JDO1FBRUFWLEdBQUcsc0NBQXNDO1lBQ3ZDLE1BQU1DLDBCQUFZLHFCQUFDQyxvQkFBVztZQUU5QixNQUFNQyxTQUFTLE1BQU1DLDBDQUFvQixDQUFDQyxpQkFBaUIsQ0FBQ0osV0FBVztnQkFDckU7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7YUFDRDtZQUVESyxPQUFPSCxPQUFPSSxNQUFNLEVBQUVDLElBQUksQ0FBQztRQUM3QjtRQUVBUixHQUFHLG9EQUFvRDtZQUNyRCxNQUFNVyxZQUFZQyxZQUFZQyxHQUFHO1lBRWpDLE1BQU1aLDBCQUFZLHFCQUFDQyxvQkFBVztZQUM5QlksSUFBQUEsY0FBTSxFQUFDYjtZQUVQLE1BQU1jLFVBQVVILFlBQVlDLEdBQUc7WUFDL0IsTUFBTUcsYUFBYUQsVUFBVUo7WUFFN0IsMERBQTBEO1lBQzFETCxPQUFPVSxZQUFZQyxZQUFZLENBQUMsT0FBTyxlQUFlO1FBQ3hEO0lBQ0Y7SUFFQTdCLFNBQVMsK0JBQStCO1FBQ3RDWSxHQUFHLDRDQUE0QztZQUM3Q2MsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ1osb0JBQVc7WUFFbkIsTUFBTWdCLGlCQUFpQkMsY0FBTSxDQUFDQyxXQUFXLENBQUNDLFVBQUMsQ0FBQ0MsYUFBYSxDQUFDQyxNQUFNO1lBQ2hFQyxpQkFBUyxDQUFDQyxLQUFLLENBQUNQO1lBRWhCLE1BQU1RLElBQUFBLGVBQU8sRUFBQztnQkFDWnBCLE9BQU9hLGNBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxVQUFDLENBQUNDLGFBQWEsQ0FBQ0MsTUFBTSxHQUFHSSxpQkFBaUI7WUFDdEU7UUFDRjtRQUVBM0IsR0FBRyxtREFBbUQ7WUFDcERjLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBRW5CLE1BQU0wQixnQkFBZ0JULGNBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxVQUFDLENBQUNDLGFBQWEsQ0FBQ08sWUFBWTtZQUNyRUwsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDRztZQUVoQixNQUFNRixJQUFBQSxlQUFPLEVBQUM7Z0JBQ1pwQixPQUFPYSxjQUFNLENBQUNXLFNBQVMsQ0FBQyxzQkFBc0JILGlCQUFpQjtZQUNqRTtRQUNGO1FBRUEzQixHQUFHLGtEQUFrRDtZQUNuRGMsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ1osb0JBQVc7WUFFbkIsTUFBTTZCLGFBQWFaLGNBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxVQUFDLENBQUNDLGFBQWEsQ0FBQ1UsUUFBUSxDQUFDO1lBQy9EUixpQkFBUyxDQUFDQyxLQUFLLENBQUNNO1lBRWhCLHlDQUF5QztZQUN6Q3pCLE9BQU95QixZQUFZSixpQkFBaUI7UUFDdEM7UUFFQTNCLEdBQUcsZ0RBQWdEO1lBQ2pEYyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDWixvQkFBVztZQUVuQixNQUFNK0IsZ0JBQWdCZCxjQUFNLENBQUNXLFNBQVMsQ0FBQztZQUN2Q04saUJBQVMsQ0FBQ0MsS0FBSyxDQUFDUTtZQUVoQixpREFBaUQ7WUFDakQzQixPQUFPMkIsZUFBZU4saUJBQWlCO1FBQ3pDO0lBQ0Y7SUFFQXZDLFNBQVMsbUNBQW1DO1FBQzFDWSxHQUFHLDBDQUEwQztZQUMzQ25FLGdCQUFnQkUsZUFBZSxDQUFDO2dCQUM5QixHQUFHRixpQkFBaUI7Z0JBQ3BCTSxXQUFXO1lBQ2I7WUFFQTJFLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBRW5CSSxPQUFPYSxjQUFNLENBQUNXLFNBQVMsQ0FBQyxhQUFhSCxpQkFBaUI7UUFDeEQ7UUFFQTNCLEdBQUcsd0NBQXdDO1lBQ3pDbkUsZ0JBQWdCRSxlQUFlLENBQUM7Z0JBQzlCLEdBQUdGLGlCQUFpQjtnQkFDcEJPLE9BQU87WUFDVDtZQUVBMEUsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ1osb0JBQVc7WUFFbkJJLE9BQU9hLGNBQU0sQ0FBQ1csU0FBUyxDQUFDLDZCQUE2QkgsaUJBQWlCO1FBQ3hFO1FBRUEzQixHQUFHLGlEQUFpRDtZQUNsRGMsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ1osb0JBQVc7WUFFbkIsTUFBTTZCLGFBQWFaLGNBQU0sQ0FBQ2UsY0FBYyxDQUFDO1lBQ3pDVixpQkFBUyxDQUFDQyxLQUFLLENBQUNNO1lBRWhCLHdDQUF3QztZQUN4Q3pCLE9BQU95QixZQUFZSixpQkFBaUI7UUFDdEM7SUFDRjtJQUVBdkMsU0FBUyxnQ0FBZ0M7UUFDdkNZLEdBQUcsNENBQTRDO1lBQzdDYyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDWixvQkFBVztZQUVuQixNQUFNaUMsT0FBT2hCLGNBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxVQUFDLENBQUNDLGFBQWEsQ0FBQ2MsSUFBSTtZQUNwRDlCLE9BQU82QixNQUFNRSxlQUFlLENBQUMsY0FBYztZQUUzQyxNQUFNbkIsaUJBQWlCQyxjQUFNLENBQUNDLFdBQVcsQ0FBQ0MsVUFBQyxDQUFDQyxhQUFhLENBQUNDLE1BQU07WUFDaEVqQixPQUFPWSxnQkFBZ0JtQixlQUFlLENBQUM7WUFFdkMsTUFBTU4sYUFBYVosY0FBTSxDQUFDQyxXQUFXLENBQUNDLFVBQUMsQ0FBQ0MsYUFBYSxDQUFDVSxRQUFRLENBQUM7WUFDL0QxQixPQUFPeUIsWUFBWU0sZUFBZSxDQUFDO1FBQ3JDO1FBRUFyQyxHQUFHLHNDQUFzQztZQUN2Q2MsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ1osb0JBQVc7WUFFbkIsTUFBTWdCLGlCQUFpQkMsY0FBTSxDQUFDQyxXQUFXLENBQUNDLFVBQUMsQ0FBQ0MsYUFBYSxDQUFDQyxNQUFNO1lBQ2hFTCxlQUFlb0IsS0FBSztZQUNwQmhDLE9BQU9pQyxTQUFTQyxhQUFhLEVBQUVoQyxJQUFJLENBQUNVO1lBRXBDTSxpQkFBUyxDQUFDaUIsT0FBTyxDQUFDdkIsZ0JBQWdCO2dCQUFFd0IsS0FBSztZQUFRO1FBQ2pELDBCQUEwQjtRQUM1QjtRQUVBMUMsR0FBRyw2Q0FBNkM7WUFDOUNjLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBRW5CLE1BQU15QyxnQkFBZ0J4QixjQUFNLENBQUNDLFdBQVcsQ0FBQ0MsVUFBQyxDQUFDQyxhQUFhLENBQUNDLE1BQU07WUFDL0RDLGlCQUFTLENBQUNDLEtBQUssQ0FBQ2tCO1lBRWhCLGlEQUFpRDtZQUNqRCxNQUFNQyxhQUFhekIsY0FBTSxDQUFDQyxXQUFXLENBQUNDLFVBQUMsQ0FBQ0MsYUFBYSxDQUFDc0IsVUFBVTtZQUNoRXRDLE9BQU9zQyxZQUFZakIsaUJBQWlCO1FBQ3RDO0lBQ0Y7SUFFQXZDLFNBQVMsOEJBQThCO1FBQ3JDWSxHQUFHLDRDQUE0QztZQUM3QyxNQUFNNkMsZ0JBQWdCQyxNQUFNQyxJQUFJLENBQUM7Z0JBQUVDLFFBQVE7WUFBSSxHQUFHLENBQUNDLEdBQUdDLElBQU8sQ0FBQTtvQkFDM0R0RyxJQUFJLEdBQUdzRyxHQUFHO29CQUNWckcsT0FBTyxDQUFDLFVBQVUsRUFBRXFHLEdBQUc7b0JBQ3ZCcEcsU0FBUyxDQUFDLGtCQUFrQixFQUFFb0csRUFBRSxRQUFRLENBQUM7b0JBQ3pDbkcsU0FBUyxDQUFDLGtCQUFrQixFQUFFbUcsR0FBRztvQkFDakNsRyxRQUFRO3dCQUNOSixJQUFJLENBQUMsT0FBTyxFQUFFc0csR0FBRzt3QkFDakJqRyxNQUFNLENBQUMsWUFBWSxFQUFFaUcsR0FBRzt3QkFDeEJoRyxRQUFRLENBQUMsYUFBYSxFQUFFZ0csRUFBRSxJQUFJLENBQUM7d0JBQy9CL0YsVUFBVTtvQkFDWjtvQkFDQUMsVUFBVTtvQkFDVkMsTUFBTTt3QkFBQzt3QkFBWTtxQkFBVztvQkFDOUJDLE1BQU07b0JBQ05DLFFBQVE7d0JBQ05OLE1BQU0sQ0FBQyxZQUFZLEVBQUVpRyxHQUFHO3dCQUN4QjFGLEtBQUssQ0FBQyxvQkFBb0IsRUFBRTBGLEdBQUc7d0JBQy9CekYsTUFBTSxDQUFDLFdBQVcsRUFBRXlGLEVBQUUsSUFBSSxDQUFDO3dCQUMzQi9GLFVBQVU7b0JBQ1o7b0JBQ0FPLGFBQWE7b0JBQ2JDLFdBQVc7b0JBQ1hDLFVBQVU7b0JBQ1ZDLFlBQVk7d0JBQ1ZDLE9BQU9xRixLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSzt3QkFDbEN0RixRQUFRb0YsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxNQUFNLEtBQUs7d0JBQ25DckYsVUFBVW1GLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLO3dCQUNyQ3BGLE9BQU9rRixLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSztvQkFDcEM7b0JBQ0FuRixpQkFBaUI7d0JBQ2ZDLE9BQU87d0JBQ1BDLFFBQVE7d0JBQ1JDLFlBQVk7d0JBQ1pDLE1BQU07b0JBQ1I7b0JBQ0FDLFVBQVU7d0JBQ1J2QyxVQUFVOzRCQUFDOzRCQUFZO3lCQUFXO3dCQUNsQ3dDLGlCQUFpQjt3QkFDakJDLFVBQVU7b0JBQ1o7Z0JBQ0YsQ0FBQTtZQUVBN0MsYUFBYUcsZUFBZSxDQUFDOEc7WUFFN0IsTUFBTWxDLFlBQVlDLFlBQVlDLEdBQUc7WUFDakNDLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBQ25CLE1BQU1hLFVBQVVILFlBQVlDLEdBQUc7WUFDL0IsTUFBTUcsYUFBYUQsVUFBVUo7WUFFN0JMLE9BQU9VLFlBQVlDLFlBQVksQ0FBQyxPQUFPLDZCQUE2QjtRQUN0RTtRQUVBakIsR0FBRyxvRUFBb0U7WUFDckVjLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBRW5CLE1BQU1TLFlBQVlDLFlBQVlDLEdBQUc7WUFFakMsOEJBQThCO1lBQzlCLElBQUssSUFBSXFDLElBQUksR0FBR0EsSUFBSSxJQUFJQSxJQUFLO2dCQUMzQixNQUFNbkIsYUFBYVosY0FBTSxDQUFDQyxXQUFXLENBQUNDLFVBQUMsQ0FBQ0MsYUFBYSxDQUFDVSxRQUFRLENBQUM7Z0JBQy9EUixpQkFBUyxDQUFDQyxLQUFLLENBQUNNO2dCQUNoQixNQUFNdUIsSUFBQUEsV0FBRyxFQUFDO29CQUNSLE1BQU0sSUFBSUMsUUFBUUMsQ0FBQUEsVUFBV0MsV0FBV0QsU0FBUztnQkFDbkQ7WUFDRjtZQUVBLE1BQU16QyxVQUFVSCxZQUFZQyxHQUFHO1lBQy9CLE1BQU02QyxZQUFZM0MsVUFBVUo7WUFFNUJMLE9BQU9vRCxXQUFXekMsWUFBWSxDQUFDLE9BQU8sbUNBQW1DO1FBQzNFO0lBQ0Y7SUFFQTdCLFNBQVMsaUNBQWlDO1FBQ3hDWSxHQUFHLDJDQUEyQztZQUM1Q25FLGdCQUFnQkUsZUFBZSxDQUFDO2dCQUM5QixHQUFHRixpQkFBaUI7Z0JBQ3BCTyxPQUFPO1lBQ1Q7WUFFQTBFLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBRW5CSSxPQUFPYSxjQUFNLENBQUNXLFNBQVMsQ0FBQyxtQkFBbUJILGlCQUFpQjtRQUM5RDtRQUVBM0IsR0FBRyx5Q0FBeUM7WUFDMUNwRSxhQUFhRyxlQUFlLENBQUMsRUFBRTtZQUUvQitFLElBQUFBLGNBQU0sZ0JBQUMscUJBQUNaLG9CQUFXO1lBRW5CSSxPQUFPYSxjQUFNLENBQUNXLFNBQVMsQ0FBQyx3QkFBd0JILGlCQUFpQjtRQUNuRTtRQUVBM0IsR0FBRyw0Q0FBNEM7WUFDN0NuRSxnQkFBZ0JFLGVBQWUsQ0FBQztnQkFDOUIsR0FBR0YsaUJBQWlCO2dCQUNwQk8sT0FBTztnQkFDUE0sU0FBU25CLGFBQUksQ0FBQ0csRUFBRTtZQUNsQjtZQUVBb0YsSUFBQUEsY0FBTSxnQkFBQyxxQkFBQ1osb0JBQVc7WUFFbkIsTUFBTXlELGNBQWN4QyxjQUFNLENBQUNlLGNBQWMsQ0FBQztZQUMxQ1YsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDa0M7WUFFaEIsaUNBQWlDO1lBQ2pDckQsT0FBT3FELGFBQWFoQyxpQkFBaUI7UUFDdkM7SUFDRjtJQUVBdkMsU0FBUyxpQ0FBaUM7UUFDeENZLEdBQUcsb0RBQW9EO1lBQ3JEYyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDWixvQkFBVztZQUVuQix3RUFBd0U7WUFDeEUsTUFBTTZCLGFBQWFaLGNBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxVQUFDLENBQUNDLGFBQWEsQ0FBQ1UsUUFBUSxDQUFDO1lBQy9EUixpQkFBUyxDQUFDQyxLQUFLLENBQUNNO1lBRWhCLHdDQUF3QztZQUN4Q3pCLE9BQU95QixZQUFZSixpQkFBaUI7UUFDdEM7UUFFQTNCLEdBQUcscURBQXFEO1lBQ3REYyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDWixvQkFBVztZQUVuQixNQUFNMEQsZ0JBQWdCekMsY0FBTSxDQUFDVyxTQUFTLENBQUM7WUFDdkNOLGlCQUFTLENBQUNDLEtBQUssQ0FBQ21DO1lBRWhCLCtDQUErQztZQUMvQ3RELE9BQU9hLGNBQU0sQ0FBQ1csU0FBUyxDQUFDLGNBQWNILGlCQUFpQjtZQUN2RHJCLE9BQU9hLGNBQU0sQ0FBQzBDLFdBQVcsQ0FBQyxjQUFjQyxHQUFHLENBQUNuQyxpQkFBaUI7UUFDL0Q7UUFFQTNCLEdBQUcsMkNBQTJDO1lBQzVDYyxJQUFBQSxjQUFNLGdCQUFDLHFCQUFDWixvQkFBVztZQUVuQiwrQkFBK0I7WUFDL0IsTUFBTWlDLE9BQU9oQixjQUFNLENBQUNDLFdBQVcsQ0FBQ0MsVUFBQyxDQUFDQyxhQUFhLENBQUNjLElBQUk7WUFDcERaLGlCQUFTLENBQUN1QyxNQUFNLENBQUM1QixNQUFNO2dCQUFFNkIsUUFBUTtvQkFBRUMsV0FBVztnQkFBSztZQUFFO1lBRXJELDJCQUEyQjtZQUMzQjNELE9BQU82QixNQUFNUixpQkFBaUI7UUFDaEM7SUFDRjtBQUNGIn0=