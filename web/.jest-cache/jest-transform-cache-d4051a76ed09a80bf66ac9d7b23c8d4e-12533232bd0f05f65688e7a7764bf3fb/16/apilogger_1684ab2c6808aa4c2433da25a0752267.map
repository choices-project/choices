{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/utils/api-logger.ts"],"sourcesContent":["/**\n * API Logger Utility\n * Centralized logging for API routes with structured context\n * \n * Created: October 10, 2025\n * Status: âœ… ACTIVE\n */\n\nimport { devLog } from './logger';\n\nexport interface ApiLogContext {\n  route: string;\n  method: string;\n  userId?: string;\n  requestId?: string;\n  duration?: number;\n  statusCode?: number;\n  error?: Error;\n  metadata?: Record<string, any>;\n}\n\nexport class ApiLogger {\n  private route: string;\n  private method: string;\n  private startTime: number;\n\n  constructor(route: string, method: string) {\n    this.route = route;\n    this.method = method;\n    this.startTime = Date.now();\n  }\n\n  private createContext(additionalContext: Partial<ApiLogContext> = {}): ApiLogContext {\n    return {\n      route: this.route,\n      method: this.method,\n      duration: Date.now() - this.startTime,\n      ...additionalContext\n    };\n  }\n\n  info(message: string, metadata?: Record<string, any>) {\n    devLog(`[${this.method} ${this.route}] ${message}`, {\n      ...this.createContext({ metadata }),\n      level: 'info'\n    });\n  }\n\n  error(message: string, error?: Error, metadata?: Record<string, any>) {\n    devLog(`[${this.method} ${this.route}] ${message}`, {\n      ...this.createContext({ error, metadata }),\n      level: 'error'\n    });\n  }\n\n  warn(message: string, metadata?: Record<string, any>) {\n    devLog(`[${this.method} ${this.route}] ${message}`, {\n      ...this.createContext({ metadata }),\n      level: 'warn'\n    });\n  }\n\n  debug(message: string, metadata?: Record<string, any>) {\n    devLog(`[${this.method} ${this.route}] ${message}`, {\n      ...this.createContext({ metadata }),\n      level: 'debug'\n    });\n  }\n\n  success(message: string, statusCode = 200, metadata?: Record<string, any>) {\n    devLog(`[${this.method} ${this.route}] ${message}`, {\n      ...this.createContext({ statusCode, metadata }),\n      level: 'success'\n    });\n  }\n}\n\n// Factory function for creating API loggers\nexport function createApiLogger(route: string, method: string): ApiLogger {\n  return new ApiLogger(route, method);\n}\n\n// Utility function for one-off logging\nexport function logApiEvent(\n  route: string, \n  method: string, \n  message: string, \n  level: 'info' | 'error' | 'warn' | 'debug' | 'success' = 'info',\n  metadata?: Record<string, any>\n) {\n  const logger = new ApiLogger(route, method);\n  \n  switch (level) {\n    case 'error':\n      logger.error(message, undefined, metadata);\n      break;\n    case 'warn':\n      logger.warn(message, metadata);\n      break;\n    case 'debug':\n      logger.debug(message, metadata);\n      break;\n    case 'success':\n      logger.success(message, 200, metadata);\n      break;\n    default:\n      logger.info(message, metadata);\n  }\n}\n"],"names":["ApiLogger","createApiLogger","logApiEvent","route","method","startTime","Date","now","createContext","additionalContext","duration","info","message","metadata","devLog","level","error","warn","debug","success","statusCode","logger","undefined"],"mappings":"AAAA;;;;;;CAMC;;;;;;;;;;;QAeYA;eAAAA;;QAyDGC;eAAAA;;QAKAC;eAAAA;;;wBA3EO;AAahB,MAAMF;IAKX,YAAYG,KAAa,EAAEC,MAAc,CAAE;QACzC,IAAI,CAACD,KAAK,GAAGA;QACb,IAAI,CAACC,MAAM,GAAGA;QACd,IAAI,CAACC,SAAS,GAAGC,KAAKC,GAAG;IAC3B;IAEQC,cAAcC,oBAA4C,CAAC,CAAC,EAAiB;QACnF,OAAO;YACLN,OAAO,IAAI,CAACA,KAAK;YACjBC,QAAQ,IAAI,CAACA,MAAM;YACnBM,UAAUJ,KAAKC,GAAG,KAAK,IAAI,CAACF,SAAS;YACrC,GAAGI,iBAAiB;QACtB;IACF;IAEAE,KAAKC,OAAe,EAAEC,QAA8B,EAAE;QACpDC,IAAAA,cAAM,EAAC,CAAC,CAAC,EAAE,IAAI,CAACV,MAAM,CAAC,CAAC,EAAE,IAAI,CAACD,KAAK,CAAC,EAAE,EAAES,SAAS,EAAE;YAClD,GAAG,IAAI,CAACJ,aAAa,CAAC;gBAAEK;YAAS,EAAE;YACnCE,OAAO;QACT;IACF;IAEAC,MAAMJ,OAAe,EAAEI,KAAa,EAAEH,QAA8B,EAAE;QACpEC,IAAAA,cAAM,EAAC,CAAC,CAAC,EAAE,IAAI,CAACV,MAAM,CAAC,CAAC,EAAE,IAAI,CAACD,KAAK,CAAC,EAAE,EAAES,SAAS,EAAE;YAClD,GAAG,IAAI,CAACJ,aAAa,CAAC;gBAAEQ;gBAAOH;YAAS,EAAE;YAC1CE,OAAO;QACT;IACF;IAEAE,KAAKL,OAAe,EAAEC,QAA8B,EAAE;QACpDC,IAAAA,cAAM,EAAC,CAAC,CAAC,EAAE,IAAI,CAACV,MAAM,CAAC,CAAC,EAAE,IAAI,CAACD,KAAK,CAAC,EAAE,EAAES,SAAS,EAAE;YAClD,GAAG,IAAI,CAACJ,aAAa,CAAC;gBAAEK;YAAS,EAAE;YACnCE,OAAO;QACT;IACF;IAEAG,MAAMN,OAAe,EAAEC,QAA8B,EAAE;QACrDC,IAAAA,cAAM,EAAC,CAAC,CAAC,EAAE,IAAI,CAACV,MAAM,CAAC,CAAC,EAAE,IAAI,CAACD,KAAK,CAAC,EAAE,EAAES,SAAS,EAAE;YAClD,GAAG,IAAI,CAACJ,aAAa,CAAC;gBAAEK;YAAS,EAAE;YACnCE,OAAO;QACT;IACF;IAEAI,QAAQP,OAAe,EAAEQ,aAAa,GAAG,EAAEP,QAA8B,EAAE;QACzEC,IAAAA,cAAM,EAAC,CAAC,CAAC,EAAE,IAAI,CAACV,MAAM,CAAC,CAAC,EAAE,IAAI,CAACD,KAAK,CAAC,EAAE,EAAES,SAAS,EAAE;YAClD,GAAG,IAAI,CAACJ,aAAa,CAAC;gBAAEY;gBAAYP;YAAS,EAAE;YAC/CE,OAAO;QACT;IACF;AACF;AAGO,SAASd,gBAAgBE,KAAa,EAAEC,MAAc;IAC3D,OAAO,IAAIJ,UAAUG,OAAOC;AAC9B;AAGO,SAASF,YACdC,KAAa,EACbC,MAAc,EACdQ,OAAe,EACfG,QAAyD,MAAM,EAC/DF,QAA8B;IAE9B,MAAMQ,SAAS,IAAIrB,UAAUG,OAAOC;IAEpC,OAAQW;QACN,KAAK;YACHM,OAAOL,KAAK,CAACJ,SAASU,WAAWT;YACjC;QACF,KAAK;YACHQ,OAAOJ,IAAI,CAACL,SAASC;YACrB;QACF,KAAK;YACHQ,OAAOH,KAAK,CAACN,SAASC;YACtB;QACF,KAAK;YACHQ,OAAOF,OAAO,CAACP,SAAS,KAAKC;YAC7B;QACF;YACEQ,OAAOV,IAAI,CAACC,SAASC;IACzB;AACF"}