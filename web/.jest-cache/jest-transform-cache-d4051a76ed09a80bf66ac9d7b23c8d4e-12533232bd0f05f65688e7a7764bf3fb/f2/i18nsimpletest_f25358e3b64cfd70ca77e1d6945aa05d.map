{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/integration/i18n-simple.test.ts"],"sourcesContent":["import { describe, it, expect, beforeEach, jest } from '@jest/globals';\n\n// Mock the i18n module\njest.mock('@/lib/i18n', () => ({\n  loadTranslations: jest.fn(),\n  t: jest.fn((key: string, replacements?: Record<string, string>) => {\n    const translations: Record<string, Record<string, string>> = {\n      en: {\n        'common.welcome': 'Welcome to Choices!',\n        'common.hello': 'Hello',\n        'common.loading': 'Loading...',\n        'dashboard.title': 'Dashboard',\n        'dashboard.welcome_message': 'Welcome back, {{username}}!'\n      },\n      es: {\n        'common.welcome': '¡Bienvenido a Choices!',\n        'common.hello': 'Hola',\n        'common.loading': 'Cargando...',\n        'dashboard.title': 'Panel de control',\n        'dashboard.welcome_message': '¡Bienvenido de nuevo, {{username}}!'\n      }\n    };\n\n    const currentLang = 'en'; // Default for testing\n    const translation = translations[currentLang]?.[key] || key;\n\n    if (replacements) {\n      return translation.replace(/\\{\\{(\\w+)\\}\\}/g, (match, key) => replacements[key] || match);\n    }\n\n    return translation;\n  })\n}));\n\ndescribe('Internationalization (i18n) System', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Translation Function', () => {\n    it('should translate common keys correctly', () => {\n      const { t } = require('@/lib/i18n');\n      \n      expect(t('common.welcome')).toBe('Welcome to Choices!');\n      expect(t('common.hello')).toBe('Hello');\n      expect(t('common.loading')).toBe('Loading...');\n    });\n\n    it('should handle missing translation keys gracefully', () => {\n      const { t } = require('@/lib/i18n');\n      \n      const translation = t('nonexistent.key');\n      expect(translation).toBe('nonexistent.key'); // Should return the key itself\n    });\n\n    it('should handle replacements in translations', () => {\n      const { t } = require('@/lib/i18n');\n      \n      const translation = t('dashboard.welcome_message', { username: 'John' });\n      expect(translation).toBe('Welcome back, John!');\n    });\n  });\n\n  describe('Translation Key Coverage', () => {\n    it('should have translations for all common keys', () => {\n      const { t } = require('@/lib/i18n');\n      \n      const commonKeys = [\n        'common.welcome',\n        'common.hello',\n        'common.loading',\n        'common.error',\n        'common.success',\n        'common.cancel',\n        'common.save',\n        'common.delete',\n        'common.edit',\n        'common.create',\n        'common.update',\n        'common.search',\n        'common.filter',\n        'common.sort',\n        'common.back',\n        'common.next',\n        'common.close'\n      ];\n\n      commonKeys.forEach(key => {\n        const translation = t(key);\n        expect(translation).toBeDefined();\n        expect(translation).not.toBe(key); // Should not return the key itself\n      });\n    });\n\n    it('should have translations for all navigation keys', () => {\n      const { t } = require('@/lib/i18n');\n      \n      const navigationKeys = [\n        'navigation.home',\n        'navigation.dashboard',\n        'navigation.polls',\n        'navigation.representatives',\n        'navigation.analytics',\n        'navigation.profile',\n        'navigation.settings',\n        'navigation.admin',\n        'navigation.logout',\n        'navigation.login',\n        'navigation.register'\n      ];\n\n      navigationKeys.forEach(key => {\n        const translation = t(key);\n        expect(translation).toBeDefined();\n        expect(translation).not.toBe(key);\n      });\n    });\n\n    it('should have translations for all dashboard keys', () => {\n      const { t } = require('@/lib/i18n');\n      \n      const dashboardKeys = [\n        'dashboard.title',\n        'dashboard.welcome',\n        'dashboard.recentActivity',\n        'dashboard.quickActions',\n        'dashboard.createPoll',\n        'dashboard.viewPolls',\n        'dashboard.contactRepresentatives',\n        'dashboard.viewAnalytics'\n      ];\n\n      dashboardKeys.forEach(key => {\n        const translation = t(key);\n        expect(translation).toBeDefined();\n        expect(translation).not.toBe(key);\n      });\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle missing translation keys gracefully', () => {\n      const { t } = require('@/lib/i18n');\n      const translation = t('nonexistent.key');\n      expect(translation).toBe('nonexistent.key'); // Should return the key itself\n    });\n\n    it('should handle empty replacements', () => {\n      const { t } = require('@/lib/i18n');\n      const translation = t('dashboard.welcome_message', {});\n      expect(translation).toBe('Welcome back, {{username}}!');\n    });\n  });\n});\n"],"names":["jest","mock","loadTranslations","fn","t","key","replacements","translations","en","es","currentLang","translation","replace","match","describe","beforeEach","clearAllMocks","it","require","expect","toBe","username","commonKeys","forEach","toBeDefined","not","navigationKeys","dashboardKeys"],"mappings":"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"}