{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/components/shared/GlobalNavigation.tsx"],"sourcesContent":["'use client'\n\nimport { \n  Menu, \n  X, \n  Shield, \n  User, \n  LogOut, \n  Vote,\n  BarChart3,\n  Home,\n  Settings\n} from 'lucide-react'\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { useState } from 'react'\n\nimport { Button } from '@/components/ui/button'\nimport { useUser, useUserActions } from '@/lib/stores'\n\nexport default function GlobalNavigation() {\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\n  const pathname = usePathname()\n  const user = useUser();\n  const { signOut } = useUserActions();\n\n  const toggleMobileMenu = () => {\n    setIsMobileMenuOpen(!isMobileMenuOpen)\n  }\n\n  const closeMobileMenu = () => {\n    setIsMobileMenuOpen(false)\n  }\n\n  const handleLogout = async () => {\n    try {\n      await signOut()\n      closeMobileMenu()\n    } catch (error) {\n      console.error('Logout failed:', error)\n    }\n  }\n\n  const isActive = (path: string) => {\n    return pathname === path\n  }\n\n  const navigationItems = [\n    { href: '/feed', label: 'Feed', icon: Home },\n    { href: '/polls', label: 'Polls', icon: Vote },\n    { href: '/dashboard', label: 'Dashboard', icon: BarChart3 },\n  ]\n\n  return (\n    <nav className=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          {/* Logo and Brand */}\n          <div className=\"flex items-center\">\n            <Link href=\"/\" className=\"flex items-center space-x-2\" onClick={closeMobileMenu}>\n              <Shield className=\"h-8 w-8 text-blue-600\" />\n              <span className=\"text-xl font-bold text-gray-900\">Choices</span>\n            </Link>\n          </div>\n\n          {/* Desktop Navigation */}\n          <div className=\"hidden md:flex md:items-center md:space-x-8\">\n            {navigationItems.map((item) => {\n              const Icon = item.icon\n              return (\n                <Link\n                  key={item.href}\n                  href={item.href}\n                  data-testid={item.href === '/polls' ? 'polls-nav' : item.href === '/dashboard' ? 'dashboard-nav' : item.href === '/' ? 'home-nav' : undefined}\n                  className={`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                    isActive(item.href)\n                      ? 'text-blue-600 bg-blue-50'\n                      : 'text-gray-700 hover:text-blue-600 hover:bg-gray-50'\n                  }`}\n                >\n                  <Icon className=\"h-4 w-4\" />\n                  <span>{item.label}</span>\n                </Link>\n              )\n            })}\n          </div>\n\n          {/* Desktop Auth Section */}\n          <div className=\"hidden md:flex md:items-center md:space-x-4\">\n            {user ? (\n              <div className=\"flex items-center space-x-4\">\n                <Link\n                  href=\"/profile\"\n                  className={`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                    isActive('/profile')\n                      ? 'text-blue-600 bg-blue-50'\n                      : 'text-gray-700 hover:text-blue-600 hover:bg-gray-50'\n                  }`}\n                >\n                  <User className=\"h-4 w-4\" />\n                  <span>Profile</span>\n                </Link>\n                <Link\n                  href=\"/account/privacy\"\n                  className={`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                    isActive('/account/privacy')\n                      ? 'text-blue-600 bg-blue-50'\n                      : 'text-gray-700 hover:text-blue-600 hover:bg-gray-50'\n                  }`}\n                >\n                  <Settings className=\"h-4 w-4\" />\n                  <span>Privacy</span>\n                </Link>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={handleLogout}\n                  className=\"flex items-center space-x-1\"\n                >\n                  <LogOut className=\"h-4 w-4\" />\n                  <span>Logout</span>\n                </Button>\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-4\">\n                <Button asChild variant=\"outline\" size=\"sm\">\n                  <Link href=\"/login\">Sign In</Link>\n                </Button>\n                <Button asChild size=\"sm\">\n                  <Link href=\"/register\">Get Started</Link>\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {/* Mobile menu button */}\n          <div className=\"md:hidden\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={toggleMobileMenu}\n              className=\"p-2\"\n              aria-label=\"Toggle mobile menu\"\n              data-testid=\"mobile-menu\"\n              aria-expanded={isMobileMenuOpen}\n            >\n              {isMobileMenuOpen ? (\n                <X className=\"h-6 w-6\" />\n              ) : (\n                <Menu className=\"h-6 w-6\" />\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {/* Mobile Navigation Menu */}\n        {isMobileMenuOpen && (\n          <div className=\"md:hidden\">\n            <div className=\"px-2 pt-2 pb-3 space-y-1 bg-white border-t border-gray-200\">\n              {/* Mobile Navigation Items */}\n              {navigationItems.map((item) => {\n                const Icon = item.icon\n                return (\n                  <Link\n                    key={item.href}\n                    href={item.href}\n                    onClick={closeMobileMenu}\n                    data-testid={item.href === '/polls' ? 'polls-nav' : item.href === '/dashboard' ? 'dashboard-nav' : item.href === '/' ? 'home-nav' : undefined}\n                    className={`flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium transition-colors ${\n                      isActive(item.href)\n                        ? 'text-blue-600 bg-blue-50'\n                        : 'text-gray-700 hover:text-blue-600 hover:bg-gray-50'\n                    }`}\n                  >\n                    <Icon className=\"h-5 w-5\" />\n                    <span>{item.label}</span>\n                  </Link>\n                )\n              })}\n\n              {/* Mobile Auth Section */}\n              <div className=\"pt-4 border-t border-gray-200\">\n                {user ? (\n                  <div className=\"space-y-2\">\n                    <Link\n                      href=\"/profile\"\n                      onClick={closeMobileMenu}\n                      className={`flex items-center space-x-2 px-3 py-2 rounded-md text-base font-medium transition-colors ${\n                        isActive('/profile')\n                          ? 'text-blue-600 bg-blue-50'\n                          : 'text-gray-700 hover:text-blue-600 hover:bg-gray-50'\n                      }`}\n                    >\n                      <User className=\"h-5 w-5\" />\n                      <span>Profile</span>\n                    </Link>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={handleLogout}\n                      className=\"w-full justify-start flex items-center space-x-2\"\n                      data-testid=\"logout-button\"\n                    >\n                      <LogOut className=\"h-5 w-5\" />\n                      <span>Logout</span>\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-2\">\n                    <Button asChild variant=\"outline\" size=\"sm\" className=\"w-full\">\n                      <Link href=\"/login\" onClick={closeMobileMenu}>Sign In</Link>\n                    </Button>\n                    <Button asChild size=\"sm\" className=\"w-full\">\n                      <Link href=\"/register\" onClick={closeMobileMenu}>Get Started</Link>\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </nav>\n  )\n}\n"],"names":["GlobalNavigation","isMobileMenuOpen","setIsMobileMenuOpen","useState","pathname","usePathname","user","useUser","signOut","useUserActions","toggleMobileMenu","closeMobileMenu","handleLogout","error","console","isActive","path","navigationItems","href","label","icon","Home","Vote","BarChart3","nav","className","div","Link","onClick","Shield","span","map","item","Icon","data-testid","undefined","User","Settings","Button","variant","size","LogOut","asChild","aria-label","aria-expanded","X","Menu"],"mappings":"AAAA;;;;;+BAoBA;;;eAAwBA;;;;;;;;;;;;;6DAPP;4BACW;uBACH;wBAEF;wBACiB;;;;;;AAEzB,SAASA;IACtB,MAAM,CAACC,kBAAkBC,oBAAoB,GAAGC,IAAAA,eAAQ,EAAC;IACzD,MAAMC,WAAWC,IAAAA,uBAAW;IAC5B,MAAMC,OAAOC,IAAAA,eAAO;IACpB,MAAM,EAAEC,OAAO,EAAE,GAAGC,IAAAA,sBAAc;IAElC,MAAMC,mBAAmB;QACvBR,oBAAoB,CAACD;IACvB;IAEA,MAAMU,kBAAkB;QACtBT,oBAAoB;IACtB;IAEA,MAAMU,eAAe;QACnB,IAAI;YACF,MAAMJ;YACNG;QACF,EAAE,OAAOE,OAAO;YACdC,QAAQD,KAAK,CAAC,kBAAkBA;QAClC;IACF;IAEA,MAAME,WAAW,CAACC;QAChB,OAAOZ,aAAaY;IACtB;IAEA,MAAMC,kBAAkB;QACtB;YAAEC,MAAM;YAASC,OAAO;YAAQC,MAAMC,UAAI;QAAC;QAC3C;YAAEH,MAAM;YAAUC,OAAO;YAASC,MAAME,UAAI;QAAC;QAC7C;YAAEJ,MAAM;YAAcC,OAAO;YAAaC,MAAMG,oBAAS;QAAC;KAC3D;IAED,qBACE,qBAACC;QAAIC,WAAU;kBACb,cAAA,sBAACC;YAAID,WAAU;;8BACb,sBAACC;oBAAID,WAAU;;sCAEb,qBAACC;4BAAID,WAAU;sCACb,cAAA,sBAACE,aAAI;gCAACT,MAAK;gCAAIO,WAAU;gCAA8BG,SAASjB;;kDAC9D,qBAACkB,cAAM;wCAACJ,WAAU;;kDAClB,qBAACK;wCAAKL,WAAU;kDAAkC;;;;;sCAKtD,qBAACC;4BAAID,WAAU;sCACZR,gBAAgBc,GAAG,CAAC,CAACC;gCACpB,MAAMC,OAAOD,KAAKZ,IAAI;gCACtB,qBACE,sBAACO,aAAI;oCAEHT,MAAMc,KAAKd,IAAI;oCACfgB,eAAaF,KAAKd,IAAI,KAAK,WAAW,cAAcc,KAAKd,IAAI,KAAK,eAAe,kBAAkBc,KAAKd,IAAI,KAAK,MAAM,aAAaiB;oCACpIV,WAAW,CAAC,uFAAuF,EACjGV,SAASiB,KAAKd,IAAI,IACd,6BACA,sDACJ;;sDAEF,qBAACe;4CAAKR,WAAU;;sDAChB,qBAACK;sDAAME,KAAKb,KAAK;;;mCAVZa,KAAKd,IAAI;4BAapB;;sCAIF,qBAACQ;4BAAID,WAAU;sCACZnB,qBACC,sBAACoB;gCAAID,WAAU;;kDACb,sBAACE,aAAI;wCACHT,MAAK;wCACLO,WAAW,CAAC,uFAAuF,EACjGV,SAAS,cACL,6BACA,sDACJ;;0DAEF,qBAACqB,UAAI;gDAACX,WAAU;;0DAChB,qBAACK;0DAAK;;;;kDAER,sBAACH,aAAI;wCACHT,MAAK;wCACLO,WAAW,CAAC,uFAAuF,EACjGV,SAAS,sBACL,6BACA,sDACJ;;0DAEF,qBAACsB,kBAAQ;gDAACZ,WAAU;;0DACpB,qBAACK;0DAAK;;;;kDAER,sBAACQ,cAAM;wCACLC,SAAQ;wCACRC,MAAK;wCACLZ,SAAShB;wCACTa,WAAU;;0DAEV,qBAACgB,cAAM;gDAAChB,WAAU;;0DAClB,qBAACK;0DAAK;;;;;+CAIV,sBAACJ;gCAAID,WAAU;;kDACb,qBAACa,cAAM;wCAACI,OAAO;wCAACH,SAAQ;wCAAUC,MAAK;kDACrC,cAAA,qBAACb,aAAI;4CAACT,MAAK;sDAAS;;;kDAEtB,qBAACoB,cAAM;wCAACI,OAAO;wCAACF,MAAK;kDACnB,cAAA,qBAACb,aAAI;4CAACT,MAAK;sDAAY;;;;;;sCAO/B,qBAACQ;4BAAID,WAAU;sCACb,cAAA,qBAACa,cAAM;gCACLC,SAAQ;gCACRC,MAAK;gCACLZ,SAASlB;gCACTe,WAAU;gCACVkB,cAAW;gCACXT,eAAY;gCACZU,iBAAe3C;0CAEdA,iCACC,qBAAC4C,IAAC;oCAACpB,WAAU;mDAEb,qBAACqB,UAAI;oCAACrB,WAAU;;;;;;gBAOvBxB,kCACC,qBAACyB;oBAAID,WAAU;8BACb,cAAA,sBAACC;wBAAID,WAAU;;4BAEZR,gBAAgBc,GAAG,CAAC,CAACC;gCACpB,MAAMC,OAAOD,KAAKZ,IAAI;gCACtB,qBACE,sBAACO,aAAI;oCAEHT,MAAMc,KAAKd,IAAI;oCACfU,SAASjB;oCACTuB,eAAaF,KAAKd,IAAI,KAAK,WAAW,cAAcc,KAAKd,IAAI,KAAK,eAAe,kBAAkBc,KAAKd,IAAI,KAAK,MAAM,aAAaiB;oCACpIV,WAAW,CAAC,yFAAyF,EACnGV,SAASiB,KAAKd,IAAI,IACd,6BACA,sDACJ;;sDAEF,qBAACe;4CAAKR,WAAU;;sDAChB,qBAACK;sDAAME,KAAKb,KAAK;;;mCAXZa,KAAKd,IAAI;4BAcpB;0CAGA,qBAACQ;gCAAID,WAAU;0CACZnB,qBACC,sBAACoB;oCAAID,WAAU;;sDACb,sBAACE,aAAI;4CACHT,MAAK;4CACLU,SAASjB;4CACTc,WAAW,CAAC,yFAAyF,EACnGV,SAAS,cACL,6BACA,sDACJ;;8DAEF,qBAACqB,UAAI;oDAACX,WAAU;;8DAChB,qBAACK;8DAAK;;;;sDAER,sBAACQ,cAAM;4CACLC,SAAQ;4CACRC,MAAK;4CACLZ,SAAShB;4CACTa,WAAU;4CACVS,eAAY;;8DAEZ,qBAACO,cAAM;oDAAChB,WAAU;;8DAClB,qBAACK;8DAAK;;;;;mDAIV,sBAACJ;oCAAID,WAAU;;sDACb,qBAACa,cAAM;4CAACI,OAAO;4CAACH,SAAQ;4CAAUC,MAAK;4CAAKf,WAAU;sDACpD,cAAA,qBAACE,aAAI;gDAACT,MAAK;gDAASU,SAASjB;0DAAiB;;;sDAEhD,qBAAC2B,cAAM;4CAACI,OAAO;4CAACF,MAAK;4CAAKf,WAAU;sDAClC,cAAA,qBAACE,aAAI;gDAACT,MAAK;gDAAYU,SAASjB;0DAAiB;;;;;;;;;;;;AAWvE"}