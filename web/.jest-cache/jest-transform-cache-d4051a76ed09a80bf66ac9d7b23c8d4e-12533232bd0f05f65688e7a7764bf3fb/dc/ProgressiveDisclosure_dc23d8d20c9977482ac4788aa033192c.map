{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/features/civics/components/ProgressiveDisclosure.tsx"],"sourcesContent":["/**\n * Progressive Disclosure Component\n * \n * Reusable component for progressive disclosure of information\n * Features:\n * - Smooth animations\n * - Accessibility support\n * - Customizable trigger\n * - Keyboard navigation\n * - Mobile-optimized\n */\n\n'use client';\n\nimport { ChevronDownIcon, ChevronUpIcon } from '@heroicons/react/24/outline';\nimport React, { useState, useRef, useEffect } from 'react';\n\ninterface ProgressiveDisclosureProps {\n  children: React.ReactNode;\n  trigger: React.ReactNode;\n  isExpanded?: boolean;\n  onToggle?: (expanded: boolean) => void;\n  className?: string;\n  contentClassName?: string;\n  animationDuration?: number;\n  showIcon?: boolean;\n  iconPosition?: 'left' | 'right';\n  ariaLabel?: string;\n}\n\nexport default function ProgressiveDisclosure({\n  children,\n  trigger,\n  isExpanded: controlledExpanded,\n  onToggle,\n  className = '',\n  contentClassName = '',\n  animationDuration = 300,\n  showIcon = true,\n  iconPosition = 'right',\n  ariaLabel\n}: ProgressiveDisclosureProps) {\n  \n  const [internalExpanded, setInternalExpanded] = useState(false);\n  const [contentHeight, setContentHeight] = useState(0);\n  const [isAnimating, setIsAnimating] = useState(false);\n  \n  const contentRef = useRef<HTMLDivElement>(null);\n  const isControlled = controlledExpanded !== undefined;\n  const expanded = isControlled ? controlledExpanded : internalExpanded;\n\n  // Measure content height\n  useEffect(() => {\n    if (contentRef.current) {\n      setContentHeight(contentRef.current.scrollHeight);\n    }\n  }, [children]);\n\n  // Handle toggle\n  const handleToggle = () => {\n    if (isAnimating) return;\n    \n    setIsAnimating(true);\n    \n    if (isControlled) {\n      onToggle?.(!controlledExpanded);\n    } else {\n      setInternalExpanded(!internalExpanded);\n    }\n    \n    setTimeout(() => setIsAnimating(false), animationDuration);\n  };\n\n  // Handle keyboard navigation\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      handleToggle();\n    }\n  };\n\n  return (\n    <div className={`progressive-disclosure ${className}`}>\n      {/* Trigger */}\n      <button\n        onClick={handleToggle}\n        onKeyDown={handleKeyDown}\n        className=\"w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-inset\"\n        aria-expanded={expanded}\n        aria-label={ariaLabel || (expanded ? 'Collapse content' : 'Expand content')}\n        disabled={isAnimating}\n      >\n        <div className=\"flex-1\">\n          {trigger}\n        </div>\n        \n        {showIcon && (\n          <div className={`flex-shrink-0 ml-2 ${iconPosition === 'left' ? 'order-first mr-2 ml-0' : ''}`}>\n            {expanded ? (\n              <ChevronUpIcon className=\"w-5 h-5 text-gray-500 transition-transform duration-200\" />\n            ) : (\n              <ChevronDownIcon className=\"w-5 h-5 text-gray-500 transition-transform duration-200\" />\n            )}\n          </div>\n        )}\n      </button>\n\n      {/* Content */}\n      <div\n        className=\"overflow-hidden transition-all duration-300 ease-in-out\"\n        style={{\n          height: expanded ? `${contentHeight}px` : '0px',\n          transitionDuration: `${animationDuration}ms`\n        }}\n      >\n        <div\n          ref={contentRef}\n          className={`progressive-disclosure-content ${contentClassName}`}\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Hook for managing progressive disclosure state\nexport function useProgressiveDisclosure(initialExpanded = false) {\n  const [expanded, setExpanded] = useState(initialExpanded);\n  \n  const toggle = () => setExpanded(!expanded);\n  const expand = () => setExpanded(true);\n  const collapse = () => setExpanded(false);\n  \n  return {\n    expanded,\n    toggle,\n    expand,\n    collapse,\n    setExpanded\n  };\n}\n"],"names":["ProgressiveDisclosure","useProgressiveDisclosure","children","trigger","isExpanded","controlledExpanded","onToggle","className","contentClassName","animationDuration","showIcon","iconPosition","ariaLabel","internalExpanded","setInternalExpanded","useState","contentHeight","setContentHeight","isAnimating","setIsAnimating","contentRef","useRef","isControlled","undefined","expanded","useEffect","current","scrollHeight","handleToggle","setTimeout","handleKeyDown","e","key","preventDefault","div","button","onClick","onKeyDown","aria-expanded","aria-label","disabled","ChevronUpIcon","ChevronDownIcon","style","height","transitionDuration","ref","initialExpanded","setExpanded","toggle","expand","collapse"],"mappings":"AAAA;;;;;;;;;;CAUC,GAED;;;;;;;;;;;;QAkBA;eAAwBA;;QAiGRC;eAAAA;;;;yBAjH+B;+DACI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAepC,SAASD,sBAAsB,EAC5CE,QAAQ,EACRC,OAAO,EACPC,YAAYC,kBAAkB,EAC9BC,QAAQ,EACRC,YAAY,EAAE,EACdC,mBAAmB,EAAE,EACrBC,oBAAoB,GAAG,EACvBC,WAAW,IAAI,EACfC,eAAe,OAAO,EACtBC,SAAS,EACkB;IAE3B,MAAM,CAACC,kBAAkBC,oBAAoB,GAAGC,IAAAA,eAAQ,EAAC;IACzD,MAAM,CAACC,eAAeC,iBAAiB,GAAGF,IAAAA,eAAQ,EAAC;IACnD,MAAM,CAACG,aAAaC,eAAe,GAAGJ,IAAAA,eAAQ,EAAC;IAE/C,MAAMK,aAAaC,IAAAA,aAAM,EAAiB;IAC1C,MAAMC,eAAejB,uBAAuBkB;IAC5C,MAAMC,WAAWF,eAAejB,qBAAqBQ;IAErD,yBAAyB;IACzBY,IAAAA,gBAAS,EAAC;QACR,IAAIL,WAAWM,OAAO,EAAE;YACtBT,iBAAiBG,WAAWM,OAAO,CAACC,YAAY;QAClD;IACF,GAAG;QAACzB;KAAS;IAEb,gBAAgB;IAChB,MAAM0B,eAAe;QACnB,IAAIV,aAAa;QAEjBC,eAAe;QAEf,IAAIG,cAAc;YAChBhB,WAAW,CAACD;QACd,OAAO;YACLS,oBAAoB,CAACD;QACvB;QAEAgB,WAAW,IAAMV,eAAe,QAAQV;IAC1C;IAEA,6BAA6B;IAC7B,MAAMqB,gBAAgB,CAACC;QACrB,IAAIA,EAAEC,GAAG,KAAK,WAAWD,EAAEC,GAAG,KAAK,KAAK;YACtCD,EAAEE,cAAc;YAChBL;QACF;IACF;IAEA,qBACE,sBAACM;QAAI3B,WAAW,CAAC,uBAAuB,EAAEA,WAAW;;0BAEnD,sBAAC4B;gBACCC,SAASR;gBACTS,WAAWP;gBACXvB,WAAU;gBACV+B,iBAAed;gBACfe,cAAY3B,aAAcY,CAAAA,WAAW,qBAAqB,gBAAe;gBACzEgB,UAAUtB;;kCAEV,qBAACgB;wBAAI3B,WAAU;kCACZJ;;oBAGFO,0BACC,qBAACwB;wBAAI3B,WAAW,CAAC,mBAAmB,EAAEI,iBAAiB,SAAS,0BAA0B,IAAI;kCAC3Fa,yBACC,qBAACiB,sBAAa;4BAAClC,WAAU;2CAEzB,qBAACmC,wBAAe;4BAACnC,WAAU;;;;;0BAOnC,qBAAC2B;gBACC3B,WAAU;gBACVoC,OAAO;oBACLC,QAAQpB,WAAW,GAAGR,cAAc,EAAE,CAAC,GAAG;oBAC1C6B,oBAAoB,GAAGpC,kBAAkB,EAAE,CAAC;gBAC9C;0BAEA,cAAA,qBAACyB;oBACCY,KAAK1B;oBACLb,WAAW,CAAC,+BAA+B,EAAEC,kBAAkB;8BAE9DN;;;;;AAKX;AAGO,SAASD,yBAAyB8C,kBAAkB,KAAK;IAC9D,MAAM,CAACvB,UAAUwB,YAAY,GAAGjC,IAAAA,eAAQ,EAACgC;IAEzC,MAAME,SAAS,IAAMD,YAAY,CAACxB;IAClC,MAAM0B,SAAS,IAAMF,YAAY;IACjC,MAAMG,WAAW,IAAMH,YAAY;IAEnC,OAAO;QACLxB;QACAyB;QACAC;QACAC;QACAH;IACF;AACF"}