1a37d4ec4af2215ab856a42db40e8c8c
/**
 * @jest-environment jsdom
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactrouterdom = require("react-router-dom");
const _UnifiedFeed = /*#__PURE__*/ _interop_require_default(require("../../../../features/feeds/components/UnifiedFeed"));
const _performanceprofiler = require("./performance-profiler");
const _logger = require("../../../../lib/utils/logger");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Setup minimal mocks for test environment
beforeAll(()=>{
    // Mock localStorage for component functionality
    Object.defineProperty(window, 'localStorage', {
        value: {
            getItem: jest.fn(),
            setItem: jest.fn(),
            removeItem: jest.fn(),
            clear: jest.fn()
        },
        writable: true
    });
    // Mock navigator for online status
    Object.defineProperty(navigator, 'onLine', {
        value: true,
        writable: true
    });
    // Mock fetch to handle API calls
    global.fetch = jest.fn((url)=>{
        if (url.includes('/api/feeds')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve([
                        {
                            id: '1',
                            title: 'Sample Civic Activity',
                            description: 'A sample civic activity for testing',
                            category: 'civic',
                            timestamp: new Date().toISOString(),
                            source: 'test'
                        }
                    ])
            });
        }
        if (url.includes('/api/civics/analytics')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        analytics: {
                            totalViews: 100,
                            engagement: 0.75,
                            userSatisfaction: 0.85
                        }
                    })
            });
        }
        if (url.includes('/api/pwa/offline/sync')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true
                    })
            });
        }
        return Promise.resolve({
            ok: true,
            json: ()=>Promise.resolve({})
        });
    });
});
describe('Advanced Performance Optimization Tests', ()=>{
    beforeEach(()=>{
        // Clear profiler before each test
        _performanceprofiler.performanceProfiler.clear();
    });
    describe('Performance Profiling', ()=>{
        it('should profile component performance with deep analysis', async ()=>{
            const componentName = 'UnifiedFeed';
            // Start profiling
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            const startTime = performance.now();
            const startMemory = performance.memory?.usedJSHeapSize || 0;
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const endTime = performance.now();
            const endMemory = performance.memory?.usedJSHeapSize || 0;
            // Stop profiling and get metrics
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ” Deep Performance Analysis:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Memory Used: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
            _logger.logger.info(`- Re-render Triggers: ${metrics.reRenderTriggers.length}`);
            _logger.logger.info(`- Bottlenecks: ${metrics.performanceBottlenecks.length}`);
            _logger.logger.info(`- Recommendations: ${metrics.recommendations.length}`);
            // Verify metrics
            expect(metrics.componentName).toBe(componentName);
            expect(metrics.renderCount).toBe(1);
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
            expect(metrics.recommendations.length).toBeGreaterThan(0);
        });
        it('should create component profile with optimization analysis', async ()=>{
            const componentName = 'UnifiedFeed';
            // Profile the component
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            // Create component profile
            const profile = _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            _logger.logger.info(`ðŸ“Š Component Profile Created:`);
            _logger.logger.info(`- Name: ${profile.name}`);
            _logger.logger.info(`- Depth: ${profile.depth}`);
            _logger.logger.info(`- Is Optimized: ${profile.isOptimized}`);
            _logger.logger.info(`- Optimization Potential: ${profile.optimizationPotential}`);
            _logger.logger.info(`- Optimization Score: ${profile.metrics.optimizationScore}/100`);
            // Verify profile
            expect(profile.name).toBe(componentName);
            expect(profile.metrics).toBe(metrics);
            expect(profile.depth).toBe(0);
            expect(typeof profile.isOptimized).toBe('boolean');
            expect([
                'HIGH',
                'MEDIUM',
                'LOW'
            ]).toContain(profile.optimizationPotential);
        });
        it('should generate comprehensive performance analysis', async ()=>{
            // Profile multiple components
            const components = [
                'UnifiedFeed',
                'TestComponent1',
                'TestComponent2'
            ];
            for (const componentName of components){
                _performanceprofiler.performanceProfiler.startProfiling(componentName);
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                    }));
                });
                const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, Math.floor(Math.random() * 5) + 1);
                _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            }
            // Generate comprehensive analysis
            const analysis = _performanceprofiler.performanceProfiler.generatePerformanceAnalysis();
            _logger.logger.info(`ðŸ“ˆ Comprehensive Performance Analysis:`);
            _logger.logger.info(`- Overall Score: ${analysis.overallScore.toFixed(2)}/100`);
            _logger.logger.info(`- Critical Issues: ${analysis.criticalIssues.length}`);
            _logger.logger.info(`- Optimization Opportunities: ${analysis.optimizationOpportunities.length}`);
            _logger.logger.info(`- Memory Leaks: ${analysis.memoryLeaks.length}`);
            _logger.logger.info(`- Render Optimizations: ${analysis.renderOptimizations.length}`);
            _logger.logger.info(`- Network Optimizations: ${analysis.networkOptimizations.length}`);
            _logger.logger.info(`- Accessibility Optimizations: ${analysis.accessibilityOptimizations.length}`);
            _logger.logger.info(`- Recommendations: ${analysis.recommendations.length}`);
            _logger.logger.info(`- Estimated Improvement: ${analysis.estimatedImprovement.toFixed(2)}%`);
            // Verify analysis
            expect(analysis.overallScore).toBeGreaterThanOrEqual(0);
            expect(analysis.overallScore).toBeLessThanOrEqual(100);
            expect(Array.isArray(analysis.criticalIssues)).toBe(true);
            expect(Array.isArray(analysis.optimizationOpportunities)).toBe(true);
            expect(Array.isArray(analysis.memoryLeaks)).toBe(true);
            expect(Array.isArray(analysis.renderOptimizations)).toBe(true);
            expect(Array.isArray(analysis.networkOptimizations)).toBe(true);
            expect(Array.isArray(analysis.accessibilityOptimizations)).toBe(true);
            expect(Array.isArray(analysis.recommendations)).toBe(true);
            expect(analysis.estimatedImprovement).toBeGreaterThanOrEqual(0);
        });
    });
    describe('Memory Optimization', ()=>{
        it('should identify memory optimization opportunities', async ()=>{
            const componentName = 'MemoryOptimizationTest';
            // Simulate memory-intensive operations
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ§  Memory Optimization Analysis:`);
            _logger.logger.info(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Memory Average: ${metrics.memoryAverage.toFixed(2)}MB`);
            _logger.logger.info(`- Memory Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('memory')).length}`);
            // Check for memory optimization recommendations
            const memoryRecommendations = metrics.recommendations.filter((r)=>r.includes('memory') || r.includes('cleanup') || r.includes('leak'));
            _logger.logger.info(`- Memory Recommendations: ${memoryRecommendations.length}`);
            memoryRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.memoryAverage).toBeGreaterThanOrEqual(0);
            expect(Array.isArray(memoryRecommendations)).toBe(true);
        });
        it('should detect potential memory leaks', async ()=>{
            const componentName = 'MemoryLeakTest';
            // Simulate multiple renders to detect memory leaks
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            for(let i = 0; i < 5; i++){
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                    }));
                });
            }
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 5);
            _logger.logger.info(`ðŸ” Memory Leak Detection:`);
            _logger.logger.info(`- Render Count: ${metrics.renderCount}`);
            _logger.logger.info(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Memory Average: ${metrics.memoryAverage.toFixed(2)}MB`);
            // Check for memory leak indicators
            const memoryLeakIndicators = metrics.performanceBottlenecks.filter((b)=>b.includes('memory') || b.includes('leak'));
            _logger.logger.info(`- Memory Leak Indicators: ${memoryLeakIndicators.length}`);
            memoryLeakIndicators.forEach((indicator)=>_logger.logger.info(`  - ${indicator}`));
            expect(metrics.renderCount).toBe(5);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
        });
    });
    describe('Network Optimization', ()=>{
        it('should analyze network performance and optimization', async ()=>{
            const componentName = 'NetworkOptimizationTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸŒ Network Optimization Analysis:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Network Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('network')).length}`);
            // Check for network optimization recommendations
            const networkRecommendations = metrics.recommendations.filter((r)=>r.includes('network') || r.includes('API') || r.includes('request') || r.includes('cache'));
            _logger.logger.info(`- Network Recommendations: ${networkRecommendations.length}`);
            networkRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(Array.isArray(networkRecommendations)).toBe(true);
        });
        it('should identify API performance bottlenecks', async ()=>{
            const componentName = 'APIPerformanceTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            // Simulate API calls
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ”Œ API Performance Analysis:`);
            _logger.logger.info(`- API Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('API')).length}`);
            _logger.logger.info(`- Network Recommendations: ${metrics.recommendations.filter((r)=>r.includes('API')).length}`);
            // Verify API performance analysis
            expect(metrics.performanceBottlenecks).toBeDefined();
            expect(metrics.recommendations).toBeDefined();
        });
    });
    describe('Accessibility Optimization', ()=>{
        it('should analyze accessibility performance', async ()=>{
            const componentName = 'AccessibilityOptimizationTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`â™¿ Accessibility Performance Analysis:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Accessibility Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('accessibility')).length}`);
            // Check for accessibility optimization recommendations
            const accessibilityRecommendations = metrics.recommendations.filter((r)=>r.includes('accessibility') || r.includes('screen reader') || r.includes('ARIA'));
            _logger.logger.info(`- Accessibility Recommendations: ${accessibilityRecommendations.length}`);
            accessibilityRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.componentName).toBe(componentName);
            expect(Array.isArray(accessibilityRecommendations)).toBe(true);
        });
        it('should optimize screen reader performance', async ()=>{
            const componentName = 'ScreenReaderOptimizationTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ“± Screen Reader Performance:`);
            _logger.logger.info(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
            // Check for screen reader optimization recommendations
            const screenReaderRecommendations = metrics.recommendations.filter((r)=>r.includes('screen reader') || r.includes('announcement') || r.includes('ARIA'));
            _logger.logger.info(`- Screen Reader Recommendations: ${screenReaderRecommendations.length}`);
            screenReaderRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
        });
    });
    describe('Production Monitoring', ()=>{
        it('should simulate production performance monitoring', async ()=>{
            const componentName = 'ProductionMonitoringTest';
            // Simulate production-like conditions
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            // Simulate multiple renders under production conditions
            for(let i = 0; i < 3; i++){
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                    }));
                });
            }
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 3);
            _logger.logger.info(`ðŸ­ Production Performance Monitoring:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Render Count: ${metrics.renderCount}`);
            _logger.logger.info(`- Total Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Average Render Time: ${metrics.averageRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
            // Verify production monitoring metrics
            expect(metrics.renderCount).toBe(3);
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(metrics.averageRenderTime).toBeGreaterThan(0);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
        });
        it('should export comprehensive profiling data', async ()=>{
            // Profile multiple components
            const components = [
                'Component1',
                'Component2',
                'Component3'
            ];
            for (const componentName of components){
                _performanceprofiler.performanceProfiler.startProfiling(componentName);
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_UnifiedFeed.default, {})
                    }));
                });
                const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
                _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            }
            // Export profiling data
            const exportedData = _performanceprofiler.performanceProfiler.exportProfilingData();
            const parsedData = JSON.parse(exportedData);
            _logger.logger.info(`ðŸ“¤ Exported Profiling Data:`);
            _logger.logger.info(`- Profiles: ${parsedData.profiles.length}`);
            _logger.logger.info(`- Metrics: ${parsedData.metrics.length}`);
            _logger.logger.info(`- Analysis Generated: ${!!parsedData.analysis}`);
            expect(parsedData.profiles).toBeDefined();
            expect(parsedData.metrics).toBeDefined();
            expect(parsedData.analysis).toBeDefined();
            expect(parsedData.profiles.length).toBe(3);
            expect(parsedData.metrics.length).toBe(3);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvcGVyZm9ybWFuY2UvYWR2YW5jZWQtb3B0aW1pemF0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IsIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IFVuaWZpZWRGZWVkIGZyb20gJ0AvZmVhdHVyZXMvZmVlZHMvY29tcG9uZW50cy9VbmlmaWVkRmVlZCc7XG5pbXBvcnQgeyBwZXJmb3JtYW5jZVByb2ZpbGVyLCBQcm9maWxlck1ldHJpY3MsIENvbXBvbmVudFByb2ZpbGUgfSBmcm9tICcuL3BlcmZvcm1hbmNlLXByb2ZpbGVyJztcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvbGliL3V0aWxzL2xvZ2dlcic7XG5cbi8vIFNldHVwIG1pbmltYWwgbW9ja3MgZm9yIHRlc3QgZW52aXJvbm1lbnRcbmJlZm9yZUFsbCgoKSA9PiB7XG4gIC8vIE1vY2sgbG9jYWxTdG9yYWdlIGZvciBjb21wb25lbnQgZnVuY3Rpb25hbGl0eVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbG9jYWxTdG9yYWdlJywge1xuICAgIHZhbHVlOiB7XG4gICAgICBnZXRJdGVtOiBqZXN0LmZuKCksXG4gICAgICBzZXRJdGVtOiBqZXN0LmZuKCksXG4gICAgICByZW1vdmVJdGVtOiBqZXN0LmZuKCksXG4gICAgICBjbGVhcjogamVzdC5mbigpLFxuICAgIH0sXG4gICAgd3JpdGFibGU6IHRydWUsXG4gIH0pO1xuICBcbiAgLy8gTW9jayBuYXZpZ2F0b3IgZm9yIG9ubGluZSBzdGF0dXNcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgJ29uTGluZScsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgfSk7XG5cbiAgLy8gTW9jayBmZXRjaCB0byBoYW5kbGUgQVBJIGNhbGxzXG4gIGdsb2JhbC5mZXRjaCA9IGplc3QuZm4oKHVybDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9mZWVkcycpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZShbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICcxJyxcbiAgICAgICAgICAgIHRpdGxlOiAnU2FtcGxlIENpdmljIEFjdGl2aXR5JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQSBzYW1wbGUgY2l2aWMgYWN0aXZpdHkgZm9yIHRlc3RpbmcnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICdjaXZpYycsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHNvdXJjZTogJ3Rlc3QnXG4gICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgfSBhcyBSZXNwb25zZSk7XG4gICAgfVxuICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvY2l2aWNzL2FuYWx5dGljcycpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBhbmFseXRpY3M6IHtcbiAgICAgICAgICAgIHRvdGFsVmlld3M6IDEwMCxcbiAgICAgICAgICAgIGVuZ2FnZW1lbnQ6IDAuNzUsXG4gICAgICAgICAgICB1c2VyU2F0aXNmYWN0aW9uOiAwLjg1XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBhcyBSZXNwb25zZSk7XG4gICAgfVxuICAgIGlmICh1cmwuaW5jbHVkZXMoJy9hcGkvcHdhL29mZmxpbmUvc3luYycpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIGpzb246ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUgfSlcbiAgICAgIH0gYXMgUmVzcG9uc2UpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgIG9rOiB0cnVlLFxuICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHt9KVxuICAgIH0gYXMgUmVzcG9uc2UpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQWR2YW5jZWQgUGVyZm9ybWFuY2UgT3B0aW1pemF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBDbGVhciBwcm9maWxlciBiZWZvcmUgZWFjaCB0ZXN0XG4gICAgcGVyZm9ybWFuY2VQcm9maWxlci5jbGVhcigpO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgUHJvZmlsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvZmlsZSBjb21wb25lbnQgcGVyZm9ybWFuY2Ugd2l0aCBkZWVwIGFuYWx5c2lzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdVbmlmaWVkRmVlZCc7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHByb2ZpbGluZ1xuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBjb25zdCBzdGFydE1lbW9yeSA9IHBlcmZvcm1hbmNlLm1lbW9yeT8udXNlZEpTSGVhcFNpemUgfHwgMDtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGNvbnN0IGVuZE1lbW9yeSA9IHBlcmZvcm1hbmNlLm1lbW9yeT8udXNlZEpTSGVhcFNpemUgfHwgMDtcbiAgICAgIFxuICAgICAgLy8gU3RvcCBwcm9maWxpbmcgYW5kIGdldCBtZXRyaWNzXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+UjSBEZWVwIFBlcmZvcm1hbmNlIEFuYWx5c2lzOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gQ29tcG9uZW50OiAke21ldHJpY3MuY29tcG9uZW50TmFtZX1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIFJlbmRlciBUaW1lOiAke21ldHJpY3MudG90YWxSZW5kZXJUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE1lbW9yeSBVc2VkOiAke21ldHJpY3MubWVtb3J5UGVhay50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBPcHRpbWl6YXRpb24gU2NvcmU6ICR7bWV0cmljcy5vcHRpbWl6YXRpb25TY29yZX0vMTAwYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBSZS1yZW5kZXIgVHJpZ2dlcnM6ICR7bWV0cmljcy5yZVJlbmRlclRyaWdnZXJzLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5sZW5ndGh9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBSZWNvbW1lbmRhdGlvbnM6ICR7bWV0cmljcy5yZWNvbW1lbmRhdGlvbnMubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgbWV0cmljc1xuICAgICAgZXhwZWN0KG1ldHJpY3MuY29tcG9uZW50TmFtZSkudG9CZShjb21wb25lbnROYW1lKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlbmRlckNvdW50KS50b0JlKDEpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MudG90YWxSZW5kZXJUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5tZW1vcnlQZWFrKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgY29tcG9uZW50IHByb2ZpbGUgd2l0aCBvcHRpbWl6YXRpb24gYW5hbHlzaXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ1VuaWZpZWRGZWVkJztcbiAgICAgIFxuICAgICAgLy8gUHJvZmlsZSB0aGUgY29tcG9uZW50XG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGNvbXBvbmVudCBwcm9maWxlXG4gICAgICBjb25zdCBwcm9maWxlID0gcGVyZm9ybWFuY2VQcm9maWxlci5jcmVhdGVDb21wb25lbnRQcm9maWxlKGNvbXBvbmVudE5hbWUsIG1ldHJpY3MpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+TiiBDb21wb25lbnQgUHJvZmlsZSBDcmVhdGVkOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTmFtZTogJHtwcm9maWxlLm5hbWV9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBEZXB0aDogJHtwcm9maWxlLmRlcHRofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gSXMgT3B0aW1pemVkOiAke3Byb2ZpbGUuaXNPcHRpbWl6ZWR9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBPcHRpbWl6YXRpb24gUG90ZW50aWFsOiAke3Byb2ZpbGUub3B0aW1pemF0aW9uUG90ZW50aWFsfWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gT3B0aW1pemF0aW9uIFNjb3JlOiAke3Byb2ZpbGUubWV0cmljcy5vcHRpbWl6YXRpb25TY29yZX0vMTAwYCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBwcm9maWxlXG4gICAgICBleHBlY3QocHJvZmlsZS5uYW1lKS50b0JlKGNvbXBvbmVudE5hbWUpO1xuICAgICAgZXhwZWN0KHByb2ZpbGUubWV0cmljcykudG9CZShtZXRyaWNzKTtcbiAgICAgIGV4cGVjdChwcm9maWxlLmRlcHRoKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHR5cGVvZiBwcm9maWxlLmlzT3B0aW1pemVkKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QoWydISUdIJywgJ01FRElVTScsICdMT1cnXSkudG9Db250YWluKHByb2ZpbGUub3B0aW1pemF0aW9uUG90ZW50aWFsKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBwZXJmb3JtYW5jZSBhbmFseXNpcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFByb2ZpbGUgbXVsdGlwbGUgY29tcG9uZW50c1xuICAgICAgY29uc3QgY29tcG9uZW50cyA9IFsnVW5pZmllZEZlZWQnLCAnVGVzdENvbXBvbmVudDEnLCAnVGVzdENvbXBvbmVudDInXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBjb21wb25lbnROYW1lIG9mIGNvbXBvbmVudHMpIHtcbiAgICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDEpO1xuICAgICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLmNyZWF0ZUNvbXBvbmVudFByb2ZpbGUoY29tcG9uZW50TmFtZSwgbWV0cmljcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdlbmVyYXRlIGNvbXByZWhlbnNpdmUgYW5hbHlzaXNcbiAgICAgIGNvbnN0IGFuYWx5c2lzID0gcGVyZm9ybWFuY2VQcm9maWxlci5nZW5lcmF0ZVBlcmZvcm1hbmNlQW5hbHlzaXMoKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCfk4ggQ29tcHJlaGVuc2l2ZSBQZXJmb3JtYW5jZSBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE92ZXJhbGwgU2NvcmU6ICR7YW5hbHlzaXMub3ZlcmFsbFNjb3JlLnRvRml4ZWQoMil9LzEwMGApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gQ3JpdGljYWwgSXNzdWVzOiAke2FuYWx5c2lzLmNyaXRpY2FsSXNzdWVzLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE9wdGltaXphdGlvbiBPcHBvcnR1bml0aWVzOiAke2FuYWx5c2lzLm9wdGltaXphdGlvbk9wcG9ydHVuaXRpZXMubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IExlYWtzOiAke2FuYWx5c2lzLm1lbW9yeUxlYWtzLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIFJlbmRlciBPcHRpbWl6YXRpb25zOiAke2FuYWx5c2lzLnJlbmRlck9wdGltaXphdGlvbnMubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTmV0d29yayBPcHRpbWl6YXRpb25zOiAke2FuYWx5c2lzLm5ldHdvcmtPcHRpbWl6YXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEFjY2Vzc2liaWxpdHkgT3B0aW1pemF0aW9uczogJHthbmFseXNpcy5hY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBSZWNvbW1lbmRhdGlvbnM6ICR7YW5hbHlzaXMucmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEVzdGltYXRlZCBJbXByb3ZlbWVudDogJHthbmFseXNpcy5lc3RpbWF0ZWRJbXByb3ZlbWVudC50b0ZpeGVkKDIpfSVgKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGFuYWx5c2lzXG4gICAgICBleHBlY3QoYW5hbHlzaXMub3ZlcmFsbFNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KGFuYWx5c2lzLm92ZXJhbGxTY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMuY3JpdGljYWxJc3N1ZXMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMub3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5tZW1vcnlMZWFrcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5yZW5kZXJPcHRpbWl6YXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLm5ldHdvcmtPcHRpbWl6YXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLmFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLnJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoYW5hbHlzaXMuZXN0aW1hdGVkSW1wcm92ZW1lbnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNZW1vcnkgT3B0aW1pemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaWRlbnRpZnkgbWVtb3J5IG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdNZW1vcnlPcHRpbWl6YXRpb25UZXN0JztcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgbWVtb3J5LWludGVuc2l2ZSBvcGVyYXRpb25zXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCfp6AgTWVtb3J5IE9wdGltaXphdGlvbiBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE1lbW9yeSBQZWFrOiAke21ldHJpY3MubWVtb3J5UGVhay50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgQXZlcmFnZTogJHttZXRyaWNzLm1lbW9yeUF2ZXJhZ2UudG9GaXhlZCgyKX1NQmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5maWx0ZXIoYiA9PiBiLmluY2x1ZGVzKCdtZW1vcnknKSkubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgbWVtb3J5IG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IG1lbW9yeVJlY29tbWVuZGF0aW9ucyA9IG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCdtZW1vcnknKSB8fCByLmluY2x1ZGVzKCdjbGVhbnVwJykgfHwgci5pbmNsdWRlcygnbGVhaycpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgUmVjb21tZW5kYXRpb25zOiAke21lbW9yeVJlY29tbWVuZGF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBtZW1vcnlSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4gbG9nZ2VyLmluZm8oYCAgLSAke3JlY31gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVBlYWspLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5tZW1vcnlBdmVyYWdlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobWVtb3J5UmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHBvdGVudGlhbCBtZW1vcnkgbGVha3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ01lbW9yeUxlYWtUZXN0JztcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgbXVsdGlwbGUgcmVuZGVycyB0byBkZXRlY3QgbWVtb3J5IGxlYWtzXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJlbmRlcihcbiAgICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCA1KTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCflI0gTWVtb3J5IExlYWsgRGV0ZWN0aW9uOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIENvdW50OiAke21ldHJpY3MucmVuZGVyQ291bnR9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgUGVhazogJHttZXRyaWNzLm1lbW9yeVBlYWsudG9GaXhlZCgyKX1NQmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IEF2ZXJhZ2U6ICR7bWV0cmljcy5tZW1vcnlBdmVyYWdlLnRvRml4ZWQoMil9TUJgKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIG1lbW9yeSBsZWFrIGluZGljYXRvcnNcbiAgICAgIGNvbnN0IG1lbW9yeUxlYWtJbmRpY2F0b3JzID0gbWV0cmljcy5wZXJmb3JtYW5jZUJvdHRsZW5lY2tzLmZpbHRlcihiID0+IFxuICAgICAgICBiLmluY2x1ZGVzKCdtZW1vcnknKSB8fCBiLmluY2x1ZGVzKCdsZWFrJylcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE1lbW9yeSBMZWFrIEluZGljYXRvcnM6ICR7bWVtb3J5TGVha0luZGljYXRvcnMubGVuZ3RofWApO1xuICAgICAgbWVtb3J5TGVha0luZGljYXRvcnMuZm9yRWFjaChpbmRpY2F0b3IgPT4gbG9nZ2VyLmluZm8oYCAgLSAke2luZGljYXRvcn1gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlbmRlckNvdW50KS50b0JlKDUpO1xuICAgICAgZXhwZWN0KG1ldHJpY3MubWVtb3J5UGVhaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ05ldHdvcmsgT3B0aW1pemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYW5hbHl6ZSBuZXR3b3JrIHBlcmZvcm1hbmNlIGFuZCBvcHRpbWl6YXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ05ldHdvcmtPcHRpbWl6YXRpb25UZXN0JztcbiAgICAgIFxuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgMSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGDwn4yQIE5ldHdvcmsgT3B0aW1pemF0aW9uIEFuYWx5c2lzOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gQ29tcG9uZW50OiAke21ldHJpY3MuY29tcG9uZW50TmFtZX1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIFJlbmRlciBUaW1lOiAke21ldHJpY3MudG90YWxSZW5kZXJUaW1lLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE5ldHdvcmsgQm90dGxlbmVja3M6ICR7bWV0cmljcy5wZXJmb3JtYW5jZUJvdHRsZW5lY2tzLmZpbHRlcihiID0+IGIuaW5jbHVkZXMoJ25ldHdvcmsnKSkubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgbmV0d29yayBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBuZXR3b3JrUmVjb21tZW5kYXRpb25zID0gbWV0cmljcy5yZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ25ldHdvcmsnKSB8fCByLmluY2x1ZGVzKCdBUEknKSB8fCByLmluY2x1ZGVzKCdyZXF1ZXN0JykgfHwgci5pbmNsdWRlcygnY2FjaGUnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYC0gTmV0d29yayBSZWNvbW1lbmRhdGlvbnM6ICR7bmV0d29ya1JlY29tbWVuZGF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBuZXR3b3JrUmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IGxvZ2dlci5pbmZvKGAgIC0gJHtyZWN9YCkpO1xuICAgICAgXG4gICAgICBleHBlY3QobWV0cmljcy50b3RhbFJlbmRlclRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KG5ldHdvcmtSZWNvbW1lbmRhdGlvbnMpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpZGVudGlmeSBBUEkgcGVyZm9ybWFuY2UgYm90dGxlbmVja3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ0FQSVBlcmZvcm1hbmNlVGVzdCc7XG4gICAgICBcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIEFQSSBjYWxsc1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgMSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGDwn5SMIEFQSSBQZXJmb3JtYW5jZSBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEFQSSBCb3R0bGVuZWNrczogJHttZXRyaWNzLnBlcmZvcm1hbmNlQm90dGxlbmVja3MuZmlsdGVyKGIgPT4gYi5pbmNsdWRlcygnQVBJJykpLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE5ldHdvcmsgUmVjb21tZW5kYXRpb25zOiAke21ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IHIuaW5jbHVkZXMoJ0FQSScpKS5sZW5ndGh9YCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBBUEkgcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICAgIGV4cGVjdChtZXRyaWNzLnBlcmZvcm1hbmNlQm90dGxlbmVja3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWV0cmljcy5yZWNvbW1lbmRhdGlvbnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2Nlc3NpYmlsaXR5IE9wdGltaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFuYWx5emUgYWNjZXNzaWJpbGl0eSBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnQWNjZXNzaWJpbGl0eU9wdGltaXphdGlvblRlc3QnO1xuICAgICAgXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8VW5pZmllZEZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYOKZvyBBY2Nlc3NpYmlsaXR5IFBlcmZvcm1hbmNlIEFuYWx5c2lzOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gQ29tcG9uZW50OiAke21ldHJpY3MuY29tcG9uZW50TmFtZX1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEFjY2Vzc2liaWxpdHkgQm90dGxlbmVja3M6ICR7bWV0cmljcy5wZXJmb3JtYW5jZUJvdHRsZW5lY2tzLmZpbHRlcihiID0+IGIuaW5jbHVkZXMoJ2FjY2Vzc2liaWxpdHknKSkubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgYWNjZXNzaWJpbGl0eSBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBhY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zID0gbWV0cmljcy5yZWNvbW1lbmRhdGlvbnMuZmlsdGVyKHIgPT4gXG4gICAgICAgIHIuaW5jbHVkZXMoJ2FjY2Vzc2liaWxpdHknKSB8fCByLmluY2x1ZGVzKCdzY3JlZW4gcmVhZGVyJykgfHwgci5pbmNsdWRlcygnQVJJQScpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgLSBBY2Nlc3NpYmlsaXR5IFJlY29tbWVuZGF0aW9uczogJHthY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIGFjY2Vzc2liaWxpdHlSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4gbG9nZ2VyLmluZm8oYCAgLSAke3JlY31gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLmNvbXBvbmVudE5hbWUpLnRvQmUoY29tcG9uZW50TmFtZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgb3B0aW1pemUgc2NyZWVuIHJlYWRlciBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnU2NyZWVuUmVhZGVyT3B0aW1pemF0aW9uVGVzdCc7XG4gICAgICBcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+TsSBTY3JlZW4gUmVhZGVyIFBlcmZvcm1hbmNlOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIFRpbWU6ICR7bWV0cmljcy50b3RhbFJlbmRlclRpbWUudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gT3B0aW1pemF0aW9uIFNjb3JlOiAke21ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmV9LzEwMGApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3Igc2NyZWVuIHJlYWRlciBvcHRpbWl6YXRpb24gcmVjb21tZW5kYXRpb25zXG4gICAgICBjb25zdCBzY3JlZW5SZWFkZXJSZWNvbW1lbmRhdGlvbnMgPSBtZXRyaWNzLnJlY29tbWVuZGF0aW9ucy5maWx0ZXIociA9PiBcbiAgICAgICAgci5pbmNsdWRlcygnc2NyZWVuIHJlYWRlcicpIHx8IHIuaW5jbHVkZXMoJ2Fubm91bmNlbWVudCcpIHx8IHIuaW5jbHVkZXMoJ0FSSUEnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYC0gU2NyZWVuIFJlYWRlciBSZWNvbW1lbmRhdGlvbnM6ICR7c2NyZWVuUmVhZGVyUmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIHNjcmVlblJlYWRlclJlY29tbWVuZGF0aW9ucy5mb3JFYWNoKHJlYyA9PiBsb2dnZXIuaW5mbyhgICAtICR7cmVjfWApKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvZHVjdGlvbiBNb25pdG9yaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2ltdWxhdGUgcHJvZHVjdGlvbiBwZXJmb3JtYW5jZSBtb25pdG9yaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdQcm9kdWN0aW9uTW9uaXRvcmluZ1Rlc3QnO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBwcm9kdWN0aW9uLWxpa2UgY29uZGl0aW9uc1xuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgbXVsdGlwbGUgcmVuZGVycyB1bmRlciBwcm9kdWN0aW9uIGNvbmRpdGlvbnNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgcmVuZGVyKFxuICAgICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICAgIDxVbmlmaWVkRmVlZCAvPlxuICAgICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDMpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+PrSBQcm9kdWN0aW9uIFBlcmZvcm1hbmNlIE1vbml0b3Jpbmc6YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBDb21wb25lbnQ6ICR7bWV0cmljcy5jb21wb25lbnROYW1lfWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIENvdW50OiAke21ldHJpY3MucmVuZGVyQ291bnR9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBUb3RhbCBSZW5kZXIgVGltZTogJHttZXRyaWNzLnRvdGFsUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBBdmVyYWdlIFJlbmRlciBUaW1lOiAke21ldHJpY3MuYXZlcmFnZVJlbmRlclRpbWUudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IFBlYWs6ICR7bWV0cmljcy5tZW1vcnlQZWFrLnRvRml4ZWQoMil9TUJgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE9wdGltaXphdGlvbiBTY29yZTogJHttZXRyaWNzLm9wdGltaXphdGlvblNjb3JlfS8xMDBgKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHByb2R1Y3Rpb24gbW9uaXRvcmluZyBtZXRyaWNzXG4gICAgICBleHBlY3QobWV0cmljcy5yZW5kZXJDb3VudCkudG9CZSgzKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsUmVuZGVyVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MuYXZlcmFnZVJlbmRlclRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVBlYWspLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBjb21wcmVoZW5zaXZlIHByb2ZpbGluZyBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUHJvZmlsZSBtdWx0aXBsZSBjb21wb25lbnRzXG4gICAgICBjb25zdCBjb21wb25lbnRzID0gWydDb21wb25lbnQxJywgJ0NvbXBvbmVudDInLCAnQ29tcG9uZW50MyddO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudE5hbWUgb2YgY29tcG9uZW50cykge1xuICAgICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgICAgPFVuaWZpZWRGZWVkIC8+XG4gICAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDEpO1xuICAgICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLmNyZWF0ZUNvbXBvbmVudFByb2ZpbGUoY29tcG9uZW50TmFtZSwgbWV0cmljcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEV4cG9ydCBwcm9maWxpbmcgZGF0YVxuICAgICAgY29uc3QgZXhwb3J0ZWREYXRhID0gcGVyZm9ybWFuY2VQcm9maWxlci5leHBvcnRQcm9maWxpbmdEYXRhKCk7XG4gICAgICBjb25zdCBwYXJzZWREYXRhID0gSlNPTi5wYXJzZShleHBvcnRlZERhdGEpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+TpCBFeHBvcnRlZCBQcm9maWxpbmcgRGF0YTpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIFByb2ZpbGVzOiAke3BhcnNlZERhdGEucHJvZmlsZXMubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWV0cmljczogJHtwYXJzZWREYXRhLm1ldHJpY3MubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gQW5hbHlzaXMgR2VuZXJhdGVkOiAkeyEhcGFyc2VkRGF0YS5hbmFseXNpc31gKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHBhcnNlZERhdGEucHJvZmlsZXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGFyc2VkRGF0YS5tZXRyaWNzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEuYW5hbHlzaXMpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGFyc2VkRGF0YS5wcm9maWxlcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBleHBlY3QocGFyc2VkRGF0YS5tZXRyaWNzLmxlbmd0aCkudG9CZSgzKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuIl0sIm5hbWVzIjpbImJlZm9yZUFsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwid2luZG93IiwidmFsdWUiLCJnZXRJdGVtIiwiamVzdCIsImZuIiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJjbGVhciIsIndyaXRhYmxlIiwibmF2aWdhdG9yIiwiZ2xvYmFsIiwiZmV0Y2giLCJ1cmwiLCJpbmNsdWRlcyIsIlByb21pc2UiLCJyZXNvbHZlIiwib2siLCJqc29uIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzb3VyY2UiLCJzdWNjZXNzIiwiYW5hbHl0aWNzIiwidG90YWxWaWV3cyIsImVuZ2FnZW1lbnQiLCJ1c2VyU2F0aXNmYWN0aW9uIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwicGVyZm9ybWFuY2VQcm9maWxlciIsIml0IiwiY29tcG9uZW50TmFtZSIsInN0YXJ0UHJvZmlsaW5nIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdGFydE1lbW9yeSIsIm1lbW9yeSIsInVzZWRKU0hlYXBTaXplIiwiYWN0IiwicmVuZGVyIiwiQnJvd3NlclJvdXRlciIsIlVuaWZpZWRGZWVkIiwiZW5kVGltZSIsImVuZE1lbW9yeSIsIm1ldHJpY3MiLCJzdG9wUHJvZmlsaW5nIiwibG9nZ2VyIiwiaW5mbyIsInRvdGFsUmVuZGVyVGltZSIsInRvRml4ZWQiLCJtZW1vcnlQZWFrIiwib3B0aW1pemF0aW9uU2NvcmUiLCJyZVJlbmRlclRyaWdnZXJzIiwibGVuZ3RoIiwicGVyZm9ybWFuY2VCb3R0bGVuZWNrcyIsInJlY29tbWVuZGF0aW9ucyIsImV4cGVjdCIsInRvQmUiLCJyZW5kZXJDb3VudCIsInRvQmVHcmVhdGVyVGhhbiIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJ0b0JlTGVzc1RoYW5PckVxdWFsIiwicHJvZmlsZSIsImNyZWF0ZUNvbXBvbmVudFByb2ZpbGUiLCJuYW1lIiwiZGVwdGgiLCJpc09wdGltaXplZCIsIm9wdGltaXphdGlvblBvdGVudGlhbCIsInRvQ29udGFpbiIsImNvbXBvbmVudHMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhbmFseXNpcyIsImdlbmVyYXRlUGVyZm9ybWFuY2VBbmFseXNpcyIsIm92ZXJhbGxTY29yZSIsImNyaXRpY2FsSXNzdWVzIiwib3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcyIsIm1lbW9yeUxlYWtzIiwicmVuZGVyT3B0aW1pemF0aW9ucyIsIm5ldHdvcmtPcHRpbWl6YXRpb25zIiwiYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnMiLCJlc3RpbWF0ZWRJbXByb3ZlbWVudCIsIkFycmF5IiwiaXNBcnJheSIsIm1lbW9yeUF2ZXJhZ2UiLCJmaWx0ZXIiLCJiIiwibWVtb3J5UmVjb21tZW5kYXRpb25zIiwiciIsImZvckVhY2giLCJyZWMiLCJpIiwibWVtb3J5TGVha0luZGljYXRvcnMiLCJpbmRpY2F0b3IiLCJuZXR3b3JrUmVjb21tZW5kYXRpb25zIiwidG9CZURlZmluZWQiLCJhY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zIiwic2NyZWVuUmVhZGVyUmVjb21tZW5kYXRpb25zIiwiYXZlcmFnZVJlbmRlclRpbWUiLCJleHBvcnRlZERhdGEiLCJleHBvcnRQcm9maWxpbmdEYXRhIiwicGFyc2VkRGF0YSIsIkpTT04iLCJwYXJzZSIsInByb2ZpbGVzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Q0FFQzs7Ozs7OERBRWlCO3dCQUMyQjtnQ0FDZjtvRUFDTjtxQ0FDK0M7d0JBQ2hEOzs7Ozs7QUFFdkIsMkNBQTJDO0FBQzNDQSxVQUFVO0lBQ1IsZ0RBQWdEO0lBQ2hEQyxPQUFPQyxjQUFjLENBQUNDLFFBQVEsZ0JBQWdCO1FBQzVDQyxPQUFPO1lBQ0xDLFNBQVNDLEtBQUtDLEVBQUU7WUFDaEJDLFNBQVNGLEtBQUtDLEVBQUU7WUFDaEJFLFlBQVlILEtBQUtDLEVBQUU7WUFDbkJHLE9BQU9KLEtBQUtDLEVBQUU7UUFDaEI7UUFDQUksVUFBVTtJQUNaO0lBRUEsbUNBQW1DO0lBQ25DVixPQUFPQyxjQUFjLENBQUNVLFdBQVcsVUFBVTtRQUN6Q1IsT0FBTztRQUNQTyxVQUFVO0lBQ1o7SUFFQSxpQ0FBaUM7SUFDakNFLE9BQU9DLEtBQUssR0FBR1IsS0FBS0MsRUFBRSxDQUFDLENBQUNRO1FBQ3RCLElBQUlBLElBQUlDLFFBQVEsQ0FBQyxlQUFlO1lBQzlCLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQztnQkFDckJDLElBQUk7Z0JBQ0pDLE1BQU0sSUFBTUgsUUFBUUMsT0FBTyxDQUFDO3dCQUMxQjs0QkFDRUcsSUFBSTs0QkFDSkMsT0FBTzs0QkFDUEMsYUFBYTs0QkFDYkMsVUFBVTs0QkFDVkMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXOzRCQUNqQ0MsUUFBUTt3QkFDVjtxQkFDRDtZQUNIO1FBQ0Y7UUFD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