{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/stores/deviceStore.ts"],"sourcesContent":["/**\n * Device Store\n * \n * Centralized Zustand store for device detection, capabilities,\n * and responsive state management.\n * \n * Created: October 10, 2025\n * Status: âœ… ACTIVE\n */\n\nimport { create } from 'zustand';\nimport { devtools, persist } from 'zustand/middleware';\nimport { immer } from 'zustand/middleware/immer';\n\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport type DeviceType = 'mobile' | 'tablet' | 'desktop';\nexport type Orientation = 'portrait' | 'landscape';\nexport type ConnectionType = 'slow-2g' | '2g' | '3g' | '4g' | '5g' | 'wifi' | 'ethernet' | 'unknown';\n\nexport interface ScreenSize {\n  width: number;\n  height: number;\n  aspectRatio: number;\n}\n\nexport interface DeviceCapabilities {\n  touch: boolean;\n  hover: boolean;\n  reducedMotion: boolean;\n  darkMode: boolean;\n  highContrast: boolean;\n  lowData: boolean;\n  offline: boolean;\n  geolocation: boolean;\n  camera: boolean;\n  microphone: boolean;\n  vibration: boolean;\n  notifications: boolean;\n  clipboard: boolean;\n  share: boolean;\n}\n\nexport interface NetworkInfo {\n  type: ConnectionType;\n  effectiveType: string;\n  downlink: number;\n  rtt: number;\n  saveData: boolean;\n  online: boolean;\n}\n\nexport interface DeviceStore {\n  // Device Information\n  deviceType: DeviceType;\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  \n  // Screen Information\n  screenSize: ScreenSize;\n  orientation: Orientation;\n  pixelRatio: number;\n  \n  // Device Capabilities\n  capabilities: DeviceCapabilities;\n  \n  // Network Information\n  network: NetworkInfo;\n  \n  // User Agent\n  userAgent: string;\n  browser: string;\n  os: string;\n  \n  // Loading States\n  isLoading: boolean;\n  isInitializing: boolean;\n  \n  // Error State\n  error: string | null;\n  \n  // Actions\n  updateDeviceInfo: () => void;\n  setOrientation: (orientation: Orientation) => void;\n  setScreenSize: (width: number, height: number) => void;\n  setNetworkInfo: (network: Partial<NetworkInfo>) => void;\n  setCapability: (capability: keyof DeviceCapabilities, value: boolean) => void;\n  setLoading: (loading: boolean) => void;\n  setInitializing: (initializing: boolean) => void;\n  setError: (error: string | null) => void;\n  clearError: () => void;\n  \n  // Initialization\n  initialize: () => void;\n}\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\nconst detectDeviceType = (): DeviceType => {\n  if (typeof window === 'undefined') return 'desktop';\n  \n  const width = window.innerWidth;\n  if (width < 768) return 'mobile';\n  if (width < 1024) return 'tablet';\n  return 'desktop';\n};\n\nconst detectOrientation = (): Orientation => {\n  if (typeof window === 'undefined') return 'landscape';\n  \n  return window.innerHeight > window.innerWidth ? 'portrait' : 'landscape';\n};\n\nconst detectCapabilities = (): DeviceCapabilities => {\n  if (typeof window === 'undefined') {\n    return {\n      touch: false,\n      hover: true,\n      reducedMotion: false,\n      darkMode: false,\n      highContrast: false,\n      lowData: false,\n      offline: false,\n      geolocation: false,\n      camera: false,\n      microphone: false,\n      vibration: false,\n      notifications: false,\n      clipboard: false,\n      share: false\n    };\n  }\n\n  return {\n    touch: 'ontouchstart' in window || navigator.maxTouchPoints > 0,\n    hover: window.matchMedia('(hover: hover)').matches,\n    reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)').matches,\n    darkMode: window.matchMedia('(prefers-color-scheme: dark)').matches,\n    highContrast: window.matchMedia('(prefers-contrast: high)').matches,\n    lowData: (navigator as any).connection?.saveData || false,\n    offline: !navigator.onLine,\n    geolocation: 'geolocation' in navigator,\n    camera: 'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices,\n    microphone: 'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices,\n    vibration: 'vibrate' in navigator,\n    notifications: 'Notification' in window,\n    clipboard: 'clipboard' in navigator,\n    share: 'share' in navigator\n  };\n};\n\nconst detectNetworkInfo = (): NetworkInfo => {\n  if (typeof window === 'undefined' || !('connection' in navigator)) {\n    return {\n      type: 'unknown',\n      effectiveType: '4g',\n      downlink: 10,\n      rtt: 50,\n      saveData: false,\n      online: true\n    };\n  }\n\n  const connection = (navigator as any).connection;\n  return {\n    type: connection.effectiveType || 'unknown',\n    effectiveType: connection.effectiveType || '4g',\n    downlink: connection.downlink || 10,\n    rtt: connection.rtt || 50,\n    saveData: connection.saveData || false,\n    online: navigator.onLine\n  };\n};\n\nconst detectBrowser = (userAgent: string): string => {\n  if (userAgent.includes('Chrome')) return 'Chrome';\n  if (userAgent.includes('Firefox')) return 'Firefox';\n  if (userAgent.includes('Safari')) return 'Safari';\n  if (userAgent.includes('Edge')) return 'Edge';\n  if (userAgent.includes('Opera')) return 'Opera';\n  return 'Unknown';\n};\n\nconst detectOS = (userAgent: string): string => {\n  if (userAgent.includes('Windows')) return 'Windows';\n  if (userAgent.includes('Mac')) return 'macOS';\n  if (userAgent.includes('Linux')) return 'Linux';\n  if (userAgent.includes('Android')) return 'Android';\n  if (userAgent.includes('iOS')) return 'iOS';\n  return 'Unknown';\n};\n\n// ============================================================================\n// STORE IMPLEMENTATION\n// ============================================================================\n\nexport const useDeviceStore = create<DeviceStore>()(\n  devtools(\n    persist(\n      immer((set, get) => ({\n        // Initial State\n        deviceType: 'desktop',\n        isMobile: false,\n        isTablet: false,\n        isDesktop: true,\n        \n        screenSize: {\n          width: 1920,\n          height: 1080,\n          aspectRatio: 16/9\n        },\n        orientation: 'landscape',\n        pixelRatio: 1,\n        \n        capabilities: {\n          touch: false,\n          hover: true,\n          reducedMotion: false,\n          darkMode: false,\n          highContrast: false,\n          lowData: false,\n          offline: false,\n          geolocation: false,\n          camera: false,\n          microphone: false,\n          vibration: false,\n          notifications: false,\n          clipboard: false,\n          share: false\n        },\n        \n        network: {\n          type: 'unknown',\n          effectiveType: '4g',\n          downlink: 10,\n          rtt: 50,\n          saveData: false,\n          online: true\n        },\n        \n        userAgent: '',\n        browser: 'Unknown',\n        os: 'Unknown',\n        \n        isLoading: false,\n        isInitializing: true,\n        error: null,\n\n        // Actions\n        updateDeviceInfo: () => {\n          if (typeof window === 'undefined') return;\n\n          const deviceType = detectDeviceType();\n          const orientation = detectOrientation();\n          const capabilities = detectCapabilities();\n          const network = detectNetworkInfo();\n          const userAgent = navigator.userAgent;\n          const browser = detectBrowser(userAgent);\n          const os = detectOS(userAgent);\n\n          set((state) => {\n            state.deviceType = deviceType;\n            state.isMobile = deviceType === 'mobile';\n            state.isTablet = deviceType === 'tablet';\n            state.isDesktop = deviceType === 'desktop';\n            \n            state.orientation = orientation;\n            state.capabilities = capabilities;\n            state.network = network;\n            state.userAgent = userAgent;\n            state.browser = browser;\n            state.os = os;\n            \n            // Update screen size\n            state.screenSize = {\n              width: window.innerWidth,\n              height: window.innerHeight,\n              aspectRatio: window.innerWidth / window.innerHeight\n            };\n            \n            state.pixelRatio = window.devicePixelRatio || 1;\n          });\n        },\n\n        setOrientation: (orientation: Orientation) => {\n          set((state) => {\n            state.orientation = orientation;\n          });\n        },\n\n        setScreenSize: (width: number, height: number) => {\n          set((state) => {\n            state.screenSize = {\n              width,\n              height,\n              aspectRatio: width / height\n            };\n            \n            // Update device type based on new screen size\n            const deviceType = width < 768 ? 'mobile' : width < 1024 ? 'tablet' : 'desktop';\n            state.deviceType = deviceType;\n            state.isMobile = deviceType === 'mobile';\n            state.isTablet = deviceType === 'tablet';\n            state.isDesktop = deviceType === 'desktop';\n          });\n        },\n\n        setNetworkInfo: (network: Partial<NetworkInfo>) => {\n          set((state) => {\n            state.network = { ...state.network, ...network };\n          });\n        },\n\n        setCapability: (capability: keyof DeviceCapabilities, value: boolean) => {\n          set((state) => {\n            state.capabilities[capability] = value;\n          });\n        },\n\n        setLoading: (loading: boolean) => {\n          set((state) => {\n            state.isLoading = loading;\n          });\n        },\n\n        setInitializing: (initializing: boolean) => {\n          set((state) => {\n            state.isInitializing = initializing;\n          });\n        },\n\n        setError: (error: string | null) => {\n          set((state) => {\n            state.error = error;\n          });\n        },\n\n        clearError: () => {\n          set((state) => {\n            state.error = null;\n          });\n        },\n\n        // Initialization\n        initialize: () => {\n          set((state) => {\n            state.isInitializing = true;\n            state.error = null;\n          });\n\n          try {\n            if (typeof window !== 'undefined') {\n              // Initial device detection\n              get().updateDeviceInfo();\n\n              // Set up event listeners\n              const handleResize = () => {\n                get().setScreenSize(window.innerWidth, window.innerHeight);\n                get().setOrientation(detectOrientation());\n              };\n\n              const handleOrientationChange = () => {\n                setTimeout(() => {\n                  get().setScreenSize(window.innerWidth, window.innerHeight);\n                  get().setOrientation(detectOrientation());\n                }, 100);\n              };\n\n              const handleOnline = () => {\n                get().setNetworkInfo({ online: true });\n              };\n\n              const handleOffline = () => {\n                get().setNetworkInfo({ online: false });\n              };\n\n              const handleConnectionChange = () => {\n                get().setNetworkInfo(detectNetworkInfo());\n              };\n\n              // Add event listeners\n              window.addEventListener('resize', handleResize);\n              window.addEventListener('orientationchange', handleOrientationChange);\n              window.addEventListener('online', handleOnline);\n              window.addEventListener('offline', handleOffline);\n              \n              if ('connection' in navigator) {\n                (navigator as any).connection.addEventListener('change', handleConnectionChange);\n              }\n\n              // Listen for capability changes\n              const mediaQueries = {\n                hover: window.matchMedia('(hover: hover)'),\n                reducedMotion: window.matchMedia('(prefers-reduced-motion: reduce)'),\n                darkMode: window.matchMedia('(prefers-color-scheme: dark)'),\n                highContrast: window.matchMedia('(prefers-contrast: high)')\n              };\n\n              Object.entries(mediaQueries).forEach(([capability, mediaQuery]) => {\n                const handler = (e: MediaQueryListEvent) => {\n                  get().setCapability(capability as keyof DeviceCapabilities, e.matches);\n                };\n                mediaQuery.addEventListener('change', handler);\n              });\n\n              set((state) => {\n                state.isInitializing = false;\n              });\n            } else {\n              // Server-side fallback\n              set((state) => {\n                state.isInitializing = false;\n              });\n            }\n\n          } catch (error) {\n            set((state) => {\n              state.error = error instanceof Error ? error.message : 'Failed to initialize device detection';\n              state.isInitializing = false;\n            });\n          }\n        }\n      })),\n      {\n        name: 'device-storage',\n        partialize: (state) => ({\n          deviceType: state.deviceType,\n          screenSize: state.screenSize,\n          orientation: state.orientation,\n          capabilities: state.capabilities,\n          network: state.network,\n          browser: state.browser,\n          os: state.os\n        })\n      }\n    ),\n    { name: 'device-store' }\n  )\n);\n\n// ============================================================================\n// SELECTORS\n// ============================================================================\n\nexport const useDevice = () => useDeviceStore();\n\n// Device Type Selectors\nexport const useDeviceType = () => useDeviceStore(state => state.deviceType);\nexport const useIsMobile = () => useDeviceStore(state => state.isMobile);\nexport const useIsTablet = () => useDeviceStore(state => state.isTablet);\nexport const useIsDesktop = () => useDeviceStore(state => state.isDesktop);\n\n// Screen Selectors\nexport const useScreenSize = () => useDeviceStore(state => state.screenSize);\nexport const useOrientation = () => useDeviceStore(state => state.orientation);\nexport const usePixelRatio = () => useDeviceStore(state => state.pixelRatio);\n\n// Capability Selectors\nexport const useCapabilities = () => useDeviceStore(state => state.capabilities);\nexport const useHasTouch = () => useDeviceStore(state => state.capabilities.touch);\nexport const useHasHover = () => useDeviceStore(state => state.capabilities.hover);\nexport const useReducedMotion = () => useDeviceStore(state => state.capabilities.reducedMotion);\nexport const useDarkMode = () => useDeviceStore(state => state.capabilities.darkMode);\nexport const useHighContrast = () => useDeviceStore(state => state.capabilities.highContrast);\nexport const useLowData = () => useDeviceStore(state => state.capabilities.lowData);\nexport const useIsOffline = () => useDeviceStore(state => state.capabilities.offline);\n\n// Network Selectors\nexport const useNetwork = () => useDeviceStore(state => state.network);\nexport const useConnectionType = () => useDeviceStore(state => state.network.type);\nexport const useIsOnline = () => useDeviceStore(state => state.network.online);\n\n// Browser/OS Selectors\nexport const useBrowser = () => useDeviceStore(state => state.browser);\nexport const useOS = () => useDeviceStore(state => state.os);\nexport const useUserAgent = () => useDeviceStore(state => state.userAgent);\n\n// Loading & Error Selectors\nexport const useDeviceLoading = () => useDeviceStore(state => state.isLoading);\nexport const useDeviceInitializing = () => useDeviceStore(state => state.isInitializing);\nexport const useDeviceError = () => useDeviceStore(state => state.error);\n\n// ============================================================================\n// ACTIONS\n// ============================================================================\n\nexport const useDeviceActions = () => useDeviceStore(state => ({\n  updateDeviceInfo: state.updateDeviceInfo,\n  setOrientation: state.setOrientation,\n  setScreenSize: state.setScreenSize,\n  setNetworkInfo: state.setNetworkInfo,\n  setCapability: state.setCapability,\n  setLoading: state.setLoading,\n  setInitializing: state.setInitializing,\n  setError: state.setError,\n  clearError: state.clearError,\n  initialize: state.initialize\n}));\n\n// ============================================================================\n// UTILITIES\n// ============================================================================\n\nexport const useResponsiveBreakpoint = () => {\n  const screenSize = useScreenSize();\n  const isMobile = useIsMobile();\n  const isTablet = useIsTablet();\n  const isDesktop = useIsDesktop();\n\n  return {\n    screenSize,\n    isMobile,\n    isTablet,\n    isDesktop,\n    breakpoint: isMobile ? 'mobile' : isTablet ? 'tablet' : 'desktop',\n    isSmallScreen: screenSize.width < 768,\n    isMediumScreen: screenSize.width >= 768 && screenSize.width < 1024,\n    isLargeScreen: screenSize.width >= 1024\n  };\n};\n\nexport const useDeviceCapabilities = () => {\n  const capabilities = useCapabilities();\n  const isOnline = useIsOnline();\n  const lowData = useLowData();\n\n  return {\n    ...capabilities,\n    isOnline,\n    isOffline: !isOnline,\n    isLowData: lowData,\n    canUseAdvancedFeatures: isOnline && !lowData && capabilities.camera && capabilities.microphone\n  };\n};\n"],"names":["useBrowser","useCapabilities","useConnectionType","useDarkMode","useDevice","useDeviceActions","useDeviceCapabilities","useDeviceError","useDeviceInitializing","useDeviceLoading","useDeviceStore","useDeviceType","useHasHover","useHasTouch","useHighContrast","useIsDesktop","useIsMobile","useIsOffline","useIsOnline","useIsTablet","useLowData","useNetwork","useOS","useOrientation","usePixelRatio","useReducedMotion","useResponsiveBreakpoint","useScreenSize","useUserAgent","detectDeviceType","window","width","innerWidth","detectOrientation","innerHeight","detectCapabilities","touch","hover","reducedMotion","darkMode","highContrast","lowData","offline","geolocation","camera","microphone","vibration","notifications","clipboard","share","navigator","maxTouchPoints","matchMedia","matches","connection","saveData","onLine","mediaDevices","detectNetworkInfo","type","effectiveType","downlink","rtt","online","detectBrowser","userAgent","includes","detectOS","create","devtools","persist","immer","set","get","deviceType","isMobile","isTablet","isDesktop","screenSize","height","aspectRatio","orientation","pixelRatio","capabilities","network","browser","os","isLoading","isInitializing","error","updateDeviceInfo","state","devicePixelRatio","setOrientation","setScreenSize","setNetworkInfo","setCapability","capability","value","setLoading","loading","setInitializing","initializing","setError","clearError","initialize","handleResize","handleOrientationChange","setTimeout","handleOnline","handleOffline","handleConnectionChange","addEventListener","mediaQueries","Object","entries","forEach","mediaQuery","handler","e","Error","message","name","partialize","breakpoint","isSmallScreen","isMediumScreen","isLargeScreen","isOnline","isOffline","isLowData","canUseAdvancedFeatures"],"mappings":"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"}