{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/lib/utils/csrf-fetch.ts"],"sourcesContent":["/**\n * CSRF Fetch Utility\n * \n * Fetch utility with CSRF protection\n * \n * Created: October 26, 2025\n * Status: ACTIVE\n */\n\n/**\n * Fetch with CSRF token\n */\nexport async function csrfFetch(url: string, options: RequestInit = {}): Promise<Response> {\n  const csrfToken = document.querySelector('meta[name=\"csrf-token\"]')?.getAttribute('content');\n  \n  const headers = new Headers(options.headers);\n  if (csrfToken) {\n    headers.set('X-CSRF-Token', csrfToken);\n  }\n  \n  return fetch(url, {\n    ...options,\n    headers\n  });\n}\n\n/**\n * GET request with CSRF protection\n */\nexport async function csrfGet(url: string, options: RequestInit = {}): Promise<Response> {\n  return csrfFetch(url, {\n    ...options,\n    method: 'GET'\n  });\n}\n\n/**\n * POST request with CSRF protection\n */\nexport async function csrfPost(url: string, data?: unknown, options: RequestInit = {}): Promise<Response> {\n  const headers = new Headers(options.headers);\n  headers.set('Content-Type', 'application/json');\n  \n  return csrfFetch(url, {\n    ...options,\n    method: 'POST',\n    headers,\n    body: data ? JSON.stringify(data) : undefined\n  });\n}\n\n/**\n * PUT request with CSRF protection\n */\nexport async function csrfPut(url: string, data?: unknown, options: RequestInit = {}): Promise<Response> {\n  const headers = new Headers(options.headers);\n  headers.set('Content-Type', 'application/json');\n  \n  return csrfFetch(url, {\n    ...options,\n    method: 'PUT',\n    headers,\n    body: data ? JSON.stringify(data) : undefined\n  });\n}\n\n/**\n * DELETE request with CSRF protection\n */\nexport async function csrfDelete(url: string, options: RequestInit = {}): Promise<Response> {\n  return csrfFetch(url, {\n    ...options,\n    method: 'DELETE'\n  });\n}\n\nexport default {\n  csrfFetch,\n  csrfGet,\n  csrfPost,\n  csrfPut,\n  csrfDelete\n};"],"names":["csrfDelete","csrfFetch","csrfGet","csrfPost","csrfPut","url","options","csrfToken","document","querySelector","getAttribute","headers","Headers","set","fetch","method","data","body","JSON","stringify","undefined"],"mappings":"AAAA;;;;;;;CAOC,GAED;;CAEC;;;;;;;;;;;QA0DqBA;eAAAA;;QAzDAC;eAAAA;;QAiBAC;eAAAA;;QAUAC;eAAAA;;QAeAC;eAAAA;;QAsBtB;eAAA;;;AAhEO,eAAeH,UAAUI,GAAW,EAAEC,UAAuB,CAAC,CAAC;IACpE,MAAMC,YAAYC,SAASC,aAAa,CAAC,4BAA4BC,aAAa;IAElF,MAAMC,UAAU,IAAIC,QAAQN,QAAQK,OAAO;IAC3C,IAAIJ,WAAW;QACbI,QAAQE,GAAG,CAAC,gBAAgBN;IAC9B;IAEA,OAAOO,MAAMT,KAAK;QAChB,GAAGC,OAAO;QACVK;IACF;AACF;AAKO,eAAeT,QAAQG,GAAW,EAAEC,UAAuB,CAAC,CAAC;IAClE,OAAOL,UAAUI,KAAK;QACpB,GAAGC,OAAO;QACVS,QAAQ;IACV;AACF;AAKO,eAAeZ,SAASE,GAAW,EAAEW,IAAc,EAAEV,UAAuB,CAAC,CAAC;IACnF,MAAMK,UAAU,IAAIC,QAAQN,QAAQK,OAAO;IAC3CA,QAAQE,GAAG,CAAC,gBAAgB;IAE5B,OAAOZ,UAAUI,KAAK;QACpB,GAAGC,OAAO;QACVS,QAAQ;QACRJ;QACAM,MAAMD,OAAOE,KAAKC,SAAS,CAACH,QAAQI;IACtC;AACF;AAKO,eAAehB,QAAQC,GAAW,EAAEW,IAAc,EAAEV,UAAuB,CAAC,CAAC;IAClF,MAAMK,UAAU,IAAIC,QAAQN,QAAQK,OAAO;IAC3CA,QAAQE,GAAG,CAAC,gBAAgB;IAE5B,OAAOZ,UAAUI,KAAK;QACpB,GAAGC,OAAO;QACVS,QAAQ;QACRJ;QACAM,MAAMD,OAAOE,KAAKC,SAAS,CAACH,QAAQI;IACtC;AACF;AAKO,eAAepB,WAAWK,GAAW,EAAEC,UAAuB,CAAC,CAAC;IACrE,OAAOL,UAAUI,KAAK;QACpB,GAAGC,OAAO;QACVS,QAAQ;IACV;AACF;MAEA,WAAe;IACbd;IACAC;IACAC;IACAC;IACAJ;AACF"}