f794c80ed4d120a1560f97ffb08f5bc8
/**
 * Hashtag Moderation Store - Zustand Implementation
 * 
 * Manages hashtag moderation state including flagging interface,
 * moderation queue, and form state management.
 * 
 * Created: January 15, 2025
 * Status: âœ… ACTIVE
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: Object.getOwnPropertyDescriptor(all, name).get
    });
}
_export(exports, {
    get moderationStoreUtils () {
        return moderationStoreUtils;
    },
    get useHashtagModerationStore () {
        return useHashtagModerationStore;
    },
    get useModerationActions () {
        return useModerationActions;
    },
    get useModerationDebug () {
        return useModerationDebug;
    },
    get useModerationError () {
        return useModerationError;
    },
    get useModerationForm () {
        return useModerationForm;
    },
    get useModerationLoading () {
        return useModerationLoading;
    },
    get useModerationModal () {
        return useModerationModal;
    },
    get useModerationQueue () {
        return useModerationQueue;
    },
    get useModerationStats () {
        return useModerationStats;
    },
    get useModerationSubscription () {
        return useModerationSubscription;
    },
    get usePendingFlags () {
        return usePendingFlags;
    },
    get useSelectedModeration () {
        return useSelectedModeration;
    }
});
const _zustand = require("zustand");
const _middleware = require("zustand/middleware");
const _immer = require("zustand/middleware/immer");
const _logger = require("../utils/logger");
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
const useHashtagModerationStore = (0, _zustand.create)()((0, _middleware.devtools)((0, _middleware.persist)((0, _immer.immer)((set, _get)=>({
        // Initial state
        isOpen: false,
        flagType: 'inappropriate',
        reason: '',
        isSubmitting: false,
        error: null,
        moderationQueue: [],
        selectedModeration: null,
        isLoading: false,
        // Base store actions
        setLoading: (loading)=>set((state)=>{
                state.isLoading = loading;
            }),
        setError: (error)=>set((state)=>{
                state.error = error;
            }),
        clearError: ()=>set((state)=>{
                state.error = null;
            }),
        // Modal actions
        setIsOpen: (open)=>set((state)=>{
                state.isOpen = open;
                // Reset form when opening
                if (open) {
                    state.flagType = 'inappropriate';
                    state.reason = '';
                    state.error = null;
                }
            }),
        // Form actions
        setFlagType: (type)=>set((state)=>{
                state.flagType = type;
            }),
        setReason: (reason)=>set((state)=>{
                state.reason = reason;
            }),
        resetForm: ()=>set((state)=>{
                state.flagType = 'inappropriate';
                state.reason = '';
                state.isSubmitting = false;
                state.error = null;
            }),
        // Submission actions
        setIsSubmitting: (submitting)=>set((state)=>{
                state.isSubmitting = submitting;
            }),
        // Moderation actions
        setModerationQueue: (queue)=>set((state)=>{
                state.moderationQueue = queue;
            }),
        setSelectedModeration: (moderation)=>set((state)=>{
                state.selectedModeration = moderation;
            }),
        addModeration: (moderation)=>set((state)=>{
                state.moderationQueue.unshift(moderation);
            }),
        updateModeration: (id, updates)=>set((state)=>{
                const index = state.moderationQueue.findIndex((m)=>m.id === id);
                if (index !== -1) {
                    const existing = state.moderationQueue[index];
                    if (existing) {
                        state.moderationQueue[index] = {
                            ...existing,
                            ...updates,
                            updatedAt: new Date().toISOString()
                        };
                    }
                }
            }),
        removeModeration: (id)=>set((state)=>{
                state.moderationQueue = state.moderationQueue.filter((m)=>m.id !== id);
            }),
        // Flag actions
        submitFlag: async (hashtagId)=>{
            const state = _get();
            if (!state.reason.trim()) {
                set((state)=>{
                    state.error = 'Please provide a reason for flagging';
                });
                return;
            }
            set((state)=>{
                state.isSubmitting = true;
                state.error = null;
            });
            try {
                // Get user ID from user store
                const { useUserStore } = await Promise.resolve().then(()=>/*#__PURE__*/ _interop_require_wildcard(require("./userStore")));
                const userStore = useUserStore.getState();
                const userId = userStore.user?.id || 'anonymous';
                const flag = {
                    id: crypto.randomUUID(),
                    hashtagId,
                    flagType: state.flagType,
                    reason: state.reason,
                    userId,
                    timestamp: new Date().toISOString(),
                    status: 'pending'
                };
                // Submit flag to API
                const response = await fetch('/api/hashtags?action=flag', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(flag)
                });
                if (!response.ok) {
                    throw new Error(`Failed to submit flag: ${response.statusText}`);
                }
                // Reset form after successful submission
                set((state)=>{
                    state.isSubmitting = false;
                    state.isOpen = false;
                    state.flagType = 'inappropriate';
                    state.reason = '';
                });
                _logger.logger.info('Flag submitted', {
                    flag
                });
            } catch (error) {
                set((state)=>{
                    state.isSubmitting = false;
                    state.error = error instanceof Error ? error.message : 'Failed to submit flag';
                });
            }
        },
        approveFlag: async (flagId)=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Approve flag via API
                const response = await fetch(`/api/hashtags?action=approve&flagId=${flagId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to approve flag: ${response.statusText}`);
                }
                set((state)=>{
                    const flagIndex = state.moderationQueue.findIndex((m)=>m.flags?.some((f)=>f.id === flagId));
                    if (flagIndex !== -1) {
                        const moderation = state.moderationQueue[flagIndex];
                        if (moderation) {
                            const flag = moderation.flags?.find((f)=>f.id === flagId);
                            if (flag) {
                                flag.status = 'approved';
                            }
                        }
                    }
                    state.isLoading = false;
                });
            // Flag approved successfully
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : 'Failed to approve flag';
                });
            }
        },
        rejectFlag: async (flagId)=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Reject flag via API
                const response = await fetch(`/api/hashtags?action=reject&flagId=${flagId}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to reject flag: ${response.statusText}`);
                }
                set((state)=>{
                    const flagIndex = state.moderationQueue.findIndex((m)=>m.flags?.some((f)=>f.id === flagId));
                    if (flagIndex !== -1) {
                        const moderation = state.moderationQueue[flagIndex];
                        if (moderation) {
                            const flag = moderation.flags?.find((f)=>f.id === flagId);
                            if (flag) {
                                flag.status = 'rejected';
                            }
                        }
                    }
                    state.isLoading = false;
                });
            // Flag rejected successfully
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : 'Failed to reject flag';
                });
            }
        },
        // Queue management actions
        loadModerationQueue: async ()=>{
            set((state)=>{
                state.isLoading = true;
            });
            try {
                // Load moderation queue from API
                const response = await fetch('/api/hashtags?action=moderation-queue', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                if (!response.ok) {
                    throw new Error(`Failed to load moderation queue: ${response.statusText}`);
                }
                const moderationQueue = await response.json();
                set((state)=>{
                    state.moderationQueue = moderationQueue;
                    state.isLoading = false;
                });
            } catch (error) {
                set((state)=>{
                    state.isLoading = false;
                    state.error = error instanceof Error ? error.message : 'Failed to load moderation queue';
                });
            }
        },
        refreshQueue: async ()=>{
            const { loadModerationQueue } = _get();
            await loadModerationQueue();
        }
    })), {
    name: 'hashtag-moderation-store',
    partialize: (state)=>({
            flagType: state.flagType,
            reason: state.reason
        })
}), {
    name: 'hashtag-moderation-store'
}));
const useModerationModal = ()=>useHashtagModerationStore((state)=>state.isOpen);
const useModerationForm = ()=>useHashtagModerationStore((state)=>({
            flagType: state.flagType,
            reason: state.reason,
            isSubmitting: state.isSubmitting,
            error: state.error
        }));
const useModerationQueue = ()=>useHashtagModerationStore((state)=>state.moderationQueue);
const useSelectedModeration = ()=>useHashtagModerationStore((state)=>state.selectedModeration);
const useModerationLoading = ()=>useHashtagModerationStore((state)=>state.isLoading);
const useModerationError = ()=>useHashtagModerationStore((state)=>state.error);
const useModerationActions = ()=>useHashtagModerationStore((state)=>({
            setIsOpen: state.setIsOpen,
            setFlagType: state.setFlagType,
            setReason: state.setReason,
            resetForm: state.resetForm,
            setIsSubmitting: state.setIsSubmitting,
            setError: state.setError,
            setModerationQueue: state.setModerationQueue,
            setSelectedModeration: state.setSelectedModeration,
            addModeration: state.addModeration,
            updateModeration: state.updateModeration,
            removeModeration: state.removeModeration,
            submitFlag: state.submitFlag,
            approveFlag: state.approveFlag,
            rejectFlag: state.rejectFlag,
            loadModerationQueue: state.loadModerationQueue,
            refreshQueue: state.refreshQueue
        }));
const useModerationStats = ()=>useHashtagModerationStore((state)=>{
        const queue = state.moderationQueue;
        return {
            total: queue.length,
            pending: queue.filter((m)=>m.status === 'pending').length,
            approved: queue.filter((m)=>m.status === 'approved').length,
            rejected: queue.filter((m)=>m.status === 'rejected').length,
            underReview: queue.filter((m)=>m.status === 'under_review').length
        };
    });
const usePendingFlags = ()=>useHashtagModerationStore((state)=>state.moderationQueue.flatMap((m)=>m.flags.filter((f)=>f.status === 'pending')));
const moderationStoreUtils = {
    getFlagTypeLabel: (type)=>{
        const labels = {
            inappropriate: 'Inappropriate Content',
            spam: 'Spam',
            misleading: 'Misleading',
            harassment: 'Harassment',
            other: 'Other'
        };
        return labels[type];
    },
    getStatusColor: (status)=>{
        const colors = {
            pending: 'yellow',
            approved: 'green',
            rejected: 'red',
            under_review: 'blue'
        };
        return colors[status];
    },
    canSubmitFlag: (reason)=>{
        return reason.trim().length > 0;
    }
};
const useModerationSubscription = ()=>{
    const store = useHashtagModerationStore();
    return {
        subscribe: (callback)=>{
            return useHashtagModerationStore.subscribe(callback);
        },
        getState: ()=>store
    };
};
const useModerationDebug = ()=>{
    const state = useHashtagModerationStore();
    return {
        state,
        actions: useModerationActions(),
        stats: useModerationStats()
    };
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9saWIvc3RvcmVzL2hhc2h0YWdNb2RlcmF0aW9uU3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIYXNodGFnIE1vZGVyYXRpb24gU3RvcmUgLSBadXN0YW5kIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIE1hbmFnZXMgaGFzaHRhZyBtb2RlcmF0aW9uIHN0YXRlIGluY2x1ZGluZyBmbGFnZ2luZyBpbnRlcmZhY2UsXG4gKiBtb2RlcmF0aW9uIHF1ZXVlLCBhbmQgZm9ybSBzdGF0ZSBtYW5hZ2VtZW50LlxuICogXG4gKiBDcmVhdGVkOiBKYW51YXJ5IDE1LCAyMDI1XG4gKiBTdGF0dXM6IOKchSBBQ1RJVkVcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJztcbmltcG9ydCB7IGRldnRvb2xzIH0gZnJvbSAnenVzdGFuZC9taWRkbGV3YXJlJztcbmltcG9ydCB7IHBlcnNpc3QgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUnO1xuaW1wb3J0IHsgaW1tZXIgfSBmcm9tICd6dXN0YW5kL21pZGRsZXdhcmUvaW1tZXInO1xuXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAL2xpYi91dGlscy9sb2dnZXInO1xuXG5pbXBvcnQgdHlwZSB7IEJhc2VTdG9yZSB9IGZyb20gJy4vdHlwZXMnO1xuXG4vLyBIYXNodGFnIG1vZGVyYXRpb24gdHlwZXNcbmV4cG9ydCB0eXBlIEhhc2h0YWdGbGFnVHlwZSA9ICdpbmFwcHJvcHJpYXRlJyB8ICdzcGFtJyB8ICdtaXNsZWFkaW5nJyB8ICdoYXJhc3NtZW50JyB8ICdvdGhlcic7XG5cbmV4cG9ydCB0eXBlIEhhc2h0YWdNb2RlcmF0aW9uU3RhdHVzID0gJ3BlbmRpbmcnIHwgJ2FwcHJvdmVkJyB8ICdyZWplY3RlZCcgfCAndW5kZXJfcmV2aWV3JztcblxuZXhwb3J0IGludGVyZmFjZSBIYXNodGFnRmxhZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGhhc2h0YWdJZDogc3RyaW5nO1xuICBmbGFnVHlwZTogSGFzaHRhZ0ZsYWdUeXBlO1xuICByZWFzb246IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICBzdGF0dXM6IEhhc2h0YWdNb2RlcmF0aW9uU3RhdHVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhhc2h0YWdNb2RlcmF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgaGFzaHRhZ0lkOiBzdHJpbmc7XG4gIHN0YXR1czogSGFzaHRhZ01vZGVyYXRpb25TdGF0dXM7XG4gIGZsYWdzOiBIYXNodGFnRmxhZ1tdO1xuICBtb2RlcmF0b3JJZD86IHN0cmluZztcbiAgbW9kZXJhdG9yTm90ZXM/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xuICB1cGRhdGVkQXQ6IHN0cmluZztcbn1cblxuLy8gU3RvcmUgc3RhdGUgaW50ZXJmYWNlXG50eXBlIEhhc2h0YWdNb2RlcmF0aW9uU3RvcmUgPSB7XG4gIC8vIE1vZGFsIHN0YXRlXG4gIGlzT3BlbjogYm9vbGVhbjtcbiAgXG4gIC8vIEZvcm0gc3RhdGVcbiAgZmxhZ1R5cGU6IEhhc2h0YWdGbGFnVHlwZTtcbiAgcmVhc29uOiBzdHJpbmc7XG4gIFxuICAvLyBTdWJtaXNzaW9uIHN0YXRlXG4gIGlzU3VibWl0dGluZzogYm9vbGVhbjtcbiAgZXJyb3I6IHN0cmluZyB8IG51bGw7XG4gIFxuICAvLyBNb2RlcmF0aW9uIHF1ZXVlXG4gIG1vZGVyYXRpb25RdWV1ZTogSGFzaHRhZ01vZGVyYXRpb25bXTtcbiAgc2VsZWN0ZWRNb2RlcmF0aW9uOiBIYXNodGFnTW9kZXJhdGlvbiB8IG51bGw7XG4gIFxuICAvLyBBY3Rpb25zIC0gTW9kYWxcbiAgc2V0SXNPcGVuOiAob3BlbjogYm9vbGVhbikgPT4gdm9pZDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBGb3JtXG4gIHNldEZsYWdUeXBlOiAodHlwZTogSGFzaHRhZ0ZsYWdUeXBlKSA9PiB2b2lkO1xuICBzZXRSZWFzb246IChyZWFzb246IHN0cmluZykgPT4gdm9pZDtcbiAgcmVzZXRGb3JtOiAoKSA9PiB2b2lkO1xuICBcbiAgLy8gQWN0aW9ucyAtIFN1Ym1pc3Npb25cbiAgc2V0SXNTdWJtaXR0aW5nOiAoc3VibWl0dGluZzogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0RXJyb3I6IChlcnJvcjogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBNb2RlcmF0aW9uXG4gIHNldE1vZGVyYXRpb25RdWV1ZTogKHF1ZXVlOiBIYXNodGFnTW9kZXJhdGlvbltdKSA9PiB2b2lkO1xuICBzZXRTZWxlY3RlZE1vZGVyYXRpb246IChtb2RlcmF0aW9uOiBIYXNodGFnTW9kZXJhdGlvbiB8IG51bGwpID0+IHZvaWQ7XG4gIGFkZE1vZGVyYXRpb246IChtb2RlcmF0aW9uOiBIYXNodGFnTW9kZXJhdGlvbikgPT4gdm9pZDtcbiAgdXBkYXRlTW9kZXJhdGlvbjogKGlkOiBzdHJpbmcsIHVwZGF0ZXM6IFBhcnRpYWw8SGFzaHRhZ01vZGVyYXRpb24+KSA9PiB2b2lkO1xuICByZW1vdmVNb2RlcmF0aW9uOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgXG4gIC8vIEFjdGlvbnMgLSBGbGFnc1xuICBzdWJtaXRGbGFnOiAoaGFzaHRhZ0lkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIGFwcHJvdmVGbGFnOiAoZmxhZ0lkOiBzdHJpbmcpID0+IFByb21pc2U8dm9pZD47XG4gIHJlamVjdEZsYWc6IChmbGFnSWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcbiAgXG4gIC8vIEFjdGlvbnMgLSBRdWV1ZSBtYW5hZ2VtZW50XG4gIGxvYWRNb2RlcmF0aW9uUXVldWU6ICgpID0+IFByb21pc2U8dm9pZD47XG4gIHJlZnJlc2hRdWV1ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn0gJiBCYXNlU3RvcmU7XG5cbi8vIENyZWF0ZSBoYXNodGFnIG1vZGVyYXRpb24gc3RvcmUgd2l0aCBtaWRkbGV3YXJlXG5leHBvcnQgY29uc3QgdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZSA9IGNyZWF0ZTxIYXNodGFnTW9kZXJhdGlvblN0b3JlPigpKFxuICBkZXZ0b29scyhcbiAgICBwZXJzaXN0KFxuICAgICAgaW1tZXIoKHNldCwgX2dldCkgPT4gKHtcbiAgICAgICAgLy8gSW5pdGlhbCBzdGF0ZVxuICAgICAgICBpc09wZW46IGZhbHNlLFxuICAgICAgICBmbGFnVHlwZTogJ2luYXBwcm9wcmlhdGUnLFxuICAgICAgICByZWFzb246ICcnLFxuICAgICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgbW9kZXJhdGlvblF1ZXVlOiBbXSxcbiAgICAgICAgc2VsZWN0ZWRNb2RlcmF0aW9uOiBudWxsLFxuICAgICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgICBcbiAgICAgICAgLy8gQmFzZSBzdG9yZSBhY3Rpb25zXG4gICAgICAgIHNldExvYWRpbmc6IChsb2FkaW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gbG9hZGluZztcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBzZXRFcnJvcjogKGVycm9yKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBjbGVhckVycm9yOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIE1vZGFsIGFjdGlvbnNcbiAgICAgICAgc2V0SXNPcGVuOiAob3BlbikgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmlzT3BlbiA9IG9wZW47XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgZm9ybSB3aGVuIG9wZW5pbmdcbiAgICAgICAgICBpZiAob3Blbikge1xuICAgICAgICAgICAgc3RhdGUuZmxhZ1R5cGUgPSAnaW5hcHByb3ByaWF0ZSc7XG4gICAgICAgICAgICBzdGF0ZS5yZWFzb24gPSAnJztcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgLy8gRm9ybSBhY3Rpb25zXG4gICAgICAgIHNldEZsYWdUeXBlOiAodHlwZSkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLmZsYWdUeXBlID0gdHlwZTtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBzZXRSZWFzb246IChyZWFzb24pID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5yZWFzb24gPSByZWFzb247XG4gICAgICAgIH0pLFxuICAgICAgICBcbiAgICAgICAgcmVzZXRGb3JtOiAoKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuZmxhZ1R5cGUgPSAnaW5hcHByb3ByaWF0ZSc7XG4gICAgICAgICAgc3RhdGUucmVhc29uID0gJyc7XG4gICAgICAgICAgc3RhdGUuaXNTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgc3RhdGUuZXJyb3IgPSBudWxsO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIFN1Ym1pc3Npb24gYWN0aW9uc1xuICAgICAgICBzZXRJc1N1Ym1pdHRpbmc6IChzdWJtaXR0aW5nKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuaXNTdWJtaXR0aW5nID0gc3VibWl0dGluZztcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICAvLyBNb2RlcmF0aW9uIGFjdGlvbnNcbiAgICAgICAgc2V0TW9kZXJhdGlvblF1ZXVlOiAocXVldWUpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5tb2RlcmF0aW9uUXVldWUgPSBxdWV1ZTtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBzZXRTZWxlY3RlZE1vZGVyYXRpb246IChtb2RlcmF0aW9uKSA9PiBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgc3RhdGUuc2VsZWN0ZWRNb2RlcmF0aW9uID0gbW9kZXJhdGlvbjtcbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICBhZGRNb2RlcmF0aW9uOiAobW9kZXJhdGlvbikgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZS51bnNoaWZ0KG1vZGVyYXRpb24pO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIHVwZGF0ZU1vZGVyYXRpb246IChpZCwgdXBkYXRlcykgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlLmZpbmRJbmRleChtID0+IG0uaWQgPT09IGlkKTtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZVtpbmRleF07XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgc3RhdGUubW9kZXJhdGlvblF1ZXVlW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAuLi5leGlzdGluZyxcbiAgICAgICAgICAgICAgICAuLi51cGRhdGVzLFxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIFxuICAgICAgICByZW1vdmVNb2RlcmF0aW9uOiAoaWQpID0+IHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICBzdGF0ZS5tb2RlcmF0aW9uUXVldWUgPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWUuZmlsdGVyKG0gPT4gbS5pZCAhPT0gaWQpO1xuICAgICAgICB9KSxcbiAgICAgICAgXG4gICAgICAgIC8vIEZsYWcgYWN0aW9uc1xuICAgICAgICBzdWJtaXRGbGFnOiBhc3luYyAoaGFzaHRhZ0lkKSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGUgPSBfZ2V0KCk7XG4gICAgICAgICAgaWYgKCFzdGF0ZS5yZWFzb24udHJpbSgpKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmVycm9yID0gJ1BsZWFzZSBwcm92aWRlIGEgcmVhc29uIGZvciBmbGFnZ2luZyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgc3RhdGUuaXNTdWJtaXR0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0YXRlLmVycm9yID0gbnVsbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gR2V0IHVzZXIgSUQgZnJvbSB1c2VyIHN0b3JlXG4gICAgICAgICAgICBjb25zdCB7IHVzZVVzZXJTdG9yZSB9ID0gYXdhaXQgaW1wb3J0KCdAL2xpYi9zdG9yZXMvdXNlclN0b3JlJyk7XG4gICAgICAgICAgICBjb25zdCB1c2VyU3RvcmUgPSB1c2VVc2VyU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJTdG9yZS51c2VyPy5pZCB8fCAnYW5vbnltb3VzJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZmxhZzogSGFzaHRhZ0ZsYWcgPSB7XG4gICAgICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgICBoYXNodGFnSWQsXG4gICAgICAgICAgICAgIGZsYWdUeXBlOiBzdGF0ZS5mbGFnVHlwZSxcbiAgICAgICAgICAgICAgcmVhc29uOiBzdGF0ZS5yZWFzb24sXG4gICAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3VibWl0IGZsYWcgdG8gQVBJXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2hhc2h0YWdzP2FjdGlvbj1mbGFnJywge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGZsYWcpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc3VibWl0IGZsYWc6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzZXQgZm9ybSBhZnRlciBzdWNjZXNzZnVsIHN1Ym1pc3Npb25cbiAgICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgc3RhdGUuaXNTdWJtaXR0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHN0YXRlLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICBzdGF0ZS5mbGFnVHlwZSA9ICdpbmFwcHJvcHJpYXRlJztcbiAgICAgICAgICAgICAgc3RhdGUucmVhc29uID0gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oJ0ZsYWcgc3VibWl0dGVkJywgeyBmbGFnIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzU3VibWl0dGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBzdWJtaXQgZmxhZyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICBhcHByb3ZlRmxhZzogYXN5bmMgKGZsYWdJZCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEFwcHJvdmUgZmxhZyB2aWEgQVBJXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2hhc2h0YWdzP2FjdGlvbj1hcHByb3ZlJmZsYWdJZD0ke2ZsYWdJZH1gLCB7XG4gICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGFwcHJvdmUgZmxhZzogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZsYWdJbmRleCA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZS5maW5kSW5kZXgobSA9PiBcbiAgICAgICAgICAgICAgICBtLmZsYWdzPy5zb21lKGYgPT4gZi5pZCA9PT0gZmxhZ0lkKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAoZmxhZ0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVyYXRpb24gPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWVbZmxhZ0luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZmxhZyA9IG1vZGVyYXRpb24uZmxhZ3M/LmZpbmQoZiA9PiBmLmlkID09PSBmbGFnSWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZy5zdGF0dXMgPSAnYXBwcm92ZWQnO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGbGFnIGFwcHJvdmVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBhcHByb3ZlIGZsYWcnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcbiAgICAgICAgcmVqZWN0RmxhZzogYXN5bmMgKGZsYWdJZCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFJlamVjdCBmbGFnIHZpYSBBUElcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvaGFzaHRhZ3M/YWN0aW9uPXJlamVjdCZmbGFnSWQ9JHtmbGFnSWR9YCwge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZWplY3QgZmxhZzogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZsYWdJbmRleCA9IHN0YXRlLm1vZGVyYXRpb25RdWV1ZS5maW5kSW5kZXgobSA9PiBcbiAgICAgICAgICAgICAgICBtLmZsYWdzPy5zb21lKGYgPT4gZi5pZCA9PT0gZmxhZ0lkKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAoZmxhZ0luZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVyYXRpb24gPSBzdGF0ZS5tb2RlcmF0aW9uUXVldWVbZmxhZ0luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZmxhZyA9IG1vZGVyYXRpb24uZmxhZ3M/LmZpbmQoZiA9PiBmLmlkID09PSBmbGFnSWQpO1xuICAgICAgICAgICAgICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZy5zdGF0dXMgPSAncmVqZWN0ZWQnO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGbGFnIHJlamVjdGVkIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBzdGF0ZS5lcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byByZWplY3QgZmxhZyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFxuICAgICAgICAvLyBRdWV1ZSBtYW5hZ2VtZW50IGFjdGlvbnNcbiAgICAgICAgbG9hZE1vZGVyYXRpb25RdWV1ZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHNldCgoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIHN0YXRlLmlzTG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIExvYWQgbW9kZXJhdGlvbiBxdWV1ZSBmcm9tIEFQSVxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9oYXNodGFncz9hY3Rpb249bW9kZXJhdGlvbi1xdWV1ZScsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBsb2FkIG1vZGVyYXRpb24gcXVldWU6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbW9kZXJhdGlvblF1ZXVlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXQoKHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGVyYXRpb25RdWV1ZSA9IG1vZGVyYXRpb25RdWV1ZTtcbiAgICAgICAgICAgICAgc3RhdGUuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgc2V0KChzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgICBzdGF0ZS5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgc3RhdGUuZXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBtb2RlcmF0aW9uIHF1ZXVlJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXG4gICAgICAgIHJlZnJlc2hRdWV1ZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgbG9hZE1vZGVyYXRpb25RdWV1ZSB9ID0gX2dldCgpO1xuICAgICAgICAgIGF3YWl0IGxvYWRNb2RlcmF0aW9uUXVldWUoKTtcbiAgICAgICAgfSxcbiAgICAgIH0pKSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ2hhc2h0YWctbW9kZXJhdGlvbi1zdG9yZScsXG4gICAgICAgIHBhcnRpYWxpemU6IChzdGF0ZSkgPT4gKHtcbiAgICAgICAgICBmbGFnVHlwZTogc3RhdGUuZmxhZ1R5cGUsXG4gICAgICAgICAgcmVhc29uOiBzdGF0ZS5yZWFzb24sXG4gICAgICAgIH0pLFxuICAgICAgfVxuICAgICksXG4gICAgeyBuYW1lOiAnaGFzaHRhZy1tb2RlcmF0aW9uLXN0b3JlJyB9XG4gIClcbik7XG5cbi8vIFN0b3JlIHNlbGVjdG9ycyBmb3Igb3B0aW1pemVkIHJlLXJlbmRlcnNcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uTW9kYWwgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IHN0YXRlLmlzT3Blbik7XG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvbkZvcm0gPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKFxuICBzdGF0ZSA9PiAoe1xuICAgIGZsYWdUeXBlOiBzdGF0ZS5mbGFnVHlwZSxcbiAgICByZWFzb246IHN0YXRlLnJlYXNvbixcbiAgICBpc1N1Ym1pdHRpbmc6IHN0YXRlLmlzU3VibWl0dGluZyxcbiAgICBlcnJvcjogc3RhdGUuZXJyb3IsXG4gIH0pXG4pO1xuXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvblF1ZXVlID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiBzdGF0ZS5tb2RlcmF0aW9uUXVldWUpO1xuZXhwb3J0IGNvbnN0IHVzZVNlbGVjdGVkTW9kZXJhdGlvbiA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoc3RhdGUgPT4gc3RhdGUuc2VsZWN0ZWRNb2RlcmF0aW9uKTtcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uTG9hZGluZyA9ICgpID0+IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoc3RhdGUgPT4gc3RhdGUuaXNMb2FkaW5nKTtcbmV4cG9ydCBjb25zdCB1c2VNb2RlcmF0aW9uRXJyb3IgPSAoKSA9PiB1c2VIYXNodGFnTW9kZXJhdGlvblN0b3JlKHN0YXRlID0+IHN0YXRlLmVycm9yKTtcblxuLy8gQWN0aW9uIHNlbGVjdG9yc1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25BY3Rpb25zID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiAoe1xuICBzZXRJc09wZW46IHN0YXRlLnNldElzT3BlbixcbiAgc2V0RmxhZ1R5cGU6IHN0YXRlLnNldEZsYWdUeXBlLFxuICBzZXRSZWFzb246IHN0YXRlLnNldFJlYXNvbixcbiAgcmVzZXRGb3JtOiBzdGF0ZS5yZXNldEZvcm0sXG4gIHNldElzU3VibWl0dGluZzogc3RhdGUuc2V0SXNTdWJtaXR0aW5nLFxuICBzZXRFcnJvcjogc3RhdGUuc2V0RXJyb3IsXG4gIHNldE1vZGVyYXRpb25RdWV1ZTogc3RhdGUuc2V0TW9kZXJhdGlvblF1ZXVlLFxuICBzZXRTZWxlY3RlZE1vZGVyYXRpb246IHN0YXRlLnNldFNlbGVjdGVkTW9kZXJhdGlvbixcbiAgYWRkTW9kZXJhdGlvbjogc3RhdGUuYWRkTW9kZXJhdGlvbixcbiAgdXBkYXRlTW9kZXJhdGlvbjogc3RhdGUudXBkYXRlTW9kZXJhdGlvbixcbiAgcmVtb3ZlTW9kZXJhdGlvbjogc3RhdGUucmVtb3ZlTW9kZXJhdGlvbixcbiAgc3VibWl0RmxhZzogc3RhdGUuc3VibWl0RmxhZyxcbiAgYXBwcm92ZUZsYWc6IHN0YXRlLmFwcHJvdmVGbGFnLFxuICByZWplY3RGbGFnOiBzdGF0ZS5yZWplY3RGbGFnLFxuICBsb2FkTW9kZXJhdGlvblF1ZXVlOiBzdGF0ZS5sb2FkTW9kZXJhdGlvblF1ZXVlLFxuICByZWZyZXNoUXVldWU6IHN0YXRlLnJlZnJlc2hRdWV1ZSxcbn0pKTtcblxuLy8gQ29tcHV0ZWQgc2VsZWN0b3JzXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvblN0YXRzID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiB7XG4gIGNvbnN0IHF1ZXVlID0gc3RhdGUubW9kZXJhdGlvblF1ZXVlO1xuICByZXR1cm4ge1xuICAgIHRvdGFsOiBxdWV1ZS5sZW5ndGgsXG4gICAgcGVuZGluZzogcXVldWUuZmlsdGVyKG0gPT4gbS5zdGF0dXMgPT09ICdwZW5kaW5nJykubGVuZ3RoLFxuICAgIGFwcHJvdmVkOiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ2FwcHJvdmVkJykubGVuZ3RoLFxuICAgIHJlamVjdGVkOiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ3JlamVjdGVkJykubGVuZ3RoLFxuICAgIHVuZGVyUmV2aWV3OiBxdWV1ZS5maWx0ZXIobSA9PiBtLnN0YXR1cyA9PT0gJ3VuZGVyX3JldmlldycpLmxlbmd0aCxcbiAgfTtcbn0pO1xuXG5leHBvcnQgY29uc3QgdXNlUGVuZGluZ0ZsYWdzID0gKCkgPT4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZShzdGF0ZSA9PiBcbiAgc3RhdGUubW9kZXJhdGlvblF1ZXVlLmZsYXRNYXAobSA9PiBtLmZsYWdzLmZpbHRlcihmID0+IGYuc3RhdHVzID09PSAncGVuZGluZycpKVxuKTtcblxuLy8gU3RvcmUgdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgbW9kZXJhdGlvblN0b3JlVXRpbHMgPSB7XG4gIGdldEZsYWdUeXBlTGFiZWw6ICh0eXBlOiBIYXNodGFnRmxhZ1R5cGUpOiBzdHJpbmcgPT4ge1xuICAgIGNvbnN0IGxhYmVscyA9IHtcbiAgICAgIGluYXBwcm9wcmlhdGU6ICdJbmFwcHJvcHJpYXRlIENvbnRlbnQnLFxuICAgICAgc3BhbTogJ1NwYW0nLFxuICAgICAgbWlzbGVhZGluZzogJ01pc2xlYWRpbmcnLFxuICAgICAgaGFyYXNzbWVudDogJ0hhcmFzc21lbnQnLFxuICAgICAgb3RoZXI6ICdPdGhlcicsXG4gICAgfTtcbiAgICByZXR1cm4gbGFiZWxzW3R5cGVdO1xuICB9LFxuICBcbiAgZ2V0U3RhdHVzQ29sb3I6IChzdGF0dXM6IEhhc2h0YWdNb2RlcmF0aW9uU3RhdHVzKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBjb2xvcnMgPSB7XG4gICAgICBwZW5kaW5nOiAneWVsbG93JyxcbiAgICAgIGFwcHJvdmVkOiAnZ3JlZW4nLFxuICAgICAgcmVqZWN0ZWQ6ICdyZWQnLFxuICAgICAgdW5kZXJfcmV2aWV3OiAnYmx1ZScsXG4gICAgfTtcbiAgICByZXR1cm4gY29sb3JzW3N0YXR1c107XG4gIH0sXG4gIFxuICBjYW5TdWJtaXRGbGFnOiAocmVhc29uOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICByZXR1cm4gcmVhc29uLnRyaW0oKS5sZW5ndGggPiAwO1xuICB9LFxufTtcblxuLy8gU3RvcmUgc3Vic2NyaXB0aW9uc1xuZXhwb3J0IGNvbnN0IHVzZU1vZGVyYXRpb25TdWJzY3JpcHRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHN0b3JlID0gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZSgpO1xuICBcbiAgcmV0dXJuIHtcbiAgICBzdWJzY3JpYmU6IChjYWxsYmFjazogKHN0YXRlOiBIYXNodGFnTW9kZXJhdGlvblN0b3JlKSA9PiB2b2lkKSA9PiB7XG4gICAgICByZXR1cm4gdXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZS5zdWJzY3JpYmUoY2FsbGJhY2spO1xuICAgIH0sXG4gICAgZ2V0U3RhdGU6ICgpID0+IHN0b3JlLFxuICB9O1xufTtcblxuLy8gU3RvcmUgZGVidWdnaW5nXG5leHBvcnQgY29uc3QgdXNlTW9kZXJhdGlvbkRlYnVnID0gKCkgPT4ge1xuICBjb25zdCBzdGF0ZSA9IHVzZUhhc2h0YWdNb2RlcmF0aW9uU3RvcmUoKTtcbiAgXG4gIHJldHVybiB7XG4gICAgc3RhdGUsXG4gICAgYWN0aW9uczogdXNlTW9kZXJhdGlvbkFjdGlvbnMoKSxcbiAgICBzdGF0czogdXNlTW9kZXJhdGlvblN0YXRzKCksXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbIm1vZGVyYXRpb25TdG9yZVV0aWxzIiwidXNlSGFzaHRhZ01vZGVyYXRpb25TdG9yZSIsInVzZU1vZGVyYXRpb25BY3Rpb25zIiwidXNlTW9kZXJhdGlvbkRlYnVnIiwidXNlTW9kZXJhdGlvbkVycm9yIiwidXNlTW9kZXJhdGlvbkZvcm0iLCJ1c2VNb2RlcmF0aW9uTG9hZGluZyIsInVzZU1vZGVyYXRpb25Nb2RhbCIsInVzZU1vZGVyYXRpb25RdWV1ZSIsInVzZU1vZGVyYXRpb25TdGF0cyIsInVzZU1vZGVyYXRpb25TdWJzY3JpcHRpb24iLCJ1c2VQZW5kaW5nRmxhZ3MiLCJ1c2VTZWxlY3RlZE1vZGVyYXRpb24iLCJjcmVhdGUiLCJkZXZ0b29scyIsInBlcnNpc3QiLCJpbW1lciIsInNldCIsIl9nZXQiLCJpc09wZW4iLCJmbGFnVHlwZSIsInJlYXNvbiIsImlzU3VibWl0dGluZyIsImVycm9yIiwibW9kZXJhdGlvblF1ZXVlIiwic2VsZWN0ZWRNb2RlcmF0aW9uIiwiaXNMb2FkaW5nIiwic2V0TG9hZGluZyIsImxvYWRpbmciLCJzdGF0ZSIsInNldEVycm9yIiwiY2xlYXJFcnJvciIsInNldElzT3BlbiIsIm9wZW4iLCJzZXRGbGFnVHlwZSIsInR5cGUiLCJzZXRSZWFzb24iLCJyZXNldEZvcm0iLCJzZXRJc1N1Ym1pdHRpbmciLCJzdWJtaXR0aW5nIiwic2V0TW9kZXJhdGlvblF1ZXVlIiwicXVldWUiLCJzZXRTZWxlY3RlZE1vZGVyYXRpb24iLCJtb2RlcmF0aW9uIiwiYWRkTW9kZXJhdGlvbiIsInVuc2hpZnQiLCJ1cGRhdGVNb2RlcmF0aW9uIiwiaWQiLCJ1cGRhdGVzIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJtIiwiZXhpc3RpbmciLCJ1cGRhdGVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZW1vdmVNb2RlcmF0aW9uIiwiZmlsdGVyIiwic3VibWl0RmxhZyIsImhhc2h0YWdJZCIsInRyaW0iLCJ1c2VVc2VyU3RvcmUiLCJ1c2VyU3RvcmUiLCJnZXRTdGF0ZSIsInVzZXJJZCIsInVzZXIiLCJmbGFnIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsInRpbWVzdGFtcCIsInN0YXR1cyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsImxvZ2dlciIsImluZm8iLCJtZXNzYWdlIiwiYXBwcm92ZUZsYWciLCJmbGFnSWQiLCJmbGFnSW5kZXgiLCJmbGFncyIsInNvbWUiLCJmIiwiZmluZCIsInJlamVjdEZsYWciLCJsb2FkTW9kZXJhdGlvblF1ZXVlIiwianNvbiIsInJlZnJlc2hRdWV1ZSIsIm5hbWUiLCJwYXJ0aWFsaXplIiwidG90YWwiLCJsZW5ndGgiLCJwZW5kaW5nIiwiYXBwcm92ZWQiLCJyZWplY3RlZCIsInVuZGVyUmV2aWV3IiwiZmxhdE1hcCIsImdldEZsYWdUeXBlTGFiZWwiLCJsYWJlbHMiLCJpbmFwcHJvcHJpYXRlIiwic3BhbSIsIm1pc2xlYWRpbmciLCJoYXJhc3NtZW50Iiwib3RoZXIiLCJnZXRTdGF0dXNDb2xvciIsImNvbG9ycyIsInVuZGVyX3JldmlldyIsImNhblN1Ym1pdEZsYWciLCJzdG9yZSIsInN1YnNjcmliZSIsImNhbGxiYWNrIiwiYWN0aW9ucyIsInN0YXRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Q0FRQzs7Ozs7Ozs7Ozs7UUF5YVlBO2VBQUFBOztRQXJWQUM7ZUFBQUE7O1FBaVRBQztlQUFBQTs7UUE0RUFDO2VBQUFBOztRQS9FQUM7ZUFBQUE7O1FBWkFDO2VBQUFBOztRQVdBQztlQUFBQTs7UUFaQUM7ZUFBQUE7O1FBVUFDO2VBQUFBOztRQTBCQUM7ZUFBQUE7O1FBNENBQztlQUFBQTs7UUFqQ0FDO2VBQUFBOztRQXBDQUM7ZUFBQUE7Ozt5QkE5WFU7NEJBQ0U7dUJBRUg7d0JBRUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTZFaEIsTUFBTVgsNEJBQTRCWSxJQUFBQSxlQUFNLElBQzdDQyxJQUFBQSxvQkFBUSxFQUNO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