{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/components/shared/LanguageSelector.tsx"],"sourcesContent":["/**\n * @fileoverview Language Selector Component\n * \n * Dropdown component for selecting application language.\n * Integrates with i18n system and app store.\n * \n * @author Choices Platform Team\n * @created 2025-10-24\n * @version 2.0.0\n * @since 1.0.0\n */\n\n'use client';\n\nimport React, { useState } from 'react';\nimport { ChevronDownIcon, GlobeAltIcon } from '@heroicons/react/24/outline';\nimport { LANGUAGE_OPTIONS } from '@/features/profile/utils/profile-constants';\nimport { useI18n } from '@/hooks/useI18n';\nimport { useAppStore } from '@/lib/stores/appStore';\n\ninterface LanguageSelectorProps {\n  className?: string;\n  variant?: 'dropdown' | 'buttons' | 'compact';\n  showLabel?: boolean;\n  showNativeNames?: boolean;\n}\n\nexport default function LanguageSelector({ \n  className = '',\n  variant = 'dropdown',\n  showLabel = true,\n  showNativeNames = true\n}: LanguageSelectorProps) {\n  const { t, currentLanguage, setLanguage, getLanguageDisplayName, isLoading } = useI18n();\n  const { updateSettings } = useAppStore();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleLanguageChange = async (language: string) => {\n    try {\n      await setLanguage(language as any);\n      updateSettings({ language });\n      setIsOpen(false);\n    } catch (error) {\n      console.error('Failed to change language:', error);\n    }\n  };\n\n  if (variant === 'buttons') {\n    return (\n      <div className={`space-y-2 ${className}`} data-testid=\"language-selector\">\n        {showLabel && (\n          <label className=\"block text-sm font-medium text-gray-700\">\n            {t('settings.language')}\n          </label>\n        )}\n        <div className=\"flex flex-wrap gap-2\">\n          {LANGUAGE_OPTIONS.map((lang) => (\n            <button\n              key={lang.code}\n              onClick={() => handleLanguageChange(lang.code)}\n              disabled={isLoading}\n              className={`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                currentLanguage === lang.code\n                  ? 'bg-blue-600 text-white'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              } ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n            >\n              {showNativeNames ? lang.native : lang.name}\n            </button>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (variant === 'compact') {\n    return (\n      <div className={`relative ${className}`} data-testid=\"language-selector\">\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          disabled={isLoading}\n          className=\"flex items-center space-x-2 px-3 py-2 text-sm text-gray-700 hover:text-gray-900 transition-colors\"\n        >\n          <GlobeAltIcon className=\"h-4 w-4\" />\n          <span>{getLanguageDisplayName(currentLanguage)}</span>\n          <ChevronDownIcon className=\"h-4 w-4\" />\n        </button>\n\n        {isOpen && (\n          <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n            <div className=\"py-1\">\n              {LANGUAGE_OPTIONS.map((lang) => (\n                <button\n                  key={lang.code}\n                  onClick={() => handleLanguageChange(lang.code)}\n                  className={`w-full text-left px-4 py-2 text-sm transition-colors ${\n                    currentLanguage === lang.code\n                      ? 'bg-blue-50 text-blue-700'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <span>{showNativeNames ? lang.native : lang.name}</span>\n                    {currentLanguage === lang.code && (\n                      <span className=\"text-blue-600\">✓</span>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Default dropdown variant\n  return (\n    <div className={`space-y-2 ${className}`} data-testid=\"language-selector\">\n      {showLabel && (\n        <label className=\"block text-sm font-medium text-gray-700\">\n          {t('settings.language')}\n        </label>\n      )}\n      <div className=\"relative\">\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          disabled={isLoading}\n          className=\"w-full flex items-center justify-between px-3 py-2 border border-gray-300 rounded-lg bg-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n        >\n          <div className=\"flex items-center space-x-2\">\n            <GlobeAltIcon className=\"h-4 w-4 text-gray-400\" />\n            <span>{getLanguageDisplayName(currentLanguage)}</span>\n          </div>\n          <ChevronDownIcon className=\"h-4 w-4 text-gray-400\" />\n        </button>\n\n        {isOpen && (\n          <div className=\"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg\">\n            <div className=\"py-1\">\n              {LANGUAGE_OPTIONS.map((lang) => (\n                <button\n                  key={lang.code}\n                  onClick={() => handleLanguageChange(lang.code)}\n                  className={`w-full text-left px-4 py-2 text-sm transition-colors ${\n                    currentLanguage === lang.code\n                      ? 'bg-blue-50 text-blue-700'\n                      : 'text-gray-700 hover:bg-gray-50'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <div className=\"font-medium\">\n                        {showNativeNames ? lang.native : lang.name}\n                      </div>\n                      {showNativeNames && (\n                        <div className=\"text-xs text-gray-500\">\n                          {lang.name}\n                        </div>\n                      )}\n                    </div>\n                    {currentLanguage === lang.code && (\n                      <span className=\"text-blue-600\">✓</span>\n                    )}\n                  </div>\n                </button>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["LanguageSelector","className","variant","showLabel","showNativeNames","t","currentLanguage","setLanguage","getLanguageDisplayName","isLoading","useI18n","updateSettings","useAppStore","isOpen","setIsOpen","useState","handleLanguageChange","language","error","console","div","data-testid","label","LANGUAGE_OPTIONS","map","lang","button","onClick","code","disabled","native","name","GlobeAltIcon","span","ChevronDownIcon"],"mappings":"AAAA;;;;;;;;;;CAUC,GAED;;;;;+BAeA;;;eAAwBA;;;;+DAbQ;yBACc;kCACb;yBACT;0BACI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASb,SAASA,iBAAiB,EACvCC,YAAY,EAAE,EACdC,UAAU,UAAU,EACpBC,YAAY,IAAI,EAChBC,kBAAkB,IAAI,EACA;IACtB,MAAM,EAAEC,CAAC,EAAEC,eAAe,EAAEC,WAAW,EAAEC,sBAAsB,EAAEC,SAAS,EAAE,GAAGC,IAAAA,gBAAO;IACtF,MAAM,EAAEC,cAAc,EAAE,GAAGC,IAAAA,qBAAW;IACtC,MAAM,CAACC,QAAQC,UAAU,GAAGC,IAAAA,eAAQ,EAAC;IAErC,MAAMC,uBAAuB,OAAOC;QAClC,IAAI;YACF,MAAMV,YAAYU;YAClBN,eAAe;gBAAEM;YAAS;YAC1BH,UAAU;QACZ,EAAE,OAAOI,OAAO;YACdC,QAAQD,KAAK,CAAC,8BAA8BA;QAC9C;IACF;IAEA,IAAIhB,YAAY,WAAW;QACzB,qBACE,sBAACkB;YAAInB,WAAW,CAAC,UAAU,EAAEA,WAAW;YAAEoB,eAAY;;gBACnDlB,2BACC,qBAACmB;oBAAMrB,WAAU;8BACdI,EAAE;;8BAGP,qBAACe;oBAAInB,WAAU;8BACZsB,kCAAgB,CAACC,GAAG,CAAC,CAACC,qBACrB,qBAACC;4BAECC,SAAS,IAAMX,qBAAqBS,KAAKG,IAAI;4BAC7CC,UAAUpB;4BACVR,WAAW,CAAC,2DAA2D,EACrEK,oBAAoBmB,KAAKG,IAAI,GACzB,2BACA,8CACL,CAAC,EAAEnB,YAAY,kCAAkC,IAAI;sCAErDL,kBAAkBqB,KAAKK,MAAM,GAAGL,KAAKM,IAAI;2BATrCN,KAAKG,IAAI;;;;IAe1B;IAEA,IAAI1B,YAAY,WAAW;QACzB,qBACE,sBAACkB;YAAInB,WAAW,CAAC,SAAS,EAAEA,WAAW;YAAEoB,eAAY;;8BACnD,sBAACK;oBACCC,SAAS,IAAMb,UAAU,CAACD;oBAC1BgB,UAAUpB;oBACVR,WAAU;;sCAEV,qBAAC+B,qBAAY;4BAAC/B,WAAU;;sCACxB,qBAACgC;sCAAMzB,uBAAuBF;;sCAC9B,qBAAC4B,wBAAe;4BAACjC,WAAU;;;;gBAG5BY,wBACC,qBAACO;oBAAInB,WAAU;8BACb,cAAA,qBAACmB;wBAAInB,WAAU;kCACZsB,kCAAgB,CAACC,GAAG,CAAC,CAACC,qBACrB,qBAACC;gCAECC,SAAS,IAAMX,qBAAqBS,KAAKG,IAAI;gCAC7C3B,WAAW,CAAC,qDAAqD,EAC/DK,oBAAoBmB,KAAKG,IAAI,GACzB,6BACA,kCACJ;0CAEF,cAAA,sBAACR;oCAAInB,WAAU;;sDACb,qBAACgC;sDAAM7B,kBAAkBqB,KAAKK,MAAM,GAAGL,KAAKM,IAAI;;wCAC/CzB,oBAAoBmB,KAAKG,IAAI,kBAC5B,qBAACK;4CAAKhC,WAAU;sDAAgB;;;;+BAX/BwB,KAAKG,IAAI;;;;;IAqB9B;IAEA,2BAA2B;IAC3B,qBACE,sBAACR;QAAInB,WAAW,CAAC,UAAU,EAAEA,WAAW;QAAEoB,eAAY;;YACnDlB,2BACC,qBAACmB;gBAAMrB,WAAU;0BACdI,EAAE;;0BAGP,sBAACe;gBAAInB,WAAU;;kCACb,sBAACyB;wBACCC,SAAS,IAAMb,UAAU,CAACD;wBAC1BgB,UAAUpB;wBACVR,WAAU;;0CAEV,sBAACmB;gCAAInB,WAAU;;kDACb,qBAAC+B,qBAAY;wCAAC/B,WAAU;;kDACxB,qBAACgC;kDAAMzB,uBAAuBF;;;;0CAEhC,qBAAC4B,wBAAe;gCAACjC,WAAU;;;;oBAG5BY,wBACC,qBAACO;wBAAInB,WAAU;kCACb,cAAA,qBAACmB;4BAAInB,WAAU;sCACZsB,kCAAgB,CAACC,GAAG,CAAC,CAACC,qBACrB,qBAACC;oCAECC,SAAS,IAAMX,qBAAqBS,KAAKG,IAAI;oCAC7C3B,WAAW,CAAC,qDAAqD,EAC/DK,oBAAoBmB,KAAKG,IAAI,GACzB,6BACA,kCACJ;8CAEF,cAAA,sBAACR;wCAAInB,WAAU;;0DACb,sBAACmB;;kEACC,qBAACA;wDAAInB,WAAU;kEACZG,kBAAkBqB,KAAKK,MAAM,GAAGL,KAAKM,IAAI;;oDAE3C3B,iCACC,qBAACgB;wDAAInB,WAAU;kEACZwB,KAAKM,IAAI;;;;4CAIfzB,oBAAoBmB,KAAKG,IAAI,kBAC5B,qBAACK;gDAAKhC,WAAU;0DAAgB;;;;mCApB/BwB,KAAKG,IAAI;;;;;;;AA+BhC"}