{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/vote/vote-processor.test.ts"],"sourcesContent":["/**\n * VoteProcessor Unit Tests\n * \n * Comprehensive unit tests for vote processing and database operations\n * \n * Created: January 15, 2025\n * Updated: January 21, 2025\n */\n\nimport { describe, it, expect, beforeEach, jest } from '@jest/globals';\nimport { VoteProcessor } from '@/lib/vote/processor';\nimport type { \n  VoteData, \n  PollData, \n  VoteSubmissionResult \n} from '@/lib/vote/types';\n\n// Mock the logger\njest.mock('@/lib/utils/logger', () => ({\n  devLog: jest.fn()\n}));\n\n// Import V2 test setup\nimport { getMS } from '../../setup';\nconst mockSetup = getMS();\nconst { when, client: mockSupabaseClient, getMetrics } = mockSetup;\n\n// Mock the server-only module\njest.mock('@/utils/supabase/server', () => ({\n  getSupabaseServerClient: jest.fn(() => Promise.resolve(mockSupabaseClient))\n}));\n\ndescribe('VoteProcessor', () => {\n  let processor: VoteProcessor;\n  let mockPoll: PollData;\n  let mockVoteData: VoteData;\n\n  beforeEach(() => {\n    // Reset all mocks before each test\n    jest.clearAllMocks();\n    processor = new VoteProcessor(() => Promise.resolve(mockSupabaseClient as any));\n    \n    mockPoll = {\n      id: 'test-poll-123',\n      title: 'Test Poll',\n      description: 'A test poll for unit testing',\n      votingMethod: 'single',\n      options: [\n        { id: 'option-1', text: 'Option 1' },\n        { id: 'option-2', text: 'Option 2' },\n        { id: 'option-3', text: 'Option 3' }\n      ],\n      status: 'active',\n      startTime: new Date('2025-01-01T00:00:00Z'),\n      endTime: new Date('2025-12-31T23:59:59Z'),\n      createdBy: 'admin-user',\n      createdAt: new Date('2025-01-01T00:00:00Z'),\n      updatedAt: new Date('2025-01-01T00:00:00Z'),\n      votingConfig: {\n        allowMultipleVotes: false,\n        maxChoices: 1,\n        requireVerification: false,\n        quadraticCredits: 100,\n        rangeMin: 0,\n        rangeMax: 10\n      }\n    };\n\n    mockVoteData = {\n      id: 'vote-123',\n      pollId: 'test-poll-123',\n      userId: 'user-456',\n      choice: 0,\n      privacyLevel: 'public',\n      timestamp: new Date(),\n      auditReceipt: 'audit-123'\n    };\n  });\n\n  describe('Vote Processing', () => {\n    it('should process valid vote successfully', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n\n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(true);\n      expect(result.voteId).toBeDefined();\n      expect(result.error).toBeUndefined();\n\n      // Verify metrics\n      const metrics = getMetrics();\n      expect(metrics.byTable.polls?.single).toBe(1);\n      expect(metrics.byTable.votes?.list).toBeGreaterThanOrEqual(1);\n    });\n\n    it('should handle Supabase client unavailable', async () => {\n      const nullClientFactory = jest.fn(() => Promise.resolve(null as any));\n      const testProcessor = new VoteProcessor(nullClientFactory);\n\n      const result = await testProcessor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toContain('Failed to process vote');\n    });\n\n    it('should handle poll not found', async () => {\n      const pollId = 'test-poll-123';\n      \n      // Mock poll not found - the VoteProcessor uses .single() which returns null when no poll is found\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(null);\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('Poll not found');\n    });\n\n    it('should handle invalid vote data', async () => {\n      const pollId = 'test-poll-123';\n      \n      // Mock successful poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n\n      const invalidVoteData = Object.assign({}, mockVoteData, { choice: -1 });\n      const result = await processor.processVote(invalidVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('Invalid vote data');\n    });\n\n    it('should handle user cannot vote', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock successful poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock existing vote check (user already voted)\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle({ id: 'existing-vote' });\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('User cannot vote on this poll');\n    });\n\n    it('should handle database insertion error', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n\n      // Mock successful poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock insertion error\n      when().table('votes').op('insert').returnsError('Database error');\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('Failed to store vote');\n    });\n  });\n\n  describe('Vote Data Validation', () => {\n    it('should validate single choice vote data', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const validVote = Object.assign({}, mockVoteData, { choice: 0 });\n      const result = await processor.processVote(validVote);\n      \n      expect(result.success).toBe(true);\n    });\n\n    it('should validate approval vote data', async () => {\n      const approvalPoll = Object.assign({}, mockPoll, { votingMethod: 'approval' as const });\n      const { choice, ...approvalVoteData } = mockVoteData;\n      const approvalVote = Object.assign({}, approvalVoteData, { \n        approvals: [0, 1]\n      });\n\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').eq('id', pollId).returnsSingle(approvalPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(approvalVote);\n      \n      expect(result.success).toBe(true);\n    });\n\n    it('should validate ranked vote data', async () => {\n      const rankedPoll = Object.assign({}, mockPoll, { votingMethod: 'ranked' as const });\n      const { choice, ...rankedVoteData } = mockVoteData;\n      const rankedVote = Object.assign({}, rankedVoteData, { \n        rankings: [0, 1, 2]\n      });\n\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').eq('id', pollId).returnsSingle(rankedPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(rankedVote);\n      \n      expect(result.success).toBe(true);\n    });\n\n    it('should validate quadratic vote data', async () => {\n      const quadraticPoll = Object.assign({}, mockPoll, { votingMethod: 'quadratic' as const });\n      const { choice, ...quadraticVoteData } = mockVoteData;\n      const quadraticVote = Object.assign({}, quadraticVoteData, { \n        allocations: { '0': 5, '1': 3 }\n      });\n\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').eq('id', pollId).returnsSingle(quadraticPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(quadraticVote);\n      \n      expect(result.success).toBe(true);\n    });\n\n    it('should validate range vote data', async () => {\n      const rangePoll = Object.assign({}, mockPoll, { votingMethod: 'range' as const });\n      const { choice, ...rangeVoteData } = mockVoteData;\n      const rangeVote = Object.assign({}, rangeVoteData, { \n        ratings: { '0': 8, '1': 6, '2': 4 }\n      });\n\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').eq('id', pollId).returnsSingle(rangePoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(rangeVote);\n      \n      expect(result.success).toBe(true);\n    });\n\n    it('should reject invalid vote data', async () => {\n      const pollId = 'test-poll-123';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n\n      const invalidVote = Object.assign({}, mockVoteData, { choice: 5 }); // Invalid choice\n      const result = await processor.processVote(invalidVote);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('Invalid vote data');\n    });\n  });\n\n  describe('Rate Limiting', () => {\n    it('should allow vote when user is not rate limited', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(true);\n    });\n\n    it('should reject vote when user is rate limited', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      // Process a single vote (rate limiting is handled by the processor internally)\n      const result = await processor.processVote(mockVoteData);\n      \n      // Should succeed as this is a single vote\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('Database Operations', () => {\n    it('should create correct vote record structure', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(mockVoteData);\n\n      expect(result.success).toBe(true);\n      expect(result.voteId).toBeDefined();\n    });\n\n    it('should update poll vote count correctly', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const result = await processor.processVote(mockVoteData);\n\n      expect(result.success).toBe(true);\n      expect(result.voteId).toBeDefined();\n    });\n\n    it('should handle vote count update error gracefully', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update error\n      when().table('polls').op('update').eq('id', pollId).returnsError('Update error');\n\n      const result = await processor.processVote(mockVoteData);\n      \n      // Should still succeed as vote was recorded\n      expect(result.success).toBe(true);\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle processing errors gracefully', async () => {\n      const pollId = 'test-poll-123';\n      \n      // Mock poll lookup to throw error\n      when().table('polls').op('select').eq('id', pollId).returnsError('Database connection error');\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('Poll not found');\n    });\n\n    it('should handle validation errors gracefully', async () => {\n      const pollId = 'test-poll-123';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n\n      const invalidVote = Object.assign({}, mockVoteData, { choice: -1 });\n      const result = await processor.processVote(invalidVote);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('Invalid vote data');\n    });\n\n    it('should handle canUserVote errors gracefully', async () => {\n      const pollId = 'test-poll-123';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock canUserVote method to return false (simulating an error condition)\n      jest.spyOn(processor, 'canUserVote').mockResolvedValue(false);\n\n      const result = await processor.processVote(mockVoteData);\n      \n      expect(result.success).toBe(false);\n      expect(result.error).toBe('User cannot vote on this poll');\n    });\n  });\n\n  describe('Performance', () => {\n    it('should process votes efficiently', async () => {\n      const pollId = 'test-poll-123';\n      const userId = 'user-456';\n      \n      // Mock poll lookup\n      when().table('polls').op('select').select('*').eq('id', pollId).returnsSingle(mockPoll);\n      // Mock no existing vote check\n      when().table('votes').op('select').select('id').eq('poll_id', pollId).eq('user_id', userId).returnsSingle(null);\n      // Mock vote insertion\n      when().table('votes').op('insert').returnsList([{ id: 'vote-123' }]);\n      // Mock poll update\n      when().table('polls').op('update').eq('id', pollId).returnsList([{ id: pollId, total_votes: 1 }]);\n\n      const startTime = Date.now();\n      const result = await processor.processVote(mockVoteData);\n      const endTime = Date.now();\n      const duration = endTime - startTime;\n      \n      expect(result.success).toBe(true);\n      expect(duration).toBeLessThan(100); // Should complete in under 100ms\n    });\n  });\n});"],"names":["jest","mock","devLog","fn","mockSetup","getMS","when","client","mockSupabaseClient","getMetrics","getSupabaseServerClient","Promise","resolve","describe","processor","mockPoll","mockVoteData","beforeEach","clearAllMocks","VoteProcessor","id","title","description","votingMethod","options","text","status","startTime","Date","endTime","createdBy","createdAt","updatedAt","votingConfig","allowMultipleVotes","maxChoices","requireVerification","quadraticCredits","rangeMin","rangeMax","pollId","userId","choice","privacyLevel","timestamp","auditReceipt","it","table","op","select","eq","returnsSingle","returnsList","total_votes","result","processVote","expect","success","toBe","voteId","toBeDefined","error","toBeUndefined","metrics","byTable","polls","single","votes","list","toBeGreaterThanOrEqual","nullClientFactory","testProcessor","toContain","invalidVoteData","Object","assign","returnsError","validVote","approvalPoll","approvalVoteData","approvalVote","approvals","rankedPoll","rankedVoteData","rankedVote","rankings","quadraticPoll","quadraticVoteData","quadraticVote","allocations","rangePoll","rangeVoteData","rangeVote","ratings","invalidVote","spyOn","mockResolvedValue","now","duration","toBeLessThan"],"mappings":"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"}