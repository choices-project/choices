{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/setup/supabase-mock.ts"],"sourcesContent":["/**\n * Supabase Mock Setup for Jest Tests\n * \n * Provides comprehensive mocking for Supabase client to avoid URL validation issues\n * \n * Created: January 19, 2025\n * Status: âœ… PRODUCTION READY\n */\n\nimport { jest } from '@jest/globals';\n\n// Mock environment variables\nprocess.env.NEXT_PUBLIC_SUPABASE_URL = 'https://test.supabase.co';\nprocess.env.NEXT_PUBLIC_SUPABASE_ANON_KEY = 'test-anon-key';\n\n// Mock Supabase client\njest.mock('@/utils/supabase/client', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn(() => Promise.resolve({ data: null, error: null })),\n          order: jest.fn(() => ({\n            limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n          }))\n        })),\n        order: jest.fn(() => ({\n          limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n        })),\n        limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n      })),\n      insert: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      update: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      delete: jest.fn(() => Promise.resolve({ data: null, error: null }))\n    })),\n    rpc: jest.fn(() => Promise.resolve({ data: null, error: null }))\n  }))\n}));\n\n// Mock Supabase server client\njest.mock('@/utils/supabase/server', () => ({\n  createServerClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn(() => Promise.resolve({ data: null, error: null })),\n          order: jest.fn(() => ({\n            limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n          }))\n        })),\n        order: jest.fn(() => ({\n          limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n        })),\n        limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n      })),\n      insert: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      update: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      delete: jest.fn(() => Promise.resolve({ data: null, error: null }))\n    })),\n    rpc: jest.fn(() => Promise.resolve({ data: null, error: null }))\n  }))\n}));\n\n// Mock Supabase auth\njest.mock('@supabase/supabase-js', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn(() => Promise.resolve({ data: null, error: null })),\n          order: jest.fn(() => ({\n            limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n          }))\n        })),\n        order: jest.fn(() => ({\n          limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n        })),\n        limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n      })),\n      insert: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      update: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      delete: jest.fn(() => Promise.resolve({ data: null, error: null }))\n    })),\n    rpc: jest.fn(() => Promise.resolve({ data: null, error: null })),\n    auth: {\n      getUser: jest.fn(() => Promise.resolve({ data: { user: null }, error: null })),\n      signIn: jest.fn(() => Promise.resolve({ data: { user: null }, error: null })),\n      signOut: jest.fn(() => Promise.resolve({ error: null }))\n    }\n  }))\n}));\n"],"names":["process","env","NEXT_PUBLIC_SUPABASE_URL","NEXT_PUBLIC_SUPABASE_ANON_KEY","jest","mock","createClient","fn","from","select","eq","single","Promise","resolve","data","error","order","limit","insert","update","delete","rpc","createServerClient","auth","getUser","user","signIn","signOut"],"mappings":"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"}