6dafa8a00eadd750613fb9545b14d95f
/**
 * Vote Engine Unit Tests
 * 
 * Comprehensive tests for the voting engine and all voting strategies
 * 
 * Created: September 15, 2025
 * Updated: September 15, 2025
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _engine = require("../../../../lib/vote/engine");
// Mock the logger
_globals.jest.mock('@/lib/utils/logger', ()=>({
        devLog: _globals.jest.fn()
    }));
(0, _globals.describe)('VoteEngine', ()=>{
    let engine;
    let mockPoll;
    let mockVoteRequest;
    (0, _globals.beforeEach)(()=>{
        engine = new _engine.VoteEngine();
        mockPoll = {
            id: 'poll-123',
            title: 'Test Poll',
            description: 'A test poll for unit testing',
            votingMethod: 'single',
            options: [
                {
                    id: 'option-1',
                    text: 'Option 1'
                },
                {
                    id: 'option-2',
                    text: 'Option 2'
                },
                {
                    id: 'option-3',
                    text: 'Option 3'
                }
            ],
            status: 'active',
            startTime: new Date('2025-01-01T00:00:00Z'),
            endTime: new Date('2025-12-31T23:59:59Z'),
            createdBy: 'user-123',
            createdAt: new Date('2025-01-01T00:00:00Z'),
            updatedAt: new Date('2025-01-01T00:00:00Z'),
            votingConfig: {
                allowMultipleVotes: false,
                maxChoices: 1,
                quadraticCredits: 100,
                rangeMin: 0,
                rangeMax: 10
            }
        };
        mockVoteRequest = {
            pollId: 'poll-123',
            userId: 'user-456',
            voteData: {
                choice: 0
            },
            privacyLevel: 'public'
        };
    });
    (0, _globals.describe)('Configuration', ()=>{
        (0, _globals.it)('should initialize with default configuration', ()=>{
            const config = engine.getConfig();
            (0, _globals.expect)(config.maxVotesPerPoll).toBe(10000);
            (0, _globals.expect)(config.allowMultipleVotes).toBe(false);
            (0, _globals.expect)(config.requireAuthentication).toBe(true);
            (0, _globals.expect)(config.minTrustTier).toBe('T0');
            (0, _globals.expect)(config.rateLimitPerUser).toBe(10);
            (0, _globals.expect)(config.rateLimitWindowMs).toBe(60000);
        });
        (0, _globals.it)('should accept custom configuration', ()=>{
            const customConfig = {
                maxVotesPerPoll: 5000,
                allowMultipleVotes: true,
                requireAuthentication: false
            };
            const customEngine = new _engine.VoteEngine(customConfig);
            const config = customEngine.getConfig();
            (0, _globals.expect)(config.maxVotesPerPoll).toBe(5000);
            (0, _globals.expect)(config.allowMultipleVotes).toBe(true);
            (0, _globals.expect)(config.requireAuthentication).toBe(false);
        });
        (0, _globals.it)('should update configuration', ()=>{
            engine.updateConfig({
                maxVotesPerPoll: 2000
            });
            const config = engine.getConfig();
            (0, _globals.expect)(config.maxVotesPerPoll).toBe(2000);
        });
    });
    (0, _globals.describe)('Vote Validation', ()=>{
        (0, _globals.it)('should validate a valid single-choice vote', async ()=>{
            const validation = await engine.validateVote(mockVoteRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(true);
            (0, _globals.expect)(validation.requiresAuthentication).toBe(true);
            (0, _globals.expect)(validation.requiresTokens).toBe(false);
        });
        (0, _globals.it)('should reject vote with missing poll ID', async ()=>{
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                pollId: ''
            });
            const validation = await engine.validateVote(invalidRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBe('Missing required vote data');
        });
        (0, _globals.it)('should reject vote with missing vote data', async ()=>{
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                voteData: {}
            });
            const validation = await engine.validateVote(invalidRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBe('Choice is required for single-choice voting');
        });
        (0, _globals.it)('should reject vote for inactive poll', async ()=>{
            const inactivePoll = Object.assign({}, mockPoll, {
                status: 'closed'
            });
            const validation = await engine.validateVote(mockVoteRequest, inactivePoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBe('Poll not found or not active');
        });
        (0, _globals.it)('should reject vote for ended poll', async ()=>{
            const endedPoll = Object.assign({}, mockPoll, {
                endTime: new Date('2024-12-31T23:59:59Z')
            });
            const validation = await engine.validateVote(mockVoteRequest, endedPoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBe('Poll has ended');
        });
        (0, _globals.it)('should reject vote without authentication when required', async ()=>{
            const unauthenticatedRequest = Object.assign({}, mockVoteRequest);
            delete unauthenticatedRequest.userId;
            const validation = await engine.validateVote(unauthenticatedRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBe('Authentication required to vote');
            (0, _globals.expect)(validation.requiresAuthentication).toBe(true);
        });
        (0, _globals.it)('should allow vote without authentication when not required', async ()=>{
            engine.updateConfig({
                requireAuthentication: false
            });
            const unauthenticatedRequest = Object.assign({}, mockVoteRequest);
            delete unauthenticatedRequest.userId;
            const validation = await engine.validateVote(unauthenticatedRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(true);
        });
        (0, _globals.it)('should reject vote with invalid option', async ()=>{
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                voteData: {
                    choice: 999
                }
            });
            const validation = await engine.validateVote(invalidRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBe('Choice must be between 0 and 2');
        });
    });
    (0, _globals.describe)('Vote Processing', ()=>{
        (0, _globals.it)('should process a valid vote successfully', async ()=>{
            const response = await engine.processVote(mockVoteRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(true);
            (0, _globals.expect)(response.pollId).toBe('poll-123');
            (0, _globals.expect)(response.voteId).toBeDefined();
            (0, _globals.expect)(response.auditReceipt).toBeDefined();
            (0, _globals.expect)(response.privacyLevel).toBe('public');
            (0, _globals.expect)(response.responseTime).toBeGreaterThanOrEqual(0);
        });
        (0, _globals.it)('should reject invalid vote during processing', async ()=>{
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                voteData: {}
            });
            const response = await engine.processVote(invalidRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.message).toBe('Choice is required for single-choice voting');
            (0, _globals.expect)(response.voteId).toBeUndefined();
        });
        (0, _globals.it)('should handle processing errors gracefully', async ()=>{
            // Test error handling with invalid data
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                voteData: {}
            });
            const response = await engine.processVote(invalidRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.message).toBeDefined();
        });
    });
    (0, _globals.describe)('Results Calculation', ()=>{
        (0, _globals.it)('should calculate results for single-choice voting', async ()=>{
            const mockVotes = [
                {
                    id: 'vote-1',
                    pollId: 'poll-123',
                    userId: 'user-1',
                    choice: 0,
                    privacyLevel: 'public',
                    timestamp: new Date(),
                    auditReceipt: 'receipt-1'
                },
                {
                    id: 'vote-2',
                    pollId: 'poll-123',
                    userId: 'user-2',
                    choice: 0,
                    privacyLevel: 'public',
                    timestamp: new Date(),
                    auditReceipt: 'receipt-2'
                },
                {
                    id: 'vote-3',
                    pollId: 'poll-123',
                    userId: 'user-3',
                    choice: 1,
                    privacyLevel: 'public',
                    timestamp: new Date(),
                    auditReceipt: 'receipt-3'
                }
            ];
            const results = await engine.calculateResults(mockPoll, mockVotes);
            (0, _globals.expect)(results.pollId).toBe('poll-123');
            (0, _globals.expect)(results.totalVotes).toBe(3);
            (0, _globals.expect)(results.votingMethod).toBe('single');
            (0, _globals.expect)(results.results).toBeDefined();
            (0, _globals.expect)(typeof results.results).toBe('object');
            // Check option votes using the correct structure
            (0, _globals.expect)(results.results.optionVotes['0']).toBe(2); // Option 1 (index 0)
            (0, _globals.expect)(results.results.optionVotes['1']).toBe(1); // Option 2 (index 1)
            (0, _globals.expect)(results.results.optionVotes['2']).toBe(0); // Option 3 (index 2)
            (0, _globals.expect)(results.results.optionPercentages['0']).toBeCloseTo(66.67, 1);
            (0, _globals.expect)(results.results.optionPercentages['1']).toBeCloseTo(33.33, 1);
            (0, _globals.expect)(results.results.optionPercentages['2']).toBe(0);
        });
        (0, _globals.it)('should handle empty votes array', async ()=>{
            const results = await engine.calculateResults(mockPoll, []);
            (0, _globals.expect)(results.totalVotes).toBe(0);
            (0, _globals.expect)(Object.keys(results.results.optionVotes)).toHaveLength(3);
            Object.values(results.results.optionVotes).forEach((votes)=>{
                (0, _globals.expect)(votes).toBe(0);
            });
            Object.values(results.results.optionPercentages).forEach((percentage)=>{
                (0, _globals.expect)(percentage).toBe(0);
            });
        });
    });
    (0, _globals.describe)('Voting Method Configuration', ()=>{
        (0, _globals.it)('should get configuration for single-choice voting', ()=>{
            const config = engine.getVotingMethodConfig('single');
            (0, _globals.expect)(config.name).toBe('Single Choice Voting');
            (0, _globals.expect)(config.allowsMultipleSelections).toBe(false);
            (0, _globals.expect)(config.minOptions).toBe(2);
        });
        (0, _globals.it)('should get configuration for approval voting', ()=>{
            const config = engine.getVotingMethodConfig('approval');
            (0, _globals.expect)(config.name).toBe('Approval Voting');
            (0, _globals.expect)(config.allowsMultipleSelections).toBe(true);
            (0, _globals.expect)(config.minOptions).toBe(2);
        });
        (0, _globals.it)('should get configuration for ranked voting', ()=>{
            const config = engine.getVotingMethodConfig('ranked');
            (0, _globals.expect)(config.name).toBe('Ranked Choice Voting');
            (0, _globals.expect)(config.resultType).toBe('instant_runoff');
        });
        (0, _globals.it)('should get configuration for quadratic voting', ()=>{
            const config = engine.getVotingMethodConfig('quadratic');
            (0, _globals.expect)(config.name).toBe('Quadratic Voting');
            (0, _globals.expect)(config.allowsMultipleSelections).toBe(true);
            (0, _globals.expect)(config.resultType).toBe('highest_score');
        });
        (0, _globals.it)('should get configuration for range voting', ()=>{
            const config = engine.getVotingMethodConfig('range');
            (0, _globals.expect)(config.name).toBe('Range Voting');
            (0, _globals.expect)(config.allowsMultipleSelections).toBe(true);
            (0, _globals.expect)(config.resultType).toBe('highest_average');
        });
        (0, _globals.it)('should throw error for unsupported voting method', ()=>{
            (0, _globals.expect)(()=>{
                engine.getVotingMethodConfig('unsupported');
            }).toThrow('Unsupported voting method: unsupported');
        });
    });
    (0, _globals.describe)('Error Handling', ()=>{
        (0, _globals.it)('should handle validation errors gracefully', async ()=>{
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                pollId: ''
            });
            const validation = await engine.validateVote(invalidRequest, mockPoll);
            (0, _globals.expect)(validation.isValid).toBe(false);
            (0, _globals.expect)(validation.error).toBeDefined();
        });
        (0, _globals.it)('should handle processing errors gracefully', async ()=>{
            const invalidRequest = Object.assign({}, mockVoteRequest, {
                voteData: {}
            });
            const response = await engine.processVote(invalidRequest, mockPoll);
            (0, _globals.expect)(response.success).toBe(false);
            (0, _globals.expect)(response.message).toBeDefined();
        });
        (0, _globals.it)('should handle results calculation errors gracefully', async ()=>{
            // Test with malformed vote data
            const malformedVotes = [
                {
                    id: 'vote-1',
                    pollId: 'poll-123',
                    userId: 'user-1',
                    choice: 999,
                    privacyLevel: 'public',
                    timestamp: new Date(),
                    auditReceipt: 'receipt-1'
                }
            ];
            const results = await engine.calculateResults(mockPoll, malformedVotes);
            (0, _globals.expect)(results.totalVotes).toBe(0);
            (0, _globals.expect)(results.results).toBeDefined();
            (0, _globals.expect)(typeof results.results).toBe('object');
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvdm90ZS9lbmdpbmUudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFZvdGUgRW5naW5lIFVuaXQgVGVzdHNcbiAqIFxuICogQ29tcHJlaGVuc2l2ZSB0ZXN0cyBmb3IgdGhlIHZvdGluZyBlbmdpbmUgYW5kIGFsbCB2b3Rpbmcgc3RyYXRlZ2llc1xuICogXG4gKiBDcmVhdGVkOiBTZXB0ZW1iZXIgMTUsIDIwMjVcbiAqIFVwZGF0ZWQ6IFNlcHRlbWJlciAxNSwgMjAyNVxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgeyBWb3RlRW5naW5lLCB0eXBlIFZvdGVFbmdpbmVDb25maWcgfSBmcm9tICdAL2xpYi92b3RlL2VuZ2luZSc7XG5pbXBvcnQgdHlwZSB7IFZvdGVSZXF1ZXN0LCBQb2xsRGF0YSwgVm90ZURhdGEsIFZvdGluZ01ldGhvZCB9IGZyb20gJ0AvbGliL3ZvdGUvdHlwZXMnO1xuXG4vLyBJbXBvcnQgVjIgdGVzdCBzZXR1cFxuaW1wb3J0IHsgd2hlbiwgZXhwZWN0UXVlcnlTdGF0ZSB9IGZyb20gJy4uLy4uL2hlbHBlcnMvc3VwYWJhc2Utd2hlbic7XG5cbi8vIE1vY2sgdGhlIGxvZ2dlclxuamVzdC5tb2NrKCdAL2xpYi91dGlscy9sb2dnZXInLCAoKSA9PiAoe1xuICBkZXZMb2c6IGplc3QuZm4oKVxufSkpO1xuXG5kZXNjcmliZSgnVm90ZUVuZ2luZScsICgpID0+IHtcbiAgbGV0IGVuZ2luZTogVm90ZUVuZ2luZTtcbiAgbGV0IG1vY2tQb2xsOiBQb2xsRGF0YTtcbiAgbGV0IG1vY2tWb3RlUmVxdWVzdDogVm90ZVJlcXVlc3Q7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZW5naW5lID0gbmV3IFZvdGVFbmdpbmUoKTtcbiAgICBcbiAgICBtb2NrUG9sbCA9IHtcbiAgICAgIGlkOiAncG9sbC0xMjMnLFxuICAgICAgdGl0bGU6ICdUZXN0IFBvbGwnLFxuICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgcG9sbCBmb3IgdW5pdCB0ZXN0aW5nJyxcbiAgICAgIHZvdGluZ01ldGhvZDogJ3NpbmdsZScsXG4gICAgICBvcHRpb25zOiBbXG4gICAgICAgIHsgaWQ6ICdvcHRpb24tMScsIHRleHQ6ICdPcHRpb24gMScgfSxcbiAgICAgICAgeyBpZDogJ29wdGlvbi0yJywgdGV4dDogJ09wdGlvbiAyJyB9LFxuICAgICAgICB7IGlkOiAnb3B0aW9uLTMnLCB0ZXh0OiAnT3B0aW9uIDMnIH1cbiAgICAgIF0sXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnLFxuICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZSgnMjAyNS0wMS0wMVQwMDowMDowMFonKSxcbiAgICAgIGVuZFRpbWU6IG5ldyBEYXRlKCcyMDI1LTEyLTMxVDIzOjU5OjU5WicpLFxuICAgICAgY3JlYXRlZEJ5OiAndXNlci0xMjMnLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgnMjAyNS0wMS0wMVQwMDowMDowMFonKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoJzIwMjUtMDEtMDFUMDA6MDA6MDBaJyksXG4gICAgICB2b3RpbmdDb25maWc6IHtcbiAgICAgICAgYWxsb3dNdWx0aXBsZVZvdGVzOiBmYWxzZSxcbiAgICAgICAgbWF4Q2hvaWNlczogMSxcbiAgICAgICAgcXVhZHJhdGljQ3JlZGl0czogMTAwLFxuICAgICAgICByYW5nZU1pbjogMCxcbiAgICAgICAgcmFuZ2VNYXg6IDEwXG4gICAgICB9XG4gICAgfTtcblxuICAgIG1vY2tWb3RlUmVxdWVzdCA9IHtcbiAgICAgIHBvbGxJZDogJ3BvbGwtMTIzJyxcbiAgICAgIHVzZXJJZDogJ3VzZXItNDU2JyxcbiAgICAgIHZvdGVEYXRhOiB7IGNob2ljZTogMCB9LFxuICAgICAgcHJpdmFjeUxldmVsOiAncHVibGljJ1xuICAgIH07XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGVuZ2luZS5nZXRDb25maWcoKTtcbiAgICAgIGV4cGVjdChjb25maWcubWF4Vm90ZXNQZXJQb2xsKS50b0JlKDEwMDAwKTtcbiAgICAgIGV4cGVjdChjb25maWcuYWxsb3dNdWx0aXBsZVZvdGVzKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChjb25maWcucmVxdWlyZUF1dGhlbnRpY2F0aW9uKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5taW5UcnVzdFRpZXIpLnRvQmUoJ1QwJyk7XG4gICAgICBleHBlY3QoY29uZmlnLnJhdGVMaW1pdFBlclVzZXIpLnRvQmUoMTApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yYXRlTGltaXRXaW5kb3dNcykudG9CZSg2MDAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGFjY2VwdCBjdXN0b20gY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IGN1c3RvbUNvbmZpZzogUGFydGlhbDxWb3RlRW5naW5lQ29uZmlnPiA9IHtcbiAgICAgICAgbWF4Vm90ZXNQZXJQb2xsOiA1MDAwLFxuICAgICAgICBhbGxvd011bHRpcGxlVm90ZXM6IHRydWUsXG4gICAgICAgIHJlcXVpcmVBdXRoZW50aWNhdGlvbjogZmFsc2VcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IGN1c3RvbUVuZ2luZSA9IG5ldyBWb3RlRW5naW5lKGN1c3RvbUNvbmZpZyk7XG4gICAgICBjb25zdCBjb25maWcgPSBjdXN0b21FbmdpbmUuZ2V0Q29uZmlnKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjb25maWcubWF4Vm90ZXNQZXJQb2xsKS50b0JlKDUwMDApO1xuICAgICAgZXhwZWN0KGNvbmZpZy5hbGxvd011bHRpcGxlVm90ZXMpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoY29uZmlnLnJlcXVpcmVBdXRoZW50aWNhdGlvbikudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgZW5naW5lLnVwZGF0ZUNvbmZpZyh7IG1heFZvdGVzUGVyUG9sbDogMjAwMCB9KTtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGVuZ2luZS5nZXRDb25maWcoKTtcbiAgICAgIGV4cGVjdChjb25maWcubWF4Vm90ZXNQZXJQb2xsKS50b0JlKDIwMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVm90ZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgYSB2YWxpZCBzaW5nbGUtY2hvaWNlIHZvdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgZW5naW5lLnZhbGlkYXRlVm90ZShtb2NrVm90ZVJlcXVlc3QsIG1vY2tQb2xsKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5yZXF1aXJlc0F1dGhlbnRpY2F0aW9uKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24ucmVxdWlyZXNUb2tlbnMpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3Qgdm90ZSB3aXRoIG1pc3NpbmcgcG9sbCBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1ZvdGVSZXF1ZXN0LCB7IHBvbGxJZDogJycgfSk7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgZW5naW5lLnZhbGlkYXRlVm90ZShpbnZhbGlkUmVxdWVzdCwgbW9ja1BvbGwpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcikudG9CZSgnTWlzc2luZyByZXF1aXJlZCB2b3RlIGRhdGEnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHZvdGUgd2l0aCBtaXNzaW5nIHZvdGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1ZvdGVSZXF1ZXN0LCB7IHZvdGVEYXRhOiB7fSB9KTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBlbmdpbmUudmFsaWRhdGVWb3RlKGludmFsaWRSZXF1ZXN0LCBtb2NrUG9sbCk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmVycm9yKS50b0JlKCdDaG9pY2UgaXMgcmVxdWlyZWQgZm9yIHNpbmdsZS1jaG9pY2Ugdm90aW5nJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCB2b3RlIGZvciBpbmFjdGl2ZSBwb2xsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaW5hY3RpdmVQb2xsID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1BvbGwsIHsgc3RhdHVzOiAnY2xvc2VkJyBhcyBjb25zdCB9KTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBlbmdpbmUudmFsaWRhdGVWb3RlKG1vY2tWb3RlUmVxdWVzdCwgaW5hY3RpdmVQb2xsKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3IpLnRvQmUoJ1BvbGwgbm90IGZvdW5kIG9yIG5vdCBhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHZvdGUgZm9yIGVuZGVkIHBvbGwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlbmRlZFBvbGwgPSBPYmplY3QuYXNzaWduKHt9LCBtb2NrUG9sbCwgeyBcbiAgICAgICAgZW5kVGltZTogbmV3IERhdGUoJzIwMjQtMTItMzFUMjM6NTk6NTlaJykgXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBlbmdpbmUudmFsaWRhdGVWb3RlKG1vY2tWb3RlUmVxdWVzdCwgZW5kZWRQb2xsKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3IpLnRvQmUoJ1BvbGwgaGFzIGVuZGVkJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCB2b3RlIHdpdGhvdXQgYXV0aGVudGljYXRpb24gd2hlbiByZXF1aXJlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHVuYXV0aGVudGljYXRlZFJlcXVlc3QgPSBPYmplY3QuYXNzaWduKHt9LCBtb2NrVm90ZVJlcXVlc3QpO1xuICAgICAgZGVsZXRlIHVuYXV0aGVudGljYXRlZFJlcXVlc3QudXNlcklkO1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUodW5hdXRoZW50aWNhdGVkUmVxdWVzdCwgbW9ja1BvbGwpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcikudG9CZSgnQXV0aGVudGljYXRpb24gcmVxdWlyZWQgdG8gdm90ZScpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24ucmVxdWlyZXNBdXRoZW50aWNhdGlvbikudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgdm90ZSB3aXRob3V0IGF1dGhlbnRpY2F0aW9uIHdoZW4gbm90IHJlcXVpcmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZW5naW5lLnVwZGF0ZUNvbmZpZyh7IHJlcXVpcmVBdXRoZW50aWNhdGlvbjogZmFsc2UgfSk7XG4gICAgICBjb25zdCB1bmF1dGhlbnRpY2F0ZWRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1ZvdGVSZXF1ZXN0KTtcbiAgICAgIGRlbGV0ZSB1bmF1dGhlbnRpY2F0ZWRSZXF1ZXN0LnVzZXJJZDtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCBlbmdpbmUudmFsaWRhdGVWb3RlKHVuYXV0aGVudGljYXRlZFJlcXVlc3QsIG1vY2tQb2xsKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJlamVjdCB2b3RlIHdpdGggaW52YWxpZCBvcHRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oe30sIG1vY2tWb3RlUmVxdWVzdCwgeyBcbiAgICAgICAgdm90ZURhdGE6IHsgY2hvaWNlOiA5OTkgfSBcbiAgICAgIH0pO1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IGF3YWl0IGVuZ2luZS52YWxpZGF0ZVZvdGUoaW52YWxpZFJlcXVlc3QsIG1vY2tQb2xsKTtcbiAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uZXJyb3IpLnRvQmUoJ0Nob2ljZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVm90ZSBQcm9jZXNzaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgcHJvY2VzcyBhIHZhbGlkIHZvdGUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBlbmdpbmUucHJvY2Vzc1ZvdGUobW9ja1ZvdGVSZXF1ZXN0LCBtb2NrUG9sbCk7XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5wb2xsSWQpLnRvQmUoJ3BvbGwtMTIzJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2Uudm90ZUlkKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmF1ZGl0UmVjZWlwdCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5wcml2YWN5TGV2ZWwpLnRvQmUoJ3B1YmxpYycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnJlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGludmFsaWQgdm90ZSBkdXJpbmcgcHJvY2Vzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1ZvdGVSZXF1ZXN0LCB7IHZvdGVEYXRhOiB7fSB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZW5naW5lLnByb2Nlc3NWb3RlKGludmFsaWRSZXF1ZXN0LCBtb2NrUG9sbCk7XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UubWVzc2FnZSkudG9CZSgnQ2hvaWNlIGlzIHJlcXVpcmVkIGZvciBzaW5nbGUtY2hvaWNlIHZvdGluZycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnZvdGVJZCkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcHJvY2Vzc2luZyBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgZXJyb3IgaGFuZGxpbmcgd2l0aCBpbnZhbGlkIGRhdGFcbiAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1ZvdGVSZXF1ZXN0LCB7IHZvdGVEYXRhOiB7fSB9KTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZW5naW5lLnByb2Nlc3NWb3RlKGludmFsaWRSZXF1ZXN0LCBtb2NrUG9sbCk7XG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3VjY2VzcykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UubWVzc2FnZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Jlc3VsdHMgQ2FsY3VsYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjYWxjdWxhdGUgcmVzdWx0cyBmb3Igc2luZ2xlLWNob2ljZSB2b3RpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVm90ZXM6IFZvdGVEYXRhW10gPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3ZvdGUtMScsXG4gICAgICAgICAgcG9sbElkOiAncG9sbC0xMjMnLFxuICAgICAgICAgIHVzZXJJZDogJ3VzZXItMScsXG4gICAgICAgICAgY2hvaWNlOiAwLFxuICAgICAgICAgIHByaXZhY3lMZXZlbDogJ3B1YmxpYycsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGF1ZGl0UmVjZWlwdDogJ3JlY2VpcHQtMSdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAndm90ZS0yJyxcbiAgICAgICAgICBwb2xsSWQ6ICdwb2xsLTEyMycsXG4gICAgICAgICAgdXNlcklkOiAndXNlci0yJyxcbiAgICAgICAgICBjaG9pY2U6IDAsXG4gICAgICAgICAgcHJpdmFjeUxldmVsOiAncHVibGljJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgICAgYXVkaXRSZWNlaXB0OiAncmVjZWlwdC0yJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd2b3RlLTMnLFxuICAgICAgICAgIHBvbGxJZDogJ3BvbGwtMTIzJyxcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTMnLFxuICAgICAgICAgIGNob2ljZTogMSxcbiAgICAgICAgICBwcml2YWN5TGV2ZWw6ICdwdWJsaWMnLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgICBhdWRpdFJlY2VpcHQ6ICdyZWNlaXB0LTMnXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBlbmdpbmUuY2FsY3VsYXRlUmVzdWx0cyhtb2NrUG9sbCwgbW9ja1ZvdGVzKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLnBvbGxJZCkudG9CZSgncG9sbC0xMjMnKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLnRvdGFsVm90ZXMpLnRvQmUoMyk7XG4gICAgICBleHBlY3QocmVzdWx0cy52b3RpbmdNZXRob2QpLnRvQmUoJ3NpbmdsZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdHMucmVzdWx0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0cy5yZXN1bHRzKS50b0JlKCdvYmplY3QnKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgb3B0aW9uIHZvdGVzIHVzaW5nIHRoZSBjb3JyZWN0IHN0cnVjdHVyZVxuICAgICAgZXhwZWN0KHJlc3VsdHMucmVzdWx0cy5vcHRpb25Wb3Rlc1snMCddKS50b0JlKDIpOyAvLyBPcHRpb24gMSAoaW5kZXggMClcbiAgICAgIGV4cGVjdChyZXN1bHRzLnJlc3VsdHMub3B0aW9uVm90ZXNbJzEnXSkudG9CZSgxKTsgLy8gT3B0aW9uIDIgKGluZGV4IDEpXG4gICAgICBleHBlY3QocmVzdWx0cy5yZXN1bHRzLm9wdGlvblZvdGVzWycyJ10pLnRvQmUoMCk7IC8vIE9wdGlvbiAzIChpbmRleCAyKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0cy5yZXN1bHRzLm9wdGlvblBlcmNlbnRhZ2VzWycwJ10pLnRvQmVDbG9zZVRvKDY2LjY3LCAxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLnJlc3VsdHMub3B0aW9uUGVyY2VudGFnZXNbJzEnXSkudG9CZUNsb3NlVG8oMzMuMzMsIDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdHMucmVzdWx0cy5vcHRpb25QZXJjZW50YWdlc1snMiddKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW1wdHkgdm90ZXMgYXJyYXknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgZW5naW5lLmNhbGN1bGF0ZVJlc3VsdHMobW9ja1BvbGwsIFtdKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLnRvdGFsVm90ZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoT2JqZWN0LmtleXMocmVzdWx0cy5yZXN1bHRzLm9wdGlvblZvdGVzKSkudG9IYXZlTGVuZ3RoKDMpO1xuICAgICAgT2JqZWN0LnZhbHVlcyhyZXN1bHRzLnJlc3VsdHMub3B0aW9uVm90ZXMpLmZvckVhY2godm90ZXMgPT4ge1xuICAgICAgICBleHBlY3Qodm90ZXMpLnRvQmUoMCk7XG4gICAgICB9KTtcbiAgICAgIE9iamVjdC52YWx1ZXMocmVzdWx0cy5yZXN1bHRzLm9wdGlvblBlcmNlbnRhZ2VzKS5mb3JFYWNoKHBlcmNlbnRhZ2UgPT4ge1xuICAgICAgICBleHBlY3QocGVyY2VudGFnZSkudG9CZSgwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVm90aW5nIE1ldGhvZCBDb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IGNvbmZpZ3VyYXRpb24gZm9yIHNpbmdsZS1jaG9pY2Ugdm90aW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gZW5naW5lLmdldFZvdGluZ01ldGhvZENvbmZpZygnc2luZ2xlJyk7XG4gICAgICBleHBlY3QoY29uZmlnLm5hbWUpLnRvQmUoJ1NpbmdsZSBDaG9pY2UgVm90aW5nJyk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsbG93c011bHRpcGxlU2VsZWN0aW9ucykudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoY29uZmlnLm1pbk9wdGlvbnMpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdldCBjb25maWd1cmF0aW9uIGZvciBhcHByb3ZhbCB2b3RpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb25maWcgPSBlbmdpbmUuZ2V0Vm90aW5nTWV0aG9kQ29uZmlnKCdhcHByb3ZhbCcpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5uYW1lKS50b0JlKCdBcHByb3ZhbCBWb3RpbmcnKTtcbiAgICAgIGV4cGVjdChjb25maWcuYWxsb3dzTXVsdGlwbGVTZWxlY3Rpb25zKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5taW5PcHRpb25zKS50b0JlKDIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgY29uZmlndXJhdGlvbiBmb3IgcmFua2VkIHZvdGluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGVuZ2luZS5nZXRWb3RpbmdNZXRob2RDb25maWcoJ3JhbmtlZCcpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5uYW1lKS50b0JlKCdSYW5rZWQgQ2hvaWNlIFZvdGluZycpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5yZXN1bHRUeXBlKS50b0JlKCdpbnN0YW50X3J1bm9mZicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgY29uZmlndXJhdGlvbiBmb3IgcXVhZHJhdGljIHZvdGluZycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGVuZ2luZS5nZXRWb3RpbmdNZXRob2RDb25maWcoJ3F1YWRyYXRpYycpO1xuICAgICAgZXhwZWN0KGNvbmZpZy5uYW1lKS50b0JlKCdRdWFkcmF0aWMgVm90aW5nJyk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsbG93c011bHRpcGxlU2VsZWN0aW9ucykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjb25maWcucmVzdWx0VHlwZSkudG9CZSgnaGlnaGVzdF9zY29yZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBnZXQgY29uZmlndXJhdGlvbiBmb3IgcmFuZ2Ugdm90aW5nJywgKCkgPT4ge1xuICAgICAgY29uc3QgY29uZmlnID0gZW5naW5lLmdldFZvdGluZ01ldGhvZENvbmZpZygncmFuZ2UnKTtcbiAgICAgIGV4cGVjdChjb25maWcubmFtZSkudG9CZSgnUmFuZ2UgVm90aW5nJyk7XG4gICAgICBleHBlY3QoY29uZmlnLmFsbG93c011bHRpcGxlU2VsZWN0aW9ucykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChjb25maWcucmVzdWx0VHlwZSkudG9CZSgnaGlnaGVzdF9hdmVyYWdlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciB1bnN1cHBvcnRlZCB2b3RpbmcgbWV0aG9kJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgZW5naW5lLmdldFZvdGluZ01ldGhvZENvbmZpZygndW5zdXBwb3J0ZWQnIGFzIFZvdGluZ01ldGhvZCk7XG4gICAgICB9KS50b1Rocm93KCdVbnN1cHBvcnRlZCB2b3RpbmcgbWV0aG9kOiB1bnN1cHBvcnRlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmFsaWRhdGlvbiBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgbW9ja1ZvdGVSZXF1ZXN0LCB7IHBvbGxJZDogJycgfSk7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gYXdhaXQgZW5naW5lLnZhbGlkYXRlVm90ZShpbnZhbGlkUmVxdWVzdCwgbW9ja1BvbGwpO1xuICAgICAgZXhwZWN0KHZhbGlkYXRpb24uaXNWYWxpZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QodmFsaWRhdGlvbi5lcnJvcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHByb2Nlc3NpbmcgZXJyb3JzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpbnZhbGlkUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oe30sIG1vY2tWb3RlUmVxdWVzdCwgeyB2b3RlRGF0YToge30gfSk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGVuZ2luZS5wcm9jZXNzVm90ZShpbnZhbGlkUmVxdWVzdCwgbW9ja1BvbGwpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLm1lc3NhZ2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZXN1bHRzIGNhbGN1bGF0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB3aXRoIG1hbGZvcm1lZCB2b3RlIGRhdGFcbiAgICAgIGNvbnN0IG1hbGZvcm1lZFZvdGVzOiBWb3RlRGF0YVtdID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICd2b3RlLTEnLFxuICAgICAgICAgIHBvbGxJZDogJ3BvbGwtMTIzJyxcbiAgICAgICAgICB1c2VySWQ6ICd1c2VyLTEnLFxuICAgICAgICAgIGNob2ljZTogOTk5LFxuICAgICAgICAgIHByaXZhY3lMZXZlbDogJ3B1YmxpYycsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGF1ZGl0UmVjZWlwdDogJ3JlY2VpcHQtMSdcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IGVuZ2luZS5jYWxjdWxhdGVSZXN1bHRzKG1vY2tQb2xsLCBtYWxmb3JtZWRWb3Rlcyk7XG4gICAgICBleHBlY3QocmVzdWx0cy50b3RhbFZvdGVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHJlc3VsdHMucmVzdWx0cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0cy5yZXN1bHRzKS50b0JlKCdvYmplY3QnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsImRldkxvZyIsImZuIiwiZGVzY3JpYmUiLCJlbmdpbmUiLCJtb2NrUG9sbCIsIm1vY2tWb3RlUmVxdWVzdCIsImJlZm9yZUVhY2giLCJWb3RlRW5naW5lIiwiaWQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidm90aW5nTWV0aG9kIiwib3B0aW9ucyIsInRleHQiLCJzdGF0dXMiLCJzdGFydFRpbWUiLCJEYXRlIiwiZW5kVGltZSIsImNyZWF0ZWRCeSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInZvdGluZ0NvbmZpZyIsImFsbG93TXVsdGlwbGVWb3RlcyIsIm1heENob2ljZXMiLCJxdWFkcmF0aWNDcmVkaXRzIiwicmFuZ2VNaW4iLCJyYW5nZU1heCIsInBvbGxJZCIsInVzZXJJZCIsInZvdGVEYXRhIiwiY2hvaWNlIiwicHJpdmFjeUxldmVsIiwiaXQiLCJjb25maWciLCJnZXRDb25maWciLCJleHBlY3QiLCJtYXhWb3Rlc1BlclBvbGwiLCJ0b0JlIiwicmVxdWlyZUF1dGhlbnRpY2F0aW9uIiwibWluVHJ1c3RUaWVyIiwicmF0ZUxpbWl0UGVyVXNlciIsInJhdGVMaW1pdFdpbmRvd01zIiwiY3VzdG9tQ29uZmlnIiwiY3VzdG9tRW5naW5lIiwidXBkYXRlQ29uZmlnIiwidmFsaWRhdGlvbiIsInZhbGlkYXRlVm90ZSIsImlzVmFsaWQiLCJyZXF1aXJlc0F1dGhlbnRpY2F0aW9uIiwicmVxdWlyZXNUb2tlbnMiLCJpbnZhbGlkUmVxdWVzdCIsIk9iamVjdCIsImFzc2lnbiIsImVycm9yIiwiaW5hY3RpdmVQb2xsIiwiZW5kZWRQb2xsIiwidW5hdXRoZW50aWNhdGVkUmVxdWVzdCIsInJlc3BvbnNlIiwicHJvY2Vzc1ZvdGUiLCJzdWNjZXNzIiwidm90ZUlkIiwidG9CZURlZmluZWQiLCJhdWRpdFJlY2VpcHQiLCJyZXNwb25zZVRpbWUiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwibWVzc2FnZSIsInRvQmVVbmRlZmluZWQiLCJtb2NrVm90ZXMiLCJ0aW1lc3RhbXAiLCJyZXN1bHRzIiwiY2FsY3VsYXRlUmVzdWx0cyIsInRvdGFsVm90ZXMiLCJvcHRpb25Wb3RlcyIsIm9wdGlvblBlcmNlbnRhZ2VzIiwidG9CZUNsb3NlVG8iLCJrZXlzIiwidG9IYXZlTGVuZ3RoIiwidmFsdWVzIiwiZm9yRWFjaCIsInZvdGVzIiwicGVyY2VudGFnZSIsImdldFZvdGluZ01ldGhvZENvbmZpZyIsIm5hbWUiLCJhbGxvd3NNdWx0aXBsZVNlbGVjdGlvbnMiLCJtaW5PcHRpb25zIiwicmVzdWx0VHlwZSIsInRvVGhyb3ciLCJtYWxmb3JtZWRWb3RlcyJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Q0FPQzs7Ozt5QkFFc0Q7d0JBQ0w7QUFNbEQsa0JBQWtCO0FBQ2xCQSxhQUFJLENBQUNDLElBQUksQ0FBQyxzQkFBc0IsSUFBTyxDQUFBO1FBQ3JDQyxRQUFRRixhQUFJLENBQUNHLEVBQUU7SUFDakIsQ0FBQTtBQUVBQyxJQUFBQSxpQkFBUSxFQUFDLGNBQWM7SUFDckIsSUFBSUM7SUFDSixJQUFJQztJQUNKLElBQUlDO0lBRUpDLElBQUFBLG1CQUFVLEVBQUM7UUFDVEgsU0FBUyxJQUFJSSxrQkFBVTtRQUV2QkgsV0FBVztZQUNUSSxJQUFJO1lBQ0pDLE9BQU87WUFDUEMsYUFBYTtZQUNiQyxjQUFjO1lBQ2RDLFNBQVM7Z0JBQ1A7b0JBQUVKLElBQUk7b0JBQVlLLE1BQU07Z0JBQVc7Z0JBQ25DO29CQUFFTCxJQUFJO29CQUFZSyxNQUFNO2dCQUFXO2dCQUNuQztvQkFBRUwsSUFBSTtvQkFBWUssTUFBTTtnQkFBVzthQUNwQztZQUNEQyxRQUFRO1lBQ1JDLFdBQVcsSUFBSUMs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