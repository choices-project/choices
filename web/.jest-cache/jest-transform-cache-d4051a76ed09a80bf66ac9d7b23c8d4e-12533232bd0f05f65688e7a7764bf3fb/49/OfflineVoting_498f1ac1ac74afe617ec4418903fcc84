eb55222c1d88d91a7051bbbceac6c593
'use client';
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return OfflineVoting;
    }
});
const _jsxruntime = require("react/jsx-runtime");
const _WifiOff = require("lucide-react/dist/esm/icons/WifiOff");
const _CheckCircle = require("lucide-react/dist/esm/icons/CheckCircle");
const _AlertCircle = require("lucide-react/dist/esm/icons/AlertCircle");
const _react = require("react");
const _usePWA = require("../../../hooks/usePWA");
const _logger = require("../../../lib/utils/logger");
function OfflineVoting({ pollId, className = '' }) {
    const pwa = (0, _usePWA.usePWA)();
    const [offlineVotes, setOfflineVotes] = (0, _react.useState)([]);
    const [_isVoting, setIsVoting] = (0, _react.useState)(false);
    (0, _react.useEffect)(()=>{
        // Simulate offline votes for this poll
        const mockVotes = [
            {
                id: '1',
                pollId,
                choice: 0,
                timestamp: Date.now() - 300000
            },
            {
                id: '2',
                pollId,
                choice: 1,
                timestamp: Date.now() - 180000
            }
        ];
        setOfflineVotes(mockVotes);
    }, [
        pollId
    ]);
    const _handleVote = (choice)=>{
        setIsVoting(true);
        try {
            // Simulate storing offline vote
            const newVote = {
                id: Date.now().toString(),
                pollId,
                choice,
                timestamp: Date.now()
            };
            setOfflineVotes((prev)=>[
                    ...prev,
                    newVote
                ]);
        } catch (error) {
            _logger.logger.error('Vote failed:', error instanceof Error ? error : new Error(String(error)));
        } finally{
            setIsVoting(false);
        }
    };
    if (!pwa.hasOfflineData && offlineVotes.length === 0) {
        return null;
    }
    return /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
        className: `bg-orange-50 border border-orange-200 rounded-lg p-4 ${className}`,
        "data-testid": "offline-voting",
        children: [
            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                className: "flex items-center justify-between mb-3",
                children: [
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center space-x-2",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsx)(_WifiOff.WifiOff, {
                                className: "w-5 h-5 text-orange-600"
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                                className: "text-sm font-medium text-orange-800",
                                children: "Offline Voting"
                            })
                        ]
                    }),
                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                        className: "text-sm text-orange-700",
                        children: [
                            offlineVotes.length,
                            " votes"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "space-y-2",
                children: offlineVotes.map((vote)=>/*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                        className: "flex items-center justify-between p-2 bg-white rounded border",
                        children: [
                            /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [
                                    /*#__PURE__*/ (0, _jsxruntime.jsx)(_CheckCircle.CheckCircle, {
                                        className: "w-4 h-4 text-green-500"
                                    }),
                                    /*#__PURE__*/ (0, _jsxruntime.jsxs)("span", {
                                        className: "text-sm text-gray-700",
                                        children: [
                                            "Vote for Option ",
                                            vote.choice + 1
                                        ]
                                    })
                                ]
                            }),
                            /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                                className: "text-xs text-gray-500",
                                children: new Date(vote.timestamp).toLocaleTimeString()
                            })
                        ]
                    }, vote.id))
            }),
            /*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: "mt-3 p-3 bg-orange-100 rounded border",
                children: /*#__PURE__*/ (0, _jsxruntime.jsxs)("div", {
                    className: "flex items-center space-x-2 text-orange-800",
                    children: [
                        /*#__PURE__*/ (0, _jsxruntime.jsx)(_AlertCircle.AlertCircle, {
                            className: "w-4 h-4"
                        }),
                        /*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                            className: "text-sm font-medium",
                            children: "Votes will sync when online"
                        })
                    ]
                })
            })
        ]
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi9mZWF0dXJlcy9wd2EvY29tcG9uZW50cy9PZmZsaW5lVm90aW5nLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgV2lmaU9mZiwgQ2hlY2tDaXJjbGUsIEFsZXJ0Q2lyY2xlIH0gZnJvbSAnbHVjaWRlLXJlYWN0J1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgeyB1c2VQV0EgfSBmcm9tICdAL2hvb2tzL3VzZVBXQSdcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0AvbGliL3V0aWxzL2xvZ2dlcidcblxuaW50ZXJmYWNlIE9mZmxpbmVWb3RpbmdQcm9wcyB7XG4gIHBvbGxJZDogc3RyaW5nXG4gIGNsYXNzTmFtZT86IHN0cmluZ1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBPZmZsaW5lVm90aW5nKHsgcG9sbElkLCBjbGFzc05hbWUgPSAnJyB9OiBPZmZsaW5lVm90aW5nUHJvcHMpIHtcbiAgY29uc3QgcHdhID0gdXNlUFdBKClcbiAgY29uc3QgW29mZmxpbmVWb3Rlcywgc2V0T2ZmbGluZVZvdGVzXSA9IHVzZVN0YXRlPGFueVtdPihbXSlcbiAgY29uc3QgW19pc1ZvdGluZywgc2V0SXNWb3RpbmddID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBTaW11bGF0ZSBvZmZsaW5lIHZvdGVzIGZvciB0aGlzIHBvbGxcbiAgICBjb25zdCBtb2NrVm90ZXMgPSBbXG4gICAgICB7IGlkOiAnMScsIHBvbGxJZCwgY2hvaWNlOiAwLCB0aW1lc3RhbXA6IERhdGUubm93KCkgLSAzMDAwMDAgfSxcbiAgICAgIHsgaWQ6ICcyJywgcG9sbElkLCBjaG9pY2U6IDEsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSAtIDE4MDAwMCB9XG4gICAgXVxuICAgIHNldE9mZmxpbmVWb3Rlcyhtb2NrVm90ZXMpXG4gIH0sIFtwb2xsSWRdKVxuXG4gIGNvbnN0IF9oYW5kbGVWb3RlID0gKGNob2ljZTogbnVtYmVyKSA9PiB7XG4gICAgc2V0SXNWb3RpbmcodHJ1ZSlcbiAgICB0cnkge1xuICAgICAgLy8gU2ltdWxhdGUgc3RvcmluZyBvZmZsaW5lIHZvdGVcbiAgICAgIGNvbnN0IG5ld1ZvdGUgPSB7XG4gICAgICAgIGlkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCksXG4gICAgICAgIHBvbGxJZCxcbiAgICAgICAgY2hvaWNlLFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgIH1cbiAgICAgIHNldE9mZmxpbmVWb3RlcyhwcmV2ID0+IFsuLi5wcmV2LCBuZXdWb3RlXSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKCdWb3RlIGZhaWxlZDonLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiBuZXcgRXJyb3IoU3RyaW5nKGVycm9yKSkpXG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzVm90aW5nKGZhbHNlKVxuICAgIH1cbiAgfVxuXG4gIGlmICghcHdhLmhhc09mZmxpbmVEYXRhICYmIG9mZmxpbmVWb3Rlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT17YGJnLW9yYW5nZS01MCBib3JkZXIgYm9yZGVyLW9yYW5nZS0yMDAgcm91bmRlZC1sZyBwLTQgJHtjbGFzc05hbWV9YH0gZGF0YS10ZXN0aWQ9XCJvZmZsaW5lLXZvdGluZ1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItM1wiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgIDxXaWZpT2ZmIGNsYXNzTmFtZT1cInctNSBoLTUgdGV4dC1vcmFuZ2UtNjAwXCIgLz5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LW9yYW5nZS04MDBcIj5PZmZsaW5lIFZvdGluZzwvaDM+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtb3JhbmdlLTcwMFwiPntvZmZsaW5lVm90ZXMubGVuZ3RofSB2b3Rlczwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICB7b2ZmbGluZVZvdGVzLm1hcCgodm90ZSkgPT4gKFxuICAgICAgICAgIDxkaXYga2V5PXt2b3RlLmlkfSBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gcC0yIGJnLXdoaXRlIHJvdW5kZWQgYm9yZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8Q2hlY2tDaXJjbGUgY2xhc3NOYW1lPVwidy00IGgtNCB0ZXh0LWdyZWVuLTUwMFwiIC8+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgIFZvdGUgZm9yIE9wdGlvbiB7dm90ZS5jaG9pY2UgKyAxfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICB7bmV3IERhdGUodm90ZS50aW1lc3RhbXApLnRvTG9jYWxlVGltZVN0cmluZygpfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTMgcC0zIGJnLW9yYW5nZS0xMDAgcm91bmRlZCBib3JkZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBzcGFjZS14LTIgdGV4dC1vcmFuZ2UtODAwXCI+XG4gICAgICAgICAgPEFsZXJ0Q2lyY2xlIGNsYXNzTmFtZT1cInctNCBoLTRcIiAvPlxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW1cIj5Wb3RlcyB3aWxsIHN5bmMgd2hlbiBvbmxpbmU8L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJPZmZsaW5lVm90aW5nIiwicG9sbElkIiwiY2xhc3NOYW1lIiwicHdhIiwidXNlUFdBIiwib2ZmbGluZVZvdGVzIiwic2V0T2ZmbGluZVZvdGVzIiwidXNlU3RhdGUiLCJfaXNWb3RpbmciLCJzZXRJc1ZvdGluZyIsInVzZUVmZmVjdCIsIm1vY2tWb3RlcyIsImlkIiwiY2hvaWNlIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsIl9oYW5kbGVWb3RlIiwibmV3Vm90ZSIsInRvU3RyaW5nIiwicHJldiIsImVycm9yIiwibG9nZ2VyIiwiRXJyb3IiLCJTdHJpbmciLCJoYXNPZmZsaW5lRGF0YSIsImxlbmd0aCIsImRpdiIsImRhdGEtdGVzdGlkIiwiV2lmaU9mZiIsImgzIiwic3BhbiIsIm1hcCIsInZvdGUiLCJDaGVja0NpcmNsZSIsInRvTG9jYWxlVGltZVN0cmluZyIsIkFsZXJ0Q2lyY2xlIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7K0JBYUE7OztlQUF3QkE7Ozs7Ozs7dUJBVlk7d0JBRWI7d0JBQ0E7QUFPUixTQUFTQSxjQUFjLEVBQUVDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEVBQXNCO0lBQ2xGLE1BQU1DLE1BQU1DLElBQUFBLGNBQU07SUFDbEIsTUFBTSxDQUFDQyxjQUFjQyxnQkFBZ0IsR0FBR0MsSUFBQUEsZUFBUSxFQUFRLEVBQUU7SUFDMUQsTUFBTSxDQUFDQyxXQUFXQyxZQUFZLEdBQUdGLElBQUFBLGVBQVEsRUFBQztJQUUxQ0csSUFBQUEsZ0JBQVMsRUFBQztRQUNSLHVDQUF1QztRQUN2QyxNQUFNQyxZQUFZO1lBQ2hCO2dCQUFFQyxJQUFJO2dCQUFLWDtnQkFBUVksUUFBUTtnQkFBR0MsV0FBV0MsS0FBS0MsR0FBRyxLQUFLO1lBQU87WUFDN0Q7Z0JBQUVKLElBQUk7Z0JBQUtYO2dCQUFRWSxRQUFRO2dCQUFHQyxXQUFXQyxLQUFLQyxHQUFHLEtBQUs7WUFBTztTQUM5RDtRQUNEVixnQkFBZ0JLO0lBQ2xCLEdBQUc7UUFBQ1Y7S0FBTztJQUVYLE1BQU1nQixjQUFjLENBQUNKO1FBQ25CSixZQUFZO1FBQ1osSUFBSTtZQUNGLGdDQUFnQztZQUNoQyxNQUFNUyxVQUFVO2dCQUNkTixJQUFJRyxLQUFLQyxHQUFHLEdBQUdHLFFBQVE7Z0JBQ3ZCbEI7Z0JBQ0FZO2dCQUNBQyxXQUFXQyxLQUFLQyxHQUFHO1lBQ3JCO1lBQ0FWLGdCQUFnQmMsQ0FBQUEsT0FBUTt1QkFBSUE7b0JBQU1GO2lCQUFRO1FBQzVDLEVBQUUsT0FBT0csT0FBTztZQUNkQyxjQUFNLENBQUNELEtBQUssQ0FBQyxnQkFBZ0JBLGlCQUFpQkUsUUFBUUYsUUFBUSxJQUFJRSxNQUFNQyxPQUFPSDtRQUNqRixTQUFVO1lBQ1JaLFlBQVk7UUFDZDtJQUNGO0lBRUEsSUFBSSxDQUFDTixJQUFJc0IsY0FBYyxJQUFJcEIsYUFBYXFCLE1BQU0sS0FBSyxHQUFHO1FBQ3BELE9BQU87SUFDVDtJQUVBLHFCQUNFLHNCQUFDQztRQUFJekIsV0FBVyxDQUFDLHFEQUFxRCxFQUFFQSxXQUFXO1FBQUUwQixlQUFZOzswQkFDL0Ysc0JBQUNEO2dCQUFJekIsV0FBVTs7a0NBQ2Isc0JBQUN5Qjt3QkFBSXpCLFdBQVU7OzBDQUNiLHFCQUFDMkIsZ0JBQU87Z0NBQUMzQixXQUFVOzswQ0FDbkIscUJBQUM0QjtnQ0FBRzVCLFdBQVU7MENBQXNDOzs7O2tDQUV0RCxzQkFBQzZCO3dCQUFLN0IsV0FBVTs7NEJBQTJCRyxhQUFhcUIsTUFBTTs0QkFBQzs7Ozs7MEJBR2pFLHFCQUFDQztnQkFBSXpCLFdBQVU7MEJBQ1pHLGFBQWEyQixHQUFHLENBQUMsQ0FBQ0MscUJBQ2pCLHNCQUFDTjt3QkFBa0J6QixXQUFVOzswQ0FDM0Isc0JBQUN5QjtnQ0FBSXpCLFdBQVU7O2tEQUNiLHFCQUFDZ0Msd0JBQVc7d0NBQUNoQyxXQUFVOztrREFDdkIsc0JBQUM2Qjt3Q0FBSzdCLFdBQVU7OzRDQUF3Qjs0Q0FDckIrQixLQUFLcEIsTUFBTSxHQUFHOzs7OzswQ0FHbkMscUJBQUNrQjtnQ0FBSzdCLFdBQVU7MENBQ2IsSUFBSWEsS0FBS2tCLEtBQUtuQixTQUFTLEVBQUVxQixrQkFBa0I7Ozt1QkFSdENGLEtBQUtyQixFQUFFOzswQkFjckIscUJBQUNlO2dCQUFJekIsV0FBVTswQkFDYixjQUFBLHNCQUFDeUI7b0JBQUl6QixXQUFVOztzQ0FDYixxQkFBQ2tDLHdCQUFXOzRCQUFDbEMsV0FBVTs7c0NBQ3ZCLHFCQUFDNkI7NEJBQUs3QixXQUFVO3NDQUFzQjs7Ozs7OztBQUtoRCJ9