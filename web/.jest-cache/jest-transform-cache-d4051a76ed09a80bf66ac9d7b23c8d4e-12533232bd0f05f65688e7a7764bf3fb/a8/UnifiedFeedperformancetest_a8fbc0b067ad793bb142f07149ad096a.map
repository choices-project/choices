{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/unit/features/feeds/UnifiedFeed.performance.test.tsx"],"sourcesContent":["/**\n * UnifiedFeed Performance Tests\n * \n * Comprehensive performance testing for the UnifiedFeed component\n * Tests real performance metrics and optimization\n * \n * Created: January 19, 2025\n * Status: âœ… PRODUCTION READY\n */\n\nimport React from 'react';\nimport { render, screen, fireEvent, act } from '@testing-library/react';\nimport { jest } from '@jest/globals';\nimport { UnifiedFeed } from '@/features/feeds/components/UnifiedFeed';\nimport { useFeeds } from '@/lib/stores/feedsStore';\nimport { useHashtags } from '@/features/hashtags/hooks/useHashtags';\n\n// Mock the stores and Supabase client\njest.mock('@/lib/stores/feedsStore');\njest.mock('@/features/hashtags/hooks/useHashtags');\njest.mock('@/utils/supabase/client', () => ({\n  createClient: jest.fn(() => ({\n    from: jest.fn(() => ({\n      select: jest.fn(() => ({\n        eq: jest.fn(() => ({\n          single: jest.fn(() => Promise.resolve({ data: null, error: null })),\n          order: jest.fn(() => ({\n            limit: jest.fn(() => Promise.resolve({ data: [], error: null }))\n          }))\n        }))\n      })),\n      insert: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      update: jest.fn(() => Promise.resolve({ data: null, error: null })),\n      delete: jest.fn(() => Promise.resolve({ data: null, error: null }))\n    })),\n    rpc: jest.fn(() => Promise.resolve({ data: null, error: null }))\n  }))\n}));\n\nconst mockUseFeeds = useFeeds as jest.MockedFunction<typeof useFeeds>;\nconst mockUseHashtags = useHashtags as jest.MockedFunction<typeof useHashtags>;\n\n// Performance test data\nconst generateLargeFeedData = (count: number) => \n  Array.from({ length: count }, (_, i) => ({\n    id: `${i}`,\n    type: i % 2 === 0 ? 'poll' : 'post',\n    title: `Test ${i % 2 === 0 ? 'Poll' : 'Post'} ${i}`,\n    description: `This is test ${i % 2 === 0 ? 'poll' : 'post'} ${i} with some content`,\n    hashtags: [`hashtag${i % 10}`, `category${i % 5}`],\n    created_at: new Date(Date.now() - i * 1000).toISOString(),\n    author: `User ${i}`,\n    engagement: {\n      likes: Math.floor(Math.random() * 1000),\n      shares: Math.floor(Math.random() * 500),\n      comments: Math.floor(Math.random() * 200)\n    }\n  }));\n\nconst generateLargeHashtagData = (count: number) =>\n  Array.from({ length: count }, (_, i) => ({\n    id: `${i}`,\n    name: `hashtag${i}`,\n    display_name: `Hashtag ${i}`,\n    usage_count: Math.floor(Math.random() * 1000),\n    follower_count: Math.floor(Math.random() * 500),\n    is_trending: Math.random() > 0.7,\n    trend_score: Math.random(),\n    created_at: new Date(Date.now() - i * 1000).toISOString(),\n    updated_at: new Date(Date.now() - i * 1000).toISOString(),\n    is_verified: Math.random() > 0.9,\n    is_featured: Math.random() > 0.8\n  }));\n\ndescribe('UnifiedFeed Performance Tests', () => {\n  beforeEach(() => {\n    // Mock store implementations\n    mockUseFeeds.mockReturnValue({\n      feeds: [],\n      loading: false,\n      error: null,\n      refreshFeeds: jest.fn(),\n      likeFeed: jest.fn(),\n      shareFeed: jest.fn(),\n      commentFeed: jest.fn(),\n      bookmarkFeed: jest.fn()\n    });\n\n    mockUseHashtags.mockReturnValue({\n      hashtags: [],\n      loading: false,\n      error: null,\n      searchHashtags: jest.fn(),\n      followHashtag: jest.fn(),\n      unfollowHashtag: jest.fn(),\n      getTrendingHashtags: jest.fn()\n    });\n  });\n\n  afterEach(() => {\n    jest.clearAllMocks();\n  });\n\n  describe('Rendering Performance', () => {\n    test('should render small dataset (< 50 items) within 500ms', async () => {\n      const smallDataset = generateLargeFeedData(50);\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        feeds: smallDataset\n      });\n\n      const startTime = performance.now();\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      expect(renderTime).toBeLessThan(500);\n    });\n\n    test('should render medium dataset (50-200 items) within 1000ms', async () => {\n      const mediumDataset = generateLargeFeedData(200);\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        feeds: mediumDataset\n      });\n\n      const startTime = performance.now();\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      expect(renderTime).toBeLessThan(1000);\n    });\n\n    test('should render large dataset (200+ items) within 2000ms', async () => {\n      const largeDataset = generateLargeFeedData(500);\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        feeds: largeDataset\n      });\n\n      const startTime = performance.now();\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      expect(renderTime).toBeLessThan(2000);\n    });\n\n    test('should handle hashtag data efficiently', async () => {\n      const largeHashtagDataset = generateLargeHashtagData(1000);\n      mockUseHashtags.mockReturnValue({\n        ...mockUseHashtags(),\n        hashtags: largeHashtagDataset\n      });\n\n      const startTime = performance.now();\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      expect(renderTime).toBeLessThan(1500);\n    });\n  });\n\n  describe('Interaction Performance', () => {\n    test('should handle rapid clicks within acceptable time', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate rapid interactions\n      for (let i = 0; i < 20; i++) {\n        const likeButton = screen.getByLabelText(/like/i);\n        fireEvent.click(likeButton);\n        \n        // Small delay to simulate real user behavior\n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 10));\n        });\n      }\n      \n      const endTime = performance.now();\n      const totalTime = endTime - startTime;\n      \n      // Should handle 20 interactions within 1 second\n      expect(totalTime).toBeLessThan(1000);\n    });\n\n    test('should handle scroll events efficiently', async () => {\n      const largeDataset = generateLargeFeedData(300);\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        feeds: largeDataset\n      });\n\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate scroll events\n      for (let i = 0; i < 10; i++) {\n        fireEvent.scroll(window, { target: { scrollY: i * 100 } });\n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 50));\n        });\n      }\n      \n      const endTime = performance.now();\n      const totalTime = endTime - startTime;\n      \n      // Should handle scroll events efficiently\n      expect(totalTime).toBeLessThan(2000);\n    });\n\n    test('should handle filter changes efficiently', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate filter changes\n      for (let i = 0; i < 10; i++) {\n        const hashtag = screen.getByText(`hashtag${i % 10}`);\n        fireEvent.click(hashtag);\n        \n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 50));\n        });\n      }\n      \n      const endTime = performance.now();\n      const totalTime = endTime - startTime;\n      \n      // Should handle filter changes within 1 second\n      expect(totalTime).toBeLessThan(1000);\n    });\n  });\n\n  describe('Memory Performance', () => {\n    test('should not leak memory during repeated renders', async () => {\n      const initialMemory = (performance as any).memory?.usedJSHeapSize || 0;\n      \n      // Render and unmount component multiple times\n      for (let i = 0; i < 10; i++) {\n        const { unmount } = render(<UnifiedFeed />);\n        unmount();\n        \n        // Force garbage collection if available\n        if (global.gc) {\n          global.gc();\n        }\n      }\n      \n      const finalMemory = (performance as any).memory?.usedJSHeapSize || 0;\n      const memoryIncrease = finalMemory - initialMemory;\n      \n      // Memory increase should be minimal (< 10MB)\n      expect(memoryIncrease).toBeLessThan(10 * 1024 * 1024);\n    });\n\n    test('should handle large datasets without memory issues', async () => {\n      const veryLargeDataset = generateLargeFeedData(1000);\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        feeds: veryLargeDataset\n      });\n\n      const initialMemory = (performance as any).memory?.usedJSHeapSize || 0;\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      const finalMemory = (performance as any).memory?.usedJSHeapSize || 0;\n      const memoryIncrease = finalMemory - initialMemory;\n      \n      // Memory increase should be reasonable (< 50MB for 1000 items)\n      expect(memoryIncrease).toBeLessThan(50 * 1024 * 1024);\n    });\n  });\n\n  describe('Network Performance', () => {\n    test('should handle slow network responses gracefully', async () => {\n      // Mock slow network response\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        loading: true\n      });\n\n      const startTime = performance.now();\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      // Simulate slow loading\n      await act(async () => {\n        await new Promise(resolve => setTimeout(resolve, 2000));\n      });\n      \n      const endTime = performance.now();\n      const totalTime = endTime - startTime;\n      \n      // Should handle slow loading within 3 seconds\n      expect(totalTime).toBeLessThan(3000);\n    });\n\n    test('should handle network errors without performance degradation', async () => {\n      mockUseFeeds.mockReturnValue({\n        ...mockUseFeeds(),\n        error: 'Network error'\n      });\n\n      const startTime = performance.now();\n      \n      await act(async () => {\n        render(<UnifiedFeed />);\n      });\n      \n      const endTime = performance.now();\n      const renderTime = endTime - startTime;\n      \n      // Should render error state quickly\n      expect(renderTime).toBeLessThan(500);\n    });\n  });\n\n  describe('Animation Performance', () => {\n    test('should handle animations smoothly', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Trigger animations\n      const darkModeButton = screen.getByLabelText(/switch to dark mode/i);\n      fireEvent.click(darkModeButton);\n      \n      // Wait for animation to complete\n      await act(async () => {\n        await new Promise(resolve => setTimeout(resolve, 300));\n      });\n      \n      const endTime = performance.now();\n      const animationTime = endTime - startTime;\n      \n      // Animation should complete within 500ms\n      expect(animationTime).toBeLessThan(500);\n    });\n\n    test('should handle multiple simultaneous animations', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Trigger multiple animations simultaneously\n      const darkModeButton = screen.getByLabelText(/switch to dark mode/i);\n      const filtersButton = screen.getByLabelText(/toggle advanced filters/i);\n      \n      fireEvent.click(darkModeButton);\n      fireEvent.click(filtersButton);\n      \n      // Wait for animations to complete\n      await act(async () => {\n        await new Promise(resolve => setTimeout(resolve, 500));\n      });\n      \n      const endTime = performance.now();\n      const animationTime = endTime - startTime;\n      \n      // Multiple animations should complete within 1 second\n      expect(animationTime).toBeLessThan(1000);\n    });\n  });\n\n  describe('Real-time Updates Performance', () => {\n    test('should handle real-time updates efficiently', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate real-time updates\n      for (let i = 0; i < 10; i++) {\n        const newFeedData = generateLargeFeedData(10);\n        mockUseFeeds.mockReturnValue({\n          ...mockUseFeeds(),\n          feeds: newFeedData\n        });\n        \n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 100));\n        });\n      }\n      \n      const endTime = performance.now();\n      const updateTime = endTime - startTime;\n      \n      // Should handle 10 updates within 2 seconds\n      expect(updateTime).toBeLessThan(2000);\n    });\n\n    test('should handle WebSocket updates without performance issues', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate WebSocket updates\n      for (let i = 0; i < 5; i++) {\n        // Simulate WebSocket message\n        fireEvent(window, new Event('message'));\n        \n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 200));\n        });\n      }\n      \n      const endTime = performance.now();\n      const updateTime = endTime - startTime;\n      \n      // Should handle WebSocket updates within 1.5 seconds\n      expect(updateTime).toBeLessThan(1500);\n    });\n  });\n\n  describe('Accessibility Performance', () => {\n    test('should handle screen reader updates efficiently', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate screen reader updates\n      for (let i = 0; i < 5; i++) {\n        const likeButton = screen.getByLabelText(/like/i);\n        fireEvent.click(likeButton);\n        \n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 100));\n        });\n      }\n      \n      const endTime = performance.now();\n      const updateTime = endTime - startTime;\n      \n      // Should handle screen reader updates within 1 second\n      expect(updateTime).toBeLessThan(1000);\n    });\n\n    test('should handle keyboard navigation efficiently', async () => {\n      const component = <UnifiedFeed />;\n      render(component);\n      \n      const startTime = performance.now();\n      \n      // Simulate keyboard navigation\n      for (let i = 0; i < 10; i++) {\n        fireEvent.keyDown(document, { key: 'Tab' });\n        \n        await act(async () => {\n          await new Promise(resolve => setTimeout(resolve, 50));\n        });\n      }\n      \n      const endTime = performance.now();\n      const navigationTime = endTime - startTime;\n      \n      // Should handle keyboard navigation within 1 second\n      expect(navigationTime).toBeLessThan(1000);\n    });\n  });\n});\n"],"names":["jest","mock","createClient","fn","from","select","eq","single","Promise","resolve","data","error","order","limit","insert","update","delete","rpc","mockUseFeeds","useFeeds","mockUseHashtags","useHashtags","generateLargeFeedData","count","Array","length","_","i","id","type","title","description","hashtags","created_at","Date","now","toISOString","author","engagement","likes","Math","floor","random","shares","comments","generateLargeHashtagData","name","display_name","usage_count","follower_count","is_trending","trend_score","updated_at","is_verified","is_featured","describe","beforeEach","mockReturnValue","feeds","loading","refreshFeeds","likeFeed","shareFeed","commentFeed","bookmarkFeed","searchHashtags","followHashtag","unfollowHashtag","getTrendingHashtags","afterEach","clearAllMocks","test","smallDataset","startTime","performance","act","render","UnifiedFeed","endTime","renderTime","expect","toBeLessThan","mediumDataset","largeDataset","largeHashtagDataset","component","likeButton","screen","getByLabelText","fireEvent","click","setTimeout","totalTime","scroll","window","target","scrollY","hashtag","getByText","initialMemory","memory","usedJSHeapSize","unmount","global","gc","finalMemory","memoryIncrease","veryLargeDataset","darkModeButton","animationTime","filtersButton","newFeedData","updateTime","Event","keyDown","document","key","navigationTime"],"mappings":"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"}