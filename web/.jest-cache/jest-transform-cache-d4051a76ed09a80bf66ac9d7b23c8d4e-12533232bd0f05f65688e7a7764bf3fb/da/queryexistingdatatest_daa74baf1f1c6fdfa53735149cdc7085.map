{"version":3,"sources":["/Users/alaughingkitsune/src/Choices/web/tests/jest/integration/query-existing-data.test.ts"],"sourcesContent":["import { describe, it, expect } from '@jest/globals';\n\n/**\n * Query Existing Data Test\n * \n * Tests to see if we can query the existing data in the database\n * \n * Created: January 27, 2025\n * Status: ‚úÖ PRODUCTION READY\n */\n\ndescribe('Query Existing Data', () => {\n  it('should query existing polls data', async () => {\n    const { createClient } = await import('@supabase/supabase-js');\n    const supabaseUrl = process.env.SUPABASE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL;\n    const serviceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_SECRET_KEY;\n    \n    if (!supabaseUrl || !serviceKey) {\n      throw new Error('Supabase credentials not found');\n    }\n    \n    const supabase = createClient(supabaseUrl, serviceKey);\n    \n    console.log('üîç Querying existing polls data...');\n    \n    // Try to get a count first\n    const { count, error: countError } = await supabase\n      .from('polls')\n      .select('*', { count: 'exact', head: true });\n    \n    console.log('Count result:', { count, countError });\n    \n    // Try to get some polls\n    const { data: polls, error: pollsError } = await supabase\n      .from('polls')\n      .select('id, title, description, privacy_level, status')\n      .limit(5);\n    \n    console.log('Polls query result:', { polls, pollsError });\n    \n    // Try to get polls with specific privacy level\n    const { data: publicPolls, error: publicPollsError } = await supabase\n      .from('polls')\n      .select('id, title, description, privacy_level')\n      .eq('privacy_level', 'public')\n      .limit(5);\n    \n    console.log('Public polls query result:', { publicPolls, publicPollsError });\n    \n    // Try to get polls with specific status\n    const { data: activePolls, error: activePollsError } = await supabase\n      .from('polls')\n      .select('id, title, description, status')\n      .eq('status', 'active')\n      .limit(5);\n    \n    console.log('Active polls query result:', { activePolls, activePollsError });\n    \n    // Try to get a specific poll by title\n    const { data: specificPoll, error: specificPollError } = await supabase\n      .from('polls')\n      .select('*')\n      .eq('title', 'Sample Poll: Climate Action')\n      .single();\n    \n    console.log('Specific poll query result:', { specificPoll, specificPollError });\n    \n    // The test should pass if we can at least connect\n    expect(countError).toBeNull();\n    expect(pollsError).toBeNull();\n    expect(publicPollsError).toBeNull();\n    expect(activePollsError).toBeNull();\n    expect(specificPollError).toBeNull();\n  });\n});\n"],"names":["describe","it","createClient","supabaseUrl","process","env","SUPABASE_URL","NEXT_PUBLIC_SUPABASE_URL","serviceKey","SUPABASE_SERVICE_ROLE_KEY","SUPABASE_SECRET_KEY","Error","supabase","console","log","count","error","countError","from","select","head","data","polls","pollsError","limit","publicPolls","publicPollsError","eq","activePolls","activePollsError","specificPoll","specificPollError","single","expect","toBeNull"],"mappings":";;;;yBAAqC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAErC;;;;;;;CAOC,GAEDA,IAAAA,iBAAQ,EAAC,uBAAuB;IAC9BC,IAAAA,WAAE,EAAC,oCAAoC;QACrC,MAAM,EAAEC,YAAY,EAAE,GAAG,MAAM,mEAAA,QAAO;QACtC,MAAMC,cAAcC,QAAQC,GAAG,CAACC,YAAY,IAAIF,QAAQC,GAAG,CAACE,wBAAwB;QACpF,MAAMC,aAAaJ,QAAQC,GAAG,CAACI,yBAAyB,IAAIL,QAAQC,GAAG,CAACK,mBAAmB;QAE3F,IAAI,CAACP,eAAe,CAACK,YAAY;YAC/B,MAAM,IAAIG,MAAM;QAClB;QAEA,MAAMC,WAAWV,aAAaC,aAAaK;QAE3CK,QAAQC,GAAG,CAAC;QAEZ,2BAA2B;QAC3B,MAAM,EAAEC,KAAK,EAAEC,OAAOC,UAAU,EAAE,GAAG,MAAML,SACxCM,IAAI,CAAC,SACLC,MAAM,CAAC,KAAK;YAAEJ,OAAO;YAASK,MAAM;QAAK;QAE5CP,QAAQC,GAAG,CAAC,iBAAiB;YAAEC;YAAOE;QAAW;QAEjD,wBAAwB;QACxB,MAAM,EAAEI,MAAMC,KAAK,EAAEN,OAAOO,UAAU,EAAE,GAAG,MAAMX,SAC9CM,IAAI,CAAC,SACLC,MAAM,CAAC,iDACPK,KAAK,CAAC;QAETX,QAAQC,GAAG,CAAC,uBAAuB;YAAEQ;YAAOC;QAAW;QAEvD,+CAA+C;QAC/C,MAAM,EAAEF,MAAMI,WAAW,EAAET,OAAOU,gBAAgB,EAAE,GAAG,MAAMd,SAC1DM,IAAI,CAAC,SACLC,MAAM,CAAC,yCACPQ,EAAE,CAAC,iBAAiB,UACpBH,KAAK,CAAC;QAETX,QAAQC,GAAG,CAAC,8BAA8B;YAAEW;YAAaC;QAAiB;QAE1E,wCAAwC;QACxC,MAAM,EAAEL,MAAMO,WAAW,EAAEZ,OAAOa,gBAAgB,EAAE,GAAG,MAAMjB,SAC1DM,IAAI,CAAC,SACLC,MAAM,CAAC,kCACPQ,EAAE,CAAC,UAAU,UACbH,KAAK,CAAC;QAETX,QAAQC,GAAG,CAAC,8BAA8B;YAAEc;YAAaC;QAAiB;QAE1E,sCAAsC;QACtC,MAAM,EAAER,MAAMS,YAAY,EAAEd,OAAOe,iBAAiB,EAAE,GAAG,MAAMnB,SAC5DM,IAAI,CAAC,SACLC,MAAM,CAAC,KACPQ,EAAE,CAAC,SAAS,+BACZK,MAAM;QAETnB,QAAQC,GAAG,CAAC,+BAA+B;YAAEgB;YAAcC;QAAkB;QAE7E,kDAAkD;QAClDE,IAAAA,eAAM,EAAChB,YAAYiB,QAAQ;QAC3BD,IAAAA,eAAM,EAACV,YAAYW,QAAQ;QAC3BD,IAAAA,eAAM,EAACP,kBAAkBQ,QAAQ;QACjCD,IAAAA,eAAM,EAACJ,kBAAkBK,QAAQ;QACjCD,IAAAA,eAAM,EAACF,mBAAmBG,QAAQ;IACpC;AACF"}