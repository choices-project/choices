b4c93e371cefd9141b1a9071a9d3b006
/**
 * @jest-environment jsdom
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _reactrouterdom = require("react-router-dom");
const _SuperiorMobileFeed = /*#__PURE__*/ _interop_require_default(require("../../../../features/feeds/components/SuperiorMobileFeed"));
const _performanceprofiler = require("./performance-profiler");
const _logger = require("../../../../lib/utils/logger");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Setup minimal mocks for test environment
beforeAll(()=>{
    // Mock localStorage for component functionality
    Object.defineProperty(window, 'localStorage', {
        value: {
            getItem: jest.fn(),
            setItem: jest.fn(),
            removeItem: jest.fn(),
            clear: jest.fn()
        },
        writable: true
    });
    // Mock navigator for online status
    Object.defineProperty(navigator, 'onLine', {
        value: true,
        writable: true
    });
    // Mock fetch to handle API calls
    global.fetch = jest.fn((url)=>{
        if (url.includes('/api/feeds')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve([
                        {
                            id: '1',
                            title: 'Sample Civic Activity',
                            description: 'A sample civic activity for testing',
                            category: 'civic',
                            timestamp: new Date().toISOString(),
                            source: 'test'
                        }
                    ])
            });
        }
        if (url.includes('/api/civics/analytics')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true,
                        analytics: {
                            totalViews: 100,
                            engagement: 0.75,
                            userSatisfaction: 0.85
                        }
                    })
            });
        }
        if (url.includes('/api/pwa/offline/sync')) {
            return Promise.resolve({
                ok: true,
                json: ()=>Promise.resolve({
                        success: true
                    })
            });
        }
        return Promise.resolve({
            ok: true,
            json: ()=>Promise.resolve({})
        });
    });
});
describe('Advanced Performance Optimization Tests', ()=>{
    beforeEach(()=>{
        // Clear profiler before each test
        _performanceprofiler.performanceProfiler.clear();
    });
    describe('Performance Profiling', ()=>{
        it('should profile component performance with deep analysis', async ()=>{
            const componentName = 'SuperiorMobileFeed';
            // Start profiling
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            const startTime = performance.now();
            const startMemory = performance.memory?.usedJSHeapSize || 0;
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const endTime = performance.now();
            const endMemory = performance.memory?.usedJSHeapSize || 0;
            // Stop profiling and get metrics
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ” Deep Performance Analysis:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Memory Used: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
            _logger.logger.info(`- Re-render Triggers: ${metrics.reRenderTriggers.length}`);
            _logger.logger.info(`- Bottlenecks: ${metrics.performanceBottlenecks.length}`);
            _logger.logger.info(`- Recommendations: ${metrics.recommendations.length}`);
            // Verify metrics
            expect(metrics.componentName).toBe(componentName);
            expect(metrics.renderCount).toBe(1);
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
            expect(metrics.recommendations.length).toBeGreaterThan(0);
        });
        it('should create component profile with optimization analysis', async ()=>{
            const componentName = 'SuperiorMobileFeed';
            // Profile the component
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            // Create component profile
            const profile = _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            _logger.logger.info(`ðŸ“Š Component Profile Created:`);
            _logger.logger.info(`- Name: ${profile.name}`);
            _logger.logger.info(`- Depth: ${profile.depth}`);
            _logger.logger.info(`- Is Optimized: ${profile.isOptimized}`);
            _logger.logger.info(`- Optimization Potential: ${profile.optimizationPotential}`);
            _logger.logger.info(`- Optimization Score: ${profile.metrics.optimizationScore}/100`);
            // Verify profile
            expect(profile.name).toBe(componentName);
            expect(profile.metrics).toBe(metrics);
            expect(profile.depth).toBe(0);
            expect(typeof profile.isOptimized).toBe('boolean');
            expect([
                'HIGH',
                'MEDIUM',
                'LOW'
            ]).toContain(profile.optimizationPotential);
        });
        it('should generate comprehensive performance analysis', async ()=>{
            // Profile multiple components
            const components = [
                'SuperiorMobileFeed',
                'TestComponent1',
                'TestComponent2'
            ];
            for (const componentName of components){
                _performanceprofiler.performanceProfiler.startProfiling(componentName);
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
                const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, Math.floor(Math.random() * 5) + 1);
                _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            }
            // Generate comprehensive analysis
            const analysis = _performanceprofiler.performanceProfiler.generatePerformanceAnalysis();
            _logger.logger.info(`ðŸ“ˆ Comprehensive Performance Analysis:`);
            _logger.logger.info(`- Overall Score: ${analysis.overallScore.toFixed(2)}/100`);
            _logger.logger.info(`- Critical Issues: ${analysis.criticalIssues.length}`);
            _logger.logger.info(`- Optimization Opportunities: ${analysis.optimizationOpportunities.length}`);
            _logger.logger.info(`- Memory Leaks: ${analysis.memoryLeaks.length}`);
            _logger.logger.info(`- Render Optimizations: ${analysis.renderOptimizations.length}`);
            _logger.logger.info(`- Network Optimizations: ${analysis.networkOptimizations.length}`);
            _logger.logger.info(`- Accessibility Optimizations: ${analysis.accessibilityOptimizations.length}`);
            _logger.logger.info(`- Recommendations: ${analysis.recommendations.length}`);
            _logger.logger.info(`- Estimated Improvement: ${analysis.estimatedImprovement.toFixed(2)}%`);
            // Verify analysis
            expect(analysis.overallScore).toBeGreaterThanOrEqual(0);
            expect(analysis.overallScore).toBeLessThanOrEqual(100);
            expect(Array.isArray(analysis.criticalIssues)).toBe(true);
            expect(Array.isArray(analysis.optimizationOpportunities)).toBe(true);
            expect(Array.isArray(analysis.memoryLeaks)).toBe(true);
            expect(Array.isArray(analysis.renderOptimizations)).toBe(true);
            expect(Array.isArray(analysis.networkOptimizations)).toBe(true);
            expect(Array.isArray(analysis.accessibilityOptimizations)).toBe(true);
            expect(Array.isArray(analysis.recommendations)).toBe(true);
            expect(analysis.estimatedImprovement).toBeGreaterThanOrEqual(0);
        });
    });
    describe('Memory Optimization', ()=>{
        it('should identify memory optimization opportunities', async ()=>{
            const componentName = 'MemoryOptimizationTest';
            // Simulate memory-intensive operations
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ§  Memory Optimization Analysis:`);
            _logger.logger.info(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Memory Average: ${metrics.memoryAverage.toFixed(2)}MB`);
            _logger.logger.info(`- Memory Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('memory')).length}`);
            // Check for memory optimization recommendations
            const memoryRecommendations = metrics.recommendations.filter((r)=>r.includes('memory') || r.includes('cleanup') || r.includes('leak'));
            _logger.logger.info(`- Memory Recommendations: ${memoryRecommendations.length}`);
            memoryRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.memoryAverage).toBeGreaterThanOrEqual(0);
            expect(Array.isArray(memoryRecommendations)).toBe(true);
        });
        it('should detect potential memory leaks', async ()=>{
            const componentName = 'MemoryLeakTest';
            // Simulate multiple renders to detect memory leaks
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            for(let i = 0; i < 5; i++){
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
            }
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 5);
            _logger.logger.info(`ðŸ” Memory Leak Detection:`);
            _logger.logger.info(`- Render Count: ${metrics.renderCount}`);
            _logger.logger.info(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Memory Average: ${metrics.memoryAverage.toFixed(2)}MB`);
            // Check for memory leak indicators
            const memoryLeakIndicators = metrics.performanceBottlenecks.filter((b)=>b.includes('memory') || b.includes('leak'));
            _logger.logger.info(`- Memory Leak Indicators: ${memoryLeakIndicators.length}`);
            memoryLeakIndicators.forEach((indicator)=>_logger.logger.info(`  - ${indicator}`));
            expect(metrics.renderCount).toBe(5);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
        });
    });
    describe('Network Optimization', ()=>{
        it('should analyze network performance and optimization', async ()=>{
            const componentName = 'NetworkOptimizationTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸŒ Network Optimization Analysis:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Network Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('network')).length}`);
            // Check for network optimization recommendations
            const networkRecommendations = metrics.recommendations.filter((r)=>r.includes('network') || r.includes('API') || r.includes('request') || r.includes('cache'));
            _logger.logger.info(`- Network Recommendations: ${networkRecommendations.length}`);
            networkRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(Array.isArray(networkRecommendations)).toBe(true);
        });
        it('should identify API performance bottlenecks', async ()=>{
            const componentName = 'APIPerformanceTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            // Simulate API calls
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ”Œ API Performance Analysis:`);
            _logger.logger.info(`- API Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('API')).length}`);
            _logger.logger.info(`- Network Recommendations: ${metrics.recommendations.filter((r)=>r.includes('API')).length}`);
            // Verify API performance analysis
            expect(metrics.performanceBottlenecks).toBeDefined();
            expect(metrics.recommendations).toBeDefined();
        });
    });
    describe('Accessibility Optimization', ()=>{
        it('should analyze accessibility performance', async ()=>{
            const componentName = 'AccessibilityOptimizationTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`â™¿ Accessibility Performance Analysis:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Accessibility Bottlenecks: ${metrics.performanceBottlenecks.filter((b)=>b.includes('accessibility')).length}`);
            // Check for accessibility optimization recommendations
            const accessibilityRecommendations = metrics.recommendations.filter((r)=>r.includes('accessibility') || r.includes('screen reader') || r.includes('ARIA'));
            _logger.logger.info(`- Accessibility Recommendations: ${accessibilityRecommendations.length}`);
            accessibilityRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.componentName).toBe(componentName);
            expect(Array.isArray(accessibilityRecommendations)).toBe(true);
        });
        it('should optimize screen reader performance', async ()=>{
            const componentName = 'ScreenReaderOptimizationTest';
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            await (0, _react1.act)(async ()=>{
                (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                    children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                }));
            });
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
            _logger.logger.info(`ðŸ“± Screen Reader Performance:`);
            _logger.logger.info(`- Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
            // Check for screen reader optimization recommendations
            const screenReaderRecommendations = metrics.recommendations.filter((r)=>r.includes('screen reader') || r.includes('announcement') || r.includes('ARIA'));
            _logger.logger.info(`- Screen Reader Recommendations: ${screenReaderRecommendations.length}`);
            screenReaderRecommendations.forEach((rec)=>_logger.logger.info(`  - ${rec}`));
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
        });
    });
    describe('Production Monitoring', ()=>{
        it('should simulate production performance monitoring', async ()=>{
            const componentName = 'ProductionMonitoringTest';
            // Simulate production-like conditions
            _performanceprofiler.performanceProfiler.startProfiling(componentName);
            // Simulate multiple renders under production conditions
            for(let i = 0; i < 3; i++){
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
            }
            const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 3);
            _logger.logger.info(`ðŸ­ Production Performance Monitoring:`);
            _logger.logger.info(`- Component: ${metrics.componentName}`);
            _logger.logger.info(`- Render Count: ${metrics.renderCount}`);
            _logger.logger.info(`- Total Render Time: ${metrics.totalRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Average Render Time: ${metrics.averageRenderTime.toFixed(2)}ms`);
            _logger.logger.info(`- Memory Peak: ${metrics.memoryPeak.toFixed(2)}MB`);
            _logger.logger.info(`- Optimization Score: ${metrics.optimizationScore}/100`);
            // Verify production monitoring metrics
            expect(metrics.renderCount).toBe(3);
            expect(metrics.totalRenderTime).toBeGreaterThan(0);
            expect(metrics.averageRenderTime).toBeGreaterThan(0);
            expect(metrics.memoryPeak).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeGreaterThanOrEqual(0);
            expect(metrics.optimizationScore).toBeLessThanOrEqual(100);
        });
        it('should export comprehensive profiling data', async ()=>{
            // Profile multiple components
            const components = [
                'Component1',
                'Component2',
                'Component3'
            ];
            for (const componentName of components){
                _performanceprofiler.performanceProfiler.startProfiling(componentName);
                await (0, _react1.act)(async ()=>{
                    (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_reactrouterdom.BrowserRouter, {
                        children: /*#__PURE__*/ (0, _jsxruntime.jsx)(_SuperiorMobileFeed.default, {})
                    }));
                });
                const metrics = _performanceprofiler.performanceProfiler.stopProfiling(componentName, 1);
                _performanceprofiler.performanceProfiler.createComponentProfile(componentName, metrics);
            }
            // Export profiling data
            const exportedData = _performanceprofiler.performanceProfiler.exportProfilingData();
            const parsedData = JSON.parse(exportedData);
            _logger.logger.info(`ðŸ“¤ Exported Profiling Data:`);
            _logger.logger.info(`- Profiles: ${parsedData.profiles.length}`);
            _logger.logger.info(`- Metrics: ${parsedData.metrics.length}`);
            _logger.logger.info(`- Analysis Generated: ${!!parsedData.analysis}`);
            expect(parsedData.profiles).toBeDefined();
            expect(parsedData.metrics).toBeDefined();
            expect(parsedData.analysis).toBeDefined();
            expect(parsedData.profiles.length).toBe(3);
            expect(parsedData.metrics.length).toBe(3);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbGF1Z2hpbmdraXRzdW5lL3NyYy9DaG9pY2VzL3dlYi90ZXN0cy9qZXN0L3VuaXQvcGVyZm9ybWFuY2UvYWR2YW5jZWQtb3B0aW1pemF0aW9uLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGplc3QtZW52aXJvbm1lbnQganNkb21cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgcmVuZGVyLCBzY3JlZW4sIHdhaXRGb3IsIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgQnJvd3NlclJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xuaW1wb3J0IFN1cGVyaW9yTW9iaWxlRmVlZCBmcm9tICdAL2ZlYXR1cmVzL2ZlZWRzL2NvbXBvbmVudHMvU3VwZXJpb3JNb2JpbGVGZWVkJztcbmltcG9ydCB7IHBlcmZvcm1hbmNlUHJvZmlsZXIsIFByb2ZpbGVyTWV0cmljcywgQ29tcG9uZW50UHJvZmlsZSB9IGZyb20gJy4vcGVyZm9ybWFuY2UtcHJvZmlsZXInO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQC9saWIvdXRpbHMvbG9nZ2VyJztcblxuLy8gU2V0dXAgbWluaW1hbCBtb2NrcyBmb3IgdGVzdCBlbnZpcm9ubWVudFxuYmVmb3JlQWxsKCgpID0+IHtcbiAgLy8gTW9jayBsb2NhbFN0b3JhZ2UgZm9yIGNvbXBvbmVudCBmdW5jdGlvbmFsaXR5XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XG4gICAgdmFsdWU6IHtcbiAgICAgIGdldEl0ZW06IGplc3QuZm4oKSxcbiAgICAgIHNldEl0ZW06IGplc3QuZm4oKSxcbiAgICAgIHJlbW92ZUl0ZW06IGplc3QuZm4oKSxcbiAgICAgIGNsZWFyOiBqZXN0LmZuKCksXG4gICAgfSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgfSk7XG4gIFxuICAvLyBNb2NrIG5hdmlnYXRvciBmb3Igb25saW5lIHN0YXR1c1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmF2aWdhdG9yLCAnb25MaW5lJywge1xuICAgIHZhbHVlOiB0cnVlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICB9KTtcblxuICAvLyBNb2NrIGZldGNoIHRvIGhhbmRsZSBBUEkgY2FsbHNcbiAgZ2xvYmFsLmZldGNoID0gamVzdC5mbigodXJsOiBzdHJpbmcpID0+IHtcbiAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2ZlZWRzJykpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJzEnLFxuICAgICAgICAgICAgdGl0bGU6ICdTYW1wbGUgQ2l2aWMgQWN0aXZpdHknLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBIHNhbXBsZSBjaXZpYyBhY3Rpdml0eSBmb3IgdGVzdGluZycsXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2NpdmljJyxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgc291cmNlOiAndGVzdCdcbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICB9IGFzIFJlc3BvbnNlKTtcbiAgICB9XG4gICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9jaXZpY3MvYW5hbHl0aWNzJykpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGFuYWx5dGljczoge1xuICAgICAgICAgICAgdG90YWxWaWV3czogMTAwLFxuICAgICAgICAgICAgZW5nYWdlbWVudDogMC43NSxcbiAgICAgICAgICAgIHVzZXJTYXRpc2ZhY3Rpb246IDAuODVcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGFzIFJlc3BvbnNlKTtcbiAgICB9XG4gICAgaWYgKHVybC5pbmNsdWRlcygnL2FwaS9wd2Evb2ZmbGluZS9zeW5jJykpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBvazogdHJ1ZSxcbiAgICAgICAganNvbjogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSB9KVxuICAgICAgfSBhcyBSZXNwb25zZSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgb2s6IHRydWUsXG4gICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pXG4gICAgfSBhcyBSZXNwb25zZSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdBZHZhbmNlZCBQZXJmb3JtYW5jZSBPcHRpbWl6YXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIENsZWFyIHByb2ZpbGVyIGJlZm9yZSBlYWNoIHRlc3RcbiAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLmNsZWFyKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBQcm9maWxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBwcm9maWxlIGNvbXBvbmVudCBwZXJmb3JtYW5jZSB3aXRoIGRlZXAgYW5hbHlzaXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ1N1cGVyaW9yTW9iaWxlRmVlZCc7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHByb2ZpbGluZ1xuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBjb25zdCBzdGFydE1lbW9yeSA9IHBlcmZvcm1hbmNlLm1lbW9yeT8udXNlZEpTSGVhcFNpemUgfHwgMDtcbiAgICAgIFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgcmVuZGVyKFxuICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgPFN1cGVyaW9yTW9iaWxlRmVlZCAvPlxuICAgICAgICAgIDwvQnJvd3NlclJvdXRlcj5cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICBjb25zdCBlbmRNZW1vcnkgPSBwZXJmb3JtYW5jZS5tZW1vcnk/LnVzZWRKU0hlYXBTaXplIHx8IDA7XG4gICAgICBcbiAgICAgIC8vIFN0b3AgcHJvZmlsaW5nIGFuZCBnZXQgbWV0cmljc1xuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCflI0gRGVlcCBQZXJmb3JtYW5jZSBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIENvbXBvbmVudDogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBSZW5kZXIgVGltZTogJHttZXRyaWNzLnRvdGFsUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgVXNlZDogJHttZXRyaWNzLm1lbW9yeVBlYWsudG9GaXhlZCgyKX1NQmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gT3B0aW1pemF0aW9uIFNjb3JlOiAke21ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmV9LzEwMGApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmUtcmVuZGVyIFRyaWdnZXJzOiAke21ldHJpY3MucmVSZW5kZXJUcmlnZ2Vycy5sZW5ndGh9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBCb3R0bGVuZWNrczogJHttZXRyaWNzLnBlcmZvcm1hbmNlQm90dGxlbmVja3MubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVjb21tZW5kYXRpb25zOiAke21ldHJpY3MucmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IG1ldHJpY3NcbiAgICAgIGV4cGVjdChtZXRyaWNzLmNvbXBvbmVudE5hbWUpLnRvQmUoY29tcG9uZW50TmFtZSk7XG4gICAgICBleHBlY3QobWV0cmljcy5yZW5kZXJDb3VudCkudG9CZSgxKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsUmVuZGVyVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MubWVtb3J5UGVhaykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3Mub3B0aW1pemF0aW9uU2NvcmUpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnJlY29tbWVuZGF0aW9ucy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGNvbXBvbmVudCBwcm9maWxlIHdpdGggb3B0aW1pemF0aW9uIGFuYWx5c2lzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdTdXBlcmlvck1vYmlsZUZlZWQnO1xuICAgICAgXG4gICAgICAvLyBQcm9maWxlIHRoZSBjb21wb25lbnRcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGNvbXBvbmVudCBwcm9maWxlXG4gICAgICBjb25zdCBwcm9maWxlID0gcGVyZm9ybWFuY2VQcm9maWxlci5jcmVhdGVDb21wb25lbnRQcm9maWxlKGNvbXBvbmVudE5hbWUsIG1ldHJpY3MpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+TiiBDb21wb25lbnQgUHJvZmlsZSBDcmVhdGVkOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTmFtZTogJHtwcm9maWxlLm5hbWV9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBEZXB0aDogJHtwcm9maWxlLmRlcHRofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gSXMgT3B0aW1pemVkOiAke3Byb2ZpbGUuaXNPcHRpbWl6ZWR9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBPcHRpbWl6YXRpb24gUG90ZW50aWFsOiAke3Byb2ZpbGUub3B0aW1pemF0aW9uUG90ZW50aWFsfWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gT3B0aW1pemF0aW9uIFNjb3JlOiAke3Byb2ZpbGUubWV0cmljcy5vcHRpbWl6YXRpb25TY29yZX0vMTAwYCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBwcm9maWxlXG4gICAgICBleHBlY3QocHJvZmlsZS5uYW1lKS50b0JlKGNvbXBvbmVudE5hbWUpO1xuICAgICAgZXhwZWN0KHByb2ZpbGUubWV0cmljcykudG9CZShtZXRyaWNzKTtcbiAgICAgIGV4cGVjdChwcm9maWxlLmRlcHRoKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHR5cGVvZiBwcm9maWxlLmlzT3B0aW1pemVkKS50b0JlKCdib29sZWFuJyk7XG4gICAgICBleHBlY3QoWydISUdIJywgJ01FRElVTScsICdMT1cnXSkudG9Db250YWluKHByb2ZpbGUub3B0aW1pemF0aW9uUG90ZW50aWFsKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZ2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBwZXJmb3JtYW5jZSBhbmFseXNpcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFByb2ZpbGUgbXVsdGlwbGUgY29tcG9uZW50c1xuICAgICAgY29uc3QgY29tcG9uZW50cyA9IFsnU3VwZXJpb3JNb2JpbGVGZWVkJywgJ1Rlc3RDb21wb25lbnQxJywgJ1Rlc3RDb21wb25lbnQyJ107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgY29tcG9uZW50TmFtZSBvZiBjb21wb25lbnRzKSB7XG4gICAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJlbmRlcihcbiAgICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpICsgMSk7XG4gICAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuY3JlYXRlQ29tcG9uZW50UHJvZmlsZShjb21wb25lbnROYW1lLCBtZXRyaWNzKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gR2VuZXJhdGUgY29tcHJlaGVuc2l2ZSBhbmFseXNpc1xuICAgICAgY29uc3QgYW5hbHlzaXMgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLmdlbmVyYXRlUGVyZm9ybWFuY2VBbmFseXNpcygpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+TiCBDb21wcmVoZW5zaXZlIFBlcmZvcm1hbmNlIEFuYWx5c2lzOmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gT3ZlcmFsbCBTY29yZTogJHthbmFseXNpcy5vdmVyYWxsU2NvcmUudG9GaXhlZCgyKX0vMTAwYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBDcml0aWNhbCBJc3N1ZXM6ICR7YW5hbHlzaXMuY3JpdGljYWxJc3N1ZXMubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gT3B0aW1pemF0aW9uIE9wcG9ydHVuaXRpZXM6ICR7YW5hbHlzaXMub3B0aW1pemF0aW9uT3Bwb3J0dW5pdGllcy5sZW5ndGh9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgTGVha3M6ICR7YW5hbHlzaXMubWVtb3J5TGVha3MubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIE9wdGltaXphdGlvbnM6ICR7YW5hbHlzaXMucmVuZGVyT3B0aW1pemF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBOZXR3b3JrIE9wdGltaXphdGlvbnM6ICR7YW5hbHlzaXMubmV0d29ya09wdGltaXphdGlvbnMubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gQWNjZXNzaWJpbGl0eSBPcHRpbWl6YXRpb25zOiAke2FuYWx5c2lzLmFjY2Vzc2liaWxpdHlPcHRpbWl6YXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIFJlY29tbWVuZGF0aW9uczogJHthbmFseXNpcy5yZWNvbW1lbmRhdGlvbnMubGVuZ3RofWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gRXN0aW1hdGVkIEltcHJvdmVtZW50OiAke2FuYWx5c2lzLmVzdGltYXRlZEltcHJvdmVtZW50LnRvRml4ZWQoMil9JWApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgYW5hbHlzaXNcbiAgICAgIGV4cGVjdChhbmFseXNpcy5vdmVyYWxsU2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoYW5hbHlzaXMub3ZlcmFsbFNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5jcml0aWNhbElzc3VlcykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShhbmFseXNpcy5vcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLm1lbW9yeUxlYWtzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGFuYWx5c2lzLnJlbmRlck9wdGltaXphdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMubmV0d29ya09wdGltaXphdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMuYWNjZXNzaWJpbGl0eU9wdGltaXphdGlvbnMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYW5hbHlzaXMucmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChhbmFseXNpcy5lc3RpbWF0ZWRJbXByb3ZlbWVudCkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01lbW9yeSBPcHRpbWl6YXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpZGVudGlmeSBtZW1vcnkgb3B0aW1pemF0aW9uIG9wcG9ydHVuaXRpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ01lbW9yeU9wdGltaXphdGlvblRlc3QnO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBtZW1vcnktaW50ZW5zaXZlIG9wZXJhdGlvbnNcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCfp6AgTWVtb3J5IE9wdGltaXphdGlvbiBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE1lbW9yeSBQZWFrOiAke21ldHJpY3MubWVtb3J5UGVhay50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgQXZlcmFnZTogJHttZXRyaWNzLm1lbW9yeUF2ZXJhZ2UudG9GaXhlZCgyKX1NQmApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5maWx0ZXIoYiA9PiBiLmluY2x1ZGVzKCdtZW1vcnknKSkubGVuZ3RofWApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgbWVtb3J5IG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IG1lbW9yeVJlY29tbWVuZGF0aW9ucyA9IG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCdtZW1vcnknKSB8fCByLmluY2x1ZGVzKCdjbGVhbnVwJykgfHwgci5pbmNsdWRlcygnbGVhaycpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgUmVjb21tZW5kYXRpb25zOiAke21lbW9yeVJlY29tbWVuZGF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBtZW1vcnlSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4gbG9nZ2VyLmluZm8oYCAgLSAke3JlY31gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVBlYWspLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5tZW1vcnlBdmVyYWdlKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobWVtb3J5UmVjb21tZW5kYXRpb25zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGV0ZWN0IHBvdGVudGlhbCBtZW1vcnkgbGVha3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ01lbW9yeUxlYWtUZXN0JztcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgbXVsdGlwbGUgcmVuZGVycyB0byBkZXRlY3QgbWVtb3J5IGxlYWtzXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHJlbmRlcihcbiAgICAgICAgICAgIDxCcm93c2VyUm91dGVyPlxuICAgICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgNSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGDwn5SNIE1lbW9yeSBMZWFrIERldGVjdGlvbjpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIFJlbmRlciBDb3VudDogJHttZXRyaWNzLnJlbmRlckNvdW50fWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IFBlYWs6ICR7bWV0cmljcy5tZW1vcnlQZWFrLnRvRml4ZWQoMil9TUJgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE1lbW9yeSBBdmVyYWdlOiAke21ldHJpY3MubWVtb3J5QXZlcmFnZS50b0ZpeGVkKDIpfU1CYCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBtZW1vcnkgbGVhayBpbmRpY2F0b3JzXG4gICAgICBjb25zdCBtZW1vcnlMZWFrSW5kaWNhdG9ycyA9IG1ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5maWx0ZXIoYiA9PiBcbiAgICAgICAgYi5pbmNsdWRlcygnbWVtb3J5JykgfHwgYi5pbmNsdWRlcygnbGVhaycpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgLSBNZW1vcnkgTGVhayBJbmRpY2F0b3JzOiAke21lbW9yeUxlYWtJbmRpY2F0b3JzLmxlbmd0aH1gKTtcbiAgICAgIG1lbW9yeUxlYWtJbmRpY2F0b3JzLmZvckVhY2goaW5kaWNhdG9yID0+IGxvZ2dlci5pbmZvKGAgIC0gJHtpbmRpY2F0b3J9YCkpO1xuICAgICAgXG4gICAgICBleHBlY3QobWV0cmljcy5yZW5kZXJDb3VudCkudG9CZSg1KTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVBlYWspLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdOZXR3b3JrIE9wdGltaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFuYWx5emUgbmV0d29yayBwZXJmb3JtYW5jZSBhbmQgb3B0aW1pemF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9ICdOZXR3b3JrT3B0aW1pemF0aW9uVGVzdCc7XG4gICAgICBcbiAgICAgIHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29tcG9uZW50TmFtZSk7XG4gICAgICBcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIHJlbmRlcihcbiAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgIDxTdXBlcmlvck1vYmlsZUZlZWQgLz5cbiAgICAgICAgICA8L0Jyb3dzZXJSb3V0ZXI+XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCfjJAgTmV0d29yayBPcHRpbWl6YXRpb24gQW5hbHlzaXM6YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBDb21wb25lbnQ6ICR7bWV0cmljcy5jb21wb25lbnROYW1lfWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIFRpbWU6ICR7bWV0cmljcy50b3RhbFJlbmRlclRpbWUudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTmV0d29yayBCb3R0bGVuZWNrczogJHttZXRyaWNzLnBlcmZvcm1hbmNlQm90dGxlbmVja3MuZmlsdGVyKGIgPT4gYi5pbmNsdWRlcygnbmV0d29yaycpKS5sZW5ndGh9YCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBuZXR3b3JrIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IG5ldHdvcmtSZWNvbW1lbmRhdGlvbnMgPSBtZXRyaWNzLnJlY29tbWVuZGF0aW9ucy5maWx0ZXIociA9PiBcbiAgICAgICAgci5pbmNsdWRlcygnbmV0d29yaycpIHx8IHIuaW5jbHVkZXMoJ0FQSScpIHx8IHIuaW5jbHVkZXMoJ3JlcXVlc3QnKSB8fCByLmluY2x1ZGVzKCdjYWNoZScpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgLSBOZXR3b3JrIFJlY29tbWVuZGF0aW9uczogJHtuZXR3b3JrUmVjb21tZW5kYXRpb25zLmxlbmd0aH1gKTtcbiAgICAgIG5ldHdvcmtSZWNvbW1lbmRhdGlvbnMuZm9yRWFjaChyZWMgPT4gbG9nZ2VyLmluZm8oYCAgLSAke3JlY31gKSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsUmVuZGVyVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkobmV0d29ya1JlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IEFQSSBwZXJmb3JtYW5jZSBib3R0bGVuZWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnQVBJUGVyZm9ybWFuY2VUZXN0JztcbiAgICAgIFxuICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5zdGFydFByb2ZpbGluZyhjb21wb25lbnROYW1lKTtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgQVBJIGNhbGxzXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgMSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGDwn5SMIEFQSSBQZXJmb3JtYW5jZSBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEFQSSBCb3R0bGVuZWNrczogJHttZXRyaWNzLnBlcmZvcm1hbmNlQm90dGxlbmVja3MuZmlsdGVyKGIgPT4gYi5pbmNsdWRlcygnQVBJJykpLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE5ldHdvcmsgUmVjb21tZW5kYXRpb25zOiAke21ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IHIuaW5jbHVkZXMoJ0FQSScpKS5sZW5ndGh9YCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBBUEkgcGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICAgIGV4cGVjdChtZXRyaWNzLnBlcmZvcm1hbmNlQm90dGxlbmVja3MpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobWV0cmljcy5yZWNvbW1lbmRhdGlvbnMpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBY2Nlc3NpYmlsaXR5IE9wdGltaXphdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFuYWx5emUgYWNjZXNzaWJpbGl0eSBwZXJmb3JtYW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAnQWNjZXNzaWJpbGl0eU9wdGltaXphdGlvblRlc3QnO1xuICAgICAgXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgMSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGDimb8gQWNjZXNzaWJpbGl0eSBQZXJmb3JtYW5jZSBBbmFseXNpczpgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIENvbXBvbmVudDogJHttZXRyaWNzLmNvbXBvbmVudE5hbWV9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBBY2Nlc3NpYmlsaXR5IEJvdHRsZW5lY2tzOiAke21ldHJpY3MucGVyZm9ybWFuY2VCb3R0bGVuZWNrcy5maWx0ZXIoYiA9PiBiLmluY2x1ZGVzKCdhY2Nlc3NpYmlsaXR5JykpLmxlbmd0aH1gKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGFjY2Vzc2liaWxpdHkgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uc1xuICAgICAgY29uc3QgYWNjZXNzaWJpbGl0eVJlY29tbWVuZGF0aW9ucyA9IG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCdhY2Nlc3NpYmlsaXR5JykgfHwgci5pbmNsdWRlcygnc2NyZWVuIHJlYWRlcicpIHx8IHIuaW5jbHVkZXMoJ0FSSUEnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYC0gQWNjZXNzaWJpbGl0eSBSZWNvbW1lbmRhdGlvbnM6ICR7YWNjZXNzaWJpbGl0eVJlY29tbWVuZGF0aW9ucy5sZW5ndGh9YCk7XG4gICAgICBhY2Nlc3NpYmlsaXR5UmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IGxvZ2dlci5pbmZvKGAgIC0gJHtyZWN9YCkpO1xuICAgICAgXG4gICAgICBleHBlY3QobWV0cmljcy5jb21wb25lbnROYW1lKS50b0JlKGNvbXBvbmVudE5hbWUpO1xuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoYWNjZXNzaWJpbGl0eVJlY29tbWVuZGF0aW9ucykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wdGltaXplIHNjcmVlbiByZWFkZXIgcGVyZm9ybWFuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ1NjcmVlblJlYWRlck9wdGltaXphdGlvblRlc3QnO1xuICAgICAgXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICByZW5kZXIoXG4gICAgICAgICAgPEJyb3dzZXJSb3V0ZXI+XG4gICAgICAgICAgICA8U3VwZXJpb3JNb2JpbGVGZWVkIC8+XG4gICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1ldHJpY3MgPSBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29tcG9uZW50TmFtZSwgMSk7XG4gICAgICBcbiAgICAgIGxvZ2dlci5pbmZvKGDwn5OxIFNjcmVlbiBSZWFkZXIgUGVyZm9ybWFuY2U6YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBSZW5kZXIgVGltZTogJHttZXRyaWNzLnRvdGFsUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBPcHRpbWl6YXRpb24gU2NvcmU6ICR7bWV0cmljcy5vcHRpbWl6YXRpb25TY29yZX0vMTAwYCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBzY3JlZW4gcmVhZGVyIG9wdGltaXphdGlvbiByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGNvbnN0IHNjcmVlblJlYWRlclJlY29tbWVuZGF0aW9ucyA9IG1ldHJpY3MucmVjb21tZW5kYXRpb25zLmZpbHRlcihyID0+IFxuICAgICAgICByLmluY2x1ZGVzKCdzY3JlZW4gcmVhZGVyJykgfHwgci5pbmNsdWRlcygnYW5ub3VuY2VtZW50JykgfHwgci5pbmNsdWRlcygnQVJJQScpXG4gICAgICApO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhgLSBTY3JlZW4gUmVhZGVyIFJlY29tbWVuZGF0aW9uczogJHtzY3JlZW5SZWFkZXJSZWNvbW1lbmRhdGlvbnMubGVuZ3RofWApO1xuICAgICAgc2NyZWVuUmVhZGVyUmVjb21tZW5kYXRpb25zLmZvckVhY2gocmVjID0+IGxvZ2dlci5pbmZvKGAgIC0gJHtyZWN9YCkpO1xuICAgICAgXG4gICAgICBleHBlY3QobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9kdWN0aW9uIE1vbml0b3JpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzaW11bGF0ZSBwcm9kdWN0aW9uIHBlcmZvcm1hbmNlIG1vbml0b3JpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wb25lbnROYW1lID0gJ1Byb2R1Y3Rpb25Nb25pdG9yaW5nVGVzdCc7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIHByb2R1Y3Rpb24tbGlrZSBjb25kaXRpb25zXG4gICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBtdWx0aXBsZSByZW5kZXJzIHVuZGVyIHByb2R1Y3Rpb24gY29uZGl0aW9uc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgICAgPFN1cGVyaW9yTW9iaWxlRmVlZCAvPlxuICAgICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBtZXRyaWNzID0gcGVyZm9ybWFuY2VQcm9maWxlci5zdG9wUHJvZmlsaW5nKGNvbXBvbmVudE5hbWUsIDMpO1xuICAgICAgXG4gICAgICBsb2dnZXIuaW5mbyhg8J+PrSBQcm9kdWN0aW9uIFBlcmZvcm1hbmNlIE1vbml0b3Jpbmc6YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBDb21wb25lbnQ6ICR7bWV0cmljcy5jb21wb25lbnROYW1lfWApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gUmVuZGVyIENvdW50OiAke21ldHJpY3MucmVuZGVyQ291bnR9YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBUb3RhbCBSZW5kZXIgVGltZTogJHttZXRyaWNzLnRvdGFsUmVuZGVyVGltZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBBdmVyYWdlIFJlbmRlciBUaW1lOiAke21ldHJpY3MuYXZlcmFnZVJlbmRlclRpbWUudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgbG9nZ2VyLmluZm8oYC0gTWVtb3J5IFBlYWs6ICR7bWV0cmljcy5tZW1vcnlQZWFrLnRvRml4ZWQoMil9TUJgKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE9wdGltaXphdGlvbiBTY29yZTogJHttZXRyaWNzLm9wdGltaXphdGlvblNjb3JlfS8xMDBgKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHByb2R1Y3Rpb24gbW9uaXRvcmluZyBtZXRyaWNzXG4gICAgICBleHBlY3QobWV0cmljcy5yZW5kZXJDb3VudCkudG9CZSgzKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLnRvdGFsUmVuZGVyVGltZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KG1ldHJpY3MuYXZlcmFnZVJlbmRlclRpbWUpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm1lbW9yeVBlYWspLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QobWV0cmljcy5vcHRpbWl6YXRpb25TY29yZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChtZXRyaWNzLm9wdGltaXphdGlvblNjb3JlKS50b0JlTGVzc1RoYW5PckVxdWFsKDEwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGV4cG9ydCBjb21wcmVoZW5zaXZlIHByb2ZpbGluZyBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gUHJvZmlsZSBtdWx0aXBsZSBjb21wb25lbnRzXG4gICAgICBjb25zdCBjb21wb25lbnRzID0gWydDb21wb25lbnQxJywgJ0NvbXBvbmVudDInLCAnQ29tcG9uZW50MyddO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudE5hbWUgb2YgY29tcG9uZW50cykge1xuICAgICAgICBwZXJmb3JtYW5jZVByb2ZpbGVyLnN0YXJ0UHJvZmlsaW5nKGNvbXBvbmVudE5hbWUpO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICByZW5kZXIoXG4gICAgICAgICAgICA8QnJvd3NlclJvdXRlcj5cbiAgICAgICAgICAgICAgPFN1cGVyaW9yTW9iaWxlRmVlZCAvPlxuICAgICAgICAgICAgPC9Ccm93c2VyUm91dGVyPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuc3RvcFByb2ZpbGluZyhjb21wb25lbnROYW1lLCAxKTtcbiAgICAgICAgcGVyZm9ybWFuY2VQcm9maWxlci5jcmVhdGVDb21wb25lbnRQcm9maWxlKGNvbXBvbmVudE5hbWUsIG1ldHJpY3MpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBFeHBvcnQgcHJvZmlsaW5nIGRhdGFcbiAgICAgIGNvbnN0IGV4cG9ydGVkRGF0YSA9IHBlcmZvcm1hbmNlUHJvZmlsZXIuZXhwb3J0UHJvZmlsaW5nRGF0YSgpO1xuICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IEpTT04ucGFyc2UoZXhwb3J0ZWREYXRhKTtcbiAgICAgIFxuICAgICAgbG9nZ2VyLmluZm8oYPCfk6QgRXhwb3J0ZWQgUHJvZmlsaW5nIERhdGE6YCk7XG4gICAgICBsb2dnZXIuaW5mbyhgLSBQcm9maWxlczogJHtwYXJzZWREYXRhLnByb2ZpbGVzLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIE1ldHJpY3M6ICR7cGFyc2VkRGF0YS5tZXRyaWNzLmxlbmd0aH1gKTtcbiAgICAgIGxvZ2dlci5pbmZvKGAtIEFuYWx5c2lzIEdlbmVyYXRlZDogJHshIXBhcnNlZERhdGEuYW5hbHlzaXN9YCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChwYXJzZWREYXRhLnByb2ZpbGVzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEubWV0cmljcykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwYXJzZWREYXRhLmFuYWx5c2lzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEucHJvZmlsZXMubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KHBhcnNlZERhdGEubWV0cmljcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbiJdLCJuYW1lcyI6WyJiZWZvcmVBbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndpbmRvdyIsInZhbHVlIiwiZ2V0SXRlbSIsImplc3QiLCJmbiIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiY2xlYXIiLCJ3cml0YWJsZSIsIm5hdmlnYXRvciIsImdsb2JhbCIsImZldGNoIiwidXJsIiwiaW5jbHVkZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm9rIiwianNvbiIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImNhdGVnb3J5IiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic291cmNlIiwic3VjY2VzcyIsImFuYWx5dGljcyIsInRvdGFsVmlld3MiLCJlbmdhZ2VtZW50IiwidXNlclNhdGlzZmFjdGlvbiIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsInBlcmZvcm1hbmNlUHJvZmlsZXIiLCJpdCIsImNvbXBvbmVudE5hbWUiLCJzdGFydFByb2ZpbGluZyIsInN0YXJ0VGltZSIsInBlcmZvcm1hbmNlIiwibm93Iiwic3RhcnRNZW1vcnkiLCJtZW1vcnkiLCJ1c2VkSlNIZWFwU2l6ZSIsImFjdCIsInJlbmRlciIsIkJyb3dzZXJSb3V0ZXIiLCJTdXBlcmlvck1vYmlsZUZlZWQiLCJlbmRUaW1lIiwiZW5kTWVtb3J5IiwibWV0cmljcyIsInN0b3BQcm9maWxpbmciLCJsb2dnZXIiLCJpbmZvIiwidG90YWxSZW5kZXJUaW1lIiwidG9GaXhlZCIsIm1lbW9yeVBlYWsiLCJvcHRpbWl6YXRpb25TY29yZSIsInJlUmVuZGVyVHJpZ2dlcnMiLCJsZW5ndGgiLCJwZXJmb3JtYW5jZUJvdHRsZW5lY2tzIiwicmVjb21tZW5kYXRpb25zIiwiZXhwZWN0IiwidG9CZSIsInJlbmRlckNvdW50IiwidG9CZUdyZWF0ZXJUaGFuIiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJwcm9maWxlIiwiY3JlYXRlQ29tcG9uZW50UHJvZmlsZSIsIm5hbWUiLCJkZXB0aCIsImlzT3B0aW1pemVkIiwib3B0aW1pemF0aW9uUG90ZW50aWFsIiwidG9Db250YWluIiwiY29tcG9uZW50cyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImFuYWx5c2lzIiwiZ2VuZXJhdGVQZXJmb3JtYW5jZUFuYWx5c2lzIiwib3ZlcmFsbFNjb3JlIiwiY3JpdGljYWxJc3N1ZXMiLCJvcHRpbWl6YXRpb25PcHBvcnR1bml0aWVzIiwibWVtb3J5TGVha3MiLCJyZW5kZXJPcHRpbWl6YXRpb25zIiwibmV0d29ya09wdGltaXphdGlvbnMiLCJhY2Nlc3NpYmlsaXR5T3B0aW1pemF0aW9ucyIsImVzdGltYXRlZEltcHJvdmVtZW50IiwiQXJyYXkiLCJpc0FycmF5IiwibWVtb3J5QXZlcmFnZSIsImZpbHRlciIsImIiLCJtZW1vcnlSZWNvbW1lbmRhdGlvbnMiLCJyIiwiZm9yRWFjaCIsInJlYyIsImkiLCJtZW1vcnlMZWFrSW5kaWNhdG9ycyIsImluZGljYXRvciIsIm5ldHdvcmtSZWNvbW1lbmRhdGlvbnMiLCJ0b0JlRGVmaW5lZCIsImFjY2Vzc2liaWxpdHlSZWNvbW1lbmRhdGlvbnMiLCJzY3JlZW5SZWFkZXJSZWNvbW1lbmRhdGlvbnMiLCJhdmVyYWdlUmVuZGVyVGltZSIsImV4cG9ydGVkRGF0YSIsImV4cG9ydFByb2ZpbGluZ0RhdGEiLCJwYXJzZWREYXRhIiwiSlNPTiIsInBhcnNlIiwicHJvZmlsZXMiXSwibWFwcGluZ3MiOiJBQUFBOztDQUVDOzs7Ozs4REFFaUI7d0JBQzJCO2dDQUNmOzJFQUNDO3FDQUN3Qzt3QkFDaEQ7Ozs7OztBQUV2QiwyQ0FBMkM7QUFDM0NBLFVBQVU7SUFDUixnREFBZ0Q7SUFDaERDLE9BQU9DLGNBQWMsQ0FBQ0MsUUFBUSxnQkFBZ0I7UUFDNUNDLE9BQU87WUFDTEMsU0FBU0MsS0FBS0MsRUFBRTtZQUNoQkMsU0FBU0YsS0FBS0MsRUFBRTtZQUNoQkUsWUFBWUgsS0FBS0MsRUFBRTtZQUNuQkcsT0FBT0osS0FBS0MsRUFBRTtRQUNoQjtRQUNBSSxVQUFVO0lBQ1o7SUFFQSxtQ0FBbUM7SUFDbkNWLE9BQU9DLGNBQWMsQ0FBQ1UsV0FBVyxVQUFVO1FBQ3pDUixPQUFPO1FBQ1BPLFVBQVU7SUFDWjtJQUVBLGlDQUFpQztJQUNqQ0UsT0FBT0MsS0FBSyxHQUFHUixLQUFLQyxFQUFFLENBQUMsQ0FBQ1E7UUFDdEIsSUFBSUEsSUFBSUMsUUFBUSxDQUFDLGVBQWU7WUFDOUIsT0FBT0MsUUFBUUMsT0FBTyxDQUFDO2dCQUNyQkMsSUFBSTtnQkFDSkMsTUFBTSxJQUFNSCxRQUFRQyxPQUFPLENBQUM7d0JB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