# Quick Onboarding - Choices Project

**Node 22.19.0 + npm 10.9.3 is the law of the land.**

## Setup (Volta Recommended)

```bash
# Install Volta
curl https://get.volta.sh | bash
volta install node@22.19.0 npm@10.9.3

# Verify
node -v && npm -v
```

**That's it!** Volta automatically switches to the correct versions when you `cd` into the repo.

## Fallback: nvm + Corepack

Only use this if Volta doesn't work for you:

```bash
nvm install 22.19.0 && nvm use 22.19.0
corepack enable
corepack prepare npm@10.9.3 --activate
node -v && npm -v
```

## Why This Matters

- **npm 10's** peer/override behavior and lockfile churn differ from npm 8/9â€”pinning avoids "works here, fails in CI"
- **Node 22** has different runtime/ABI vs 18/20; native deps (sharp, esbuild) and Next.js features can break if someone uses the wrong Node
- **Corepack + packageManager** ensures every agent actually runs npm 10.9.3, not whatever their global npm is
- **Volta/nvm files** make it muscle-memory-free: `cd` into repo = correct versions

## Fail-Fast Protection

The repo includes a preinstall script that will fail if you're using the wrong versions:

```bash
cd web
npm ci  # Will fail with helpful error if versions don't match
```

## CI/Docker

All CI and Docker environments use the same pinned versions to ensure consistency across all environments.

---

**Do not run with different Node/npm or commit a lockfile generated by other versions.**

## Why Volta?

- **Auto-switching**: Correct versions when you `cd` into the repo
- **Zero configuration**: Works out of the box
- **Team consistency**: Everyone gets the same versions automatically
- **No manual switching**: No need to remember `nvm use` commands
