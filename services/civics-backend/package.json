{
  "name": "@choices/civics-backend",
  "private": true,
  "type": "module",
  "description": "Stand-alone civics ingest service for the Choices platform.",
  "scripts": {
    "clean": "rm -rf build",
    "build": "tsc -p tsconfig.json",
    "lint": "tsc -p tsconfig.json --noEmit",
    "test:openstates": "npm run build --silent && node --test build/__tests__/openstates-people.test.js",
    "sample": "npm run build --silent && node build/run-sample.js",
    "prioritize": "npm run build --silent && node build/prioritize-low-quality.js",
    "preview": "npm run build --silent && node build/run-preview.js",

    "openstates:sync-people": "git -C \"$(git rev-parse --show-toplevel)\" submodule update --remote --init services/civics-backend/NEW_civics_ingest/data/openstates-people",
    "openstates:stage": "npm run build --silent && node build/scripts/openstates/stage-openstates.js",
    "openstates:merge": "npm run build --silent && node build/scripts/openstates/run-openstates-merge.js",
    "state:sync:activity": "npm run build --silent && node build/scripts/state/sync-activity.js",
    "state:sync:committees": "npm run build --silent && node build/scripts/state/sync-committees.js",
    "state:sync:contacts": "npm run build --silent && node build/scripts/state/sync-contacts.js",
    "state:sync:social": "npm run build --silent && node build/scripts/state/sync-social.js",
    "state:sync:photos": "npm run build --silent && node build/scripts/state/sync-photos.js",
    "state:sync:data-sources": "npm run build --silent && node build/scripts/state/sync-data-sources.js",
    "state:sync:voter-registration": "npm run build --silent && node build/scripts/state/sync-voter-registration.js",
    "state:sync:google-civic": "npm run build --silent && node build/scripts/state/sync-google-civic.js",
    "state:sync:google-elections": "npm run build --silent && node build/scripts/state/sync-google-elections.js",
    "state:sync:divisions": "npm run build --silent && node build/scripts/state/sync-divisions.js",
    "state:refresh": "npm run build --silent && node build/scripts/state/refresh-state.js",
    "openstates:coverage": "npm run build --silent && node build/run-openstates-coverage.js",
    "openstates:ingest": "npm run openstates:sync-people && npm run openstates:stage && npm run openstates:merge",

    "federal:enrich:congress": "npm run build --silent && node build/federal/enrich-congress-ids.js",
    "federal:enrich:finance": "npm run build --silent && node build/federal/enrich-fec-finance.js",
    "federal:enrich:google-civic": "npm run build --silent && node build/federal/enrich-google-civic.js",
    "federal:test:finance": "npm run build --silent && node build/scripts/federal/test-fec-enrichment.js",

    "ingest:full": "npm run openstates:ingest && npm run federal:enrich:congress && npm run federal:enrich:finance",

    "tools:audit:crosswalk": "npm run build --silent && node build/audit/crosswalk.js",
    "tools:report:gaps": "npm run build --silent && node build/scripts/tools/report-gaps.js",
    "tools:report:duplicates": "npm run build --silent && node build/scripts/tools/report-duplicates.js",
    "tools:fix:duplicates": "npm run build --silent && node build/scripts/tools/fix-duplicates.js",
    "tools:fix:crosswalk": "npm run build --silent && node build/scripts/tools/fix-crosswalk-corruption.js",
    "tools:inspect:schema": "npm run build --silent && node build/scripts/tools/inspect-schema.js",
    "tools:investigate:ingest": "npm run build --silent && node build/scripts/tools/investigate-ingest-flows.js",
    "tools:audit:activity": "npm run build --silent && node build/scripts/tools/audit-activity.js",
    "tools:audit:terms": "npm run build --silent && node build/scripts/tools/audit-terms.js",
    "tools:verify:migrations": "npm run build --silent && node build/scripts/tools/verify-migrations.js",
    "tools:test:bills": "npm run build --silent && node build/scripts/tools/test-bills-fetch.js",
    "tools:test:congress": "npm run build --silent && node build/scripts/tools/test-congress.js",
    "tools:test:fec-cycles": "npm run build --silent && node build/scripts/tools/test-fec-cycles.js",
    "tools:test:google-civic": "npm run build --silent && node build/scripts/federal/test-google-civic.js",
    "tools:monitor:fec": "npm run build --silent && node build/scripts/tools/monitor-fec-enrichment.js",

    "ingest:openstates": "npm run openstates:ingest",
    "ingest:qa": "npm run tools:inspect:schema && npm run tools:report:duplicates && npm run tools:audit:activity && npm run tools:audit:terms && npm run openstates:coverage -- --limit=5 && npm run preview -- --limit=5",
    "enrich:congress": "npm run federal:enrich:congress",
    "enrich:finance": "npm run federal:enrich:finance",
    "report:gaps": "npm run tools:report:gaps",
    "audit:crosswalk": "npm run tools:audit:crosswalk",
    "audit:duplicates": "npm run tools:report:duplicates",
    "fix:duplicates": "npm run tools:fix:duplicates",
    "fix:crosswalk": "npm run tools:fix:crosswalk",
    "inspect:schema": "npm run tools:inspect:schema",
    "audit:activity": "npm run tools:audit:activity",
    "audit:terms": "npm run tools:audit:terms",
    "qa:openstates": "npm run openstates:coverage",

    "sync:openstates-people": "npm run openstates:sync-people",
    "stage:openstates": "npm run openstates:stage",
    "merge:openstates": "npm run openstates:merge",
    "openstates:sync:activity": "npm run state:sync:activity",
    "openstates:sync:committees": "npm run state:sync:committees",
    "openstates:sync:contacts": "npm run state:sync:contacts",
    "openstates:sync:social": "npm run state:sync:social",
    "openstates:sync:photos": "npm run state:sync:photos",
    "openstates:sync:data-sources": "npm run state:sync:data-sources",
    "openstates:sync:google-civic": "npm run state:sync:google-civic",
    "openstates:sync:google-elections": "npm run state:sync:google-elections",
    "openstates:sync:divisions": "npm run state:sync:divisions",
    "sync:activity": "npm run state:sync:activity",
    "refresh:state": "npm run state:refresh",
    "sync:committees": "npm run state:sync:committees",
    "sync:contacts": "npm run state:sync:contacts",
    "sync:social": "npm run state:sync:social",
    "sync:photos": "npm run state:sync:photos",
    "sync:data-sources": "npm run state:sync:data-sources",
    "sync:google-civic": "npm run state:sync:google-civic",
    "sync:google-elections": "npm run state:sync:google-elections",
    "sync:divisions": "npm run state:sync:divisions"
  },
  "dependencies": {
    "@choices/civics-shared": "file:../civics-shared",
    "@supabase/supabase-js": "^2.78.0",
    "dotenv": "^17.2.3",
    "js-yaml": "^4.1.0"
  },
  "devDependencies": {
    "@types/js-yaml": "^4.0.9",
    "@types/node": "^22.10.2",
    "typescript": "^5.7.2"
  }
}
